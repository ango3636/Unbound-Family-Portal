!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.TelerikBlazor=e():t.TelerikBlazor=e()}(self,(()=>(()=>{var __webpack_modules__={5713:(t,e,n)=>{"use strict";n.d(e,{A:()=>vt});var i=n(461),r={Promise},o={base64:!0,array:!0,string:!0,nodebuffer:!1,nodestream:!1,get arraybuffer(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},get uint8array(){return"undefined"!=typeof Uint8Array},get blob(){return s()}},s=function(){var t;if("undefined"==typeof ArrayBuffer)t=!1;else{var e=new ArrayBuffer(0);try{t=0===new Blob([e],{type:"application/zip"}).size}catch(e){t=!1}}return s=function(){return t},t},a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=function(t){for(var e,n,i,r,o,s,l,c=[],h=0,u=t.length,d=u,p="string"!=typeof t;h<t.length;)d=u-h,p?(e=t[h++],n=h<u?t[h++]:0,i=h<u?t[h++]:0):(e=t.charCodeAt(h++),n=h<u?t.charCodeAt(h++):0,i=h<u?t.charCodeAt(h++):0),r=e>>2,o=(3&e)<<4|n>>4,s=d>1?(15&n)<<2|i>>6:64,l=d>2?63&i:64,c.push(a.charAt(r)+a.charAt(o)+a.charAt(s)+a.charAt(l));return c.join("")};var c=function(t,e){return w("blob"),new Blob([t],{type:e})};function h(t){return t}function u(t,e){for(var n=0;n<t.length;++n)e[n]=255&t.charCodeAt(n);return e}function d(t,e,n){var i=[],r=0,o=t.length;if(o<=n)return String.fromCharCode.apply(null,t);for(;r<o;)"array"===e?i.push(String.fromCharCode.apply(null,t.slice(r,Math.min(r+n,o)))):i.push(String.fromCharCode.apply(null,t.subarray(r,Math.min(r+n,o)))),r+=n;return i.join("")}var p=function(){var t;try{t=o.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){t=!1}return p=function(){return t},t};function f(t){var e=65536,n=b(t),i=!0;if("uint8array"===n&&(i=p()),i)for(;e>1;)try{return d(t,n,e)}catch(t){e=Math.floor(e/2)}return function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e}(t)}var g=f;function m(t,e){for(var n=0;n<t.length;n++)e[n]=t[n];return e}var y={string:{string:h,array:function(t){return u(t,new Array(t.length))},arraybuffer:function(t){return y.string.uint8array(t).buffer},uint8array:function(t){return u(t,new Uint8Array(t.length))}},array:{string:f,array:h,arraybuffer:function(t){return new Uint8Array(t).buffer},uint8array:function(t){return new Uint8Array(t)}},arraybuffer:{string:function(t){return f(new Uint8Array(t))},array:function(t){return m(new Uint8Array(t),new Array(t.byteLength))},arraybuffer:h,uint8array:function(t){return new Uint8Array(t)}},uint8array:{string:f,array:function(t){return m(t,new Array(t.length))},arraybuffer:function(t){return t.buffer},uint8array:h}},v=function(t,e){if(e||(e=""),!t)return e;w(t);var n=b(e);return y[n][t](e)},b=function(t){return"string"==typeof t?"string":"[object Array]"===Object.prototype.toString.call(t)?"array":o.uint8array&&t instanceof Uint8Array?"uint8array":o.arraybuffer&&t instanceof ArrayBuffer?"arraybuffer":void 0},w=function(t){if(!o[t.toLowerCase()])throw new Error(t+" is not supported by this platform")},x=65535,_=-1,S=function(t){var e,n,i="";for(n=0;n<(t||"").length;n++)i+="\\x"+((e=t.charCodeAt(n))<16?"0":"")+e.toString(16).toUpperCase();return i},C=function(t,e,n){setTimeout((function(){t.apply(n||null,e||[])}),0)},k=function(){var t,e,n=arguments,i={};for(t=0;t<arguments.length;t++)for(e in arguments[t])Object.hasOwnProperty.call(n[t],e)&&void 0===i[e]&&(i[e]=n[t][e]);return i},A=function(t,e,n,i,s){return r.Promise.resolve(e).then((function(t){return o.blob&&(t instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(t)))&&"undefined"!=typeof FileReader?new r.Promise((function(e,n){var i=new FileReader;i.onload=function(t){e(t.target.result)},i.onerror=function(t){n(t.target.error)},i.readAsArrayBuffer(t)})):t})).then((function(e){var l,c=b(e);return c?("arraybuffer"===c?e=v("uint8array",e):"string"===c&&(s?e=function(t){var e,n,i,r,s,l,c=0,h=0,u="data:";if(t.substr(0,5)===u)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"")).length/4;if(t.charAt(t.length-1)===a.charAt(64)&&p--,t.charAt(t.length-2)===a.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=o.uint8array?new Uint8Array(0|p):new Array(0|p);c<t.length;)e=a.indexOf(t.charAt(c++))<<2|(r=a.indexOf(t.charAt(c++)))>>4,n=(15&r)<<4|(s=a.indexOf(t.charAt(c++)))>>2,i=(3&s)<<6|(l=a.indexOf(t.charAt(c++))),d[h++]=e,64!==s&&(d[h++]=n),64!==l&&(d[h++]=i);return d}(e):n&&!0!==i&&(e=u(l=e,o.uint8array?new Uint8Array(l.length):new Array(l.length)))),e):r.Promise.reject(new Error("Can't read the data of '"+t+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))},E=function(t){this.name=t||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null};E.prototype.push=function(t){this.emit("data",t)},E.prototype.end=function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(t){this.emit("error",t)}return!0},E.prototype.error=function(t){return!this.isFinished&&(this.isPaused?this.generatedError=t:(this.isFinished=!0,this.emit("error",t),this.previous&&this.previous.error(t),this.cleanUp()),!0)},E.prototype.on=function(t,e){return this._listeners[t].push(e),this},E.prototype.cleanUp=function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},E.prototype.emit=function(t,e){if(this._listeners[t])for(var n=0;n<this._listeners[t].length;n++)this._listeners[t][n].call(this,e)},E.prototype.pipe=function(t){return t.registerPrevious(this)},E.prototype.registerPrevious=function(t){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=t.streamInfo,this.mergeStreamInfo(),this.previous=t;var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.end()})),t.on("error",(function(t){e.error(t)})),this},E.prototype.pause=function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},E.prototype.resume=function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var t=!1;return this.generatedError&&(this.error(this.generatedError),t=!0),this.previous&&this.previous.resume(),!t},E.prototype.flush=function(){},E.prototype.processChunk=function(t){this.push(t)},E.prototype.withStreamInfo=function(t,e){return this.extraStreamInfo[t]=e,this.mergeStreamInfo(),this},E.prototype.mergeStreamInfo=function(){for(var t in this.extraStreamInfo)this.extraStreamInfo.hasOwnProperty(t)&&(this.streamInfo[t]=this.extraStreamInfo[t])},E.prototype.lock=function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},E.prototype.toString=function(){var t="Worker "+this.name;return this.previous?this.previous+" -> "+t:t};var T=function(t){for(var e=new Array(256),n=0;n<256;n++)e[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;return e[254]=e[254]=1,T=function(t){return e[t]},e[t]},M=function(t){return function(t){var e,n,i,r,s,a=t.length,l=0;for(r=0;r<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),l+=n<128?1:n<2048?2:n<65536?3:4;for(e=o.uint8array?new Uint8Array(l):new Array(l),s=0,r=0;s<l;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<a&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[s++]=n:n<2048?(e[s++]=192|n>>>6,e[s++]=128|63&n):n<65536?(e[s++]=224|n>>>12,e[s++]=128|n>>>6&63,e[s++]=128|63&n):(e[s++]=240|n>>>18,e[s++]=128|n>>>12&63,e[s++]=128|n>>>6&63,e[s++]=128|63&n);return e}(t)},O=function(t){return function(t){var e,n,i,r,o=t.length,s=new Array(2*o);for(n=0,e=0;e<o;)if((i=t[e++])<128)s[n++]=i;else if((r=T(i))>4)s[n++]=65533,e+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&e<o;)i=i<<6|63&t[e++],r--;r>1?s[n++]=65533:i<65536?s[n++]=i:(i-=65536,s[n++]=55296|i>>10&1023,s[n++]=56320|1023&i)}return s.length!==n&&(s.subarray?s=s.subarray(0,n):s.length=n),g(s)}(t=v(o.uint8array?"uint8array":"array",t))},I=function(t){function e(){t.call(this,"utf-8 decode"),this.leftOver=null}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){var e=v(o.uint8array?"uint8array":"array",t.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var n=e;(e=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),e.set(n,this.leftOver.length)}else e=this.leftOver.concat(e);this.leftOver=null}var i=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+T(t[n])>e?n:e}(e),r=e;i!==e.length&&(o.uint8array?(r=e.subarray(0,i),this.leftOver=e.subarray(i,e.length)):(r=e.slice(0,i),this.leftOver=e.slice(i,e.length))),this.push({data:O(r),meta:t.meta})},e.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:O(this.leftOver),meta:{}}),this.leftOver=null)},e}(E),D=function(t){function e(){t.call(this,"utf-8 encode")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.push({data:M(t.data),meta:t.meta})},e}(E),F=function(t){function e(e){t.call(this,"ConvertWorker to "+e),this.destType=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.push({data:v(this.destType,t.data),meta:t.meta})},e}(E);function P(t,e){return new r.Promise((function(n,i){var r=[],o=t._internalType,s=t._outputType,a=t._mimeType;t.on("data",(function(t,n){r.push(t),e&&e(n)})).on("error",(function(t){r=[],i(t)})).on("end",(function(){try{var t=function(t,e,n){switch(t){case"blob":return c(v("arraybuffer",e),n);case"base64":return l(e);default:return v(t,e)}}(s,function(t,e){var n,i=0,r=null,o=0;for(n=0;n<e.length;n++)o+=e[n].length;switch(t){case"string":return e.join("");case"array":return Array.prototype.concat.apply([],e);case"uint8array":for(r=new Uint8Array(o),n=0;n<e.length;n++)r.set(e[n],i),i+=e[n].length;return r;default:throw new Error("concat : unsupported type '"+t+"'")}}(o,r),a);n(t)}catch(t){i(t)}r=[]})).resume()}))}var R=function(t,e,n){var i=e;switch(e){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string"}try{this._internalType=i,this._outputType=e,this._mimeType=n,w(i),this._worker=t.pipe(new F(i)),t.lock()}catch(t){this._worker=new E("error"),this._worker.error(t)}};R.prototype.accumulate=function(t){return P(this,t)},R.prototype.on=function(t,e){var n=this;return"data"===t?this._worker.on(t,(function(t){e.call(n,t.data,t.meta)})):this._worker.on(t,(function(){C(e,arguments,n)})),this},R.prototype.resume=function(){return C(this._worker.resume,[],this._worker),this},R.prototype.pause=function(){return this._worker.pause(),this};var L=Object.freeze({__proto__:null,base64:!1,binary:!1,dir:!1,createFolders:true,date:null,compression:null,compressionOptions:null,comment:null,unixPermissions:null,dosPermissions:null}),N=function(t){function e(e){t.call(this,"DataWorker");var n=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(t){n.dataIsReady=!0,n.data=t,n.max=t&&t.length||0,n.type=b(t),n.isPaused||n._tickAndRepeat()}),(function(t){n.error(t)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this.data=null},e.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,C(this._tickAndRepeat,[],this)),!0)},e.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(C(this._tickAndRepeat,[],this),this._tickScheduled=!0))},e.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var t=null,e=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,e);break;case"uint8array":t=this.data.subarray(this.index,e);break;case"array":t=this.data.slice(this.index,e)}return this.index=e,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})},e}(E),B=function(t){function e(e){t.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(e){if(e){var n=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=n+e.data.length}t.prototype.processChunk.call(this,e)},e}(E),j=function(){for(var t=[],e=0;e<256;e++){for(var n=e,i=0;i<8;i++)n=1&n?3988292384^n>>>1:n>>>1;t[e]=n}return j=function(){return t},t};function z(t,e){return void 0!==t&&t.length?"string"!==b(t)?function(t,e,n,i){var r=j(),o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}(0|e,t,t.length,0):function(t,e,n,i){var r=j(),o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^r[255&(t^e.charCodeAt(s))];return-1^t}(0|e,t,t.length,0):0}var $=function(t){function e(){t.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.streamInfo.crc32=z(t.data,this.streamInfo.crc32||0),this.push(t)},e}(E),H=function(t,e,n,i,r){this.compressedSize=t,this.uncompressedSize=e,this.crc32=n,this.compression=i,this.compressedContent=r};H.prototype.getContentWorker=function(){var t=new N(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new B("data_length")),e=this;return t.on("end",(function(){if(this.streamInfo.data_length!==e.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),t},H.prototype.getCompressedWorker=function(){return new N(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)},H.createWorkerFrom=function(t,e,n){return t.pipe(new $).pipe(new B("uncompressedSize")).pipe(e.compressWorker(n)).pipe(new B("compressedSize")).withStreamInfo("compression",e)};var U=function(t,e,n){this.name=t,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=e,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}};U.prototype.internalStream=function(t){var e=null,n="string";try{if(!t)throw new Error("No output type specified.");var i="string"===(n=t.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),e=this._decompressWorker();var r=!this._dataBinary;r&&!i&&(e=e.pipe(new D)),!r&&i&&(e=e.pipe(new I))}catch(t){(e=new E("error")).error(t)}return new R(e,n,"")},U.prototype.async=function(t,e){return this.internalStream(t).accumulate(e)},U.prototype._compressWorker=function(t,e){if(this._data instanceof H&&this._data.compression.magic===t.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new D)),H.createWorkerFrom(n,t,e)},U.prototype._decompressWorker=function(){return this._data instanceof H?this._data.getContentWorker():this._data instanceof E?this._data:new N(this._data)};var V=function(){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array?"uint8array":"array";V=function(){return t}},W=function(t){function e(e,n){t.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=n,this.meta={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.processChunk=function(t){this.meta=t.meta,null===this._pako&&this._createPako(),this._pako.push(v(V(),t.data),!1)},e.prototype.flush=function(){t.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},e.prototype.cleanUp=function(){t.prototype.cleanUp.call(this),this._pako=null},e.prototype._createPako=function(){var t=this,e={raw:!0,level:this._pakoOptions.level||-1};this._pako="Deflate"===this._pakoAction?new i.Gy(e):new i.EL(e),this._pako.onData=function(e){t.push({data:e,meta:t.meta})}},e}(E),q={magic:"\b\0",compressWorker:function(t){return new W("Deflate",t)},uncompressWorker:function(){return new W("Inflate",{})}},K={STORE:{magic:"\0\0",compressWorker:function(){return new E("STORE compression")},uncompressWorker:function(){return new E("STORE decompression")}},DEFLATE:q},X="PK",G="PK",Y="PK",J="PK",Z="PK",Q=function(t,e){var n,i="";for(n=0;n<e;n++)i+=String.fromCharCode(255&t),t>>>=8;return i},tt=function(t,e,n,i,r,o){var s,a,l=t.file,c=t.compression,h=o!==M,u=v("string",o(l.name)),d=v("string",M(l.name)),p=l.comment,f=v("string",o(p)),g=v("string",M(p)),m=d.length!==l.name.length,y=g.length!==p.length,b="",w="",x="",_=l.dir,S=l.date,C={crc32:0,compressedSize:0,uncompressedSize:0};e&&!n||(C.crc32=t.crc32,C.compressedSize=t.compressedSize,C.uncompressedSize=t.uncompressedSize);var k=0;e&&(k|=8),h||!m&&!y||(k|=2048);var A=0,E=0;_&&(A|=16),"UNIX"===r?(E=798,A|=function(t,e){var n=t;return t||(n=e?16893:33204),(65535&n)<<16}(l.unixPermissions,_)):(E=20,A|=function(t,e){return 63&(t||0)}(l.dosPermissions)),s=S.getUTCHours(),s<<=6,s|=S.getUTCMinutes(),s<<=5,s|=S.getUTCSeconds()/2,a=S.getUTCFullYear()-1980,a<<=4,a|=S.getUTCMonth()+1,a<<=5,a|=S.getUTCDate(),m&&(w=Q(1,1)+Q(z(u),4)+d,b+="up"+Q(w.length,2)+w),y&&(x=Q(1,1)+Q(z(f),4)+g,b+="uc"+Q(x.length,2)+x);var T="";return T+="\n\0",T+=Q(k,2),T+=c.magic,T+=Q(s,2),T+=Q(a,2),T+=Q(C.crc32,4),T+=Q(C.compressedSize,4),T+=Q(C.uncompressedSize,4),T+=Q(u.length,2),T+=Q(b.length,2),{fileRecord:X+T+u+b,dirRecord:G+Q(E,2)+T+Q(f.length,2)+"\0\0\0\0"+Q(A,4)+Q(i,4)+u+b+f}},et=function(t){return"PK\b"+Q(t.crc32,4)+Q(t.compressedSize,4)+Q(t.uncompressedSize,4)},nt=function(t){function e(e,n,i,r){t.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=n,this.zipPlatform=i,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(e){var n=e.meta.percent||0,i=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,t.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:i?(n+100*(i-r-1))/i:100}}))},e.prototype.openedSource=function(t){this.currentSourceOffset=this.bytesWritten,this.currentFile=t.file.name;var e=this.streamFiles&&!t.file.dir;if(e){var n=tt(t,e,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},e.prototype.closedSource=function(t){this.accumulate=!1;var e=this.streamFiles&&!t.file.dir,n=tt(t,e,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),e)this.push({data:et(t),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},e.prototype.flush=function(){for(var t=this.bytesWritten,e=0;e<this.dirRecords.length;e++)this.push({data:this.dirRecords[e],meta:{percent:100}});var n=this.bytesWritten-t,i=function(t,e,n,i,r){var o=v("string",r(i));return Y+"\0\0\0\0"+Q(t,2)+Q(t,2)+Q(e,4)+Q(n,4)+Q(o.length,2)+o}(this.dirRecords.length,n,t,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},e.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},e.prototype.registerPrevious=function(t){this._sources.push(t);var e=this;return t.on("data",(function(t){e.processChunk(t)})),t.on("end",(function(){e.closedSource(e.previous.streamInfo),e._sources.length?e.prepareNextSource():e.end()})),t.on("error",(function(t){e.error(t)})),this},e.prototype.resume=function(){return!!t.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},e.prototype.error=function(e){var n=this._sources;if(!t.prototype.error.call(this,e))return!1;for(var i=0;i<n.length;i++)try{n[i].error(e)}catch(t){}return!0},e.prototype.lock=function(){t.prototype.lock.call(this);for(var e=this._sources,n=0;n<e.length;n++)e[n].lock()},e}(E),it=function(t,e,n){var i=new nt(e.streamFiles,n,e.platform,e.encodeFileName),r=0;try{t.forEach((function(t,n){r++;var o=function(t,e){var n=t||e,i=K[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,e.compression),s=n.options.compressionOptions||e.compressionOptions||{},a=n.dir,l=n.date;n._compressWorker(o,s).withStreamInfo("file",{name:t,dir:a,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(i)})),i.entriesCount=r}catch(t){i.error(t)}return i},rt=function(t){this.data=t,this.length=t.length,this.index=0,this.zero=0};rt.prototype.checkOffset=function(t){this.checkIndex(this.index+t)},rt.prototype.checkIndex=function(t){if(this.length<this.zero+t||t<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+t+"). Corrupted zip ?")},rt.prototype.setIndex=function(t){this.checkIndex(t),this.index=t},rt.prototype.skip=function(t){this.setIndex(this.index+t)},rt.prototype.byteAt=function(t){},rt.prototype.readInt=function(t){var e,n=0;for(this.checkOffset(t),e=this.index+t-1;e>=this.index;e--)n=(n<<8)+this.byteAt(e);return this.index+=t,n},rt.prototype.readString=function(t){return v("string",this.readData(t))},rt.prototype.readData=function(t){},rt.prototype.lastIndexOfSignature=function(t){},rt.prototype.readAndCheckSignature=function(t){},rt.prototype.readDate=function(){var t=this.readInt(4);return new Date(Date.UTC(1980+(t>>25&127),(t>>21&15)-1,t>>16&31,t>>11&31,t>>5&63,(31&t)<<1))};var ot=function(t){function e(e){t.call(this,e);for(var n=0;n<this.data.length;n++)e[n]=255&e[n]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.byteAt=function(t){return this.data[this.zero+t]},e.prototype.lastIndexOfSignature=function(t){for(var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===e&&this.data[o+1]===n&&this.data[o+2]===i&&this.data[o+3]===r)return o-this.zero;return-1},e.prototype.readAndCheckSignature=function(t){var e=t.charCodeAt(0),n=t.charCodeAt(1),i=t.charCodeAt(2),r=t.charCodeAt(3),o=this.readData(4);return e===o[0]&&n===o[1]&&i===o[2]&&r===o[3]},e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return[];var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(rt),st=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.byteAt=function(t){return this.data.charCodeAt(this.zero+t)},e.prototype.lastIndexOfSignature=function(t){return this.data.lastIndexOf(t)-this.zero},e.prototype.readAndCheckSignature=function(t){return t===this.readData(4)},e.prototype.readData=function(t){this.checkOffset(t);var e=this.data.slice(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(rt),at=function(t){function e(e){t.call(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.readData=function(t){if(this.checkOffset(t),0===t)return new Uint8Array(0);var e=this.data.subarray(this.zero+this.index,this.zero+this.index+t);return this.index+=t,e},e}(ot);function lt(t){var e=b(t);return w(e),"string"!==e||o.uint8array?o.uint8array?new at(v("uint8array",t)):new ot(v("array",t)):new st(t)}var ct=function(t,e){this.options=t,this.loadOptions=e};ct.prototype.isEncrypted=function(){return 1==(1&this.bitFlag)},ct.prototype.useUTF8=function(){return 2048==(2048&this.bitFlag)},ct.prototype.readLocalPart=function(t){var e,n;if(t.skip(22),this.fileNameLength=t.readInt(2),n=t.readInt(2),this.fileName=t.readData(this.fileNameLength),t.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(e=function(t){for(var e in K)if(K.hasOwnProperty(e)&&K[e].magic===t)return K[e];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+S(this.compressionMethod)+" unknown (inner file : "+v("string",this.fileName)+")");this.decompressed=new H(this.compressedSize,this.uncompressedSize,this.crc32,e,t.readData(this.compressedSize))},ct.prototype.readCentralPart=function(t){this.versionMadeBy=t.readInt(2),t.skip(2),this.bitFlag=t.readInt(2),this.compressionMethod=t.readString(2),this.date=t.readDate(),this.crc32=t.readInt(4),this.compressedSize=t.readInt(4),this.uncompressedSize=t.readInt(4);var e=t.readInt(2);if(this.extraFieldsLength=t.readInt(2),this.fileCommentLength=t.readInt(2),this.diskNumberStart=t.readInt(2),this.internalFileAttributes=t.readInt(2),this.externalFileAttributes=t.readInt(4),this.localHeaderOffset=t.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");t.skip(e),this.readExtraFields(t),this.parseZIP64ExtraField(t),this.fileComment=t.readData(this.fileCommentLength)},ct.prototype.processAttributes=function(){this.unixPermissions=null,this.dosPermissions=null;var t=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===t&&(this.dosPermissions=63&this.externalFileAttributes),3===t&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},ct.prototype.parseZIP64ExtraField=function(t){if(this.extraFields[1]){var e=lt(this.extraFields[1].value);this.uncompressedSize===_&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===_&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===_&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===_&&(this.diskNumberStart=e.readInt(4))}},ct.prototype.readExtraFields=function(t){var e,n,i,r=t.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});t.index<r;)e=t.readInt(2),n=t.readInt(2),i=t.readData(n),this.extraFields[e]={id:e,length:n,value:i}},ct.prototype.handleUTF8=function(){var t=o.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=O(this.fileName),this.fileCommentStr=O(this.fileComment);else{var e=this.findExtraFieldUnicodePath();if(null!==e)this.fileNameStr=e;else{var n=v(t,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var i=this.findExtraFieldUnicodeComment();if(null!==i)this.fileCommentStr=i;else{var r=v(t,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(r)}}},ct.prototype.findExtraFieldUnicodePath=function(){var t=this.extraFields[28789];if(t){var e=lt(t.value);return 1!==e.readInt(1)||z(this.fileName)!==e.readInt(4)?null:O(e.readData(t.length-5))}return null},ct.prototype.findExtraFieldUnicodeComment=function(){var t=this.extraFields[25461];if(t){var e=lt(t.value);return 1!==e.readInt(1)||z(this.fileComment)!==e.readInt(4)?null:O(e.readData(t.length-5))}return null};var ht=function(t){this.files=[],this.loadOptions=t};function ut(t){return new r.Promise((function(e,n){var i=t.decompressed.getContentWorker().pipe(new $);i.on("error",(function(t){n(t)})).on("end",(function(){i.streamInfo.crc32!==t.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):e()})).resume()}))}function dt(t,e){var n=this;return e=k(e||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:O}),A("the loaded zip file",t,!0,e.optimizedBinaryString,e.base64).then((function(t){var n=new ht(e);return n.load(t),n})).then((function(t){var n=[r.Promise.resolve(t)],i=t.files;if(e.checkCRC32)for(var o=0;o<i.length;o++)n.push(ut(i[o]));return r.Promise.all(n)})).then((function(t){for(var i=t.shift(),r=i.files,o=0;o<r.length;o++){var s=r[o];n.file(s.fileNameStr,s.decompressed,{binary:!0,optimizedBinaryString:!0,date:s.date,dir:s.dir,comment:s.fileCommentStr.length?s.fileCommentStr:null,unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions,createFolders:e.createFolders})}return i.zipComment.length&&(n.comment=i.zipComment),n}))}ht.prototype.checkSignature=function(t){if(!this.reader.readAndCheckSignature(t)){this.reader.index-=4;var e=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+S(e)+", expected "+S(t)+")")}},ht.prototype.isSignature=function(t,e){var n=this.reader.index;this.reader.setIndex(t);var i=this.reader.readString(4)===e;return this.reader.setIndex(n),i},ht.prototype.readBlockEndOfCentral=function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var t=this.reader.readData(this.zipCommentLength),e=o.uint8array?"uint8array":"array",n=v(e,t);this.zipComment=this.loadOptions.decodeFileName(n)},ht.prototype.readBlockZip64EndOfCentral=function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var t,e,n,i=this.zip64EndOfCentralSize-44;0<i;)t=this.reader.readInt(2),e=this.reader.readInt(4),n=this.reader.readData(e),this.zip64ExtensibleData[t]={id:t,length:e,value:n}},ht.prototype.readBlockZip64EndOfCentralLocator=function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},ht.prototype.readLocalFiles=function(){var t,e;for(t=0;t<this.files.length;t++)e=this.files[t],this.reader.setIndex(e.localHeaderOffset),this.checkSignature(X),e.readLocalPart(this.reader),e.handleUTF8(),e.processAttributes()},ht.prototype.readCentralDir=function(){var t;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(G);)(t=new ct({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(t);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},ht.prototype.readEndOfCentral=function(){var t=this.reader.lastIndexOfSignature(Y);if(t<0)throw!this.isSignature(0,X)?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory");this.reader.setIndex(t);var e=t;if(this.checkSignature(Y),this.readBlockEndOfCentral(),this.diskNumber===x||this.diskWithCentralDirStart===x||this.centralDirRecordsOnThisDisk===x||this.centralDirRecords===x||this.centralDirSize===_||this.centralDirOffset===_){if(this.zip64=!0,(t=this.reader.lastIndexOfSignature(J))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(t),this.checkSignature(J),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Z)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Z),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Z),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var i=e-n;if(i>0)this.isSignature(e,G)||(this.reader.zero=i);else if(i<0)throw new Error("Corrupted zip: missing "+Math.abs(i)+" bytes.")},ht.prototype.prepareReader=function(t){this.reader=lt(t)},ht.prototype.load=function(t){this.prepareReader(t),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()};var pt=function(t,e,n){var i,r=b(e),o=k(n||{},L);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(t=gt(t)),o.createFolders&&(i=ft(t))&&mt.call(this,i,!0);var s="string"===r&&!1===o.binary&&!1===o.base64;n&&void 0!==n.binary||(o.binary=!s),(e instanceof H&&0===e.uncompressedSize||o.dir||!e||0===e.length)&&(o.base64=!1,o.binary=!0,e="",o.compression="STORE",r="string");var a=null;a=e instanceof H||e instanceof E?e:A(t,e,o.binary,o.optimizedBinaryString,o.base64);var l=new U(t,a,o);this.files[t]=l},ft=function(t){"/"===t.slice(-1)&&(t=t.substring(0,t.length-1));var e=t.lastIndexOf("/");return e>0?t.substring(0,e):""},gt=function(t){return"/"!==t.slice(-1)&&(t+="/"),t},mt=function(t,e){return e=void 0===e||e,t=gt(t),this.files[t]||pt.call(this,t,null,{dir:!0,createFolders:e}),this.files[t]};function yt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}var vt=function t(){if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new t;for(var n in this)"function"!=typeof this[n]&&(e[n]=this[n]);return e}},bt={support:{configurable:!0},defaults:{configurable:!0},version:{configurable:!0},external:{configurable:!0}};vt.prototype.load=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},vt.prototype.forEach=function(t){var e,n,i;for(e in this.files)i=this.files[e],(n=e.slice(this.root.length,e.length))&&e.slice(0,this.root.length)===this.root&&t(n,i)},vt.prototype.filter=function(t){var e=[];return this.forEach((function(n,i){t(n,i)&&e.push(i)})),e},vt.prototype.file=function(t,e,n){if(1===arguments.length){if(yt(t)){var i=t;return this.filter((function(t,e){return!e.dir&&i.test(t)}))}var r=this.files[this.root+t];return r&&!r.dir?r:null}return t=this.root+t,pt.call(this,t,e,n),this},vt.prototype.folder=function(t){if(!t)return this;if(yt(t))return this.filter((function(e,n){return n.dir&&t.test(e)}));var e=this.root+t,n=mt.call(this,e),i=this.clone();return i.root=n.name,i},vt.prototype.remove=function(t){t=this.root+t;var e=this.files[t];if(e||("/"!==t.slice(-1)&&(t+="/"),e=this.files[t]),e&&!e.dir)delete this.files[t];else for(var n=this.filter((function(e,n){return n.name.slice(0,t.length)===t})),i=0;i<n.length;i++)delete this.files[n[i].name];return this},vt.prototype.generate=function(t){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},vt.prototype.generateInternalStream=function(t){var e,n={};try{if((n=k(t||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:M})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");w(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var i=n.comment||this.comment||"";e=it(this,n,i)}catch(t){(e=new E("error")).error(t)}return new R(e,n.type||"string",n.mimeType)},vt.prototype.generateAsync=function(t,e){return this.generateInternalStream(t).accumulate(e)},vt.prototype.loadAsync=function(t,e){return dt.apply(this,[t,e])},vt.loadAsync=function(t,e){return(new vt).loadAsync(t,e)},bt.support.get=function(){return o},bt.defaults.get=function(){return L},bt.version.get=function(){return"3.2.2-esm"},bt.external.get=function(){return r},Object.defineProperties(vt,bt)},6294:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Aggregates:()=>To,ArcGauge:()=>rg,ArcScale:()=>Zf,AreaChart:()=>cl,AreaSegment:()=>il,ArrowLinearPointer:()=>vf,Axis:()=>Yi,AxisGroupRangeTracker:()=>ul,AxisLabel:()=>Mi,Bar:()=>ml,BarChart:()=>Cl,BarLabel:()=>pl,BarLinearPointer:()=>Cf,Barcode:()=>Xg,Box:()=>Tn,BoxElement:()=>ii,BoxPlot:()=>Ol,BoxPlotChart:()=>Pl,BubbleChart:()=>Hl,Bullet:()=>ql,BulletChart:()=>Xl,Candlestick:()=>Al,CandlestickChart:()=>Tl,CategoricalChart:()=>Pa,CategoricalErrorBar:()=>da,CategoricalPlotArea:()=>gh,CategoryAxis:()=>Ir,Chart:()=>pp,ChartAxis:()=>xo,ChartContainer:()=>nc,ChartElement:()=>ei,ChartPane:()=>Co,ChartPlotArea:()=>ko,ChartService:()=>Ui,CircularGauge:()=>sg,Class:()=>Nt.A,ClipAnimation:()=>Za,ClusterLayout:()=>wl,Crosshair:()=>tc,CrosshairTooltip:()=>Zl,CurveProcessor:()=>bo,DateCategoryAxis:()=>Ur,DateValueAxis:()=>Zr,DefaultAggregates:()=>vc,DomEventsBuilder:()=>qi,DonutChart:()=>Gu,DonutPlotArea:()=>Ju,DonutSegment:()=>Ku,ErrorBarBase:()=>ha,ErrorRangeCalculator:()=>Ro,Extent:()=>av,FloatElement:()=>gi,FontLoader:()=>ie,FormatService:()=>zi,Gauge:()=>tf,Gradients:()=>hi,HashMap:()=>Ct,Highlight:()=>wh,InstanceObserver:()=>Ot,IntlService:()=>Li,Legend:()=>Zh,LegendItem:()=>Gh,LegendLayout:()=>Bh,LineChart:()=>el,LinePoint:()=>ja,LineSegment:()=>$a,LinearGauge:()=>Ef,LinearPointer:()=>df,LinearScale:()=>lf,Location:()=>ky,LogarithmicAxis:()=>io,Map:()=>fb,Matrix:()=>Pe,MousewheelZoom:()=>Th,Navigator:()=>Ip,NavigatorHint:()=>kp,Note:()=>Ii,NumericAxis:()=>Yr,OHLCChart:()=>jc,OHLCPoint:()=>Nc,Observable:()=>Je,Pane:()=>oc,Pannable:()=>Ch,PieAnimation:()=>pu,PieChart:()=>Uu,PieChartMixin:()=>zu,PiePlotArea:()=>Wu,PieSegment:()=>Bu,PlotAreaBase:()=>uc,PlotAreaEventsMixin:()=>pc,PlotAreaFactory:()=>tu,Point:()=>Cn,PointEventsMixin:()=>La,PolarAxis:()=>lo,QRCode:()=>fy,RadarCategoryAxis:()=>so,RadarLogarithmicAxis:()=>mo,RadarNumericAxis:()=>fo,RadialGauge:()=>Yf,RadialPointer:()=>Kf,RadialScale:()=>zf,RangeAreaChart:()=>Rc,RangeAreaPoint:()=>Ec,RangeBar:()=>wc,RangeBarChart:()=>_c,RangePointer:()=>ng,Ring:()=>In,RootElement:()=>pi,Sankey:()=>Hb,ScatterChart:()=>Bl,ScatterErrorBar:()=>Ll,ScatterLineChart:()=>gu,Sector:()=>Fn,Selection:()=>ru,SeriesAggregator:()=>mc,SeriesBinder:()=>Io,ShapeBuilder:()=>Bn,ShapeElement:()=>si,SharedTooltip:()=>lu,Sparkline:()=>xp,SplineAreaSegment:()=>al,SplineSegment:()=>Xa,StackWrap:()=>_l,StockChart:()=>Fp,TemplateService:()=>gt,Text:()=>wi,TextBox:()=>Ci,Title:()=>Ei,Tooltip:()=>su,UserEvents:()=>_n,WaterfallChart:()=>Uc,WaterfallSegment:()=>$c,XYPlotArea:()=>Fu,ZoomSelection:()=>Ah,addClass:()=>V,alignPathToPixel:()=>X,anyHasZIndex:()=>pa,append:()=>zt,appendIfNotNull:()=>fa,applyEventMap:()=>Ne,areNumbers:()=>ga,autoMajorUnit:()=>Sn,autoTextColor:()=>_e,barcodeValidator:()=>Yg,bindEvents:()=>$t,bindSegments:()=>ya,categoriesCount:()=>va,chartBaseTheme:()=>mw,clockwise:()=>G,constants:()=>r,convertableToNumber:()=>Z,countNumbers:()=>Ao,createHashSet:()=>Me,createOutOfRangePoints:()=>Da,createSankeyData:()=>Vb,cycleDown:()=>tt,cycleIndex:()=>et,cycleUp:()=>Q,deepExtend:()=>st,defaultErrorHandler:()=>Oe,defined:()=>Ht,deg:()=>Ut,elementOffset:()=>Vt,elementScale:()=>ye,elementSize:()=>Wt,elementStyles:()=>ut,equalsIgnoreCase:()=>ba,evalOptions:()=>xa,eventCoordinates:()=>qt,eventElement:()=>Kt,eventMap:()=>Re,filterSeriesByType:()=>_a,find:()=>pe,findAxisByName:()=>_o,getAriaTemplate:()=>yt,getField:()=>Mo,getSpacing:()=>dt,getSupportedFeatures:()=>Ue,getTemplate:()=>mt,getter:()=>wt,grep:()=>xt,hasClasses:()=>_t,hasGradientOverlay:()=>ka,hasOwnProperty:()=>De,hasValue:()=>Aa,hashKey:()=>Xt,inArray:()=>kt,interpolateValue:()=>Et,isArray:()=>U,isDateAxis:()=>Ea,isFunction:()=>nt,isNumber:()=>Y,isObject:()=>at,isPlainObject:()=>It,isString:()=>J,keys:()=>Ie,last:()=>Gt,limitValue:()=>Yt,logToConsole:()=>Bt.A,map:()=>Dt,mousewheelDelta:()=>Rt,noop:()=>We,now:()=>qe,objectKey:()=>Jt,off:()=>He,on:()=>$e,parseDateCategory:()=>Ca,qrcodeValidator:()=>gy,rad:()=>Zt,rectToBox:()=>xi,removeClass:()=>q,renderIcon:()=>ue,round:()=>Qt,segmentVisible:()=>ma,setDefaultOptions:()=>re,singleItemOrArray:()=>Ta,sparseArrayLimits:()=>de,styleValue:()=>lt,unbindEvents:()=>te,valueOrDefault:()=>ee});var i={};n.r(i),n.d(i,{easeOutElastic:()=>Wn,linear:()=>Vn,swing:()=>Un});var r={};n.r(r),n.d(r,{DEFAULT_PANE:()=>Tp,NAVIGATOR_AXIS:()=>Ep,NAVIGATOR_PANE:()=>Ap});var o="arc",s="ArrowUp",a="ArrowDown",l="ArrowLeft",c="ArrowRight",h="aria-activedescendant",u="#000",d="bottom",p="center",f="circle",g=3,m="cross",y="date",v="12px sans-serif",b=10,w="end",x=/\{\d+:?/,_="height",S="inside",C="inherit",k="left",A=Number.MAX_VALUE,E=-Number.MAX_VALUE,T="none",M="object",O="outside",I="right",D="roundedRect",F="start",P="string",R="top",L="value",N="#fff",B="width",j="x",z="y",$="pointer",H="horizontal";function U(t){return Array.isArray(t)}function V(t,e){for(var n=U(e)?e:[e],i=0;i<n.length;i++){var r=n[i];-1===t.className.indexOf(r)&&(t.className+=" "+r)}}var W=/\s+/g;function q(t,e){t&&t.className&&(t.className=t.className.replace(e,"").replace(W," "))}var K=n(8599);function X(t){var e=.5;t.options.stroke&&K.A(t.options.stroke.width)&&t.options.stroke.width%2==0&&(e=0);for(var n=0;n<t.segments.length;n++)t.segments[n].anchor().round(0).translate(e,e);return t}function G(t,e){return-t.x*e.y+t.y*e.x<0}function Y(t){return"number"==typeof t&&!isNaN(t)}function J(t){return typeof t===P}function Z(t){return Y(t)||J(t)&&isFinite(t)}function Q(t,e){return(t+1)%e}function tt(t,e){var n=t-1;return n<0?e-1:n}function et(t,e){return 1===e||t%e==0?0:t<0?e+t%e:t>=e?t%e:t}function nt(t){return"function"==typeof t}var it="object",rt="undefined";function ot(t,e){for(var n in e)if("__proto__"!==n&&"constructor"!==n){var i=e[n],r=typeof i,o=void 0;if((o=r===it&&null!==i?i.constructor:null)&&o!==Array)if(i instanceof Date)t[n]=new Date(i.getTime());else if(nt(i.clone))t[n]=i.clone();else{var s=t[n];t[n]=typeof s===it&&s||{},ot(t[n],i)}else r!==rt&&(t[n]=i)}return t}function st(t){for(var e=arguments,n=arguments.length,i=1;i<n;i++)ot(t,e[i]);return t}function at(t){return"object"==typeof t}function lt(t){return Y(t)?t+"px":t}var ct=/width|height|top|left|bottom|right/i;function ht(t){return ct.test(t)}function ut(t,e){var n=J(e)?[e]:e;if(U(n)){for(var i={},r=window.getComputedStyle(t),o=0;o<n.length;o++){var s=n[o];i[s]=ht(s)?parseFloat(r[s]):r[s]}return i}if(at(e))for(var a in e)t.style[a]=lt(e[a])}function dt(t,e){void 0===e&&(e=0);var n={top:0,right:0,bottom:0,left:0};return"number"==typeof t?n[R]=n[I]=n[d]=n[k]=t:(n[R]=t[R]||e,n[I]=t[I]||e,n[d]=t[d]||e,n[k]=t[k]||e),n}var pt={compile:function(t){return t}},ft=function(){};ft.register=function(t){pt=t},ft.compile=function(t,e){return pt.compile(t,e)};const gt=ft;function mt(t){var e;return void 0===t&&(t={}),t.template?t.template=e=gt.compile(t.template):nt(t.content)&&(e=t.content),e}function yt(t){var e;return void 0===t&&(t={}),t.ariaTemplate?t.ariaTemplate=e=gt.compile(t.ariaTemplate):nt(t.ariaContent)&&(e=t.ariaContent),e}var vt=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,bt={};function wt(t){if(bt[t])return bt[t];var e=[];return t.replace(vt,(function(t,n,i,r){e.push(K.A(n)?n:i||r)})),bt[t]=function(t){for(var n=t,i=0;i<e.length&&n;i++)n=n[e[i]];return n},bt[t]}function xt(t,e){for(var n=t.length,i=[],r=0;r<n;r++)e(t[r])&&i.push(t[r]);return i}function _t(t,e){if(t.className)for(var n=e.split(" "),i=0;i<n.length;i++)if(t.className.indexOf&&-1!==t.className.indexOf(n[i]))return!0}bt[void 0]=function(t){return t};var St=function(){this._map=new Map};St.prototype.get=function(t){return this._map.get(t)},St.prototype.set=function(t,e){this._map.set(t,e)};const Ct=St;function kt(t,e){if(e)return-1!==e.indexOf(t)}var At=n(1454);function Et(t,e,n){return At.A(t+(e-t)*n,g)}var Tt="trigger",Mt=function(t,e){this.observer=t,this.handlerMap=st({},this.handlerMap,e)};Mt.prototype.trigger=function(t,e){var n,i=this.observer,r=this.handlerMap;return r[t]?n=this.callObserver(r[t],e):i[Tt]&&(n=this.callObserver(Tt,t,e)),n},Mt.prototype.callObserver=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this.observer[t].apply(this.observer,e)},Mt.prototype.requiresHandlers=function(t){if(this.observer.requiresHandlers)return this.observer.requiresHandlers(t);for(var e=0;e<t.length;e++)if(this.handlerMap[t[e]])return!0};const Ot=Mt;function It(t){return"[object Object]"===Object.prototype.toString.call(t)}function Dt(t,e){for(var n=t.length,i=[],r=0;r<n;r++){var o=e(t[r]);K.A(o)&&i.push(o)}return i}var Ft=n(3452),Pt=Ft.A.browser||{};function Rt(t){var e=0;return t.wheelDelta?(e=-t.wheelDelta/120,Pt.webkit&&(e/=2*Math.max(window.devicePixelRatio,.625))):t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e)}var Lt=n(9408),Nt=n(15),Bt=n(7103),jt=Lt,zt=jt.append,$t=jt.bindEvents,Ht=jt.defined,Ut=jt.deg,Vt=jt.elementOffset,Wt=jt.elementSize,qt=jt.eventCoordinates,Kt=jt.eventElement,Xt=jt.hashKey,Gt=jt.last,Yt=jt.limitValue,Jt=jt.objectKey,Zt=jt.rad,Qt=jt.round,te=jt.unbindEvents,ee=jt.valueOrDefault,ne=function(){};ne.fetchFonts=function(t,e,n){void 0===n&&(n={depth:0});!t||n.depth>5||!document.fonts||Object.keys(t).forEach((function(i){var r=t[i];"dataSource"!==i&&"$"!==i[0]&&r&&("font"===i?e.push(r):"object"==typeof r&&(n.depth++,ne.fetchFonts(r,e,n),n.depth--))}))},ne.loadFonts=function(t,e){var n=[];if(t.length>0&&document.fonts){try{n=t.map((function(t){return document.fonts.load(t)}))}catch(t){(0,Bt.A)(t)}Promise.all(n).then(e,e)}else e()},ne.preloadFonts=function(t,e){var n=[];ne.fetchFonts(t,n),ne.loadFonts(n,e)};const ie=ne;function re(t,e){var n=t.prototype;n.options?n.options=st({},n.options,e):n.options=e}var oe="k-i-",se="k-svg-i-",ae=function(t,e){this.element=t,this.options=st({},this.options,e),this.wrapper()};ae.prototype.wrapper=function(){this.addClasses()},ae.prototype.addClasses=function(){},ae.prototype.html=function(){return this.element.outerHTML},re(ae,{name:"",size:"none",themeColor:"none",flip:"default",iconClass:"",stylingOptions:["size","themeColor","fill"]});var le=function(t){function e(e,n){t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.wrapper=function(){var e=this.element.className.split(" ").find((function(t){return t.startsWith(oe)})),n=this.options.icon?""+(this.options.icon.startsWith(oe)?"":oe)+this.options.icon:"";this._className=n,V(this.element,"k-icon"),V(this.element,"k-font-icon"),q(this.element,e),V(this.element,n),V(this.element,this.options.iconClass||""),t.prototype.wrapper.call(this)},e}(ae);re(le,{name:"HTMLFontIcon",icon:null});var ce=function(t){function e(e,n){e.innerHTML="",t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.wrapper=function(){var e=this.options.icon,n=this.options.iconClass,i=this.element.className.split(" ").find((function(t){return t.startsWith(se)}));if(!e&&n){var r=n.match(/k-i-(\w+(?:-\w+)*)/);r&&(e=r[1],n=n.replace(r[0],""))}J(e)&&(e=e.replace("k-i-","").replace(/-./g,(function(t){return t[1].toUpperCase()})),e=this.options.svgIcons[e]||this.options.svgIcons[e+"Icon"]);var o=e&&e.name?""+se+e.name:"";if(this._className=o,V(this.element,"k-svg-icon"),q(this.element,i),V(this.element,o),V(this.element,n||""),this.element.setAttribute("aria-hidden","true"),e&&It(e)){var s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox",e.viewBox||""),s.setAttribute("focusable","false"),s.innerHTML=e.content||"",this.element.appendChild(s)}t.prototype.wrapper.call(this)},e}(ae);re(ce,{name:"HTMLSvgIcon",icon:null,svgIcons:{}});var he={svg:ce,font:le};function ue(t,e){var n=t,i=e;return n&&(!at(n)||n instanceof HTMLElement)&&!J(n)||(i=n,n=document.createElement("span")),J(i)&&(i={icon:i}),i.type||(i.type="svg"),he[i.type]?new he[i.type](n,i).html():null}function de(t){for(var e=A,n=E,i=0,r=t.length;i<r;i++){var o=t[i];null!==o&&isFinite(o)&&(e=Math.min(e,o),n=Math.max(n,o))}return{min:e===A?void 0:e,max:n===E?void 0:n}}function pe(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(e(i,n,t))return i}}var fe=n(6349).A,ge=/matrix\((.*)\)/;function me(t){var e=getComputedStyle(t).transform;return"none"===e?fe.unit():function(t){var e=t.match(ge);if(null===e||2!==e.length)return fe.unit();var n=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(fe,[null].concat(n)))}(e)}function ye(t){if(!t)return fe.unit();for(var e=me(t),n=t.parentElement;n;){var i=me(n);e=e.multiplyCopy(i),n=n.parentElement}return e.b=e.c=e.e=e.f=0,e}var ve=n(1115),be=n(1474),we=function(t){function e(n){var i=this;if(t.call(this),1===arguments.length)for(var r=e.formats,o=this.resolveColor(n),s=0;s<r.length;s++){var a=r[s].re,l=r[s].process,c=a.exec(o);if(c){var h=l(c);i.r=h[0],i.g=h[1],i.b=h[2]}}else this.r=arguments[0],this.g=arguments[1],this.b=arguments[2];this.r=this.normalizeByte(this.r),this.g=this.normalizeByte(this.g),this.b=this.normalizeByte(this.b)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHex=function(){var t=this.padDigit,e=this.r.toString(16),n=this.g.toString(16),i=this.b.toString(16);return"#"+t(e)+t(n)+t(i)},e.prototype.resolveColor=function(t){var n=t||"black";return"#"===n.charAt(0)&&(n=n.substr(1,6)),n=(n=n.replace(/ /g,"")).toLowerCase(),n=e.namedColors[n]||n},e.prototype.normalizeByte=function(t){return t<0||isNaN(t)?0:t>255?255:t},e.prototype.padDigit=function(t){return 1===t.length?"0"+t:t},e.prototype.brightness=function(t){var e=Math.round;return this.r=e(this.normalizeByte(this.r*t)),this.g=e(this.normalizeByte(this.g*t)),this.b=e(this.normalizeByte(this.b*t)),this},e.prototype.percBrightness=function(){return Math.sqrt(.241*this.r*this.r+.691*this.g*this.g+.068*this.b*this.b)},e.prototype.isDark=function(){return this.percBrightness()<180},e.fromBytes=function(t,e,n,i){return new be.Ix(t,e,n,null!=i?i:1)},e.fromRGB=function(t,e,n,i){return new be.m0(t,e,n,null!=i?i:1)},e.fromHSV=function(t,e,n,i){return new be.WV(t,e,n,null!=i?i:1)},e.fromHSL=function(t,e,n,i){return new be.i8(t,e,n,null!=i?i:1)},e}(Nt.A);we.formats=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(t){return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10)]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],we.namedColors=ve.A;const xe=we;const _e=function(t){return new xe(t).isDark()?N:u};var Se={},Ce=function(t){this._index={},this._values=t?t.slice(0):[];for(var e=0;e<this._values.length;e++)this._index[this._values[e]]=e},ke={size:{configurable:!0}};Ce.prototype.values=function(){return this._values.filter((function(t){return t!==Se}))},Ce.prototype.has=function(t){return void 0!==this._index[t]},Ce.prototype.add=function(t){this.has(t)||(this._index[t]=this._values.length,this._values.push(t))},Ce.prototype.delete=function(t){var e=this._index[t];void 0!==e&&(this._values[e]=Se,delete this._index[t])},Ce.prototype.clear=function(){this._index={},this._values=[]},ke.size.get=function(){return this._values.length},Object.defineProperties(Ce.prototype,ke);var Ae=function(t){this._set=new Set(t)},Ee={size:{configurable:!0}};Ae.prototype.values=function(){return Array.from(this._set)},Ae.prototype.has=function(t){return this._set.has(t)},Ae.prototype.add=function(t){this._set.add(t)},Ae.prototype.delete=function(t){this._set.delete(t)},Ae.prototype.clear=function(){this._set.clear()},Ee.size.get=function(){return this._set.size},Object.defineProperties(Ae.prototype,Ee);var Te=function(){var t=!1;"function"==typeof Set&&(t=new Set([1]).has(1));return t};function Me(t){return Te()?new Ae(t):new Ce(t)}function Oe(t){throw t}const Ie={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110};function De(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var Fe=function(){this.height=0,this.width=0,this.data=[]};Fe.prototype.clone=function(){var t=new Fe;return t.height=this.height,t.width=this.width,t.data=this.data.map((function(t){return t.slice()})),t},Fe.prototype.get=function(t,e){var n=this.data[t];return n?n[e]:null},Fe.prototype.set=function(t,e,n){var i=this.data[t];null==i&&(i=this.data[t]=[]),i[e]=n,t>=this.height&&(this.height=t+1),e>=this.width&&(this.width=e+1)},Fe.prototype.each=function(t,e){for(var n=0;n<this.height;++n)for(var i=0;i<this.width;++i){var r=this.get(n,i);if((e||null!=r)&&void 0!==(r=t(r,n,i)))return r}},Fe.prototype.map=function(t,e){var n=new Fe;return this.each((function(e,i,r){n.set(i,r,t(e,i,r))}),e),n},Fe.prototype.transpose=function(){var t=new Fe;return this.each((function(e,n,i){t.set(i,n,e)})),t},Fe.prototype.unit=function(t){this.width=this.height=t;for(var e=this.data=new Array(t),n=t;--n>=0;)for(var i=e[n]=new Array(t),r=t;--r>=0;)i[r]=n===r?1:0;return this},Fe.prototype.multiply=function(t){for(var e=this,n=new Fe,i=0;i<e.height;++i)for(var r=0;r<t.width;++r){for(var o=0,s=0;s<e.width;++s){var a=e.get(i,s),l=t.get(s,r);"number"==typeof a&&"number"==typeof l&&(o+=a*l)}n.set(i,r,o)}return n},Fe.prototype.inverse=function(){for(var t=this.width,e=this.augment((new Fe).unit(t)),n=e.data,i=function(e){var i=function(t,e,n){for(var i=n(t),r=t,o=t+1;o<e;o++){var s=n(t);s>i&&(i=s,r=t)}return r}(e,t,(function(t){return n[t][e]}));if(!n[i][e])return{v:null};if(e!==i){var r=n[e];n[e]=n[i],n[i]=r}for(var o=e+1;o<t;++o){for(var s=e+1;s<2*t;++s)n[o][s]-=n[e][s]*n[o][e]/n[e][e];n[o][e]=0}},r=0;r<t;++r){var o=i(r);if(o)return o.v}for(var s=0;s<t;++s)for(var a=n[s][s],l=0;l<2*t;++l)n[s][l]/=a;for(var c=t;--c>=0;)for(var h=c;--h>=0;)if(n[h][c])for(var u=2*t;--u>=t;)n[h][u]-=n[c][u]*n[h][c];return e.slice(0,t,t,t)},Fe.prototype.augment=function(t){var e=this.clone(),n=e.width;return t.each((function(t,i,r){e.set(i,r+n,t)})),e},Fe.prototype.slice=function(t,e,n,i){for(var r=new Fe,o=0;o<n;++o)for(var s=0;s<i;++s)r.set(o,s,this.get(t+o,e+s));return r};const Pe=Fe;var Re={down:"pointerdown",move:"pointermove",up:"pointerup",cancel:"pointercancel pointerleave"};function Le(t){return Re[t]||t}var Ne=function(t){return t.replace(/([^ ]+)/g,Le)};function Be(){var t,e,n="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(n+="-"),n+=(12===t?4:16===t?3&e|8:e).toString(16);return n}var je=new WeakMap,ze=Symbol("id");function $e(t,e,n,i,r){!function(t,e,n,i,r){var o=U(e)?e:(e||"").split(" ");o.forEach((function(e){!function(t,e,n,i,r){var o,s=i;n&&nt(n)&&!i?s=n:n&&function(t){return"string"==typeof t}(n)&&nt(s)&&(o=n);var a=function(e){var n=e.target?e.target.closest(o):null;if(!o||o&&e.target&&n){var i=o?n:e.currentTarget;Object.defineProperty(e,"currentTarget",{value:i}),Object.defineProperty(e,"delegateTarget",{value:t}),s(e)}};s[ze]=Be();var l=je.get(t);l||(l=new Map,je.set(t,l));l.set(s[ze],a),t.addEventListener(e,a,Boolean(r))}(t,e,n,i,r)}))}(t,e,n,i,r)}function He(t,e,n,i,r){!function(t,e,n,i){var r=U(e)?e:(e||"").split(" ");r.forEach((function(e){!function(t,e,n,i){var r=je.get(t);if(r&&n&&n[ze]){var o=n[ze],s=r.get(o);r.delete(o),s&&t.removeEventListener(e,s,Boolean(i))}}(t,e,n,i)}))}(t,e,n,i)}function Ue(){var t=function(t){var e=!1,n={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.?(\d+(\.\d+)?)?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i},i={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i};for(var r in n){if(t.match(n[r])){if("windows"===r&&"plugins"in navigator)return!1;(e={}).device=r,e.name=Ve(r,i),e[e.name]=!0;break}}return e}(navigator.userAgent),e={};return e.mobileOS=t,e}function Ve(t,e,n){for(var i in e)if(e[i].test(t))return i;return void 0!==n?n:t}function We(){}function qe(){return(new Date).getTime()}var Ke="string",Xe="function",Ge=function(){this._defaultPrevented=!0},Ye=function(){return!0===this._defaultPrevented};const Je=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind()},e.prototype.bind=function(t,e,n){var i,r,o,s,a=this,l=typeof t===Ke?[t]:t||[],c=typeof e===Xe;if(void 0===e){for(i in t)a.bind(i,t[i]);return a}var h=function(){var t=l[i];(s=c?e:e[t])&&(n&&(o=s,s=function(){a.unbind(t,s),o.apply(a,arguments)},s.original=o),(a._events[t]=a._events[t]||[]).push(s))};for(i=0,r=l.length;i<r;i++)h();return a},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){var n,i,r,o=this,s=typeof t===Ke?[t]:t,a=typeof e===Xe;for(n=0,i=s.length;n<i;n++){var l=s[n];(r=a?e:e[l])&&(o._events[l]=o._events[l]||[]).unshift(r)}return o},e.prototype.trigger=function(t,e){var n,i,r=this,o=r._events[t];if(o){var s=e||{};for(s.sender=r,s._defaultPrevented=!1,s.preventDefault=Ge,s.isDefaultPrevented=Ye,n=0,i=(o=o.slice()).length;n<i;n++)o[n].call(r,s);return!0===s._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var n,i=this,r=i._events[t];if(void 0===t)i._events={};else if(r)if(e)for(n=r.length-1;n>=0;n--)r[n]!==e&&r[n].original!==e||r.splice(n,1);else i._events[t]=[];return i},e.prototype._setEvents=function(t){for(var e=this,n=(this.events||[]).length,i=0;i<n;i++){var r=e.events[i];e.options[r]&&t[r]&&(e.unbind(r,e.options[r]),e._events&&e._events[r]&&delete e._events[r])}this.bind(this.events,t)},e}(Nt.A);var Ze=Object.assign,Qe=function(t){t.preventDefault()},tn=800,en=0,nn="press",rn="hold",on="select",sn="start",an="move",ln="end",cn="cancel",hn="tap",un="doubleTap",dn="release",pn="gesturechange",fn="gestureend",gn="gesturetap",mn={api:0,touch:0,mouse:9,pointer:9};function yn(t){var e=[],n=t.originalEvent||t,i=t.currentTarget;return t.api?e.push({id:2,event:t,target:t.target,currentTarget:t.target,location:t,type:"api"}):e.push({location:n,event:t,target:t.target,currentTarget:i,id:n.pointerId,type:"pointer"}),e}var vn=function(t){function e(e,n){t.call(this);var i=this;i.support=Ue(),i.invalidZeroEvents=this.support.mobileOS&&this.support.mobileOS.android,i.axis=e,i._updateLocationData(n),i.startLocation=i.location,i.velocity=i.delta=0,i.timeStamp=qe()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(t){var e=this,n=t["page"+e.axis],i=qe(),r=i-e.timeStamp||1;!n&&this.invalidZeroEvents||(e.delta=n-e.location,e._updateLocationData(t),e.initialDelta=n-e.startLocation,e.velocity=e.delta/r,e.timeStamp=i)},e.prototype._updateLocationData=function(t){var e=this,n=e.axis;e.location=t["page"+n],e.client=t["client"+n],e.screen=t["screen"+n]},e}(Nt.A),bn=function(t){function e(e,n,i){t.call(this),Ze(this,{x:new vn("X",i.location),y:new vn("Y",i.location),type:i.type,threshold:e.threshold||mn[i.type],userEvents:e,target:n,currentTarget:i.currentTarget,initialTouch:i.target,id:i.id,pressEvent:i,_clicks:e._clicks,supportDoubleTap:e.supportDoubleTap,_moved:!1,_finished:!1})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.press=function(){var t=this;this._holdTimeout=setTimeout((function(){return t._hold()}),this.userEvents.minHold),this._trigger(nn,this.pressEvent)},e.prototype._tap=function(t){var e=this;e.userEvents._clicks++,1===e.userEvents._clicks&&(e._clickTimeout=setTimeout((function(){1===e.userEvents._clicks?e._trigger(hn,t):e._trigger(un,t),e.userEvents._clicks=0}),300))},e.prototype._hold=function(){this._trigger(rn,this.pressEvent)},e.prototype.move=function(t){var e=this,n="api"!==t.type&&e.userEvents._shouldNotMove;if(!e._finished&&!n){if(e.x.move(t.location),e.y.move(t.location),!e._moved){if(e._withinIgnoreThreshold())return;if(xn.current&&xn.current!==e.userEvents)return e.dispose();e._start(t)}e._finished||e._trigger(an,t)}},e.prototype.end=function(t){this.endTime=qe(),this._finished||(this._finished=!0,this._trigger(dn,t),this._moved?this._trigger(ln,t):this.supportDoubleTap?this._tap(t):this._trigger(hn,t),clearTimeout(this._holdTimeout),this.dispose())},e.prototype.dispose=function(){var t=this.userEvents.touches||[];this._finished=!0,this.pressEvent=null,clearTimeout(this._holdTimeout);var e=t.indexOf(this);t.splice(e,1)},e.prototype.skip=function(){this.dispose()},e.prototype.cancel=function(){this.dispose()},e.prototype.isMoved=function(){return this._moved},e.prototype._start=function(t){clearTimeout(this._holdTimeout),this.startTime=qe(),this._moved=!0,this._trigger(sn,t)},e.prototype._trigger=function(t,e){var n=e.event,i={touch:this,x:this.x,y:this.y,target:this.target,event:n};this.userEvents.notify(t,i)&&n.preventDefault()},e.prototype._withinIgnoreThreshold=function(){var t=this.x.initialDelta,e=this.y.initialDelta;return Math.sqrt(t*t+e*e)<=this.threshold},e}(Nt.A);function wn(t){for(var e=Re.up.split(" "),n=0,i=e.length;n<i;n++)t(e[n])}var xn=function(t){function e(e,n){t.call(this);var i,r=this,o=Ue();if(this.support=o,n=n||{},this.options=n,i=r.filter=n.filter,r.threshold=n.threshold||en,r.minHold=n.minHold||tn,r.touches=[],r._maxTouches=n.multiTouch?2:1,r.allowSelection=n.allowSelection,r.captureUpIfMoved=n.captureUpIfMoved,r._clicks=0,r.supportDoubleTap=n.supportDoubleTap,Ze(r,{element:e,surface:n.surface||e,stopPropagation:n.stopPropagation,pressed:!1}),this._surfaceMoveHandler=this._move.bind(this),$e(r.surface,Ne("move"),this._surfaceMoveHandler),this._surfaceEndHandler=this._end.bind(this),$e(r.surface,Ne("up cancel"),this._surfaceEndHandler),this._elementStartHandler=this._start.bind(this),$e(e,Ne("down"),i,this._elementStartHandler),e.style["touch-action"]=n.touchAction||"none",n.preventDragEvent&&(this._elementDragStartHandler=Qe,$e(e,Ne("dragstart"),this._elementDragStartHandler)),this._elementSelectHandler=this._select.bind(this),$e(e,Ne("mousedown"),i,this._elementSelectHandler),r.captureUpIfMoved){var s=r.surface,a=r.preventIfMoving.bind(r);wn((function(t){s.addEventListener(t,a,!0)}))}r.bind([nn,rn,hn,un,sn,an,ln,dn,cn,"gesturestart",pn,fn,gn,on],n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.preventIfMoving=function(t){this._isMoved()&&t.preventDefault()},e.prototype.destroy=function(){var t=this,e=this.options,n=this.element;if(!t._destroyed){if(t._destroyed=!0,t.captureUpIfMoved){var i=t.surface;wn((function(e){i.removeEventListener(e,t.preventIfMoving)}))}He(t.surface,Ne("move"),this._surfaceMoveHandler),He(t.surface,Ne("up cancel"),this._surfaceEndHandler),He(n,Ne("down"),this._elementStartHandler),e.preventDragEvent&&He(n,Ne("dragstart"),this._elementDragStartHandler),He(n,Ne("mousedown"),this._elementSelectHandler),t._disposeAll(),t.unbind(),delete t.surface,delete t.element,delete t.currentTarget}},e.prototype.capture=function(){e.current=this},e.prototype.cancel=function(){this._disposeAll(),this.trigger(cn)},e.prototype.notify=function(t,e){var n,i,r,o,s,a,l,c,h=this.touches,u=t;if(this._isMultiTouch()){switch(u){case an:u=pn;break;case ln:u=fn;break;case hn:u=gn}Ze(e,{touches:h},(n=h[0],i=h[1],r=n.x.location,o=n.y.location,s=i.x.location,a=i.y.location,l=r-s,c=o-a,{center:{x:(r+s)/2,y:(o+a)/2},distance:Math.sqrt(l*l+c*c)}))}return this.trigger(u,Ze(e,{type:u}))},e.prototype.press=function(t,e,n){this._apiCall("_start",t,e,n)},e.prototype.move=function(t,e){this._apiCall("_move",t,e)},e.prototype.end=function(t,e){this._apiCall("_end",t,e)},e.prototype._isMultiTouch=function(){return this.touches.length>1},e.prototype._maxTouchesReached=function(){return this.touches.length>=this._maxTouches},e.prototype._disposeAll=function(){for(var t=this.touches;t.length>0;)t.pop().dispose()},e.prototype._isMoved=function(){return xt(this.touches,(function(t){return t.isMoved()})).length},e.prototype._select=function(t){this.allowSelection&&!this.trigger(on,{event:t})||t.preventDefault()},e.prototype._start=function(t){var n,i,r=this,o=0,s=r.filter,a=yn(t),l=a.length,c=t.which;if(!(c&&c>1||r._maxTouchesReached()))for(e.current=null,r.currentTarget=t.currentTarget,r.stopPropagation&&t.stopPropagation();o<l&&!r._maxTouchesReached();o++)i=a[o],(n=s?i.currentTarget:r.element)&&0===n.length||(i=new bn(r,n,i),r.touches.push(i),i.press(),r._isMultiTouch()&&r.notify("gesturestart",{}))},e.prototype._move=function(t){this._eachTouch("move",t)},e.prototype._end=function(t){this._eachTouch("end",t)},e.prototype._eachTouch=function(t,e){var n,i,r,o,s={},a=yn(e),l=this.touches;for(n=0;n<l.length;n++)s[(i=l[n]).id]=i;for(n=0;n<a.length;n++)(o=s[(r=a[n]).id])&&o[t](r)},e.prototype._apiCall=function(t,e,n,i){this[t]({api:!0,pageX:e,pageY:n,clientX:e,clientY:n,target:i||this.element,stopPropagation:We,preventDefault:We})},e.defaultThreshold=function(t){en=t},e.minHold=function(t){tn=t},e}(Je);const _n=xn;function Sn(t,e){var n=Qt(e-t,b-1);if(0===n){if(0===e)return.1;n=Math.abs(e)}var i=Math.pow(10,Math.floor(Math.log(n)/Math.log(10))),r=Qt(n/i,b);return Qt(i*(r<1.904762?.2:r<4.761904?.5:r<9.523809?1:2),b)}const Cn=function(t){function e(e,n){t.call(this),this.x=e||0,this.y=n||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.equals=function(t){return t&&this.x===t.x&&this.y===t.y},e.prototype.rotate=function(t,e){var n=Zt(e),i=Math.cos(n),r=Math.sin(n),o=t.x,s=t.y,a=this.x,l=this.y;return this.x=Qt(o+(a-o)*i+(l-s)*r,g),this.y=Qt(s+(l-s)*i-(a-o)*r,g),this},e.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},e.prototype.distanceTo=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},e.onCircle=function(t,n,i){var r=Zt(n);return new e(t.x-i*Math.cos(r),t.y-i*Math.sin(r))},e}(Nt.A);var kn=n(2226),An=function(t){function e(e,n,i,r){t.call(this),this.x1=e||0,this.y1=n||0,this.x2=i||0,this.y2=r||0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.equals=function(t){return this.x1===t.x1&&this.x2===t.x2&&this.y1===t.y1&&this.y2===t.y2},e.prototype.width=function(){return this.x2-this.x1},e.prototype.height=function(){return this.y2-this.y1},e.prototype.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},e.prototype.move=function(t,e){var n=this.height(),i=this.width();return Ht(t)&&(this.x1=t,this.x2=this.x1+i),Ht(e)&&(this.y1=e,this.y2=this.y1+n),this},e.prototype.wrap=function(t){return this.x1=Math.min(this.x1,t.x1),this.y1=Math.min(this.y1,t.y1),this.x2=Math.max(this.x2,t.x2),this.y2=Math.max(this.y2,t.y2),this},e.prototype.wrapPoint=function(t){var n=U(t),i=n?t[0]:t.x,r=n?t[1]:t.y;return this.wrap(new e(i,r,i,r)),this},e.prototype.snapTo=function(t,e){return e!==j&&e||(this.x1=t.x1,this.x2=t.x2),e!==z&&e||(this.y1=t.y1,this.y2=t.y2),this},e.prototype.alignTo=function(t,e){var n=this.height(),i=this.width(),r=e===R||e===d?z:j,o=r===z?n:i;if(e===p){var s=t.center(),a=this.center();this.x1+=s.x-a.x,this.y1+=s.y-a.y}else this[r+1]=e===R||e===k?t[r+1]-o:t[r+2];return this.x2=this.x1+i,this.y2=this.y1+n,this},e.prototype.shrink=function(t,e){return this.x2-=t,this.y2-=e,this},e.prototype.expand=function(t,e){return this.shrink(-t,-e),this},e.prototype.pad=function(t){var e=dt(t);return this.x1-=e.left,this.x2+=e.right,this.y1-=e.top,this.y2+=e.bottom,this},e.prototype.unpad=function(t){var e=dt(t);return e.left=-e.left,e.top=-e.top,e.right=-e.right,e.bottom=-e.bottom,this.pad(e)},e.prototype.clone=function(){return new e(this.x1,this.y1,this.x2,this.y2)},e.prototype.center=function(){return new Cn(this.x1+this.width()/2,this.y1+this.height()/2)},e.prototype.containsPoint=function(t){return t.x>=this.x1&&t.x<=this.x2&&t.y>=this.y1&&t.y<=this.y2},e.prototype.points=function(){return[new Cn(this.x1,this.y1),new Cn(this.x2,this.y1),new Cn(this.x2,this.y2),new Cn(this.x1,this.y2)]},e.prototype.getHash=function(){return[this.x1,this.y1,this.x2,this.y2].join(",")},e.prototype.overlaps=function(t){return!(t.y2<this.y1||this.y2<t.y1||t.x2<this.x1||this.x2<t.x1)},e.prototype.rotate=function(t){var e=this.width(),n=this.height(),i=this.center(),r=i.x,o=i.y,s=En(0,0,r,o,t),a=En(e,0,r,o,t),l=En(e,n,r,o,t),c=En(0,n,r,o,t);return e=Math.max(s.x,a.x,l.x,c.x)-Math.min(s.x,a.x,l.x,c.x),n=Math.max(s.y,a.y,l.y,c.y)-Math.min(s.y,a.y,l.y,c.y),this.x2=this.x1+e,this.y2=this.y1+n,this},e.prototype.toRect=function(){return new kn.A([this.x1,this.y1],[this.width(),this.height()])},e.prototype.hasSize=function(){return 0!==this.width()&&0!==this.height()},e.prototype.align=function(t,e,n){var i=e+1,r=e+2,o=e===j?B:_,s=this[o]();kt(n,[k,R])?(this[i]=t[i],this[r]=this[i]+s):kt(n,[I,d])?(this[r]=t[r],this[i]=this[r]-s):n===p&&(this[i]=t[i]+(t[o]()-s)/2,this[r]=this[i]+s)},e}(Nt.A);function En(t,e,n,i,r){var o=Zt(r);return new Cn(n+(t-n)*Math.cos(o)+(e-i)*Math.sin(o),i-(t-n)*Math.sin(o)+(e-i)*Math.cos(o))}const Tn=An;var Mn=function(t){function e(e,n,i,r,o){t.call(this),this.center=e,this.innerRadius=n,this.radius=i,this.startAngle=r,this.angle=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,this.innerRadius,this.radius,this.startAngle,this.angle)},e.prototype.middle=function(){return this.startAngle+this.angle/2},e.prototype.setRadius=function(t,e){return e?this.innerRadius=t:this.radius=t,this},e.prototype.point=function(t,e){var n=Zt(t),i=Math.cos(n),r=Math.sin(n),o=e?this.innerRadius:this.radius,s=Qt(this.center.x-i*o,g),a=Qt(this.center.y-r*o,g);return new Cn(s,a)},e.prototype.adjacentBox=function(t,e,n){var i=this.clone().expand(t),r=i.middle(),o=i.point(r),s=e/2,a=n/2,l=Math.sin(Zt(r)),c=Math.cos(Zt(r)),h=o.x-s,u=o.y-a;return Math.abs(l)<.9&&(h+=s*-c/Math.abs(c)),Math.abs(c)<.9&&(u+=a*-l/Math.abs(l)),new Tn(h,u,h+e,u+n)},e.prototype.containsPoint=function(t){var e=this.center,n=this.innerRadius,i=this.radius,r=this.startAngle,o=this.startAngle+this.angle,s=t.x-e.x,a=t.y-e.y,l=new Cn(s,a),c=this.point(r),h=new Cn(c.x-e.x,c.y-e.y),u=this.point(o),d=new Cn(u.x-e.x,u.y-e.y),p=Qt(s*s+a*a,g);return(h.equals(l)||G(h,l))&&!G(d,l)&&p>=n*n&&p<=i*i},e.prototype.getBBox=function(){var t,e=new Tn(A,A,E,E),n=Qt(this.startAngle%360),i=Qt((n+this.angle)%360),r=this.innerRadius,o=[0,90,180,270,n,i].sort(On),s=o.indexOf(n),a=o.indexOf(i);t=n===i?o:s<a?o.slice(s,a+1):[].concat(o.slice(0,a+1),o.slice(s,o.length));for(var l=0;l<t.length;l++){var c=this.point(t[l]);e.wrapPoint(c),e.wrapPoint(c,r)}return r||e.wrapPoint(this.center),e},e.prototype.expand=function(t){return this.radius+=t,this},e}(Nt.A);function On(t,e){return t-e}const In=Mn;var Dn=function(t){function e(e,n,i,r){t.call(this,e,0,n,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.expand=function(e){return t.prototype.expand.call(this,e)},e.prototype.clone=function(){return new e(this.center,this.radius,this.startAngle,this.angle)},e.prototype.setRadius=function(t){return this.radius=t,this},e}(In);const Fn=Dn;var Pn=n(1836),Rn=n(818),Ln=n(116),Nn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createRing=function(t,e){var n=t.startAngle+180,i=t.angle+n;(0===t.angle||t.angle>0&&n===i)&&(i+=.001);var r=new Pn.A(t.center.x,t.center.y),o=Math.max(t.radius,0),s=Math.max(t.innerRadius,0),a=new Rn.A(r,{startAngle:n,endAngle:i,radiusX:o,radiusY:o}),l=Ln.w.fromArc(a,e).close();if(s){a.radiusX=a.radiusY=s;var c=a.pointAt(i);l.lineTo(c.x,c.y),l.arc(i,n,s,s,!0)}else l.lineTo(r.x,r.y);return l},e}(Nt.A);Nn.current=new Nn;const Bn=Nn;var jn=n(3018),zn=n(6428),$n=n(289),Hn=n(6651);function Un(t){return.5-Math.cos(t*Math.PI)/2}function Vn(t){return t}function Wn(t,e,n,i){var r=1.70158,o=0,s=i;return 0===t?n:1===t?n+i:(o||(o=.5),s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((Number(t)-r)*(1.1*Math.PI)/o)+i+n)}var qn,Kn=n(9866),Xn=n(1901),Gn=n(4517),Yn=function(t){function e(){t.call(this),this._items=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={current:{configurable:!0}};return n.current.get=function(){return qn||(qn=new e),qn},e.prototype.register=function(t,e){this._items.push({name:t,type:e})},e.prototype.create=function(t,e){var n,i=this._items;if(e&&e.type)for(var r=e.type.toLowerCase(),o=0;o<i.length;o++)if(i[o].name.toLowerCase()===r){n=i[o];break}if(n)return new n.type(t,e)},Object.defineProperties(e,n),e}(Nt.A);const Jn=Yn;var Zn=function(t){function e(e,n){t.call(this),this.options=Object.assign({},this.options,n),this.element=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={options:{configurable:!0}};return e.create=function(t,e,n){return Jn.current.create(t,e,n)},n.options.get=function(){return this._options||{duration:500,easing:"swing"}},n.options.set=function(t){this._options=t},e.prototype.setup=function(){},e.prototype.step=function(){},e.prototype.play=function(){var t=this,e=this.options,n=e.duration,r=e.delay;void 0===r&&(r=0);var o=i[e.easing],s=(0,Kn.A)()+r,a=s+n;0===n?(this.step(1),this.abort()):setTimeout((function(){var e=function(){if(!t._stopped){var i=(0,Kn.A)(),r=(0,Xn.A)(i-s,0,n),l=o(r/n,r,0,1,n);t.step(l),i<a?(0,Gn.A)(e):t.abort()}};e()}),r)},e.prototype.abort=function(){this._stopped=!0},e.prototype.destroy=function(){this.abort()},Object.defineProperties(e.prototype,n),e}(Nt.A);const Qn=Zn;var ti=function(t){function e(e){t.call(this),this.children=[],this.options=st({},this.options,this.initUserOptions(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){return t},e.prototype.reflow=function(t){for(var e,n=this.children,i=0;i<n.length;i++){var r=n[i];r.reflow(t),e=e?e.wrap(r.box):r.box.clone()}this.box=e||t},e.prototype.destroy=function(){var t=this.children;this.animation&&this.animation.destroy();for(var e=0;e<t.length;e++)t[e].destroy()},e.prototype.getRoot=function(){var t=this.parent;return t?t.getRoot():null},e.prototype.getSender=function(){var t=this.getService();if(t)return t.sender},e.prototype.getService=function(){for(var t=this;t;){if(t.chartService)return t.chartService;t=t.parent}},e.prototype.translateChildren=function(t,e){for(var n=this.children,i=n.length,r=0;r<i;r++)n[r].box.translate(t,e)},e.prototype.append=function(){for(var t=arguments,e=0;e<arguments.length;e++){var n=t[e];this.children.push(n),n.parent=this}},e.prototype.renderVisual=function(){!1!==this.options.visible&&(this.createVisual(),this.addVisual(),this.renderChildren(),this.createAnimation(),this.renderComplete())},e.prototype.addVisual=function(){this.visual&&(this.visual.chartElement=this,this.parent&&this.parent.appendVisual(this.visual))},e.prototype.renderChildren=function(){for(var t=this.children,e=t.length,n=0;n<e;n++)t[n].renderVisual()},e.prototype.createVisual=function(){this.visual=new Hn.A({zIndex:this.options.zIndex,visible:ee(this.options.visible,!0)})},e.prototype.createAnimation=function(){this.visual&&this.options.animation&&(this.animation=Qn.create(this.visual,this.options.animation))},e.prototype.appendVisual=function(t){t.chartElement||(t.chartElement=this),t.options.noclip?this.clipRoot().visual.append(t):Ht(t.options.zIndex)?this.stackRoot().stackVisual(t):this.isStackRoot?this.stackVisual(t):this.visual?this.visual.append(t):this.parent.appendVisual(t)},e.prototype.clipRoot=function(){return this.parent?this.parent.clipRoot():this},e.prototype.stackRoot=function(){return this.parent?this.parent.stackRoot():this},e.prototype.stackVisual=function(t){var e,n=t.options.zIndex||0,i=this.visual.children,r=i.length;for(e=0;e<r;e++){var o=i[e];if(ee(o.options.zIndex,0)>n)break}this.visual.insert(e,t)},e.prototype.traverse=function(t){for(var e=this.children,n=e.length,i=0;i<n;i++){var r=e[i];t(r),r.traverse&&r.traverse(t)}},e.prototype.closest=function(t){for(var e=this,n=!1;e&&!n;)(n=t(e))||(e=e.parent);if(n)return e},e.prototype.renderComplete=function(){},e.prototype.hasHighlight=function(){var t=(this.options||{}).highlight;return!(!this.createHighlight||t&&!1===t.visible||!1===this.visible)},e.prototype.toggleHighlight=function(t,e){var n=this,i=(this.options||{}).highlight||{},r=i.visual,o=this._highlight;if(!o){var s={fill:{color:N,opacity:e||.2},stroke:{color:N,width:1,opacity:e||.2}};if(r){if(!(o=this._highlight=r(Object.assign(this.highlightVisualArgs(),{createVisual:function(){return n.createHighlight(s)},sender:this.getSender(),series:this.series,dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,runningTotal:this.runningTotal,total:this.total}))))return}else o=this._highlight=this.createHighlight(s);Ht(o.options.zIndex)||(o.options.zIndex=ee(i.zIndex,this.options.zIndex)),this.appendVisual(o)}o.visible(t)},e.prototype.toggleFocusHighlight=function(t){var e=((this.options||{}).accessibility||{}).highlight||{},n=this._focusHighlight;if(t||n){if(!n){var i=this.getRoot().options.background,r=_e(i),o={fill:{opacity:e.opacity,color:e.color},stroke:Object.assign({},{color:r},e.border),zIndex:e.zIndex};n=this._focusHighlight=this.createFocusHighlight(o),this.appendVisual(n)}n.visible(t)}},e.prototype.createGradientOverlay=function(t,e,n){var i=new Ln.w(Object.assign({stroke:{color:"none"},fill:this.createGradient(n),closed:t.options.closed},e));return i.segments.elements(t.segments.elements()),i},e.prototype.createGradient=function(t){if(this.parent)return this.parent.createGradient(t)},e.prototype.supportsPointInactiveOpacity=function(){return!0},e}(Nt.A);ti.prototype.options={};const ei=ti;var ni=function(t){function e(e){t.call(this,e),this.options.margin=dt(this.options.margin),this.options.padding=dt(this.options.padding)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){var n,i=this,r=this.options,o=r.width,s=r.height,a=r.shrinkToFit,l=o&&s,c=r.margin,h=r.padding,u=r.border.width,d=function(){i.align(e,j,r.align),i.align(e,z,r.vAlign),i.paddingBox=n.clone().unpad(c).unpad(u)},p=e.clone();l&&(p.x2=p.x1+o,p.y2=p.y1+s),a&&p.unpad(c).unpad(u).unpad(h),t.prototype.reflow.call(this,p),n=l?this.box=new Tn(0,0,o,s):this.box,a&&l?(d(),p=this.contentBox=this.paddingBox.clone().unpad(h)):(p=this.contentBox=n.clone(),n.pad(h).pad(u).pad(c),d()),this.translateChildren(n.x1-p.x1+c.left+u+h.left,n.y1-p.y1+c.top+u+h.top);for(var f=this.children,g=0;g<f.length;g++){var m=f[g];m.reflow(m.box)}},e.prototype.align=function(t,e,n){this.box.align(t,e,n)},e.prototype.hasBox=function(){var t=this.options;return t.border.width||t.background},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.options.visible&&this.hasBox()&&this.visual.append(Ln.w.fromRect(this.paddingBox.toRect(),this.visualStyle()))},e.prototype.visualStyle=function(){var t=this.options,e=t.border||{};return{stroke:{width:e.width,color:e.color,opacity:ee(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e}(ei);re(ni,{align:k,vAlign:R,margin:{},padding:{},border:{color:u,width:0},background:"",shrinkToFit:!1,width:0,height:0,visible:!0});const ii=ni;function ri(t,e){e&&(t.options.className=e.className,t.options.role=e.role,t.options.ariaLabel=e.ariaLabel,t.options.ariaRoleDescription=e.ariaRoleDescription,t.options.ariaChecked=e.ariaChecked)}var oi=function(t){function e(e,n){t.call(this,e),this.pointData=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=this.paddingBox,n=t.type,i=t.rotation,r=e.center(),o=e.width()/2,s=e.height()/2;if(!t.visible||!this.hasBox())return null;var a,l=this.visualStyle();if(n===f)a=new jn.A(new zn.A([Qt(e.x1+o,g),Qt(e.y1+s,g)],Math.min(o,s)),l);else if("triangle"===n)a=Ln.w.fromPoints([[e.x1+o,e.y1],[e.x1,e.y2],[e.x2,e.y2]],l).close();else if(n===m)(a=new Ln.P(l)).moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),a.moveTo(e.x1,e.y2).lineTo(e.x2,e.y1);else{var c=e.toRect();if(n===D){var h=ee(t.borderRadius,c.width()/5);c.setCornerRadius(h)}a=Ln.w.fromRect(c,l)}return i&&a.transform($n.A().rotate(-i,[r.x,r.y])),a.options.zIndex=t.zIndex,a},e.prototype.createElement=function(){var t=this,e=this.options.visual,n=this.pointData||{};return e?e({value:n.value,dataItem:n.dataItem,sender:this.getSender(),series:n.series,category:n.category,rect:this.paddingBox.toRect(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.visualOptions=function(){var t=this.options;return{background:t.background,border:t.border,margin:t.margin,padding:t.padding,type:t.type,size:t.width,visible:t.visible}},e.prototype.createVisual=function(){this.visual=this.createElement(),ri(this.visual,this.options.accessibilityOptions)},e}(ii);re(oi,{type:f,align:p,vAlign:p});const si=oi;var ai=n(8703),li=n(4877),ci="radial";const hi={glass:{type:"linear",rotation:0,stops:[{offset:0,color:N,opacity:0},{offset:.25,color:N,opacity:.3},{offset:1,color:N,opacity:0}]},sharpBevel:{type:ci,stops:[{offset:0,color:N,opacity:.55},{offset:.65,color:N,opacity:0},{offset:.95,color:N,opacity:.25}]},roundedBevel:{type:ci,stops:[{offset:.33,color:N,opacity:.06},{offset:.83,color:N,opacity:.2},{offset:.95,color:N,opacity:0}]},roundedGlass:{type:ci,supportVML:!1,stops:[{offset:0,color:N,opacity:0},{offset:.5,color:N,opacity:.3},{offset:.99,color:N,opacity:0}]},sharpGlass:{type:ci,supportVML:!1,stops:[{offset:0,color:N,opacity:.2},{offset:.15,color:N,opacity:.15},{offset:.17,color:N,opacity:.35},{offset:.85,color:N,opacity:.05},{offset:.87,color:N,opacity:.15},{offset:.99,color:N,opacity:0}]},bubbleShadow:{type:ci,center:[.5,.5],radius:.5}};function ui(t,e){if(t.x1===e.x1&&t.y1===e.y1&&t.x2===e.x2&&t.y2===e.y2)return e;var n=Math.min(t.x1,e.x1),i=Math.max(t.x1,e.x1),r=Math.min(t.x2,e.x2),o=Math.max(t.x2,e.x2),s=Math.min(t.y1,e.y1),a=Math.max(t.y1,e.y1),l=Math.min(t.y2,e.y2),c=Math.max(t.y2,e.y2),h=[];return h[0]=new Tn(i,s,r,a),h[1]=new Tn(n,a,i,l),h[2]=new Tn(r,a,o,l),h[3]=new Tn(i,l,r,c),t.x1===n&&t.y1===s||e.x1===n&&e.y1===s?(h[4]=new Tn(n,s,i,a),h[5]=new Tn(r,l,o,c)):(h[4]=new Tn(r,s,o,a),h[5]=new Tn(n,l,i,c)),xt(h,(function(t){return t.height()>0&&t.width()>0}))[0]}var di=function(t){function e(e){t.call(this,e);var n=this.options;n.width=parseInt(n.width,10),n.height=parseInt(n.height,10),this.gradients={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t=this.options,e=this.children,n=new Tn(0,0,t.width,t.height);this.box=n.unpad(t.margin);for(var i=0;i<e.length;i++)e[i].reflow(n),n=ui(n,e[i].box)||new Tn},e.prototype.createVisual=function(){this.visual=new Hn.A,this.createBackground()},e.prototype.createBackground=function(){var t=this.options,e=t.border||{},n=this.box.clone().pad(t.margin).unpad(e.width),i=Ln.w.fromRect(n.toRect(),{stroke:{color:e.width?e.color:"",width:e.width,dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},zIndex:-10});this.visual.append(i)},e.prototype.getRoot=function(){return this},e.prototype.createGradient=function(t){var e,n=this.gradients,i=Jt(t),r=hi[t.gradient];if(n[i])e=n[i];else{var o=Object.assign({},r,t);"linear"===r.type?e=new ai.A(o):(t.innerRadius&&(o.stops=function(t){for(var e=t.stops,n=t.innerRadius/t.radius*100,i=e.length,r=[],o=0;o<i;o++){var s=Object.assign({},e[o]);s.offset=(s.offset*(100-n)+n)/100,r.push(s)}return r}(o)),(e=new li.A(o)).supportVML=!1!==r.supportVML),n[i]=e}return e},e.prototype.cleanGradients=function(){var t=this.gradients;for(var e in t)t[e]._observers=[]},e.prototype.size=function(){var t=this.options;return new Tn(0,0,t.width,t.height)},e}(ei);re(di,{width:600,height:400,background:N,border:{color:u,width:0},margin:dt(5),zIndex:-2});const pi=di;var fi=function(t){function e(e){t.call(this,e),this._initDirection()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initDirection=function(){var t=this.options;t.vertical?(this.groupAxis=j,this.elementAxis=z,this.groupSizeField=B,this.elementSizeField=_,this.groupSpacing=t.spacing,this.elementSpacing=t.vSpacing):(this.groupAxis=z,this.elementAxis=j,this.groupSizeField=_,this.elementSizeField=B,this.groupSpacing=t.vSpacing,this.elementSpacing=t.spacing)},e.prototype.reflow=function(t){this.box=t.clone(),this.reflowChildren()},e.prototype.reflowChildren=function(){var t=this,e=this,n=e.box,i=e.elementAxis,r=e.groupAxis,o=e.elementSizeField,s=e.groupSizeField,a=this.groupOptions(),l=a.groups,c=a.groupsSize,h=a.maxGroupElementsSize,u=l.length,d=n[r+1]+this.alignStart(c,n[s]());if(u){for(var p=d,f=0;f<u;f++){for(var g=l[f],m=g.groupElements,y=n[i+1],v=m.length,b=0;b<v;b++){var w=m[b],x=t.elementSize(w),_=p+t.alignStart(x[s],g.groupSize),S=new Tn;S[r+1]=_,S[r+2]=_+x[s],S[i+1]=y,S[i+2]=y+x[o],w.reflow(S),y+=x[o]+t.elementSpacing}p+=g.groupSize+t.groupSpacing}n[r+1]=d,n[r+2]=d+c,n[i+2]=n[i+1]+h}},e.prototype.alignStart=function(t,e){var n=0,i=this.options.align;return i===I||i===d?n=e-t:i===p&&(n=(e-t)/2),n},e.prototype.groupOptions=function(){for(var t=this,e=t.box,n=t.children,i=t.elementSizeField,r=t.groupSizeField,o=t.elementSpacing,s=t.groupSpacing,a=Qt(e[i]()),l=n.length,c=[],h=0,u=0,d=0,p=0,f=[],g=0;g<l;g++){var m=n[g];m.box||m.reflow(e);var y=this.elementSize(m);this.options.wrap&&Qt(u+o+y[i])>a&&(c.push({groupElements:f,groupSize:h,groupElementsSize:u}),p=Math.max(p,u),d+=s+h,h=0,u=0,f=[]),h=Math.max(h,y[r]),u>0&&(u+=o),u+=y[i],f.push(m)}return c.push({groupElements:f,groupSize:h,groupElementsSize:u}),{groups:c,groupsSize:d+=h,maxGroupElementsSize:p=Math.max(p,u)}},e.prototype.elementSize=function(t){return{width:t.box.width(),height:t.box.height()}},e.prototype.createVisual=function(){},e}(ei);re(fi,{vertical:!0,wrap:!0,vSpacing:0,spacing:0});const gi=fi;var mi=n(3657),yi=n(5753),vi=mi.A,bi=function(t){function e(e,n){t.call(this,n),this.content=e,this.reflow(new Tn)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,n=e.size=yi.A(this.content,{font:e.font});this.baseline=n.baseline,this.box=new Tn(t.x1,t.y1,t.x1+n.width,t.y1+n.height)},e.prototype.createVisual=function(){var t=this.options,e=t.font,n=t.color,i=t.opacity,r=t.cursor,o=t.stroke,s=t.paintOrder;this.visual=new vi(this.content,this.box.toRect().topLeft(),{font:e,fill:{color:n,opacity:i},cursor:r,stroke:o,paintOrder:s})},e}(ei);re(bi,{font:v,color:u});const wi=bi;function xi(t){var e=t.origin,n=t.bottomRight();return new Tn(e.x,e.y,n.x,n.y)}var _i=/\n/m,Si=function(t){function e(e,n,i){t.call(this,n),this.content=e,this.data=i,this._initContainer(),!1!==this.options._autoReflow&&this.reflow(new Tn)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initContainer=function(){var t=this.options,e=String(this.content).split(_i),n=new gi({vertical:!0,align:t.align,wrap:!1}),i=st({},t,{opacity:1,animation:null});this.container=n,this.append(n);for(var r=0;r<e.length;r++){var o=new wi(e[r].trim(),i);n.append(o)}},e.prototype.reflow=function(e){var n=this.options,i=n.visual;if(this.container.options.align=n.align,i&&!this._boxReflow){var r=e;r.hasSize()||(this._boxReflow=!0,this.reflow(r),this._boxReflow=!1,r=this.box);var o=this.visual=i(this.visualContext(r));o&&(r=xi(o.clippedBBox()||new kn.A),o.options.zIndex=n.zIndex),this.box=this.contentBox=this.paddingBox=r}else if(t.prototype.reflow.call(this,e),n.rotation){var s=dt(n.margin),a=this.box.unpad(s);this.targetBox=e,this.normalBox=a.clone(),(a=this.rotate()).translate(s.left-s.right,s.top-s.bottom),this.rotatedBox=a.clone(),a.pad(s)}},e.prototype.createVisual=function(){var t=this.options;if(this.visual=new Hn.A({transform:this.rotationTransform(),zIndex:t.zIndex,noclip:t.noclip}),this.hasBox()){var e=Ln.w.fromRect(this.paddingBox.toRect(),this.visualStyle());this.visual.append(e)}},e.prototype.renderVisual=function(){if(this.options.visible)if(this.options.visual){var e=this.visual;e&&!Ht(e.options.noclip)&&(e.options.noclip=this.options.noclip),this.addVisual(),this.createAnimation()}else t.prototype.renderVisual.call(this)},e.prototype.visualContext=function(t){var e=this,n={text:this.content,rect:t.toRect(),sender:this.getSender(),options:this.options,createVisual:function(){return e._boxReflow=!0,e.reflow(t),e._boxReflow=!1,e.getDefaultVisual()}};return this.data&&Object.assign(n,this.data),n},e.prototype.getDefaultVisual=function(){this.createVisual(),this.renderChildren();var t=this.visual;return delete this.visual,t},e.prototype.rotate=function(){var t=this.options;return this.box.rotate(t.rotation),this.align(this.targetBox,j,t.align),this.align(this.targetBox,z,t.vAlign),this.box},e.prototype.rotationTransform=function(){var t=this.options.rotation;if(!t)return null;var e=this.normalBox.center(),n=e.x,i=e.y,r=this.rotatedBox.center();return $n.A().translate(r.x-n,r.y-i).rotate(t,[n,i])},e}(ii);const Ci=Si;var ki=function(t){function e(e){t.call(this,e),this._textBox=new Ci(this.options.text,Object.assign({},this.options,{vAlign:this.options.position})),this.append(this._textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(e){t.prototype.reflow.call(this,e),this.box.snapTo(e,j)},e.buildTitle=function(t,n){var i,r=t;return"string"==typeof t&&(r={text:t}),(r=Object.assign({visible:!0},n,r))&&r.visible&&r.text&&(i=new e(r)),i},e.orderTitles=function(t){var e=[].concat(t),n=e.filter((function(t){return t&&t.options.position!==d})),i=e.filter((function(t){return t&&t.options.position===d}));return Ai(n),Ai(i),i.reverse(),n.concat(i)},e}(ei);function Ai(t){for(var e=1;e<t.length;e++){var n=t[e]._textBox,i=t[e-1]._textBox;i.options.margin=Object.assign(dt(i.options.margin),{bottom:0}),n.options.margin=Object.assign(dt(n.options.margin),{top:0})}}re(ki,{color:u,position:R,align:p,margin:dt(5),padding:dt(5)});const Ei=ki;var Ti=function(t){function e(e,n,i,r,o){t.call(this,n,o),this.text=n,this.value=e,this.index=i,this.dataItem=r,this.reflow(new Tn)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualContext=function(e){var n=t.prototype.visualContext.call(this,e);return n.value=this.value,n.dataItem=this.dataItem,n.format=this.options.format,n.culture=this.options.culture,n},e.prototype.click=function(t,e){t.trigger("axisLabelClick",{element:Kt(e),value:this.value,text:this.text,index:this.index,dataItem:this.dataItem,axis:this.parent.options})},e.prototype.rotate=function(){if(this.options.alignRotation!==p){var e=this.normalBox.toRect(),n=this.rotationTransform();this.box=xi(e.bbox(n.matrix()))}else t.prototype.rotate.call(this);return this.box},e.prototype.rotationTransform=function(){var e=this.options,n=e.rotation;if(!n)return null;if(e.alignRotation===p)return t.prototype.rotationTransform.call(this);var i=$n.A().rotate(n).matrix(),r=this.normalBox.toRect(),o=this.targetBox.toRect(),s=e.rotationOrigin||R,a=s===R||s===d?j:z,l=s===R||s===d?z:j,c=s===R||s===k?o.origin:o.bottomRight(),h=r.topLeft().transformCopy(i),u=r.topRight().transformCopy(i),f=r.bottomRight().transformCopy(i),g=r.bottomLeft().transformCopy(i),m=kn.A.fromPoints(h,u,f,g),y={};y[l]=o.origin[l]-m.origin[l];var v,w,x=Math.abs(h[l]+y[l]-c[l]),_=Math.abs(u[l]+y[l]-c[l]);Qt(x,b)===Qt(_,b)?(v=h,w=u):_<x?(v=u,w=f):(v=h,w=g);var S=v[a]+(w[a]-v[a])/2;return y[a]=o.center()[a]-S,$n.A().translate(y.x,y.y).rotate(n)},e}(Ci);re(Ti,{_autoReflow:!1});const Mi=Ti;var Oi=function(t){function e(e,n,i){t.call(this,n),this.fields=e,this.chartService=i,this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.hide=function(){this.options.visible=!1},e.prototype.show=function(){this.options.visible=!0},e.prototype.render=function(){var t=this,e=this.options;if(e.visible){var n,i,r=e.label,o=e.icon,s=new Tn,a=function(){return t},l=o.size,c=this.fields.text;if(Ht(r)&&r.visible){var h=mt(r);h?c=h(this.fields):r.format&&(c=this.chartService.format.auto(r.format,c)),r.color||(r.color=r.position===S?"#fff":o.background),this.label=new Ci(c,st({},r)),this.label.aliasFor=a,r.position!==S||Ht(l)||(o.type===f?l=Math.max(this.label.box.width(),this.label.box.height()):(n=this.label.box.width(),i=this.label.box.height()),s.wrap(this.label.box))}o.width=n||l||7,o.height=i||l||7;var u=new si(st({},o));u.aliasFor=a,this.marker=u,this.append(u),this.label&&this.append(this.label),u.reflow(new Tn),this.wrapperBox=s.wrap(u.box)}},e.prototype.reflow=function(t){var e,n,i,r=this,o=r.options,s=r.label,a=r.marker,l=r.wrapperBox,c=t.center(),h=o.line.length,u=o.position;o.visible&&(kt(u,[k,I])?u===k?(i=l.alignTo(t,u).translate(-h,t.center().y-l.center().y),o.line.visible&&(e=[t.x1,c.y],this.linePoints=[e,[i.x2,c.y]],n=i.clone().wrapPoint(e))):(i=l.alignTo(t,u).translate(h,t.center().y-l.center().y),o.line.visible&&(e=[t.x2,c.y],this.linePoints=[e,[i.x1,c.y]],n=i.clone().wrapPoint(e))):u===d?(i=l.alignTo(t,u).translate(t.center().x-l.center().x,h),o.line.visible&&(e=[c.x,t.y2],this.linePoints=[e,[c.x,i.y1]],n=i.clone().wrapPoint(e))):(i=l.alignTo(t,u).translate(t.center().x-l.center().x,-h),o.line.visible&&(e=[c.x,t.y1],this.linePoints=[e,[c.x,i.y2]],n=i.clone().wrapPoint(e))),a&&a.reflow(i),s&&(s.reflow(i),a&&(o.label.position===O&&s.box.alignTo(a.box,u),s.reflow(s.box))),this.contentBox=i,this.targetBox=t,this.box=n||i)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.visual.options.noclip=this.options.noclip,this.options.visible&&this.createLine()},e.prototype.renderVisual=function(){var e=this,n=this.options,i=n.visual;n.visible&&i?(this.visual=i(Object.assign(this.fields,{sender:this.getSender(),rect:this.targetBox.toRect(),options:{background:n.background,border:n.background,icon:n.icon,label:n.label,line:n.line,position:n.position,visible:n.visible},createVisual:function(){e.createVisual(),e.renderChildren();var t=e.visual;return delete e.visual,t}})),this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createLine=function(){var t=this.options.line;if(this.linePoints){var e=Ln.w.fromPoints(this.linePoints,{stroke:{color:t.color,width:t.width,dashType:t.dashType}});X(e),this.visual.append(e)}},e.prototype.click=function(t,e){var n=this.eventArgs(e);t.trigger("noteClick",n)||e.preventDefault()},e.prototype.over=function(t,e){var n=this.eventArgs(e);t.trigger("noteHover",n)||e.preventDefault()},e.prototype.out=function(t,e){var n=this.eventArgs(e);t.trigger("noteLeave",n)},e.prototype.eventArgs=function(t){var e=this.options;return Object.assign(this.fields,{element:Kt(t),text:Ht(e.label)?e.label.text:"",visual:this.visual})},e}(ii);re(Oi,{icon:{visible:!0,type:f},label:{position:S,visible:!0,align:p,vAlign:p},line:{visible:!0},visible:!0,position:R,zIndex:2});const Ii=Oi;var Di={format:function(t,e){return e},toString:function(t){return t},parseDate:function(t){return new Date(t)},firstDay:function(){return 0}},Fi=Di,Pi=function(){},Ri={implementation:{configurable:!0}};Pi.register=function(t){Fi=t},Ri.implementation.get=function(){return Fi},Object.defineProperties(Pi,Ri);const Li=Pi;var Ni=/\{(\d+)(:[^\}]+)?\}/g,Bi=function(t){this._intlService=t},ji={intl:{configurable:!0}};ji.intl.get=function(){return this._intlService||Li.implementation},ji.intl.set=function(t){this._intlService=t},Bi.prototype.auto=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var i=this.intl;return J(t)&&t.match(x)?i.format.apply(i,[t].concat(e)):i.toString(e[0],t)},Bi.prototype.localeAuto=function(t,e,n){var i,r=this.intl;return i=J(t)&&t.match(x)?t.replace(Ni,(function(t,i,o){var s=e[parseInt(i,10)];return r.toString(s,o?o.substring(1):"",n)})):r.toString(e[0],t,n),i},Object.defineProperties(Bi.prototype,ji);const zi=Bi;var $i=function(t,e){void 0===e&&(e={}),this._intlService=e.intlService,this.sender=e.sender||t,this.format=new zi(e.intlService),this.chart=t,this.rtl=Boolean(e.rtl)},Hi={intl:{configurable:!0}};Hi.intl.get=function(){return this._intlService||Li.implementation},Hi.intl.set=function(t){this._intlService=t,this.format.intl=t},$i.prototype.notify=function(t,e){this.chart&&this.chart.trigger(t,e)},$i.prototype.isPannable=function(t){var e=((this.chart||{}).options||{}).pannable;return e&&e.lock!==t},Object.defineProperties($i.prototype,Hi);const Ui=$i;var Vi,Wi=function(){};Wi.register=function(t){Vi=t},Wi.create=function(t,e){return Vi?Vi.create(t,e):new _n(t,Object.assign({},{multiTouch:!0},e))};const qi=Wi;function Ki(t,e){var n=t.tickX,i=t.tickY,r=t.position,o=new Ln.w({stroke:{width:e.width,color:e.color}});return t.vertical?o.moveTo(n,r).lineTo(n+e.size,r):o.moveTo(r,i).lineTo(r,i+e.size),X(o),o}function Xi(t,e){var n=t.lineStart,i=t.lineEnd,r=t.position,o=new Ln.w({stroke:{width:e.width,color:e.color,dashType:e.dashType}});return t.vertical?o.moveTo(n,r).lineTo(i,r):o.moveTo(r,n).lineTo(r,i),X(o),o}var Gi=function(t){function e(e,n){void 0===n&&(n=new Ui),t.call(this,e),this.chartService=n,this.options.visible||(this.options=st({},this.options,{labels:{visible:!1},line:{visible:!1},margin:0,majorTickSize:0,minorTickSize:0})),this.options.minorTicks=st({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.minorTickType!==T},this.options.minorTicks,{size:this.options.minorTickSize,align:this.options.minorTickType}),this.options.majorTicks=st({},{color:this.options.line.color,width:this.options.line.width,visible:this.options.majorTickType!==T},this.options.majorTicks,{size:this.options.majorTickSize,align:this.options.majorTickType}),this.initFields(),this.options._deferLabels||this.createLabels(),this.createTitle(),this.createNotes()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.labelsCount()}},e.prototype.normalizeLabelRotation=function(t){var e=t.rotation;at(e)&&(t.alignRotation=e.align,t.rotation=e.angle)},e.prototype.createLabels=function(){var t=this,e=this.options,n=e.vertical?I:p,i=st({},e.labels,{align:n,zIndex:e.zIndex}),r=Math.max(1,i.step);if(this.clearLabels(),i.visible){this.normalizeLabelRotation(i),"auto"===i.rotation&&(i.rotation=0,e.autoRotateLabels=!0);for(var o=this.labelsRange(),s=o.min;s<o.max;s+=r){var a={index:s,count:o.max},l=t.createAxisLabel(s,i,a);l&&(t.append(l),t.labels.push(l))}}},e.prototype.clearLabels=function(){this.children=xt(this.children,(function(t){return!(t instanceof Mi)})),this.labels=[]},e.prototype.clearTitle=function(){var t=this;this.title&&(this.children=xt(this.children,(function(e){return e!==t.title})),this.title=void 0)},e.prototype.clear=function(){this.clearLabels(),this.clearTitle()},e.prototype.lineBox=function(){var t=this.options,e=this.box,n=t.vertical,i=t.labels.mirror,r=i?e.x1:e.x2,o=i?e.y2:e.y1,s=t.line.width||0;return n?new Tn(r,e.y1,r,e.y2-s):new Tn(e.x1,o,e.x2-s,o)},e.prototype.createTitle=function(){var t=this.options,e=st({rotation:t.vertical?-90:0,text:"",zIndex:1,visualSize:!0},t.title);if(e.visible&&e.text){var n=new Ci(e.text,e);this.append(n),this.title=n}},e.prototype.createNotes=function(){var t=this,e=this.options,n=e.notes,i=n.data||[];this.notes=[];for(var r=0;r<i.length;r++){var o=st({},n,i[r]);o.value=t.parseNoteValue(o.value);var s=new Ii({value:o.value,text:o.label.text,dataItem:o},o,t.chartService);s.options.visible&&(Ht(s.options.position)?e.vertical&&!kt(s.options.position,[k,I])?s.options.position=e.reverse?k:I:e.vertical||kt(s.options.position,[R,d])||(s.options.position=e.reverse?d:R):e.vertical?s.options.position=e.reverse?k:I:s.options.position=e.reverse?d:R,t.append(s),t.notes.push(s))}},e.prototype.parseNoteValue=function(t){return t},e.prototype.renderVisual=function(){t.prototype.renderVisual.call(this),this.createPlotBands()},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.createBackground(),this.createLine()},e.prototype.gridLinesVisual=function(){var t=this._gridLines;return t||(t=this._gridLines=new Hn.A({zIndex:-2}),this.appendVisual(this._gridLines)),t},e.prototype.createTicks=function(t){var e=this.options,n=this.lineBox(),i=e.labels.mirror,r=e.majorTicks.visible?e.majorUnit:0,o={vertical:e.vertical};function s(e,r,s){var a=e.length,l=Math.max(1,r.step);if(r.visible)for(var c=r.skip;c<a;c+=l)Ht(s)&&c%s==0||(o.tickX=i?n.x2:n.x2-r.size,o.tickY=i?n.y1-r.size:n.y1,o.position=e[c],t.append(Ki(o,r)))}s(this.getMajorTickPositions(),e.majorTicks),s(this.getMinorTickPositions(),e.minorTicks,r/e.minorUnit)},e.prototype.createLine=function(){var t=this.options,e=t.line,n=this.lineBox();if(e.width>0&&e.visible){var i=new Ln.w({stroke:{width:e.width,color:e.color,dashType:e.dashType}});i.moveTo(n.x1,n.y1).lineTo(n.x2,n.y2),t._alignLines&&X(i);var r=this._lineGroup=new Hn.A;r.append(i),this.visual.append(r),this.createTicks(r)}},e.prototype.getActualTickSize=function(){var t=this.options,e=0;return t.majorTicks.visible&&t.minorTicks.visible?e=Math.max(t.majorTicks.size,t.minorTicks.size):t.majorTicks.visible?e=t.majorTicks.size:t.minorTicks.visible&&(e=t.minorTicks.size),e},e.prototype.createBackground=function(){var t=this.options,e=this.box,n=t.background;n&&(this._backgroundPath=Ln.w.fromRect(e.toRect(),{fill:{color:n},stroke:null}),this.visual.append(this._backgroundPath))},e.prototype.createPlotBands=function(){var t=this,e=this.options,n=e.plotBands||[],i=e.vertical,r=this.plotArea;if(0!==n.length){for(var o=this._plotbandGroup=new Hn.A({zIndex:-1}),s=xt(this.pane.axes,(function(e){return e.options.vertical!==t.options.vertical}))[0],a=0;a<n.length;a++){var l=n[a],c=void 0,h=void 0,u=l.label,d=void 0;if(i?(c=(s||r.axisX).lineBox(),h=t.getSlot(l.from,l.to,!0)):(c=t.getSlot(l.from,l.to,!0),h=(s||r.axisY).lineBox()),u&&(u.vAlign=u.position||k,d=t.createPlotBandLabel(u,l,new Tn(c.x1,h.y1,c.x2,h.y2))),0!==c.width()&&0!==h.height()){var p=new kn.A([c.x1,h.y1],[c.width(),h.height()]),f=Ln.w.fromRect(p,{fill:{color:l.color,opacity:l.opacity},stroke:null});o.append(f),d&&o.append(d)}}this.appendVisual(o)}},e.prototype.createPlotBandLabel=function(t,e,n){if(!1===t.visible)return null;var i,r=t.text;if(Ht(t)&&t.visible){var o=mt(t);o?r=o({text:r,item:e}):t.format&&(r=this.chartService.format.auto(t.format,r)),t.color||(t.color=this.options.labels.color)}return(i=new Ci(r,t)).reflow(n),i.renderVisual(),i.visual},e.prototype.createGridLines=function(t){var e=this.options,n=e.minorGridLines,i=e.majorGridLines,r=e.minorUnit,o=e.vertical,s=t.options.line.visible,a=i.visible?e.majorUnit:0,l=t.lineBox(),c=l[o?"y1":"x1"],h={lineStart:l[o?"x1":"y1"],lineEnd:l[o?"x2":"y2"],vertical:o},u=[],d=this.gridLinesVisual();function p(t,e,n){var i=t.length,r=Math.max(1,e.step);if(e.visible)for(var o=e.skip;o<i;o+=r){var a=Qt(t[o]);kt(a,u)||o%n==0||s&&c===a||(h.position=a,d.append(Xi(h,e)),u.push(a))}}return p(this.getMajorTickPositions(),i),p(this.getMinorTickPositions(),n,a/r),d.children},e.prototype.reflow=function(t){for(var e=this,n=e.options,i=e.labels,r=e.title,o=n.vertical,s=i.length,a=o?B:_,l=r?r.box[a]():0,c=this.getActualTickSize()+n.margin+l,h=((this.getRoot()||{}).box||t)[a](),u=0,d=0;d<s;d++){var p=i[d].box[a]();p+c<=h&&(u=Math.max(u,p))}this.box=o?new Tn(t.x1,t.y1,t.x1+u+c,t.y2):new Tn(t.x1,t.y1,t.x2,t.y1+u+c),this.arrangeTitle(),this.arrangeLabels(),this.arrangeNotes()},e.prototype.getLabelsTickPositions=function(){return this.getMajorTickPositions()},e.prototype.labelTickIndex=function(t){return t.index},e.prototype.arrangeLabels=function(){for(var t=this.options,e=this.labels,n=this.labelsBetweenTicks(),i=t.vertical,r=t.labels.mirror,o=this.getLabelsTickPositions(),s=0;s<e.length;s++){var a=e[s],l=this.labelTickIndex(a),c=i?a.box.height():a.box.width(),h=o[l],u=o[l+1],d=void 0,p=void 0;if(i){if(n)d=h+(u-h)/2-c/2;else d=h-c/2;p=d}else n?(d=h,p=u):p=(d=h-c/2)+c;this.positionLabel(a,r,d,p)}},e.prototype.positionLabel=function(t,e,n,i){void 0===i&&(i=n);var r,o=this.options,s=o.vertical,a=this.lineBox(),l=this.getActualTickSize()+o.margin;if(s){var c=a.x2;e?(c+=l,t.options.rotationOrigin=k):(c-=l+t.box.width(),t.options.rotationOrigin=I),r=t.box.move(c,n)}else{var h=a.y1;e?(h-=l+t.box.height(),t.options.rotationOrigin=d):(h+=l,t.options.rotationOrigin=R),r=new Tn(n,h,i,h+t.box.height())}t.reflow(r)},e.prototype.autoRotateLabelAngle=function(t,e){return t.width()<e?0:t.height()>e?-90:-45},e.prototype.autoRotateLabels=function(){if(!this.options.autoRotateLabels||this.options.vertical)return!1;for(var t=this.getMajorTickPositions(),e=this.labels,n=Math.min(e.length,t.length-1),i=0,r=0;r<n;r++){var o=Math.abs(t[r+1]-t[r]),s=e[r].box,a=this.autoRotateLabelAngle(s,o);if(0!==a&&(i=a),-90===i)break}if(0!==i){for(var l=0;l<e.length;l++)e[l].options.rotation=i,e[l].reflow(new Tn);return!0}},e.prototype.arrangeTitle=function(){var t=this.options,e=this.title,n=t.labels.mirror,i=t.vertical;e&&(i?(e.options.align=n?I:k,e.options.vAlign=e.options.position):(e.options.align=e.options.position,e.options.vAlign=n?R:d),e.reflow(this.box))},e.prototype.arrangeNotes=function(){for(var t=this,e=0;e<this.notes.length;e++){var n=t.notes[e],i=n.options.value,r=void 0;Ht(i)?(t.shouldRenderNote(i)?n.show():n.hide(),r=t.noteSlot(i)):n.hide(),n.reflow(r||t.lineBox())}},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.alignTo=function(t){var e=t.lineBox(),n=this.options.vertical,i=n?z:j;this.box.snapTo(e,i),n?this.box.shrink(0,this.lineBox().height()-e.height()):this.box.shrink(this.lineBox().width()-e.width(),0),this.box[i+1]-=this.lineBox()[i+1]-e[i+1],this.box[i+2]-=this.lineBox()[i+2]-e[i+2]},e.prototype.axisLabelText=function(t,e,n){var i,r=this,o=mt(e),s=function(){return e.format?r.chartService.format.localeAuto(e.format,[t],e.culture):t};o?i=o(Object.assign({},n,{get text(){return s()},value:t,format:e.format,culture:e.culture})):i=s();return i},e.prototype.slot=function(t,e,n){var i=this.getSlot(t,e,n);if(i)return i.toRect()},e.prototype.contentBox=function(){var t=this.box.clone(),e=this.labels;if(e.length){var n=this.options.vertical?z:j;if(this.chartService.isPannable(n)){var i=this.maxLabelOffset();t[n+1]-=i.start,t[n+2]+=i.end}else{e[0].options.visible&&t.wrap(e[0].box);var r=e[e.length-1];r.options.visible&&t.wrap(r.box)}}return t},e.prototype.maxLabelOffset=function(){for(var t=this.options,e=t.vertical,n=t.reverse,i=this.labelsBetweenTicks(),r=this.getLabelsTickPositions(),o=e?z:j,s=this.labels,a=n?1:0,l=n?0:1,c=0,h=0,u=0;u<s.length;u++){var d=s[u],p=this.labelTickIndex(d),f=void 0,g=void 0;i?(f=r[p+a],g=r[p+l]):f=g=r[p],c=Math.max(c,f-d.box[o+1]),h=Math.max(h,d.box[o+2]-g)}return{start:c,end:h}},e.prototype.limitRange=function(t,e,n,i,r){var o=this.options;if(t<n&&r<0&&(!Ht(o.min)||o.min<=n)||i<e&&r>0&&(!Ht(o.max)||i<=o.max))return null;if(e<n&&r>0||i<t&&r<0)return{min:t,max:e};var s=e-t,a=t,l=e;return t<n&&r<0?(a=Yt(t,n,i),l=Yt(t+s,n+s,i)):e>i&&r>0&&(l=Yt(e,n,i),a=Yt(e-s,n,i-s)),{min:a,max:l}},e.prototype.valueRange=function(){return{min:this.seriesMin,max:this.seriesMax}},e.prototype.lineDir=function(){var t=this.options;return(t.vertical?-1:1)*(t.reverse?-1:1)},e.prototype.lineInfo=function(){var t=this.options.vertical,e=this.lineBox(),n=t?e.height():e.width(),i=t?z:j,r=this.lineDir(),o=i+(1===r?1:2).toString();return{axis:i,axisOrigin:o,axisDir:r,lineBox:e,lineSize:n,lineStart:e[o]}},e.prototype.pointOffset=function(t){var e=this.lineInfo(),n=e.axis,i=e.axisDir,r=e.axisOrigin,o=e.lineBox,s=e.lineSize;return(i>0?t[n]-o[r]:o[r]-t[n])/s},e.prototype.scaleToDelta=function(t,e){var n=Yt(t,-.999,.999);return n>0?e*Math.min(1,n):e-e/(1+n)},e.prototype.labelsBetweenTicks=function(){return!this.options.justified},e.prototype.prepareUserOptions=function(){},e}(ei);re(Gi,{labels:{visible:!0,rotation:0,mirror:!1,step:1,skip:0},line:{width:1,color:u,visible:!0},title:{visible:!0,position:p},majorTicks:{align:O,size:4,skip:0,step:1},minorTicks:{align:O,size:3,skip:0,step:1},axisCrossingValue:0,majorTickType:O,minorTickType:T,majorGridLines:{skip:0,step:1},minorGridLines:{visible:!1,width:1,color:u,skip:0,step:1},margin:5,visible:!0,reverse:!1,justified:!0,notes:{label:{text:""}},_alignLines:!0,_deferLabels:!1});const Yi=Gi;var Ji="milliseconds",Zi="seconds",Qi="minutes",tr="hours",er="days",nr="weeks",ir="months",rr="years",or=1e3,sr=60*or,ar=60*sr,lr=24*ar,cr=7*lr,hr=31*lr,ur=365*lr,dr={years:ur,months:hr,weeks:cr,days:lr,hours:ar,minutes:sr,seconds:or,milliseconds:1};function pr(t,e){return t.getTime()-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*sr}function fr(t,e){return new Date(t.getTime()+e)}function gr(t){var e;return t instanceof Date?e=t:t&&(e=new Date(t)),e}function mr(t,e){return 0===e&&23===t.getHours()&&(t.setHours(t.getHours()+2),!0)}function yr(t,e,n,i){var r=t;if(t){var o=gr(t),s=o.getHours();n===rr?mr(r=new Date(o.getFullYear()+e,0,1),0):n===ir?mr(r=new Date(o.getFullYear(),o.getMonth()+e,1),s):n===nr?(r=yr(function(t,e){void 0===e&&(e=0);var n=0,i=t.getDay();if(!isNaN(i))for(;i!==e;)0===i?i=6:i--,n++;return fr(t,-n*lr)}(o,i),7*e,er),mr(r,s)):n===er?mr(r=new Date(o.getFullYear(),o.getMonth(),o.getDate()+e),s):n===tr?r=function(t,e){var n=new Date(t);n.setMinutes(0,0,0);var i=(t.getTimezoneOffset()-n.getTimezoneOffset())*sr;return fr(n,i+e*ar)}(o,e):n===Qi?(r=fr(o,e*sr)).getSeconds()>0&&r.setSeconds(0):n===Zi?r=fr(o,e*or):n===Ji&&(r=fr(o,e)),n!==Ji&&r.getMilliseconds()>0&&r.setMilliseconds(0)}return r}function vr(t,e,n){return yr(gr(t),0,e,n)}function br(t,e,n){var i=gr(t);return i&&vr(i,e,n).getTime()===i.getTime()?i:yr(i,1,e,n)}function wr(t,e){return t&&e?t.getTime()-e.getTime():-1}function xr(t,e){return t.getTime()-e}function _r(t){if(U(t)){for(var e=[],n=0;n<t.length;n++)e.push(_r(t[n]));return e}if(t)return gr(t).getTime()}function Sr(t,e){return t&&e?_r(t)===_r(e):t===e}function Cr(t,e,n){return pr(t,e)/dr[n]}function kr(t,e,n,i){var r=gr(t),o=gr(e);return(n===ir?r.getMonth()-o.getMonth()+12*(r.getFullYear()-o.getFullYear())+Cr(r,new Date(r.getFullYear(),r.getMonth()),er)/new Date(r.getFullYear(),r.getMonth()+1,0).getDate():n===rr?r.getFullYear()-o.getFullYear()+kr(r,new Date(r.getFullYear(),0),ir,1)/12:n===er||n===nr?Cr(r,o,n):xr(r,e)/dr[n])/i}function Ar(t,e,n){return n===rr?e.getFullYear()-t.getFullYear():n===ir?12*Ar(t,e,rr)+e.getMonth()-t.getMonth():n===er?Math.floor(xr(e,t)/lr):Math.floor(xr(e,t)/dr[n])}function Er(t,e){return J(e)&&t.parseDate(e)||gr(e)}function Tr(t,e){if(U(e)){for(var n=[],i=0;i<e.length;i++)n.push(Er(t,e[i]));return n}return Er(t,e)}function Mr(t,e){return Y(t.weekStartDay)?t.weekStartDay:e&&e.firstDay?e.firstDay():0}var Or=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this._ticks={}},e.prototype.categoriesHash=function(){return""},e.prototype.clone=function(){var t=new e(Object.assign({},this.options,{categories:this.options.srcCategories}),this.chartService);return t.createLabels(),t},e.prototype.initUserOptions=function(t){var e=t.categories||[],n=Ht(t.min),i=Ht(t.max);if(t.srcCategories=t.categories=e,(n||i)&&e.length){var r,o=n?Math.floor(t.min):0;r=i?t.justified?Math.floor(t.max)+1:Math.ceil(t.max):e.length,t.categories=t.categories.slice(o,r)}return t},e.prototype.rangeIndices=function(){var t=this.options,e=t.categories.length||1;return{min:Y(t.min)?t.min%1:0,max:Y(t.max)&&t.max%1!=0&&t.max<this.totalRange().max?e-(1-t.max%1):e-(t.justified?1:0)}},e.prototype.range=function(){var t=this.options;return{min:Y(t.min)?t.min:0,max:Y(t.max)?t.max:this.totalRange().max}},e.prototype.roundedRange=function(){return this.range()},e.prototype.totalRange=function(){var t=this.options;return{min:0,max:Math.max(this._seriesMax||0,t.srcCategories.length)-(t.justified?1:0)}},e.prototype.scaleOptions=function(){var t=this.rangeIndices(),e=t.min,n=t.max,i=this.lineBox();return{scale:(this.options.vertical?i.height():i.width())/(n-e||1)*(this.options.reverse?-1:1),box:i,min:e,max:n}},e.prototype.arrangeLabels=function(){t.prototype.arrangeLabels.call(this),this.hideOutOfRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){var t=this.box,e=this.labels;if(e.length>0){var n=this.options.vertical?z:j,i=t[n+1],r=t[n+2],o=e[0],s=Gt(e);(o.box[n+1]>r||o.box[n+2]<i)&&(o.options.visible=!1),(s.box[n+1]>r||s.box[n+2]<i)&&(s.options.visible=!1)}},e.prototype.getMajorTickPositions=function(){return this.getTicks().majorTicks},e.prototype.getMinorTickPositions=function(){return this.getTicks().minorTicks},e.prototype.getLabelsTickPositions=function(){return this.getTicks().labelTicks},e.prototype.tickIndices=function(t){for(var e=this.rangeIndices(),n=e.min,i=e.max,r=Math.ceil(i),o=Math.floor(n),s=[];o<=r;)s.push(o),o+=t;return s},e.prototype.getTickPositions=function(t){for(var e=this.options,n=e.vertical,i=e.reverse,r=this.scaleOptions(),o=r.scale,s=r.box,a=r.min,l=s[(n?z:j)+(i?2:1)],c=this.tickIndices(t),h=[],u=0;u<c.length;u++)h.push(l+Qt(o*(c[u]-a),g));return h},e.prototype.getTicks=function(){var t=this.options,e=this._ticks,n=this.rangeIndices(),i=this.lineBox(),r=i.getHash()+n.min+","+n.max+t.reverse+t.justified;if(e._hash!==r){var o=t.minorTicks.visible||t.minorGridLines.visible;e._hash=r,e.labelTicks=this.getTickPositions(1),e.majorTicks=this.filterOutOfRangePositions(e.labelTicks,i),e.minorTicks=o?this.filterOutOfRangePositions(this.getTickPositions(.5),i):[]}return e},e.prototype.filterOutOfRangePositions=function(t,e){if(!t.length)return t;for(var n=this.options.vertical?z:j,i=function(t){return e[n+1]<=t&&t<=e[n+2]},r=t.length-1,o=0;!i(t[o])&&o<=r;)o++;for(var s=r;!i(t[s])&&s>=0;)s--;return t.slice(o,s+1)},e.prototype.lineInfo=function(){var t=this.options,e=t.vertical,n=t.reverse,i=this.lineBox(),r=e?i.height():i.width(),o=e?z:j,s=n?-1:1,a=o+(1===s?1:2).toString();return{axis:o,axisOrigin:a,axisDir:s,lineBox:i,lineSize:r,lineStart:i[a]}},e.prototype.lineDir=function(){return this.options.reverse?-1:1},e.prototype.getSlot=function(t,e,n){var i=this.options,r=i.reverse,o=i.justified,s=this.scaleOptions(),a=s.scale,l=s.box,c=s.min,h=this.lineInfo(),u=h.axis,d=h.lineStart,p=l.clone(),f=!Ht(e),g=ee(t,0),m=ee(e,g);m=Math.max(m-1,g);var y=d+(g-c)*a,v=d+((m=Math.max(g,m))+1-c)*a;return f&&o&&(v=y),n&&(y=Yt(y,l[u+1],l[u+2]),v=Yt(v,l[u+1],l[u+2])),p[u+1]=r?v:y,p[u+2]=r?y:v,p},e.prototype.limitSlot=function(t){var e=this.options.vertical?z:j,n=this.lineBox(),i=t.clone();return i[e+1]=Yt(t[e+1],n[e+1],n[e+2]),i[e+2]=Yt(t[e+2],n[e+1],n[e+2]),i},e.prototype.slot=function(e,n,i){var r=Math.floor(this.options.min||0),o=e,s=n;return"string"==typeof o?o=this.categoryIndex(o):Y(o)&&(o-=r),"string"==typeof s?s=this.categoryIndex(s):Y(s)&&(s-=r),t.prototype.slot.call(this,o,s,i)},e.prototype.pointCategoryIndex=function(t){var e=this.options,n=e.reverse,i=e.justified,r=e.vertical?z:j,o=this.scaleOptions(),s=o.scale,a=o.box,l=o.min,c=o.max,h=n?c:l,u=a[r+1],d=a[r+2],p=t[r];if(p<u||p>d)return null;var f=h+(p-u)/s,g=f%1;return i?f=Math.round(f):0===g&&f>0&&f--,Math.floor(f)},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.options.categories[e]},e.prototype.categoryIndex=function(t){return this.totalIndex(t)-Math.floor(this.options.min||0)},e.prototype.categoryAt=function(t,e){var n=this.options;return(e?n.srcCategories:n.categories)[t]},e.prototype.categoriesCount=function(){return(this.options.categories||[]).length},e.prototype.translateRange=function(t){var e=this.options,n=this.lineBox(),i=e.vertical?n.height():n.width(),r=e.categories.length,o=Qt(t/(i/r),b);return{min:o,max:r+o}},e.prototype.scaleRange=function(t,e){var n=Math.abs(this.pointOffset(e)),i=this.limitedRangeIndices(),r=i.max-i.min,o=this.scaleToDelta(t,r),s=n*o,a=(1-n)*o,l=i.min+s,c=i.max-a;return c-l<.1&&(c=l+.1),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var n=this.totalRange(),i=n.min,r=n.max,o=this.scaleRange(t,e);return{min:Yt(o.min,i,r),max:Yt(o.max,i,r)}},e.prototype.labelsCount=function(){var t=this.labelsRange();return t.max-t.min},e.prototype.labelsRange=function(){var t=this.options,e=t.justified,n=t.labels,i=this.limitedRangeIndices(!0),r=i.min,o=i.max,s=Math.floor(r);return e?(r=Math.ceil(r),o=Math.floor(o)):(r=Math.floor(r),o=Math.ceil(o)),{min:(r>n.skip?n.skip+n.step*Math.ceil((r-n.skip)/n.step):n.skip)-s,max:(t.categories.length?o+(e?1:0):0)-s}},e.prototype.createAxisLabel=function(t,e,n){var i=this.options,r=i.dataItems?i.dataItems[t]:null,o=ee(i.categories[t],"");n.dataItem=r;var s=this.axisLabelText(o,e,n);return new Mi(o,s,t,r,e)},e.prototype.shouldRenderNote=function(t){var e=this.limitedRangeIndices();return Math.floor(e.min)<=t&&t<=Math.ceil(e.max)},e.prototype.noteSlot=function(t){var e=this.options,n=t-Math.floor(e.min||0);return this.getSlot(n)},e.prototype.arrangeNotes=function(){t.prototype.arrangeNotes.call(this),this.hideOutOfRangeNotes()},e.prototype.hideOutOfRangeNotes=function(){var t=this.notes,e=this.box;if(t&&t.length)for(var n=this.options.vertical?z:j,i=e[n+1],r=e[n+2],o=0;o<t.length;o++){var s=t[o];s.box&&(r<s.box[n+1]||s.box[n+2]<i)&&s.hide()}},e.prototype.pan=function(t){var e=this.limitedRangeIndices(!0),n=this.scaleOptions().scale,i=Qt(t/n,b),r=this.totalRange(),o=e.min+i,s=e.max+i;return this.limitRange(o,s,0,r.max,i)},e.prototype.pointsRange=function(t,e){var n=this.options,i=n.reverse,r=n.vertical?z:j,o=this.limitedRangeIndices(!0),s=this.scaleOptions(),a=s.scale,l=s.box[r+(i?2:1)],c=t[r]-l,h=e[r]-l,u=o.min+c/a,d=o.min+h/a,p=Math.min(u,d),f=Math.max(u,d);if(f-p>=.01)return{min:p,max:f}},e.prototype.valueRange=function(){return this.range()},e.prototype.totalIndex=function(t){var e=this.options,n=this._categoriesMap?this._categoriesMap.get(t):function(t,e){if(t instanceof Date){for(var n=e.length,i=0;i<n;i++)if(Sr(e[i],t))return i;return-1}return e.indexOf(t)}(t,e.srcCategories);return n},e.prototype.currentRangeIndices=function(){var t=this.options,e=0;return Y(t.min)&&(e=Math.floor(t.min)),{min:e,max:Y(t.max)?t.justified?Math.floor(t.max):Math.ceil(t.max)-1:this.totalCount()-1}},e.prototype.limitedRangeIndices=function(t){var e,n=this.options,i=Y(n.min)?n.min:0;if(e=Y(n.max)?n.max:Y(n.min)?i+n.categories.length:this.totalRange().max||1,t){var r=this.totalRange();i=Yt(i,0,r.max),e=Yt(e,0,r.max)}return{min:i,max:e}},e.prototype.totalRangeIndices=function(){return{min:0,max:this.totalRange().max||1}},e.prototype.indexCategories=function(){if(!this._categoriesMap)for(var t=this._categoriesMap=new Ct,e=this.options.srcCategories,n=0;n<e.length;n++)t.set(e[n],n)},e.prototype.totalCount=function(){return Math.max(this.options.srcCategories.length,this._seriesMax||0)},e}(Yi);re(Or,{type:"category",vertical:!1,majorGridLines:{visible:!1,width:1,color:u},labels:{zIndex:1},justified:!1,_deferLabels:!0});const Ir=Or;var Dr=3e5,Fr={milliseconds:"HH:mm:ss.fff",seconds:"HH:mm:ss",minutes:"HH:mm",hours:"HH:mm",days:"M/d",weeks:"M/d",months:"MMM 'yy",years:"yyyy"},Pr=.2,Rr=[Ji,Zi,Qi,tr,er,nr,ir,rr],Lr="fit";function Nr(t,e){e&&(t._range=void 0);var n=t._range;return n||((n=t._range=de(t)).min=gr(n.min),n.max=gr(n.max)),n}var Br=function(t){this.options=t};Br.prototype.displayIndices=function(){return{min:0,max:1}},Br.prototype.displayRange=function(){return{}},Br.prototype.total=function(){return{}},Br.prototype.valueRange=function(){return{}},Br.prototype.valueIndex=function(){return-1},Br.prototype.values=function(){return[]},Br.prototype.totalIndex=function(){return-1},Br.prototype.valuesCount=function(){return 0},Br.prototype.totalCount=function(){return 0},Br.prototype.dateAt=function(){return null};var jr=function(t,e,n){this.options=n,n.baseUnitStep=n.baseUnitStep||1;var i=n.roundToBaseUnit,r=n.justified;this.start=yr(t,0,n.baseUnit,n.weekStartDay);var o=this.roundToTotalStep(e),s=!r&&Sr(e,o)&&!n.justifyEnd;this.end=this.roundToTotalStep(e,!r,s?1:0);var a=n.min||t;this.valueStart=this.roundToTotalStep(a),this.displayStart=i?this.valueStart:a;var l=n.max;if(l){var c=!r&&Sr(l,this.roundToTotalStep(l))?-1:0;this.valueEnd=this.roundToTotalStep(l,!1,c),this.displayEnd=i?this.roundToTotalStep(l,!r):n.max}else this.valueEnd=o,this.displayEnd=i||s?this.end:e;this.valueEnd<this.valueStart&&(this.valueEnd=this.valueStart),this.displayEnd<=this.displayStart&&(this.displayEnd=this.roundToTotalStep(this.displayStart,!1,1))};function zr(t,e,n){for(var i,r,o,s=Nr(t.categories),a=(t.max||s.max)-(t.min||s.min),l=t.autoBaseUnitSteps,c=t.maxDateGroups,h=t.baseUnit===Lr,u=e?Rr.indexOf(e):0,d=h?Rr[u++]:t.baseUnit,p=a/dr[d],f=p;!r||p>=c;){i=i||l[d].slice(0);do{o=i.shift()}while(o&&e===d&&o<n);if(o)p=f/(r=o);else{if(d===Gt(Rr)){r=Math.ceil(f/c);break}if(!h){p>c&&(r=Math.ceil(f/c));break}d=Rr[u++]||Gt(Rr),f=a/dr[d],i=null}}t.baseUnitStep=r,t.baseUnit=d}function $r(t){var e=(t.baseUnit||"").toLowerCase();return e!==Lr&&!kt(e,Rr)&&function(t){for(var e,n,i=t.categories,r=Ht(i)?i.length:0,o=A,s=0;s<r;s++){var a=i[s];if(a&&e){var l=Math.abs(pr(a,e));0!==l&&(n=(o=Math.min(o,l))>=ur?rr:o>=hr-3*lr?ir:o>=cr?nr:o>=lr?er:o>=ar?tr:o>=sr?Qi:Zi)}e=a}t.baseUnit=n||er}(t),e!==Lr&&"auto"!==t.baseUnitStep||zr(t),t}jr.prototype.displayRange=function(){return{min:this.displayStart,max:this.displayEnd}},jr.prototype.displayIndices=function(){if(!this._indices){var t=this.options,e=t.baseUnit,n=t.baseUnitStep,i=kr(this.displayStart,this.valueStart,e,n),r=kr(this.displayEnd,this.valueStart,e,n);this._indices={min:i,max:r}}return this._indices},jr.prototype.total=function(){return{min:this.start,max:this.end}},jr.prototype.totalCount=function(){return this.totalIndex(this.end)+(this.options.justified?1:0)},jr.prototype.valueRange=function(){return{min:this.valueStart,max:this.valueEnd}},jr.prototype.valueIndex=function(t){var e=this.options;return Math.floor(kr(t,this.valueStart,e.baseUnit,e.baseUnitStep))},jr.prototype.totalIndex=function(t){var e=this.options;return Math.floor(kr(t,this.start,e.baseUnit,e.baseUnitStep))},jr.prototype.dateIndex=function(t){var e=this.options;return kr(t,this.valueStart,e.baseUnit,e.baseUnitStep)},jr.prototype.valuesCount=function(){return this.valueIndex(this.valueEnd)+1},jr.prototype.values=function(){var t=this._values;if(!t){var e=this.options,n=this.valueRange();this._values=t=[];for(var i=n.min;i<=n.max;)t.push(i),i=yr(i,e.baseUnitStep,e.baseUnit,e.weekStartDay)}return t},jr.prototype.dateAt=function(t,e){var n=this.options;return yr(e?this.start:this.valueStart,n.baseUnitStep*t,n.baseUnit,n.weekStartDay)},jr.prototype.roundToTotalStep=function(t,e,n){var i=this.options,r=i.baseUnit,o=i.baseUnitStep,s=i.weekStartDay,a=this.start,l=kr(t,a,r,o),c=e?Math.ceil(l):Math.floor(l);return n&&(c+=n),yr(a,c*o,r,s)};var Hr=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){var t=new e(Object.assign({},this.options),this.chartService);return t.createLabels(),t},e.prototype.categoriesHash=function(){var t=this.dataRange.total().min;return this.options.baseUnit+this.options.baseUnitStep+t},e.prototype.initUserOptions=function(t){return t},e.prototype.initFields=function(){t.prototype.initFields.call(this);var e=this.chartService,n=e.intl,i=this.options,r=i.categories||[];if(r._parsed||((r=Tr(n,r))._parsed=!0),i=st({roundToBaseUnit:!0},i,{categories:r,min:Er(n,i.min),max:Er(n,i.max),weekStartDay:Mr(i,n)}),e.panning&&e.isPannable(i.vertical?z:j)&&(i.roundToBaseUnit=!1),i.userSetBaseUnit=i.userSetBaseUnit||i.baseUnit,i.userSetBaseUnitStep=i.userSetBaseUnitStep||i.baseUnitStep,this.options=i,i.srcCategories=r,r.length>0){var o=Nr(r,!0),s=i.maxDivisions,a=$r(i),l=i._forecast;if(l&&(l.before>0&&(o.min=yr(o.min,-l.before,a.baseUnit,a.weekStartDay)),l.after>0&&(o.max=yr(o.max,l.after,a.baseUnit,a.weekStartDay))),this.dataRange=new jr(o.min,o.max,a),s){var c=this.dataRange.displayRange(),h=Object.assign({},i,{justified:!0,roundToBaseUnit:!1,baseUnit:"fit",min:c.min,max:c.max,maxDateGroups:s}),u=this.dataRange.options;zr(h,u.baseUnit,u.baseUnitStep),this.divisionRange=new jr(o.min,o.max,h)}else this.divisionRange=this.dataRange}else i.baseUnit=i.baseUnit||er,this.dataRange=this.divisionRange=new Br(i);this.rangeLabels=[]},e.prototype.tickIndices=function(e){var n=this.dataRange,i=this.divisionRange,r=i.valuesCount();if(!this.options.maxDivisions||!r)return t.prototype.tickIndices.call(this,e);var o=[],s=i.values(),a=0;this.options.justified||(s=s.concat(i.dateAt(r)),a=.5);for(var l=0;l<s.length;l++)if(o.push(n.dateIndex(s[l])+a),1!==e&&l>=1){var c=o.length-1;o.splice(l,0,o[c-1]+(o[c]-o[c-1])*e)}return o},e.prototype.shouldRenderNote=function(t){var e=this.range(),n=this.options.categories||[];return wr(t,e.min)>=0&&wr(t,e.max)<=0&&n.length},e.prototype.parseNoteValue=function(t){return Er(this.chartService.intl,t)},e.prototype.noteSlot=function(t){return this.getSlot(t)},e.prototype.translateRange=function(t){var e=this.options,n=e.baseUnit,i=e.weekStartDay,r=e.vertical,o=this.lineBox(),s=r?o.height():o.width(),a=this.range(),l=s/(a.max-a.min),c=Qt(t/l,b);if(a.min&&a.max){var h=fr(e.min||a.min,c),u=fr(e.max||a.max,c);a={min:yr(h,0,n,i),max:yr(u,0,n,i)}}return a},e.prototype.labelsRange=function(){return{min:this.options.labels.skip,max:this.divisionRange.valuesCount()}},e.prototype.pan=function(t){if(this.isEmpty())return null;var e=this.options,n=this.lineBox(),i=e.vertical?n.height():n.width(),r=this.dataRange.displayRange(),o=r.min,s=r.max,a=this.dataRange.total(),l=Qt(t/(i/(s-o)),b)*(e.reverse?-1:1),c=fr(o,l),h=fr(s,l),u=this.limitRange(_r(c),_r(h),_r(a.min),_r(a.max),l);return u?(u.min=gr(u.min),u.max=gr(u.max),u.baseUnit=e.baseUnit,u.baseUnitStep=e.baseUnitStep||1,u.userSetBaseUnit=e.userSetBaseUnit,u.userSetBaseUnitStep=e.userSetBaseUnitStep,u):void 0},e.prototype.pointsRange=function(e,n){if(this.isEmpty())return null;var i=t.prototype.pointsRange.call(this,e,n),r=this.dataRange.displayRange(),o=this.dataRange.displayIndices(),s=xr(r.max,r.min)/(o.max-o.min),a=this.options;return{min:fr(r.min,i.min*s),max:fr(r.min,i.max*s),baseUnit:a.userSetBaseUnit||a.baseUnit,baseUnitStep:a.userSetBaseUnitStep||a.baseUnitStep}},e.prototype.scaleRange=function(t,e){if(this.isEmpty())return{};var n=this.options,i=n.userSetBaseUnit===Lr,r=this.dataRange.total(),o=this.dataRange.displayRange(),s=o.min,a=o.max,l=Math.abs(this.pointOffset(e)),c=a-s,h=this.scaleToDelta(t,c),u=Math.round(l*h),d=Math.round((1-l)*h),p=this.dataRange.options.baseUnit,f=new Date(s.getTime()+u),g=new Date(a.getTime()-d);if(i){var m,y,v=n.autoBaseUnitSteps,b=n.maxDateGroups,w=Gt(v[p])*b*dr[p],x=xr(a,s),_=xr(g,f),S=Rr.indexOf(p);if(_<dr[p]&&p!==Ji)p=Rr[S-1],f=fr(s,y=(x-(b-1)*(m=Gt(v[p]))*dr[p])/2),g=fr(a,-y);else if(_>w&&p!==rr){var C=0;do{S++,p=Rr[S],C=0,y=2*dr[p];do{m=v[p][C],C++}while(C<v[p].length&&y*m<x)}while(p!==rr&&y*m<x);(y=(y*m-x)/2)>0&&(f=fr(s,-y),g=fr(a,y),f=fr(f,Yt(g,r.min,r.max)-g),g=fr(g,Yt(f,r.min,r.max)-f))}}return f&&g&&xr(g,f)>0?{min:f,max:g,baseUnit:n.userSetBaseUnit||n.baseUnit,baseUnitStep:n.userSetBaseUnitStep||n.baseUnitStep}:void 0},e.prototype.zoomRange=function(t,e){var n=this.dataRange.total(),i=this.scaleRange(t,e);return i&&(i.min<n.min&&(i.min=n.min),i.max>n.max&&(i.max=n.max)),i},e.prototype.range=function(){return this.dataRange.displayRange()},e.prototype.createLabels=function(){t.prototype.createLabels.call(this),this.createRangeLabels()},e.prototype.clearLabels=function(){t.prototype.clearLabels.call(this),this.rangeLabels=[]},e.prototype.arrangeLabels=function(){this.arrangeRangeLabels(),t.prototype.arrangeLabels.call(this)},e.prototype.arrangeRangeLabels=function(){var t=this.options,e=this.rangeLabels;if(0!==e.length){var n=this.lineBox(),i=t.vertical,r=t.rangeLabels.mirror||t.labels.mirror,o=e[0];if(o){var s=i?n.y1-o.box.height()/2:n.x1;this.positionLabel(o,r,s)}var a=e[1];if(a){var l=i?n.y2-a.box.height()/2:n.x2;this.positionLabel(a,r,l)}}},e.prototype.autoRotateLabels=function(){t.prototype.autoRotateLabels.call(this),this.autoRotateRangeLabels()},e.prototype.hideOutOfRangeLabels=function(){t.prototype.hideOutOfRangeLabels.call(this),this.hideOverlappingLabels()},e.prototype.hideOverlappingLabels=function(){var t=this.rangeLabels,e=this.labels;if(0!==t.length){var n=t[0];if(n&&n.options.visible)for(var i=0;i<e.length;i++){if(!s(n,e[i]))break}var r=t[1];if(r&&r.options.visible)for(var o=e.length-1;o>0;--o){if(!s(r,e[o]))break}}function s(t,e){return!(e.options.visible&&!e.box.overlaps(t.box))&&(e.options.visible=!1,!0)}},e.prototype.contentBox=function(){for(var e=t.prototype.contentBox.call(this),n=this.rangeLabels,i=0;i<n.length;i++){var r=n[i];r.options.visible&&e.wrap(r.box)}return e},e.prototype.createAxisLabel=function(t,e,n){void 0===n&&(n={});var i=this.options,r=i.dataItems&&!i.maxDivisions?i.dataItems[t]:null,o=this.divisionRange.dateAt(t),s=e.dateFormats[this.divisionRange.options.baseUnit];e.format=e.format||s,n.dataItem=r;var a=this.axisLabelText(o,e,n);if(a)return new Mi(o,a,t,r,e)},e.prototype.createRangeLabels=function(){var t=this,e=this.divisionRange,n=e.displayStart,i=e.displayEnd,r=this.options,o=Object.assign({},r.labels,r.rangeLabels,{align:p,zIndex:r.zIndex});if(!0===o.visible){this.normalizeLabelRotation(o),o.alignRotation=p,"auto"===o.rotation&&(o.rotation=0,r.autoRotateRangeLabels=!0);var s=o.dateFormats[this.divisionRange.options.baseUnit];o.format=o.format||s;var a=function(e,n,i){if(i){var r=new Mi(n,i,e,null,o);t.append(r),t.rangeLabels.push(r)}};a(0,n,this.axisLabelText(n,o,{index:0,count:2})),a(1,i,this.axisLabelText(i,o,{index:1,count:2}))}},e.prototype.autoRotateRangeLabels=function(){var t=this,e=this.rangeLabels;if(this.options.autoRotateRangeLabels&&!this.options.vertical&&2===e.length){var n=function(e,n,i){var r=2*Math.abs(n[i+1]-n[i]),o=t.autoRotateLabelAngle(e.box,r);0!==o&&(e.options.rotation=o,e.reflow(new Tn))},i=this.getMajorTickPositions();n(e[0],i,0),n(e[1],i,i.length-2)}},e.prototype.categoryIndex=function(t){return this.dataRange.valueIndex(t)},e.prototype.slot=function(t,e,n){var i=this.dataRange,r=t,o=e;r instanceof Date&&(r=i.dateIndex(r)),o instanceof Date&&(o=i.dateIndex(o));var s=this.getSlot(r,o,n);if(s)return s.toRect()},e.prototype.getSlot=function(e,n,i){var r=e,o=n;return typeof r===M&&(r=this.categoryIndex(r)),typeof o===M&&(o=this.categoryIndex(o)),t.prototype.getSlot.call(this,r,o,i)},e.prototype.valueRange=function(){var t=Nr(this.options.srcCategories);return{min:gr(t.min),max:gr(t.max)}},e.prototype.categoryAt=function(t,e){return this.dataRange.dateAt(t,e)},e.prototype.categoriesCount=function(){return this.dataRange.valuesCount()},e.prototype.rangeIndices=function(){return this.dataRange.displayIndices()},e.prototype.labelsBetweenTicks=function(){return!this.divisionRange.options.justified},e.prototype.prepareUserOptions=function(){this.isEmpty()||(this.options.categories=this.dataRange.values())},e.prototype.getCategory=function(t){var e=this.pointCategoryIndex(t);return null===e?null:this.dataRange.dateAt(e)},e.prototype.totalIndex=function(t){return this.dataRange.totalIndex(t)},e.prototype.currentRangeIndices=function(){var t=this.dataRange.valueRange();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalRange=function(){return this.dataRange.total()},e.prototype.totalRangeIndices=function(){var t=this.dataRange.total();return{min:this.dataRange.totalIndex(t.min),max:this.dataRange.totalIndex(t.max)}},e.prototype.totalCount=function(){return this.dataRange.totalCount()},e.prototype.isEmpty=function(){return!this.options.srcCategories.length},e.prototype.roundedRange=function(){if(!1!==this.options.roundToBaseUnit||this.isEmpty())return this.range();var t=this.options,e=Nr(t.srcCategories);return new jr(e.min,e.max,Object.assign({},t,{justified:!1,roundToBaseUnit:!0,justifyEnd:!1})).displayRange()},e}(Ir);re(Hr,{type:y,labels:{dateFormats:Fr},rangeLabels:{visible:!1},autoBaseUnitSteps:{milliseconds:[1,10,100],seconds:[1,2,5,15,30],minutes:[1,2,5,15,30],hours:[1,2,3],days:[1,2,3],weeks:[1,2],months:[1,2,3,6],years:[1,2,3,5,10,25,50]},maxDateGroups:10});const Ur=Hr;function Vr(t,e){return Qt(Math.floor(t/e)*e,b)}function Wr(t,e){return Qt(Math.ceil(t/e)*e,b)}function qr(t){return Math.max(Math.min(t,Dr),-3e5)}var Kr=Math.pow(10,1-b),Xr=function(t){function e(e,n,i,r){t.call(this,Object.assign({},i,{seriesMin:e,seriesMax:n}),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=function(t,e,n){var i=n.narrowRange,r=function(t,e,n){if(!t&&!e)return 0;var i;if(t>=0&&e>=0){var r=t===e?0:t;if(!1===n||!n&&(e-r)/e>Pr)return 0;i=Math.max(0,r-(e-r)/2)}else i=t;return i}(t,e,i),o=function(t,e,n){if(!t&&!e)return 1;var i;if(t<=0&&e<=0){var r=t===e?0:e,o=Math.abs((r-t)/r);if(!1===n||!n&&o>Pr)return 0;i=Math.min(0,r-(t-r)/2)}else i=e;return i}(t,e,i),s=Sn(r,o),a={majorUnit:s};!1!==n.roundToMajorUnit&&(r<0&&Gr(r,s,1/3)&&(r-=s),o>0&&Gr(o,s,1/3)&&(o+=s));return a.min=Vr(r,s),a.max=Wr(o,s),a}(t.seriesMin,t.seriesMax,t);return this.totalOptions=function(t,e){return{min:Ht(e.min)?Math.min(t.min,e.min):t.min,max:Ht(e.max)?Math.max(t.max,e.max):t.max,majorUnit:t.majorUnit}}(e,t),function(t,e){var n,i,r=e;if(e){!function(t,e){for(var n=0;n<e.length;n++){var i=e[n];null===t[i]&&(t[i]=void 0)}}(e,["min","max"]),n=Ht(e.min),i=Ht(e.max);var o=n||i;o&&e.min===e.max&&(e.min>0?e.min=0:e.max=1),e.majorUnit?(t.min=Vr(t.min,e.majorUnit),t.max=Wr(t.max,e.majorUnit)):o&&(r=st(t,e),t.majorUnit=Sn(r.min,r.max))}t.minorUnit=(r.majorUnit||t.majorUnit)/5;var s=st(t,r);s.min>=s.max&&(n&&!i?s.max=s.min+s.majorUnit:!n&&i&&(s.min=s.max-s.majorUnit));return s}(e,t)},e.prototype.initFields=function(){this.totalMin=this.totalOptions.min,this.totalMax=this.totalOptions.max,this.totalMajorUnit=this.totalOptions.majorUnit,this.seriesMin=this.options.seriesMin,this.seriesMax=this.options.seriesMax},e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return 0},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){if(0===t)return 1;var e=this.options,n=e.max-e.min;return Math.floor(Qt(n/t,g))+1},e.prototype.getTickPositions=function(t,e){var n=this.options,i=this.lineInfo(),r=i.axisDir,o=i.axisOrigin,s=i.lineBox,a=t*(i.lineSize/(n.max-n.min)),l=this.getDivisions(t),c=[],h=s[o],u=0;e&&(u=e/t);for(var d=0;d<l;d++)d%u!=0&&c.push(Qt(h,g)),h+=a*r;return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,n){void 0===n&&(n=!1);var i=this.options,r=this.lineInfo(),o=r.axis,s=r.axisDir,a=r.lineBox,l=r.lineSize,c=r.lineStart,h=s*(l/(i.max-i.min)),u=ee(t,e||0),d=ee(e,t||0);n&&(u=Yt(u,i.min,i.max),d=Yt(d,i.min,i.max));var p=Math.min(u,d)-i.min,f=Math.max(u,d)-i.min,g=new Tn(a.x1,a.y1,a.x1,a.y1);return g[o+1]=qr(c+h*(s>0?p:f)),g[o+2]=qr(c+h*(s>0?f:p)),g},e.prototype.getValue=function(t){var e=this.options,n=Number(e.max),i=Number(e.min),r=this.pointOffset(t);return r<0||r>1?null:Qt(i+r*(n-i),b)},e.prototype.translateRange=function(t){var e=this.options,n=e.vertical,i=e.reverse,r=e.max,o=e.min,s=this.lineInfo().lineSize,a=Qt(t/(s/(r-o)),b);return!n&&!i||n&&i||(a=-a),{min:o+a,max:r+a,offset:a}},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,n){var i=this.options,r=Qt(i.min+t*i.majorUnit,b),o=this.axisLabelText(r,e,n);return new Mi(r,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var n=this.getValue(t),i=this.getValue(e),r=Math.min(n,i),o=Math.max(n,i);if(this.isValidRange(r,o))return{min:r,max:o}},e.prototype.scaleRange=function(t,e){var n=Math.abs(this.pointOffset(e)),i=this.options.max-this.options.min,r=this.scaleToDelta(t,i),o=n*r,s=(1-n)*r,a=Qt(this.options.min+o,b),l=Qt(this.options.max-s,b);return l-a<Kr&&(l=a+Kr),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var n=this.totalMin,i=this.totalMax,r=this.scaleRange(t,e);return{min:Yt(r.min,n,i),max:Yt(r.max,n,i),narrowRange:!1}},e.prototype.isValidRange=function(t,e){return e-t>Kr},e}(Yi);function Gr(t,e,n){var i=Qt(Math.abs(t%e),b);return 0===i||i>e*(1-n)}re(Xr,{type:"numeric",min:0,max:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:u},labels:{format:"#.####################"},zIndex:1});const Yr=Xr;var Jr=function(t){function e(e,n,i,r){var o=gr(e),s=gr(n),a=r.intl,l=i||{};l=function(t,e,n){var i=n.min||t,r=n.max||e,o=n.baseUnit||(r&&i?function(t){var e=tr;t>=ur?e=rr:t>=hr?e=ir:t>=cr?e=nr:t>=lr&&(e=er);return e}(pr(r,i)):tr),s=dr[o],a=n.weekStartDay||0,l=vr(_r(i)-1,o,a)||gr(r),c=br(_r(r)+1,o,a),h=n.majorUnit?n.majorUnit:void 0,u=h||Wr(Sn(l.getTime(),c.getTime()),s)/s,d=Ar(l,c,o),p=Wr(d,u)-d,f=Math.floor(p/2),g=p-f;n.baseUnit||delete n.baseUnit;return n.baseUnit=n.baseUnit||o,n.min=n.min||yr(l,-f,o,a),n.max=n.max||yr(c,g,o,a),n.minorUnit=n.minorUnit||u/5,n.majorUnit=u,n}(o,s,l=st(l||{},{min:Er(a,l.min),max:Er(a,l.max),axisCrossingValue:Tr(a,l.axisCrossingValues||l.axisCrossingValue),weekStartDay:Mr(l,a)})),t.call(this,l,r),this.intlService=a,this.seriesMin=o,this.seriesMax=s;var c=l.weekStartDay||0;this.totalMin=_r(vr(_r(o)-1,l.baseUnit,c)),this.totalMax=_r(br(_r(s)+1,l.baseUnit,c))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.getDivisions=function(t){var e=this.options;return Math.floor(Ar(e.min,e.max,e.baseUnit)/t+1)},e.prototype.getTickPositions=function(t){for(var e=this.options,n=this.lineInfo(),i=n.axisDir,r=n.lineSize,o=n.lineStart,s=this.getDivisions(t),a=r/xr(e.max,e.min),l=e.weekStartDay||0,c=[o],h=1;h<s;h++){var u=o+xr(yr(e.min,h*t,e.baseUnit,l),e.min)*a*i;c.push(Qt(u,g))}return c},e.prototype.getMajorTickPositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.getMinorTickPositions=function(){return this.getTickPositions(this.options.minorUnit)},e.prototype.getSlot=function(t,e,n){return Yr.prototype.getSlot.call(this,Er(this.intlService,t),Er(this.intlService,e),n)},e.prototype.getValue=function(t){var e=Yr.prototype.getValue.call(this,t);return null!==e?gr(e):null},e.prototype.labelsCount=function(){return this.getDivisions(this.options.majorUnit)},e.prototype.createAxisLabel=function(t,e,n){var i=this.options,r=t*i.majorUnit,o=i.weekStartDay||0,s=i.min;r>0&&(s=yr(s,r,i.baseUnit,o));var a=e.dateFormats[i.baseUnit];e.format=e.format||a;var l=this.axisLabelText(s,e,n);return new Mi(s,l,t,null,e)},e.prototype.translateRange=function(t){var e=this.options,n=this.lineBox(),i=e.vertical,r=e.reverse,o=i?n.height():n.width(),s=this.range(),a=o/xr(s.max,s.min),l=Qt(t/a,b);return!i&&!r||i&&r||(l=-l),{min:fr(e.min,l),max:fr(e.max,l),offset:l}},e.prototype.shouldRenderNote=function(t){var e=this.range();return wr(t,e.min)>=0&&wr(t,e.max)<=0},e.prototype.pan=function(t){var e=this.translateRange(t,!0),n=this.limitRange(_r(e.min),_r(e.max),this.totalMin,this.totalMax,e.offset);if(n)return{min:gr(n.min),max:gr(n.max)}},e.prototype.pointsRange=function(t,e){var n=this.getValue(t),i=this.getValue(e),r=Math.min(n,i),o=Math.max(n,i);return{min:gr(r),max:gr(o)}},e.prototype.scaleRange=function(t,e){var n=Math.abs(this.pointOffset(e)),i=this.options.max-this.options.min,r=this.scaleToDelta(t,i),o=n*r,s=(1-n)*r,a=gr(_r(this.options.min)+o),l=gr(_r(this.options.max)-s);return l-a<1e3&&(l=gr(_r(a)+1e3)),{min:a,max:l}},e.prototype.zoomRange=function(t,e){var n=this.scaleRange(t,e);return{min:gr(Yt(_r(n.min),this.totalMin,this.totalMax)),max:gr(Yt(_r(n.max),this.totalMin,this.totalMax))}},e}(Yi);re(Jr,{type:y,majorGridLines:{visible:!0,width:1,color:u},labels:{dateFormats:Fr}});const Zr=Jr;var Qr=1e-6,to=function(t){function e(e,n,i,r){var o=st({majorUnit:10,min:e,max:n},i),s=o.majorUnit,a=function(t,e){var n,i=Qt(no(t,e),b)%1;n=t<=0?e:0!==i&&(i<.3||i>.9)?Math.pow(e,no(t,e)+.2):Math.pow(e,Math.ceil(no(t,e)));return n}(n,s),l=function(t,e,n){var i=n.majorUnit,r=t;t<=0?r=e<=1?Math.pow(i,-2):1:n.narrowRange||(r=Math.pow(i,Math.floor(no(t,i))));return r}(e,n,o),c=function(t,e,n,i){var r=n.min,o=n.max;Ht(n.axisCrossingValue)&&n.axisCrossingValue<=0&&eo();Ht(i.max)?i.max<=0&&eo():o=e;Ht(i.min)?i.min<=0&&eo():r=t;return{min:r,max:o}}(l,a,o,i);o.max=c.max,o.min=c.min,o.minorUnit=i.minorUnit||Qt(s-1,b),t.call(this,o,r),this.totalMin=Ht(i.min)?Math.min(l,i.min):l,this.totalMax=Ht(i.max)?Math.max(a,i.max):a,this.logMin=Qt(no(c.min,s),b),this.logMax=Qt(no(c.max,s),b),this.seriesMin=e,this.seriesMax=n,this.createLabels()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.seriesMin,this.seriesMax,Object.assign({},this.options),this.chartService)},e.prototype.startValue=function(){return this.options.min},e.prototype.getSlot=function(t,e,n){var i=this,r=i.options,o=i.logMin,s=i.logMax,a=r.majorUnit,l=r.min,c=r.max,h=this.lineInfo(),u=h.axis,d=h.axisDir,p=h.lineBox,f=h.lineSize,g=h.lineStart,m=d*(f/(s-o)),y=ee(t,e||1),v=ee(e,t||1);if(y<=0||v<=0)return null;n&&(y=Yt(y,l,c),v=Yt(v,l,c)),y=no(y,a),v=no(v,a);var b=Math.min(y,v)-o,w=Math.max(y,v)-o,x=new Tn(p.x1,p.y1,p.x1,p.y1);return x[u+1]=qr(g+m*(d>0?b:w)),x[u+2]=qr(g+m*(d>0?w:b)),x},e.prototype.getValue=function(t){var e=this,n=e.options,i=e.logMin,r=e.logMax,o=n.majorUnit,s=this.lineInfo(),a=s.axis,l=s.axisDir,c=s.lineStart,h=s.lineSize,u=(r-i)/h,d=l*(t[a]-c);if(d<0||d>h)return null;var p=i+d*u;return Qt(Math.pow(o,p),b)},e.prototype.range=function(){var t=this.options;return{min:t.min,max:t.max}},e.prototype.translateRange=function(t){var e=this,n=e.options,i=e.logMin,r=e.logMax,o=n.reverse,s=n.vertical,a=n.majorUnit,l=this.lineBox(),c=s?l.height():l.width(),h=Qt(t/(c/(r-i)),b);return!s&&!o||s&&o||(h=-h),{min:Math.pow(a,i+h),max:Math.pow(a,r+h),offset:h}},e.prototype.labelsCount=function(){var t=Math.floor(this.logMax);return Math.floor(t-this.logMin)+1},e.prototype.getMajorTickPositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),{step:1,skip:0}),t},e.prototype.createTicks=function(t){var e=this.options,n=e.majorTicks,i=e.minorTicks,r=e.vertical,o=e.labels.mirror,s=this.lineBox(),a={vertical:r};function l(e,n){a.tickX=o?s.x2:s.x2-n.size,a.tickY=o?s.y1-n.size:s.y1,a.position=e,t.append(Ki(a,n))}return n.visible&&this.traverseMajorTicksPositions(l,n),i.visible&&this.traverseMinorTicksPositions(l,i),[]},e.prototype.createGridLines=function(t){var e=this.options,n=e.minorGridLines,i=e.majorGridLines,r=e.vertical,o=t.lineBox(),s={lineStart:o[r?"x1":"y1"],lineEnd:o[r?"x2":"y2"],vertical:r},a=[],l=this.gridLinesVisual();function c(t,e){kt(t,a)||(s.position=t,l.append(Xi(s,e)),a.push(t))}return i.visible&&this.traverseMajorTicksPositions(c,i),n.visible&&this.traverseMinorTicksPositions(c,n),l.children},e.prototype.traverseMajorTicksPositions=function(t,e){for(var n=this.lineInfo(),i=n.lineStart,r=n.step,o=this.logMin,s=this.logMax,a=Math.ceil(o)+e.skip;a<=s;a+=e.step){t(Qt(i+r*(a-o),b),e)}},e.prototype.traverseMinorTicksPositions=function(t,e){for(var n=this.options,i=n.min,r=n.max,o=n.minorUnit,s=n.majorUnit,a=this.lineInfo(),l=a.lineStart,c=a.step,h=this.logMin,u=this.logMax,d=Math.floor(h);d<u;d++)for(var p=this._minorIntervalOptions(d),f=e.skip;f<o;f+=e.step){var g=p.value+f*p.minorStep;if(g>r)break;if(g>=i)t(Qt(l+c*(no(g,s)-h),b),e)}},e.prototype.createAxisLabel=function(t,e,n){var i=Math.ceil(this.logMin+t),r=Math.pow(this.options.majorUnit,i),o=this.axisLabelText(r,e,n);return new Mi(r,o,t,null,e)},e.prototype.shouldRenderNote=function(t){var e=this.range();return e.min<=t&&t<=e.max},e.prototype.pan=function(t){var e=this.translateRange(t);return this.limitRange(e.min,e.max,this.totalMin,this.totalMax,e.offset)},e.prototype.pointsRange=function(t,e){var n=this.getValue(t),i=this.getValue(e);return{min:Math.min(n,i),max:Math.max(n,i)}},e.prototype.scaleRange=function(t,e){var n=this.options.majorUnit,i=no(this.options.min,n),r=no(this.options.max,n),o=Math.abs(this.pointOffset(e)),s=r-i,a=this.scaleToDelta(t,s),l=Math.pow(n,i+o*a),c=Math.pow(n,r-(1-o)*a);return c-l<Qr&&(c=l+Qr),{min:l,max:c}},e.prototype.zoomRange=function(t,e){var n=this.scaleRange(t,e),i=this.totalMin,r=this.totalMax;return{min:Yt(n.min,i,r),max:Yt(n.max,i,r)}},e.prototype._minorIntervalOptions=function(t){var e=this.options,n=e.minorUnit,i=e.majorUnit,r=Math.pow(i,t);return{value:r,minorStep:(Math.pow(i,t+1)-r)/n}},e.prototype.lineInfo=function(){var e=t.prototype.lineInfo.call(this);return e.step=e.axisDir*(e.lineSize/(this.logMax-this.logMin)),e},e}(Yi);function eo(){throw new Error("Non positive values cannot be used for a logarithmic axis")}function no(t,e){return Math.log(t)/Math.log(e)}re(to,{type:"log",majorUnit:10,minorUnit:1,axisCrossingValue:1,vertical:!0,majorGridLines:{visible:!0,width:1,color:u},zIndex:1,_deferLabels:!0});const io=to;const ro={createGridLines:function(t){var e,n,i=this.options,r=Math.abs(this.box.center().y-t.lineBox().y1),o=[],s=!1;return i.majorGridLines.visible&&(e=this.majorGridLineAngles(t),s=!0,o=this.renderMajorGridLines(e,r,i.majorGridLines)),i.minorGridLines.visible&&(n=this.minorGridLineAngles(t,s),zt(o,this.renderMinorGridLines(n,r,i.minorGridLines,t,s))),o},renderMajorGridLines:function(t,e,n){return this.renderGridLines(t,e,n)},renderMinorGridLines:function(t,e,n,i,r){var o=this.radiusCallback&&this.radiusCallback(e,i,r);return this.renderGridLines(t,e,n,o)},renderGridLines:function(t,e,n,i){for(var r={stroke:{width:n.width,color:n.color,dashType:n.dashType}},o=this.box.center(),s=new zn.A([o.x,o.y],e),a=this.gridLinesVisual(),l=0;l<t.length;l++){var c=new Ln.w(r);i&&(s.radius=i(t[l])),c.moveTo(s.center).lineTo(s.pointAt(t[l]+180)),a.append(c)}return a.children},gridLineAngles:function(t,e,n,i,r){var o=this,s=this.intervals(e,n,i,r),a=t.options,l=a.visible&&!1!==(a.line||{}).visible;return Dt(s,(function(t){var e=o.intervalAngle(t);if(!l||90!==e)return e}))}};var oo=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.range=function(){return{min:0,max:this.options.categories.length}},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.lineBox=function(){return this.box},e.prototype.reflowLabels=function(){for(var t=this.labels,e=this.options.labels,n=e.skip||0,i=e.step||1,r=new Tn,o=0;o<t.length;o++){t[o].reflow(r);var s=t[o].box;t[o].reflow(this.getSlot(n+o*i).adjacentBox(0,s.width(),s.height()))}},e.prototype.intervals=function(t,e,n,i){void 0===i&&(i=!1);for(var r=this.options,o=r.categories.length/t||1,s=360/o,a=n||1,l=[],c=0,h=e||0;h<o;h+=a)c=r.reverse?360-h*s:h*s,c=Qt(c,g)%360,i&&kt(c,i)||l.push(c);return l},e.prototype.majorIntervals=function(){return this.intervals(1)},e.prototype.minorIntervals=function(){return this.intervals(.5)},e.prototype.intervalAngle=function(t){return(360+t+this.options.startAngle)%360},e.prototype.majorAngles=function(){var t=this;return Dt(this.majorIntervals(),(function(e){return t.intervalAngle(e)}))},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,1,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var n=this.options,i=n.minorGridLines,r=n.majorGridLines,o=e?this.intervals(1,r.skip,r.step):null;return this.gridLineAngles(t,.5,i.skip,i.step,o)},e.prototype.radiusCallback=function(t,e,n){if(e.options.type!==o){var i=Zt(360/(2*this.options.categories.length)),r=Math.cos(i)*t,s=this.majorAngles(),a=function(e){return!n&&kt(e,s)?t:r};return a}},e.prototype.createPlotBands=function(){for(var t=this.options.plotBands||[],e=this._plotbandGroup=new Hn.A({zIndex:-1}),n=0;n<t.length;n++){var i=t[n],r=this.plotBandSlot(i),o=this.getSlot(i.from),s=i.from-Math.floor(i.from);r.startAngle+=s*o.angle;var a=Math.ceil(i.to)-i.to;r.angle-=(a+s)*o.angle;var l=Bn.current.createRing(r,{fill:{color:i.color,opacity:i.opacity},stroke:{opacity:i.opacity}});e.append(l)}this.appendVisual(e)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to-1)},e.prototype.getSlot=function(t,e){var n=this.options,i=n.justified,r=this.box,o=this.majorAngles(),s=o.length,a=360/s,l=t;n.reverse&&!i&&(l=(l+1)%s);var c=o[l=Yt(Math.floor(l),0,s-1)];i&&(c-=a/2)<0&&(c+=360);var h=a*(Yt(Math.ceil(e||l),l,s-1)-l+1);return new In(r.center(),0,r.height()/2,c,h)},e.prototype.slot=function(t,e){var n=this.getSlot(t,e),i=n.startAngle+180,r=i+n.angle;return new Rn.A([n.center.x,n.center.y],{startAngle:i,endAngle:r,radiusX:n.radius,radiusY:n.radius})},e.prototype.pointCategoryIndex=function(t){for(var e=this.options.categories.length,n=null,i=0;i<e;i++){if(this.getSlot(i).containsPoint(t)){n=i;break}}return n},e}(Ir);re(oo,{startAngle:90,labels:{margin:dt(10)},majorGridLines:{visible:!0},justified:!0}),st(oo.prototype,ro);const so=oo;var ao=function(t){function e(e,n){t.call(this,e,n);var i=this.options;i.minorUnit=i.minorUnit||i.majorUnit/2}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getDivisions=function(t){return Yr.prototype.getDivisions.call(this,t)-1},e.prototype.reflow=function(t){this.box=t,this.reflowLabels()},e.prototype.reflowLabels=function(){for(var t=this,e=t.options,n=t.labels,i=t.options.labels,r=i.skip||0,o=i.step||1,s=new Tn,a=this.intervals(e.majorUnit,r,o),l=0;l<n.length;l++){n[l].reflow(s);var c=n[l].box;n[l].reflow(this.getSlot(a[l]).adjacentBox(0,c.width(),c.height()))}},e.prototype.lineBox=function(){return this.box},e.prototype.intervals=function(t,e,n,i){void 0===i&&(i=!1);for(var r=this.options.min,o=this.getDivisions(t),s=[],a=n||1,l=e||0;l<o;l+=a){var c=(360+r+l*t)%360;i&&kt(c,i)||s.push(c)}return s},e.prototype.majorIntervals=function(){return this.intervals(this.options.majorUnit)},e.prototype.minorIntervals=function(){return this.intervals(this.options.minorUnit)},e.prototype.intervalAngle=function(t){return(540-t-this.options.startAngle)%360},e.prototype.createLine=function(){return[]},e.prototype.majorGridLineAngles=function(t){var e=this.options.majorGridLines;return this.gridLineAngles(t,this.options.majorUnit,e.skip,e.step)},e.prototype.minorGridLineAngles=function(t,e){var n=this.options,i=n.minorGridLines,r=n.majorGridLines,o=e?this.intervals(n.majorUnit,r.skip,r.step):null;return this.gridLineAngles(t,n.minorUnit,i.skip,i.step,o)},e.prototype.plotBandSlot=function(t){return this.getSlot(t.from,t.to)},e.prototype.getSlot=function(t,e){var n=this.options,i=this.box,r=n.startAngle,o=Yt(t,n.min,n.max),s=Yt(e||o,o,n.max);if(n.reverse&&(o*=-1,s*=-1),(s=(540-s-r)%360)<(o=(540-o-r)%360)){var a=o;o=s,s=a}return new In(i.center(),0,i.height()/2,o,s-o)},e.prototype.slot=function(t,e){void 0===e&&(e=t);var n,i,r=this.options,o=360-r.startAngle,s=this.getSlot(t,e),a=Math.min(t,e),l=Math.max(t,e);return r.reverse?(n=a,i=l):(n=360-l,i=360-a),n=(n+o)%360,i=(i+o)%360,new Rn.A([s.center.x,s.center.y],{startAngle:n,endAngle:i,radiusX:s.radius,radiusY:s.radius})},e.prototype.getValue=function(t){var e=this.options,n=this.box.center(),i=t.x-n.x,r=t.y-n.y,o=Math.round(Ut(Math.atan2(r,i))),s=e.startAngle;return e.reverse||(o*=-1,s*=-1),(o+s+360)%360},e.prototype.valueRange=function(){return{min:0,max:2*Math.PI}},e}(Yi);re(ao,{type:"polar",startAngle:0,reverse:!1,majorUnit:60,min:0,max:360,labels:{margin:dt(10)},majorGridLines:{color:u,visible:!0,width:1},minorGridLines:{color:"#aaa"}}),st(ao.prototype,ro,{createPlotBands:so.prototype.createPlotBands,majorAngles:so.prototype.majorAngles,range:Yr.prototype.range,labelsCount:Yr.prototype.labelsCount,createAxisLabel:Yr.prototype.createAxisLabel});const lo=ao;var co={options:{majorGridLines:{visible:!0}},createPlotBands:function(){var t=this.options,e=t.majorGridLines.type,n=t.plotBands;void 0===n&&(n=[]);for(var i=this.plotArea.polarAxis,r=i.majorAngles(),s=i.box.center(),a=this._plotbandGroup=new Hn.A({zIndex:-1}),l=0;l<n.length;l++){var c=n[l],h={fill:{color:c.color,opacity:c.opacity},stroke:{opacity:c.opacity}},u=this.getSlot(c.from,c.to,!0),d=new In(s,s.y-u.y2,s.y-u.y1,0,360),p=void 0;p=e===o?Bn.current.createRing(d,h):Ln.w.fromPoints(this.plotBandPoints(d,r),h).close(),a.append(p)}this.appendVisual(a)},plotBandPoints:function(t,e){for(var n=[],i=[],r=[t.center.x,t.center.y],o=new zn.A(r,t.innerRadius),s=new zn.A(r,t.radius),a=0;a<e.length;a++)n.push(o.pointAt(e[a]+180)),i.push(s.pointAt(e[a]+180));return n.reverse(),n.push(n[0]),i.push(i[0]),i.concat(n)},createGridLines:function(t){var e=this.options,n=this.radarMajorGridLinePositions(),i=t.majorAngles(),r=t.box.center(),o=[];if(e.majorGridLines.visible&&(o=this.renderGridLines(r,n,i,e.majorGridLines)),e.minorGridLines.visible){var s=this.radarMinorGridLinePositions();zt(o,this.renderGridLines(r,s,i,e.minorGridLines))}return o},renderGridLines:function(t,e,n,i){var r={stroke:{width:i.width,color:i.color,dashType:i.dashType}},s=i.skip;void 0===s&&(s=0);var a=i.step;void 0===a&&(a=0);for(var l=this.gridLinesVisual(),c=s;c<e.length;c+=a){var h=t.y-e[c];if(h>0){var u=new zn.A([t.x,t.y],h);if(i.type===o)l.append(new jn.A(u,r));else{for(var d=new Ln.w(r),p=0;p<n.length;p++)d.lineTo(u.pointAt(n[p]+180));d.close(),l.append(d)}}}return l.children},getValue:function(t){var e=this.lineBox(),n=this.plotArea.polarAxis,i=n.majorAngles(),r=n.box.center(),s=t.distanceTo(r),a=s;if(this.options.majorGridLines.type!==o&&i.length>1){var l=t.x-r.x,c=t.y-r.y,h=(Ut(Math.atan2(c,l))+540)%360;i.sort((function(t,e){return ho(t,h)-ho(e,h)}));var u=90-ho(i[0],i[1])/2,d=180-ho(h,i[0])-u;a=s*(Math.sin(Zt(d))/Math.sin(Zt(u)))}return this.axisType().prototype.getValue.call(this,new Cn(e.x1,e.y2-a))}};function ho(t,e){return 180-Math.abs(Math.abs(t-e)-180)}const uo=co;var po=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){return this.getTickPositions(this.options.majorUnit)},e.prototype.radarMinorGridLinePositions=function(){var t=this.options,e=0;return t.majorGridLines.visible&&(e=t.majorUnit),this.getTickPositions(t.minorUnit,e)},e.prototype.axisType=function(){return t},e}(Yr);st(po.prototype,uo);const fo=po;var go=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radarMajorGridLinePositions=function(){var t=[];return this.traverseMajorTicksPositions((function(e){t.push(e)}),this.options.majorGridLines),t},e.prototype.radarMinorGridLinePositions=function(){var t=[];return this.traverseMinorTicksPositions((function(e){t.push(e)}),this.options.minorGridLines),t},e.prototype.axisType=function(){return t},e}(io);st(go.prototype,uo);const mo=go;var yo=n(281);function vo(t){return t<=0?-1:1}const bo=function(t){function e(e){t.call(this),this.closed=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.process=function(t){var e=t.slice(0),n=[],i=this.closed,r=e.length;if(r>2&&(this.removeDuplicates(0,e),r=e.length),r<2||2===r&&e[0].equals(e[1]))return n;var o,s,a=e[0],l=e[1],c=e[2];for(n.push(new yo.A(a));a.equals(e[r-1]);)i=!0,e.pop(),r--;if(2===r){var h=this.tangent(a,l,j,z);return Gt(n).controlOut(this.firstControlPoint(h,a,l,j,z)),n.push(new yo.A(l,this.secondControlPoint(h,a,l,j,z))),n}if(i){a=e[r-1],l=e[0],c=e[1];var u=this.controlPoints(a,l,c);o=u[1],s=u[0]}else{var d=this.tangent(a,l,j,z);o=this.firstControlPoint(d,a,l,j,z)}for(var p=o,f=0;f<=r-3;f++)if(this.removeDuplicates(f,e),f+3<=(r=e.length)){a=e[f],l=e[f+1],c=e[f+2];var g=this.controlPoints(a,l,c);Gt(n).controlOut(p),p=g[1];var m=g[0];n.push(new yo.A(l,m))}if(i){a=e[r-2],l=e[r-1],c=e[0];var y=this.controlPoints(a,l,c);Gt(n).controlOut(p),n.push(new yo.A(l,y[0])),Gt(n).controlOut(y[1]),n.push(new yo.A(c,s))}else{var v=this.tangent(l,c,j,z);Gt(n).controlOut(p),n.push(new yo.A(c,this.secondControlPoint(v,l,c,j,z)))}return n},e.prototype.removeDuplicates=function(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)},e.prototype.invertAxis=function(t,e,n){var i=!1;if(t.x===e.x)i=!0;else if(e.x===n.x)(e.y<n.y&&t.y<=e.y||n.y<e.y&&e.y<=t.y)&&(i=!0);else{var r=this.lineFunction(t,e),o=this.calculateFunction(r,n.x);t.y<=e.y&&n.y<=o||e.y<=t.y&&n.y>=o||(i=!0)}return i},e.prototype.isLine=function(t,e,n){var i=this.lineFunction(t,e),r=this.calculateFunction(i,n.x);return t.x===e.x&&e.x===n.x||Qt(r,1)===Qt(n.y,1)},e.prototype.lineFunction=function(t,e){var n=(e.y-t.y)/(e.x-t.x);return[t.y-n*t.x,n]},e.prototype.controlPoints=function(t,e,n){var i,r=j,o=z,s=!1,a=!1;if(this.isLine(t,e,n))i=this.tangent(t,e,j,z);else{var l={x:this.isMonotonicByField(t,e,n,j),y:this.isMonotonicByField(t,e,n,z)};if(l.x&&l.y)i=this.tangent(t,n,j,z),s=!0;else if(this.invertAxis(t,e,n)&&(r=z,o=j),l[r])i=0;else i=.01*(n[o]<t[o]&&t[o]<=e[o]||t[o]<n[o]&&e[o]<=t[o]?vo((n[o]-t[o])*(e[r]-t[r])):-vo((n[r]-t[r])*(e[o]-t[o]))),a=!0}var c=this.secondControlPoint(i,t,e,r,o);if(a){var h=r;r=o,o=h}var u=this.firstControlPoint(i,e,n,r,o);return s&&(this.restrictControlPoint(t,e,c,i),this.restrictControlPoint(e,n,u,i)),[c,u]},e.prototype.restrictControlPoint=function(t,e,n,i){t.y<e.y?e.y<n.y?(n.x=t.x+(e.y-t.y)/i,n.y=e.y):n.y<t.y&&(n.x=e.x-(e.y-t.y)/i,n.y=t.y):n.y<e.y?(n.x=t.x-(t.y-e.y)/i,n.y=e.y):t.y<n.y&&(n.x=e.x+(t.y-e.y)/i,n.y=t.y)},e.prototype.tangent=function(t,e,n,i){var r,o=e[n]-t[n],s=e[i]-t[i];return r=0===o?0:s/o,r},e.prototype.isMonotonicByField=function(t,e,n,i){return n[i]>e[i]&&e[i]>t[i]||n[i]<e[i]&&e[i]<t[i]},e.prototype.firstControlPoint=function(t,e,n,i,r){var o=e[i],s=.333*(n[i]-o);return this.point(o+s,e[r]+s*t,i,r)},e.prototype.secondControlPoint=function(t,e,n,i,r){var o=e[i],s=n[i],a=.333*(s-o);return this.point(s-a,n[r]-a*t,i,r)},e.prototype.point=function(t,e,n,i){var r=new Pn.A;return r[n]=t,r[i]=e,r},e.prototype.calculateFunction=function(t,e){for(var n=t.length,i=0,r=0;r<n;r++)i+=Math.pow(e,r)*t[r];return i},e}(Nt.A);var wo=function(t){function e(e){t.call(this),this._axis=e,this.options=e.options}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this._axis,n=e.getCategory?e.getCategory(t):e.getValue(t);return n},e.prototype.slot=function(t,e,n){return void 0===n&&(n=!0),this._axis.slot(t,e,n)},e.prototype.range=function(){return this._axis.range()},e.prototype.valueRange=function(){return this._axis.valueRange()},e}(Nt.A);const xo=wo;function _o(t,e){for(var n=0;n<e.length;n++)if(e[n].options.name===t)return e[n].prepareUserOptions(),new xo(e[n])}var So=function(t){this.visual=t.visual,this.chartsVisual=t.chartContainer.visual,this._pane=t};So.prototype.findAxisByName=function(t){return _o(t,this._pane.axes)};const Co=So;const ko=function(t){function e(e){t.call(this),this._plotArea=e,this.visual=e.visual,this.backgroundVisual=e._bgVisual}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nt.A);function Ao(t){for(var e=t.length,n=0,i=0;i<e;i++){Y(t[i])&&n++}return n}var Eo={min:function(t){for(var e=t.length,n=A,i=0;i<e;i++){var r=t[i];Y(r)&&(n=Math.min(n,r))}return n===A?t[0]:n},max:function(t){for(var e=t.length,n=E,i=0;i<e;i++){var r=t[i];Y(r)&&(n=Math.max(n,r))}return n===E?t[0]:n},sum:function(t){for(var e=t.length,n=0,i=0;i<e;i++){var r=t[i];Y(r)&&(n+=r)}return n},sumOrNull:function(t){var e=null;return Ao(t)&&(e=Eo.sum(t)),e},count:function(t){for(var e=t.length,n=0,i=0;i<e;i++){var r=t[i];null!==r&&Ht(r)&&n++}return n},avg:function(t){var e=Ao(t),n=t[0];return e>0&&(n=Eo.sum(t)/e),n},first:function(t){for(var e=t.length,n=0;n<e;n++){var i=t[n];if(null!==i&&Ht(i))return i}return t[0]}};const To=Eo;function Mo(t,e){return null===e?e:wt(t)(e)}var Oo=function(t){function e(){t.call(this),this._valueFields={},this._otherFields={},this._nullValue={},this._undefinedValue={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e,n){var i=this;void 0===e&&(e=[L]),void 0===n&&(n={});for(var r=0;r<t.length;r++){var o=t[r];i._valueFields[o]=e,i._otherFields[o]=n,i._nullValue[o]=i._makeValue(e,null),i._undefinedValue[o]=i._makeValue(e,void 0)}},e.prototype.canonicalFields=function(t){return this.valueFields(t).concat(this.otherFields(t))},e.prototype.valueFields=function(t){return this._valueFields[t.type]||[L]},e.prototype.otherFields=function(t){return this._otherFields[t.type]||[L]},e.prototype.bindPoint=function(t,e,n){var i,r,o=t.data,s=Ht(n)?n:o[e],a={valueFields:{value:s}},l=this.valueFields(t),c=this._otherFields[t.type];if(null===s)r=this._nullValue[t.type];else if(Ht(s)){if(Array.isArray(s)){var h=s.slice(l.length);r=this._bindFromArray(s,l),i=this._bindFromArray(h,c)}else if("object"==typeof s){var u=this.sourceFields(t,l),d=this.sourceFields(t,c);r=this._bindFromObject(s,l,u),i=this._bindFromObject(s,c,d)}}else r=this._undefinedValue[t.type];return Ht(r)&&(1===l.length?a.valueFields.value=r[l[0]]:a.valueFields=r),a.fields=i||{},a},e.prototype._makeValue=function(t,e){for(var n={},i=t.length,r=0;r<i;r++){n[t[r]]=e}return n},e.prototype._bindFromArray=function(t,e){var n={};if(e)for(var i=Math.min(e.length,t.length),r=0;r<i;r++)n[e[r]]=t[r];return n},e.prototype._bindFromObject=function(t,e,n){void 0===n&&(n=e);var i={};if(e)for(var r=e.length,o=0;o<r;o++){var s=e[o],a=n[o];null!==a&&(i[s]=Mo(a,t))}return i},e.prototype.sourceFields=function(t,e){var n=[];if(e)for(var i=e.length,r=0;r<i;r++){var o=e[r],s=o===L?"field":o+"Field";n.push(null!==t[s]?t[s]||o:null)}return n},e}(Nt.A);Oo.current=new Oo;const Io=Oo;var Do=/percent(?:\w*)\((\d+)\)/,Fo=new RegExp("^stddev(?:\\((\\d+(?:\\.\\d+)?)\\))?$"),Po=function(t){function e(e,n,i){t.call(this),this.initGlobalRanges(e,n,i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initGlobalRanges=function(t,e,n){var i=e.data,r=Fo.exec(t);if(r){this.valueGetter=this.createValueGetter(e,n);var o=this.getAverage(i),s=this.getStandardDeviation(i,o,!1),a=r[1]?parseFloat(r[1]):1,l={low:o.value-s*a,high:o.value+s*a};this.globalRange=function(){return l}}else if(t.indexOf&&t.indexOf("stderr")>=0){this.valueGetter=this.createValueGetter(e,n);var c=this.getStandardError(i,this.getAverage(i));this.globalRange=function(t){return{low:t-c,high:t+c}}}},e.prototype.createValueGetter=function(t,e){var n,i=t.data,r=Io.current,o=r.valueFields(t),s=Ht(i[0])?i[0]:{};if(U(s))n=wt("["+(e?o.indexOf(e):0)+"]");else if(Y(s))n=wt();else if(typeof s===M){n=wt(r.sourceFields(t,o)[o.indexOf(e)])}return n},e.prototype.getErrorRange=function(t,e){var n,i,r;if(!Ht(e))return null;if(this.globalRange)return this.globalRange(t);if(U(e))n=t-e[0],i=t+e[1];else if(Y(r=parseFloat(e)))n=t-r,i=t+r;else{if(!(r=Do.exec(e)))throw new Error("Invalid ErrorBar value: "+e);var o=t*(parseFloat(r[1])/100);n=t-Math.abs(o),i=t+Math.abs(o)}return{low:n,high:i}},e.prototype.getStandardError=function(t,e){return this.getStandardDeviation(t,e,!0)/Math.sqrt(e.count)},e.prototype.getStandardDeviation=function(t,e,n){for(var i=t.length,r=n?e.count-1:e.count,o=0,s=0;s<i;s++){var a=this.valueGetter(t[s]);Y(a)&&(o+=Math.pow(a-e.value,2))}return Math.sqrt(o/r)},e.prototype.getAverage=function(t){for(var e=t.length,n=0,i=0,r=0;r<e;r++){var o=this.valueGetter(t[r]);Y(o)&&(n+=o,i++)}return{value:n/i,count:i}},e}(Nt.A);const Ro=Po;var Lo=Ft.A.browser||{},No=600,Bo="fadeIn",jo=.8,zo=Lo.msie?.001:0,$o="errorLow",Ho="errorHigh",Uo="zero",Vo="interpolate",Wo="above",qo="below",Ko="smooth",Xo="step",Go="area",Yo="bar",Jo="boxPlot",Zo="bubble",Qo="bullet",ts="candlestick",es="column",ns="donut",is="funnel",rs="pyramid",os="heatmap",ss="horizontalWaterfall",as="line",ls="ohlc",cs="pie",hs="polarArea",us="polarLine",ds="polarScatter",ps="radarArea",fs="radarColumn",gs="radarLine",ms="rangeArea",ys="rangeBar",vs="rangeColumn",bs="scatter",ws="scatterLine",xs="verticalArea",_s="verticalBoxPlot",Ss="verticalBullet",Cs="verticalLine",ks="verticalRangeArea",As="waterfall",Es=[Yo,es,ls,ts,Jo,_s,Qo,vs,ys,As,ss],Ts="exponentialTrendline",Ms="linearTrendline",Os="logarithmicTrendline",Is="movingAverageTrendline",Ds="polynomialTrendline",Fs="powerTrendline",Ps=[Ts,Ms,Os,Is,Ds,Fs],Rs="legendItemClick",Ls="seriesClick",Ns="seriesHover",Bs="seriesOver",js="seriesLeave",zs="plotAreaHover",$s="plotAreaLeave",Hs="drag",Us="dragEnd",Vs="dragStart",Ws="zoomStart",qs="zoom",Ks="zoomEnd",Xs="selectStart",Gs="select",Ys="selectEnd",Js="showTooltip",Zs="hideTooltip",Qs="graphics-symbol",ta="k-chart-point",ea="Point",na="log",ia="category",ra="insideEnd",oa="outsideEnd",sa="wheel",aa="drilldown",la=2,ca=function(t){function e(e,n,i,r,o,s){t.call(this,s),this.low=e,this.high=n,this.isVertical=i,this.chart=r,this.series=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,n=this.options.endCaps,i=this.isVertical,r=this.getAxis().getSlot(this.low,this.high),o=t.center(),s=this.getCapsWidth(t,i),a=i?o.x:o.y,l=a-s,c=a+s;i?(e=[new Cn(o.x,r.y1),new Cn(o.x,r.y2)],n&&e.push(new Cn(l,r.y1),new Cn(c,r.y1),new Cn(l,r.y2),new Cn(c,r.y2)),this.box=new Tn(l,r.y1,c,r.y2)):(e=[new Cn(r.x1,o.y),new Cn(r.x2,o.y)],n&&e.push(new Cn(r.x1,l),new Cn(r.x1,c),new Cn(r.x2,l),new Cn(r.x2,c)),this.box=new Tn(r.x1,l,r.x2,c)),this.linePoints=e},e.prototype.getCapsWidth=function(t,e){var n=e?t.width():t.height();return Math.min(Math.floor(n/2),4)||4},e.prototype.createVisual=function(){var t=this,e=this.options,n=e.visual;n?this.visual=n({low:this.low,high:this.high,rect:this.box.toRect(),sender:this.getSender(),options:{endCaps:e.endCaps,color:e.color,line:e.line},createVisual:function(){t.createDefaultVisual();var e=t.visual;return delete t.visual,e}}):this.createDefaultVisual()},e.prototype.createDefaultVisual=function(){var e=this.options,n=this.linePoints,i={stroke:{color:e.color,width:e.line.width,dashType:e.line.dashType}};t.prototype.createVisual.call(this);for(var r=0;r<n.length;r+=2){var o=new Ln.w(i).moveTo(n[r].x,n[r].y).lineTo(n[r+1].x,n[r+1].y);X(o),this.visual.append(o)}},e}(ei);re(ca,{animation:{type:Bo,delay:No},endCaps:!0,line:{width:2},zIndex:1});const ha=ca;var ua=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){return this.chart.seriesValueAxis(this.series)},e}(ha);const da=ua;function pa(t){for(var e=0;e<t.length;e++)if(Ht(t[e].zIndex))return!0}function fa(t,e){null!==e&&t.push(e)}function ga(t){return Ao(t)===t.length}function ma(t,e,n){var i=e.visible;if(Ht(i))return i;var r=t.pointVisibility;return r?r[n]:void 0}function ya(t){for(var e=t.data,n=[],i=0,r=0,o=0;o<e.length;o++){var s=Io.current.bindPoint(t,o),a=s.valueFields.value;J(a)&&(a=parseFloat(a)),Y(a)?(s.visible=!1!==ma(t,s.fields,o),s.value=Math.abs(a),n.push(s),s.visible&&(i+=s.value),0!==a&&r++):n.push(null)}return{total:i,points:n,count:r}}function va(t){for(var e=t.length,n=0,i=0;i<e;i++)n=Math.max(n,t[i].data.length);return n}function ba(t,e){return t&&e?t.toLowerCase()===e.toLowerCase():t===e}var wa=5;function xa(t,e,n,i){void 0===n&&(n={}),void 0===i&&(i=!1);var r=n.defaults=n.defaults||{},o=n.depth=n.depth||0,s=!1;if(n.excluded=n.excluded||[],o>wa)return null;for(var a in t)if(!kt(a,n.excluded)&&De(t,a)){var l=t[a];nt(l)?(s=!0,i||(t[a]=ee(l(e),r[a]))):at(l)&&(i||(n.defaults=r[a]),n.depth++,s=xa(l,e,n,i)||s,n.depth--)}return s}function _a(t,e){for(var n=[],i=[].concat(e),r=0;r<t.length;r++){var o=t[r];kt(o.type,i)&&n.push(o)}return n}var Sa=new WeakMap;function Ca(t,e,n){if(null===e||"object"!=typeof e)return Er(n,t);var i=Sa.get(e);return i||(i=Er(n,t),Sa.set(e,i)),i}function ka(t){var e=t.overlay;return e&&e.gradient&&"none"!==e.gradient}function Aa(t){return Ht(t)&&null!==t}function Ea(t,e){var n=t.type,i=e instanceof Date;return!n&&i||ba(n,y)}function Ta(t){return 1===t.length?t[0]:t}var Ma=/area/i;function Oa(t,e){var n=Io.current.bindPoint(t,null,e).valueFields;for(var i in n)if(Z(n[i]))return!0}function Ia(t){var e,n,i=t.start,r=t.dir,o=t.min,s=t.max,a=t.getter,l=t.hasItem,c=t.series,h=i;do{l(h+=r)&&(e=Oa(c,(n=a(h)).item))}while(o<=h&&h<=s&&!e);if(e)return n}function Da(t,e,n,i,r){var o=e.min,s=e.max,a=o>0&&o<n,l=s+1<n;if(a||l){var c,h,u,d=function(t){return t.missingValues?t.missingValues:Ma.test(t.type)||t.stack?Uo:Vo}(t);if(d!==Vo)a&&(c=i(o-1)),l&&(h=i(s+1));else a&&(c=Oa(t,(u=i(o-1)).item)?u:Ia({start:o,dir:-1,min:0,max:n-1,getter:i,hasItem:r,series:t})),l&&(h=Oa(t,(u=i(s+1)).item)?u:Ia({start:s,dir:1,min:0,max:n-1,getter:i,hasItem:r,series:t}));c&&(t._outOfRangeMinPoint=c),h&&(t._outOfRangeMaxPoint=h)}}var Fa=function(t){function e(e,n){t.call(this,n),this.plotArea=e,this.chartService=e.chartService,this.categoryAxis=e.seriesCategoryAxis(n.series[0]),this.valueAxisRanges={},this.points=[],this.categoryPoints=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.pointOptions=function(t,e){var n=this.seriesOptions[e];if(!n){var i=this.pointType().prototype.defaults;this.seriesOptions[e]=n=st({},i,{vertical:!this.options.invertAxes},t)}return n},e.prototype.plotValue=function(t){if(!t)return 0;if(this.options.isStacked100&&Y(t.value)){for(var e=t.categoryIx,n=this.categoryPoints[e],i=[],r=0,o=0;o<n.length;o++){var s=n[o];if(s){var a=t.series.stack,l=s.series.stack;if(a&&l&&a.group!==l.group)continue;Y(s.value)&&(r+=Math.abs(s.value),i.push(Math.abs(s.value)))}}if(r>0)return t.value/r}return t.value},e.prototype.plotRange=function(t,e){var n=this;void 0===e&&(e=0);var i=this.categoryPoints[t.categoryIx];if(this.options.isStacked){var r=this.plotValue(t),o=r>=0,s=e,a=!1,l=Ht(t.series.stack)?t.series.stack:this.options.defaultStack,c=function(t){return!0===t||typeof t===M&&!t.group};if(l)for(var h=0;h<i.length;h++){var u=i[h];if(t===u)break;var d=Ht(u.series.stack)?u.series.stack:n.options.defaultStack;if(d&&((typeof l!==P||l===d)&&(!c(l)||c(d))&&(!l.group||l.group===d.group))){var p=n.plotValue(u);(p>=0&&o||p<0&&!o)&&(0!==e&&0===p||(s+=p,r+=p,a=!0,n.options.isStacked100&&(r=Math.min(r,1))))}}return a&&(s-=e),[s,r]}var f=t.series,g=this.seriesValueAxis(f),m=this.categoryAxisCrossingValue(g);return[m,Z(t.value)?t.value:m]},e.prototype.stackLimits=function(t,e){for(var n=A,i=E,r=0;r<this.categoryPoints.length;r++){var o=this.categoryPoints[r];if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a&&(a.series.stack===e||a.series.axis===t)){var l=this.plotRange(a,0)[1];Ht(l)&&isFinite(l)&&(i=Math.max(i,l),n=Math.min(n,l))}}}return{min:n,max:i}},e.prototype.updateStackRange=function(){var t=this,e=this.options,n=e.isStacked,i=e.series,r={};if(n)for(var o=0;o<i.length;o++){var s=i[o],a=s.axis,l=a+s.stack,c=r[l];if(!c){c=t.stackLimits(a,s.stack);var h=t.errorTotals;h&&(h.negative.length&&(c.min=Math.min(c.min,de(h.negative).min)),h.positive.length&&(c.max=Math.max(c.max,de(h.positive).max))),c.min!==A||c.max!==E?r[l]=c:c=null}c&&(t.valueAxisRanges[a]=c)}},e.prototype.addErrorBar=function(t,e,n){var i,r=t.value,o=t.series,s=t.seriesIx,a=t.options.errorBars,l=e.fields[$o],c=e.fields[Ho];Y(l)&&Y(c)?i={low:l,high:c}:a&&Ht(a.value)&&(this.seriesErrorRanges=this.seriesErrorRanges||[],this.seriesErrorRanges[s]=this.seriesErrorRanges[s]||new Ro(a.value,o,L),i=this.seriesErrorRanges[s].getErrorRange(r,a.value)),i&&(t.low=i.low,t.high=i.high,this.addPointErrorBar(t,n))},e.prototype.addPointErrorBar=function(t,e){var n=!this.options.invertAxes,i=t.options.errorBars,r=t.series,o=t.low,s=t.high;if(this.options.isStacked){var a=this.stackedErrorRange(t,e);o=a.low,s=a.high}else{var l={categoryIx:e,series:r};this.updateRange({value:o},l),this.updateRange({value:s},l)}var c=new da(o,s,n,this,r,i);t.errorBars=[c],t.append(c)},e.prototype.stackedErrorRange=function(t,e){var n=this.plotRange(t,0)[1]-t.value,i=t.low+n,r=t.high+n;return this.errorTotals=this.errorTotals||{positive:[],negative:[]},i<0&&(this.errorTotals.negative[e]=Math.min(this.errorTotals.negative[e]||0,i)),r>0&&(this.errorTotals.positive[e]=Math.max(this.errorTotals.positive[e]||0,r)),{low:i,high:r}},e.prototype.addValue=function(t,e){var n=e.categoryIx,i=e.series,r=e.seriesIx,o=this.categoryPoints[n];o||(this.categoryPoints[n]=o=[]);var s=this.seriesPoints[r];s||(this.seriesPoints[r]=s=[]);var a=this.createPoint(t,e);a&&(Object.assign(a,e),a.owner=this,a.noteText=t.fields.noteText,Ht(a.dataItem)||(a.dataItem=i.data[n]),this.addErrorBar(a,t,n)),this.points.push(a),s.push(a),o.push(a),this.updateRange(t.valueFields,e)},e.prototype.evalPointOptions=function(t,e,n){var i=n.categoryIx,r=n.category,o=n.series,s=n.seriesIx,a={defaults:o._defaults,excluded:["data","aggregate","_events","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]},l=this._evalSeries[s];Ht(l)||(this._evalSeries[s]=l=xa(t,{},a,!0));var c=t;return l&&xa(c=st({},c),{value:e,category:r,index:i,series:o,dataItem:o.data[i]},a),c},e.prototype.updateRange=function(t,e){var n=e.series.axis,i=t.value,r=this.valueAxisRanges[n];isFinite(i)&&null!==i&&((r=this.valueAxisRanges[n]=r||{min:A,max:E}).min=Math.min(r.min,i),r.max=Math.max(r.max,i))},e.prototype.seriesValueAxis=function(t){var e=this.plotArea,n=t.axis,i=n?e.namedValueAxes[n]:e.valueAxis;if(!i)throw new Error("Unable to locate value axis with name "+n);return i},e.prototype.reflow=function(t){var e=this,n=this.categorySlots=[],i=this.points,r=this.categoryAxis,o=0;this.traverseDataPoints((function(t,s){var a=s.categoryIx,l=s.series,c=e.seriesValueAxis(l),h=i[o++],u=n[a];if(u||(n[a]=u=e.categorySlot(r,a,c)),h){var d=e.plotRange(h,c.startValue()),p=e.valueSlot(c,d);if(p){var f=e.pointSlot(u,p);h.aboveAxis=e.aboveAxis(h,c),h.stackValue=d[1],e.options.isStacked100&&(h.percentage=e.plotValue(h)),e.reflowPoint(h,f)}else h.visible=!1}})),this.reflowCategories(n),!this.options.clip&&this.options.limitPoints&&this.points.length&&this.limitPoints(),this.box=t},e.prototype.valueSlot=function(t,e){return t.getSlot(e[0],e[1],!this.options.clip)},e.prototype.limitPoints=function(){for(var t=this.categoryPoints,e=t[0].concat(Gt(t)),n=0;n<e.length;n++)e[n]&&this.limitPoint(e[n])},e.prototype.limitPoint=function(t){var e=this.categoryAxis.limitSlot(t.box);e.equals(t.box)||t.reflow(e)},e.prototype.aboveAxis=function(t,e){var n=this.categoryAxisCrossingValue(e),i=t.value;return e.options.reverse?i<n:i>=n},e.prototype.categoryAxisCrossingValue=function(t){var e=this.categoryAxis,n=t.options;return[].concat(n.axisCrossingValues||n.axisCrossingValue)[e.axisIndex||0]||0},e.prototype.reflowPoint=function(t,e){t.reflow(e)},e.prototype.reflowCategories=function(){},e.prototype.pointSlot=function(t,e){var n=this.options.invertAxes,i=n?e:t,r=n?t:e;return new Tn(i.x1,r.y1,i.x2,r.y2)},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.traverseDataPoints=function(t){for(var e=this,n=this.options.series,i=va(n),r=n.length,o=0;o<r;o++)e._outOfRangeCallback(n[o],"_outOfRangeMinPoint",o,t);for(var s=0;s<i;s++)for(var a=0;a<r;a++){var l=n[a],c=e.categoryAxis.categoryAt(s);t(e.plotArea.bindPoint(l,s),{category:c,categoryIx:s,categoriesCount:i,series:l,seriesIx:a})}for(var h=0;h<r;h++)e._outOfRangeCallback(n[h],"_outOfRangeMaxPoint",h,t)},e.prototype._outOfRangeCallback=function(t,e,n,i){var r=t[e];if(r){var o=r.categoryIx;i(this.plotArea.bindPoint(t,o,r.item),{category:r.category,categoryIx:o,series:t,seriesIx:n,dataItem:r.item})}},e.prototype.formatPointValue=function(t,e){return null===t.value?"":this.chartService.format.auto(e,t.value)},e.prototype.pointValue=function(t){return t.valueFields.value},e}(ei);re(Fa,{series:[],invertAxes:!1,isStacked:!1,clip:!0,limitPoints:!0});const Pa=Fa;var Ra={click:function(t,e){return t.trigger(Ls,this.eventArgs(e))},hover:function(t,e){return t.trigger(Ns,this.eventArgs(e))},over:function(t,e){return t.trigger(Bs,this.eventArgs(e))},out:function(t,e){return t.trigger(js,this.eventArgs(e))},eventArgs:function(t){return{value:this.value,percentage:this.percentage,stackValue:this.stackValue,category:this.category,series:this.series,dataItem:this.dataItem,runningTotal:this.runningTotal,total:this.total,element:Kt(t),originalEvent:t,point:this}}};const La=Ra;const Na={createNote:function(){var t=this.options.notes,e=this.noteText||t.label.text;!1!==t.visible&&Ht(e)&&null!==e&&(this.note=new Ii({value:this.value,text:e,dataItem:this.dataItem,category:this.category,series:this.series},this.options.notes,this.owner.chartService),this.append(this.note))}};var Ba=function(t){function e(e,n){t.call(this),this.value=e,this.options=n,this.aboveAxis=ee(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Be()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options.markers;this._rendered||(this._rendered=!0,t.visible&&t.size&&(this.marker=this.createMarker(),this.append(this.marker)),this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},e.prototype.createLabelElement=function(t){return new Ci(this.getLabelText(t),st({align:p,vAlign:p,margin:{left:5,right:5},zIndex:ee(t.zIndex,this.series.zIndex)},t),this.pointData())},e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value},e.prototype.getAriaLabelText=function(){var t=this.options.labels,e=yt(t);return e?e(this.pointData()):this.getLabelText(t)},e.prototype.markerBorder=function(){var t=this.options.markers,e=t.background,n=st({color:this.color},t.border);return Ht(n.color)||(n.color=new xe(e).brightness(jo).toHex()),n},e.prototype.createVisual=function(){},e.prototype.createMarker=function(){var t=this.options.markers;return new si({type:t.type,width:t.size,height:t.size,rotation:t.rotation,background:t.background,border:this.markerBorder(),opacity:t.opacity,zIndex:ee(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual,accessibilityOptions:st({ariaLabel:this.getAriaLabelText(this.options.labels)},this.options.accessibility)},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category})},e.prototype.markerBox=function(){return this.marker||(this.marker=this.createMarker(),this.marker.reflow(this._childBox)),this.marker.box},e.prototype.reflow=function(t){var e=this.options,n=this.aboveAxis,i=e.vertical;this.render(),this.box=t;var r=t.clone();if(i?n?r.y1-=r.height():r.y2+=r.height():n?r.x1+=r.width():r.x2-=r.width(),this._childBox=r,this.marker&&this.marker.reflow(r),this.reflowLabel(r),this.errorBars)for(var o=0;o<this.errorBars.length;o++)this.errorBars[o].reflow(r);if(this.note){var s=this.markerBox();if(!e.markers.visible||!e.markers.size){var a=s.center();s=new Tn(a.x,a.y,a.x,a.y)}this.note.reflow(s)}},e.prototype.reflowLabel=function(t){var e=this.options,n=this.label,i=e.labels.position;n&&(i=(i=i===Wo?R:i)===qo?d:i,n.reflow(t),n.box.alignTo(this.markerBox(),i),n.reflow(n.box))},e.prototype.createHighlight=function(){var t=this.options.highlight.markers,e=this.markerBorder().color,n=this.options.markers,i=n.size+(n.border.width||0)+(t.border.width||0),r=new si({type:n.type,width:i,height:i,rotation:n.rotation,background:t.color||e,border:{color:t.border.color,width:t.border.width,opacity:ee(t.border.opacity,1)},opacity:ee(t.opacity,1)});return r.reflow(this._childBox),r.getElement()},e.prototype.highlightVisual=function(){return(this.marker||{}).visual},e.prototype.highlightVisualArgs=function(){var t,e,n=this.marker;if(n)e=n.paddingBox.toRect(),t=n.visual;else{var i=this.options.markers.size,r=i/2,o=this.box.center();e=new kn.A([o.x-r,o.y-r],[i,i])}return{options:this.options,rect:e,visual:t}},e.prototype.createFocusHighlight=function(){var t=this.options.markers,e=this.options.accessibility.highlight,n=t.size+(t.border.width||0),i=new si({type:t.type,width:n,height:n,rotation:t.rotation,background:e.color,border:e.border,opacity:e.opacity,padding:e.border.width/2,zIndex:e.zIndex});return i.reflow(this._childBox),i.getElement()},e.prototype.tooltipAnchor=function(){var t=this.markerBox(),e=this.owner.pane.clipBox();if(!e||e.overlaps(t)){var n,i,r=t.x2+5,o=k;return this.aboveAxis?(n=t.y1,i=d):(n=t.y2,i=R),{point:new Cn(r,n),align:{horizontal:o,vertical:i}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.markerBox().overlaps(t)},e.prototype.unclipElements=function(){this.label&&(this.label.options.noclip=!0),this.note&&(this.note.options.noclip=!0)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,series:this.series}},e.prototype.focusVisual=function(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",this._id),this.toggleFocusHighlight(!0))},e.prototype.clearFocusFromVisual=function(){this.marker&&(this.marker.visual&&this.marker.visual.options.set("id",""),this.toggleFocusHighlight(!1))},e.prototype.getIndex=function(){return Ht(this.categoryIx)?this.categoryIx:this.pointIx},e}(ei);Ba.prototype.defaults={vertical:!0,markers:{visible:!0,background:N,size:8,type:f,border:{width:2},opacity:1},labels:{visible:!1,position:Wo,margin:dt(3),padding:dt(4),animation:{type:Bo,delay:No}},notes:{label:{}},highlight:{markers:{border:{color:"#fff",width:2}},zIndex:100},errorBars:{line:{width:1}},accessibility:{tabIndex:0,role:Qs,className:ta,ariaRoleDescription:ea}},st(Ba.prototype,La),st(Ba.prototype,Na);const ja=Ba;var za=function(t){function e(e,n,i){t.call(this),this.linePoints=e,this.series=n,this.seriesIx=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.toGeometryPoints(this.linePoints)},e.prototype.toGeometryPoints=function(t){for(var e=[],n=0,i=t.length;n<i;n++)t[n]&&!1!==t[n].visible&&e.push(t[n]._childBox.toRect().center());return e},e.prototype.createVisual=function(){var t=this,e=this.series.visual;e?(this.visual=e({points:this.toGeometryPoints(this.linePoints),series:this.series,sender:this.getSender(),createVisual:function(){return t.segmentVisual(),t.visual}}),this.visual&&!Ht(this.visual.options.zIndex)&&(this.visual.options.zIndex=this.series.zIndex)):this.segmentVisual()},e.prototype.segmentVisual=function(){var t=this.options,e=this.series,n=e.color,i=e._defaults;nt(n)&&i&&(n=i.color);var r=Ln.w.fromPoints(this.points(),{stroke:{color:n,width:e.width,opacity:e.opacity,dashType:e.dashType},zIndex:e.zIndex});t.closed&&r.close(),this.visual=r},e.prototype.aliasFor=function(t,e){return this.parent.getNearestPoint(e.x,e.y,this.seriesIx)},e}(ei);re(za,{closed:!1});const $a=za;var Ha={calculateStepPoints:function(t){for(var e=this.parent.plotArea.seriesCategoryAxis(this.series).options,n=e.justified,i=e.vertical,r=e.reverse,o=i?j:z,s=i?z:j,a=r?2:1,l=a,c=Ua(t[0],o,a,s,l),h=[c],u=1;u<t.length;u++){var d=Ua(t[u],o,a,s,l);if(c[o]!==d[o]){var p=new Pn.A;p[o]=c[o],p[s]=d[s],h.push(p,d)}c=d}return n?c!==Gt(h)&&h.push(c):h.push(Ua(Gt(t),o,a,s,r?1:2)),h}};function Ua(t,e,n,i,r){var o=t.box,s=new Pn.A;return s[e]=o[e+n],s[i]=o[i+r],s}const Va=Ha;var Wa=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.points=function(){return this.calculateStepPoints(this.linePoints)},e}($a);st(Wa.prototype,Va);const qa=Wa;var Ka=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.segmentVisual=function(){var t=this.series,e=t._defaults,n=t.color;nt(n)&&e&&(n=e.color);var i=new bo(this.options.closed).process(this.points()),r=new Ln.w({stroke:{color:n,width:t.width,opacity:t.opacity,dashType:t.dashType},zIndex:t.zIndex});r.segments.push.apply(r.segments,i),this.visual=r},e}($a);const Xa=Ka;var Ga={renderSegments:function(){var t,e=this,n=this.options,i=this.seriesPoints,r=n.series,o=i.length;this._segments=[];for(var s=0;s<o;s++){for(var a=r[s],l=e.sortPoints(i[s]),c=l.length,h=[],u=0;u<c;u++){var d=l[u];d?h.push(d):e.seriesMissingValues(a)!==Vo&&(h.length>1&&(t=e.createSegment(h,a,s,t),e._addSegment(t)),h=[])}h.length>1&&(t=e.createSegment(h,a,s,t),e._addSegment(t))}this.children.unshift.apply(this.children,this._segments)},_addSegment:function(t){this._segments.push(t),t.parent=this},sortPoints:function(t){return t},seriesMissingValues:function(t){var e=t.missingValues;return!e&&this.options.isStacked?Uo:e||Vo},getNearestPoint:function(t,e,n){for(var i,r=new Cn(t,e),o=this.seriesPoints[n],s=A,a=0;a<o.length;a++){var l=o[a];if(l&&Ht(l.value)&&null!==l.value&&!1!==l.visible){var c=l.box.center().distanceTo(r);c<s&&(i=l,s=c)}}return i}};const Ya=Ga;var Ja=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._setEnd(this.options.box.x1)},e.prototype.step=function(t){var e=this.options.box;this._setEnd(Et(e.x1,e.x2,t))},e.prototype._setEnd=function(t){var e=this.element,n=e.segments,i=n[1].anchor(),r=n[2].anchor();e.suspend(),i.setX(t),e.resume(),r.setX(t)},e}(Qn);re(Ja,{duration:No}),Jn.current.register("clip",Ja);const Za=Ja;const Qa={createAnimation:function(){var t=this.getRoot();if(t&&!1!==(t.options||{}).transitions){var e=t.size(),n=Ln.w.fromRect(e.toRect());this.visual.clip(n),this.animation=new Za(n,{box:e}),pa(this.options.series)&&this._setChildrenAnimation(n)}},_setChildrenAnimation:function(t){for(var e=this.animationPoints(),n=0;n<e.length;n++){var i=e[n];i&&i.visual&&Ht(i.visual.options.zIndex)&&i.visual.clip(t)}}};var tl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange(),this.renderSegments()},e.prototype.pointType=function(){return ja},e.prototype.createPoint=function(t,e){var n=e.series,i=e.seriesIx,r=this.seriesMissingValues(n),o=t.valueFields.value;if(!Ht(o)||null===o){if(r!==Uo)return null;o=0}var s=this.pointOptions(n,i);s=this.evalPointOptions(s,o,e);var a=t.fields.color||n.color;nt(n.color)&&(a=s.color);var l=new ja(o,s);return l.color=a,this.append(l),l},e.prototype.plotRange=function(t){var e=this.plotValue(t);if(this.options.isStacked)for(var n=t.categoryIx,i=this.categoryPoints[n],r=0;r<i.length;r++){var o=i[r];if(t===o)break;e+=this.plotValue(o),this.options.isStacked100&&(e=Math.min(e,1))}return[e,e]},e.prototype.createSegment=function(t,e,n){var i=e.style;return new(i===Xo?qa:i===Ko?Xa:$a)(t,e,n)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],n=0;n<t.length;n++)e.push((t[n]||{}).marker);return e.concat(this._segments)},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Pa);st(tl.prototype,Ya,Qa);const el=tl;var nl=function(t){function e(e,n,i,r,o){t.call(this,e,n,i),this.prevSegment=r,this.stackPoints=o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){var t=this.series,e=t._defaults,n=t.line||{},i=t.color;nt(i)&&e&&(i=e.color),this.visual=new Hn.A({zIndex:t.zIndex}),this.createFill({fill:{color:i,opacity:t.opacity},stroke:null}),n.width>0&&!1!==n.visible&&this.createStroke({stroke:st({color:i,opacity:t.opacity,lineCap:"butt"},n)})},e.prototype.strokeSegments=function(){var t=this._strokeSegments;return t||(t=this._strokeSegments=this.createStrokeSegments()),t},e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.points())},e.prototype.stackSegments=function(){return this.prevSegment?this.prevSegment.createStackSegments(this.stackPoints):this.createStackSegments(this.stackPoints)},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.toGeometryPoints(t)).reverse()},e.prototype.segmentsFromPoints=function(t){return t.map((function(t){return new yo.A(t)}))},e.prototype.createStroke=function(t){var e=new Ln.w(t);e.segments.push.apply(e.segments,this.strokeSegments()),this.visual.append(e)},e.prototype.hasStackSegment=function(){return this.prevSegment||this.stackPoints&&this.stackPoints.length},e.prototype.createFill=function(t){var e=this.strokeSegments(),n=e.slice(0),i=this.hasStackSegment();if(i){var r=this.stackSegments();zt(n,r)}var o=new Ln.w(t);o.segments.push.apply(o.segments,n),!i&&e.length>1&&this.fillToAxes(o),this.visual.append(o)},e.prototype.fillToAxes=function(t){var e=this.parent,n=e.options.invertAxes,i=e.seriesValueAxis(this.series),r=e.categoryAxisCrossingValue(i),o=i.getSlot(r,r,!0),s=this.strokeSegments(),a=s[0].anchor(),l=Gt(s).anchor(),c=n?o.x1:o.y1;n?t.lineTo(c,l.y).lineTo(c,a.y):t.lineTo(l.x,c).lineTo(a.x,c)},e}($a);const il=nl;var rl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints))},e.prototype.createStackSegments=function(t){return this.segmentsFromPoints(this.calculateStepPoints(t)).reverse()},e}(il);st(rl.prototype,Va);const ol=rl;var sl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){var t=new bo(this.options.closed),e=this.points();return t.process(e)},e.prototype.createStackSegments=function(){for(var t=this.strokeSegments(),e=[],n=t.length-1;n>=0;n--){var i=t[n];e.push(new yo.A(i.anchor(),i.controlOut(),i.controlIn()))}return e},e}(il);const al=sl;var ll=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,n,i){var r,o,s=this.options.isStacked,a=(e.line||{}).style;s&&n>0&&i&&("gap"!==this.seriesMissingValues(e)?(o=i.linePoints,r=i):o=this._gapStackPoints(t,n,a));return new(a===Xo?ol:a===Ko?al:il)(t,e,n,r,o)},e.prototype.reflow=function(e){t.prototype.reflow.call(this,e);var n=this._stackPoints;if(n)for(var i=0;i<n.length;i++){var r=n[i],o=this.categoryAxis.getSlot(r.categoryIx);r.reflow(o)}},e.prototype._gapStackPoints=function(t,e,n){var i=this,r=this.seriesPoints,o=t[0].categoryIx,s=t.length;o<0&&(o=0,s--);var a=o+s,l=this.seriesOptions[0]._outOfRangeMinPoint?1:0,c=[];this._stackPoints=this._stackPoints||[];for(var h=o;h<a;h++){var u=h+l,d=e,p=void 0;do{p=r[--d][u]}while(d>0&&!p);if(p)n!==Xo&&h>o&&!r[d][u-1]&&c.push(i._previousSegmentPoint(h,u,u-1,d)),c.push(p),n!==Xo&&h+1<a&&!r[d][u+1]&&c.push(i._previousSegmentPoint(h,u,u+1,d));else{var f=i._createGapStackPoint(h);i._stackPoints.push(f),c.push(f)}}return c},e.prototype._previousSegmentPoint=function(t,e,n,i){for(var r,o=this.seriesPoints,s=i;s>0&&!r;)r=o[--s][n];return r?r=o[s][e]:(r=this._createGapStackPoint(t),this._stackPoints.push(r)),r},e.prototype._createGapStackPoint=function(t){var e=this.pointOptions({},0),n=new ja(0,e);return n.categoryIx=t,n.series={},n},e.prototype.seriesMissingValues=function(t){return t.missingValues||Uo},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(el);const cl=ll;var hl=function(t){function e(){t.call(this),this.axisRanges={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){var e=this.axisRanges;for(var n in t){var i=t[n],r=e[n];e[n]=r=r||{min:A,max:E},r.min=Math.min(r.min,i.min),r.max=Math.max(r.max,i.max)}},e.prototype.reset=function(t){this.axisRanges[t]=void 0},e.prototype.query=function(t){return this.axisRanges[t]},e}(Nt.A);const ul=hl;var dl=function(t){function e(e,n,i){t.call(this,n),this.textBox=new Ci(e,this.options,i),this.append(this.textBox)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.textBox.options.noclip=this.options.noclip},e.prototype.reflow=function(t){var e=this.options,n=e.vertical,i=e.aboveAxis,r=this.children[0],o=r.options,s=r.box,a=r.options.padding,l=t;o.align=n?p:k,o.vAlign=n?R:p,e.position===ra?n?(o.vAlign=R,!i&&s.height()<t.height()&&(o.vAlign=d)):o.align=i?I:k:e.position===p?(o.vAlign=p,o.align=p):"insideBase"===e.position?n?o.vAlign=i?d:R:o.align=i?k:I:e.position===oa&&(n?l=i?new Tn(t.x1,t.y1-s.height(),t.x2,t.y1):new Tn(t.x1,t.y2,t.x2,t.y2+s.height()):(o.align=p,l=i?new Tn(t.x2,t.y1,t.x2+s.width(),t.y2):new Tn(t.x1-s.width(),t.y1,t.x1,t.y2))),e.rotation||(n?a.left=a.right=(l.width()-r.contentBox.width())/2:a.top=a.bottom=(l.height()-r.contentBox.height())/2),r.reflow(l)},e.prototype.alignToClipBox=function(t){var e=this.options.vertical?z:j,n=e+"1",i=e+"2",r=this.children[0],o=this.parent.box;if(o[n]<t[n]||t[i]<o[i]){var s=r.paddingBox.clone();s[n]=Math.max(o[n],t[n]),s[i]=Math.min(o[i],t[i]),this.reflow(s)}},e}(ei);re(dl,{position:oa,margin:dt(3),padding:dt(4),color:u,background:"",border:{width:1,color:""},aboveAxis:!0,vertical:!1,animation:{type:Bo,delay:No},zIndex:2});const pl=dl;const fl={addAccessibilityAttributesToVisual:function(){this._id=this._id||Be();var t=st({ariaLabel:this.getAriaLabelText()},this.options.accessibility);ri(this.visual,t)},getAriaLabelText:function(){var t=this.options.labels,e=yt(t);return e?e(this.pointData()):this.getLabelText(t)},focusVisual:function(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0)},clearFocusFromVisual:function(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1)}};var gl=function(t){function e(e,n){t.call(this),this.options=n,this.color=n.color||N,this.aboveAxis=ee(this.options.aboveAxis,!0),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createLabel(),this.createNote(),this.errorBar&&this.append(this.errorBar))},e.prototype.createLabel=function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},e.prototype.createLabelElement=function(t){return new pl(this.getLabelText(t),st({vertical:this.options.vertical},t),this.pointData())},e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):this.formatValue(t.format)},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;if(this.box=t,e&&(e.options.aboveAxis=this.aboveAxis,e.reflow(t)),this.note&&this.note.reflow(t),this.errorBars)for(var n=0;n<this.errorBars.length;n++)this.errorBars[n].reflow(t)},e.prototype.createVisual=function(){var e=this,n=this.box,i=this.options,r=i.visual;if(!1!==this.visible)if(t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual(),r){var o=this.rectVisual=r({category:this.category,dataItem:this.dataItem,value:this.value,sender:this.getSender(),series:this.series,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,rect:n.toRect(),createVisual:function(){var t=new Hn.A;return e.createRect(t),t},options:i});o&&this.visual.append(o)}else n.width()>0&&n.height()>0&&this.createRect(this.visual)},e.prototype.createRect=function(t){var e=this.options,n=e.border,i=Ht(n.opacity)?n.opacity:e.opacity,r=this.box.toRect();r.size.width=Math.round(r.size.width);var o=this.rectVisual=Ln.w.fromRect(r,{fill:{color:this.color,opacity:e.opacity},stroke:{color:this.getBorderColor(),width:n.width,opacity:i,dashType:n.dashType}}),s=this.box.width(),a=this.box.height();if((e.vertical?s:a)>6&&(X(o),(s<1||a<1)&&(o.options.stroke.lineJoin="round")),t.append(o),ka(e)){var l=this.createGradientOverlay(o,{baseColor:this.color},st({end:e.vertical?void 0:[0,1]},e.overlay));t.append(l)}},e.prototype.createHighlight=function(t){return X(Ln.w.fromRect(this.box.toRect(),t))},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.createFocusHighlight=function(t){var e=this.options.accessibility.highlight.border.width;return X(Ln.w.fromRect(this.box.pad(e/2).toRect(),t))},e.prototype.getBorderColor=function(){var t=this.color,e=this.options.border,n=e._brightness||jo,i=e.color;return Ht(i)||(i=new xe(t).brightness(n).toHex()),i},e.prototype.tooltipAnchor=function(){var t,e,n=this,i=n.options,r=n.box,o=n.aboveAxis,s=this.owner.pane.clipBox()||r,a=k,l=R;if(i.vertical)t=Math.min(r.x2,s.x2)+5,o?e=Math.max(r.y1,s.y1):(e=Math.min(r.y2,s.y2),l=d);else{var c=Math.max(r.x1,s.x1),h=Math.min(r.x2,s.x2);i.isStacked?(l=d,o?(a=I,t=h):t=c,e=Math.max(r.y1,s.y1)-5):(o?t=h+5:(t=c-5,a=I),e=Math.max(r.y1,s.y1))}return{point:new Cn(t,e),align:{horizontal:a,vertical:l}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,percentage:this.percentage,stackValue:this.stackValue,runningTotal:this.runningTotal,total:this.total,series:this.series}},e.prototype.getIndex=function(){return this.categoryIx},e}(ei);st(gl.prototype,La),st(gl.prototype,Na),st(gl.prototype,fl),gl.prototype.defaults={border:{width:1},vertical:!0,overlay:{gradient:"glass"},labels:{visible:!1,format:"{0}"},opacity:1,notes:{label:{}},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}};const ml=gl;function yl(t,e){t.forEach(e)}function vl(t,e){for(var n=t.length,i=n-1;i>=0;i--)e(t[i],i-n-1)}var bl=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?vl:yl}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,n=e.vertical,i=e.gap,r=e.spacing,o=this.children,s=o.length,a=n?z:j,l=s+i+r*(s-1),c=(n?t.height():t.width())/l,h=t[a+1]+c*(i/2);this.forEach(o,(function(e,n){var i=(e.box||t).clone();i[a+1]=h,i[a+2]=h+c,e.reflow(i),n<s-1&&(h+=c*r),h+=c}))},e}(ei);re(bl,{vertical:!1,gap:0,spacing:0});const wl=bl;var xl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){for(var e=this.options.vertical?j:z,n=this.children,i=n.length,r=this.box=new Tn,o=0;o<i;o++){var s=n[o];if(!1!==s.visible){var a=s.box.clone();a.snapTo(t,e),0===o&&(r=this.box=a.clone()),s.reflow(a),r.wrap(a)}}},e}(ei);re(xl,{vertical:!0});const _l=xl;var Sl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.updateStackRange()},e.prototype.pointType=function(){return ml},e.prototype.clusterType=function(){return wl},e.prototype.stackType=function(){return _l},e.prototype.stackLimits=function(e,n){return t.prototype.stackLimits.call(this,e,n)},e.prototype.createPoint=function(t,e){var n=e.categoryIx,i=e.series,r=e.seriesIx,o=this.options,s=this.children,a=Ht(i.stack)?i.stack:o.defaultStack,l=this.pointValue(t),c=this.pointOptions(i,r),h=c.labels;a&&h.position===oa&&(h.position=ra),c.isStacked=a;var u=t.fields.color||i.color;l<0&&c.negativeColor&&(u=c.negativeColor),c=this.evalPointOptions(c,l,e),nt(i.color)&&(u=c.color);var d=new(this.pointType())(l,c);d.color=u;var p=s[n];p||(p=new(this.clusterType())({vertical:o.invertAxes,gap:o.gap,spacing:o.spacing,rtl:!o.invertAxes&&(this.chartService||{}).rtl}),this.append(p));o.isStacked?this.getStackWrap(a,p).append(d):p.append(d);return d},e.prototype.getStackWrap=function(t,e){var n,i=typeof t===M?t.group||!0:t,r=e.children;if(typeof i===P||!0===i)for(var o=0;o<r.length;o++)if(r[o]._stackGroup===i){n=r[o];break}n||((n=new(this.stackType())({vertical:!this.options.invertAxes}))._stackGroup=i,e.append(n));return n},e.prototype.categorySlot=function(t,e,n){var i=this.options,r=t.getSlot(e),o=n.startValue();if(i.isStacked){var s=n.getSlot(o,o,!0),a=i.invertAxes?j:z;r[a+1]=r[a+2]=s[a+1]}return r},e.prototype.reflowCategories=function(t){for(var e=this.children,n=e.length,i=0;i<n;i++)e[i].reflow(t[i])},e.prototype.createAnimation=function(){this._setAnimationOptions(),t.prototype.createAnimation.call(this),pa(this.options.series)&&this._setChildrenAnimation()},e.prototype._setChildrenAnimation=function(){for(var t=this.points,e=0;e<t.length;e++){var n=t[e],i=n.visual;i&&Ht(i.options.zIndex)&&(n.options.animation=this.options.animation,n.createAnimation())}},e.prototype._setAnimationOptions=function(){var t,e=this.options,n=e.animation||{};if(e.isStacked){var i=this.seriesValueAxis(e.series[0]);t=i.getSlot(i.startValue())}else t=this.categoryAxis.getSlot(0);n.origin=new Pn.A(t.x1,t.y1),n.vertical=!e.invertAxes},e}(Pa);re(Sl,{animation:{type:Yo}});const Cl=Sl;var kl=function(t){function e(e,n){t.call(this,n),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLabelText=function(t){return this.formatValue(t.format)},e.prototype.reflow=function(t){var e=this,n=e.options,i=e.value,r=e.owner.seriesValueAxis(n),o=r.getSlot(i.open,i.close),s=r.getSlot(i.low,i.high);o.x1=s.x1=t.x1,o.x2=s.x2=t.x2,this.realBody=o;var a=s.center().x,l=[];l.push([[a,s.y1],[a,o.y1]]),l.push([[a,o.y2],[a,s.y2]]),this.lines=l,this.box=s.clone().wrap(o),this._rendered||(this._rendered=!0,this.createNote()),this.reflowNote()},e.prototype.reflowNote=function(){this.note&&this.note.reflow(this.box)},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual(),this._mainVisual=this.mainVisual(this.options),this.visual.append(this._mainVisual),this.createOverlay()},e.prototype.mainVisual=function(t){var e=new Hn.A;return this.createBody(e,t),this.createLines(e,t),e},e.prototype.createBody=function(t,e){var n=Ln.w.fromRect(this.realBody.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&n.options.set("stroke",{color:this.getBorderColor(),width:e.border.width,dashType:e.border.dashType,opacity:ee(e.border.opacity,e.opacity)}),X(n),t.append(n),ka(e)&&t.append(this.createGradientOverlay(n,{baseColor:this.color},st({end:e.vertical?void 0:[0,1]},e.overlay)))},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.lines,e.line)},e.prototype.drawLines=function(t,e,n,i){if(n)for(var r={stroke:{color:i.color||this.color,opacity:ee(i.opacity,e.opacity),width:i.width,dashType:i.dashType,lineCap:"butt"}},o=0;o<n.length;o++){var s=Ln.w.fromPoints(n[o],r);X(s),t.append(s)}},e.prototype.getBorderColor=function(){var t=this.options.border,e=t.color;return Ht(e)||(e=new xe(this.color).brightness(t._brightness).toHex()),e},e.prototype.createOverlay=function(){var t=Ln.w.fromRect(this.box.toRect(),{fill:{color:N,opacity:0},stroke:null});this.visual.append(t)},e.prototype.createHighlight=function(){var t=this.options.highlight,e=this.color;this.color=t.color||this.color;var n=this.mainVisual(st({},this.options,{line:{color:this.getBorderColor()}},t));return this.color=e,n},e.prototype.highlightVisual=function(){return this._mainVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this._mainVisual}},e.prototype.tooltipAnchor=function(){var t=this.box,e=this.owner.pane.clipBox()||t;return{point:new Cn(t.x2+5,Math.max(t.y1,e.y1)+5),align:{horizontal:k,vertical:R}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,value:this.value,meanPoints:this.meanPoints,medianPoints:this.medianPoints,whiskerPoints:this.whiskerPoints,stackValue:this.stackValue,series:this.series}},e.prototype.getIndex=function(){return this.categoryIx},e}(ei);kl.prototype.createFocusHighlight=ml.prototype.createFocusHighlight,re(kl,{vertical:!0,border:{_brightness:.8},line:{width:2},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{4:d}</th></tr><tr><td>Open:</td><td>{0:C}</td></tr><tr><td>High:</td><td>{1:C}</td></tr><tr><td>Low:</td><td>{2:C}</td></tr><tr><td>Close:</td><td>{3:C}</td></tr></table>"},labels:{format:""},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}}),st(kl.prototype,La),st(kl.prototype,Na),st(kl.prototype,fl);const Al=kl;var El=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,n=e.length,i=0;i<n;i++)e[i].reflow(t[i])},e.prototype.addValue=function(t,e){var n,i=e.categoryIx,r=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=ga(this.splitValue(c)),u=o.data[i],d=this.categoryPoints[i];d||(this.categoryPoints[i]=d=[]),h&&(n=this.createPoint(t,e));var p=a[i];p||(p=new wl({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),n&&(this.updateRange(c,e),p.append(n),n.categoryIx=i,n.category=r,n.series=o,n.seriesIx=s,n.owner=this,n.dataItem=u,n.noteText=t.fields.noteText),this.points.push(n),d.push(n)},e.prototype.pointType=function(){return Al},e.prototype.createPoint=function(t,e){var n=e.series,i=this.pointType(),r=t.valueFields,o=st({},n),s=t.fields.color||n.color;o=this.evalPointOptions(o,r,e),n.type!==ts&&n.type!==ls||r.open>r.close&&(s=t.fields.downColor||n.downColor||n.color),nt(n.color)&&(s=o.color),o.vertical=!this.options.invertAxes;var a=new i(r,o);return a.color=s,a},e.prototype.splitValue=function(t){return[t.low,t.open,t.close,t.high]},e.prototype.updateRange=function(t,e){var n=e.series.axis,i=this.splitValue(t),r=this.valueAxisRanges[n]||{min:A,max:E};this.valueAxisRanges[n]={min:Math.min.apply(Math,i.concat([r.min])),max:Math.max.apply(Math,i.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.open,n.high,n.low,n.close,t.category)},e.prototype.animationPoints=function(){return this.points},e}(Pa);st(El.prototype,Qa);const Tl=El;var Ml=function(t){function e(e,n){t.call(this,e,n),this.createNote()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e,n,i=this,r=i.options,o=i.value,s=i.owner.seriesValueAxis(r);this.boxSlot=n=s.getSlot(o.q1,o.q3),this.realBody=n,this.reflowBoxSlot(t),this.whiskerSlot=e=s.getSlot(o.lower,o.upper),this.reflowWhiskerSlot(t);var a=s.getSlot(o.median);if(o.mean){var l=s.getSlot(o.mean);this.meanPoints=this.calcMeanPoints(t,l)}this.whiskerPoints=this.calcWhiskerPoints(n,e),this.medianPoints=this.calcMedianPoints(t,a),this.box=e.clone().wrap(n),this.reflowNote()},e.prototype.reflowBoxSlot=function(t){this.boxSlot.x1=t.x1,this.boxSlot.x2=t.x2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.x1=t.x1,this.whiskerSlot.x2=t.x2},e.prototype.calcMeanPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.calcWhiskerPoints=function(t,e){var n=e.center().x;return[[[n-5,e.y1],[n+5,e.y1],[n,e.y1],[n,t.y1]],[[n-5,e.y2],[n+5,e.y2],[n,e.y2],[n,t.y2]]]},e.prototype.calcMedianPoints=function(t,e){return[[[t.x1,e.y1],[t.x2,e.y1]]]},e.prototype.renderOutliers=function(t){for(var e=this.value,n=e.outliers||[],i=3*Math.abs(e.q3-e.q1),r=[],o=t.markers||{},s=0;s<n.length;s++){var a=n[s],l=st({},(o=a<e.q3+i&&a>e.q1-i?t.outliers:t.extremes).border);Ht(l.color)||(Ht(this.color)?l.color=this.color:l.color=new xe(o.background).brightness(jo).toHex());var c=new si({type:o.type,width:o.size,height:o.size,rotation:o.rotation,background:o.background,border:l,opacity:o.opacity});c.value=a,r.push(c)}return this.reflowOutliers(r),r},e.prototype.reflowOutliers=function(t){for(var e=this,n=this.owner.seriesValueAxis(this.options),i=this.box.center(),r=0;r<t.length;r++){var o=t[r].value,s=n.getSlot(o);e.options.vertical?s.move(i.x):s.move(void 0,i.y),e.box=e.box.wrap(s),t[r].reflow(s)}},e.prototype.mainVisual=function(e){for(var n=t.prototype.mainVisual.call(this,e),i=this.renderOutliers(e),r=0;r<i.length;r++){var o=i[r].getElement();o&&n.append(o)}return n},e.prototype.createLines=function(t,e){this.drawLines(t,e,this.whiskerPoints,e.whiskers),this.drawLines(t,e,this.medianPoints,e.median),this.drawLines(t,e,this.meanPoints,e.mean)},e.prototype.getBorderColor=function(){return(this.options.border||{}).color?this.options.border.color:this.color?this.color:t.prototype.getBorderColor.call(this)},e}(Al);re(Ml,{border:{_brightness:.8},line:{width:2},median:{color:"#f6f6f6"},mean:{width:2,dashType:"dash",color:"#f6f6f6"},overlay:{gradient:"glass"},tooltip:{format:"<table><tr><th colspan='2'>{6:d}</th></tr><tr><td>Lower:</td><td>{0:C}</td></tr><tr><td>Q1:</td><td>{1:C}</td></tr><tr><td>Median:</td><td>{2:C}</td></tr><tr><td>Mean:</td><td>{5:C}</td></tr><tr><td>Q3:</td><td>{3:C}</td></tr><tr><td>Upper:</td><td>{4:C}</td></tr></table>"},highlight:{opacity:1,border:{width:1,opacity:1},line:{width:1,opacity:1}},notes:{visible:!0,label:{}},outliers:{visible:!0,size:8,type:m,background:N,border:{width:2,opacity:1},opacity:0},extremes:{visible:!0,size:8,type:f,background:N,border:{width:2,opacity:1},opacity:0}}),st(Ml.prototype,La);const Ol=Ml;var Il=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowBoxSlot=function(t){this.boxSlot.y1=t.y1,this.boxSlot.y2=t.y2},e.prototype.reflowWhiskerSlot=function(t){this.whiskerSlot.y1=t.y1,this.whiskerSlot.y2=t.y2},e.prototype.calcMeanPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e.prototype.calcWhiskerPoints=function(t,e){var n=e.center().y;return[[[e.x1,n-5],[e.x1,n+5],[e.x1,n],[t.x1,n]],[[e.x2,n-5],[e.x2,n+5],[e.x2,n],[t.x2,n]]]},e.prototype.calcMedianPoints=function(t,e){return[[[e.x1,t.y1],[e.x1,t.y2]]]},e}(Ol);const Dl=Il;var Fl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e){var n,i=e.categoryIx,r=e.category,o=e.series,s=e.seriesIx,a=this.children,l=this.options,c=t.valueFields,h=ga(this.splitValue(c)),u=o.data[i],d=this.categoryPoints[i];d||(this.categoryPoints[i]=d=[]),h&&(n=this.createPoint(t,e));var p=a[i];p||(p=new wl({vertical:l.invertAxes,gap:l.gap,spacing:l.spacing,rtl:!l.invertAxes&&(this.chartService||{}).rtl}),this.append(p)),n&&(this.updateRange(c,e),p.append(n),n.categoryIx=i,n.category=r,n.series=o,n.seriesIx=s,n.owner=this,n.dataItem=u),this.points.push(n),d.push(n)},e.prototype.pointType=function(){return this.options.invertAxes?Dl:Ol},e.prototype.splitValue=function(t){return[t.lower,t.q1,t.median,t.q3,t.upper]},e.prototype.updateRange=function(t,e){var n=e.series.axis,i=this.splitValue(t).concat(this.filterOutliers(t.outliers));Ht(t.mean)&&(i=i.concat(t.mean));var r=this.valueAxisRanges[n]||{min:A,max:E};this.valueAxisRanges[n]={min:Math.min.apply(Math,i.concat([r.min])),max:Math.max.apply(Math,i.concat([r.max]))}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.lower,n.q1,n.median,n.q3,n.upper,n.mean,t.category)},e.prototype.filterOutliers=function(t){for(var e=(t||[]).length,n=[],i=0;i<e;i++){var r=t[i];Ht(r)&&null!==r&&n.push(r)}return n},e.prototype.supportsPointInactiveOpacity=function(){return!1},e}(Tl);const Pl=Fl;var Rl=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getAxis=function(){var t=this.chart.seriesAxes(this.series);return this.isVertical?t.y:t.x},e}(ha);const Ll=Rl;var Nl=function(t){function e(e,n){t.call(this,n),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.xAxisRanges={},this.yAxisRanges={},this.points=[],this.seriesPoints=[],this.seriesOptions=[],this._evalSeries=[]},e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.addErrorBar=function(t,e,n){var i,r=t.value[e],o=e+"Value",s=e+"ErrorLow",a=e+"ErrorHigh",l=n.seriesIx,c=n.series,h=t.options.errorBars,u=n[s],d=n[a];Y(r)&&(Y(u)&&Y(d)&&(i={low:u,high:d}),h&&Ht(h[o])&&(this.seriesErrorRanges=this.seriesErrorRanges||{x:[],y:[]},this.seriesErrorRanges[e][l]=this.seriesErrorRanges[e][l]||new Ro(h[o],c,e),i=this.seriesErrorRanges[e][l].getErrorRange(r,h[o])),i&&this.addPointErrorBar(i,t,e))},e.prototype.addPointErrorBar=function(t,e,n){var i=t.low,r=t.high,o=e.series,s=e.options.errorBars,a=n===z,l={};e[n+"Low"]=i,e[n+"High"]=r,e.errorBars=e.errorBars||[];var c=new Ll(i,r,a,this,o,s);e.errorBars.push(c),e.append(c),l[n]=i,this.updateRange(l,o),l[n]=r,this.updateRange(l,o)},e.prototype.addValue=function(t,e){var n,i=t.x,r=t.y,o=e.seriesIx,s=this.options.series[o],a=this.seriesMissingValues(s),l=this.seriesPoints[o],c=t;Aa(i)&&Aa(r)||(c=this.createMissingValue(c,a)),c&&((n=this.createPoint(c,e))&&(Object.assign(n,e),this.addErrorBar(n,j,e),this.addErrorBar(n,z,e)),this.updateRange(c,e.series)),this.points.push(n),l.push(n)},e.prototype.seriesMissingValues=function(t){return t.missingValues},e.prototype.createMissingValue=function(){},e.prototype.updateRange=function(t,e){var n=this.chartService.intl,i=e.xAxis,r=e.yAxis,o=t.x,s=t.y,a=this.xAxisRanges[i],l=this.yAxisRanges[r];Aa(o)&&(a=this.xAxisRanges[i]=a||{min:A,max:E},J(o)&&(o=Er(n,o)),a.min=Math.min(a.min,o),a.max=Math.max(a.max,o)),Aa(s)&&(l=this.yAxisRanges[r]=l||{min:A,max:E},J(s)&&(s=Er(n,s)),l.min=Math.min(l.min,s),l.max=Math.max(l.max,s))},e.prototype.evalPointOptions=function(t,e,n){var i=n.series,r=n.seriesIx,o={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","_outOfRangeMinPoint","_outOfRangeMaxPoint","drilldownSeriesFactory","ariaTemplate","ariaContent"]},s=this._evalSeries[r];Ht(s)||(this._evalSeries[r]=s=xa(t,{},o,!0));var a=t;return s&&xa(a=st({},t),{value:e,series:i,dataItem:n.dataItem},o),a},e.prototype.pointType=function(){return ja},e.prototype.pointOptions=function(t,e){var n=this.seriesOptions[e];if(!n){var i=this.pointType().prototype.defaults;this.seriesOptions[e]=n=st({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return n},e.prototype.createPoint=function(t,e){var n=e.series,i=this.pointOptions(n,e.seriesIx),r=e.color||n.color;i=this.evalPointOptions(i,t,e),nt(n.color)&&(r=i.color);var o=new ja(t,i);return o.color=r,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,n=t.yAxis,i=this.plotArea,r=e?i.namedXAxes[e]:i.axisX,o=n?i.namedYAxes[n]:i.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+n);return{x:r,y:o}},e.prototype.reflow=function(t){var e=this,n=this.points,i=!this.options.clip,r=0;this.traverseDataPoints((function(t,o){var s=n[r++],a=e.seriesAxes(o.series),l=a.x.getSlot(t.x,t.x,i),c=a.y.getSlot(t.y,t.y,i);if(s)if(l&&c){var h=e.pointSlot(l,c);s.reflow(h)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Tn(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,n=this.seriesPoints,i=0;i<e.length;i++){var r=e[i];n[i]||(n[i]=[]);for(var o=0;o<r.data.length;o++){var s=this.plotArea.bindPoint(r,o),a=s.valueFields,l=s.fields;t(a,st({pointIx:o,series:r,seriesIx:i,dataItem:r.data[o],owner:this},l))}}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.x,n.y)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],n=0;n<t.length;n++)e.push((t[n]||{}).marker);return e},e}(ei);re(Nl,{series:[],tooltip:{format:"{0}, {1}"},labels:{format:"{0}, {1}"},clip:!0}),st(Nl.prototype,Qa);const Bl=Nl;var jl=function(t){function e(e,n){t.call(this,e,n),this.category=e.category}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var t=this.options.highlight,e=t.border,n=this.options.markers,i=this.box.center(),r=(n.size+n.border.width+e.width)/2,o=new Hn.A,s=new jn.A(new zn.A([i.x,i.y+r/5+e.width/2],r+e.width/2),{stroke:{color:"none"},fill:this.createGradient({gradient:"bubbleShadow",color:n.background,stops:[{offset:0,color:n.background,opacity:.3},{offset:1,color:n.background,opacity:0}]})}),a=new jn.A(new zn.A([i.x,i.y],r),{stroke:{color:e.color||new xe(n.background).brightness(jo).toHex(),width:e.width,opacity:e.opacity},fill:{color:n.background,opacity:t.opacity}});return o.append(s,a),o},e.prototype.createFocusHighlight=function(t){var e=this.options.accessibility.highlight,n=this.options.markers,i=this.box.center(),r=(n.size+n.border.width)/2+e.border.width/2;return new jn.A(new zn.A([i.x,i.y],r),t)},e}(ja);jl.prototype.defaults=st({},jl.prototype.defaults,{labels:{position:p},highlight:{opacity:1,border:{color:"#fff",width:2,opacity:1}}}),jl.prototype.defaults.highlight.zIndex=void 0;const zl=jl;var $l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this._maxSize=E,t.prototype._initFields.call(this)},e.prototype.addValue=function(e,n){null!==e.size&&(e.size>0||e.size<0&&n.series.negativeValues.visible)?(this._maxSize=Math.max(this._maxSize,Math.abs(e.size)),t.prototype.addValue.call(this,e,n)):(this.points.push(null),this.seriesPoints[n.seriesIx].push(null))},e.prototype.reflow=function(e){this.updateBubblesSize(e),t.prototype.reflow.call(this,e)},e.prototype.pointType=function(){return zl},e.prototype.createPoint=function(t,e){var n=e.series,i=n.data.length,r=e.pointIx*(No/i),o={delay:r,duration:No-r,type:Zo},s=e.color||n.color;t.size<0&&n.negativeValues.visible&&(s=ee(n.negativeValues.color,s));var a=st({labels:{animation:{delay:r,duration:No-r}}},this.pointOptions(n,e.seriesIx),{markers:{type:f,border:n.border,opacity:n.opacity,animation:o}});a=this.evalPointOptions(a,t,e),nt(n.color)&&(s=a.color),a.markers.background=s;var l=new zl(t,a);return l.color=s,this.append(l),l},e.prototype.updateBubblesSize=function(t){for(var e=this.options.series,n=Math.min(t.width(),t.height()),i=0;i<e.length;i++)for(var r=e[i],o=this.seriesPoints[i],s=(r.minSize||Math.max(.02*n,10))/2,a=(r.maxSize||.2*n)/2,l=Math.PI*s*s,c=(Math.PI*a*a-l)/this._maxSize,h=0;h<o.length;h++){var u=o[h];if(u){var d=Math.abs(u.value.size)*c,p=Math.sqrt((l+d)/Math.PI),f=ee(u.options.zIndex,0)+(1-p/a);st(u.options,{zIndex:f,markers:{size:2*p,zIndex:f},labels:{zIndex:f+1}})}}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.x,n.y,n.size,t.category)},e.prototype.createAnimation=function(){},e.prototype.createVisual=function(){},e}(Bl);re($l,{tooltip:{format:"{3}"},labels:{format:"{3}"}});const Hl=$l;var Ul=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(si);st(Ul.prototype,La);const Vl=Ul;var Wl=function(t){function e(e,n){t.call(this,n),this.aboveAxis=this.options.aboveAxis,this.color=n.color||N,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.options;this._rendered||(this._rendered=!0,Ht(this.value.target)&&(this.target=new Vl({type:t.target.shape,background:t.target.color||this.color,opacity:t.opacity,zIndex:t.zIndex,border:t.target.border,vAlign:R,align:I}),this.target.value=this.value,this.target.dataItem=this.dataItem,this.target.series=this.series,this.append(this.target)),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},e.prototype.createLabelElement=function(t){return new pl(this.getLabelText(t),t,this.pointData())},e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):this.formatValue(t.format)},e.prototype.reflow=function(t){this.render();var e=this,n=e.options,i=e.target,r=e.owner,o=n.invertAxes,s=r.seriesValueAxis(this.options),a=r.categorySlot(r.categoryAxis,n.categoryIx,s),l=s.getSlot(this.value.target),c=o?l:a,h=o?a:l;if(i){var u=new Tn(c.x1,h.y1,c.x2,h.y2);i.options.height=o?u.height():n.target.line.width,i.options.width=o?n.target.line.width:u.width(),i.reflow(u)}var d=this.label;d&&(d.options.aboveAxis=this.aboveAxis,d.reflow(t)),this.note&&this.note.reflow(t),this.box=t},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual();var e=this.options,n=Ln.w.fromRect(this.box.toRect(),{fill:{color:this.color,opacity:e.opacity},stroke:null});e.border.width>0&&n.options.set("stroke",{color:e.border.color||this.color,width:e.border.width,dashType:e.border.dashType,opacity:ee(e.border.opacity,e.opacity)}),this.bodyVisual=n,X(n),this.visual.append(n)},e.prototype.createAnimation=function(){this.bodyVisual&&(this.animation=Qn.create(this.bodyVisual,this.options.animation))},e.prototype.createHighlight=function(t){return Ln.w.fromRect(this.box.toRect(),t)},e.prototype.highlightVisual=function(){return this.bodyVisual},e.prototype.highlightVisualArgs=function(){return{rect:this.box.toRect(),visual:this.bodyVisual,options:this.options}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.getIndex=function(){return this.categoryIx},e}(ei);Wl.prototype.tooltipAnchor=ml.prototype.tooltipAnchor,Wl.prototype.createFocusHighlight=ml.prototype.createFocusHighlight,re(Wl,{border:{width:1},vertical:!1,opacity:1,target:{shape:"",border:{width:0,color:"green"},line:{width:2}},labels:{visible:!1},tooltip:{format:"Current: {0}<br />Target: {1}"},notes:{label:{}},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}}),st(Wl.prototype,La),st(Wl.prototype,Na),st(Wl.prototype,fl);const ql=Wl;var Kl=function(t){function e(e,n){!function(t){for(var e=t.series,n=0;n<e.length;n++){var i=e[n],r=i.data;!r||U(r[0])||at(r[0])||(i.data=[r])}}(n),t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowCategories=function(t){for(var e=this.children,n=e.length,i=0;i<n;i++)e[i].reflow(t[i])},e.prototype.plotRange=function(t){var e=t.series,n=this.seriesValueAxis(e),i=this.categoryAxisCrossingValue(n);return[i,t.value.current||i]},e.prototype.createPoint=function(t,e){var n=e.categoryIx,i=e.series,r=this.options,o=this.children,s=t.valueFields,a=st({vertical:!r.invertAxes,overlay:i.overlay,categoryIx:n,invertAxes:r.invertAxes},i),l=t.fields.color||i.color;a=this.evalPointOptions(a,s,e),nt(i.color)&&(l=a.color);var c=new ql(s,a);c.color=l;var h=o[n];return h||(h=new wl({vertical:r.invertAxes,gap:r.gap,spacing:r.spacing,rtl:!r.invertAxes&&(this.chartService||{}).rtl}),this.append(h)),h.append(c),c},e.prototype.updateRange=function(t,e){var n=t.current,i=t.target,r=e.series.axis,o=this.valueAxisRanges[r];Ht(n)&&!isNaN(n)&&Ht(i&&!isNaN(i))&&((o=this.valueAxisRanges[r]=o||{min:A,max:E}).min=Math.min(o.min,n,i),o.max=Math.max(o.max,n,i))},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value.current,t.value.target)},e.prototype.pointValue=function(t){return t.valueFields.current},e.prototype.aboveAxis=function(t){return t.value.current>0},e.prototype.createAnimation=function(){var t=this.points;this._setAnimationOptions();for(var e=0;e<t.length;e++){var n=t[e];n.options.animation=this.options.animation,n.createAnimation()}},e}(Pa);Kl.prototype._setAnimationOptions=Cl.prototype._setAnimationOptions,re(Kl,{animation:{type:Yo}});const Xl=Kl;var Gl=function(t){function e(e,n){t.call(this),this.chartService=e,this.options=st({},this.options,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getStyle=function(t,e){var n=t.background,i=t.border.color;if(e){var r=e.color||e.options.color;n=ee(n,r),i=ee(i,r)}var o=dt(t.padding||{},"auto");return{backgroundColor:n,borderColor:i,font:t.font,color:t.color,opacity:t.opacity,borderWidth:lt(t.border.width),paddingTop:lt(o.top),paddingBottom:lt(o.bottom),paddingLeft:lt(o.left),paddingRight:lt(o.right)}},e.prototype.show=function(t,e,n){t.format=e.format;var i=this.getStyle(e,n);t.style=i;var r=new xe(i.backgroundColor);Ht(e.color)||r.isDark()||(t.className="k-chart-tooltip-inverse"),this.chartService.notify(Js,t),this.visible=!0},e.prototype.hide=function(){this.chartService&&this.chartService.notify(Zs),this.visible=!1},e.prototype.destroy=function(){delete this.chartService},e}(Nt.A);re(Gl,{border:{width:1},opacity:1});const Yl=Gl;var Jl=function(t){function e(e,n,i){t.call(this,e,i),this.crosshair=n,this.formatService=e.format,this.initAxisName()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initAxisName=function(){var t,e=this.crosshair.axis;t=e.plotArea.categoryAxis?e.getCategory?"categoryAxis":"valueAxis":e.options.vertical?"yAxis":"xAxis",this.axisName=t},e.prototype.showAt=function(t){var e=this.crosshair.axis,n=this.options,i=e[n.stickyMode?"getCategory":"getValue"](t),r=i;n.format?r=this.formatService.auto(n.format,i):e.options.type===y&&(r=this.formatService.auto(e.options.labels.dateFormats[e.options.baseUnit],i)),this.show({point:t,anchor:this.getAnchor(),crosshair:this.crosshair,value:r,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex},this.options)},e.prototype.hide=function(){this.chartService.notify(Zs,{crosshair:this.crosshair,axisName:this.axisName,axisIndex:this.crosshair.axis.axisIndex})},e.prototype.getAnchor=function(){var t,e,n,i=this.crosshair,r=this.options,o=r.position,s=r.padding,a=!i.axis.options.vertical,l=i.line.bbox();return a?(t=p,o===d?(e=R,n=l.bottomLeft().translate(0,s)):(e=d,n=l.topLeft().translate(0,-s))):(e=p,o===k?(t=I,n=l.topLeft().translate(-s,0)):(t=k,n=l.topRight().translate(s,0))),{point:n,align:{horizontal:t,vertical:e}}},e}(Yl);re(Jl,{padding:10});const Zl=Jl;var Ql=function(t){function e(e,n,i){t.call(this,i),this.axis=n,this.stickyMode=n instanceof Ir;var r=this.options.tooltip;r.visible&&(this.tooltip=new Zl(e,this,st({},r,{stickyMode:this.stickyMode})))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t){this.point=t,this.moveLine(),this.line.visible(!0),this.tooltip&&this.tooltip.showAt(t)},e.prototype.hide=function(){this.line.visible(!1),this.tooltip&&this.tooltip.hide()},e.prototype.moveLine=function(){var t,e=this.axis,n=this.point,i=e.options.vertical,r=this.getBox(),o=i?z:j,s=new Pn.A(r.x1,r.y1);if(t=i?new Pn.A(r.x2,r.y1):new Pn.A(r.x1,r.y2),n)if(this.stickyMode){var a=e.getSlot(e.pointCategoryIndex(n));s[o]=t[o]=a.center()[o]}else s[o]=t[o]=n[o];this.box=r,this.line.moveTo(s).lineTo(t)},e.prototype.getBox=function(){for(var t,e=this.axis,n=e.pane.axes,i=n.length,r=e.options.vertical,o=e.lineBox().clone(),s=r?j:z,a=0;a<i;a++){var l=n[a];l.options.vertical!==r&&(t?t.wrap(l.lineBox()):t=l.lineBox().clone())}return o[s+1]=t[s+1],o[s+2]=t[s+2],o},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;this.line=new Ln.w({stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType},visible:!1}),this.moveLine(),this.visual.append(this.line)},e.prototype.destroy=function(){this.tooltip&&this.tooltip.destroy(),t.prototype.destroy.call(this)},e}(ei);re(Ql,{color:u,width:2,zIndex:-1,tooltip:{visible:!1}});const tc=Ql;var ec=function(t){function e(e,n){t.call(this,e),this.pane=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.shouldClip=function(){for(var t=this.children,e=t.length,n=0;n<e;n++)if(!0===t[n].options.clip)return!0;return!1},e.prototype._clipBox=function(){return this.pane.chartsBox()},e.prototype.createVisual=function(){if(this.visual=new Hn.A({zIndex:0}),this.shouldClip()){var t=(this.clipBox=this._clipBox()).toRect(),e=Ln.w.fromRect(t);X(e),this.visual.clip(e),this.unclipLabels()}},e.prototype.stackRoot=function(){return this},e.prototype.unclipLabels=function(){for(var t=this.children,e=this.clipBox,n=0;n<t.length;n++)for(var i=t[n].points||{},r=i.length,o=0;o<r;o++){var s=i[o];if(s&&!1!==s.visible&&s.overlapsBox&&s.overlapsBox(e))if(s.unclipElements)s.unclipElements();else{var a=s.label,l=s.note;a&&a.options.visible&&(a.alignToClipBox&&a.alignToClipBox(e),a.options.noclip=!0),l&&l.options.visible&&(l.options.noclip=!0)}}},e.prototype.destroy=function(){t.prototype.destroy.call(this),delete this.parent},e}(ei);ec.prototype.isStackRoot=!0;const nc=ec;var ic=function(t){function e(e){t.call(this,e),this.id="pane"+rc++,this.createTitle(),this.content=new ei,this.chartContainer=new nc({},this),this.append(this.content),this.axes=[],this.charts=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createTitle=function(){var t=this.options.title;at(t)&&(t=st({},t,{align:t.position,position:R})),this.title=Ei.buildTitle(t,e.prototype.options.title),this.title&&this.append(this.title)},e.prototype.appendAxis=function(t){this.content.append(t),this.axes.push(t),t.pane=this},e.prototype.appendAxisAt=function(t,e){this.content.append(t),this.axes.splice(e,0,t),t.pane=this},e.prototype.appendChart=function(t){this.chartContainer.parent!==this.content&&this.content.append(this.chartContainer),this.charts.push(t),this.chartContainer.append(t),t.pane=this},e.prototype.empty=function(){var t=this.parent;if(t){for(var e=0;e<this.axes.length;e++)t.removeAxis(this.axes[e]);for(var n=0;n<this.charts.length;n++)t.removeChart(this.charts[n])}this.axes=[],this.charts=[],this.content.destroy(),this.content.children=[],this.chartContainer.children=[]},e.prototype.reflow=function(e){var n;Gt(this.children)===this.content&&(n=this.children.pop()),t.prototype.reflow.call(this,e),n&&this.children.push(n),this.title&&(this.contentBox.y1+=this.title.box.height())},e.prototype.visualStyle=function(){var e=t.prototype.visualStyle.call(this);return e.zIndex=-10,e},e.prototype.renderComplete=function(){this.options.visible&&this.createGridLines()},e.prototype.stackRoot=function(){return this},e.prototype.clipRoot=function(){return this},e.prototype.createGridLines=function(){for(var t=this.axes,e=t.concat(this.parent.axes),n=[],i=[],r=0;r<t.length;r++)for(var o=t[r],s=o.options.vertical,a=s?n:i,l=0;l<e.length;l++)if(0===a.length){var c=e[l];s!==c.options.vertical&&zt(a,o.createGridLines(c))}},e.prototype.refresh=function(){this.visual.clear(),this.content.parent=null,this.content.createGradient=this.createGradient.bind(this),this.content.renderVisual(),this.content.parent=this,this.title&&this.visual.append(this.title.visual),this.visual.append(this.content.visual),this.renderComplete(),this.notifyRender()},e.prototype.chartsBox=function(){for(var t=this.axes,e=t.length,n=new Tn,i=0;i<e;i++){var r=t[i],o=r.options.vertical?z:j,s=r.lineBox();n[o+1]=s[o+1],n[o+2]=s[o+2]}if(0===n.x2)for(var a=this.parent.axes,l=a.length,c=0;c<l;c++){var h=a[c];if(!h.options.vertical){var u=h.lineBox();n.x1=u.x1,n.x2=u.x2}}return n},e.prototype.clipBox=function(){return this.chartContainer.clipBox},e.prototype.notifyRender=function(){var t=this.getService();t&&t.notify("paneRender",{pane:new Co(this),index:this.paneIndex,name:this.options.name})},e}(ii),rc=1;ic.prototype.isStackRoot=!0,re(ic,{zIndex:-1,shrinkToFit:!0,title:{align:k},visible:!0});const oc=ic;var sc=function(t){function e(e,n,i){t.call(this,n),this.initFields(e,n),this.series=e,this.initSeries(),this.charts=[],this.options.legend=this.options.legend||{},this.options.legend.data=[],this.axes=[],this.crosshairs=[],this.chartService=i,this.originalOptions=n,this.originalSeries=e,this._bindCache=new WeakMap,this.createPanes(),this.render(),this.createCrosshairs()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){},e.prototype.initSeries=function(){for(var t=this.series,e=0;e<t.length;e++)t[e].index=e},e.prototype.bindPoint=function(t,e,n){var i=this._bindCache.get(t);i||(i=[],this._bindCache.set(t,i));var r=i[e];return r||(r=i[e]=Io.current.bindPoint(t,e,n)),r},e.prototype.createPanes=function(){for(var t=this.options.title||{},e=this.options.paneDefaults,n=this.options.panes||[],i=Math.max(n.length,1),r=[],o=st({title:{color:t.color}},e),s=0;s<i;s++){var a=st({},o,n[s]);J(a.title)&&(a.title=st({text:a.title},o.title));var l=new oc(a);l.paneIndex=s,r.push(l),this.append(l)}this.panes=r},e.prototype.crosshairOptions=function(t){return t.options.crosshair},e.prototype.createCrosshairs=function(t){var e=this;void 0===t&&(t=this.panes);for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.axes.length;r++){var o=i.axes[r],s=e.crosshairOptions(o);if(s&&s.visible){var a=new tc(e.chartService,o,s);e.crosshairs.push(a),i.content.append(a)}}},e.prototype.removeCrosshairs=function(t){for(var e=this.crosshairs,n=t.axes,i=e.length-1;i>=0;i--)for(var r=0;r<n.length;r++)if(e[i].axis===n[r]){e.splice(i,1);break}},e.prototype.hideCrosshairs=function(){for(var t=this.crosshairs,e=0;e<t.length;e++)t[e].hide()},e.prototype.findPane=function(t){for(var e,n=this.panes,i=0;i<n.length;i++)if(n[i].options.name===t){e=n[i];break}return e||n[0]},e.prototype.findPointPane=function(t){for(var e,n=this.panes,i=0;i<n.length;i++)if(n[i].box.containsPoint(t)){e=n[i];break}return e},e.prototype.appendAxis=function(t){this.findPane(t.options.pane).appendAxis(t),this.axes.push(t),t.plotArea=this},e.prototype.removeAxis=function(t){for(var e=[],n=0;n<this.axes.length;n++){var i=this.axes[n];t!==i?e.push(i):i.destroy()}this.axes=e},e.prototype.appendChart=function(t,e){this.charts.push(t),e?e.appendChart(t):this.append(t)},e.prototype.removeChart=function(t){for(var e=[],n=0;n<this.charts.length;n++){var i=this.charts[n];i!==t?e.push(i):i.destroy()}this.charts=e},e.prototype.addToLegend=function(t){for(var e=t.length,n=this.options.legend,i=n.labels||{},r=n.inactiveItems||{},o=r.labels||{},s=[],a=0;a<e;a++){var l=t[a],c=!1!==l.visible;if(!1!==l.visibleInLegend){var h=l.name,u=c?mt(i):mt(o)||mt(i);u&&(h=u({text:Aa(h)?h:"",series:l}));var d=l._defaults,p=l.color;nt(p)&&d&&(p=d.color);var f=void 0,g=void 0;c?(f={},g=p):(f={color:o.color,font:o.font},g=r.markers.color),Aa(h)&&""!==h&&s.push({text:h,labels:f,markerColor:g,series:l,active:c})}}zt(n.data,s)},e.prototype.groupAxes=function(t){for(var e=[],n=[],i=0;i<t.length;i++)for(var r=t[i].axes,o=0;o<r.length;o++){var s=r[o];s.options.vertical?n.push(s):e.push(s)}return{x:e,y:n,any:e.concat(n)}},e.prototype.groupSeriesByPane=function(){for(var t=this.series,e={},n=0;n<t.length;n++){var i=t[n],r=this.seriesPaneName(i);e[r]?e[r].push(i):e[r]=[i]}return e},e.prototype.filterVisibleSeries=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];!1!==i.visible&&e.push(i)}return e},e.prototype.reflow=function(t){var e=this.options.plotArea,n=this.panes,i=dt(e.margin);this.box=t.clone().unpad(i),this.reflowPanes(),this.detachLabels(),this.reflowAxes(n),this.reflowCharts(n)},e.prototype.redraw=function(t){var e=[].concat(t);this.initSeries();var n=this.getRoot();n&&n.cleanGradients();for(var i=0;i<e.length;i++)this.removeCrosshairs(e[i]),e[i].empty();this._bindCache=new WeakMap,this.render(e),this.detachLabels(),this.reflowAxes(this.panes),this.reflowCharts(e),this.createCrosshairs(e);for(var r=0;r<e.length;r++)e[r].refresh()},e.prototype.axisCrossingValues=function(t,e){for(var n=t.options,i=[].concat(n.axisCrossingValues||n.axisCrossingValue),r=e.length-i.length,o=i[0]||0,s=0;s<r;s++)i.push(o);return i},e.prototype.alignAxisTo=function(t,e,n,i){var r=t.getSlot(n,n,!0),o=t.options.reverse?2:1,s=e.getSlot(i,i,!0),a=e.options.reverse?2:1,l=t.box.translate(s[j+a]-r[j+o],s[z+a]-r[z+o]);t.pane!==e.pane&&l.translate(0,t.pane.box.y1-e.pane.box.y1),t.reflow(l)},e.prototype.alignAxes=function(t,e){for(var n=this,i=t[0],r=e[0],o=this.axisCrossingValues(i,e),s=this.axisCrossingValues(r,t),a={},l={},c={},h={},u=0;u<e.length;u++){var p=e[u],f=p.pane,m=f.id,y=!1!==p.options.visible,v=cc(t,f)||i,b=o;if(v!==i&&(b=n.axisCrossingValues(v,e)),n.alignAxisTo(p,v,s[u],b[u]),!p.options._overlap){Qt(p.lineBox().x1)===Qt(v.lineBox().x1)&&(a[m]&&p.reflow(p.box.alignTo(a[m].box,k).translate(-p.options.margin,0)),y&&(a[m]=p)),Qt(p.lineBox().x2)===Qt(v.lineBox().x2)&&(p._mirrored||(p.options.labels.mirror=!p.options.labels.mirror,p._mirrored=!0),n.alignAxisTo(p,v,s[u],b[u]),l[m]&&p.reflow(p.box.alignTo(l[m].box,I).translate(p.options.margin,0)),y&&(l[m]=p));var w=cc(e,f)||r;w!==p&&(p.alignTo(w),p.reflow(p.box))}}for(var x=0;x<t.length;x++){var _=t[x],S=_.pane,C=S.id,A=!1!==_.options.visible,E=cc(e,S)||r,T=s;E!==r&&(T=n.axisCrossingValues(E,t)),n.alignAxisTo(_,E,o[x],T[x]),_.options._overlap||(Qt(_.lineBox().y1)===Qt(E.lineBox().y1)&&(_._mirrored||(_.options.labels.mirror=!_.options.labels.mirror,_._mirrored=!0),n.alignAxisTo(_,E,o[x],T[x]),c[C]&&_.reflow(_.box.alignTo(c[C].box,R).translate(0,-_.options.margin)),A&&(c[C]=_)),Qt(_.lineBox().y2,g)===Qt(E.lineBox().y2,g)&&(h[C]&&_.reflow(_.box.alignTo(h[C].box,d).translate(0,_.options.margin)),A&&(h[C]=_)),0!==x&&(_.alignTo(i),_.reflow(_.box)))}},e.prototype.shrinkAxisWidth=function(t){for(var e=this.groupAxes(t).any,n=lc(e),i=0,r=0;r<t.length;r++){var o=t[r];o.axes.length>0&&(i=Math.max(i,n.width()-o.contentBox.width()))}if(0!==i)for(var s=0;s<e.length;s++){var a=e[s];a.options.vertical||a.reflow(a.box.shrink(i,0))}},e.prototype.shrinkAxisHeight=function(t){for(var e,n=0;n<t.length;n++){var i=t[n],r=i.axes,o=Math.max(0,lc(r).height()-i.contentBox.height());if(0!==o){for(var s=0;s<r.length;s++){var a=r[s];a.options.vertical&&a.reflow(a.box.shrink(0,o))}e=!0}}return e},e.prototype.fitAxes=function(t){for(var e=this.groupAxes(t).any,n=0,i=0;i<t.length;i++){var r=t[i],o=r.axes,s=r.contentBox;if(o.length>0){var a=lc(o),l=Math.max(s.y1-a.y1,s.y2-a.y2);n=Math.max(n,s.x1-a.x1);for(var c=0;c<o.length;c++){var h=o[c];h.reflow(h.box.translate(0,l))}}}for(var u=0;u<e.length;u++){var d=e[u];d.reflow(d.box.translate(n,0))}},e.prototype.reflowAxes=function(t){for(var e=this.groupAxes(t),n=0;n<t.length;n++)this.reflowPaneAxes(t[n]);e.x.length>0&&e.y.length>0&&(this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t),this.autoRotateAxisLabels(e),this.alignAxes(e.x,e.y),this.shrinkAxisWidth(t)&&this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t),this.alignAxes(e.x,e.y),this.shrinkAxisHeight(t)&&this.alignAxes(e.x,e.y),this.fitAxes(t))},e.prototype.autoRotateAxisLabels=function(t){for(var e,n=this.panes,i=hc(n),r=0;r<i.length;r++){i[r].autoRotateLabels()&&(e=!0)}if(e){for(var o=0;o<n.length;o++)this.reflowPaneAxes(n[o]);t.x.length>0&&t.y.length>0&&(this.alignAxes(t.x,t.y),this.shrinkAxisWidth(n))}},e.prototype.reflowPaneAxes=function(t){var e=t.axes,n=e.length;if(n>0)for(var i=0;i<n;i++)e[i].reflow(t.contentBox)},e.prototype.reflowCharts=function(t){for(var e=this.charts,n=e.length,i=this.box,r=0;r<n;r++){var o=e[r].pane;o&&!kt(o,t)||e[r].reflow(i)}},e.prototype.reflowPanes=function(){for(var t=this.box,e=this.panes,n=e.length,i=t.height(),r=0,o=t.y1,s=0;s<n;s++){var a=e[s],l=a.options.height;if(a.options.width=t.width(),a.options.height){if(l.indexOf&&l.indexOf("%")){var c=parseInt(l,10)/100;a.options.height=c*t.height()}a.reflow(t.clone()),i-=a.options.height}else r++}for(var h=0;h<n;h++){var u=e[h];u.options.height||(u.options.height=i/r)}for(var d=0;d<n;d++){var p=e[d],f=t.clone().move(t.x1,o);p.reflow(f),o+=p.options.height}},e.prototype.backgroundBox=function(){for(var t,e=this.axes,n=e.length,i=0;i<n;i++)for(var r=e[i],o=0;o<n;o++){var s=e[o];if(r.options.vertical!==s.options.vertical){var a=r.lineBox().clone().wrap(s.lineBox());t=t?t.wrap(a):a}}return t||this.box},e.prototype.chartsBoxes=function(){for(var t=this.panes,e=[],n=0;n<t.length;n++)e.push(t[n].chartsBox());return e},e.prototype.addBackgroundPaths=function(t){for(var e=this.chartsBoxes(),n=0;n<e.length;n++)t.paths.push(Ln.w.fromRect(e[n].toRect()))},e.prototype.backgroundContainsPoint=function(t){for(var e=this.chartsBoxes(),n=0;n<e.length;n++)if(e[n].containsPoint(t))return!0},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e,n=this.options.plotArea,i=n.opacity,r=n.background,o=n.border;void 0===o&&(o={}),""!==(e=r)&&null!==e&&"none"!==e&&"transparent"!==e&&Ht(e)||(r=N,i=0);var s=this._bgVisual=new Ln.P({fill:{color:r,opacity:i},stroke:{color:o.width?o.color:"",width:o.width,dashType:o.dashType},zIndex:-1});this.addBackgroundPaths(s),this.appendVisual(s)},e.prototype.pointsByCategoryIndex=function(t){var e=this.charts,n=[];if(null!==t)for(var i=0;i<e.length;i++){if("_navigator"!==e[i].pane.options.name){var r=e[i].categoryPoints[t];if(r&&r.length)for(var o=0;o<r.length;o++){var s=r[o];s&&Ht(s.value)&&null!==s.value&&n.push(s)}}}return n},e.prototype.pointsBySeriesIndex=function(t){return this.filterPoints((function(e){return e.series.index===t}))},e.prototype.pointsByPointIndex=function(t){return this.filterPoints((function(e){return e.getIndex()===t}))},e.prototype.pointsBySeriesName=function(t){return this.filterPoints((function(e){return e.series.name===t}))},e.prototype.filterPoints=function(t){for(var e=this.charts,n=[],i=0;i<e.length;i++)for(var r=e[i].points,o=0;o<r.length;o++){var s=r[o];s&&!1!==s.visible&&t(s)&&n.push(s)}return n},e.prototype.findPoint=function(t){for(var e=this.charts,n=0;n<e.length;n++)for(var i=e[n].points,r=0;r<i.length;r++){var o=i[r];if(o&&!1!==o.visible&&t(o))return o}},e.prototype.paneByPoint=function(t){for(var e=this.panes,n=0;n<e.length;n++){var i=e[n];if(i.box.containsPoint(t))return i}},e.prototype.detachLabels=function(){var t=this.groupAxes(this.panes),e=t.x,n=t.y;this.detachAxisGroupLabels(n,e),this.detachAxisGroupLabels(e,n)},e.prototype.detachAxisGroupLabels=function(t,e){for(var n=0,i=0;i<t.length;i++){var r=t[i],o=r.pane,s=cc(e,o)||e[0],a=i+n,l=this.createLabelAxis(r,a,s);if(l){n++;var c=o.axes.indexOf(r)+n;o.appendAxisAt(l,c)}}},e.prototype.createLabelAxis=function(t,e,n){var i=t.options.labels,r=i.position,o=r!==w&&r!==F,s=i.visible;if(o||!1===s)return null;var a=this.groupAxes(this.panes),l=n.options.vertical?a.x:a.y,c=this.axisCrossingValues(n,l),h=r===w,u=n.range(),d=h?u.max:u.min;if(Yt(c[e],u.min,u.max)-d==0)return null;c.splice(e+1,0,d),n.options.axisCrossingValues=c;var p=t.clone();return t.clear(),p.options.name=void 0,p.options.line.visible=!1,p.options.crosshair=void 0,p.options.notes=void 0,p.options.plotBands=void 0,p},e.prototype.isTrendline=function(t){return t&&kt(t.type,Ps)},e.prototype.trendlineFactory=function(){},e.prototype.createTrendlineSeries=function(){var t=this,e=[];return this.series=this.series.map((function(n){if(!t.isTrendline(n))return n;var i=t.seriesByName(n.for);if(!i)throw new Error('Invalid Configuration: Unable to locate linked series "'+n.for+'" for trendline "'+n.name+'".');var r=Io.current.valueFields(i),o=Gt(r),s=t.trendlineFactory(Object.assign({},{field:o},n),i);return s&&(!1===i.visible&&(s.visible=!1),s.color===C&&(s.color=i.color),e.push(s)),s})).filter((function(t){return null!==t})),e},e.prototype.seriesByName=function(t){return this.series.find((function(e){return e.name===t}))},e.prototype.getFirstPoint=function(){return this.pointsBySeriesIndex(0)[0]},e.prototype.getPointBelow=function(t){return this._getNextPoint(t,this._pointsByVertical,1)},e.prototype.getPointAbove=function(t){return this._getNextPoint(t,this._pointsByVertical,-1)},e.prototype.getPointToTheRight=function(t){return this._getNextPoint(t,this._pointsByHorizontal,1)},e.prototype.getPointToTheLeft=function(t){return this._getNextPoint(t,this._pointsByHorizontal,-1)},e.prototype._getNextPoint=function(t,e,n){var i=this,r=e.call(this,t),o=r.indexOf(t)+n,s=function(n){var r,o=0;do{o+=n,r=e.call(i,t,o)}while(0===r.length);return r};return o<0?(r=s(-1)).at(-1):o>=r.length?(r=s(1)).at(0):r[o]},e.prototype._pointsByVertical=function(t){return this.pointsByPointIndex(t.getIndex())},e.prototype._pointsByHorizontal=function(t,e){void 0===e&&(e=0);var n=et(t.series.index+e,this.series.length);return this.pointsBySeriesIndex(n)},e}(ei);function ac(t){return!t.pane.axes.some((function(e){return e.options.vertical===t.options.vertical&&e!==t&&!1!==e.options.visible}))}function lc(t){for(var e,n=t.length,i=0;i<n;i++){var r=t[i],o=!1!==r.options.visible;if(o||ac(r)){var s=o?r.contentBox():r.lineBox();e?e.wrap(s):e=s.clone()}}return e||new Tn}function cc(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i&&i.pane===e)return i}}var hc=function(t){return t.reduce((function(t,e){return t.concat(e.axes)}),[])};re(sc,{series:[],plotArea:{margin:{}},background:"",border:{color:u,width:0},paneDefaults:{title:{}},legend:{inactiveItems:{labels:{color:"#919191"},markers:{color:"#919191"}}}});const uc=sc;var dc={hover:function(t,e){this._dispatchEvent(t,e,zs)},click:function(t,e){this._dispatchEvent(t,e,"plotAreaClick")}};const pc=dc;var fc=function(t){function e(e,n,i){t.call(this);var r=n.canonicalFields(e),o=n.valueFields(e),s=n.sourceFields(e,r),a=this._seriesFields=[],l=i.query(e.type),c=e.aggregate||l;this._series=e,this._binder=n;for(var h=0;h<r.length;h++){var u=r[h],d=void 0;if(at(c))d=c[u];else{if(0!==h&&!kt(u,o))break;d=c}d&&a.push({canonicalName:u,name:s[h],transform:nt(d)?d:To[d]})}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aggregatePoints=function(t,e){var n=this._series,i=this._seriesFields,r=this._bindPoints(t||[]),o=r.dataItems[0],s={};if(o&&!Y(o)&&!U(o)){var a=function(){};a.prototype=o,s=new a}for(var l=0;l<i.length;l++){var c=i[l],h=this._bindField(r.values,c.canonicalName),u=c.transform(h,n,r.dataItems,e);if(!(null===u||!at(u)||Ht(u.length)||u instanceof Date)){s=u;break}Ht(u)&&gc(c.name,s,u)}return s},e.prototype._bindPoints=function(t){for(var e=this._binder,n=this._series,i=[],r=[],o=0;o<t.length;o++){var s=t[o];i.push(e.bindPoint(n,s)),r.push(n.data[s])}return{values:i,dataItems:r}},e.prototype._bindField=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var o=t[r],s=o.valueFields,a=void 0;a=Ht(s[e])?s[e]:o.fields[e],n.push(a)}return n},e}(Nt.A);function gc(t,e,n){var i=e,r=t;if(t.indexOf(".")>-1){for(var o=t.split(".");o.length>1;)r=o.shift(),Ht(i[r])||(i[r]={}),i=i[r];r=o.shift()}i[r]=n}const mc=fc;var yc=function(t){function e(){t.call(this),this._defaults={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){for(var n=0;n<t.length;n++)this._defaults[t[n]]=e},e.prototype.query=function(t){return this._defaults[t]},e}(Nt.A);yc.current=new yc;const vc=yc;var bc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createLabel=function(){var t=this.options.labels,e=st({},t,t.from),n=st({},t,t.to);e.visible&&(this.labelFrom=this.createLabelElement(e),this.append(this.labelFrom)),n.visible&&(this.labelTo=this.createLabelElement(n),this.append(this.labelTo))},e.prototype.reflow=function(t){this.render();var e=this,n=e.labelFrom,i=e.labelTo,r=e.value;this.box=t,n&&(n.options.aboveAxis=r.from>r.to,n.reflow(t)),i&&(i.options.aboveAxis=r.to>r.from,i.reflow(t)),this.note&&this.note.reflow(t)},e}(ml);bc.prototype.defaults=st({},bc.prototype.defaults,{labels:{format:"{0} - {1}"},tooltip:{format:"{1}"}});const wc=bc;var xc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return wc},e.prototype.pointValue=function(t){return t.valueFields},e.prototype.formatPointValue=function(t,e){return null===t.value.from&&null===t.value.to?"":this.chartService.format.auto(e,t.value.from,t.value.to)},e.prototype.plotRange=function(t){return t?[t.value.from,t.value.to]:0},e.prototype.updateRange=function(t,e){var n=e.series.axis,i=t.from,r=t.to,o=this.valueAxisRanges[n];null!==t&&Y(i)&&Y(r)&&((o=this.valueAxisRanges[n]=o||{min:A,max:E}).min=Math.min(o.min,i),o.max=Math.max(o.max,i),o.min=Math.min(o.min,r),o.max=Math.max(o.max,r))},e.prototype.aboveAxis=function(t){var e=t.value;return e.from<e.to},e}(Cl);xc.prototype.plotLimits=Pa.prototype.plotLimits;const _c=xc;var Sc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.aliasFor=function(){return this.parent},e}(ja);const Cc=Sc;var kc="auto",Ac=function(t){function e(e,n){t.call(this),this.value=e,this.options=n,this.aboveAxis=ee(this.options.aboveAxis,!0),this.tooltipTracking=!0,this._id=Be(),this.initLabelsFormat()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){if(!this._rendered){this._rendered=!0;var t=this.options,e=t.markers,n=t.labels,i=this.value,r=this.fromPoint=new Cc(i,st({},this.options,{labels:n.from,markers:e.from})),o=this.toPoint=new Cc(i,st({},this.options,{labels:n.to,markers:e.to}));this.copyFields(r),this.copyFields(o),this.append(r),this.append(o)}},e.prototype.reflow=function(t){this.render();var e=t.from,n=t.to;this.positionLabels(e,n),this.fromPoint.reflow(e),this.toPoint.reflow(n),this.box=this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox())},e.prototype.createHighlight=function(){var t=new Hn.A;return t.append(this.fromPoint.createHighlight()),t.append(this.toPoint.createHighlight()),t},e.prototype.highlightVisual=function(){return this.visual},e.prototype.highlightVisualArgs=function(){return{options:this.options,from:this.fromPoint.highlightVisualArgs(),to:this.toPoint.highlightVisualArgs()}},e.prototype.createFocusHighlight=function(){var t=new Hn.A;return t.append(this.fromPoint.createFocusHighlight()),t.append(this.toPoint.createFocusHighlight()),t},e.prototype.tooltipAnchor=function(){var t=this.owner.pane.clipBox();if(!t||t.overlaps(this.box)){var e,n,i,r=this.box,o=r.center(),s=k;return this.options.vertical?(e=o.x,n=r.y1-5,i=d):(e=r.x2+5,n=o.y,i=p),{point:new Cn(e,n),align:{horizontal:s,vertical:i}}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){this.fromPoint.unclipElements(),this.toPoint.unclipElements()},e.prototype.initLabelsFormat=function(){var t=this.options.labels;t.format||(t.from&&t.from.format||(t.from=Object.assign({},t.from,{format:"{0}"})),t.to&&t.to.format||(t.to=Object.assign({},t.to,{format:"{1}"})))},e.prototype.positionLabels=function(t,e){var n,i,r=this.options,o=r.labels,s=r.vertical;o.position===kc&&(s?e.y1<=t.y1?(i=Wo,n=qo):(i=qo,n=Wo):e.x1<=t.x1?(i=k,n=I):(i=I,n=k),o.from&&o.from.position||(this.fromPoint.options.labels.position=n),o.to&&o.to.position||(this.toPoint.options.labels.position=i))},e.prototype.copyFields=function(t){t.dataItem=this.dataItem,t.category=this.category,t.series=this.series,t.color=this.color,t.owner=this.owner},e.prototype.focusVisual=function(){this.fromPoint.focusVisual()},e.prototype.clearFocusFromVisual=function(){this.toPoint.clearFocusFromVisual()},e.prototype.getIndex=function(){return this.categoryIx},e}(ei);st(Ac.prototype,La),st(Ac.prototype,Na),Ac.prototype.defaults={markers:{visible:!1,background:N,size:8,type:f,border:{width:2},opacity:1},labels:{visible:!1,margin:dt(3),padding:dt(4),animation:{type:Bo,delay:No},position:kc},notes:{label:{}},highlight:{markers:{border:{color:N,width:2}},zIndex:100},tooltip:{format:"{0} - {1}"},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}};const Ec=Ac;var Tc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()))),t},e.prototype.createStroke=function(t){var e=new Ln.w(t),n=new Ln.w(t);e.segments.push.apply(e.segments,this.strokeSegments()),n.segments.push.apply(n.segments,this.stackSegments()),this.visual.append(e),this.visual.append(n)},e.prototype.hasStackSegment=function(){return!0},e.prototype.fromPoints=function(){return this.linePoints.map((function(t){return t.fromPoint}))},e.prototype.toPoints=function(){return this.linePoints.map((function(t){return t.toPoint}))},e}(il);const Mc=Tc;var Oc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.createCurveSegments(this.toPoints())},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.createCurveSegments(this.fromPoints().reverse())),t},e.prototype.createCurveSegments=function(t){return(new bo).process(this.toGeometryPoints(t))},e}(Mc);const Ic=Oc;var Dc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createStrokeSegments=function(){return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()))},e.prototype.stackSegments=function(){var t=this.fromSegments;return this.fromSegments||(t=this.fromSegments=this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()))).reverse(),t},e}(Mc);st(Dc.prototype,Va);const Fc=Dc;var Pc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.pointType=function(){return Ec},e.prototype.createPoint=function(t,e){var n=e.series,i=e.seriesIx,r=t.valueFields;if(!Aa(r.from)&&!Aa(r.to)){if(this.seriesMissingValues(n)!==Uo)return null;r={from:0,to:0}}var o=this.pointOptions(n,i);o=this.evalPointOptions(o,r,e);var s=t.fields.color||n.color;nt(n.color)&&(s=o.color);var a=new Ec(r,o);return a.color=s,this.append(a),a},e.prototype.createSegment=function(t,e,n){var i=(e.line||{}).style;return new("smooth"===i?Ic:"step"===i?Fc:Mc)(t,e,n)},e.prototype.plotRange=function(t,e){return t?[t.value.from,t.value.to]:[e,e]},e.prototype.valueSlot=function(t,e){var n=t.getSlot(e[0],e[0],!this.options.clip),i=t.getSlot(e[1],e[1],!this.options.clip);if(n&&i)return{from:n,to:i}},e.prototype.pointSlot=function(t,e){var n,i,r=e.from,o=e.to;return this.options.invertAxes?(n=new Tn(r.x1,t.y1,r.x2,t.y2),i=new Tn(o.x1,t.y1,o.x2,t.y2)):(n=new Tn(t.x1,r.y1,t.x2,r.y2),i=new Tn(t.x1,o.y1,t.x2,o.y2)),{from:n,to:i}},e.prototype.addValue=function(e,n){var i=e.valueFields;Y(i.from)||(i.from=i.to),Y(i.to)||(i.to=i.from),t.prototype.addValue.call(this,e,n)},e.prototype.updateRange=function(t,e){if(null!==t&&Y(t.from)&&Y(t.to)){var n=e.series.axis,i=this.valueAxisRanges[n]=this.valueAxisRanges[n]||{min:A,max:E},r=t.from,o=t.to;i.min=Math.min(i.min,r,o),i.max=Math.max(i.max,r,o)}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.from,n.to)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],n=0;n<t.length;n++){var i=t[n];i&&(e.push((i.fromPoint||{}).marker),e.push((i.toPoint||{}).marker))}return e.concat(this._segments)},e}(Pa);st(Pc.prototype,Ya,Qa);const Rc=Pc;var Lc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,n=e.options,i=e.value,r=e.owner.seriesValueAxis(n),o=[],s=[],a=[],l=r.getSlot(i.low,i.high),c=r.getSlot(i.open,i.open),h=r.getSlot(i.close,i.close);c.x1=h.x1=l.x1=t.x1,c.x2=h.x2=l.x2=t.x2;var u=l.center().x;o.push([c.x1,c.y1]),o.push([u,c.y1]),s.push([u,h.y1]),s.push([h.x2,h.y1]),a.push([u,l.y1]),a.push([u,l.y2]),this.lines=[o,s,a],this.box=l.clone().wrap(c.clone().wrap(h)),this.reflowNote()},e.prototype.createBody=function(){},e}(Al);const Nc=Lc;var Bc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return Nc},e}(Tl);const jc=Bc;var zc=function(t){function e(e,n,i){t.call(this),this.from=e,this.to=n,this.series=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.linePoints=function(){var t=this.from,e=this.from.box,n=this.to.box,i=[];if(t.isVertical){var r=t.aboveAxis?e.y1:e.y2;i.push([e.x1,r],[n.x2,r])}else{var o=t.aboveAxis?e.x2:e.x1;i.push([o,e.y1],[o,n.y2])}return i},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.series.line||{},n=Ln.w.fromPoints(this.linePoints(),{stroke:{color:e.color,width:e.width,opacity:e.opacity,dashType:e.dashType}});X(n),this.visual.append(n)},e}(ei);re(zc,{animation:{type:Bo,delay:No}});const $c=zc;var Hc=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.createSegments()},e.prototype.traverseDataPoints=function(t){for(var e=this.options.series,n=va(e),i=!this.options.invertAxes,r=0;r<e.length;r++)for(var o=e[r],s=0,a=0,l=0;l<n;l++){var c=Io.current.bindPoint(o,l),h=c.valueFields.value,u=c.fields.summary,d=s,p=void 0;u?"total"===u.toLowerCase()?(c.valueFields.value=s,d=0,p=s):(c.valueFields.value=a,p=d-a,a=0):Y(h)&&(a+=h,p=s+=h),t(c,{category:this.categoryAxis.categoryAt(l),categoryIx:l,series:o,seriesIx:r,total:s,runningTotal:a,from:d,to:p,isVertical:i})}},e.prototype.updateRange=function(e,n){t.prototype.updateRange.call(this,{value:n.to},n)},e.prototype.aboveAxis=function(t){return t.value>=0},e.prototype.plotRange=function(t){return[t.from,t.to]},e.prototype.createSegments=function(){for(var t=this.options.series,e=this.seriesPoints,n=this.segments=[],i=0;i<t.length;i++){var r=t[i],o=e[i];if(o)for(var s=void 0,a=0;a<o.length;a++){var l=o[a];if(l&&s){var c=new $c(s,l,r);n.push(c),this.append(c)}s=l}}},e}(Cl);const Uc=Hc;const Vc=function(t,e,n){var i=t[String(e)];return i?i(n):null};const Wc=function(t,e){for(var n,i,r=0,o=0,s=0,a=0,l=0,c=Number.MAX_VALUE,h=Number.MIN_VALUE,u=0;u<t.length;u++){var d=e(t[u]),p=d.xValue,f=d.yValue;isFinite(p)&&null!==p&&isFinite(f)&&null!==f&&(c=Math.min(p,c),h=Math.max(p,h),l++,r+=p,o+=f,s+=Math.pow(p,2),a+=p*f)}return l>0&&(i=(o-(n=(l*a-r*o)/(l*s-Math.pow(r,2)))*r)/l),{slope:n,intercept:i,count:l,xMin:c,xMax:h}};const qc=function(t,e){return t.every((function(t){var n=t.valueFields;return!Aa(n[e])||n[e]>0}))};const Kc=function(t,e){for(var n=[],i=e.totalRangeIndices(),r=e.currentRangeIndices(),o={min:Math.floor(Math.max(r.min-1,i.min)),max:Math.ceil(Math.min(r.max+2,i.max))},s=o.min;s<o.max;s++){var a=s+1;n[s]={category:e.categoryAt(s,!0),value:t(a)}}return n};var Xc=function(t){return function(e){var n=e.categoryIx,i=e.valueFields;return{xValue:n+1,yValue:Math.log(i[t])}}};const Gc=function(t){var e=t.options,n=t.categoryAxis,i=function(t){var e=t.seriesValues,n=t.categoryAxis,i=t.options,r=e();if(!qc(r,i.field))return null;var o=Wc(r,Xc(i.field)),s=o.slope,a=o.intercept;if(o.count>0){var l=Math.exp(a),c=s;return Kc((function(t){return l*Math.exp(c*t)}),n)}return null}({seriesValues:t.seriesValues,categoryAxis:n,options:e});return i?Object.assign({},e,{type:"line",data:i,categoryField:"category",field:"value"}):null};var Yc=function(t){return function(e){return{xValue:e.categoryIx+1,yValue:e.valueFields[t]}}};const Jc=function(t){var e=t.options,n=t.categoryAxis,i=function(t){var e=t.seriesValues,n=t.categoryAxis,i=t.options,r=Wc(e(),Yc(i.field)),o=r.slope,s=r.intercept;if(r.count>0)return Kc((function(t){return o*t+s}),n);return null}({seriesValues:t.seriesValues,categoryAxis:n,options:e});return i?Object.assign({},e,{type:"line",data:i,categoryField:"category",field:"value"}):null};var Zc=function(t){return function(e){var n=e.categoryIx,i=e.valueFields;return{xValue:Math.log(n+1),yValue:i[t]}}};const Qc=function(t){var e=t.options,n=t.categoryAxis,i=function(t){var e=t.seriesValues,n=t.categoryAxis,i=t.options,r=Wc(e(),Zc(i.field)),o=r.slope,s=r.intercept;if(r.count>0){var a=o,l=s;return Kc((function(t){return a*Math.log(t)+l}),n)}return null}({seriesValues:t.seriesValues,categoryAxis:n,options:e});return i?Object.assign({},e,{type:"line",data:i,categoryField:"category",field:"value"}):null};const th=function(t,e,n){for(var i=[],r=[],o=Math.max(la,n)-1,s=0,a=0,l=0;l<t.length;l++){var c=e(t[l]),h=c.xValue,u=c.yValue;if(isFinite(u)&&null!==u?(r.push(u),a+=u,s=Math.max(l,s)):r.push(null),l>=o){var d=r.filter((function(t){return null!==t})).length,p=r.shift()||0;if(d>0){var f=a/d;i.push([h,f]),a-=p;continue}}i.push([h,null])}return i.slice(0,s+1)};var eh=function(t){return function(e){return{xValue:e.categoryIx,yValue:e.valueFields[t]}}};const nh=function(t){var e=t.options,n=function(t){var e=t.categoryAxis,n=function(t){var e=t.options,n=t.categoryAxis,i=t.seriesValues,r=(e.trendline||{}).period||la,o=n.totalRangeIndices(),s=n.currentRangeIndices(),a={min:Math.floor(Math.max(s.min-r,o.min)),max:Math.ceil(Math.min(s.max+r+2,o.max))};return th(i(a),eh(e.field),r)}(t),i=[];if(n.forEach((function(t){var n=t[0],r=t[1];i[n]={category:e.categoryAt(n,!0),value:r}})),i.length>0)return i;return null}(t);return n?Object.assign({},e,{type:"line",data:n,categoryField:"category",field:"value"}):null};const ih=function(t,e,n){for(var i=Math.min(Math.max(n||1,1),6)+1,r=new Pe,o=new Pe,s=0,a=Number.MAX_VALUE,l=Number.MIN_VALUE,c=function(t){return t},h=[],u=0;u<t.length;u++){var d=e(t[u]),p=d.xValue,f=d.yValue;if(isFinite(p)&&null!==p&&isFinite(f)&&null!==f){a=Math.min(p,a),l=Math.max(p,l),s++,o.set(u,0,f),r.set(u,0,1),r.set(u,1,p);for(var g=2;g<=i;g++)r.set(u,g,Math.pow(r.get(u,1),g))}else r.set(u,0,0)}return r.width=Math.min(i,s),s>0&&(h=function(t,e){for(var n=t.transpose(),i=n.multiply(t).inverse().multiply(n).multiply(e),r=[],o=0;o<i.height;o++)r.push(i.get(o,0));return r}(r,o),c=function(t){return h.reduce((function(e,n,i){return e+n*Math.pow(t,i)}),0)}),{coefficients:h,count:s,valueMapper:c,xMin:a,xMax:l}};var rh=function(t){return function(e){return{xValue:e.categoryIx+1,yValue:e.valueFields[t]}}};const oh=function(t){var e=t.options,n=t.categoryAxis,i=function(t){var e=t.seriesValues,n=t.categoryAxis,i=t.options,r=(i.trendline||{}).order,o=ih(e(),rh(i.field),r),s=o.count,a=o.valueMapper;if(s>0)return Kc((function(t){return a(t)}),n);return null}({seriesValues:t.seriesValues,categoryAxis:n,options:e});return i?Object.assign({},e,{type:"line",data:i,categoryField:"category",field:"value"}):null};var sh=function(t){return function(e){var n=e.categoryIx,i=e.valueFields;return{xValue:Math.log(n+1),yValue:Math.log(i[t])}}};const ah=function(t){var e=t.options,n=t.categoryAxis,i=function(t){var e=t.seriesValues,n=t.categoryAxis,i=t.options,r=e();if(!qc(r,i.field))return null;var o=Wc(r,sh(i.field)),s=o.slope,a=o.intercept;if(o.count>0){var l=Math.exp(a),c=s;return Kc((function(t){return l*Math.pow(t,c)}),n)}return null}({seriesValues:t.seriesValues,categoryAxis:n,options:e});return i?Object.assign({},e,{type:"line",data:i,categoryField:"category",field:"value"}):null};var lh={};lh[Ts]=Gc,lh[Ms]=Jc,lh[Os]=Qc,lh[Is]=nh,lh[Ds]=oh,lh[Fs]=ah;const ch=lh;var hh=[Go,xs,ms,ks],uh=[as,Cs].concat(hh),dh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(t){if(this.namedCategoryAxes={},this.namedValueAxes={},this.valueAxisRangeTracker=new ul,this._seriesPointsCache={},this._currentPointsCache={},t.length>0){this.invertAxes=kt(t[0].type,[Yo,Qo,Cs,xs,ks,ys,ss,_s]);for(var e=0;e<t.length;e++){var n=t[e].stack;if(n&&"100%"===n.type){this.stack100=!0;break}}}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.series=[].concat(this.originalSeries),this.createCategoryAxes(t),this.aggregateCategories(t),this.createTrendlineSeries(t),this.createCategoryAxesLabels(t),this.createCharts(t),this.createValueAxes(t)},e.prototype.removeAxis=function(e){var n=e.options.name;t.prototype.removeAxis.call(this,e),e instanceof Ir?delete this.namedCategoryAxes[n]:(this.valueAxisRangeTracker.reset(n),delete this.namedValueAxes[n]),e===this.categoryAxis&&delete this.categoryAxis,e===this.valueAxis&&delete this.valueAxis},e.prototype.trendlineFactory=function(t,e){var n=this.seriesCategoryAxis(t),i=this.seriesValues.bind(this,e.index),r=Vc(ch,t.type,{options:t,categoryAxis:n,seriesValues:i});return r?(r.categoryAxis=e.categoryAxis,r.valueAxis=e.valueAxis,this.filterSeries(r,n)):r},e.prototype.trendlineAggregateForecast=function(){return this.series.map((function(t){return(t.trendline||{}).forecast})).filter((function(t){return void 0!==t})).reduce((function(t,e){return{before:Math.max(t.before,e.before||0),after:Math.max(t.after,e.after||0)}}),{before:0,after:0})},e.prototype.seriesValues=function(t,e){var n=[],i=this.srcSeries[t],r=this.seriesCategoryAxis(i);ba(r.options.type,y)&&(this._seriesPointsCache={},this._currentPointsCache={},r.options.dataItems=[],i=this.aggregateSeries(i,r,r.totalRangeIndices()));for(var o=e?e.min:0,s=e?e.max:i.data.length,a=o;a<s;a++){var l=this.bindPoint(i,a);n.push({categoryIx:a,category:l.fields.category,valueFields:l.valueFields})}return n},e.prototype.createCharts=function(t){for(var e=this,n=this.groupSeriesByPane(),i=0;i<t.length;i++){var r=t[i],o=n[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);if(s)for(var a=e.groupSeriesByCategoryAxis(s),l=0;l<a.length;l++)e.createChartGroup(a[l],r)}},e.prototype.createChartGroup=function(t,e){this.createAreaChart(_a(t,[Go,xs]),e),this.createRangeAreaChart(_a(t,[ms,ks]),e),this.createBarChart(_a(t,[es,Yo]),e),this.createRangeBarChart(_a(t,[vs,ys]),e),this.createBulletChart(_a(t,[Qo,Ss]),e),this.createCandlestickChart(_a(t,ts),e),this.createBoxPlotChart(_a(t,[Jo,_s]),e),this.createOHLCChart(_a(t,ls),e),this.createWaterfallChart(_a(t,[As,ss]),e),this.createLineChart(_a(t,[as,Cs]),e)},e.prototype.aggregateCategories=function(t){var e=this,n=[].concat(this.series),i=[];this._currentPointsCache={},this._seriesPointsCache=this._seriesPointsCache||{};for(var r=0;r<n.length;r++){var o=n[r];if(!e.isTrendline(o)){var s=e.seriesCategoryAxis(o),a=e.findPane(s.options.pane);o=(ba(s.options.type,y)||o.categoryField)&&kt(a,t)?e.aggregateSeries(o,s,s.currentRangeIndices()):e.filterSeries(o,s)}i.push(o)}this._seriesPointsCache=this._currentPointsCache,this._currentPointsCache=null,this.srcSeries=n,this.series=i},e.prototype.filterSeries=function(t,e){var n=(t.data||{}).length;if(e._seriesMax=Math.max(e._seriesMax||0,n),!Ht(e.options.min)&&!Ht(e.options.max))return t;var i=e.currentRangeIndices(),r=kt(t.type,uh),o=st({},t);return o.data=(o.data||[]).slice(i.min,i.max+1),r&&Da(o,i,n,(function(n){return{item:t.data[n],category:e.categoryAt(n,!0),categoryIx:n-i.min}}),(function(e){return Ht(t.data[e])})),o},e.prototype.clearSeriesPointsCache=function(){this._seriesPointsCache={}},e.prototype.seriesSourcePoints=function(t,e){var n=t.index+";"+e.categoriesHash();if(this._seriesPointsCache&&this._seriesPointsCache[n])return this._currentPointsCache[n]=this._seriesPointsCache[n],this._seriesPointsCache[n];var i=e.options,r=i.srcCategories,o=ba(i.type,y),s=t.data,a=[];o||e.indexCategories();for(var l=0;l<s.length;l++){var c=Io.current.bindPoint(t,l).fields.category;if(o&&(c=Ca(c,s[l],this.chartService.intl)),Ht(c)||(c=r[l]),Ht(c)&&null!==c){var h=e.totalIndex(c);a[h]=a[h]||{items:[],category:c},a[h].items.push(l)}}return this._currentPointsCache[n]=a,a},e.prototype.aggregateSeries=function(t,e,n){if(!t.data.length)return t;for(var i=this.seriesSourcePoints(t,e),r=st({},t),o=new mc(st({},t),Io.current,vc.current),s=r.data=[],a=e.options.dataItems||[],l=function(t){var r=t-n.min,s=i[t];if(s||(s=i[t]={}),s.categoryIx=r,!s.item){var a=e.categoryAt(t,!0);s.category=a,s.item=o.aggregatePoints(s.items,a)}return s},c=n.min;c<=n.max;c++){var h=l(c);s[h.categoryIx]=h.item,h.items&&h.items.length&&(a[h.categoryIx]=h.item)}return kt(r.type,uh)&&Da(r,n,e.totalCount(),l,(function(t){return i[t]})),e.options.dataItems=a,r},e.prototype.appendChart=function(e,n){var i=e.options.series,r=this.seriesCategoryAxis(i[0]),o=r.options.categories,s=Math.max(0,va(i)-o.length);if(s>0)for(o=r.options.categories=r.options.categories.slice(0);s--;)o.push("");this.valueAxisRangeTracker.update(e.valueAxisRanges),t.prototype.appendChart.call(this,e,n)},e.prototype.seriesPaneName=function(t){var e=this.options,n=t.axis,i=xt([].concat(e.valueAxis),(function(t){return t.name===n}))[0],r=((e.panes||[{}])[0]||{}).name||"default";return(i||{}).pane||r},e.prototype.seriesCategoryAxis=function(t){var e=t.categoryAxis,n=e?this.namedCategoryAxes[e]:this.categoryAxis;if(!n)throw new Error("Unable to locate category axis with name "+e);return n},e.prototype.stackableChartOptions=function(t,e){var n=t.some((function(t){return t.stack})),i=t.some((function(t){return t.stack&&"100%"===t.stack.type})),r=e.options.clip;return{defaultStack:t[0].stack,isStacked:n,isStacked100:i,clip:r}},e.prototype.groupSeriesByCategoryAxis=function(t){for(var e=[],n={},i=0;i<t.length;i++){var r=t[i].categoryAxis||"$$default$$";De(n,r)||(n[r]=!0,e.push(r))}for(var o=[],s=0;s<e.length;s++){var a=fh(t,e[s],s);0!==a.length&&o.push(a)}return o},e.prototype.createBarChart=function(t,e){if(0!==t.length){var n=t[0],i=new Cl(this,Object.assign({series:t,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing},this.stackableChartOptions(t,e)));this.appendChart(i,e)}},e.prototype.createRangeBarChart=function(t,e){if(0!==t.length){var n=t[0],i=new _c(this,{series:t,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing});this.appendChart(i,e)}},e.prototype.createBulletChart=function(t,e){if(0!==t.length){var n=t[0],i=new Xl(this,{series:t,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var n=new el(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(n,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var n=new cl(this,Object.assign({invertAxes:this.invertAxes,series:t},this.stackableChartOptions(t,e)));this.appendChart(n,e)}},e.prototype.createRangeAreaChart=function(t,e){if(0!==t.length){var n=new Rc(this,{invertAxes:this.invertAxes,series:t,clip:e.options.clip});this.appendChart(n,e)}},e.prototype.createOHLCChart=function(t,e){if(0!==t.length){var n=t[0],i=new jc(this,{invertAxes:this.invertAxes,gap:n.gap,series:t,spacing:n.spacing,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createCandlestickChart=function(t,e){if(0!==t.length){var n=t[0],i=new Tl(this,{invertAxes:this.invertAxes,gap:n.gap,series:t,spacing:n.spacing,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createBoxPlotChart=function(t,e){if(0!==t.length){var n=t[0],i=new Pl(this,{invertAxes:this.invertAxes,gap:n.gap,series:t,spacing:n.spacing,clip:e.options.clip});this.appendChart(i,e)}},e.prototype.createWaterfallChart=function(t,e){if(0!==t.length){var n=t[0],i=new Uc(this,{series:t,invertAxes:this.invertAxes,gap:n.gap,spacing:n.spacing});this.appendChart(i,e)}},e.prototype.axisRequiresRounding=function(t,e){for(var n=_a(this.series,Es),i=0;i<this.series.length;i++){var r=this.series[i];if(kt(r.type,hh)){var o=r.line;o&&o.style===Xo&&n.push(r)}}for(var s=0;s<n.length;s++){var a=n[s].categoryAxis||"";if(a===t||!a&&0===e)return!0}},e.prototype.aggregatedAxis=function(t,e){for(var n=this.series,i=0;i<n.length;i++){var r=n[i].categoryAxis||"";if((r===t||!r&&0===e)&&n[i].categoryField)return!0}},e.prototype.createCategoryAxesLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e]instanceof Ir&&t[e].createLabels()},e.prototype.createCategoryAxes=function(t){for(var e=this,n=this.invertAxes,i=[].concat(this.options.categoryAxis),r=[],o=0;o<i.length;o++){var s=i[o];if(kt(e.findPane(s.pane),t)){var a=s.name,l=s.categories;void 0===l&&(l=[]),s=st({vertical:n,reverse:!n&&e.chartService.rtl,axisCrossingValue:n?A:0},s),Ht(s.justified)||(s.justified=e.isJustified()),e.axisRequiresRounding(a,o)&&(s.justified=!1);var c=void 0;if(Ea(s,l[0])?(s._forecast=e.trendlineAggregateForecast(),c=new Ur(s,e.chartService)):c=new Ir(s,e.chartService),i[o].categories=c.options.srcCategories,a){if(e.namedCategoryAxes[a])throw new Error("Category axis with name "+a+" is already defined");e.namedCategoryAxes[a]=c}c.axisIndex=o,r.push(c),e.appendAxis(c)}}var h=this.categoryAxis||r[0];this.categoryAxis=h,n?this.axisY=h:this.axisX=h},e.prototype.isJustified=function(){for(var t=this.series,e=0;e<t.length;e++){if(!kt(t[e].type,hh))return!1}return!0},e.prototype.createValueAxes=function(t){var e=this,n=this.valueAxisRangeTracker,i=n.query(),r=[].concat(this.options.valueAxis),o=this.invertAxes,s={vertical:!o,reverse:o&&this.chartService.rtl},a=[];this.stack100&&(s.roundToMajorUnit=!1,s.labels={format:"P0"});for(var l=0;l<r.length;l++){var c=r[l];if(kt(e.findPane(c.pane),t)){var h=c.name,u=ba(c.type,na)?{min:.1,max:1}:{min:0,max:1},d=n.query(h)||i||u;0===l&&d&&i&&(d.min=Math.min(d.min,i.min),d.max=Math.max(d.max,i.max));var p=new(ba(c.type,na)?io:Yr)(d.min,d.max,st({},s,c),e.chartService);if(h){if(e.namedValueAxes[h])throw new Error("Value axis with name "+h+" is already defined");e.namedValueAxes[h]=p}p.axisIndex=l,a.push(p),e.appendAxis(p)}}var f=this.valueAxis||a[0];this.valueAxis=f,o?this.axisX=f:this.axisY=f},e.prototype._dispatchEvent=function(t,e,n){var i=t._eventCoordinates(e),r=new Cn(i.x,i.y),o=this.pointPane(r),s=[],a=[];if(o){for(var l=o.axes,c=0;c<l.length;c++){var h=l[c];h.getValue?fa(a,h.getValue(r)):fa(s,h.getCategory(r))}0===s.length&&fa(s,this.categoryAxis.getCategory(r)),s.length>0&&a.length>0&&t.trigger(n,{element:Kt(e),originalEvent:e,category:Ta(s),value:Ta(a)})}},e.prototype.pointPane=function(t){for(var e=this.panes,n=0;n<e.length;n++){var i=e[n];if(i.contentBox.containsPoint(t))return i}},e.prototype.updateAxisOptions=function(t,e){ph(this.options,t,e),ph(this.originalOptions,t,e)},e.prototype._pointsByVertical=function(t,e){return void 0===e&&(e=0),this.invertAxes?this._siblingsBySeriesIndex(t.series.index,e):this._siblingsByPointIndex(t.getIndex())},e.prototype._pointsByHorizontal=function(t,e){if(void 0===e&&(e=0),this.invertAxes)return this._siblingsByPointIndex(t.getIndex());var n=this._siblingsBySeriesIndex(t.series.index,e);return this.chartService.rtl?n.reverse():n},e.prototype._siblingsByPointIndex=function(t){for(var e=this.charts,n=[],i=0;i<e.length;i++){var r=e[i];if(!r.pane||"_navigator"!==r.pane.options.name){var o=r.points.filter((function(e){return e&&!1!==e.visible&&e.getIndex()===t}));n.push.apply(n,o.sort(this._getSeriesCompareFn(o[0])))}}return n},e.prototype._siblingsBySeriesIndex=function(t,e){var n=et(t+e,this.series.length);return this.pointsBySeriesIndex(n)},e.prototype._getSeriesCompareFn=function(t){var e=this._isInStackedSeries(t);return e&&this.invertAxes||!e&&!this.invertAxes?function(t,e){return t.box.center().x-e.box.center().x}:function(t,e){return t.box.center().y-e.box.center().y}},e.prototype._isInStackedSeries=function(t){var e=kt(t.series.type,[Go,xs,ms,ks,as,Cs,gs,ps]),n=kt(t.series.type,[es,Yo]);return e||n&&t.options.isStacked},e}(uc);function ph(t,e,n){st([].concat(e instanceof Ir?t.categoryAxis:t.valueAxis)[e.axisIndex],n)}function fh(t,e,n){return xt(t,(function(t){return 0===n&&!t.categoryAxis||t.categoryAxis===e}))}re(dh,{categoryAxis:{},valueAxis:{}}),st(dh.prototype,pc);const gh=dh;var mh=n(9306),yh=n(1811),vh=function(t){function e(){t.call(this),this._points=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._points=[]},e.prototype.show=function(t,e){var n=[].concat(t);this.hide();for(var i=0;i<n.length;i++){var r=n[i];r&&r.toggleHighlight&&r.hasHighlight()&&(this.togglePointHighlight(r,!0,e),this._points.push(r))}},e.prototype.togglePointHighlight=function(t,e,n){var i=(t.options.highlight||{}).toggle;if(i){var r={category:t.category,series:t.series,dataItem:t.dataItem,value:t.value,stackValue:t.stackValue,preventDefault:bh,visual:t.highlightVisual(),show:e};i(r),r._defaultPrevented||t.toggleHighlight(e,n)}else t.toggleHighlight(e,n)},e.prototype.hide=function(){for(var t=this._points;t.length;)this.togglePointHighlight(t.pop(),!1)},e.prototype.isHighlighted=function(t){for(var e=this._points,n=0;n<e.length;n++){if(t===e[n])return!0}return!1},e}(Nt.A);function bh(){this._defaultPrevented=!0}const wh=vh;function xh(t,e){var n=(e||"").toLowerCase(),i=t.event;return"none"===n&&!(i.ctrlKey||i.shiftKey||i.altKey)||i[n+"Key"]}function _h(t){for(var e={},n=0;n<t.length;n++){var i=t[n];i.axis.options.name&&(e[i.axis.options.name]={min:i.range.min,max:i.range.max})}return e}var Sh=function(t){function e(e,n){t.call(this),this.plotArea=e,this.options=st({},this.options,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.start=function(t){return this._active=xh(t,this.options.key),this._active},e.prototype.move=function(t){if(this._active){var e=this.axisRanges=this._panAxes(t,j).concat(this._panAxes(t,z));if(e.length)return this.axisRanges=e,_h(e)}},e.prototype.end=function(){var t=this._active;return this._active=!1,t},e.prototype.pan=function(){var t=this.plotArea,e=this.axisRanges;if(e.length){for(var n=0;n<e.length;n++){var i=e[n];t.updateAxisOptions(i.axis,i.range)}t.redraw(t.panes)}},e.prototype.destroy=function(){delete this.plotArea},e.prototype._panAxes=function(t,e){var n=this.plotArea,i=-t[e].delta,r=(this.options.lock||"").toLowerCase(),o=[];if(0!==i&&(r||"").toLowerCase()!==e)for(var s=n.axes,a=0;a<s.length;a++){var l=s[a];if(e===j&&!l.options.vertical||e===z&&l.options.vertical){var c=l.pan(i);c&&(c.limitRange=!0,o.push({axis:l,range:c}))}}return o},e}(Nt.A);Sh.prototype.options={key:"none",lock:"none"};const Ch=Sh;var kh=function(t){function e(e,n){t.call(this),this.chart=e,this.options=st({},this.options,n),this.createElement()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElement=function(){var t=this._marquee=document.createElement("div");t.className="k-marquee";var e=document.createElement("div");e.className="k-marquee-color",t.appendChild(e)},e.prototype.removeElement=function(){this._marquee.parentNode&&this._marquee.parentNode.removeChild(this._marquee)},e.prototype.setStyles=function(t){ut(this._marquee,t)},e.prototype.start=function(t){if(xh(t,this.options.key)){var e=this.chart,n=e._eventCoordinates(t),i=this._zoomPane=e._plotArea.paneByPoint(n),r=i?i.chartsBox().clone():null;if(i&&r){var o=this._elementOffset();return r.translate(o.left,o.top),this._zoomPaneClipBox=r,document.body.appendChild(this._marquee),this.setStyles({left:t.pageX+1,top:t.pageY+1,width:0,height:0}),!0}}return!1},e.prototype._elementOffset=function(){var t=this.chart.element,e=ut(t,["paddingLeft","paddingTop"]),n=e.paddingLeft,i=e.paddingTop,r=Vt(t);return{left:n+r.left,top:i+r.top}},e.prototype.move=function(t){this._zoomPane&&this.setStyles(this._selectionPosition(t))},e.prototype.end=function(t){if(this._zoomPane){var e=this._elementOffset(),n=this._selectionPosition(t);n.left-=e.left,n.top-=e.top;var i={x:n.left,y:n.top},r={x:n.left+n.width,y:n.top+n.height};return this._updateAxisRanges(i,r),this.removeElement(),delete this._zoomPane,_h(this.axisRanges)}},e.prototype.zoom=function(){var t=this.axisRanges;if(t&&t.length){for(var e=this.chart._plotArea,n=0;n<t.length;n++){var i=t[n];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){this.removeElement(),delete this._marquee,delete this.chart},e.prototype._updateAxisRanges=function(t,e){for(var n=(this.options.lock||"").toLowerCase(),i=[],r=this._zoomPane.axes,o=0;o<r.length;o++){var s=r[o],a=s.options.vertical;if((n!==j||a)&&(n!==z||!a)&&Ht(s.axisIndex)){var l=s.pointsRange(t,e);l&&i.push({axis:s,range:l})}}this.axisRanges=i},e.prototype._selectionPosition=function(t){var e=this._zoomPaneClipBox,n={x:t.x.startLocation,y:t.y.startLocation},i=t.x.location,r=t.y.location,o=(this.options.lock||"").toLowerCase(),s=Math.min(n.x,i),a=Math.min(n.y,r),l=Math.abs(n.x-i),c=Math.abs(n.y-r);return o===j&&(s=e.x1,l=e.width()),o===z&&(a=e.y1,c=e.height()),i>e.x2&&(l=e.x2-n.x),i<e.x1&&(l=n.x-e.x1),r>e.y2&&(c=e.y2-n.y),r<e.y1&&(c=n.y-e.y1),{left:Math.max(s,e.x1),top:Math.max(a,e.y1),width:l,height:c}},e}(Nt.A);kh.prototype.options={key:"shift",lock:"none"};const Ah=kh;var Eh=function(t){function e(e,n){t.call(this),this.chart=e,this.options=st({rate:.3},this.options,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateRanges=function(t,e){for(var n=(this.options.lock||"").toLowerCase(),i=[],r=this.chart._plotArea.axes,o=0;o<r.length;o++){var s=r[o],a=s.options.vertical;if((n!==j||a)&&(n!==z||!a)&&s.zoomRange){var l=Yt(this.options.rate,.01,.9),c=s.zoomRange(-t*l,e);c&&i.push({axis:s,range:c})}}return this.axisRanges=i,_h(i)},e.prototype.zoom=function(){var t=this.axisRanges,e=this.chart._plotArea;if(t&&t.length&&e.updateAxisOptions){for(var n=0;n<t.length;n++){var i=t[n];e.updateAxisOptions(i.axis,i.range)}e.redraw(e.panes)}},e.prototype.destroy=function(){delete this.chart},e}(Nt.A);const Th=Eh;var Mh=n(6145);function Oh(t,e,n,i,r){return"start"===n?e.origin[i]:"end"===n?e.origin[i]+e.size[r]-t:e.origin[i]+(e.size[r]-t)/2}function Ih(t,e,n,i,r){return"start"===n?e.origin[i]+e.size[r]-t:"end"===n?e.origin[i]:e.origin[i]+(e.size[r]-t)/2}var Dh={alignContent:"start",justifyContent:"start",alignItems:"start",spacing:0,orientation:"horizontal",lineSpacing:0,wrap:!0,revers:!1},Fh=function(t,e){t.forEach(e)},Ph=function(t,e){for(var n=t.length-1;n>=0;n--)e(t[n],n)},Rh=function(t){function e(e,n){t.call(this,Object.assign({},Dh,n)),this._rect=e,this._fieldMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(t){return t?(this._rect=t,this):this._rect},e.prototype._initMap=function(){var t=this.options,e=this._fieldMap;"horizontal"===t.orientation?(e.sizeField="width",e.groupsSizeField="height",e.groupAxis="x",e.groupsAxis="y"):(e.sizeField="height",e.groupsSizeField="width",e.groupAxis="y",e.groupsAxis="x"),t.reverse?(this.forEach=Ph,this.justifyAlign=Ih):(this.forEach=Fh,this.justifyAlign=Oh)},e.prototype.reflow=function(){if(this._rect&&0!==this.children.length){this._initMap(),this.options.transform&&this.transform(null);for(var t,e,n,i=this.options,r=this._rect,o=this._initGroups(),s=o.groups,a=o.groupsSize,l=this._fieldMap,c=l.sizeField,h=l.groupsSizeField,u=l.groupAxis,d=l.groupsAxis,p=new Pn.A,f=new Pn.A,g=new Mh.A,m=Oh(a,r,i.alignContent,d,h),y=function(r,o){var s=e.elements[o];f[u]=t,f[d]=Oh(r.size[h],n,i.alignItems,d,h),function(t,e,n){var i=n.transform()||(0,$n.A)(),r=i.matrix();r.e+=t.x-e.origin.x,r.f+=t.y-e.origin.y,i.matrix(r),n.transform(i)}(f,r,s),t+=r.size[c]+i.spacing},v=0;v<s.length;v++)e=s[v],p[u]=t=this.justifyAlign(e.size,r,i.justifyContent,u,c),p[d]=m,g[c]=e.size,g[h]=e.lineSize,n=new kn.A(p,g),this.forEach(e.bboxes,y),m+=e.lineSize+i.lineSpacing;if(!i.wrap&&e.size>r.size[c]){var b=r.size[c]/n.size[c],w=n.topLeft().scale(b,b),x=Oh(n.size[h]*b,r,i.alignContent,d,h),_=(0,$n.A)();"x"===u?_.translate(r.origin.x-w.x,x-w.y):_.translate(x-w.x,r.origin.y-w.y),_.scale(b,b),this.transform(_)}}},e.prototype._initGroups=function(){for(var t=this,e=this.options,n=this.children,i=e.lineSpacing,r=e.wrap,o=e.spacing,s=this._fieldMap.sizeField,a=this._newGroup(),l=[],c=function(){l.push(a),h+=a.lineSize+i},h=-i,u=0;u<n.length;u++){var d=n[u],p=n[u].clippedBBox();d.visible()&&p&&(r&&a.size+p.size[s]+o>t._rect.size[s]?0===a.bboxes.length?(t._addToGroup(a,p,d),c(),a=t._newGroup()):(c(),a=t._newGroup(),t._addToGroup(a,p,d)):t._addToGroup(a,p,d))}return a.bboxes.length&&c(),{groups:l,groupsSize:h}},e.prototype._addToGroup=function(t,e,n){t.size+=e.size[this._fieldMap.sizeField]+this.options.spacing,t.lineSize=Math.max(e.size[this._fieldMap.groupsSizeField],t.lineSize),t.bboxes.push(e),t.elements.push(n)},e.prototype._newGroup=function(){return{lineSize:0,size:-this.options.spacing,bboxes:[],elements:[]}},e}(Hn.A);const Lh=Rh;var Nh=function(t){function e(e,n){t.call(this,e),this.chartService=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t,e=this.children,n=this.options,i=n.vertical;this.visual=new Lh(null,{spacing:i?0:n.spacing,lineSpacing:i?n.spacing:0,orientation:i?"vertical":H,reverse:n.rtl,alignItems:i?(t=n.rtl,t?w:F):p});for(var r=0;r<e.length;r++){var o=e[r];o.reflow(new Tn),o.renderVisual()}},e.prototype.reflow=function(t){this.visual.rect(t.toRect()),this.visual.reflow();var e=this.visual.clippedBBox();this.box=e?xi(e):new Tn},e.prototype.renderVisual=function(){this.addVisual()},e.prototype.createVisual=function(){},e}(ei);const Bh=Nh;var jh=10,zh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.visualStyle=function(){var t=this.markerOptions(),e=t.border;return{stroke:{width:e.width,color:e.color,opacity:ee(e.opacity,t.opacity),dashType:e.dashType},fill:{color:t.background,opacity:t.opacity},cursor:t.cursor}},e.prototype.markerOptions=function(){return this.options},e.prototype.markerHighlightOptions=function(){var t=this.markerOptions(),e=t.highlight.border.width;return st({},t,{background:t.border.color},t.highlight,t.type===m?{background:t.highlight.border.color,border:{color:t.highlight.background,width:e/2},width:t.width,height:t.height,margin:{top:0,left:0}}:{})},e.prototype.createHighlight=function(){var e=new t(this.markerHighlightOptions()),n=this.paddingBox.clone();return e.reflow(n.pad(e.options.border.width)),this.highlight=[e.getElement()],this.highlight},e}(si);re(zh,{border:{width:2},width:8,height:8,background:N,margin:{top:-1,left:-1},vAlign:R,align:k,highlight:{width:jh,height:jh,border:{color:N,width:2}}});const $h=zh;var Hh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=new Hn.A,e=new Ln.P(this.visualStyle()),n=this.paddingBox,i=n.height()/2;return e.moveTo(n.x1,n.y1+i).lineTo(n.x1,n.y2).lineTo(n.x2,n.y2),t.append(e),t},e}(si);re(Hh,{width:15,height:15,align:I,vAlign:d,margin:{right:-2,bottom:2}});const Uh=Hh;var Vh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=new Hn.A,e=new Ln.P({stroke:{color:this.options.border.color,opacity:this.options.opacity,width:this.options.height,dashType:this.options.dashType}}),n=this.paddingBox,i=n.center().y;return e.moveTo(n.x1,i).lineTo(n.x2,i),t.append(e),t},e.prototype.createHighlight=function(){return this.highlight=[this.createHighlightLine(),this.createHighlightMarker()],this.highlight},e.prototype.createHighlightLine=function(){var t=st({},{border:{color:this.options.border.color,opacity:this.options.border.opacity,dashType:this.options.border.dashType}},this.options.highlight),e=new Uh(t);return e.reflow(this.parent.paddingBox.clone()),this.highlightLine=e.getElement(),this.highlightLine},e.prototype.createHighlightMarker=function(){var e=st({},{background:this.options.background},this.options.highlight.markers),n=new t(e),i=this.parent.paddingBox,r=e.border.width,o=this.parent.box.clone();return o.pad({left:r-i.x1,top:r-i.y1}),n.reflow(o),this.highlightMarker=n.getElement(),this.highlightMarker},e}(si);re(Vh,{border:{width:0},type:"rect",align:k,vAlign:p,highlight:{border:{width:2},markers:{type:f,width:jh,height:jh,border:{width:2,color:N},align:k,vAlign:R}}});const Wh=Vh;var qh=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createHighlight=function(){var e=st({},{background:this.options.background},this.options.highlight.markers),n=new t(e),i=this.paddingBox.clone(),r=this.parent.box.clone();return i.align(r,j,k),i.align(r,z,R),n.reflow(i),this.highlight=[n.getElement()],this.highlight},e}(si);re(qh,{highlight:{markers:{type:f,width:jh,height:jh,border:{width:2,color:N},margin:{top:-3,left:-3}}}});const Kh=qh;var Xh=function(t){function e(e){t.call(this,e),this.createContainer(),e.rtl?(this.createLabel(),this.createMarker()):(this.createMarker(),this.createLabel()),this._id=Be(),this.options.accessibility.ariaChecked=e.active}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainer=function(){this.container=new gi({vertical:!1,wrap:!1,align:p,spacing:this.options.spacing}),this.append(this.container)},e.prototype.createMarker=function(){this.markerWrap=new t({vertical:!1,shrinkToFit:!0,wrap:!1,margin:1,width:22,height:22}),this.container.append(this.markerWrap),this.createMarkerArea(),this.options.markers.visible&&(this._marker=this._createMarker(),this.markerWrap.append(this._marker))},e.prototype.createMarkerArea=function(){var t=this.options,e=t.markerColor,n=t.line;void 0===n&&(n={});var i={border:{color:n.color||e,opacity:n.opacity,dashType:n.dashType}};return this._createLine(i)||this._createMarkerLine(i,n)||this._createSquare()},e.prototype.markerOptions=function(){var t=this.options,e=t.markers;void 0===e&&(e={});var n=t.markerColor,i=e.border;return void 0===i&&(i={}),e.zIndex=void 0,st({},e,{border:{color:i.color||n},highlight:t.highlight.markers})},e.prototype._highlightOptions=function(){var t=this.options;return st({markers:{type:t.markers.type}},t.highlight)},e.prototype._createLine=function(t){var e=this.options;return e.type!==as||e.markers.visible||(this._line=new Wh(st({},{background:e.markerColor,highlight:this._highlightOptions()},t,e.line)),this.markerWrap.append(this._line)),this._line},e.prototype._createMarkerLine=function(t,e){return this.options.type===as&&(this._markerLineArea=new Uh(st({},{border:{width:e.height}},t)),this.markerWrap.append(this._markerLineArea)),this._markerLineArea},e.prototype._createSquare=function(){var t=this.options;return t.type===Go&&(this._square=new Kh(Object.assign({},{border:t.border,vAlign:t.markers.visible?d:p,highlight:this._highlightOptions()},t.area,{background:t.area.background||t.markerColor})),this.markerWrap.append(this._square)),this._square},e.prototype._createMarker=function(){return new $h(this.markerOptions())},e.prototype._highlightMarkers=function(){this.options.active&&this._toggleHighlight(!0)},e.prototype._restoreMarkers=function(){this._toggleHighlight(!1)},e.prototype._toggleHighlight=function(t){var e=this;if(this.options.highlight.visible){var n=this._marker||this._square||this._line;if(n&&n===this._line&&this._line.visual.visible(!t),n){var i=n.highlight;i||(i=n.createHighlight()).forEach((function(t){return t&&e.markerWrap.appendVisual(t)})),i.forEach((function(e){return e&&e.visible(t)}))}}},e.prototype.createLabel=function(){var t=this.options,e=st({},t.labels);this.container.append(new Ci(t.text,e))},e.prototype.getAriaLabelText=function(){return this.options.text},e.prototype.focusVisual=function(){this.visual.options.set("id",this._id),this.toggleFocusHighlight(!0),this._highlightMarkers()},e.prototype.clearFocusFromVisual=function(){this.visual.options.set("id",""),this.toggleFocusHighlight(!1),this._restoreMarkers()},e.prototype.renderComplete=function(){t.prototype.renderComplete.call(this);var e=this.options.cursor||{},n=this._itemOverlay=Ln.w.fromRect(this.container.box.toRect(),{fill:{color:N,opacity:0},stroke:null,cursor:e.style||e});this.appendVisual(n)},e.prototype.click=function(t,e){var n=this.eventArgs(e);!t.trigger(Rs,n)&&e&&"contextmenu"===e.type&&e.preventDefault()},e.prototype.over=function(t,e){var n=this.eventArgs(e);return t.trigger("legendItemHover",n)||(t._legendItemHover(n.seriesIndex,n.pointIndex),this._highlightMarkers()),!0},e.prototype.out=function(t,e){t._unsetActivePoint(),this._restoreMarkers(),t.trigger("legendItemLeave",this.eventArgs(e))},e.prototype.eventArgs=function(t){var e=this.options;return{element:Kt(t),text:e.text,series:e.series,seriesIndex:e.series.index,pointIndex:e.pointIndex}},e.prototype.createVisual=function(){t.prototype.createVisual.call(this);var e=this.options;if(this.options.visible){var n=st({ariaLabel:void 0!==e.accessibility.ariaLabel?e.accessibility.ariaLabel:e.text},e.accessibility);ri(this.visual,n)}},e.prototype.renderVisual=function(){var e=this,n=this.options,i=n.visual;i?(this.visual=i({active:n.active,series:n.series,sender:this.getSender(),pointIndex:n.pointIndex,options:{type:n.type,markers:st({background:this.options.markerColor},this.markerOptions()),labels:n.labels},createVisual:function(){e.createVisual(),e.renderChildren(),e.renderComplete();var t=e.visual;return delete e.visual,t}}),this._marker=this._markerLineArea=this._square=this._line=null,this.addVisual()):t.prototype.renderVisual.call(this)},e.prototype.createFocusHighlight=function(t){var e=t.stroke.width;return Ln.w.fromRect(this.container.box.pad(e/2).toRect(),t)},e}(ii);re(Xh,{accessibility:{role:"checkbox",className:"k-chart-legend-item",ariaRoleDescription:"Legend item"},markers:{},highlight:{visible:!0,markers:{}}});const Gh=Xh;var Yh="custom",Jh=function(t){function e(e,n){void 0===n&&(n={}),t.call(this,e),this.chartService=n,kt(this.options.position,[R,I,d,k,Yh])||(this.options.position=I),this.createContainers(),this.createLegendTitle(e.title),this.createItems()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createContainers=function(){var t=this.options,e=t.position,n=t.align,i=e,r=p;e===Yh?i=k:kt(e,[R,d])?(i=n===F?k:n===w?I:p,r=e):n&&(n===F?r=R:n===w&&(r=d)),this.container=new ii({margin:t.margin,padding:t.padding,background:t.background,border:t.border,vAlign:r,align:i,zIndex:t.zIndex,shrinkToFit:!0}),this.hasTitle()?this.itemsContainer=new ii({vAlign:r,align:i,zIndex:t.zIndex,shrinkToFit:!0}):this.itemsContainer=this.container,this.append(this.container)},e.prototype.createItems=function(){var t=this.getService(),e=this.options,n=this.isVertical(),i=new Bh({vertical:n,spacing:e.spacing,rtl:t.rtl},t),r=e.data;e.reverse&&(r=r.slice(0).reverse());for(var o=r.length,s=0;s<o;s++){var a=r[s],l=a.series||{},c=l.markers;void 0===c&&(c={});var h=l.dashType,u=l.legendItem,d=l.opacity,p=st({visible:!1!==c.visible,type:f},c);delete p.size;var g=st({},{markers:p,labels:e.labels,rtl:t.rtl,line:Object.assign({},{dashType:h},e.line),area:Object.assign({},{opacity:d},e.area),opacity:d,accessibility:e.accessibility},e.item,u,a,{markers:e.markers});i.append(new Gh(g))}i.render(),this.itemsContainer.append(i)},e.prototype.isVertical=function(){var t=this.options,e=t.orientation,n=t.position;return n===Yh&&e!==H||(Ht(e)?e!==H:kt(n,[k,I]))},e.prototype.hasItems=function(){return this.container.children[0].children.length>0},e.prototype.getItems=function(){return this.itemsContainer.children[0].children},e.prototype.reflow=function(t){var e=this.options,n=t.clone();this.hasItems()?(e.position===Yh?(this.containerCustomReflow(n),this.box=n):this.containerReflow(n),this.hasTitle()&&this.title.reflow(new Tn(this.container.box.x1,this.title.box.y1,this.container.box.x2,this.title.box.y2))):this.box=n},e.prototype.containerReflow=function(t){var e=this.options,n=this.container,i=e.position,r=e.width,o=e.height,s=i===R||i===d?j:z,a=this.isVertical(),l=t.clone(),c=t.clone();i!==k&&i!==I||(c.y1=l.y1=0),a&&o?(c.y2=c.y1+o,c.align(l,z,n.options.vAlign)):!a&&r&&(c.x2=c.x1+r,c.align(l,j,n.options.align)),n.reflow(c);var h=(c=n.box).clone();(e.offsetX||e.offsetY)&&(c.translate(e.offsetX,e.offsetY),n.reflow(c)),h[s+1]=t[s+1],h[s+2]=t[s+2],this.box=h},e.prototype.containerCustomReflow=function(t){var e=this.options,n=this.container,i=e.offsetX,r=e.offsetY,o=e.width,s=e.height,a=this.isVertical(),l=t.clone();a&&s?l.y2=l.y1+s:!a&&o&&(l.x2=l.x1+o),n.reflow(l),l=n.box,n.reflow(new Tn(i,r,i+l.width(),r+l.height()))},e.prototype.renderVisual=function(){this.hasItems()&&t.prototype.renderVisual.call(this)},e.prototype.createLegendTitle=function(t){var e=st({},{color:u,position:R,align:p},t),n=e.text;if(t&&!1!==t.visible&&t.text){if(Ht(e)&&e.visible){var i=mt(e);i?n=i({text:n}):e.format&&(n=this.chartService.format.auto(e.format,n))}this.title=new Ci(n,e),this.createTitleLayout(),this.appendTitleLayoutContent()}},e.prototype.createTitleLayout=function(){this.layout=new gi({vertical:!0,wrap:!1}),this.container.append(this.layout)},e.prototype.hasTitle=function(){return Boolean(this.options.title&&!1!==this.options.title.visible&&this.options.title.text)},e.prototype.appendTitleLayoutContent=function(){this.options.title.position===d?(this.layout.append(this.itemsContainer),this.layout.append(this.title)):(this.layout.append(this.title),this.layout.append(this.itemsContainer))},e}(ei);re(Jh,{position:I,data:[],offsetX:0,offsetY:0,margin:dt(2),padding:dt(5),border:{color:u,width:0},item:{cursor:$,spacing:6},spacing:6,background:"",zIndex:1,markers:{},line:{width:20,height:2,cursor:$,opacity:1},area:{type:"square",align:I,width:15,height:15}});const Zh=Jh;var Qh=function(t){function e(){t.call(this),this._registry=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.register=function(t,e){this._registry.push({type:t,seriesTypes:e})},e.prototype.create=function(t,e,n){for(var i,r=this._registry,o=r[0],s=0;s<r.length;s++){var a=r[s];i=_a(t,a.seriesTypes);var l=_a(t,Ps);if(i.length-l.length>0){o=a;break}}return new o.type(i,e,n)},e}(Nt.A);Qh.current=new Qh;const tu=Qh;function eu(t){var e=document.createElement("div");return t&&(e.className=t),e}function nu(t){for(var e=t;e&&!_t(e,"k-handle");)e=e.parentNode;return e}var iu=function(t){function e(e,n,i,r){t.call(this);var o=e.element;this.options=st({},this.options,i),this.chart=e,this.observer=r,this.chartElement=o,this.categoryAxis=n,this._dateAxis=this.categoryAxis instanceof Ur,this.initOptions(),this.visible=this.options.visible&&o.offsetHeight,this.visible&&(this.createElements(),this.set(this._index(this.options.from),this._index(this.options.to)),this.bindEvents())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onPane=function(t){return this.categoryAxis.pane===t},e.prototype.createElements=function(){var t=this.options,e=this.wrapper=eu("k-selector k-pointer-events-none");ut(e,{top:t.offset.top,left:t.offset.left,width:t.width,height:t.height,direction:"ltr"});var n=this.selection=eu("k-selection k-pointer-events-none");this.leftMask=eu("k-mask k-pointer-events-none"),this.rightMask=eu("k-mask k-pointer-events-none"),e.appendChild(this.leftMask),e.appendChild(this.rightMask),e.appendChild(n);var i=this.body=eu("k-selection-bg k-pointer-events-none");n.appendChild(i);var r=this.leftHandle=eu("k-handle k-left-handle k-pointer-events-auto"),o=this.rightHandle=eu("k-handle k-right-handle k-pointer-events-auto");r.appendChild(eu()),o.appendChild(eu()),n.appendChild(r),n.appendChild(o),this.chartElement.appendChild(e);var s=ut(n,["borderLeftWidth","borderRightWidth","height"]),a=ut(r,"height").height,l=ut(o,"height").height;t.selection={border:{left:s.borderLeftWidth,right:s.borderRightWidth}},ut(r,{top:(s.height-a)/2}),ut(o,{top:(s.height-l)/2}),e.style.cssText=e.style.cssText},e.prototype.bindEvents=function(){var t;!1!==this.options.mousewheel&&(this._mousewheelHandler=this._mousewheel.bind(this),$t(this.chartElement,((t={})[sa]=this._mousewheelHandler,t))),this._domEvents=qi.create(this.chartElement,{stopPropagation:!0,start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),press:this._press.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)})},e.prototype.initOptions=function(){var t=this.options,e=this.categoryAxis.pane.chartsBox(),n=this.chart.chartService.intl;this._dateAxis&&st(t,{min:Er(n,t.min),max:Er(n,t.max),from:Er(n,t.from),to:Er(n,t.to)});var i=ut(this.chartElement,["paddingLeft","paddingTop"]),r=i.paddingLeft,o=i.paddingTop;this.options=st({},{width:e.width(),height:e.height()+.1,padding:{left:r,top:o},offset:{left:e.x1+r,top:e.y1+o},from:t.min,to:t.max},t)},e.prototype.destroy=function(){var t;this._domEvents&&(this._domEvents.destroy(),delete this._domEvents),clearTimeout(this._mwTimeout),this._state=null,this.wrapper&&(this._mousewheelHandler&&(te(this.chartElement,((t={})[sa]=this._mousewheelHandler,t)),this._mousewheelHandler=null),this.chartElement.removeChild(this.wrapper),this.wrapper=null)},e.prototype._rangeEventArgs=function(t){return{axis:this.categoryAxis.options,from:this._value(t.from),to:this._value(t.to)}},e.prototype._pointInPane=function(t,e){var n=this.categoryAxis.pane.box,i=this.chart._toModelCoordinates(t,e);return n.containsPoint(i)},e.prototype._start=function(t){var e=this.options,n=Kt(t);if(!this._state&&n){var i=qt(t);if(this._pointInPane(i.x,i.y)){var r=nu(n),o=this.body.getBoundingClientRect(),s=!r&&i.x>=o.x&&i.x<=o.x+o.width&&i.y>=o.y&&i.y<=o.y+o.height;this.chart._unsetActivePoint(),this._state={moveTarget:r,startLocation:t.x?t.x.location:0,inBody:s,range:{from:this._index(e.from),to:this._index(e.to)}};var a=this._rangeEventArgs({from:this._index(e.from),to:this._index(e.to)});this.trigger(Xs,a)&&(this._state=null)}}},e.prototype._press=function(t){var e;(e=this._state?this._state.moveTarget:nu(Kt(t)))&&V(e,"k-handle-active")},e.prototype._move=function(t){if(this._state){var e=this,n=e._state,i=e.options,r=e.categoryAxis,o=n.range,s=n.moveTarget,a=r.options.reverse,l=this._index(i.from),c=this._index(i.to),h=this._index(i.min),u=this._index(i.max),d=n.startLocation-t.x.location,p=o.from,f=o.to,g=o.to-o.from,m=ut(this.wrapper,"width").width/(r.categoriesCount()-1),y=Math.round(d/m)*(a?-1:1);if(s||n.inBody){var v=s&&_t(s,"k-left-handle"),b=s&&_t(s,"k-right-handle");n.inBody?(o.from=Math.min(Math.max(h,l-y),u-g),o.to=Math.min(o.from+g,u)):v&&!a||b&&a?(o.from=Math.min(Math.max(h,l-y),u-1),o.to=Math.max(o.from+1,o.to)):(v&&a||b&&!a)&&(o.to=Math.min(Math.max(h+1,c-y),u),o.from=Math.min(o.to-1,o.from)),o.from===p&&o.to===f||(this.move(o.from,o.to),this.trigger(Gs,this._rangeEventArgs(o)))}}},e.prototype._end=function(){if(this._state){var t=this._state.moveTarget;t&&q(t,"k-handle-active");var e=this._state.range;this.set(e.from,e.to),this.trigger(Ys,this._rangeEventArgs(e)),delete this._state}},e.prototype._tap=function(t){var e=this.options,n=this.categoryAxis,i=this.chart._eventCoordinates(t),r=n.pointCategoryIndex(new Cn(i.x,n.box.y1)),o=this._index(e.from),s=this._index(e.to),a=this._index(e.min),l=this._index(e.max),c=s-o,h=o+c/2,u={},d=3===t.event.which,p=Math.round(h-r);this._state||d||(this.chart._unsetActivePoint(),n.options.justified||p--,u.from=Math.min(Math.max(a,o-p),l-c),u.to=Math.min(u.from+c,l),this._start(t),this._state&&(this._state.range=u,this.trigger(Gs,this._rangeEventArgs(u)),this._end()))},e.prototype._mousewheel=function(t){var e=this,n=Rt(t);if(this._start(t),this._state){var i=this._state.range;t.preventDefault(),t.stopPropagation(),Math.abs(n)>1&&(n*=3),this.options.mousewheel.reverse&&(n*=-1),this.expand(n)&&this.trigger(Gs,{axis:this.categoryAxis.options,delta:n,originalEvent:t,from:this._value(i.from),to:this._value(i.to)}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._end()}),150)}},e.prototype._gesturestart=function(t){var e=this.options,n=t.touches[0];if(this._pointInPane(n.pageX,n.pageY)){this._state={range:{from:this._index(e.from),to:this._index(e.to)}};var i=this._rangeEventArgs(this._state.range);this.trigger(Xs,i)?this._state=null:t.preventDefault()}},e.prototype._gestureend=function(){this._state&&(this.trigger(Ys,this._rangeEventArgs(this._state.range)),delete this._state)},e.prototype._gesturechange=function(t){if(this._state){var e=this,n=e.chart,i=e._state,r=e.options,o=e.categoryAxis,s=i.range,a=n._toModelCoordinates(t.touches[0].x.location).x,l=n._toModelCoordinates(t.touches[1].x.location).x,c=Math.min(a,l),h=Math.max(a,l);t.preventDefault(),s.from=o.pointCategoryIndex(new Cn(c))||r.min,s.to=o.pointCategoryIndex(new Cn(h))||r.max,this.move(s.from,s.to),this.trigger(Gs,this._rangeEventArgs(s))}},e.prototype._index=function(t){var e=t;return t instanceof Date&&(e=this.categoryAxis.categoryIndex(t)),e},e.prototype._value=function(t){var e=t;return this._dateAxis&&(e=this.categoryAxis.categoryAt(t))>this.options.max&&(e=this.options.max),e},e.prototype._slot=function(t){var e=this.categoryAxis,n=this._index(t);return e.getSlot(n,n,!0)},e.prototype.move=function(t,e){var n=this.options,i=this.categoryAxis.options.reverse,r=n.offset,o=n.padding,s=n.selection.border,a=i?e:t,l=i?t:e,c="x"+(i?2:1),h=this._slot(a),u=Qt(h[c]-r.left+o.left);ut(this.leftMask,{width:u}),ut(this.selection,{left:u}),h=this._slot(l);var d=Qt(n.width-(h[c]-r.left+o.left));ut(this.rightMask,{width:d});var p=n.width-d;p!==n.width&&(p+=s.right),ut(this.rightMask,{left:p}),ut(this.selection,{width:Math.max(n.width-(u+d)-s.right,0)})},e.prototype.set=function(t,e){var n=this.options,i=this._index(n.min),r=this._index(n.max),o=Yt(this._index(t),i,r),s=Yt(this._index(e),o+1,r);n.visible&&this.move(o,s),n.from=this._value(o),n.to=this._value(s)},e.prototype.expand=function(t){var e=this.options,n=this._index(e.min),i=this._index(e.max),r=e.mousewheel.zoom,o=this._index(e.from),s=this._index(e.to),a={from:o,to:s},l=st({},a);if(this._state&&(a=this._state.range),r!==I&&(a.from=Yt(Yt(o-t,0,s-1),n,i)),r!==k&&(a.to=Yt(Yt(s+t,a.from+1,i),n,i)),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.zoom=function(t,e){var n=this.options,i=this._index(n.min),r=this._index(n.max),o=this._index(n.from),s=this._index(n.to),a={from:o,to:s},l=st({},a),c=this.categoryAxis.options.reverse,h=j+(c?"2":"1"),u=this.categoryAxis.lineBox(),d=Math.abs(u[h]-e[j]),p=u.width(),f=Qt(d/p,2),g=Qt(f*t),m=Qt((1-f)*t);if(this._state&&(a=this._state.range),a.from=Yt(Yt(o-g,0,s-1),i,r),a.to=Yt(Yt(s+m,a.from+1,r),i,r),a.from!==l.from||a.to!==l.to)return this.set(a.from,a.to),!0},e.prototype.trigger=function(t,e){return(this.observer||this.chart).trigger(t,e)},e}(Nt.A);re(iu,{visible:!0,mousewheel:{zoom:"both"},min:E,max:A});const ru=iu;var ou=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.show=function(e){if(e&&e.tooltipAnchor&&(!this._current||this._current!==e)){var n=st({},this.options,e.options.tooltip),i=e.tooltipAnchor();i?(this._current=e,t.prototype.show.call(this,{point:e,anchor:i},n,e)):this.hide()}},e.prototype.hide=function(){delete this._current,t.prototype.hide.call(this)},e}(Yl);const su=ou;var au=function(t){function e(e,n){t.call(this,e.chartService,n),this.plotArea=e,this.formatService=e.chartService.format}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.showAt=function(t,e){var n=xt(t,(function(t){var e=t.series.tooltip;return!(e&&!1===e.visible)}));if(n.length>0){var i=n[0],r=this.plotArea.categoryAxis.getSlot(i.categoryIx),o=e?this._slotAnchor(e,r):this._defaultAnchor(i,r);this.show({anchor:o,shared:!0,points:t,category:i.category,categoryText:this.formatService.auto(this.options.categoryFormat,i.category),series:this.plotArea.series},this.options)}},e.prototype._slotAnchor=function(t,e){return this.plotArea.categoryAxis.options.vertical||(t.x=e.center().x),{point:t,align:{horizontal:"left",vertical:"center"}}},e.prototype._defaultAnchor=function(t,e){var n=t.owner.pane.chartsBox(),i=this.plotArea.categoryAxis.options.vertical,r=n.center(),o=e.center();return{point:i?new Cn(r.x,o.y):new Cn(o.x,r.y),align:{horizontal:"center",vertical:"center"}}},e}(Yl);re(au,{categoryFormat:"{0:d}"});const lu=au;var cu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.element,e=this.options;if(t.bbox()){this.origin=e.origin;var n=e.vertical?z:j,i=this.fromScale=new Pn.A(1,1);i[n]=zo,t.transform($n.A().scale(i.x,i.y))}else this.abort()},e.prototype.step=function(t){var e=Et(this.fromScale.x,1,t),n=Et(this.fromScale.y,1,t);this.element.transform($n.A().scale(e,n,this.origin))},e.prototype.abort=function(){t.prototype.abort.call(this),this.element.transform(null)},e}(Qn);re(cu,{duration:No}),Jn.current.register(Yo,cu);var hu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.center=this.element.bbox().center();this.element.transform($n.A().scale(zo,zo,t))},e.prototype.step=function(t){this.element.transform($n.A().scale(t,t,this.center))},e}(Qn);re(hu,{easing:"easeOutElastic"}),Jn.current.register(Zo,hu);var uu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.fadeTo=this.element.opacity(),this.element.opacity(0)},e.prototype.step=function(t){this.element.opacity(t*this.fadeTo)},e}(Qn);re(uu,{duration:200,easing:"linear"}),Jn.current.register(Bo,uu);var du=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this.element.transform($n.A().scale(zo,zo,this.options.center))},e.prototype.step=function(t){this.element.transform($n.A().scale(t,t,this.options.center))},e}(Qn);re(du,{easing:"easeOutElastic",duration:No}),Jn.current.register(cs,du);const pu=du;var fu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){t.prototype.render.call(this),this.renderSegments()},e.prototype.createSegment=function(t,e,n){return new(e.style===Ko?Xa:$a)(t,e,n)},e.prototype.animationPoints=function(){return t.prototype.animationPoints.call(this).concat(this._segments)},e.prototype.createMissingValue=function(t,e){if(e===Uo){var n={x:t.x,y:t.y};return Aa(n.x)||(n.x=0),Aa(n.y)||(n.y=0),n}},e}(Bl);st(fu.prototype,Ya);const gu=fu;const mu=function(t,e,n){var i=[],r=e.xMin,o=e.xMax,s=(n||{}).forecast;s&&(s.before>0&&(r-=s.before),s.after>0&&(o+=s.after));var a=(n||{}).samplingInterval,l=ee(a,Sn(r,o)/10);a<=0&&(l=o-r);for(var c=r;c<=o;c+=l)i.push([c,t(c)]);return i};var yu=function(t){return function(e){var n=e.valueFields;return{xValue:n.x,yValue:Math.log(n[t])}}};const vu=function(t){var e=t.options,n=function(t){var e=t.seriesValues,n=t.options,i=e();if(!qc(i,n.field))return null;var r=Wc(i,yu(n.field)),o=r.slope,s=r.intercept,a=r.count,l=r.xMin,c=r.xMax,h={xMin:l,xMax:c};if(a>0){var u=Math.exp(s),d=o;return mu((function(t){return u*Math.exp(d*t)}),h,n.trendline)}return null}({seriesValues:t.seriesValues,options:e});return n?Object.assign({},e,{type:"scatterLine",data:n}):null};const bu=function(t){return function(e){var n=e.valueFields;return{xValue:n.x,yValue:n[t]}}};const wu=function(t){var e=t.options,n=function(t){var e=t.seriesValues,n=t.options,i=Wc(e(),bu(n.field)),r=i.slope,o=i.intercept,s=i.count,a=i.xMin,l=i.xMax,c={xMin:a,xMax:l};if(s>0)return mu((function(t){return r*t+o}),c,n.trendline);return null}({seriesValues:t.seriesValues,options:e});return n?Object.assign({},e,{type:"scatterLine",data:n}):null};const xu=function(t,e){for(var n=Number.MAX_VALUE,i=Number.MIN_VALUE,r=0;r<t.length;r++){var o=e(t[r]),s=o.xValue,a=o.yValue;isFinite(s)&&null!==s&&isFinite(a)&&null!==a&&(n=Math.min(s,n),i=Math.max(s,i))}return{xMin:n,xMax:i}};var _u=function(t){return function(e){var n=e.valueFields;return{xValue:n.x,yValue:n[t]}}},Su=function(t){return function(e){var n=e.valueFields;return{xValue:Math.log(n.x),yValue:n[t]}}};const Cu=function(t){var e=t.options,n=function(t){var e=t.seriesValues,n=t.options,i=e();if(!qc(i,"x"))return null;var r=Wc(i,Su(n.field)),o=r.slope,s=r.intercept,a=r.count,l=xu(i,_u(n.field));if(a>0){var c=o,h=s;return mu((function(t){return c*Math.log(t)+h}),l,n.trendline)}return null}({seriesValues:t.seriesValues,options:e});return n?Object.assign({},e,{type:"scatterLine",data:n}):null};const ku=function(t){var e=t.options,n=function(t){var e=t.options,n=t.seriesValues,i=(e.trendline||{}).period||la,r=th(n({before:i,after:i}),bu(e.field),i);if(r.length>0)return r;return null}(t);return n?Object.assign({},e,{type:"scatterLine",data:n}):null};const Au=function(t){var e=t.options,n=function(t){var e=t.seriesValues,n=t.options,i=(n.trendline||{}).order,r=bu(n.field),o=ih(e(),r,i),s=o.count,a=o.valueMapper,l=o.xMin,c=o.xMax,h={xMin:l,xMax:c};if(s>0)return mu(a,h,n.trendline);return null}({seriesValues:t.seriesValues,options:e});return n?Object.assign({},e,{type:"scatterLine",data:n}):null};var Eu=function(t){return function(e){var n=e.valueFields;return{xValue:Math.log(n.x),yValue:Math.log(n[t])}}};const Tu=function(t){var e=t.options,n=function(t){var e=t.seriesValues,n=t.options,i=e();if(!qc(i,"x"))return null;var r=Wc(i,Eu(n.field)),o=r.slope,s=r.intercept,a=r.count,l=xu(i,bu(n.field));if(a>0){var c=Math.exp(s),h=o;return mu((function(t){return c*Math.pow(t,h)}),l,n.trendline)}return null}({seriesValues:t.seriesValues,options:e});return n?Object.assign({},e,{type:"scatterLine",data:n}):null};var Mu={};Mu[Ts]=vu,Mu[Ms]=wu,Mu[Os]=Cu,Mu[Is]=ku,Mu[Ds]=Au,Mu[Fs]=Tu;const Ou=Mu;var Iu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={},this.xAxisRangeTracker=new ul,this.yAxisRangeTracker=new ul},e.prototype.render=function(t){var e=this;void 0===t&&(t=this.panes),this.series=[].concat(this.originalSeries),this.createTrendlineSeries();for(var n=this.groupSeriesByPane(),i=0;i<t.length;i++){var r=t[i],o=n[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&(e.createScatterChart(_a(s,bs),r),e.createScatterLineChart(_a(s,ws),r),e.createBubbleChart(_a(s,Zo),r))}this.createAxes(t)},e.prototype.appendChart=function(e,n){this.xAxisRangeTracker.update(e.xAxisRanges),this.yAxisRangeTracker.update(e.yAxisRanges),t.prototype.appendChart.call(this,e,n)},e.prototype.removeAxis=function(e){var n=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?(this.yAxisRangeTracker.reset(n),delete this.namedYAxes[n]):(this.xAxisRangeTracker.reset(n),delete this.namedXAxes[n]),e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype.seriesPaneName=function(t){var e=this.options,n=t.xAxis,i=xt([].concat(e.xAxis),(function(t){return t.name===n}))[0],r=t.yAxis,o=xt([].concat(e.yAxis),(function(t){return t.name===r}))[0],s=(e.panes||[{}])[0].name||"default";return(i||{}).pane||(o||{}).pane||s},e.prototype.createScatterChart=function(t,e){t.length>0&&this.appendChart(new Bl(this,{series:t,clip:e.options.clip}),e)},e.prototype.createScatterLineChart=function(t,e){t.length>0&&this.appendChart(new gu(this,{series:t,clip:e.options.clip}),e)},e.prototype.createBubbleChart=function(t,e){t.length>0&&this.appendChart(new Hl(this,{series:t,clip:e.options.clip}),e)},e.prototype.createXYAxis=function(t,e,n){for(var i,r=t.name,o=e?this.namedYAxes:this.namedXAxes,s=e?this.yAxisRangeTracker:this.xAxisRangeTracker,a=st({reverse:!e&&this.chartService.rtl},t,{vertical:e}),l=ba(a.type,na),c=s.query(),h=l?{min:.1,max:1}:{min:0,max:1},u=s.query(r)||c||h,d=[a.min,a.max],p=this.series,f=0;f<p.length;f++){var g=p[f],m=g[e?"yAxis":"xAxis"];if(m===a.name||0===n&&!m){var v=Io.current.bindPoint(g,0).valueFields;d.push(v[e?"y":"x"]);break}}0===n&&c&&(u.min=Math.min(u.min,c.min),u.max=Math.max(u.max,c.max));for(var b=0;b<d.length;b++)if(d[b]instanceof Date){i=!0;break}var w=new(ba(a.type,y)||!a.type&&i?Zr:l?io:Yr)(u.min,u.max,a,this.chartService);if(w.axisIndex=n,r){if(o[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");o[r]=w}return this.appendAxis(w),w},e.prototype.createAxes=function(t){for(var e=this,n=this.options,i=[].concat(n.xAxis),r=[],o=[].concat(n.yAxis),s=[],a=0;a<i.length;a++){kt(e.findPane(i[a].pane),t)&&r.push(e.createXYAxis(i[a],!1,a))}for(var l=0;l<o.length;l++){kt(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||s[0]},e.prototype._dispatchEvent=function(t,e,n){for(var i=t._eventCoordinates(e),r=new Cn(i.x,i.y),o=this.axes,s=o.length,a=[],l=[],c=0;c<s;c++){var h=o[c],u=h.options.vertical?l:a,d=h.getValue(r);null!==d&&u.push(d)}a.length>0&&l.length>0&&t.trigger(n,{element:Kt(e),originalEvent:e,x:Ta(a),y:Ta(l)})},e.prototype.updateAxisOptions=function(t,e){var n=t.options.vertical,i=this.groupAxes(this.panes),r=(n?i.y:i.x).indexOf(t);Du(this.options,r,n,e),Du(this.originalOptions,r,n,e)},e.prototype.trendlineFactory=function(t,e){var n=this.seriesValues.bind(this,e.index),i=Vc(Ou,t.type,{options:t,seriesValues:n});return i&&(i.xAxis=e.xAxis,i.yAxis=e.yAxis),i},e.prototype.seriesValues=function(t){for(var e=[],n=this.series[t],i=0;i<n.data.length;i++){var r=this.bindPoint(n,i);e.push({pointIx:i,valueFields:r.valueFields})}return e},e}(uc);function Du(t,e,n,i){st([].concat(n?t.yAxis:t.xAxis)[e],i)}re(Iu,{xAxis:{},yAxis:{}}),st(Iu.prototype,pc);const Fu=Iu;var Pu=function(t){function e(e,n,i){t.call(this,i),this.value=e,this.sector=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||!1===this.visible||(this._rendered=!0,this.createLabel())},e.prototype.createLabel=function(){var t=this.options.labels,e=this.owner.chartService,n=this.getLabelText(t);if(t.visible&&(n||0===n)){if(t.position===p||t.position===ra)t.color||(t.color=_e(this.options.color)),t.background||(t.background=this.options.color);else{var i=e.theme.seriesDefaults.labels;t.color=t.color||i.color,t.background=t.background||i.background}this.label=new Ci(n,st({},t,{align:p,vAlign:"",animation:{type:Bo,delay:this.animationDelay}}),this.pointData()),this.append(this.label)}},e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):this.owner.chartService.format.auto(t.format,this.value)},e.prototype.reflow=function(t){this.render(),this.box=t,this.reflowLabel()},e.prototype.reflowLabel=function(){var t=this.options.labels,e=this.label,n=this.sector.clone(),i=t.distance,r=n.middle();if(e){var o,s=e.box.height(),a=e.box.width();if(t.position===p)n.radius=Math.abs((n.radius-s)/2)+s,o=n.point(r),e.reflow(new Tn(o.x,o.y-s/2,o.x,o.y));else if(t.position===ra)n.radius=n.radius-s/2,o=n.point(r),e.reflow(new Tn(o.x,o.y-s/2,o.x,o.y));else{var l;(o=n.clone().expand(i).point(r)).x>=n.center.x?(l=o.x+a,e.orientation=I):(l=o.x-a,e.orientation=k),e.reflow(new Tn(l,o.y-s,o.x,o.y))}}},e.prototype.createVisual=function(){var e=this,n=this.sector,i=this.options;if(t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual(),this.value)if(i.visual){var r=(n.startAngle+180)%360,o=i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,center:new Pn.A(n.center.x,n.center.y),radius:n.radius,innerRadius:n.innerRadius,startAngle:r,endAngle:r+n.angle,options:i,sender:this.getSender(),createVisual:function(){var t=new Hn.A;return e.createSegmentVisual(t),t}});o&&this.visual.append(o)}else this.createSegmentVisual(this.visual)},e.prototype.createSegmentVisual=function(t){var e=this.sector,n=this.options,i=n.border||{},r=i.width>0?{stroke:{color:i.color,width:i.width,opacity:i.opacity,dashType:i.dashType}}:{},o=n.color,s={color:o,opacity:n.opacity},a=this.createSegment(e,st({fill:s,stroke:{opacity:n.opacity},zIndex:n.zIndex},r));t.append(a),ka(n)&&t.append(this.createGradientOverlay(a,{baseColor:o,fallbackFill:s},st({center:[e.center.x,e.center.y],innerRadius:e.innerRadius,radius:e.radius,userSpace:!0},n.overlay)))},e.prototype.createSegment=function(t,e){return e.singleSegment?new jn.A(new zn.A(new Pn.A(t.center.x,t.center.y),t.radius),e):Bn.current.createRing(t,e)},e.prototype.createAnimation=function(){var e=this.options,n=this.sector.center;st(e,{animation:{center:[n.x,n.y],delay:this.animationDelay}}),t.prototype.createAnimation.call(this)},e.prototype.createHighlight=function(t){var e=this.options.highlight||{},n=e.border||{};return this.createSegment(this.sector,st({},t,{fill:{color:e.color,opacity:e.opacity},stroke:{opacity:n.opacity,width:n.width,color:n.color}}))},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=this.sector;return{options:this.options,radius:t.radius,innerRadius:t.innerRadius,center:new Pn.A(t.center.x,t.center.y),startAngle:t.startAngle,endAngle:t.angle+t.startAngle,visual:this.visual}},e.prototype.createFocusHighlight=function(t){var e=this.options.accessibility.highlight.border.width,n=this.createSegment(this.sector,st({},t,{stroke:{width:2*e}})),i=new Ln.P;return i.paths.push(Ln.w.fromRect(n.bbox())),i.paths.push(this.createSegment(this.sector,{})),n.clip(i),n},e.prototype.tooltipAnchor=function(){var t=this.sector.clone().expand(5),e=t.middle();return{point:t.point(e),align:Nu(e+180)}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e.prototype.getIndex=function(){return this.index},e}(ei),Ru=Qt(Zt(30),b),Lu=Qt(Zt(60),b);function Nu(t){var e=Zt(t),n=Qt(Math.sin(e),b),i=Qt(Math.cos(e),b);return{horizontal:Math.abs(n)>Lu?p:i<0?I:k,vertical:Math.abs(n)<Ru?p:n<0?d:R}}re(Pu,{color:N,overlay:{gradient:"roundedBevel"},border:{width:.5},labels:{visible:!1,distance:35,font:v,margin:dt(.5),align:f,zIndex:1,position:oa},animation:{type:cs},highlight:{visible:!0,border:{width:1}},visible:!0,accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}}),st(Pu.prototype,La),st(Pu.prototype,fl);const Bu=Pu;var ju={createLegendItem:function(t,e,n){var i=this.options.legend||{},r=i.labels||{},o=i.inactiveItems||{},s=o.labels||{};if(n&&!1!==n.visibleInLegend){var a,l,c=!1!==n.visible,h=c?mt(r):mt(s)||mt(r),u=n.category;h&&(u=h({text:u,series:n.series,dataItem:n.dataItem,percentage:n.percentage,value:t})),c?(a={},l=e.color):(a={color:s.color,font:s.font},l=(o.markers||{}).color),Aa(u)&&""!==u&&this.legendItems.push({active:c,pointIndex:n.index,text:u,series:n.series,markerColor:l,labels:a})}}};const zu=ju;var $u=function(t){function e(e,n){t.call(this,n),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.traverseDataPoints(this.addValue.bind(this))},e.prototype.traverseDataPoints=function(t){var e=this.options,n=this.plotArea.options.seriesColors;void 0===n&&(n=[]);for(var i=n.length,r=e.series,o=r.length,s=0;s<o;s++){var a=r[s],l=a.data,c=ya(a),h=c.total,u=c.points,d=c.count,f=360/h,g=void 0;isFinite(f)||(g=360/d);var m=void 0;m=Ht(a.startAngle)?a.startAngle:e.startAngle,s!==o-1&&a.labels.position===oa&&(a.labels.position=p);for(var y=0;y<u.length;y++){var v=u[y];if(v){var b=v.fields,w=v.value,x=v.visible,_=0!==w?g||w*f:0,S=1!==l.length&&Boolean(b.explode);nt(a.color)||(a.color=b.color||n[y%i]),t(w,new In(null,0,0,m,_),{owner:this,category:Ht(b.category)?b.category:"",index:y,series:a,seriesIx:s,dataItem:l[y],percentage:0!==h?w/h:0,explode:S,visibleInLegend:b.visibleInLegend,visible:x,zIndex:o-s,animationDelay:this.animationDelay(y,s,o)}),!1!==x&&(m+=_)}}}},e.prototype.evalSegmentOptions=function(t,e,n){var i=n.series;xa(t,{value:e,series:i,dataItem:n.dataItem,category:n.category,percentage:n.percentage},{defaults:i._defaults,excluded:["data","content","template","visual","toggle","ariaTemplate","ariaContent"]})},e.prototype.addValue=function(t,e,n){var i=st({},n.series,{index:n.index});if(this.evalSegmentOptions(i,t,n),this.createLegendItem(t,i,n),!1!==n.visible){var r=new Bu(t,e,i);Object.assign(r,n),this.append(r),this.points.push(r)}},e.prototype.reflow=function(t){var e=this,n=e.options,i=e.points,r=e.seriesConfigs;void 0===r&&(r=[]);var o=i.length,s=t.clone(),a=Math.min(s.width(),s.height()),l=a/2,c=a-.85*a,h=new Tn(s.x1,s.y1,s.x1+a,s.y1+a),u=h.center(),d=s.center(),p=n.series.length,f=[],g=[],m=ee(n.padding,c);this.targetBox=t,m=m>l-5?l-5:m,h.translate(d.x-u.x,d.y-u.y);for(var y=l-m,v=new Cn(y+h.x1+m,y+h.y1+m),b=0;b<o;b++){var w=i[b],x=w.sector,_=w.seriesIx;if(x.radius=y,x.center=v,r.length){var S=r[_];x.innerRadius=S.innerRadius,x.radius=S.radius}_===p-1&&w.explode&&(x.center=x.clone().setRadius(.15*x.radius).point(x.middle())),w.reflow(h);var C=w.label;C&&C.options.position===oa&&_===p-1&&(C.orientation===I?g.push(C):f.push(C))}f.length>0&&(f.sort(this.labelComparator(!0)),this.leftLabelsReflow(f)),g.length>0&&(g.sort(this.labelComparator(!1)),this.rightLabelsReflow(g)),this.box=h},e.prototype.leftLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.rightLabelsReflow=function(t){var e=this.distanceBetweenLabels(t);this.distributeLabels(e,t)},e.prototype.distanceBetweenLabels=function(t){var e=Gt(this.points),n=e.sector,i=t.length-1,r=n.radius+e.options.labels.distance,o=[],s=t[0].box,a=Qt(s.y1-(n.center.y-r-s.height()-s.height()/2));o.push(a);for(var l=0;l<i;l++){var c=t[l+1].box;s=t[l].box,a=Qt(c.y1-s.y2),o.push(a)}return a=Qt(n.center.y+r-t[i].box.y2-t[i].box.height()/2),o.push(a),o},e.prototype.distributeLabels=function(t,e){for(var n,i,r,o=t.length,s=0;s<o;s++)for(r=-t[s],n=i=s;r>0&&(n>=0||i<o);)r=this._takeDistance(t,s,--n,r),r=this._takeDistance(t,s,++i,r);this.reflowLabels(t,e)},e.prototype._takeDistance=function(t,e,n,i){var r=i;if(t[n]>0){var o=Math.min(t[n],r);r-=o,t[n]-=o,t[e]+=o}return r},e.prototype.reflowLabels=function(t,e){var n,i=Gt(this.points),r=i.sector,o=i.options.labels,s=e.length,a=o.distance,l=r.center.y-(r.radius+a)-e[0].box.height();t[0]+=2;for(var c=0;c<s;c++){var h=e[c],u=h.box;l+=t[c],n=this.hAlignLabel(u.x2,r.clone().expand(a),l,l+u.height(),h.orientation===I),h.orientation===I?(o.align!==f&&(n=r.radius+r.center.x+a),h.reflow(new Tn(n+u.width(),l,n,l))):(o.align!==f&&(n=r.center.x-r.radius-a),h.reflow(new Tn(n-u.width(),l,n,l))),l+=u.height()}},e.prototype.createVisual=function(){var e=this,n=this.options.connectors,i=this.points,r=i.length;t.prototype.createVisual.call(this),this._connectorLines=[];for(var o=0;o<r;o++){var s=i[o],a=s.sector,l=s.label,c=a.middle(),h=(s.options.connectors||{}).color||n.color;if(l){var u=new Ln.w({stroke:{color:h,width:n.width},animation:{type:Bo,delay:s.animationDelay}});if(l.options.position===oa){var d=l.box,p=a.center,f=a.point(c),g=new Cn(d.x1,d.center().y),m=void 0,y=void 0,v=void 0;f=a.clone().expand(n.padding).point(c),u.moveTo(f.x,f.y),l.orientation===I?(v=Hu(p,f,g,y=new Cn(d.x1-n.padding,d.center().y)),g=new Cn(y.x-4,y.y),(v=v||g).x=Math.min(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x<a.center.x?(m=a.center.x+a.radius+4,s.options.labels.align!==es?m<g.x?u.lineTo(m,f.y):u.lineTo(f.x+8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))):(v=Hu(p,f,g,y=new Cn(d.x2+n.padding,d.center().y)),g=new Cn(y.x+4,y.y),(v=v||g).x=Math.max(v.x,g.x),e.pointInCircle(v,a.center,a.radius+4)||v.x>a.center.x?(m=a.center.x-a.radius-4,s.options.labels.align!==es?m>g.x?u.lineTo(m,f.y):u.lineTo(f.x-8,f.y):u.lineTo(m,f.y),u.lineTo(g.x,y.y)):(v.y=y.y,u.lineTo(v.x,v.y))),u.lineTo(y.x,y.y),e._connectorLines.push(u),e.visual.append(u)}}}},e.prototype.renderVisual=function(){if(t.prototype.renderVisual.call(this),pe(this.options.series,(function(t){return t.autoFit}))){var e=this.targetBox,n=this.box.center(),i=this.visual.bbox();if(!i)return;var r=i.bottomRight(),o=Math.min((n.y-e.y1)/(n.y-i.origin.y),(e.y2-n.y)/(r.y-n.y),(n.x-e.x1)/(n.x-i.origin.x),(e.x2-n.x)/(r.x-n.x));o<1&&this.visual.transform($n.A().scale(o,o,[n.x,n.y]))}},e.prototype.labelComparator=function(t){var e=t?-1:1;return function(t,n){return((t.parent.sector.middle()+270)%360-(n.parent.sector.middle()+270)%360)*e}},e.prototype.hAlignLabel=function(t,e,n,i,r){var o=e.radius,s=e.center,a=s.x,l=s.y,c=Math.min(Math.abs(l-n),Math.abs(l-i));return c>o?t:a+Math.sqrt(o*o-c*c)*(r?1:-1)},e.prototype.pointInCircle=function(t,e,n){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(n,2)},e.prototype.formatPointValue=function(t,e){return this.chartService.format.auto(e,t.value)},e.prototype.animationDelay=function(t){return 70*t},e.prototype.stackRoot=function(){return this},e}(ei);function Hu(t,e,n,i){var r,o=(i.x-n.x)*(t.y-n.y)-(i.y-n.y)*(t.x-n.x),s=(i.y-n.y)*(e.x-t.x)-(i.x-n.x)*(e.y-t.y);if(0!==s){var a=o/s;r=new Cn(t.x+a*(e.x-t.x),t.y+a*(e.y-t.y))}return r}re($u,{startAngle:90,connectors:{width:2,color:"#939393",padding:8},inactiveItems:{markers:{},labels:{}}}),st($u.prototype,zu),$u.prototype.isStackRoot=!0;const Uu=$u;var Vu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createPieChart(this.series)},e.prototype.createPieChart=function(t){var e=t[0],n=new Uu(this,{series:t,padding:e.padding,startAngle:e.startAngle,connectors:e.connectors,legend:this.options.legend});this.appendChart(n)},e.prototype.appendChart=function(e,n){t.prototype.appendChart.call(this,e,n),zt(this.options.legend.data,e.legendItems)},e.prototype.getPointBelow=function(t){return this.getPointToTheRight(t)},e.prototype.getPointAbove=function(t){return this.getPointToTheLeft(t)},e}(uc);const Wu=Vu;var qu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflowLabel=function(){var e=this.options.labels,n=this.label,i=this.sector.clone(),r=i.middle();if(n){var o=n.box.height();if(e.position===p){i.radius-=(i.radius-i.innerRadius)/2;var s=i.point(r);n.reflow(new Tn(s.x,s.y-o/2,s.x,s.y))}else t.prototype.reflowLabel.call(this)}},e.prototype.createSegment=function(t,e){return Bn.current.createRing(t,e)},e}(Bu);re(qu,{overlay:{gradient:"roundedGlass"},labels:{position:p},animation:{type:cs}}),st(qu.prototype,La);const Ku=qu;var Xu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addValue=function(t,e,n){var i=st({},n.series,{index:n.index});if(this.evalSegmentOptions(i,t,n),this.createLegendItem(t,i,n),!1!==n.visible){var r=new Ku(t,e,i);Object.assign(r,n),this.append(r),this.points.push(r)}},e.prototype.reflow=function(e){for(var n,i=this.options,r=e.clone(),o=Math.min(r.width(),r.height()),s=o/2,a=o-.85*o,l=i.series,c=l.length,h=ee(i.padding,a),u=s-(h=h>s-5?s-5:h),d=0,p=0;p<c;p++){var f=l[p];0===p&&Ht(f.holeSize)&&(n=f.holeSize,u-=f.holeSize),Ht(f.size)?u-=f.size:d++,Ht(f.margin)&&p!==c-1&&(u-=f.margin)}Ht(n)||(u-=n=.75*((s-h)/(c+.75)));var g,m=n,y=0;this.seriesConfigs=[];for(var v=0;v<c;v++){var b=l[v];g=(m+=y)+ee(b.size,u/d),this.seriesConfigs.push({innerRadius:m,radius:g}),y=b.margin||0,m=g}t.prototype.reflow.call(this,e)},e.prototype.animationDelay=function(t,e,n){return 50*t+No*(e+1)/(n+1)},e}(Uu);re(Xu,{startAngle:90,connectors:{width:2,color:"#939393",padding:8}});const Gu=Xu;var Yu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createDonutChart(this.series)},e.prototype.createDonutChart=function(t){var e=t[0],n=new Gu(this,{series:t,padding:e.padding,connectors:e.connectors,legend:this.options.legend});this.appendChart(n)},e.prototype.getPointBelow=function(t){return this._getNextPoint(t,this._pointsByVertical,-1)},e.prototype.getPointAbove=function(t){return this._getNextPoint(t,this._pointsByVertical,1)},e}(Wu);const Ju=Yu;var Zu=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.valueAxisRangeTracker=new ul},e.prototype.render=function(){this.addToLegend(this.series),this.createPolarAxis(),this.createCharts(),this.createValueAxis()},e.prototype.alignAxes=function(){var t=this.valueAxis,e=t.range(),n=t.options.reverse?e.max:e.min,i=t.getSlot(n),r=this.polarAxis.getSlot(0).center,o=t.box.translate(r.x-i.x1,r.y-i.y1);t.reflow(o)},e.prototype.createValueAxis=function(){var t,e,n=this.valueAxisRangeTracker,i=n.query(),r=this.valueAxisOptions({roundToMajorUnit:!1,zIndex:-1});r.type===na?(t=mo,e={min:.1,max:1}):(t=fo,e={min:0,max:1});var o=n.query(name)||i||e;o&&i&&(o.min=Math.min(o.min,i.min),o.max=Math.max(o.max,i.max));var s=new t(o.min,o.max,r,this.chartService);this.valueAxis=s,this.appendAxis(s)},e.prototype.reflowAxes=function(){var t=this,e=t.options.plotArea,n=t.valueAxis,i=t.polarAxis,r=t.box,o=.15*Math.min(r.width(),r.height()),s=dt(e.padding||{},o),a=r.clone().unpad(s),l=a.clone();l.y2=l.y1+Math.min(l.width(),l.height()),l.align(a,z,p);var c=l.clone().shrink(0,l.height()/2);i.reflow(l),n.reflow(c);var h=n.lineBox().height()-n.box.height();n.reflow(n.box.unpad({top:h})),this.axisBox=l,this.alignAxes(l)},e.prototype.backgroundBox=function(){return this.box},e.prototype.detachLabels=function(){},e}(uc);const Qu=Zu;var td=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var n=t.center.y-e.y1,i=Cn.onCircle(t.center,t.startAngle,n);return new Tn(i.x,i.y,i.x,i.y)},e}(Bl);re(td,{clip:!1});const ed=td;var nd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(gu);nd.prototype.pointSlot=ed.prototype.pointSlot,re(nd,{clip:!1});const id=nd;var rd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this._polarAxisCenter();t.lineTo(e.x,e.y)},e.prototype._polarAxisCenter=function(){return this.parent.plotArea.polarAxis.box.center()},e.prototype.strokeSegments=function(){var t=this._strokeSegments;if(!t){var e=this._polarAxisCenter(),n=new bo(!1),i=this.points();i.push(e),(t=this._strokeSegments=n.process(i)).pop()}return t},e}(al);const od=rd;var sd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(t){var e=this.parent.plotArea.polarAxis.box.center(),n=new yo.A([e.x,e.y]);t.segments.unshift(n),t.segments.push(n)},e}(il);const ad=sd;var ld=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,n){return(e.line||{}).style===Ko?new od(t,e,n):new ad(t,e,n)},e.prototype.createMissingValue=function(t,e){var n;return Aa(t.x)&&e!==Vo&&(n={x:t.x,y:t.y},e===Uo&&(n.y=0)),n},e.prototype.seriesMissingValues=function(t){return t.missingValues||Uo},e.prototype._hasMissingValuesGap=function(){for(var t=this.options.series,e=0;e<t.length;e++)if("gap"===this.seriesMissingValues(t[e]))return!0},e.prototype.sortPoints=function(t){if(t.sort(cd),this._hasMissingValuesGap())for(var e=0;e<t.length;e++){var n=t[e];if(n)Aa(n.value.y)||"gap"!==this.seriesMissingValues(n.series)||delete t[e]}return t},e}(id);function cd(t,e){return t.value.x-e.value.x}const hd=ld;var ud=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new lo(this.options.xAxis,this.chartService);this.polarAxis=t,this.axisX=t,this.appendAxis(t)},e.prototype.render=function(){this.series=[].concat(this.originalSeries),this.createTrendlineSeries(),t.prototype.render.call(this)},e.prototype.valueAxisOptions=function(t){return st(t,{majorGridLines:{type:o},minorGridLines:{type:o}},this.options.yAxis)},e.prototype.createValueAxis=function(){t.prototype.createValueAxis.call(this),this.axisY=this.valueAxis},e.prototype.trendlineFactory=function(t,e){var n=Fu.prototype.trendlineFactory.call(this,t,e);return n&&(n.type=us),n},e.prototype.appendChart=function(t,e){this.valueAxisRangeTracker.update(t.yAxisRanges),uc.prototype.appendChart.call(this,t,e)},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createLineChart(_a(t,[us]),e),this.createScatterChart(_a(t,[ds]),e),this.createAreaChart(_a(t,[hs]),e)},e.prototype.createLineChart=function(t,e){if(0!==t.length){var n=new id(this,{series:t});this.appendChart(n,e)}},e.prototype.createScatterChart=function(t,e){if(0!==t.length){var n=new ed(this,{series:t});this.appendChart(n,e)}},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var n=new hd(this,{series:t});this.appendChart(n,e)}},e.prototype._dispatchEvent=function(t,e,n){var i=t._eventCoordinates(e),r=new Cn(i.x,i.y),o=this.axisX.getValue(r),s=this.axisY.getValue(r);null!==o&&null!==s&&t.trigger(n,{element:Kt(e),x:o,y:s})},e.prototype.createCrosshairs=function(){},e}(Qu);re(ud,{xAxis:{},yAxis:{}}),st(ud.prototype,pc,{seriesValues:Fu.prototype.seriesValues});const dd=ud;var pd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointSlot=function(t,e){var n=t.center.y-e.y1,i=Cn.onCircle(t.center,t.middle(),n);return new Tn(i.x,i.y,i.x,i.y)},e.prototype.renderSegments=function(){if(t.prototype.renderSegments.call(this),this._segments&&this._segments.length>1)for(var e=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];e[i.seriesIx]=e[i.seriesIx]||[],e[i.seriesIx].push(i)}return e}(this._segments),n=0;n<e.length;n++){var i=e[n];if(i&&i.length>1){var r=i[0].linePoints[0],o=Gt(i),s=Gt(o.linePoints),a=0===r.categoryIx,l=s.categoryIx===s.categoriesCount-1;a&&l&&Gt(i).linePoints.push(r)}}},e.prototype.createSegment=function(t,e,n){var i=new(e.style===Ko?Xa:$a)(t,e,n),r=this.seriesMissingValues(e);return t.length!==e.data.length&&r!==Vo||(i.options.closed=!0),i},e}(el);re(pd,{clip:!1,limitPoints:!1});const fd=pd;var gd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(al);const md=gd;var yd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fillToAxes=function(){},e}(il);const vd=yd;var bd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createSegment=function(t,e,n,i){var r,o,s,a=this.options.isStacked,l=(e.line||{}).style;return a&&n>0&&i&&(o=i.linePoints.slice(0),r=i),l===Ko?(s=new md(t,e,n,r,o)).options.closed=!0:(t.push(t[0]),s=new vd(t,e,n,r,o)),s},e.prototype.seriesMissingValues=function(t){return t.missingValues||Uo},e}(fd);const wd=bd;var xd=function(t){function e(e,n){t.call(this,e,null,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getIndex=function(){return this.categoryIx},e}(Ku);re(xd,{overlay:{gradient:"none"},labels:{distance:10}});const _d=xd;var Sd=function(t){function e(e){t.call(this,e),this.forEach=e.rtl?vl:yl}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options,n=this.children,i=e.gap,r=e.spacing,o=n.length,s=o+i+r*(o-1),a=t.angle/s,l=t.startAngle+a*(i/2);this.forEach(n,(function(e){var n=t.clone();n.startAngle=l,n.angle=a,e.sector&&(n.radius=e.sector.radius),e.reflow(n),e.sector=n,l+=a+a*r}))},e}(ei);re(Sd,{gap:1,spacing:0});const Cd=Sd;var kd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.options.reverse,n=this.children,i=n.length,r=e?i-1:0,o=e?-1:1;this.box=new Tn;for(var s=r;s>=0&&s<i;s+=o){var a=n[s].sector;a.startAngle=t.startAngle,a.angle=t.angle}},e}(ei);const Ad=kd;var Ed=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointType=function(){return _d},e.prototype.clusterType=function(){return Cd},e.prototype.stackType=function(){return Ad},e.prototype.categorySlot=function(t,e){return t.getSlot(e)},e.prototype.pointSlot=function(t,e){var n=t.clone(),i=t.center.y;return n.radius=i-e.y1,n.innerRadius=i-e.y2,n},e.prototype.reflowPoint=function(t,e){t.sector=e,t.reflow()},e.prototype.createAnimation=function(){this.options.animation.center=this.box.toRect().center(),t.prototype.createAnimation.call(this)},e}(Cl);Ed.prototype.reflow=Pa.prototype.reflow,re(Ed,{clip:!1,limitPoints:!1,animation:{type:"pie"}});const Td=Ed;var Md=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createPolarAxis=function(){var t=new so(this.options.categoryAxis,this.chartService);this.polarAxis=t,this.categoryAxis=t,this.appendAxis(t),this.aggregateCategories(),this.createTrendlineSeries(),this.createCategoryAxesLabels()},e.prototype.valueAxisOptions=function(t){return this._hasBarCharts&&st(t,{majorGridLines:{type:o},minorGridLines:{type:o}}),this._isStacked100&&st(t,{roundToMajorUnit:!1,labels:{format:"P0"}}),st(t,this.options.valueAxis)},e.prototype.aggregateCategories=function(){gh.prototype.aggregateCategories.call(this,this.panes)},e.prototype.createCategoryAxesLabels=function(){gh.prototype.createCategoryAxesLabels.call(this,this.panes)},e.prototype.filterSeries=function(t){return t},e.prototype.trendlineFactory=function(t,e){var n=gh.prototype.trendlineFactory.call(this,t,e);return n&&(n.type=gs),n},e.prototype.createCharts=function(){var t=this.filterVisibleSeries(this.series),e=this.panes[0];this.createAreaChart(_a(t,[ps]),e),this.createLineChart(_a(t,[gs]),e),this.createBarChart(_a(t,[fs]),e)},e.prototype.chartOptions=function(t){var e={series:t},n=t[0];if(n){var i=this.filterVisibleSeries(t),r=n.stack;e.isStacked=r&&i.length>1,e.isStacked100=r&&"100%"===r.type&&i.length>1,e.isStacked100&&(this._isStacked100=!0)}return e},e.prototype.createAreaChart=function(t,e){if(0!==t.length){var n=new wd(this,this.chartOptions(t));this.appendChart(n,e)}},e.prototype.createLineChart=function(t,e){if(0!==t.length){var n=new fd(this,this.chartOptions(t));this.appendChart(n,e)}},e.prototype.createBarChart=function(t,e){if(0!==t.length){var n=t[0],i=this.chartOptions(t),r=this.filterVisibleSeries(t),o=r.some((function(t){return t.stack})),s=r.some((function(t){return t.stack&&"100%"===t.stack.type}));i.gap=n.gap,i.spacing=n.spacing,i.defaultStack=n.stack&&r.length>1,i.isStacked=o&&r.length>1,i.isStacked100=s&&r.length>1;var a=new Td(this,i);this.appendChart(a,e),this._hasBarCharts=!0}},e.prototype.seriesCategoryAxis=function(){return this.categoryAxis},e.prototype._dispatchEvent=function(t,e,n){var i=t._eventCoordinates(e),r=new Cn(i.x,i.y),o=this.categoryAxis.getCategory(r),s=this.valueAxis.getValue(r);null!==o&&null!==s&&t.trigger(n,{element:Kt(e),category:o,value:s})},e.prototype.createCrosshairs=function(){},e.prototype._pointsByVertical=function(e){return t.prototype._pointsByVertical.call(this,e).sort(this._getSeriesCompareFn())},e.prototype._getSeriesCompareFn=function(){return function(t,e){return e.value-t.value}},e}(Qu);st(Md.prototype,pc,{appendChart:gh.prototype.appendChart,aggregateSeries:gh.prototype.aggregateSeries,seriesSourcePoints:gh.prototype.seriesSourcePoints,seriesValues:gh.prototype.seriesValues}),re(Md,{categoryAxis:{categories:[]},valueAxis:{}});const Od=Md;var Id=function(t){function e(e,n,i){t.call(this,n),this.value=e,this.options.index=i.index}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):t.format?this.formatValue(t.format):this.value},e.prototype.reflow=function(t){var e=this.points,n=this.children[0],i=Math.min(e[0].x,e[3].x),r=Math.max(e[1].x,e[2].x);this.box=new Tn(i,e[0].y,r,e[2].y),n&&n.reflow(new Tn(t.x1,e[0].y,t.x2,e[2].y))},e.prototype.createVisual=function(){var e,n=this,i=this.options;t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual(),(e=i.visual?i.visual({category:this.category,dataItem:this.dataItem,value:this.value,series:this.series,percentage:this.percentage,points:this.points,options:i,sender:this.getSender(),createVisual:function(){return n.createPath()}}):this.createPath())&&this.visual.append(e)},e.prototype.createPath=function(){var t=this.options,e=t.border;return Ln.w.fromPoints(this.points,{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.color,opacity:e.opacity,width:e.width}}).close()},e.prototype.createHighlight=function(t){return Ln.w.fromPoints(this.points,t)},e.prototype.highlightVisual=function(){return this.visual.children[0]},e.prototype.highlightVisualArgs=function(){var t=Ln.w.fromPoints(this.points).close();return{options:this.options,path:t}},e.prototype.createFocusHighlight=function(t){var e=this.options.accessibility.highlight.border.width,n=Ln.w.fromPoints(this.points,st({},t,{stroke:{width:2*e}})).close(),i=new Ln.P;return i.paths.push(Ln.w.fromRect(this.box.clone().pad(e).toRect())),i.paths.push(Ln.w.fromPoints(this.points)),n.clip(i),n},e.prototype.tooltipAnchor=function(){var t=this.box;return{point:new Cn(t.center().x,t.y1),align:{horizontal:"center",vertical:"top"}}},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.pointData=function(){return{dataItem:this.dataItem,category:this.category,value:this.value,series:this.series,percentage:this.percentage}},e.prototype.getIndex=function(){return this.index},e}(ei);re(Id,{color:N,border:{width:1},labels:{format:""},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}}),st(Id.prototype,La),st(Id.prototype,fl);const Dd=Id;var Fd=function(t){function e(e,n){t.call(this,n),this.plotArea=e,this.chartService=e.chartService,this.points=[],this.labels=[],this.legendItems=[],this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.formatPointValue=function(t,e){return this.plotArea.chartService.format.auto(e,t.value)},e.prototype.render=function(){var t=this,e=this.options,n=this.plotArea.options.seriesColors;void 0===n&&(n=[]);var i=e.series[0],r=i.data;if(r)for(var o=ya(i),s=o.total,a=o.points,l=0;l<a.length;l++){var c=a[l];if(c){var h=c.fields;nt(i.color)||(i.color=h.color||n[l%n.length]),h=st({index:l,owner:t,series:i,seriesIx:0,dataItem:r[l],percentage:c.value/s},h,{visible:c.visible});var u=c.valueFields.value,d=t.createSegment(u,h),p=t.createLabel(u,h);d&&p&&d.append(p)}}},e.prototype.evalSegmentOptions=function(t,e,n){var i=n.series;xa(t,{value:e,series:i,dataItem:n.dataItem,index:n.index},{defaults:i._defaults,excluded:["data","content","template","toggle","visual","ariaTemplate","ariaContent"]})},e.prototype.createSegment=function(t,e){var n=st({},e.series);if(this.evalSegmentOptions(n,t,e),this.createLegendItem(t,n,e),!1!==e.visible){var i=new Dd(t,n,e);return Object.assign(i,e),this.append(i),this.points.push(i),i}},e.prototype.createLabel=function(t,e){var n=e.series,i=e.dataItem,r=st({},this.options.labels,n.labels),o=t;if(r.visible){var s=mt(r),a={dataItem:i,value:t,percentage:e.percentage,category:e.category,series:n};s?o=s(a):r.format&&(o=this.chartService.format.auto(r.format,o)),r.color||(r.color=_e(n.color),r.background||(r.background=n.color)),this.evalSegmentOptions(r,t,e);var l=new Ci(o,st({vAlign:r.position},r),a);return this.labels.push(l),l}},e.prototype.labelPadding=function(){for(var t=this.labels,e={left:0,right:0},n=0;n<t.length;n++){var i=t[n].options.align;if(i!==p){var r=t[n].box.width();i===k?e.left=Math.max(e.left,r):e.right=Math.max(e.right,r)}}return e},e.prototype.dynamicSlopeReflow=function(t,e,n){for(var i=this.options,r=this.points,o=r.length,s=r[0],a=s,l=0;l<r.length;l++)r[l].percentage>a.percentage&&(a=r[l]);for(var c=s.percentage/a.percentage*e,h=(e-c)/2,u=0,d=0;d<o;d++){var p=r[d].percentage,f=r[d+1],g=f?f.percentage:p,m=r[d].points=[],y=i.dynamicHeight?n*p:n/o,v=void 0;v=Yt(v=p?(e-c*(g/p))/2:g?0:e/2,0,e),m.push(new Pn.A(t.x1+h,t.y1+u)),m.push(new Pn.A(t.x1+e-h,t.y1+u)),m.push(new Pn.A(t.x1+e-v,t.y1+y+u)),m.push(new Pn.A(t.x1+v,t.y1+y+u)),h=v,u+=y+i.segmentSpacing,c=Yt(e-2*v,0,e)}},e.prototype.constantSlopeReflow=function(t,e,n){for(var i=this.options,r=this.points,o=r.length,s=i.neckRatio<=1,a=s?i.neckRatio*e:e,l=s?0:(e-e/i.neckRatio)/2,c=((s?e:e-2*l)-a)/2,h=0,u=0;u<o;u++){var d=r[u].points=[],p=r[u].percentage,f=i.dynamicHeight?c*p:c/o,g=i.dynamicHeight?n*p:n/o;d.push(new Pn.A(t.x1+l,t.y1+h)),d.push(new Pn.A(t.x1+e-l,t.y1+h)),d.push(new Pn.A(t.x1+e-l-f,t.y1+g+h)),d.push(new Pn.A(t.x1+l+f,t.y1+g+h)),l+=f,h+=g+i.segmentSpacing}},e.prototype.reflow=function(t){var e=this.points,n=e.length;if(n){var i=this.options,r=t.clone().unpad(this.labelPadding()),o=r.height()-i.segmentSpacing*(n-1),s=r.width();i.dynamicSlope?this.dynamicSlopeReflow(r,s,o):this.constantSlopeReflow(r,s,o);for(var a=0;a<n;a++)e[a].reflow(t)}},e}(ei);re(Fd,{neckRatio:.3,width:300,dynamicSlope:!1,dynamicHeight:!0,segmentSpacing:0,labels:{visible:!1,align:p,position:p,zIndex:1}}),st(Fd.prototype,zu);const Pd=Fd;var Rd=function(t){function e(e,n){n.dynamicSlope=!1,n.neckRatio=1e6,t.call(this,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Pd);const Ld=Rd;var Nd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this.createChart(Pd,_a(this.series,[is])),this.createChart(Ld,_a(this.series,[rs]))},e.prototype.createChart=function(t,e){var n=e[0];if(n){var i=new t(this,{series:e,legend:this.options.legend,neckRatio:n.neckRatio,dynamicHeight:n.dynamicHeight,dynamicSlope:n.dynamicSlope,segmentSpacing:n.segmentSpacing,highlight:n.highlight});this.appendChart(i)}},e.prototype.appendChart=function(e,n){t.prototype.appendChart.call(this,e,n),zt(this.options.legend.data,e.legendItems)},e.prototype._pointsByVertical=function(t){return this.pointsBySeriesIndex(t.series.index)},e.prototype.getPointToTheRight=function(t){return this.getPointBelow(t)},e.prototype.getPointToTheLeft=function(t){return this.getPointAbove(t)},e}(uc);const Bd=Nd;const jd=function(t,e){void 0===e&&(e=.05);var n=(0,be.Ay)(t),i=1-e;return function(t){var e=n.toHSL(),r=100-e.l,o=i-t;return e.l+=Math.min(o*r,r),e.toCss()}};var zd=function(t){function e(e,n){t.call(this),this.options=n,this.color=n.color||N,this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){this._rendered||(this._rendered=!0,this.createMarker(),this.createLabel(),this.createNote())},e.prototype.createLabel=function(){var t=this.options.labels;t.visible&&(this.label=this.createLabelElement(t),this.append(this.label))},e.prototype.createLabelElement=function(t){var e=t.color;return e||(e=_e(this.color)),new Ci(this.getLabelText(t),st({align:p,vAlign:p,margin:{left:5,right:5},zIndex:ee(t.zIndex,this.series.zIndex)},t,{color:e}),this.pointData())},e.prototype.getLabelText=function(t){var e=mt(t);return e?e(this.pointData()):this.formatValue(t.format)},e.prototype.formatValue=function(t){return this.owner.formatPointValue(this,t)},e.prototype.reflow=function(t){this.render();var e=this.label;this.box=t,e&&e.reflow(this.markerBox()),this.note&&this.note.reflow(t),this.marker.reflow(this.markerBox())},e.prototype.createVisual=function(){t.prototype.createVisual.call(this),this.addAccessibilityAttributesToVisual()},e.prototype.markerBox=function(){var t=this.options.markers,e=t.border,n=this.box.toRect(),i=ee(t.type,"rect")===D,r=ee(e.width,i?1:0),o=Math.round(r/2);if(t.size){var s=n.center();n.size.width=n.size.height=t.size,n.origin.x=Math.round(s.x-n.size.width/2),n.origin.y=Math.round(s.y-n.size.height/2)}return n.size.width-=r,n.size.height-=r,n.origin.y+=o+.5,n.origin.x+=o+.5,xi(n)},e.prototype.markerBorder=function(){var t=this.options,e=t.markers.border,n=ee(e.opacity,t.opacity);return{color:e.color||this.color,width:e.width,opacity:n,dashType:e.dashType}},e.prototype.createMarker=function(){var t=this.options,e=t.markers,n=new si({type:ee(e.type,"rect"),width:e.size,height:e.size,rotation:e.rotation,background:this.color,border:this.markerBorder(),borderRadius:e.borderRadius,opacity:this.series.opacity||t.opacity,zIndex:ee(t.zIndex,this.series.zIndex),animation:t.animation,visual:t.visual},{dataItem:this.dataItem,value:this.value,series:this.series,category:this.category});this.marker=n,this.append(n)},e.prototype.createHighlight=function(t){var e=this.options,n=this.options.highlight.markers||this.options.markers,i=new si({type:ee(n.type,"rect"),width:n.size,height:n.size,rotation:n.rotation,background:n.color||this.color,border:this.markerBorder(),borderRadius:n.borderRadius,opacity:this.series.opacity||e.opacity,zIndex:ee(e.zIndex,this.series.zIndex)});i.reflow(this.markerBox());var r=i.getElement();return r.options.fill=t.fill,r.options.stroke=t.stroke,r},e.prototype.highlightVisual=function(){return this.rectVisual},e.prototype.highlightVisualArgs=function(){return{options:this.options,rect:this.box.toRect(),visual:this.rectVisual}},e.prototype.createFocusHighlight=function(){var t=this.options.markers,e=this.options.accessibility.highlight,n=new si({type:ee(t.type,"rect"),width:t.size,height:t.size,rotation:t.rotation,background:e.color,border:e.border,borderRadius:t.borderRadius,padding:e.border.width/2,zIndex:e.zIndex});return n.reflow(this.markerBox()),n.getElement()},e.prototype.tooltipAnchor=function(){var t=this.box.center().x,e=this.box.y1-5;return{point:new Cn(t,e),align:{horizontal:p,vertical:d}}},e.prototype.overlapsBox=function(t){return this.box.overlaps(t)},e.prototype.unclipElements=function(){},e.prototype.pointData=function(){return{x:this.value.x,y:this.value.y,value:this.value.value,dataItem:this.dataItem,series:this.series}},e}(ei);st(zd.prototype,La),st(zd.prototype,Na),st(zd.prototype,fl),zd.prototype.defaults={markers:{type:"rect",borderRadius:4,border:{color:"transparent"}},padding:{top:1},labels:{visible:!1,padding:3},opacity:1,notes:{label:{}},accessibility:{role:Qs,className:ta,ariaRoleDescription:ea}};const $d=zd;var Hd=function(t){function e(e,n){t.call(this,n),this.plotArea=e,this.chartService=e.chartService,this._initFields(),this.render()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initFields=function(){this.points=[],this.seriesOptions=[],this.valueRange={min:A,max:E},this._evalSeries=[]},e.prototype.render=function(){this.setRange(),this.traverseDataPoints(this.addValue.bind(this))},e.prototype.setRange=function(){for(var t=this,e=this.options.series,n=0;n<e.length;n++)for(var i=e[n],r=0;r<i.data.length;r++){var o=t.plotArea.bindPoint(i,r).valueFields;Ht(o.value)&&null!==o.value&&(t.valueRange.min=Math.min(t.valueRange.min,o.value),t.valueRange.max=Math.max(t.valueRange.max,o.value))}},e.prototype.addValue=function(t,e){var n;t&&Ht(t.value)&&null!==t.value&&(n=this.createPoint(t,e))&&Object.assign(n,e),this.points.push(n)},e.prototype.evalPointOptions=function(t,e,n){var i=n.series,r=n.seriesIx,o={defaults:i._defaults,excluded:["data","tooltip","content","template","visual","toggle","drilldownSeriesFactory","ariaTemplate","ariaContent"]},s=this._evalSeries[r];Ht(s)||(this._evalSeries[r]=s=xa(t,{},o,!0));var a=t;return s&&xa(a=st({},t),{value:e,series:i,dataItem:n.dataItem,min:this.valueRange.min,max:this.valueRange.max},o),a},e.prototype.pointType=function(){return $d},e.prototype.pointOptions=function(t,e){var n=this.seriesOptions[e];if(!n){var i=this.pointType().prototype.defaults;this.seriesOptions[e]=n=st({},i,{markers:{opacity:t.opacity},tooltip:{format:this.options.tooltip.format},labels:{format:this.options.labels.format}},t)}return n},e.prototype.createPoint=function(t,e){var n=e.series,i=this.pointOptions(n,e.seriesIx),r=e.color||n.color;if(i=this.evalPointOptions(i,t,e),nt(n.color))r=i.color;else if(0!==this.valueRange.max){r=jd(r)(t.value/this.valueRange.max)}var o=new $d(t,i);return o.color=r,this.append(o),o},e.prototype.seriesAxes=function(t){var e=t.xAxis,n=t.yAxis,i=this.plotArea,r=e?i.namedXAxes[e]:i.axisX,o=n?i.namedYAxes[n]:i.axisY;if(!r)throw new Error("Unable to locate X axis with name "+e);if(!o)throw new Error("Unable to locate Y axis with name "+n);return{xAxis:r,yAxis:o}},e.prototype.reflow=function(t){var e=this,n=this.points,i=!this.options.clip,r=0;this.traverseDataPoints((function(t,o){var s=n[r++],a=e.seriesAxes(o.series),l=a.xAxis,c=a.yAxis,h=l.categoryIndex(t.x),u=c.categoryIndex(t.y),d=l.getSlot(h,h,i),p=c.getSlot(u,u,i);if(s)if(d&&p){var f=e.pointSlot(d,p);s.reflow(f)}else s.visible=!1})),this.box=t},e.prototype.pointSlot=function(t,e){return new Tn(t.x1,e.y1,t.x2,e.y2)},e.prototype.traverseDataPoints=function(t){for(var e=this,n=this.options.series,i=0;i<n.length;i++)for(var r=n[i],o=e.seriesAxes(r),s=o.xAxis,a=o.yAxis,l=s.currentRangeIndices(),c=a.currentRangeIndices(),h=0;h<r.data.length;h++){var u=e.plotArea.bindPoint(r,h),d=u.valueFields,p=u.fields,f=s.totalIndex(d.x),g=a.totalIndex(d.y),m=l.min<=f&&f<=l.max,y=c.min<=g&&g<=c.max;m&&y&&t(d,st({pointIx:h,series:r,seriesIx:i,dataItem:r.data[h],owner:e},p))}},e.prototype.formatPointValue=function(t,e){var n=t.value;return this.chartService.format.auto(e,n.x,n.y,n.value)},e.prototype.animationPoints=function(){for(var t=this.points,e=[],n=0;n<t.length;n++)e.push((t[n]||{}).marker);return e},e}(ei);re(Hd,{series:[],tooltip:{format:"{0}, {1}: {2}"},labels:{format:"{2}"},clip:!0});const Ud=Hd;var Vd=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initFields=function(){this.namedXAxes={},this.namedYAxes={}},e.prototype.render=function(t){void 0===t&&(t=this.panes),this.bindCategories(),this.createAxes(t),this.createCharts(t),this.createAxisLabels()},e.prototype.bindCategories=function(){for(var t=this.srcSeries||this.series,e=0;e<t.length;e++){for(var n=t[e],i=n.data||[],r=this.seriesAxes(n),o=r.xAxis,s=r.yAxis,a=Me(o.categories||[]),l=Me(s.categories||[]),c=0;c<i.length;c++){var h=Io.current.bindPoint(n,c).valueFields,u=h.x,d=h.y;a.has(u)||a.add(u),l.has(d)||l.add(d)}o.categories=a.values(),s.categories=l.values()}},e.prototype.createCharts=function(t){for(var e=this,n=this.groupSeriesByPane(),i=0;i<t.length;i++){var r=t[i],o=n[r.options.name||"default"]||[];e.addToLegend(o);var s=e.filterVisibleSeries(o);s&&e.createHeatmapChart(_a(s,[os]),r)}},e.prototype.createHeatmapChart=function(t,e){var n=new Ud(this,{series:t});this.appendChart(n,e)},e.prototype.seriesPaneName=function(t){var e=this.options,n=t.xAxis,i=xt([].concat(e.xAxis),(function(t){return t.name===n}))[0],r=t.yAxis,o=xt([].concat(e.yAxis),(function(t){return t.name===r}))[0],s=(e.panes||[{}])[0].name||"default";return(i||{}).pane||(o||{}).pane||s},e.prototype.seriesAxes=function(t){var e,n,i=this.options,r=[].concat(i.xAxis),o=t.xAxis;e=o?r.find((function(t){return t.name===o})):r[0];var s=[].concat(i.yAxis),a=t.yAxis;if(n=a?s.find((function(t){return t.name===a})):s[0],!e)throw new Error("Unable to locate X axis with name "+o);if(!n)throw new Error("Unable to locate Y axis with name "+a);return{xAxis:e,yAxis:n}},e.prototype.createAxisLabels=function(){for(var t=this.axes,e=0;e<t.length;e++)t[e].createLabels()},e.prototype.createXYAxis=function(t,e,n){for(var i,r=t.name,o=e?this.namedYAxes:this.namedXAxes,s=Object.assign({axisCrossingValue:0},t,{vertical:e,reverse:e||this.chartService.rtl?!t.reverse:t.reverse,justified:!1}),a=s.categories?s.categories[0]:null,l=[s.min,s.max,a],c=this.series,h=0;h<c.length;h++){var u=c[h],d=u[e?"yAxis":"xAxis"];if(d===s.name||0===n&&!d){var p=Io.current.bindPoint(u,0).valueFields;l.push(p[e?"y":"x"]);break}}for(var f=0;f<l.length;f++)if(l[f]instanceof Date){i=!0;break}var g=new(ba(s.type,y)||!s.type&&i?Ur:Ir)(s,this.chartService);if(g.axisIndex=n,r){if(o[r])throw new Error((e?"Y":"X")+" axis with name "+r+" is already defined");o[r]=g}return this.appendAxis(g),g.indexCategories(),g},e.prototype.createAxes=function(t){for(var e=this,n=this.options,i=[].concat(n.xAxis),r=[],o=[].concat(n.yAxis),s=[],a=0;a<i.length;a++){kt(e.findPane(i[a].pane),t)&&r.push(e.createXYAxis(i[a],!1,a))}for(var l=0;l<o.length;l++){kt(e.findPane(o[l].pane),t)&&s.push(e.createXYAxis(o[l],!0,l))}this.axisX=this.axisX||r[0],this.axisY=this.axisY||s[0]},e.prototype.removeAxis=function(e){var n=e.options.name;t.prototype.removeAxis.call(this,e),e.options.vertical?delete this.namedYAxes[n]:delete this.namedXAxes[n],e===this.axisX&&delete this.axisX,e===this.axisY&&delete this.axisY},e.prototype._dispatchEvent=function(t,e,n){for(var i=t._eventCoordinates(e),r=new Cn(i.x,i.y),o=this.axes,s=o.length,a=[],l=[],c=0;c<s;c++){var h=o[c];fa(h.options.vertical?l:a,h.getCategory(r))}a.length>0&&l.length>0&&t.trigger(n,{element:Kt(e),originalEvent:e,x:Ta(a),y:Ta(l)})},e.prototype.updateAxisOptions=function(t,e){var n=t.options.vertical,i=this.groupAxes(this.panes),r=(n?i.y:i.x).indexOf(t);qd(this.options,r,n,e),qd(this.originalOptions,r,n,e)},e.prototype.crosshairOptions=function(t){return Object.assign({},t.options.crosshair,{zIndex:0})},e.prototype._pointsByVertical=function(t,e){var n=this;void 0===e&&(e=0);var i=this.axisX.options.reverse?-1*e:e,r=this.axisX.children,o=this._getPointAxisXIndex(t)+i,s=r[o=et(o,r.length)].value,a=this.filterPoints((function(t){return Wd(t.pointData().x,s)})).sort((function(t,e){return n._getPointAxisYIndex(t)-n._getPointAxisYIndex(e)}));return this.axisY.options.reverse?a.reverse():a},e.prototype._pointsByHorizontal=function(t,e){var n=this;void 0===e&&(e=0);var i=this.axisY.options.reverse?-1*e:e,r=this.axisY.children,o=this._getPointAxisYIndex(t)+i,s=r[o=et(o,r.length)].value,a=this.filterPoints((function(t){return Wd(t.pointData().y,s)})).sort((function(t,e){return n._getPointAxisXIndex(t)-n._getPointAxisXIndex(e)}));return this.axisX.options.reverse?a.reverse():a},e.prototype._getPointAxisXIndex=function(t){return this._getPointAxisIndex(this.axisX,t.pointData().x)},e.prototype._getPointAxisYIndex=function(t){return this._getPointAxisIndex(this.axisY,t.pointData().y)},e.prototype._getPointAxisIndex=function(t,e){return t.children.findIndex((function(t){return Wd(e,t.value)}))},e}(uc);function Wd(t,e){return t instanceof Date&&e instanceof Date?Sr(t,e):t===e}function qd(t,e,n,i){st([].concat(n?t.yAxis:t.xAxis)[e],i)}re(Vd,{xAxis:{},yAxis:{}}),st(Vd.prototype,pc);const Kd=Vd;var Xd="color",Gd="first",Yd="max",Jd="min",Zd="noteText";tu.current.register(gh,[Yo,es,as,Cs,Go,xs,ts,ls,Qo,Ss,Jo,_s,vs,ys,As,ss,ms,ks].concat(Ps)),tu.current.register(Fu,[bs,ws,Zo].concat(Ps)),tu.current.register(Wu,[cs]),tu.current.register(Ju,[ns]),tu.current.register(Bd,[is,rs]),tu.current.register(dd,[hs,us,ds].concat(Ps)),tu.current.register(Od,[ps,fs,gs].concat(Ps)),tu.current.register(Kd,[os]),Io.current.register([Yo,es,as,Cs,Go,xs],[L],[ia,Xd,Zd,$o,Ho,aa]),Io.current.register([vs,ys,ms,ks],["from","to"],[ia,Xd,Zd,aa]),Io.current.register([As,ss],[L],[ia,Xd,Zd,"summary",aa]),Io.current.register([hs,us,ds],[j,z],[Xd,aa]),Io.current.register([ps,fs,gs],[L],[ia,Xd,aa]),Io.current.register([is,rs],[L],[ia,Xd,"visibleInLegend","visible",aa]),vc.current.register([Yo,es,as,Cs,Go,xs,As,ss],{value:Yd,color:Gd,noteText:Gd,errorLow:Jd,errorHigh:Yd}),vc.current.register([vs,ys,ms,ks],{from:Jd,to:Yd,color:Gd,noteText:Gd}),vc.current.register([ps,fs,gs],{value:Yd,color:Gd}),Io.current.register([bs,ws,Zo],[j,z],[Xd,Zd,"xErrorLow","xErrorHigh","yErrorLow","yErrorHigh"]),Io.current.register([Zo],[j,z,"size"],[Xd,ia,Zd]),Io.current.register([os],[j,z,L],[Xd,Zd]),Io.current.register([ts,ls],["open","high","low","close"],[ia,Xd,"downColor",Zd]),vc.current.register([ts,ls],{open:Yd,high:Yd,low:Jd,close:Yd,color:Gd,downColor:Gd,noteText:Gd}),Io.current.register([Jo,_s],["lower","q1","median","q3","upper","mean","outliers"],[ia,Xd,Zd,aa]),vc.current.register([Jo,_s],{lower:Yd,q1:Yd,median:Yd,q3:Yd,upper:Yd,mean:Yd,outliers:Gd,color:Gd,noteText:Gd}),Io.current.register([Qo,Ss],["current","target"],[ia,Xd,"visibleInLegend",Zd,aa]),vc.current.register([Qo,Ss],{current:Yd,target:Yd,color:Gd,noteText:Gd}),Io.current.register([cs,ns],[L],[ia,Xd,"explode","visibleInLegend","visible",aa]);var Qd=[ia,L,j,z],tp="mousemove",ep="contextmenu",np="mouseleave",ip="keydown",rp="focus",op="blur",sp=function(t){function e(e,n,i,r){var o=this;void 0===r&&(r={}),t.call(this),this.observers=[],this.addObserver(r.observer),this.chartService=new Ui(this,r),this.chartService.theme=i,this._initElement(e);var s=st({},this.options,n);this._originalOptions=st({},s),this._theme=i,this._initTheme(s,i),this._focusState={},this._initHandlers(),this._initSurface(),this.bindCategories(),ie.preloadFonts(n,(function(){o.fontLoaded=!0,o._destroyed||(o.trigger("init"),o._redraw(),o._attachEvents())}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initElement=function(t){for(this._setElementClass(t),t.style.position="relative",t.tabIndex=t.getAttribute("tabindex")?t.getAttribute("tabindex"):0,t.setAttribute("role","graphics-document document");t.firstChild;)t.removeChild(t.firstChild);this.element=t},e.prototype._setElementClass=function(t){V(t,"k-chart")},e.prototype._initTheme=function(t,e){for(var n=[],i=t.series||[],r=0;r<i.length;r++)n.push(Object.assign({},i[r]));t.series=n,function(t){for(var e=Qd,n=0;n<e.length;n++){var i=e[n]+"Axes";t[i]&&(t[e[n]+"Axis"]=t[i],delete t[i])}}(t),this.applyDefaults(t,e),null===t.seriesColors&&delete t.seriesColors,J(t.title)&&(t.title={text:t.title}),this.options=st({},e,t),this.applySeriesColors()},e.prototype.getSize=function(){var t=this.options.chartArea||{};return{width:t.width?parseInt(t.width,10):Math.floor(this.element.offsetWidth),height:t.height?parseInt(t.height,10):Math.floor(this.element.offsetHeight)}},e.prototype.resize=function(t){var e=this.getSize(),n=this._size,i=e.width>0||e.height>0;t||i&&(!n||e.width!==n.width||e.height!==n.height)?(this._size=e,this._resize(e,t),this.trigger("resize",e)):i&&this._selections&&pe(this._selections,(function(t){return!t.visible}))&&(this._destroySelections(),this._setupSelection())},e.prototype._resize=function(){this._noTransitionsRedraw()},e.prototype.redraw=function(t){if(this.applyDefaults(this.options),this.applySeriesColors(),t){var e=this._model._plotArea,n=e.findPane(t);e.redraw(n)}else this._redraw()},e.prototype.getAxis=function(t){return _o(t,this._plotArea.axes)},e.prototype.findAxisByName=function(t){return this.getAxis(t)},e.prototype.findPaneByName=function(t){for(var e=this._plotArea.panes,n=0;n<e.length;n++)if(e[n].options.name===t)return new Co(e[n])},e.prototype.findPaneByIndex=function(t){var e=this._plotArea.panes;if(e[t])return new Co(e[t])},e.prototype.plotArea=function(){return new ko(this._plotArea)},e.prototype.toggleHighlight=function(t,e){var n,i,r,o=this._plotArea,s=(o.srcSeries||o.series||[])[0];nt(e)?n=o.filterPoints(e):(at(e)?(i=e.series,r=e.category):i=r=e,n=s.type===ns?ap(o.pointsBySeriesName(i),r):kt(s.type,[cs,is,rs])?ap((o.charts[0]||{}).points,r):o.pointsBySeriesName(i));n&&this.togglePointsHighlight(t,n)},e.prototype.togglePointsHighlight=function(t,e){for(var n=this._highlight,i=0;i<e.length;i++)n.togglePointHighlight(e[i],t)},e.prototype.showTooltip=function(t){var e,n,i=this._sharedTooltip(),r=this._tooltip,o=this._plotArea;if(nt(t)?(e=o.findPoint(t))&&i&&(n=e.categoryIx):i&&Ht(t)&&(n=o.categoryAxis.categoryIndex(t)),i){if(n>=0){var s=this._plotArea.pointsByCategoryIndex(n);r.showAt(s)}}else e&&r.show(e)},e.prototype.hideTooltip=function(){this._tooltip.hide()},e.prototype._initSurface=function(){var t=this.surface,e=this._surfaceWrap(),n=this.options.chartArea||{};n.width&&Wt(e,{width:n.width}),n.height&&Wt(e,{height:n.height}),t&&t.options.type===this.options.renderAs?(this.surface.clear(),this.surface.resize()):(this._destroySurface(),this.surface=mh.A.create(e,{type:this.options.renderAs}),this.surface.bind("mouseenter",this._surfaceMouseenterHandler),this.surface.bind("mouseleave",this._surfaceMouseleaveHandler))},e.prototype._surfaceWrap=function(){return this.element},e.prototype._redraw=function(){var t=this._getModel();this._size={width:t.options.width,height:t.options.height},this._destroyView(),this._setElementAccessibilityAttributes(),this._model=t,this._plotArea=t._plotArea,this._legend=t._legend,t.renderVisual(),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.setup()})),this._initSurface(),this.surface.draw(t.visual),!1!==this.options.transitions&&t.traverse((function(t){t.animation&&t.animation.play()})),this._tooltip=this._createTooltip(),this._highlight=new wh,this._setupSelection(),this._createPannable(),this._createZoomSelection(),this._createMousewheelZoom(),this.trigger("render"),dp(this._plotArea.panes),this._navState||this._cancelDomEvents(),this._redrawFocusHighlight()},e.prototype._redrawFocusHighlight=function(){var t=this._focusState,e=t.legendInFocus,n=t.preserveHighlight;e&&n&&(this._focusElement(this._getFocusedLegendItem(),!1),this._focusState.preserveHighlight=!1)},e.prototype._setElementAccessibilityAttributes=function(){var t=this.options.title,e=J(t)?t:t.description||t.text;e&&this.element.setAttribute("aria-roledescription",e)},e.prototype.exportVisual=function(t){var e;if(t&&(t.width||t.height||t.options)){var n=this.options,i=st({},t.options,{chartArea:{width:t.width,height:t.height}});up(this._originalOptions,i),this.options=st({},this._originalOptions,i),this._initTheme(this.options,this._theme),this.bindCategories();var r=this._getModel();r.renderVisual(),dp(r._plotArea.panes),e=r.visual,this.options=n}else e=this.surface.exportVisual();return e},e.prototype._sharedTooltip=function(){return this._plotArea instanceof gh&&this.options.tooltip&&this.options.tooltip.shared},e.prototype._createPannable=function(){var t=this.options;!1!==t.pannable&&(this._pannable=new Ch(this._plotArea,t.pannable))},e.prototype._createZoomSelection=function(){var t=this.options.zoomable,e=(t||{}).selection;!1!==t&&!1!==e&&(this._zoomSelection=new Ah(this,e))},e.prototype._createMousewheelZoom=function(){var t=this.options.zoomable,e=(t||{}).mousewheel;!1!==t&&!1!==e&&(this._mousewheelZoom=new Th(this,e))},e.prototype._toggleDragZoomEvents=function(){var t=this.options.pannable,e=this.options.zoomable,n=(e||{}).selection,i=(e||{}).mousewheel,r=!(t||!1!==e&&!1!==n||this.requiresHandlers([Vs,Hs,Us])),o=(!1===e||!1===i)&&!this.requiresHandlers([Ws,qs,Ks]),s=this.element;this._dragZoomEnabled&&r&&o?(s.style.touchAction=this._touchAction||"",this._dragZoomEnabled=!1):this._dragZoomEnabled||r&&o||(s.style.touchAction="none",this._dragZoomEnabled=!0),this._toggleDomEvents(!r,!o)},e.prototype._toggleDomEvents=function(t,e){var n=this.domEvents;n&&(n.toggleDrag&&n.toggleDrag(t),n.toggleZoom&&n.toggleZoom(e))},e.prototype._createTooltip=function(){var t=this.options.tooltip;return this._sharedTooltip()?this._createSharedTooltip(t):new su(this.chartService,t)},e.prototype._createSharedTooltip=function(t){return new lu(this._plotArea,t)},e.prototype.applyDefaults=function(t,e){!function(t,e){var n,i,r,o=(e||{}).axisDefaults||{};function s(t){var e=(t||{}).color||i.color,r=st({},o,o[n],i,i[n],{line:{color:e},labels:{color:e},title:{color:e}},t);return delete r[n],r}for(var a=0;a<Qd.length;a++)n=Qd[a]+"Axis",i=t.axisDefaults||{},r=(r=[].concat(t[n])).map(s),t[n]=r.length>1?r:r[0]}(t,e),function(t,e){var n=t.series,i=n.length,r=t.seriesDefaults,o=st({},t.seriesDefaults),s=e?st({},e.seriesDefaults):{},a=st({},s);lp(o),lp(a);for(var l=0;l<i;l++){var c=n[l].type||t.seriesDefaults.type,h=st({data:[]},a,s[c],{tooltip:t.tooltip},o,r[c]);n[l]._defaults=h,n[l]=st({},h,n[l]),n[l].data=n[l].data||[]}}(t,e)},e.prototype.applySeriesColors=function(){for(var t=this.options,e=t.series,n=t.seriesColors||[],i=0;i<e.length;i++){var r=e[i],o=n[i%n.length],s=r._defaults;r.color=r.color||o,s&&(s.color=s.color||o)}},e.prototype._getModel=function(){var t=this.options,e=this._createPlotArea(),n=new pi(this._modelOptions());n.chart=this,n._plotArea=e;var i=Ei.buildTitle(t.title),r=Ei.buildTitle(t.subtitle,{align:t.title.align,position:t.title.position});if(n.append.apply(n,Ei.orderTitles([i,r])),t.legend&&t.legend.visible){var o=new Zh(e.options.legend,this.chartService);n.append(o),n._legend=o}return n.append(e),n.reflow(),n},e.prototype._modelOptions=function(){var t=this.options,e=this.getSize();return st({transitions:t.transitions,width:e.width||600,height:e.height||400},t.chartArea)},e.prototype._createPlotArea=function(t){var e=this.options;return tu.current.create(t?[]:e.series,e,this.chartService)},e.prototype._setupSelection=function(){for(var t=this._plotArea.axes,e=this._selections=[],n=0;n<t.length;n++){var i=t[n],r=i.options;if(i instanceof Ir&&r.select&&!r.vertical){var o=i.range(),s=new ru(this,i,st({min:o.min,max:o.max},r.select));e.push(s)}}},e.prototype._selectStart=function(t){return this.trigger(Xs,t)},e.prototype._select=function(t){return this.trigger(Gs,t)},e.prototype._selectEnd=function(t){return this.trigger(Ys,t)},e.prototype._initHandlers=function(){this._clickHandler=this._click.bind(this),this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._mousedownHandler=this._mousedown.bind(this),this._mousewheelHandler=this._mousewheel.bind(this),this._mouseleaveHandler=this._mouseleave.bind(this),this._surfaceMouseenterHandler=this._mouseover.bind(this),this._surfaceMouseleaveHandler=this._mouseout.bind(this),this._mousemove=(0,yh.A)(this._mousemove.bind(this),20)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,n=0;n<e.length;n++)if(e[n].requiresHandlers(t))return!0},e.prototype.trigger=function(t,e){void 0===e&&(e={}),e.sender=this,t===Js?e.anchor.point=this._toDocumentCoordinates(e.anchor.point):t===Bs?this._updateDrilldownPoint(e.point):t===js?this._resetDrilldownPoint():t===Ls?(this._focusPoint(e.point),this._startDrilldown(e.point)):t===Rs&&this._focusLegendItem(e);for(var n=this.observers,i=!1,r=0;r<n.length;r++)n[r].trigger(t,e)&&(i=!0);return i},e.prototype._attachEvents=function(){var t,e,n=this.element;this._touchAction=n.style.touchAction,$t(n,((t={})[ep]=this._clickHandler,t[sa]=this._mousewheelHandler,t[np]=this._mouseleaveHandler,t[ip]=this._keydownHandler,t.mousedown=this._mousedownHandler,t[rp]=this._focusHandler,t[op]=this._blurHandler,t)),this._shouldAttachMouseMove()&&$t(n,((e={})[tp]=this._mousemove,e)),this.domEvents=qi.create(this.element,{start:this._start.bind(this),move:this._move.bind(this),end:this._end.bind(this),tap:this._tap.bind(this),gesturestart:this._gesturestart.bind(this),gesturechange:this._gesturechange.bind(this),gestureend:this._gestureend.bind(this)}),this._toggleDragZoomEvents()},e.prototype._mouseleave=function(t){this._hoveredPoint&&(this._hoveredPoint.out(this,t),this._hoveredPoint=null),this._plotAreaHovered&&(this._plotAreaHovered=!1,this.trigger($s)),this._hasInactiveOpacity()&&this._activeChartInstance&&(this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._updateSeriesOpacity(null,!0))},e.prototype._cancelDomEvents=function(){this.domEvents&&this.domEvents.cancel&&this.domEvents.cancel()},e.prototype._gesturestart=function(t){this._mousewheelZoom&&!this._stopChartHandlers(t)&&(this._gestureDistance=t.distance,this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking())},e.prototype._gestureend=function(t){this._zooming&&!this._stopChartHandlers(t)&&(this.surface&&this.surface.resumeTracking(),this._zooming=!1,this.trigger(Ks,{}))},e.prototype._gesturechange=function(t){var e=this._mousewheelZoom;if(e&&!this._stopChartHandlers(t)){t.preventDefault();var n=this._gestureDistance,i=-t.distance/n+1;if(Math.abs(i)>=.1){i=Math.round(10*i),this._gestureDistance=t.distance;var r={delta:i,axisRanges:cp(this._plotArea.axes),originalEvent:t};if(this._zooming||!this.trigger(Ws,r)){var o=this._eventCoordinates(t);this._zooming||(this._zooming=!0),(r.axisRanges=e.updateRanges(i,o))&&!this.trigger(qs,r)&&e.zoom()}}}},e.prototype._mouseout=function(t){if(t.element){var e=this._drawingChartElement(t.element,t);e&&e.leave&&e.leave(this,t.originalEvent)}},e.prototype._start=function(t){var e=this._eventCoordinates(t);!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(e)&&(this.requiresHandlers([Vs,Hs,Us])&&this._startNavigation(t,e,Vs),this._pannable&&this._pannable.start(t)&&(this.surface.suspendTracking(),this._unsetActivePoint(),this._clearFocusedElement(),this._suppressHover=!0,this.chartService.panning=!0),this._zoomSelection&&this._zoomSelection.start(t)&&this.trigger(Ws,{axisRanges:cp(this._plotArea.axes),originalEvent:t}))},e.prototype._move=function(t){var e=this._navState,n=this._pannable;if(!this._stopChartHandlers(t)){if(n){var i=n.move(t);i&&!this.trigger(Hs,{axisRanges:i,originalEvent:t})&&n.pan()}else if(e){for(var r={},o=e.axes,s=0;s<o.length;s++){var a=o[s];if(a.options.name){var l=a.options.vertical?t.y:t.x,c=l.startLocation-l.location;0!==c&&(r[a.options.name]=a.translateRange(c))}}e.axisRanges=r,this.trigger(Hs,{axisRanges:r,originalEvent:t})}this._zoomSelection&&this._zoomSelection.move(t)}},e.prototype._end=function(t){if(!this._stopChartHandlers(t)){var e=this._pannable;if(e&&e.end(t)?(this.surface.resumeTracking(),this.trigger(Us,{axisRanges:cp(this._plotArea.axes),originalEvent:t}),this._suppressHover=!1,this.chartService.panning=!1):this._endNavigation(t,Us),this._zoomSelection){var n=this._zoomSelection.end(t);n&&!this.trigger(qs,{axisRanges:n,originalEvent:t})&&(this._zoomSelection.zoom(),this.trigger(Ks,{axisRanges:n,originalEvent:t}))}}},e.prototype._stopChartHandlers=function(t){var e=this._selections||[];if(!e.length)return!1;var n=this._eventCoordinates(t),i=this._plotArea.paneByPoint(n);if(i)for(var r=0;r<e.length;r++)if(e[r].onPane(i))return!0},e.prototype._mousewheelZoomRate=function(){var t=(this.options.zoomable||{}).mousewheel||{};return ee(t.rate,.3)},e.prototype._mousewheel=function(t){var e=this,n=Rt(t),i=this._mousewheelZoom,r=this._eventCoordinates(t);if(!this._stopChartHandlers(t)&&this._plotArea.backgroundContainsPoint(r))if(i){var o={delta:n,axisRanges:cp(this._plotArea.axes),originalEvent:t};!this._zooming&&this.trigger(Ws,o)||(t.preventDefault(),this._zooming||(this._unsetActivePoint(),this._clearFocusedElement(),this.surface.suspendTracking(),this._zooming=!0),this._mwTimeout&&clearTimeout(this._mwTimeout),o.axisRanges=i.updateRanges(n,r),o.axisRanges&&!this.trigger(qs,o)&&i.zoom(),this._mwTimeout=setTimeout((function(){e.trigger(Ks,o),e._zooming=!1,e.surface&&e.surface.resumeTracking()}),150))}else{var s=this._navState;if(!s)this._startNavigation(t,r,Ws)||(s=this._navState);if(s){var a=s.totalDelta||n;s.totalDelta=a+n;for(var l=this._navState.axes,c={},h=0;h<l.length;h++){var u=l[h],d=u.options.name;d&&(c[d]=u.scaleRange(-a*e._mousewheelZoomRate(),r))}this.trigger(qs,{delta:n,axisRanges:c,originalEvent:t}),this._mwTimeout&&clearTimeout(this._mwTimeout),this._mwTimeout=setTimeout((function(){e._endNavigation(t,Ks)}),150)}}},e.prototype._startNavigation=function(t,e,n){var i=this._model._plotArea,r=i.findPointPane(e),o=i.axes.slice(0);if(r){var s=cp(o);this.trigger(n,{axisRanges:s,originalEvent:t})?this._cancelDomEvents():(this._suppressHover=!0,this._unsetActivePoint(),this._clearFocusedElement(),this._navState={axisRanges:s,pane:r,axes:o})}},e.prototype._endNavigation=function(t,e){this._navState&&(this.trigger(e,{axisRanges:this._navState.axisRanges,originalEvent:t}),this._suppressHover=!1,this._navState=null)},e.prototype._getChartElement=function(t,e){var n=this.surface.eventTarget(t);if(n)return this._drawingChartElement(n,t,e)},e.prototype._drawingChartElement=function(t,e,n){for(var i,r=t;r&&!i;)i=r.chartElement,r=r.parent;if(i)return i.aliasFor&&(i=i.aliasFor(e,this._eventCoordinates(e))),n&&(i=i.closest(n))&&i.aliasFor&&(i=i.aliasFor()),i},e.prototype._eventCoordinates=function(t){var e=qt(t);return this._toModelCoordinates(e.x,e.y)},e.prototype._elementPadding=function(){if(!this._padding){var t=ut(this.element,["paddingLeft","paddingTop"]),e=t.paddingLeft,n=t.paddingTop;this._padding={top:n,left:e}}return this._padding},e.prototype._toDocumentCoordinates=function(t){var e=this._elementPadding(),n=Vt(this.element);return{left:Qt(t.x+e.left+n.left),top:Qt(t.y+e.top+n.top)}},e.prototype._toModelCoordinates=function(t,e){var n=this.element,i=Vt(n),r=this._elementPadding(),o=ye(n).invert(),s=new Pn.A(t-i.left-r.left,e-i.top-r.top).transform(o);return new Cn(s.x,s.y)},e.prototype._tap=function(t){var e=this,n=this.surface.eventTarget(t),i=this._drawingChartElement(n,t),r=this._sharedTooltip();this._startHover(n,t)||r||this._unsetActivePoint(),r&&this._trackSharedTooltip(this._eventCoordinates(t),t,!0),this._propagateClick(i,t),this.handlingTap=!0,setTimeout((function(){e.handlingTap=!1}),0)},e.prototype._click=function(t){var e=this._getChartElement(t);this._propagateClick(e,t)},e.prototype._propagateClick=function(t,e){for(var n=t;n;)n.click&&n.click(this,e),n=n.parent},e.prototype._isLegendBeforeChart=function(){var t=this.options.legend.position,e=this._legend;return e&&e.hasItems()&&(t===R||t===k)},e.prototype._focus=function(){this._preventInitialPointFocus||(this._isLegendBeforeChart()?this._focusFirstLegendItem():this._focusFirstPoint()),this._preventInitialPointFocus=!1},e.prototype._keydown=function(t){var e=this._focusState,n=e.legendInFocus,i=e.focusedElement,r=this._legend;if("Tab"===t.key){this._clearFocusedElement();var o=this._isLegendBeforeChart();n&&o!==t.shiftKey?this._navigatePoints(t):!n&&o===t.shiftKey&&r.hasItems()&&this._navigateLegend(t)}else"Escape"===t.key?(i&&t.stopPropagation(),this._tooltip&&this._tooltip.visible?this._hideTooltip():this._blur()):"Enter"===t.key?i&&(this._focusState.preserveHighlight=!0,this._propagateClick(i,t),this._focusElement(i)):n?this._navigateLegend(t):this._navigatePoints(t)},e.prototype._navigatePoints=function(t){var e=this,n=this._focusState,i=this._plotArea;if(n.legendInFocus=!1,!n.focusedElement)return this._focusFirstPoint(),void t.preventDefault();var r=function(i){n.focusedPoint=i,e._focusElement(n.focusedPoint),e._displayTooltip(i),t.preventDefault()};switch(t.key){case c:r(i.getPointToTheRight(n.focusedPoint));break;case l:r(i.getPointToTheLeft(n.focusedPoint));break;case a:r(i.getPointBelow(n.focusedPoint));break;case s:r(i.getPointAbove(n.focusedPoint))}},e.prototype._navigateLegend=function(t){var e=this,n=this,i=n._focusState,r=n._legend,o=n.chartService.rtl;if(i.legendInFocus=!0,!i.focusedElement)return this._focusFirstLegendItem(),void t.preventDefault();var h=r.getItems().length,u=function(n){i.focusedLegendItemIndex=n(i.focusedLegendItemIndex,h),e._focusElement(e._getFocusedLegendItem()),t.preventDefault()};switch(t.key){case s:case l:u(o?Q:tt);break;case a:case c:u(o?tt:Q)}},e.prototype._focusFirstPoint=function(){var t=this._focusState.focusedPoint=this._plotArea.getFirstPoint();t&&(this._focusElement(t),this._displayTooltip(t))},e.prototype._hasFocus=function(){return this.element.ownerDocument.activeElement===this.element},e.prototype._mousedown=function(){this._hasFocus()||(this._preventInitialPointFocus=!0)},e.prototype._focusChart=function(){this._hasFocus()||(this._preventInitialPointFocus=!0,this.element.focus())},e.prototype._focusPoint=function(t){this._focusState.focusedPoint=t,this._focusChart(),this._focusElement(t,!0)},e.prototype._focusFirstLegendItem=function(){var t=this._focusState;t.focusedLegendItemIndex=0,this._focusElement(this._getFocusedLegendItem()),t.legendInFocus=!0,this._hideTooltip()},e.prototype._focusLegendItem=function(t){var e=this._focusState;e.focusedLegendItemIndex=this._legend.getItems().findIndex((function(e){return e.options.series.index===t.seriesIndex&&e.options.pointIndex===t.pointIndex})),e.legendInFocus=!0,this._focusChart(),this._focusElement(this._getFocusedLegendItem(),!0)},e.prototype._getFocusedLegendItem=function(){var t=this._focusState;return this._legend.getItems()[t.focusedLegendItemIndex]},e.prototype._focusElement=function(t,e){var n=this._focusState;if(this._clearFocusedElement(),t&&(n.focusedElement=t,this._setElementActiveDescendant(t),!e))if(t.focusVisual(),n.legendInFocus){var i=t.options;this._showSeriesInactiveOpacity(i.series.index,i.pointIndex)}else this._showInactiveOpacity(t)},e.prototype._clearFocusedElement=function(){var t=this._focusState;t&&(t.focusedElement&&(t.focusedElement.clearFocusFromVisual(),this._clearElementActiveDescendant()),t.focusedElement=null)},e.prototype._setElementActiveDescendant=function(t){"canvas"===this.options.renderAs&&(this._pseudoFocusedElement=this._createPseudoFocusedElement(t),this.element.append(this._pseudoFocusedElement)),this.element.setAttribute(h,t._id)},e.prototype._clearElementActiveDescendant=function(){this._pseudoFocusedElement&&(this._pseudoFocusedElement.remove(),this._pseudoFocusedElement=null),this.element.removeAttribute(h)},e.prototype._createPseudoFocusedElement=function(t){var e=document.createElement("div"),n=t.options.accessibility;e.id=t._id,e.setAttribute("aria-label",t.getAriaLabelText()),e.setAttribute("role",n.role),e.setAttribute("aria-roledescription",n.ariaRoleDescription);var i=n.ariaChecked;return Ht(i)&&e.setAttribute("aria-checked",i),e},e.prototype._blur=function(){this._focusState.legendInFocus=!1,this._clearFocusedElement(),this._hideInactiveOpacity()},e.prototype._startHover=function(t,e){if(this._suppressHover)return!1;var n=this._drawingChartElement(t,e,(function(t){return(t.hover||t.over)&&!(t instanceof uc)})),i=this._activePoint;return this._updateHoveredPoint(n,e),n&&i!==n&&n.hover&&(this._activePoint=n,this._sharedTooltip()||n.hover(this,e)||(this._displayTooltip(n),this._showInactiveOpacity(n))),n},e.prototype._displayTooltip=function(t){st({},this.options.tooltip,t.options.tooltip).visible&&this._tooltip.show(t)},e.prototype._hideTooltip=function(){this._tooltip&&this._tooltip.hide()},e.prototype._displayInactiveOpacity=function(t,e,n){var i=this._activeChartInstance=this._chartInstanceFromPoint(t);if(i)if(e)this._updateSeriesOpacity(t),this._applySeriesOpacity(i.children,null,!0),this._applySeriesOpacity(i.children,t.series),this._highlight.show(n||t);else{var r;if(!i.supportsPointInactiveOpacity())return void this._highlight.show(t);(r=this._getInactivePoints(t,i))&&r.length&&this._highlight.show(r,1-this._getInactiveOpacityForSeries(t.series))}},e.prototype._getInactivePoints=function(t,e){return this._getAllPointsOfType(e,t.constructor).filter((function(e){return e!==t}))},e.prototype._getAllPointsOfType=function(t,e){for(var n=[],i=0;i<t.children.length;i++){var r=t.children[i];r.constructor===e?n.push(r):r.children&&r.children.length&&(n=n.concat(this._getAllPointsOfType(r,e)))}return n},e.prototype._updateHoveredPoint=function(t,e){var n=this._hoveredPoint;n&&n!==t&&(n.out(this,e),this._hoveredPoint=null),t&&n!==t&&t.over&&(this._hoveredPoint=t,t.over(this,e))},e.prototype._updateDrilldownPoint=function(t){t&&t.series&&(Io.current.bindPoint(t.series,null,t.dataItem).fields.drilldown&&(this._drilldownState={cursor:this.element.style.cursor},this.element.style.cursor="pointer"))},e.prototype._resetDrilldownPoint=function(){this._drilldownState&&(this.element.style.cursor=this._drilldownState.cursor,this._drilldownState=null)},e.prototype._startDrilldown=function(t){if(t&&t.series){var e=t.series,n=Io.current.bindPoint(e,null,t.dataItem).fields.drilldown;if(n){var i={series:e,point:t,value:n,sender:this};this.trigger("drilldown",i)}}},e.prototype._updateSeriesOpacity=function(t,e){for(var n=this._plotArea,i=n.series.length,r=0;r<i;r++){var o=n.series[r],s=this._getDefaultOpacityForSeries(o),a=this._getInactiveOpacityForSeries(o);e||o===t.series?(o.opacity=s,o.line&&(o.line.opacity=s)):(o.defaultOpacity=s,o.opacity=a,o.line&&(o.line.opacity=a))}},e.prototype._applySeriesOpacity=function(t,e,n,i){for(var r=0;r<t.length;r++){var o=t[r],s=o.series||i;if(s&&(s.highlight||{}).visible&&o.visual){var a=i?i.opacity:o.series.opacity;(s!==e||n)&&o.visual.opacity(n?1:a)}o.children&&o.children.length&&this._applySeriesOpacity(o.children,e,n,o.series)}},e.prototype._chartInstanceFromPoint=function(t){for(var e=t.parent;e&&!e.plotArea;)e=e.parent;return e},e.prototype._showInactiveOpacity=function(t){var e=this._plotArea.series.length>1;this._hasInactiveOpacity()?this._displayInactiveOpacity(t,e):this._highlight.show(t)},e.prototype._hideInactiveOpacity=function(t){var e=this._plotArea.series.length>1;this._hasInactiveOpacity()&&(e&&this._activeChartInstance&&(this._updateSeriesOpacity(t,!0),this._applySeriesOpacity(this._activeChartInstance.children,null,!0),this._activeChartInstance=null),this._highlight&&this._highlight.hide(),this._activePoint=null)},e.prototype._hasInactiveOpacity=function(){var t=void 0!==this.options.seriesDefaults.highlight.inactiveOpacity,e=this.options.series.filter((function(t){return void 0!==t.highlight.inactiveOpacity})).length>0;return t||e},e.prototype._getInactiveOpacityForSeries=function(t){var e=this.options.seriesDefaults.highlight.inactiveOpacity;return t.highlight.inactiveOpacity||e||t.opacity||1},e.prototype._getDefaultOpacityForSeries=function(t){return t.defaultOpacity||t.opacity||1},e.prototype._mouseover=function(t){var e,n=this._startHover(t.element,t.originalEvent);n&&n.tooltipTracking&&!this._mouseMoveTrackHandler&&!this._sharedTooltip()&&(this._mouseMoveTrackHandler=this._mouseMoveTracking.bind(this),$t(document,((e={})[tp]=this._mouseMoveTrackHandler,e)))},e.prototype._mouseMoveTracking=function(t){var e,n=this,i=n.options,r=n._tooltip,o=n._highlight,s=n._activePoint,a=this._eventCoordinates(t);if(this._plotArea.box.containsPoint(a)){if(s&&s.tooltipTracking&&s.series&&s.parent.getNearestPoint){var l=s.parent.getNearestPoint(a.x,a.y,s.seriesIx);if(l&&l!==s)if(this._activePoint=l,!l.hover(this,t))st({},i.tooltip,l.options.tooltip).visible&&r.show(l),o.show(l)}}else te(document,((e={})[tp]=this._mouseMoveTrackHandler,e)),this._unsetActivePoint(),this._clearFocusedElement(),this._mouseMoveTrackHandler=null,this._hideInactiveOpacity(s)},e.prototype._mousemove=function(t){var e=this._eventCoordinates(t),n=this._plotArea;if(this._trackCrosshairs(e),n.hover){var i=n.backgroundContainsPoint(e);i?(this._plotAreaHovered=!0,this._plotArea.hover(this,t)):this._plotAreaHovered&&!i&&(this._plotAreaHovered=!1,this.trigger($s))}this._sharedTooltip()&&this._trackSharedTooltip(e,t)},e.prototype._trackCrosshairs=function(t){for(var e=this._plotArea.crosshairs,n=0;n<e.length;n++){var i=e[n];i.box.containsPoint(t)?i.showAt(t):i.hide()}},e.prototype._trackSharedTooltip=function(t,e,n){if(!this._suppressHover){var i=this,r=i.options.tooltip,o=i._plotArea,s=i._plotArea.categoryAxis,a=i._tooltip,l=i._highlight;if(o.backgroundContainsPoint(t)){var c=s.pointCategoryIndex(t);if(c!==this._tooltipCategoryIx||!this._sharedHighlight&&n){var h=o.pointsByCategoryIndex(c),u=h.map((function(t){return t.eventArgs(e)})),d=u[0]||{};d.categoryPoints=u,h.length>0&&!this.trigger(Ns,d)?(r.visible&&a.showAt(h,t),l.show(h),this._sharedHighlight=!0):a.hide(),this._tooltipCategoryIx=c}else n&&this._sharedHighlight&&(l.hide(),a.hide(),this._sharedHighlight=!1)}else this._sharedHighlight&&(l.hide(),a.hide(),this._tooltipCategoryIx=null,this._sharedHighlight=!1)}},e.prototype.hideElements=function(t){var e=this._plotArea;this._mousemove.cancel(),e.hideCrosshairs(),this._unsetActivePoint(t)},e.prototype._unsetActivePoint=function(t){var e=this._highlight;this._activePoint=null,this._hoveredPoint=null,t&&t.keepTooltipOpen||this._hideTooltip(),this._tooltipCategoryIx=null,this._sharedHighlight=!1,e&&e.hide()},e.prototype._deferRedraw=function(){this._redraw()},e.prototype._clearRedrawTimeout=function(){this._redrawTimeout&&(clearInterval(this._redrawTimeout),this._redrawTimeout=null)},e.prototype.bindCategories=function(){for(var t=this.options,e=[].concat(t.categoryAxis),n=0;n<e.length;n++){var i=e[n];!1!==i.autoBind&&this.bindCategoryAxisFromSeries(i,n)}},e.prototype.bindCategoryAxisFromSeries=function(t,e){var n=this,i=new Set,r=this.options.series.filter((function(n){return n.categoryAxis===t.name||!n.categoryAxis&&0===e})),o=r.some((function(t){return Boolean(t.categoryField)})),s=r.filter((function(t){return t.data&&t.data.length>0})),a=s.map((function(t){return Io.current.bindPoint(t,0).fields.category})),l=a.reduce((function(e,n){return e||Ea(t,n)}),!1);if(s.filter((function(t,e){return t.categoryField||Ht(a[e])})).forEach((function(t){return t.data.forEach((function(e,r){var o=Io.current.bindPoint(t,r).fields.category;if(l){var s=Ca(o,e,n.chartService.intl);o=s?s.getTime():void 0}i.add(o)}))})),i.size>0){var c=Array.from(i.values());l&&(c=c.sort().map((function(t){return t&&new Date(t)}))),t.categories=c}else o&&(t.categories=[])},e.prototype._isBindable=function(t){for(var e=Io.current.valueFields(t),n=!0,i=0;i<e.length;i++){var r=e[i];if(r===L?r="field":r+="Field",!Ht(t[r])){n=!1;break}}return n},e.prototype._noTransitionsRedraw=function(){var t,e=this.options;!1!==e.transitions&&(e.transitions=!1,t=!0),this._redraw(),t&&(e.transitions=!0)},e.prototype._legendItemHover=function(t,e){this._showSeriesInactiveOpacity(t,e)},e.prototype._showSeriesInactiveOpacity=function(t,e){var n,i=this._plotArea,r=this._highlight,o=(i.srcSeries||i.series)[t];if(n=kt(o.type,[cs,ns,is,rs])?i.findPoint((function(n){return n.series.index===t&&n.index===e})):i.pointsBySeriesIndex(t),this._hasInactiveOpacity()&&o.visible&&n){var s=i.series.length>1,a=n.length?n[0]:n;this._displayInactiveOpacity(a,s,n)}else r.show(n)},e.prototype._shouldAttachMouseMove=function(){return this._plotArea.crosshairs.length||this._tooltip&&this._sharedTooltip()||this.requiresHandlers([zs,$s])},e.prototype.updateMouseMoveHandler=function(){var t,e;te(this.element,((t={})[tp]=this._mousemove,t)),this._shouldAttachMouseMove()&&$t(this.element,((e={})[tp]=this._mousemove,e))},e.prototype.applyOptions=function(t,e){up(this._originalOptions,t),this._originalOptions=st(this._originalOptions,t),this.options=st({},this._originalOptions),e&&(this._theme=e,this.chartService.theme=e),this._initTheme(this.options,this._theme),this._toggleDragZoomEvents()},e.prototype.setOptions=function(t,e){this.applyOptions(t,e),this.bindCategories(),this.redraw(),this.updateMouseMoveHandler()},e.prototype.setDirection=function(t){this.chartService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&this._destroySurface()},e.prototype.setIntlService=function(t){this.chartService.intl=t},e.prototype.noTransitionsRedraw=function(){this._noTransitionsRedraw()},e.prototype.destroy=function(){var t,e;this._destroyed=!0,te(this.element,((t={})[ep]=this._clickHandler,t[sa]=this._mousewheelHandler,t[tp]=this._mousemove,t[np]=this._mouseleaveHandler,t[ip]=this._keydownHandler,t[rp]=this._focusHandler,t[op]=this._blurHandler,t)),this.domEvents&&(this.domEvents.destroy(),delete this.domEvents),this._mouseMoveTrackHandler&&te(document,((e={})[tp]=this._mouseMoveTrackHandler,e)),this._focusState=null,this._destroyView(),this._destroySurface(),this._clearRedrawTimeout()},e.prototype._destroySurface=function(){var t=this.surface;t&&(t.unbind("mouseenter",this._surfaceMouseenterHandler),t.unbind("mouseleave",this._surfaceMouseleaveHandler),t.destroy(),this.surface=null)},e.prototype._destroySelections=function(){var t=this._selections;if(t)for(;t.length>0;)t.shift().destroy()},e.prototype._destroyView=function(){var t=this._model;t&&(t.destroy(),this._model=null),this._unsetActivePoint(),this._clearFocusedElement(),this._resetDrilldownPoint(),this._destroySelections(),this._tooltip&&this._tooltip.destroy(),this._highlight&&this._highlight.destroy(),this._zoomSelection&&(this._zoomSelection.destroy(),delete this._zoomSelection),this._pannable&&(this._pannable.destroy(),delete this._pannable),this._mousewheelZoom&&(this._mousewheelZoom.destroy(),delete this._mousewheelZoom)},e}(Nt.A);function ap(t,e){if(t)for(var n=0;n<t.length;n++)if(t[n].category===e)return[t[n]]}function lp(t){delete t.bar,delete t.column,delete t.rangeColumn,delete t.line,delete t.verticalLine,delete t.pie,delete t.donut,delete t.area,delete t.verticalArea,delete t.scatter,delete t.scatterLine,delete t.bubble,delete t.candlestick,delete t.ohlc,delete t.boxPlot,delete t.bullet,delete t.verticalBullet,delete t.polarArea,delete t.polarLine,delete t.radarArea,delete t.radarLine,delete t.waterfall}function cp(t){for(var e={},n=0;n<t.length;n++){var i=t[n],r=i.options.name;r&&(e[r]=i.range())}return e}var hp=["data","categories"];function up(t,e){for(var n in e)if(!kt(n,hp)&&De(e,n)){var i=e[n],r=t[n];if(Ht(r)){var o=null===i;o||!Ht(i)?(delete t[n],o&&delete e[n]):r&&at(i)&&at(r)&&up(r,i)}}}function dp(t){for(var e=0;e<t.length;e++)t[e].notifyRender()}re(sp,{renderAs:"",chartArea:{},legend:{visible:!0,labels:{},accessibility:{highlight:{border:{opacity:1,color:u,width:2}}}},categoryAxis:{},seriesDefaults:{type:es,data:[],highlight:{visible:!0},labels:{},negativeValues:{visible:!1},accessibility:{highlight:{border:{opacity:1,width:2},zIndex:200}}},series:[],seriesColors:null,tooltip:{visible:!1},transitions:!0,valueAxis:{},plotArea:{},title:{},xAxis:{},yAxis:{},panes:[{}],pannable:!1,zoomable:!1});const pp=sp;var fp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._slotAnchor=function(t,e){var n=this.plotArea.categoryAxis.options.vertical,i=n?{horizontal:"left",vertical:"center"}:{horizontal:"center",vertical:"bottom"};return{point:n?new Cn(this.plotArea.box.x2,e.center().y):new Cn(e.center().x,-2),align:i}},e.prototype._defaultAnchor=function(t,e){return this._slotAnchor({},e)},e}(lu);const gp=fp;var mp=[Yo,Qo];function yp(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];e[n]=i.style.display,i.style.display="none"}return e}function vp(t,e){for(var n=0;n<t.length;n++)t[n].style.display=e[n]}function bp(t){return Y(t)?[t]:t}var wp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._setElementClass=function(t){V(t,"k-sparkline")},e.prototype._initElement=function(e){t.prototype._initElement.call(this,e),this._initialWidth=Math.floor(Wt(e).width)},e.prototype._resize=function(){var e=this.element,n=yp(e.childNodes);this._initialWidth=Math.floor(Wt(e).width),vp(e.childNodes,n),t.prototype._resize.call(this)},e.prototype._modelOptions=function(){var t=this.options,e=this._surfaceWrap(),n=yp(e.childNodes),i=document.createElement("span");i.innerHTML="&nbsp;",e.appendChild(i);var r=st({width:this._autoWidth,height:Wt(e).height,transitions:t.transitions},t.chartArea,{inline:!0,align:!1});return Wt(e,{width:r.width,height:r.height}),e.removeChild(i),vp(e.childNodes,n),this.surface&&this.surface.resize(),r},e.prototype._surfaceWrap=function(){if(!this.stage){var t=this.stage=document.createElement("span");this.element.appendChild(t)}return this.stage},e.prototype._createPlotArea=function(e){var n=t.prototype._createPlotArea.call(this,e);return this._autoWidth=this._initialWidth||this._calculateWidth(n),n},e.prototype._calculateWidth=function(t){for(var e=this.options,n=dt(e.chartArea.margin),i=t.charts,r=this._surfaceWrap(),o=0,s=0;s<i.length;s++){var a=i[s],l=(a.options.series||[])[0];if(l){if(l.type===Yo)return 150;if(l.type===Qo)return 150;if(l.type===cs)return Wt(r).height;var c=a.categoryAxis;if(c){var h=c.categoriesCount()*(!a.options.isStacked&&kt(l.type,[es,Ss])?a.seriesOptions.length:1);o=Math.max(o,h)}}}var u=o*e.pointWidth;return u>0&&(u+=n.left+n.right),u},e.prototype._createSharedTooltip=function(t){return new gp(this._plotArea,t)},e.normalizeOptions=function(t){var e=bp(t);return(e=U(e)?{seriesDefaults:{data:e}}:st({},e)).series||(e.series=[{data:bp(e.data)}]),st(e,{seriesDefaults:{type:e.type}}),(kt(e.series[0].type,mp)||kt(e.seriesDefaults.type,mp))&&(e=st({},{categoryAxis:{crosshair:{visible:!1}}},e)),e},e}(pp);re(wp,{chartArea:{margin:2},axisDefaults:{visible:!1,majorGridLines:{visible:!1},valueAxis:{narrowRange:!0}},seriesDefaults:{type:"line",area:{line:{width:.5}},bar:{stack:!0},padding:2,width:.5,overlay:{gradient:null},highlight:{visible:!1},border:{width:0},markers:{size:2,visible:!1}},tooltip:{visible:!0,shared:!0},categoryAxis:{crosshair:{visible:!0,tooltip:{visible:!1}}},legend:{visible:!1},transitions:!1,pointWidth:5,panes:[{clip:!1}]});const xp=wp;const _p=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){this._initialOpacity=parseFloat(ut(this.element,"opacity").opacity)},e.prototype.step=function(t){ut(this.element,{opacity:String(Et(this._initialOpacity,0,t))})},e.prototype.abort=function(){t.prototype.abort.call(this),ut(this.element,{display:"none",opacity:String(this._initialOpacity)})},e.prototype.cancel=function(){t.prototype.abort.call(this),ut(this.element,{opacity:String(this._initialOpacity)})},e}(Qn);function Sp(t,e){var n=document.createElement("div");return n.className=t,e&&(n.style.cssText=e),n}var Cp=function(t){function e(e,n,i){t.call(this),this.options=st({},this.options,i),this.container=e,this.chartService=n;var r=ut(e,["paddingLeft","paddingTop"]);this.chartPadding={top:r.paddingTop,left:r.paddingLeft},this.createElements(),e.appendChild(this.element)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createElements=function(){var t=this.element=Sp("k-navigator-hint","display: none; position: absolute; top: 1px; left: 1px;"),e=this.tooltip=Sp("k-tooltip k-chart-tooltip"),n=this.scroll=Sp("k-scroll");e.innerHTML="&nbsp;",t.appendChild(e),t.appendChild(n)},e.prototype.show=function(t,e,n){var i=this,r=i.element,o=i.options,s=i.scroll,a=i.tooltip,l=gr(_r(t)+_r(e-t)/2),c=.4*n.width(),h=n.center().x-c,u=(n.center().x-h)/(o.max-o.min),d=l-o.min,p=this.chartService.intl.format(o.format,t,e),f=mt(o);this.clearHideTimeout(),this._visible||(ut(r,{visibility:"hidden",display:"block"}),this._visible=!0),f&&(p=f({from:t,to:e})),a.innerHTML=p,ut(a,{left:n.center().x-a.offsetWidth/2,top:n.y1});var g=ut(a,["marginTop","borderTopWidth","height"]);ut(s,{width:c,left:h+d*u,top:n.y1+g.marginTop+g.borderTopWidth+g.height/2}),ut(r,{visibility:"visible"})},e.prototype.clearHideTimeout=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this._hideAnimation&&this._hideAnimation.cancel()},e.prototype.hide=function(){var t=this;this.clearHideTimeout(),this._hideTimeout=setTimeout((function(){t._visible=!1,t._hideAnimation=new _p(t.element),t._hideAnimation.setup(),t._hideAnimation.play()}),this.options.hideDelay)},e.prototype.destroy=function(){this.clearHideTimeout(),this.container&&this.container.removeChild(this.element),delete this.container,delete this.chartService,delete this.element,delete this.tooltip,delete this.scroll},e}(Nt.A);re(Cp,{format:"{0:d} - {1:d}",hideDelay:500});const kp=Cp;var Ap="_navigator",Ep=Ap,Tp="_default",Mp=function(t){function e(e){var n;t.call(this),this.chart=e;var i=this.options=st({},this.options,e.options.navigator),r=i.select;r&&(r.from=this.parseDate(r.from),r.to=this.parseDate(r.to)),Ht(i.hint.visible)||(i.hint.visible=i.visible),this.chartObserver=new Ot(this,((n={})[Hs]="_drag",n[Us]="_dragEnd",n[qs]="_zoom",n[Ks]="_zoomEnd",n)),e.addObserver(this.chartObserver)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseDate=function(t){return Er(this.chart.chartService.intl,t)},e.prototype.clean=function(){this.selection&&(this.selection.destroy(),this.selection=null),this.hint&&(this.hint.destroy(),this.hint=null)},e.prototype.destroy=function(){this.chart&&(this.chart.removeObserver(this.chartObserver),delete this.chart),this.clean()},e.prototype.redraw=function(){this._redrawSelf(),this.initSelection()},e.prototype.initSelection=function(){var t,e=this.chart,n=this.options,i=this.mainAxis(),r=i.roundedRange(),o=r.min,s=r.max,a=n.select,l=a.from,c=a.to,h=a.mousewheel,u=(t=i,Op.prototype=t,new Op);0!==i.categoriesCount()&&(this.clean(),u.box=i.box,this.selection=new ru(e,u,{min:o,max:s,from:l||o,to:c||s,mousewheel:ee(h,{zoom:"left"}),visible:n.visible},new Ot(this,{selectStart:"_selectStart",select:"_select",selectEnd:"_selectEnd"})),n.hint.visible&&(this.hint=new kp(e.element,e.chartService,{min:o,max:s,template:mt(n.hint),format:n.hint.format})))},e.prototype.setRange=function(){var t=this.chart._createPlotArea(!0).namedCategoryAxes[Ep].roundedRange(),e=t.min,n=t.max,i=this.options.select||{},r=i.from||e;r<e&&(r=e);var o=i.to||n;o>n&&(o=n),this.options.select=st({},i,{from:r,to:o}),this.filterAxes()},e.prototype._redrawSelf=function(t){var e=this.chart._plotArea;e&&e.redraw(Gt(e.panes),t)},e.prototype.redrawSlaves=function(){var t=this.chart,e=t._plotArea,n=e.panes.filter((function(t){return t.options.name!==Ap}));e.srcSeries=t.options.series,e.options.categoryAxis=t.options.categoryAxis,e.clearSeriesPointsCache(),e.redraw(n)},e.prototype._drag=function(t){var e,n=this.chart,i=this.selection,r=n._eventCoordinates(t.originalEvent),o=this.mainAxis(),s=o.roundedRange(),a=o.pane.box.containsPoint(r),l=n._plotArea.categoryAxis,c=t.axisRanges[l.options.name],h=this.options.select;if(c&&!a&&i){e=h.from&&h.to?_r(h.to)-_r(h.from):_r(i.options.to)-_r(i.options.from);var u=gr(Yt(_r(c.min),s.min,_r(s.max)-e)),d=gr(Yt(_r(u)+e,_r(s.min)+e,s.max));this.options.select={from:u,to:d},this.options.liveDrag&&(this.filterAxes(),this.redrawSlaves()),i.set(u,d),this.showHint(u,d)}},e.prototype._dragEnd=function(){this.filterAxes(),this.filter(),this.redrawSlaves(),this.hint&&this.hint.hide()},e.prototype.readSelection=function(){var t=this.selection.options,e=t.from,n=t.to,i=this.options.select;i.from=e,i.to=n},e.prototype.filterAxes=function(){var t=this.options.select;void 0===t&&(t={});for(var e=this.chart.options.categoryAxis,n=t.from,i=t.to,r=0;r<e.length;r++){var o=e[r];o.pane!==Ap&&(o.min=n,o.max=i)}},e.prototype.filter=function(){var t=this.chart,e=this.options.select;if(t.requiresHandlers(["navigatorFilter"])){var n=this.mainAxis(),i={from:e.from,to:e.to};if("category"!==n.options.type){var r=new Ur(st({baseUnit:"fit"},t.options.categoryAxis[0],{categories:[e.from,e.to]}),t.chartService).options;i.from=yr(r.min,-r.baseUnitStep,r.baseUnit),i.to=yr(r.max,r.baseUnitStep,r.baseUnit)}this.chart.trigger("navigatorFilter",i)}},e.prototype._zoom=function(t){var e=this,n=e.chart._plotArea.categoryAxis,i=e.selection,r=e.options,o=r.select,s=r.liveDrag,a=this.mainAxis(),l=t.delta;if(i){var c=a.categoryIndex(i.options.from),h=a.categoryIndex(i.options.to),u=this.chart._eventCoordinates(t.originalEvent);t.originalEvent.preventDefault(),Math.abs(l)>1&&(l*=3),h-c>1?(i.zoom(l,u),this.readSelection()):(n.options.min=o.from,o.from=n.scaleRange(-t.delta*this.chart._mousewheelZoomRate(),u).min),s&&(this.filterAxes(),this.redrawSlaves()),i.set(o.from,o.to),this.showHint(this.options.select.from,this.options.select.to)}},e.prototype._zoomEnd=function(t){this._dragEnd(t)},e.prototype.showHint=function(t,e){var n=this.chart._plotArea;this.hint&&this.hint.show(t,e,n.backgroundBox())},e.prototype._selectStart=function(t){return this.chart._selectStart(t)},e.prototype._select=function(t){return this.showHint(t.from,t.to),this.chart._select(t)},e.prototype._selectEnd=function(t){return this.hint&&this.hint.hide(),this.readSelection(),this.filterAxes(),this.filter(),this.redrawSlaves(),this.chart._selectEnd(t)},e.prototype.mainAxis=function(){var t=this.chart._plotArea;if(t)return t.namedCategoryAxes[Ep]},e.prototype.select=function(t,e){var n=this.options.select;return t&&e&&(n.from=this.parseDate(t),n.to=this.parseDate(e),this.filterAxes(),this.filter(),this.redrawSlaves(),this.selection.set(t,e)),{from:n.from,to:n.to}},e.setup=function(t,n){if(void 0===t&&(t={}),void 0===n&&(n={}),!t.__navi){t.__navi=!0;var i=st({},n.navigator,t.navigator),r=t.panes=[].concat(t.panes),o=st({},i.pane,{name:Ap});i.visible||(o.visible=!1,o.height=.1),"top"!==t.navigator.position?r.push(o):r.unshift(o),r.forEach((function(t){t.name=t.name||Tp})),e.attachAxes(t,i),e.attachSeries(t,i,n)}},e.attachAxes=function(t,e){var n=e.series||[],i=t.categoryAxis=[].concat(t.categoryAxis),r=t.valueAxis=[].concat(t.valueAxis);i.concat(r).forEach((function(t){t.pane=t.pane||Tp}));var o=0===_a(n,Es).length,s=st({type:"date",pane:Ap,roundToBaseUnit:!o,justified:o,_collapse:!1,majorTicks:{visible:!0},tooltip:{visible:!1},labels:{step:1},autoBind:e.autoBindElements,autoBaseUnitSteps:{minutes:[1],hours:[1,2],days:[1,2],weeks:[],months:[1],years:[1]}}),a=e.categoryAxis;i.push(st({},s,{maxDateGroups:200},a,{name:Ep,title:null,baseUnit:"fit",baseUnitStep:"auto",labels:{visible:!1},majorTicks:{visible:!1}}),st({},s,a,{name:Ep+"_labels",maxDateGroups:20,baseUnitStep:"auto",labels:{position:""},plotBands:[],autoBaseUnitSteps:{minutes:[]},_overlap:!0}),st({},s,a,{name:Ep+"_ticks",maxDateGroups:200,majorTicks:{width:.5},plotBands:[],title:null,labels:{visible:!1,mirror:!0},_overlap:!0})),r.push(st({name:Ep,pane:Ap,majorGridLines:{visible:!1},visible:!1},e.valueAxis))},e.attachSeries=function(t,e,n){for(var i=t.series=t.series||[],r=[].concat(e.series||[]),o=n.seriesColors,s=e.seriesDefaults,a=0;a<r.length;a++)i.push(st({color:o[a%o.length],categoryField:e.dateField,visibleInLegend:!1,tooltip:{visible:!1}},s,r[a],{axis:Ep,categoryAxis:Ep,autoBind:e.autoBindElements}))},e}(Nt.A);function Op(){}const Ip=Mp;var Dp=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.applyDefaults=function(e,n){var i=Wt(this.element).width||600,r=n,o={seriesDefaults:{categoryField:e.dateField},axisDefaults:{categoryAxis:{name:"default",majorGridLines:{visible:!1},labels:{step:2},majorTicks:{visible:!1},maxDateGroups:Math.floor(i/28)}}};r&&(r=st({},r,o)),Ip.setup(e,r),t.prototype.applyDefaults.call(this,e,r)},e.prototype._setElementClass=function(t){V(t,"k-chart k-stockchart")},e.prototype.setOptions=function(e){this.destroyNavigator(),t.prototype.setOptions.call(this,e)},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this.options.transitions=!1,this._fullRedraw(),this.options.transitions=t},e.prototype._resize=function(){this.noTransitionsRedraw()},e.prototype._redraw=function(){var t=this.navigator;!this._dirty()&&t&&t.options.partialRedraw?t.redrawSlaves():this._fullRedraw()},e.prototype._dirty=function(){var t=this.options,e=xt([].concat(t.series,t.navigator.series),(function(t){return t&&t.visible})).length,n=this._seriesCount!==e;return this._seriesCount=e,n},e.prototype._fullRedraw=function(){var e=this.navigator;e||(e=this.navigator=new Ip(this),this.trigger("navigatorCreated",{navigator:e})),e.clean(),e.setRange(),t.prototype._redraw.call(this),e.initSelection()},e.prototype._trackSharedTooltip=function(e){var n=this._plotArea.paneByPoint(e);n&&n.options.name===Ap?this._unsetActivePoint():t.prototype._trackSharedTooltip.call(this,e)},e.prototype.bindCategories=function(){t.prototype.bindCategories.call(this),this.copyNavigatorCategories()},e.prototype.copyNavigatorCategories=function(){for(var t,e=[].concat(this.options.categoryAxis),n=0;n<e.length;n++){var i=e[n];i.name===Ep?t=i.categories:t&&i.pane===Ap&&(i.categories=t)}},e.prototype.destroyNavigator=function(){this.navigator&&(this.navigator.destroy(),this.navigator=null)},e.prototype.destroy=function(){this.destroyNavigator(),t.prototype.destroy.call(this)},e.prototype._stopChartHandlers=function(e){var n=this._eventCoordinates(e),i=this._plotArea.paneByPoint(n);return t.prototype._stopChartHandlers.call(this,e)||i&&i.options.name===Ap},e.prototype._toggleDragZoomEvents=function(){this._dragZoomEnabled||(this.element.style.touchAction="none",this._dragZoomEnabled=!0)},e}(pp);re(Dp,{dateField:"date",axisDefaults:{categoryAxis:{type:"date",baseUnit:"fit",justified:!0},valueAxis:{narrowRange:!0,labels:{format:"C"}}},navigator:{select:{},seriesDefaults:{markers:{visible:!1},tooltip:{visible:!1},highlight:{visible:!1},line:{width:2}},hint:{},visible:!0},tooltip:{visible:!0},legend:{visible:!1}});const Fp=Dp;var Pp=150,Rp="arrowPointer",Lp="barPointer",Np=.5,Bp=Math.PI/180,jp="inside",zp="linear",$p="outside",Hp="radialPointer",Up="radialRangePointer";function Vp(t,e){var n=t.getOrigin(),i=t.getSize(),r=dt(e);return t.setOrigin([n.x-r.left,n.y-r.top]),t.setSize([i.width+(r.left+r.right),i.height+(r.top+r.bottom)]),t}var Wp=Hn.A,qp=Ln.w,Kp=mi.A;function Xp(t,e){var n=t.box,i=t.children[0].box,r=e.border||{},o=e.background||"",s=qp.fromRect(new kn.A([n.x1,n.y1],[n.width(),n.height()]),{stroke:{}}),a=new Kp(t.text,new Pn.A(i.x1,i.y1),{font:e.font,fill:{color:e.color}}),l=Vp(a.bbox().clone(),e.padding),c=qp.fromRect(l,{stroke:{color:r.width?r.color:"",width:r.width,opacity:r.opacity,dashType:r.dashType,lineJoin:"round",lineCap:"round"},fill:{color:o}}),h=new Wp;return h.append(s),h.append(c),h.append(a),h}function Gp(t,e,n){var i=Ht(t.from)?t.from:E,r=Ht(t.to)?t.to:A;return t.from=Math.max(Math.min(r,i),e),t.to=Math.min(Math.max(r,i),n),t}function Yp(t,e){var n=dt(e);return n.left=-n.left,n.top=-n.top,n.right=-n.right,n.bottom=-n.bottom,Vp(t,n)}var Jp=Ln.w,Zp=mh.A,Qp=function(t){function e(e,n,i,r){void 0===r&&(r={}),t.call(this),this.element=e,this.theme=i,this.contextService=new Ui(this,r),this._originalOptions=st({},this.options,n),this.options=st({},this._originalOptions),this._initTheme(i),this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.surface&&(this.surface.destroy(),this.surface=null),delete this.element,delete this.surfaceElement},e.prototype.value=function(t){var e=this.pointers[0];if(0===arguments.length)return e.value();e.value(t),this._setValueOptions(t)},e.prototype._draw=function(){var t=this.surface;t.clear(),t.draw(this._visuals)},e.prototype.exportVisual=function(){return this._visuals},e.prototype.allValues=function(t){var e=this.pointers,n=[];if(0===arguments.length){for(var i=0;i<e.length;i++)n.push(e[i].value());return n}if(U(t))for(var r=0;r<t.length;r++)Y(t[r])&&e[r].value(t[r]);this._setValueOptions(t)},e.prototype._setValueOptions=function(t){for(var e=[].concat(this.options.pointer),n=[].concat(t),i=0;i<n.length;i++)e[i].value=n[i]},e.prototype.resize=function(){this.noTransitionsRedraw()},e.prototype.noTransitionsRedraw=function(){var t=this.options.transitions;this._toggleTransitions(!1),this.redraw(),this._toggleTransitions(t)},e.prototype.redraw=function(){var t=this._surfaceSize(),e=new kn.A([0,0],[t.width,t.height]);this._initSurface(),this.gaugeArea=this._createGaugeArea(),this._createModel();var n=Yp(e.bbox(),this._gaugeAreaMargin);this.reflow(n)},e.prototype.setOptions=function(t,e){this._originalOptions=st(this._originalOptions,t),this.options=st({},this._originalOptions),this._initTheme(e),this.redraw()},e.prototype.setDirection=function(t){this.contextService.rtl=Boolean(t),this.surface&&"svg"===this.surface.type&&(this.surface.destroy(),this.surface=null)},e.prototype.setIntlService=function(t){this.contextService.intl=t},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=st({},e,this.options);var n=this.options,i=n.pointer;if(U(i)){for(var r=[],o=0;o<i.length;o++)r.push(st({},e.pointer,i[o]));n.pointer=r}},e.prototype._createGaugeArea=function(){var t=this.options.gaugeArea,e=this.surface.size(),n=t.border||{},i=new kn.A([0,0],[e.width,e.height]);return this._gaugeAreaMargin=t.margin||5,n.width>0&&(i=Yp(i,n.width)),Jp.fromRect(i,{stroke:{color:n.width?n.color:"",width:n.width,opacity:n.opacity,dashType:n.dashType,lineJoin:"round",lineCap:"round"},fill:{color:t.background}})},e.prototype._initSurface=function(){var t=this.options,e=this.surface,n=this._surfaceElement(),i=this._surfaceSize();Wt(n,i),e&&e.options.type===t.renderAs?(this.surface.clear(),this.surface.resize()):(e&&e.destroy(),this.surface=Zp.create(n,{type:t.renderAs}))},e.prototype._surfaceSize=function(){var t=this.options,e=this._getSize();return t.gaugeArea&&st(e,t.gaugeArea),e},e.prototype._surfaceElement=function(){return this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement)),this.surfaceElement},e.prototype.getSize=function(){return this._getSize()},e.prototype._getSize=function(){var t=this.element,e=this._defaultSize(),n=t.offsetWidth,i=t.offsetHeight;return n||(n=e.width),i||(i=e.height),{width:n,height:i}},e.prototype._defaultSize=function(){return{width:200,height:200}},e.prototype._toggleTransitions=function(t){this.options.transitions=t;for(var e=0;e<this.pointers.length;e++)this.pointers[e].options.animation.transitions=t},e}(Nt.A);re(Qp,{plotArea:{},theme:"default",renderAs:"",pointer:{},scale:{},gaugeArea:{}});const tf=Qp;var ef=Ln.w,nf=Hn.A,rf=Pn.A;function of(t,e){var n,i,r=t.position,o=t.tickX,s=t.tickY;return t.vertical?(n=new rf(o,r),i=new rf(o+e.size,r)):(n=new rf(r,s),i=new rf(r,s+e.size)),new ef({stroke:{color:e.color,width:e.width}}).moveTo(n).lineTo(i)}function sf(t,e,n,i){var r=e.length;if(i.visible)for(var o=n.mirror,s=n.lineBox,a=i.skip;a<r;a+=i.step)a%i.skipUnit!=0&&(n.tickX=o?s.x2:s.x2-i.size,n.tickY=o?s.y1-i.size:s.y1,n.position=e[a],t.append(of(n,i)))}var af=function(t){function e(e,n){var i=e||{};!Ht(i.reverse)&&!1===i.vertical&&(n||{}).rtl&&(i=Object.assign({},i,{reverse:!0})),t.call(this,0,1,i,n),this.options.minorUnit=this.options.minorUnit||this.options.majorUnit/10}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=st({},this.options,t);return(e=st({},e,{labels:{mirror:e.mirror}})).majorUnit=e.majorUnit||Sn(e.min,e.max),e},e.prototype.initFields=function(){},e.prototype.render=function(){var t=this.elements=new nf,e=this.renderLabels(),n=this.renderLine(),i=this.renderTicks(),r=this.renderRanges();return t.append(n,e,i,r),t},e.prototype.renderRanges=function(){for(var t=this,e=this.options,n=e.min,i=e.max,r=e.vertical,o=e.labels.mirror,s=e.ranges||[],a=new nf,l=s.length,c=e.rangeSize||e.minorTicks.size/2,h=0;h<l;h++){var u=Gp(s[h],n,i),d=t.getSlot(u.from,u.to),p=r?t.lineBox():d,f=r?d:t.lineBox();r?p.x1-=c*(o?-1:1):f.y2+=c*(o?-1:1),a.append(ef.fromRect(new kn.A([p.x1,f.y1],[p.x2-p.x1,f.y2-f.y1]),{fill:{color:u.color,opacity:u.opacity},stroke:{}}))}return a},e.prototype.renderLabels=function(){for(var t=this.labels,e=this.options,n=new nf,i=0;i<t.length;i++)n.append(Xp(t[i],e.labels));return n},e.prototype.renderLine=function(){var t=this.options.line,e=this.lineBox(),n=new nf;if(t.width>0&&t.visible){var i=new ef({stroke:{color:t.color,dashType:t.dashType,width:t.width}});i.moveTo(e.x1,e.y1).lineTo(e.x2,e.y2),n.append(i)}return n},e.prototype.renderTicks=function(){var t=new nf,e=this.options,n=e.majorTicks.visible?e.majorUnit:0,i={vertical:e.vertical,mirror:e.labels.mirror,lineBox:this.lineBox()};return sf(t,this.getMajorTickPositions(),i,e.majorTicks),sf(t,this.getMinorTickPositions(),i,st({},{skipUnit:n/e.minorUnit},e.minorTicks)),t},e}(Yr);re(af,{min:0,max:50,majorTicks:{size:15,align:jp,color:u,width:Np,visible:!0},minorTicks:{size:10,align:jp,color:u,width:Np,visible:!0},line:{width:Np},labels:{position:jp,padding:2},mirror:!1,_alignLines:!1});const lf=af;var cf=function(t){function e(e,n){t.call(this);var i=e.options,r=i.min,o=i.max,s=this.options=st({},this.options,n);s.fill=s.color,this.scale=e,Ht(s.value)?s.value=Yt(s.value,r,o):s.value=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.value=function(t){var e=this.options,n=e.value;if(0===arguments.length)return n;var i=this.scale.options,r=i.min,o=i.max;e._oldValue=Ht(e._oldValue)?e.value:r,e.value=Yt(t,r,o),this.elements&&this.repaint()},e}(Nt.A);re(cf,{color:u});const hf=cf;var uf=function(t){function e(e,n){t.call(this,e,n),this.options=st({track:{visible:Ht(n.track)}},this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(){var t,e,n,i=this.options,r=this.scale,o=r.options,s=o.mirror,a=o.vertical,l=r.lineBox(),c=i.track.size||i.size,h=i.size/2,u=dt(i.margin),d=a?u[s?"left":"right"]:u[s?"bottom":"top"];d=s?-d:d,a?(n=new Tn(l.x1+d,l.y1,l.x1+d,l.y2),s?n.x1-=c:n.x2+=c,i.shape!==Lp&&(t=e=new Tn(l.x2+d,l.y1-h,l.x2+d,l.y2+h))):(n=new Tn(l.x1,l.y1-d,l.x2,l.y1-d),s?n.y2+=c:n.y1-=c,i.shape!==Lp&&(t=e=new Tn(l.x1-h,l.y1-d,l.x2+h,l.y1-d))),this.trackBox=n,this.pointerRangeBox=e,this.box=t||n.clone().pad(i.border.width)},e.prototype.getElementOptions=function(){var t=this.options;return{fill:{color:t.color,opacity:t.opacity},stroke:Ht(t.border)?{color:t.border.width?t.border.color||t.color:"",width:t.border.width,dashType:t.border.dashType,opacity:t.opacity}:null}},e.prototype._margin=function(){var t=this.scale,e=this.options,n=t.options,i=n.mirror,r=n.vertical,o=dt(e.margin);return r?o[i?"left":"right"]:o[i?"bottom":"top"]},e}(hf);re(uf,{shape:Lp,track:{border:{width:1}},color:u,border:{width:1},opacity:1,margin:dt(3),animation:{type:Lp},visible:!0});const df=uf;var pf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=t.margin,n=t.from,i=t.to,r=t.vertical,o=r?"x1":"y1";t.mirror===r?(n[o]-=e,i[o]-=e):(n[o]+=e,i[o]+=e);var s=this.fromScale=new Pn.A(n.x1,n.y1),a=this.toScale=new Pn.A(i.x1,i.y1);0!==t.duration&&(t.duration=Math.max(s.distanceTo(a)/t.duration*1e3,1))},e.prototype.step=function(t){var e=Et(this.fromScale.x,this.toScale.x,t),n=Et(this.fromScale.y,this.toScale.y,t);this.element.transform($n.A().translate(e,n))},e}(Qn);re(pf,{easing:zp,duration:250}),Jn.current.register(Rp,pf);const ff=pf;var gf=Pn.A,mf=Ln.w,yf=function(t){function e(e,n){t.call(this,e,n),Ht(this.options.size)||(this.options.size=.6*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(){var t=this.scale,e=this.options.size,n=e/2,i=t.options.mirror?-1:1;return t.options.vertical?[new gf(0,0-n),new gf(0-i*e,0),new gf(0,0+n)]:[new gf(0-n,0),new gf(0,0+i*e),new gf(0+n,0)]},e.prototype.repaint=function(){var t=this.scale,e=this.options,n=new ff(this.elements,st(e.animation,{vertical:t.options.vertical,mirror:t.options.mirror,margin:this._margin(e.margin),from:t.getSlot(e._oldValue),to:t.getSlot(e.value)}));!1===e.animation.transitions&&(n.options.duration=0),n.setup(),n.play()},e.prototype.render=function(){var t=this.scale,e=this.options,n=this.getElementOptions(),i=this.pointerShape(e.value);e.animation.type=Rp;var r=new mf({stroke:n.stroke,fill:n.fill}).moveTo(i[0]).lineTo(i[1]).lineTo(i[2]).close(),o=t.getSlot(e.value);return r.transform($n.A().translate(o.x1,o.y1)),this.elements=r,r},e}(df);const vf=yf;var bf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setup=function(){var t=this.options,e=this.axis=t.vertical?z:j,n=this.to=t.newPoints[0][e],i=this.from=t.oldPoints[0][e];0!==t.duration&&(t.duration=Math.max(Math.abs(n-i)/t.speed*1e3,1)),this._set(i)},e.prototype.step=function(t){var e=Et(this.from,this.to,t);this._set(e)},e.prototype._set=function(t){var e="set"+this.axis.toUpperCase(),n=this.options.newPoints;n[0][e](t),n[1][e](t)},e}(Qn);re(bf,{easing:zp,speed:250}),Jn.current.register(Lp,bf);const wf=bf;var xf=Hn.A,_f=Ln.w,Sf=function(t){function e(e,n){t.call(this,e,n),Ht(this.options.size)||(this.options.size=.3*this.scale.options.majorTicks.size)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.pointerShape=function(t){var e=this.scale,n=this.options,i=e.options,r=i.mirror,o=i.vertical,s=r===o?-1:1,a=n.size*s,l=e.getSlot(e.options.min),c=e.getSlot(t),h=o?z:j,u=o?j:z,d=this._margin()*s,p=new Pn.A;p[h]=l[h+"1"],p[u]=l[u+"1"];var f=new Pn.A;f[h]=c[h+"1"],f[u]=c[u+"1"],o?(p.translate(d,0),f.translate(d,0)):(p.translate(0,d),f.translate(0,d));var g=f.clone(),m=p.clone();return o?(g.translate(a,0),m.translate(a,0)):(g.translate(0,a),m.translate(0,a)),[p,f,g,m]},e.prototype.repaint=function(){var t=this.scale,e=this.options,n=this.pointerShape(e.value),i=this.pointerPath,r=this.pointerShape(e._oldValue);i.moveTo(n[0]).lineTo(n[1]).lineTo(n[2]).lineTo(n[3]).close();var o=new wf(i,st(e.animation,{reverse:t.options.reverse,vertical:t.options.vertical,oldPoints:[r[1],r[2]],newPoints:[n[1],n[2]]}));!1===e.animation.transitions&&(o.options.duration=0),o.setup(),o.play()},e.prototype.render=function(){var t=new xf,e=this.getElementOptions();this.options.track.visible&&t.append(this.renderTrack());var n=this.pointerPath=new _f({stroke:e.stroke,fill:e.fill});return t.append(n),this.elements=t,t},e.prototype.renderTrack=function(){var t=this.options.track,e=t.border||{},n=this.trackBox.clone().pad(e.width||0);return new _f.fromRect(n.toRect(),{fill:{color:t.color,opacity:t.opacity},stroke:{color:e.width?e.color||t.color:"",width:e.width,dashType:e.dashType}})},e}(df);const Cf=Sf;var kf=Hn.A,Af=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this.pointers,n=t.origin.x,i=t.origin.y,r=new Tn(n,i,n+t.width(),i+t.height());this.scale.reflow(r),this._shrinkScaleWidth(r);for(var o=0;o<e.length;o++)e[o].reflow();this.bbox=this._getBox(r),this._alignElements(),this._shrinkElements(),this._buildVisual(),this._draw()},e.prototype._buildVisual=function(){var t=new kf,e=this.scale.render(),n=this.pointers;t.append(this.gaugeArea),t.append(e);for(var i=0;i<n.length;i++){var r=n[i];t.append(r.render()),r.value(r.options.value)}this._visuals=t},e.prototype._createModel=function(){var t=this.options,e=this.scale=new lf(t.scale,this.contextService);this.pointers=[];var n=t.pointer;n=U(n)?n:[n];for(var i=0;i<n.length;i++){var r=st({},n[i],{animation:{transitions:t.transitions}}),o="arrow"===r.shape?vf:Cf;this.pointers.push(new o(e,r))}},e.prototype._defaultSize=function(){var t=this.options.scale.vertical;return{width:t?60:200,height:t?200:60}},e.prototype._getBox=function(t){for(var e,n=this.scale,i=this.pointers,r=t.center(),o=i[0].box.clone().wrap(n.box),s=0;s<i.length;s++)o.wrap(i[s].box.clone());return n.options.vertical?(e=o.width()/2,o=new Tn(r.x-e,t.y1,r.x+e,t.y2)):(e=o.height()/2,o=new Tn(t.x1,r.y-e,t.x2,r.y+e)),o},e.prototype._alignElements=function(){for(var t,e=this.scale,n=this.pointers,i=e.box,r=n[0].box.clone().wrap(e.box),o=this.bbox,s=0;s<n.length;s++)r.wrap(n[s].box.clone());e.options.vertical?(t=o.center().x-r.center().x,e.reflow(new Tn(i.x1+t,o.y1,i.x2+t,o.y2))):(t=o.center().y-r.center().y,e.reflow(new Tn(i.x1,i.y1+t,i.x2,i.y2+t)));for(var a=0;a<n.length;a++)n[a].reflow(this.bbox)},e.prototype._shrinkScaleWidth=function(t){var e=this.scale;if(!e.options.vertical){var n=e.contentBox().width()-t.width();n>0&&(e.box.shrink(n,0),e.box.alignTo(t,"center"),e.reflow(e.box))}},e.prototype._shrinkElements=function(){for(var t=this.scale,e=this.pointers,n=t.box.clone(),i=t.options.vertical?"y":"x",r=e[0].box,o=0;o<e.length;o++)r.wrap(e[o].box.clone());n[i+1]+=Math.max(n[i+1]-r[i+1],0),n[i+2]-=Math.max(r[i+2]-n[i+2],0),t.reflow(n);for(var s=0;s<e.length;s++)e[s].reflow(this.bbox)},e}(tf);re(Af,{transitions:!0,gaugeArea:{background:""},scale:{vertical:!0}});const Ef=Af;var Tf=n(1020),Mf=n(1112),Of=n(9603),If=n(8623),Df=function(t){function e(e,n){void 0===e&&(e=new Rn.A),void 0===n&&(n={}),t.call(this,n),this.geometry(e),(0,K.A)(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Arc"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this.geometry().bbox()},e.prototype.toPath=function(){var t=new Ln.w,e=this.geometry().curvePoints();if(e.length>0){t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n+=3)t.curveTo(e[n],e[n+1],e[n+2])}return t},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,n),e}((0,Mf.A)((0,Of.A)((0,If.A)(Tf.A))));var Ff=180,Pf=Df,Rf=Ln.w,Lf=Hn.A;function Nf(t,e,n,i){var r=new Lf,o=t.center,s=t.getRadiusX();if(i.visible)for(var a=0;a<e.length;a++){var l=t.pointAt(e[a]),c=new Pn.A(o.x+s-i.size,o.y).rotate(e[a],o);r.append(new Rf({stroke:{color:i.color,width:i.width}}).moveTo(l).lineTo(c))}return r}function Bf(t,e,n,i){return{from:t,to:e,color:n,opacity:i}}var jf=function(t){function e(e,n){t.call(this,0,1,e,n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initUserOptions=function(t){var e=st({},this.options,t);return e.majorUnit=e.majorUnit||Sn(e.min,e.max),e.minorUnit=e.minorUnit||e.majorUnit/10,e},e.prototype.initFields=function(){},e.prototype.render=function(t,e){var n=this.renderArc(t,e);this.bbox=n.bbox(),this.labelElements=this.renderLabels(),this.ticks=this.renderTicks(),this.ranges=this.renderRanges()},e.prototype.reflow=function(t){var e=t.center(),n=Math.min(t.height(),t.width())/2;if(!Ht(this.bbox))return this.render(e,n);this.bbox=this.arc.bbox(),this.radius(this.arc.getRadiusX()),this.repositionRanges(),this.renderLabels()},e.prototype.slotAngle=function(t){var e=this.options,n=e.min,i=e.max,r=e.reverse,o=e.startAngle,s=e.endAngle,a=s-o;return(r?s-(t-n)/(i-n)*a:(t-n)/(i-n)*a+o)+Ff},e.prototype.hasRanges=function(){var t=this.options.ranges;return t&&t.length},e.prototype.ticksSize=function(){var t=this.options,e=t.majorTicks,n=t.minorTicks,i=0;return e.visible&&(i=e.size),n.visible&&(i=Math.max(n.size,i)),i},e.prototype.labelsCount=function(){var e=t.prototype.labelsCount.call(this),n=this.options;return n.endAngle-n.startAngle>=360&&n.max%n.majorUnit==0&&(e-=1),e},e.prototype.renderLabels=function(){var t=this,e=this.options,n=this.arc.clone(),i=n.getRadiusX(),r=this.tickAngles(n,e.majorUnit),o=e.rangeSize=e.rangeSize||.1*i,s=new Lf,a=.05*i;Ht(e.rangeDistance)?a=e.rangeDistance:e.rangeDistance=a;var l=e.labels,c=l.position===jp,h=Ht(this.labelElements);c&&(i-=this.ticksSize(),this.hasRanges()&&!h&&(i-=o+a),n.setRadiusX(i).setRadiusY(i));for(var u=this.labels,d=u.length,p=dt(l.padding),f=(p.left+p.right)/2,g=(p.top+p.bottom)/2,m=0;m<d;m++){var y=u[m],v=y.box.width()/2,b=y.box.height()/2,w=r[m],x=(w-Ff)*Bp,_=n.pointAt(w),S=_.x+Math.cos(x)*(v+f)*(c?1:-1),C=_.y+Math.sin(x)*(b+g)*(c?1:-1);y.reflow(new Tn(S-v,C-b,S+v,C+b));var k=new Pn.A(y.box.x1,y.box.y1),A=void 0;if(h){var E=(A=t.labelElements.children[m]).bbox().origin,T=A.transform()||$n.A();T.translate(k.x-E.x,k.y-E.y),A.transform(T)}else A=Xp(y,e.labels),s.append(A);t.bbox=kn.A.union(t.bbox,A.bbox())}return s},e.prototype.repositionRanges=function(){var t=this.ranges.children;if(t.length>0){var e=this.options,n=e.rangeDistance,i=e.rangeSize,r=this.getRangeRadius();this.options.labels.position===jp&&(r+=i+n);for(var o=r+i/2,s=0;s<t.length;s++)t[s]._geometry.setRadiusX(o).setRadiusY(o);this.bbox=kn.A.union(this.bbox,this.ranges.bbox())}},e.prototype.renderRanges=function(){var t=this,e=this.rangeSegments(),n=e.length,i=new Lf;if(n){var r=this.options,o=r.rangeSize,s=r.reverse,a=r.rangeDistance,l=this.getRangeRadius();this.radius(this.radius()-o-a);for(var c=0;c<n;c++){var h=e[c],u=t.slotAngle(h[s?"to":"from"]),d=t.slotAngle(h[s?"from":"to"]);d-u!=0&&i.append(t.createRange(u,d,l,h))}}return i},e.prototype.createRange=function(t,e,n,i){var r=this.options.rangeSize,o=new Rn.A(this.arc.center,{radiusX:n+r/2,radiusY:n+r/2,startAngle:t,endAngle:e});return new Pf(o,{stroke:{width:r,color:i.color,opacity:i.opacity,lineCap:i.lineCap}})},e.prototype.rangeSegments=function(){var t=this.options,e=t.ranges||[],n=e.length,i=[];if(n){var r=t.min,o=t.max,s=t.rangePlaceholderColor;i.push(Bf(r,o,s));for(var a=0;a<n;a++)for(var l=Gp(e[a],r,o),c=i.length,h=0;h<c;h++){var u=i[h];if(u.from<=l.from&&l.from<=u.to){i.push(Bf(l.from,l.to,l.color,l.opacity)),u.from<=l.to&&l.to<=u.to&&i.push(Bf(l.to,u.to,s,l.opacity)),u.to=l.from;break}}}return i},e.prototype.getRangeRadius=function(){var t=this.arc,e=this.options,n=e.rangeSize,i=e.rangeDistance,r=e.majorTicks.size;return e.labels.position===$p?t.getRadiusX()-r-i-n:t.getRadiusX()-n},e.prototype.renderArc=function(t,e){var n=this.options;return this.arc=new Rn.A(t,{radiusX:e,radiusY:e,startAngle:n.startAngle+Ff,endAngle:n.endAngle+Ff})},e.prototype.renderTicks=function(){var t=this.arc,e=this.options,n=t.clone();this.majorTickAngles=this.tickAngles(t,e.majorUnit),this.majorTicks=Nf(n,this.majorTickAngles,e.majorUnit,e.majorTicks);var i=new Lf;i.append(this.majorTicks);var r=e.majorTicks.size,o=e.minorTicks.size;if(this._tickDifference=r-o,e.labels.position===$p){var s=n.getRadiusX();n.setRadiusX(s-r+o).setRadiusY(s-r+o)}return this.minorTickAngles=this.normalizeTickAngles(this.tickAngles(t,e.minorUnit)),this.minorTicks=Nf(n,this.minorTickAngles,e.minorUnit,e.minorTicks),i.append(this.minorTicks),i},e.prototype.normalizeTickAngles=function(t){for(var e=this.options,n=e.majorUnit/e.minorUnit,i=t.length-1;i>=0;i--)i%n==0&&t.splice(i,1);return t},e.prototype.tickAngles=function(t,e){var n=this.options,i=n.reverse,r=n.max-n.min,o=t.endAngle-t.startAngle,s=r/e,a=t.startAngle,l=o/s;i&&(a+=o,l=-l),o>=360&&n.max%e==0&&(s-=1);for(var c=[],h=0;h<s;h++)c.push(Qt(a,g)),a+=l;return Qt(a)<=t.endAngle&&c.push(a),c},e.prototype.radius=function(t){if(!t)return this.arc.getRadiusX();this.arc.setRadiusX(t).setRadiusY(t),this.repositionTicks(this.majorTicks.children,this.majorTickAngles),this.repositionTicks(this.minorTicks.children,this.minorTickAngles,!0)},e.prototype.repositionTicks=function(t,e,n){var i=n&&this._tickDifference||0,r=this.arc,o=r.getRadiusX();n&&this.options.labels.position===$p&&0!==i&&(r=this.arc.clone()).setRadiusX(o-i).setRadiusY(o-i);for(var s=0;s<t.length;s++){var a=r.pointAt(e[s]),l=t[s].segments,c=a.x-l[0].anchor().x,h=a.y-l[0].anchor().y;t[s].transform((new $n.A).translate(c,h))}},e}(Yr);re(jf,{min:0,max:100,majorTicks:{size:15,align:jp,color:u,width:Np,visible:!0},minorTicks:{size:10,align:jp,color:u,width:Np,visible:!0},startAngle:-30,endAngle:210,labels:{position:jp,padding:2}});const zf=jf;var $f=function(t){function e(e,n){t.call(this,e,n);var i=this.options;i.duration=Math.max(Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3,1)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this.options,n=Et(e.oldAngle,e.newAngle,t);this.element.transform($n.A().rotate(n,e.center))},e}(Qn);re($f,{easing:zp,duration:Pp}),Jn.current.register(Hp,$f);const Hf=$f;var Uf=jn.A,Vf=Hn.A,Wf=Ln.w,qf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setAngle=function(t){this.elements.transform($n.A().rotate(t,this.center))},e.prototype.repaint=function(){var t=this.scale,e=this.options,n=t.slotAngle(e._oldValue),i=t.slotAngle(e.value);!1===e.animation.transitions?this.setAngle(i):new Hf(this.elements,st(e.animation,{oldAngle:n,newAngle:i})).play()},e.prototype.render=function(){var t=this.scale,e=this.options,n=new Vf;return!1!==e.animation&&st(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),n.append(this._renderNeedle(),this._renderCap()),this.elements=n,this.setAngle(Bp),n},e.prototype.reflow=function(t){var e=this.center=t.center,n=Yt(this.options.length||1,.1,1.5),i=this.radius=t.getRadiusX()*n,r=this.capSize=Math.round(i*this.options.cap.size);this.bbox=kn.A.fromPoints(new Pn.A(e.x-r,e.y-r),new Pn.A(e.x+r,e.y+r))},e.prototype._renderNeedle=function(){var t=this.scale.options.minorTicks.size,e=this.center,n=this.options.color,i=new Wf({fill:{color:n},stroke:{color:n,width:Np}});return i.moveTo(e.x+this.radius-t,e.y).lineTo(e.x,e.y-this.capSize/2).lineTo(e.x,e.y+this.capSize/2).close(),i},e.prototype._renderCap=function(){var t=this.options,e=t.cap.color||t.color,n=new zn.A(this.center,this.capSize);return new Uf(n,{fill:{color:e},stroke:{color:e}})},e}(hf);re(qf,{cap:{size:.05},arrow:{width:16,height:14},animation:{type:Hp,duration:Pp}});const Kf=qf;var Xf=Hn.A,Gf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.reflow=function(t){var e=this,n=this.pointers;this.scale.reflow(t),this._initialPlotArea=this.scale.bbox;for(var i=0;i<n.length;i++)n[i].reflow(e.scale.arc),e._initialPlotArea=kn.A.union(e._initialPlotArea,n[i].bbox);this.fitScale(t),this.alignScale(t),this._buildVisual(this.gaugeArea,n,this.scale),this._draw()},e.prototype._buildVisual=function(t,e,n){var i=this._visuals=new Xf;i.append(t),i.append(n.ticks),i.append(n.ranges),this._buildPointers(e),i.append(n.labelElements)},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.render(),this._visuals.append(n.elements),n.value(n.options.value)}},e.prototype.fitScale=function(t){for(var e,n,i,r,o,s=this,a=this.scale.arc,l=this._initialPlotArea,c=Math.abs(this.getDiff(l,t)),h=Qt(c,g),u=Qt(-c,g),d=0,p=0;!(!(p++<100)||(d=o===i?d+1:0)>5||h!==r&&0<=(e=s.getPlotBox(h,t,a))&&e<=2||u!==r&&0<=(i=s.getPlotBox(u,t,a))&&i<=2||(r=e>0&&i>0?2*h:e<0&&i<0?2*u:Qt((h+u)/2||1,g),0<=(n=s.getPlotBox(r,t,a))&&n<=2));)o=i,n>0?(u=r,i=n):(h=r,e=n)},e.prototype.getPlotBox=function(t,e,n){var i=this.scale,r=this.pointers,o=n.getRadiusX(),s=n.clone();s.setRadiusX(o+t).setRadiusY(o+t),i.arc=s,i.reflow(e),this.plotBbox=i.bbox;for(var a=0;a<r.length;a++)r[a].reflow(s),this.plotBbox=kn.A.union(this.plotBbox,r[a].bbox);return this.getDiff(this.plotBbox,e)},e.prototype.getDiff=function(t,e){return Math.min(e.width()-t.width(),e.height()-t.height())},e.prototype.alignScale=function(t){var e=this.plotBbox.center(),n=t.center(),i=e.x-n.x,r=e.y-n.y,o=this.scale,s=this.pointers;o.arc.center.x-=i,o.arc.center.y-=r,o.reflow(t);for(var a=0;a<s.length;a++)s[a].reflow(o.arc),this.plotBbox=kn.A.union(o.bbox,s[a].bbox)},e.prototype._createModel=function(){var t=this.options,e=t.pointer,n=this.scale=new zf(t.scale,this.contextService);this.pointers=[];for(var i=U(e)?e:[e],r=0;r<i.length;r++){var o=new Kf(n,st({},i[r],{animation:{transitions:t.transitions}}));this.pointers.push(o)}},e}(tf);re(Gf,{transitions:!0,gaugeArea:{background:""}});const Yf=Gf;var Jf=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rangeSegments=function(){var t=this.options;return[{from:t.min,to:t.max,color:t.rangePlaceholderColor,lineCap:t.rangeLineCap}]},e.prototype.hasRanges=function(){return!0},e.prototype.placeholderRangeAngle=function(t){var e=this.ranges.children[0].geometry();this.options.reverse?e.setEndAngle(t):e.setStartAngle(t)},e.prototype.addRange=function(t,e,n){var i=this.options.reverse,r=this.slotAngle(i?e:t),o=this.slotAngle(i?t:e),s=this.createRange(r,o,this.getRangeRadius(),n);return this.ranges.append(s),s},e}(zf);re(Jf,{min:0,max:100,majorTicks:{visible:!1},minorTicks:{visible:!1},labels:{visible:!1},startAngle:0,endAngle:180,rangeLineCap:"round"});const Zf=Jf;var Qf=function(t){function e(e,n){t.call(this,e,n);var i=this.options,r=Math.abs(i.newAngle-i.oldAngle)/i.duration*1e3;i.duration=Yt(r,Pp,800);var o=e.elements.options.get("stroke.color"),s=e.currentColor();o!==s&&(this.startColor=new xe(o),this.color=new xe(s))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.step=function(t){var e=this,n=e.options,i=e.startColor,r=e.color,o=Et(n.oldAngle,n.newAngle,t);if(this.element.angle(o),r){var s=Qt(Et(i.r,r.r,t)),a=Qt(Et(i.g,r.g,t)),l=Qt(Et(i.b,r.b,t));this.element.stroke(new xe(s,a,l).toHex())}},e}(Qn);re(Qf,{easing:zp,duration:Pp}),Jn.current.register(Up,Qf);const tg=Qf;var eg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.repaint=function(){var t=this.scale,e=this.options,n=t.slotAngle(e._oldValue),i=t.slotAngle(e.value);this.animation&&this.animation.abort(),!1===e.animation.transitions?(this.angle(i),this.stroke(this.currentColor())):(this.animation=new tg(this,st(e.animation,{oldAngle:n,newAngle:i})),this.animation.play())},e.prototype.angle=function(t){var e=this.elements.geometry();this.scale.options.reverse?e.setStartAngle(t):e.setEndAngle(t),this.scale.placeholderRangeAngle(t)},e.prototype.stroke=function(t){this.elements.stroke(t)},e.prototype.render=function(){if(!this.elements){var t=this.scale,e=this.options;!1!==e.animation&&st(e.animation,{startAngle:0,center:t.arc.center,reverse:t.options.reverse}),this.elements=t.addRange(t.options.min,this.options.value,{color:this.currentColor(),opacity:e.opacity,lineCap:t.options.rangeLineCap})}},e.prototype.currentColor=function(){var t=this.scale.options,e=t.min,n=t.max,i=this.options,r=i.colors,o=i.color,s=i.value,a=Y(s)?s:e;if(r)for(var l=0;l<r.length;l++){var c=r[l],h=c.color,u=c.from;void 0===u&&(u=e);var d=c.to;if(void 0===d&&(d=n),u<=a&&a<=d)return h}return o},e.prototype.reflow=function(){this.render(),this.bbox=this.elements.bbox()},e}(hf);re(eg,{animation:{type:Up,duration:Pp}});const ng=eg;var ig=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initTheme=function(e){t.prototype._initTheme.call(this,e),this.options.color=this.options.color||(this.theme.pointer||{}).color},e.prototype._createModel=function(){var t=this.options,e=this.scale=new Zf(t.scale,this.contextService),n=new ng(e,st({},{colors:t.colors,color:t.color,value:t.value,opacity:t.opacity,animation:{transitions:t.transitions}}));this.pointers=[n]},e.prototype._buildPointers=function(t){for(var e=0;e<t.length;e++){var n=t[e];n.render(),n.value(n.options.value)}},e.prototype._setValueOptions=function(t){this.options.value=t},e.prototype.currentColor=function(){var t=this.pointers[0];if(t)return t.currentColor()},e.prototype.centerLabelPosition=function(t,e){var n=this.getSize(),i=this.scale.arc.center,r=i.x-t/2,o=i.y-e/2;if(t<n.width){var s=r+t;r=Math.max(r,0),s>n.width&&(r-=s-n.width)}if(e<n.height){var a=this.scale.bbox,l=a.bottomRight().y,c=o+e;o=Math.max(o,a.origin.y),c>l&&(o-=c-l)}return{left:r,top:o}},e}(Yf);const rg=ig;var og=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._createModel=function(){var e=this.options.scale;"number"!=typeof e.startAngle&&(e.startAngle=90),e.endAngle=e.startAngle+360,t.prototype._createModel.call(this)},e}(rg);const sg=og;var ag=function(t){function e(e){t.call(this),this.setOptions(e),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.setOptions=function(t){this.options=Object.assign({},this.options,t),this.quietZoneLength=this.options.addQuietZone?2*this.options.quietZoneLength:0},e.prototype.encode=function(t,e,n){var i=Ht(t)?String(t):t;return this.initValue(i,e,n),this.options.addQuietZone&&this.addQuietZone(),this.addData(),this.options.addQuietZone&&this.addQuietZone(),{baseUnit:this.baseUnit,pattern:this.pattern}},e.prototype.initValue=function(){},e.prototype.addQuietZone=function(){this.pattern.push(this.options.quietZoneLength||10)},e.prototype.addData=function(){},e.prototype.invalidCharacterError=function(t){throw new Error('Character "'+t+'" is not valid for symbology '+this.name+".")},e}(Nt.A);re(ag,{quietZoneLength:10,addQuietZone:!0,addCheckSum:!0});var lg=Object.assign,cg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),lg(this,{name:"Code 11",characterMap:["111121","211121","121121","221111","112121","212111","122111","111221","211211","211111","112111"],cCheckSumTotal:10,kCheckSumTotal:9,kCheckSumMinLength:10,checkSumMod:11,DASH_VALUE:10,DASH:"-",START:"112211",STOP:"11221"})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.width=e,this.totalUnits=0},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addCheckSum=function(){var t=this.value,e=t.length,n=this.getWeightedSum(t,e,this.cCheckSumTotal)%this.checkSumMod;if(this.checksum=String(n),this.addPattern(this.characterMap[n]),++e>=this.kCheckSumMinLength){var i=(n+this.getWeightedSum(t,e,this.kCheckSumTotal))%this.checkSumMod;this.checksum+=i,this.addPattern(this.characterMap[i])}},e.prototype.getWeightedSum=function(t,e,n){for(var i=0,r=0;r<t.length;r++)i+=this.weightedValue(this.getValue(t.charAt(r)),e,r,n);return i},e.prototype.weightedValue=function(t,e,n,i){return((e-n)%i||i)*t},e.prototype.getValue=function(t){return isNaN(t)?(t!==this.DASH&&this.invalidCharacterError(t),this.DASH_VALUE):parseInt(t,10)},e.prototype.addCharacter=function(t){var e=this.getValue(t),n=this.characterMap[e];this.addPattern(n)},e.prototype.addPattern=function(t){for(var e,n=0;n<t.length;n++)e=parseInt(t.charAt(n),10),this.pattern.push(e),this.totalUnits+=e},e}(ag);re(cg,{addCheckSum:!0});var hg=Object.assign,ug=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),hg(this,{minBaseUnitLength:.7})},e.prototype.addData=function(){var t=this.value;this.addStart();for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.pushCheckSum(),this.addStop(),this.prepareValues()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addBase(e)},e.prototype.addBase=function(){},e}(ag),dg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),hg(this,{name:"Code 39",checkSumMod:43,minRatio:2.5,maxRatio:3,gapWidth:1,splitCharacter:"|",patternMappings:{b:"1|",w:"1|",B:"ratio|",W:"ratio|"},characterMap:{0:{pattern:"bwbWBwBwb",value:0},1:{pattern:"BwbWbwbwB",value:1},2:{pattern:"bwBWbwbwB",value:2},3:{pattern:"BwBWbwbwb",value:3},4:{pattern:"bwbWBwbwB",value:4},5:{pattern:"BwbWBwbwb",value:5},6:{pattern:"bwBWBwbwb",value:6},7:{pattern:"bwbWbwBwB",value:7},8:{pattern:"BwbWbwBwb",value:8},9:{pattern:"bwBWbwBwb",value:9},A:{pattern:"BwbwbWbwB",value:10},B:{pattern:"bwBwbWbwB",value:11},C:{pattern:"BwBwbWbwb",value:12},D:{pattern:"bwbwBWbwB",value:13},E:{pattern:"BwbwBWbwb",value:14},F:{pattern:"bwBwBWbwb",value:15},G:{pattern:"bwbwbWBwB",value:16},H:{pattern:"BwbwbWBwb",value:17},I:{pattern:"bwBwbWBwb",value:18},J:{pattern:"bwbwBWBwb",value:19},K:{pattern:"BwbwbwbWB",value:20},L:{pattern:"bwBwbwbWB",value:21},M:{pattern:"BwBwbwbWb",value:22},N:{pattern:"bwbwBwbWB",value:23},O:{pattern:"BwbwBwbWb",value:24},P:{pattern:"bwBwBwbWb",value:25},Q:{pattern:"bwbwbwBWB",value:26},R:{pattern:"BwbwbwBWb",value:27},S:{pattern:"bwBwbwBWb",value:28},T:{pattern:"bwbwBwBWb",value:29},U:{pattern:"BWbwbwbwB",value:30},V:{pattern:"bWBwbwbwB",value:31},W:{pattern:"BWBwbwbwb",value:32},X:{pattern:"bWbwBwbwB",value:33},Y:{pattern:"BWbwBwbwb",value:34},Z:{pattern:"bWBwBwbwb",value:35},"-":{pattern:"bWbwbwBwB",value:36},".":{pattern:"BWbwbwBwb",value:37}," ":{pattern:"bWBwbwBwb",value:38},$:{pattern:"bWbWbWbwb",value:39},"/":{pattern:"bWbWbwbWb",value:40},"+":{pattern:"bWbwbWbWb",value:41},"%":{pattern:"bwbWbWbWb",value:42},START:{pattern:"bWbwBwBwb"}}})},e.prototype.initValue=function(t,e,n){this.width=e,this.height=n,this.value=t,this.dataLength=t.length,this.pattern=[],this.patternString=""},e.prototype.prepareValues=function(){var t,e=this.minBaseUnitLength,n=this.minRatio,i=Math.ceil(Math.max(.15*this.width,24)),r=this.maxRatio;if(this.height<i)throw new Error("Insufficient height for Code39 encoding: the current height is "+this.height+"px and the minimum height is "+i+"px.");for(t=this.getBaseUnit(r);t<e&&r>n;)r=parseFloat((r-.1).toFixed(1)),t=this.getBaseUnit(r);if(t<e){var o=Math.ceil(this.getBaseWidth(n)*e);throw new Error("Insufficient width for Code39 encoding: the current width is "+this.width+'px and the minimum width for value "'+this.value+'" is '+o+"px.")}this.ratio=r,this.baseUnit=t,this.patternString=this.patternString.substring(0,this.patternString.length-1),this.pattern=this.pattern.concat(this.patternString.replace(/ratio/g,r).split(this.splitCharacter))},e.prototype.getBaseUnit=function(t){return this.width/this.getBaseWidth(t)},e.prototype.getBaseWidth=function(t){var e=3*(t+2);return this.quietZoneLength+e*(this.dataLength+2)+this.gapWidth*(this.dataLength+1)},e.prototype.addStart=function(){this.addPattern(this.characterMap.START.pattern),this.addCharacterGap()},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.addCharacterGap()},e.prototype.addStop=function(){this.addPattern(this.characterMap.START.pattern)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.patternString+=this.patternMappings[t.charAt(e)]},e.prototype.addCharacterGap=function(){this.patternString+=this.gapWidth+this.splitCharacter},e}(ug);re(dg,{addCheckSum:!1});var pg={addCharacter:function(t){this.characterMap[t]?this.addBase(this.characterMap[t]):t.charCodeAt(0)>127?this.invalidCharacterError(t):this.addExtended(t.charCodeAt(0))},addExtended:function(t){for(var e,n=this,i=0;i<this.extendedMappings.length;i++)if(e=n.extendedMappings[i].call(n,t)){for(var r=0;r<e.length;r++){var o=e[r];n.addBase(o)}return void(n.dataLength+=e.length-1)}},extendedMappings:[function(t){if(97<=t&&t<=122)return[this.characterMap[this.shiftCharacters[0]],this.characterMap[String.fromCharCode(t-32)]]},function(t){if(33<=t&&t<=58)return[this.characterMap[this.shiftCharacters[1]],this.characterMap[String.fromCharCode(t+32)]]},function(t){if(1<=t&&t<=26)return[this.characterMap[this.shiftCharacters[2]],this.characterMap[String.fromCharCode(t+64)]]},function(t){var e,n,i=this;if(this.specialAsciiCodes[t]){e=[];for(var r=0;r<this.specialAsciiCodes[t].length;r++)e.push(i.characterMap[i.shiftCharacters[3]]),e.push(i.characterMap[i.specialAsciiCodes[t][r]])}else n=6*Math.floor(t/32)+(t-27)%32+64,e=[this.characterMap[this.shiftCharacters[3]],this.characterMap[String.fromCharCode(n)]];return e}],specialAsciiCodes:{0:["U"],64:["V"],96:["W"],127:["T","X","Y","Z"]},shiftValuesAsciiCodes:{39:36,40:47,41:43,42:37},characterMap:{"+":!1,"/":!1,$:!1,"%":!1},shiftCharacters:["SHIFT0","SHIFT1","SHIFT2","SHIFT3"]},fg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),st(this,pg,{name:"Code 39 extended",characterMap:{SHIFT0:{pattern:"bWbwbWbWb",value:41},SHIFT1:{pattern:"bWbWbwbWb",value:40},SHIFT2:{pattern:"bWbWbWbwb",value:39},SHIFT3:{pattern:"bwbWbWbWb",value:42}}})},e}(dg),gg=Object.assign,mg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),gg(this,{name:"Code 93",cCheckSumTotal:20,kCheckSumTotal:15,checkSumMod:47,characterMap:{0:{pattern:"131112",value:0},1:{pattern:"111213",value:1},2:{pattern:"111312",value:2},3:{pattern:"111411",value:3},4:{pattern:"121113",value:4},5:{pattern:"121212",value:5},6:{pattern:"121311",value:6},7:{pattern:"111114",value:7},8:{pattern:"131211",value:8},9:{pattern:"141111",value:9},A:{pattern:"211113",value:10},B:{pattern:"211212",value:11},C:{pattern:"211311",value:12},D:{pattern:"221112",value:13},E:{pattern:"221211",value:14},F:{pattern:"231111",value:15},G:{pattern:"112113",value:16},H:{pattern:"112212",value:17},I:{pattern:"112311",value:18},J:{pattern:"122112",value:19},K:{pattern:"132111",value:20},L:{pattern:"111123",value:21},M:{pattern:"111222",value:22},N:{pattern:"111321",value:23},O:{pattern:"121122",value:24},P:{pattern:"131121",value:25},Q:{pattern:"212112",value:26},R:{pattern:"212211",value:27},S:{pattern:"211122",value:28},T:{pattern:"211221",value:29},U:{pattern:"221121",value:30},V:{pattern:"222111",value:31},W:{pattern:"112122",value:32},X:{pattern:"112221",value:33},Y:{pattern:"122121",value:34},Z:{pattern:"123111",value:35},"-":{pattern:"121131",value:36},".":{pattern:"311112",value:37}," ":{pattern:"311211",value:38},$:{pattern:"321111",value:39},"/":{pattern:"112131",value:40},"+":{pattern:"113121",value:41},"%":{pattern:"211131",value:42},SHIFT0:{pattern:"122211",value:46},SHIFT1:{pattern:"311121",value:45},SHIFT2:{pattern:"121221",value:43},SHIFT3:{pattern:"312111",value:44},START:{pattern:"111141"},TERMINATION_BAR:"1"}})},e.prototype.initValue=function(t,e,n){this.value=t,this.width=e,this.height=n,this.pattern=[],this.values=[],this.dataLength=t.length},e.prototype.prepareValues=function(){var t=Math.ceil(Math.max(.15*this.width,24));if(this.height<t)throw new Error("Insufficient height for Code93 encoding: the current height is "+this.height+"px, the minimum required height is "+t+"px.");if(this.setBaseUnit(),this.baseUnit<this.minBaseUnitLength){var e=Math.ceil(this.minBaseUnitLength*(this.width/this.baseUnit));throw new Error("Insufficient width for Code93 encoding: the current width is "+this.width+'px and the minimum required width for value "'+this.value+'" is '+e+"px.")}},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(9*(this.dataLength+2+2)+this.quietZoneLength+1)},e.prototype.addStart=function(){var t=this.characterMap.START.pattern;this.addPattern(t)},e.prototype.addStop=function(){this.addStart(),this.pattern.push(this.characterMap.TERMINATION_BAR)},e.prototype.addBase=function(t){this.addPattern(t.pattern),this.values.push(t.value)},e.prototype.pushCheckSum=function(){var t,e=this,n=this._getCheckValues();this.checksum=n.join("");for(var i=0;i<n.length;i++)t=e.characterMap[e._findCharacterByValue(n[i])],e.addPattern(t.pattern)},e.prototype._getCheckValues=function(){var t,e,n=this,i=this.values,r=i.length,o=0;for(e=r-1;e>=0;e--)o+=n.weightedValue(i[e],r-e,n.cCheckSumTotal);for(t=o%this.checkSumMod,o=this.weightedValue(t,1,this.kCheckSumTotal),e=r-1;e>=0;e--)o+=n.weightedValue(i[e],r-e+1,n.kCheckSumTotal);return[t,o%this.checkSumMod]},e.prototype._findCharacterByValue=function(t){for(var e in this.characterMap)if(this.characterMap[e].value===t)return e},e.prototype.weightedValue=function(t,e,n){return(e%n||n)*t},e.prototype.addPattern=function(t){for(var e,n=0;n<t.length;n++)e=parseInt(t.charAt(n),10),this.pattern.push(e)},e}(ug),yg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),st(this,pg,{name:"Code 93 extended",pushCheckSum:function(){var t,e=this,n=this._getCheckValues();this.checksum=n.join("");for(var i=0;i<n.length;i++)if(t=n[i],e.shiftValuesAsciiCodes[t])e.addExtended(e.shiftValuesAsciiCodes[t]);else{var r=e._findCharacterByValue(t);e.addPattern(e.characterMap[r].pattern)}}})},e}(mg),vg=/^\d+$/,bg=Object.assign,wg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),bg(this,{name:"Postnet",START:"2",VALID_CODE_LENGTHS:[5,9,11],DIGIT_SEPARATOR:"-",characterMap:["22111","11122","11212","11221","12112","12121","12211","21112","21121","21211"]})},e.prototype.initValue=function(t,e,n){this.height=n,this.width=e,this.baseHeight=n/2,this.value=t.replace(new RegExp(this.DIGIT_SEPARATOR,"g"),""),this.pattern=[],this.validate(this.value),this.checkSum=0,this.setBaseUnit()},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.START),this.pattern.pop()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];this.checkSum+=parseInt(t,10),this.addPattern(e)},e.prototype.addCheckSum=function(){this.checksum=(10-this.checkSum%10)%10,this.addCharacter(this.checksum)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(10*(this.value.length+1)+3+this.quietZoneLength)},e.prototype.validate=function(t){if(vg.test(t)||this.invalidCharacterError(t.match(/[^0-9]/)[0]),!kt(t.length,this.VALID_CODE_LENGTHS))throw new Error("Invalid value length. Valid lengths for the Postnet symbology are "+this.VALID_CODE_LENGTHS.join(",")+".")},e.prototype.addPattern=function(t){for(var e,n=this,i=0;i<t.length;i++)e=n.height-n.baseHeight*t.charAt(i),n.pattern.push({width:1,y1:e,y2:n.height}),n.pattern.push(1)},e}(ag),xg=/^\d+$/,_g=/^[a-z0-9]+$/i,Sg=Object.assign,Cg=function(t){function e(e){t.call(this),this.encoding=e,this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){},e.prototype.addStart=function(){},e.prototype.is=function(){},e.prototype.isCode=function(){return!1},e.prototype.move=function(){},e.prototype.pushState=function(){},e}(Nt.A),kg=function(t){function e(e,n){t.call(this,e),this.states=n,this._initMoves(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),st(this,{FNC4:"FNC4",SHIFT:98})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var n=t.charCodeAt(e);return this.isCode(n)},e.prototype.move=function(t){for(var e=0;!this._moves[e].call(this,t)&&e<this._moves.length;)e++},e.prototype.pushState=function(t){var e,n=this.states,i=t.value,r=i.length;if(kt("C",n)){var o=i.substr(t.index).match(/\d{4,}/g);o&&(r=i.indexOf(o[0],t.index))}for(;(e=t.value.charCodeAt(t.index))>=0&&this.isCode(e)&&t.index<r;)this.encoding.addPattern(this.getValue(e)),t.index++},e.prototype._initMoves=function(t){this._moves=[],kt(this.FNC4,t)&&this._moves.push(this._moveFNC),kt(this.shiftKey,t)&&this._moves.push(this._shiftState),this._moves.push(this._moveState)},e.prototype._moveFNC=function(t){if(t.fnc)return t.fnc=!1,t.previousState===this.key},e.prototype._shiftState=function(t){if(t.previousState===this.shiftKey&&(t.index+1>=t.value.length||this.encoding[this.shiftKey].is(t.value,t.index+1)))return this.encoding.addPattern(this.SHIFT),t.shifted=!0,!0},e.prototype._moveState=function(){return this.encoding.addPattern(this.MOVE),!0},e}(Cg),Ag={};Ag.A=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{key:"A",shiftKey:"B",MOVE:101,START:103})},e.prototype.isCode=function(t){return 0<=t&&t<96},e.prototype.getValue=function(t){return t<32?t+64:t-32},e}(kg),Ag.B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{key:"B",shiftKey:"A",MOVE:100,START:104})},e.prototype.isCode=function(t){return 32<=t&&t<128},e.prototype.getValue=function(t){return t-32},e}(kg),Ag.C=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{key:"C",MOVE:99,START:105})},e.prototype.addStart=function(){this.encoding.addPattern(this.START)},e.prototype.is=function(t,e){var n=Fg(t,e,4);return(e+4<=t.length||2===t.length)&&xg.test(n)},e.prototype.move=function(){this.encoding.addPattern(this.MOVE)},e.prototype.pushState=function(t){for(var e;(e=Fg(t.value,t.index,2))&&xg.test(e)&&2===e.length;)this.encoding.addPattern(parseInt(e,10)),t.index+=2},e.prototype.getValue=function(t){return t},e}(Cg),Ag.FNC4=function(t){function e(e,n){t.call(this,e),this._initSubStates(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{key:"FNC4",dependentStates:["A","B"]})},e.prototype.addStart=function(t){var e=t.value.charCodeAt(0)-128,n=this._getSubState(e);this.encoding[n].addStart()},e.prototype.is=function(t,e){var n=t.charCodeAt(e);return this.isCode(n)},e.prototype.isCode=function(t){return 128<=t&&t<256},e.prototype.pushState=function(t){var e,n=this._initSubState(t),i=this.encoding,r=n.value.length;if(t.index+=r,r<3)for(;n.index<r;n.index++)e=n.value.charCodeAt(n.index),n.state=this._getSubState(e),n.previousState!==n.state&&(n.previousState=n.state,i[n.state].move(n)),i.addPattern(i[n.state].MOVE),i.addPattern(i[n.state].getValue(e));else n.state!==n.previousState&&i[n.state].move(n),this._pushStart(n),i.pushData(n,this.subStates),t.index<t.value.length&&this._pushStart(n);t.fnc=!0,t.state=n.state},e.prototype._pushStart=function(t){this.encoding.addPattern(this.encoding[t.state].MOVE),this.encoding.addPattern(this.encoding[t.state].MOVE)},e.prototype._initSubState=function(t){var e={value:this._getAll(t.value,t.index),index:0};return e.state=this._getSubState(e.value.charCodeAt(0)),e.previousState=t.previousState===this.key?e.state:t.previousState,e},e.prototype._initSubStates=function(t){this.subStates=[];for(var e=0;e<t.length;e++)kt(t[e],this.dependentStates)&&this.subStates.push(t[e])},e.prototype._getSubState=function(t){for(var e=this,n=0;n<this.subStates.length;n++)if(e.encoding[e.subStates[n]].isCode(t))return e.subStates[n]},e.prototype._getAll=function(t,e){for(var n,i="",r=e;(n=t.charCodeAt(r++))&&this.isCode(n);)i+=String.fromCharCode(n-128);return i},e}(Cg),Ag.FNC1=function(t){function e(e,n){t.call(this,e),this.states=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{key:"FNC1",startState:"C",startAI:"(",endAI:")",dependentStates:["C","B"],applicationIdentifiers:{22:{max:29,type:"alphanumeric"},402:{length:17},7004:{max:4,type:"alphanumeric"},242:{max:6,type:"alphanumeric"},8020:{max:25,type:"alphanumeric"},703:{min:3,max:30,type:"alphanumeric"},8008:{min:8,max:12,type:"alphanumeric"},253:{min:13,max:17,type:"alphanumeric"},8003:{min:14,max:30,type:"alphanumeric"},multiKey:[{ids:["15","17","8005","8100"],ranges:[[11,13],[310,316],[320,336],[340,369]],type:{length:6}},{ids:["240","241","250","251","400","401","403","7002","8004","8007","8110"],ranges:[[-9]],type:{max:30,type:"alphanumeric"}},{ids:["7001"],ranges:[[410,414]],type:{length:13}},{ids:["10","21","254","420","8002"],type:{max:20,type:"alphanumeric"}},{ids:["00","8006","8017","8018"],type:{length:18}},{ids:["01","02","8001"],type:{length:14}},{ids:["422"],ranges:[[424,426]],type:{length:3}},{ids:["20","8102"],type:{length:2}},{ids:["30","37"],type:{max:8,type:"alphanumeric"}},{ids:["390","392"],type:{max:15,type:"alphanumeric"}},{ids:["421","423"],type:{min:3,max:15,type:"alphanumeric"}},{ids:["391","393"],type:{min:3,max:18,type:"alphanumeric"}},{ids:["7003","8101"],type:{length:10}}]},START:102})},e.prototype.addStart=function(){this.encoding[this.startState].addStart()},e.prototype.is=function(){return kt(this.key,this.states)},e.prototype.pushState=function(t){var e,n,i,r=this,o=this.encoding,s=t.value.replace(/\s/g,""),a=new RegExp("["+this.startAI+this.endAI+"]","g"),l=t.index,c={state:this.startState};o.addPattern(this.START);for(;;){if(c.index=0,(e=(i=s.charAt(l)===r.startAI?2:0)>0?r.getBySeparator(s,l):r.getByLength(s,l)).ai.length)n=l+i+e.id.length+e.ai.length;else if((n=s.indexOf(r.startAI,l+1))<0){if(l+e.ai.max+e.id.length+i<s.length)throw new Error("Separators are required after variable length identifiers");n=s.length}if(c.value=s.substring(l,n).replace(a,""),r.validate(e,c.value),o.pushData(c,r.dependentStates),n>=s.length)break;l=n,c.state!==r.startState&&(o[r.startState].move(c),c.state=r.startState),e.ai.length||o.addPattern(r.START)}t.index=t.value.length},e.prototype.validate=function(t,e){var n=e.substr(t.id.length),i=t.ai;if(!i.type&&!xg.test(n))throw new Error("Application identifier "+t.id+" is numeric only but contains non numeric character(s).");if("alphanumeric"===i.type&&!_g.test(n))throw new Error("Application identifier "+t.id+" is alphanumeric only but contains non alphanumeric character(s).");if(i.length&&i.length!==n.length)throw new Error("Application identifier "+t.id+" must be "+i.length+" characters long.");if(i.min&&i.min>n.length)throw new Error("Application identifier "+t.id+" must be at least "+i.min+" characters long.");if(i.max&&i.max<n.length)throw new Error("Application identifier "+t.id+" must be at most "+i.max+" characters long.")},e.prototype.getByLength=function(t,e){for(var n,i,r=2;r<=4;r++)if(n=Fg(t,e,r),i=this.getApplicationIdentifier(n)||this.getApplicationIdentifier(n.substring(0,n.length-1)))return{id:n,ai:i};this.unsupportedAIError(n)},e.prototype.unsupportedAIError=function(t){throw new Error("'"+t+"' is not a supported Application Identifier")},e.prototype.getBySeparator=function(t,e){var n=t.indexOf(this.startAI,e),i=t.indexOf(this.endAI,n),r=t.substring(n+1,i),o=this.getApplicationIdentifier(r)||this.getApplicationIdentifier(r.substr(r.length-1));return o||this.unsupportedAIError(r),{ai:o,id:r}},e.prototype.getApplicationIdentifier=function(t){var e=this.applicationIdentifiers,n=e.multiKey;if(e[t])return e[t];for(var i=0;i<n.length;i++){if(n[i].ids&&kt(t,n[i].ids))return n[i].type;if(n[i].ranges)for(var r=n[i].ranges,o=0;o<r.length;o++)if(r[o][0]<=t&&t<=r[o][1])return n[i].type}},e}(Cg);var Eg=function(t){function e(e){t.call(this,e),this._initStates()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{characterMap:[212222,222122,222221,121223,121322,131222,122213,122312,132212,221213,221312,231212,112232,122132,122231,113222,123122,123221,223211,221132,221231,213212,223112,312131,311222,321122,321221,312212,322112,322211,212123,212321,232121,111323,131123,131321,112313,132113,132311,211313,231113,231311,112133,112331,132131,113123,113321,133121,313121,211331,231131,213113,213311,213131,311123,311321,331121,312113,312311,332111,314111,221411,431111,111224,111422,121124,121421,141122,141221,112214,112412,122114,122411,142112,142211,241211,221114,413111,241112,134111,111242,121142,121241,114212,124112,124211,411212,421112,421211,212141,214121,412121,111143,111341,131141,114113,114311,411113,411311,113141,114131,311141,411131,211412,211214,211232,2331112],STOP:106})},e.prototype._initStates=function(){for(var t=this,e=0;e<this.states.length;e++)t[t.states[e]]=new Ag[t.states[e]](t,t.states)},e.prototype.initValue=function(t,e,n){this.pattern=[],this.value=t,this.width=e,this.height=n,this.checkSum=0,this.totalUnits=0,this.index=0,this.position=1},e.prototype.addData=function(){var t={value:this.value,index:0,state:""};0!==this.value.length&&(t.state=t.previousState=this.getNextState(t,this.states),this.addStart(t),this.pushData(t,this.states),this.addCheckSum(),this.addStop(),this.setBaseUnit())},e.prototype.pushData=function(t,e){for(var n=this;n[t.state].pushState(t),!(t.index>=t.value.length);)if(t.shifted){var i=t.state;t.state=t.previousState,t.previousState=i,t.shifted=!1}else t.previousState=t.state,t.state=n.getNextState(t,e),n[t.state].move(t)},e.prototype.addStart=function(t){this[t.state].addStart(t),this.position=1},e.prototype.addCheckSum=function(){this.checksum=this.checkSum%103,this.addPattern(this.checksum)},e.prototype.addStop=function(){this.addPattern(this.STOP)},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(this.totalUnits+this.quietZoneLength)},e.prototype.addPattern=function(t){for(var e,n=this.characterMap[t].toString(),i=0;i<n.length;i++)e=parseInt(n.charAt(i),10),this.pattern.push(e),this.totalUnits+=e;this.checkSum+=t*this.position++},e.prototype.getNextState=function(t,e){for(var n=0;n<e.length;n++)if(this[e[n]].is(t.value,t.index))return e[n];this.invalidCharacterError(t.value.charAt(t.index))},e}(ag),Tg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{name:"Code 128 A",states:["A"]})},e}(Eg),Mg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{name:"Code 128 B",states:["B"]})},e}(Eg),Og=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{name:"Code 128 C",states:["C"]})},e}(Eg),Ig=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{name:"Code 128",states:["C","B","A","FNC4"]})},e}(Eg),Dg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Sg(this,{name:"Code GS1-128",states:["FNC1","C","B"]})},e}(Eg);function Fg(t,e,n){return t.substring(e,e+n)}var Pg=Object.assign,Rg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pg(this,{characterMap:["12121212","12121221","12122112","12122121","12211212","12211221","12212112","12212121","21121212","21121221"],START:"21",STOP:"121",checkSumType:"",checkSums:zg})},e.prototype.initValue=function(t,e){this.pattern=[],this.value=t,this.checkSumLength=0,this.width=e},e.prototype.setBaseUnit=function(){this.baseUnit=this.width/(12*(this.value.length+this.checkSumLength)+this.quietZoneLength+7)},e.prototype.addData=function(){var t=this.value;this.addPattern(this.START);for(var e=0;e<t.length;e++)this.addCharacter(t.charAt(e));this.options.addCheckSum&&this.addCheckSum(),this.addPattern(this.STOP),this.setBaseUnit()},e.prototype.addCharacter=function(t){var e=this.characterMap[t];e||this.invalidCharacterError(t),this.addPattern(e)},e.prototype.addPattern=function(t){for(var e=0;e<t.length;e++)this.pattern.push(parseInt(t.charAt(e),10))},e.prototype.addCheckSum=function(){var t=this,e=this.checkSums[this.checkSumType].call(this.checkSums,this.value);this.checksum=e.join("");for(var n=0;n<e.length;n++)t.checkSumLength++,t.addPattern(t.characterMap[e[n]])},e}(ag),Lg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pg(this,{name:"MSI Modulo10",checkSumType:"Modulo10"})},e}(Rg),Ng=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pg(this,{name:"MSI Modulo11",checkSumType:"Modulo11"})},e}(Rg),Bg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pg(this,{name:"MSI Modulo10 Modulo10",checkSumType:"Modulo10Modulo10"})},e}(Rg),jg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Pg(this,{name:"MSI Modulo11 Modulo10",checkSumType:"Modulo11Modulo10"})},e}(Rg),zg={Modulo10:function(t){var e,n,i,r=[0,""],o=t.length%2;for(e=0;e<t.length;e++)r[(e+o)%2]+=parseInt(t.charAt(e),10);for(i=r[0],n=(2*r[1]).toString(),e=0;e<n.length;e++)i+=parseInt(n.charAt(e),10);return[(10-i%10)%10]},Modulo11:function(t){for(var e,n=0,i=t.length,r=0;r<i;r++)n+=(((i-r)%6||6)+1)*t.charAt(r);return 10!==(e=(11-n%11)%11)?[e]:[1,0]},Modulo11Modulo10:function(t){var e,n=this.Modulo11(t);return e=t+n[0],n.concat(this.Modulo10(e))},Modulo10Modulo10:function(t){var e,n=this.Modulo10(t);return e=t+n[0],n.concat(this.Modulo10(e))}},$g=Object.assign,Hg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),$g(this,{name:"EAN 13",keyTable:["000000","001011","001101","001110","010011","011001","011100","010101","010110","011010"],characterMap:{digits:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2]],start:[1,1,1],middle:[1,1,1,1,1]}})},e.prototype.initValue=function(t,e,n){var i=String(t);if(12!==i.length||/\D/.test(i))throw new Error('The value of the "EAN13" encoding should be 12 symbols');this.pattern=[],this.options.height=n,this.baseUnit=e/(95+this.quietZoneLength),this.value=i,this.checksum=this.calculateChecksum(),this.leftKey=i[0],this.leftPart=i.substr(1,6),this.rightPart=i.substr(7)+this.checksum},e.prototype.addData=function(){this.addPieces(this.characterMap.start),this.addSide(this.leftPart,this.leftKey),this.addPieces(this.characterMap.middle),this.addSide(this.rightPart),this.addPieces(this.characterMap.start)},e.prototype.addSide=function(t,e){for(var n=this,i=0;i<t.length;i++)e&&parseInt(n.keyTable[e].charAt(i),10)?n.addPieces(Array.prototype.slice.call(n.characterMap.digits[t.charAt(i)]).reverse(),!0):n.addPieces(n.characterMap.digits[t.charAt(i)],!0)},e.prototype.addPieces=function(t,e){for(var n=this,i=0;i<t.length;i++)e?n.pattern.push({y1:0,y2:.95*n.options.height,width:t[i]}):n.pattern.push(t[i])},e.prototype.calculateChecksum=function(){for(var t=0,e=0,n=this.value.split("").reverse().join(""),i=0;i<n.length;i++)i%2?e+=parseInt(n.charAt(i),10):t+=parseInt(n.charAt(i),10);return(10-(3*t+e)%10)%10},e}(ag),Ug=Object.assign,Vg=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Ug(this,{name:"EAN 8"})},e.prototype.initValue=function(t,e,n){if(7!==t.length||/\D/.test(t))throw new Error("Invalid value provided");this.value=t,this.options.height=n,this.checksum=this.calculateChecksum(this.value),this.leftPart=this.value.substr(0,4),this.rightPart=this.value.substr(4)+this.checksum,this.pattern=[],this.baseUnit=e/(67+this.quietZoneLength)},e}(Hg),Wg={code11:cg,code39:dg,code39extended:fg,code93:mg,code93extended:yg,code128:Ig,code128a:Tg,code128b:Mg,code128c:Og};function qg(t,e){var n=t.style.display;"canvas"===e&&(t.style.display="block");var i={width:t.clientWidth,height:t.clientHeight};return t.style.display=n,i}Wg["gs1-128"]=Dg,Wg.msimod10=Lg,Wg.msimod11=Ng,Wg.msimod1010=Bg,Wg.msimod1110=jg,Wg.postnet=wg,Wg.ean8=Vg,Wg.ean13=Hg;var Kg=function(t){function e(e,n,i){void 0===i&&(i=Oe),t.call(this),this.options=st({},this.options,n),this.element=e,this.onError=i,this._initElement(),this._initSurface(),this._setOptions(n),n&&Ht(n.value)&&this.redraw()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){V(this.element,"k-barcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return mh.A.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t){this._setOptions(t),this._initSurface(),this.redraw()},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t.width,height:t.height}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype._render=function(){var t,e,n=this.options,i=n.value,r=n.text,o=dt(r.margin),s=this._getSize(),a=n.border||{},l=this.encoding,c=new Tn(0,0,s.width,s.height).unpad(a.width).unpad(n.padding),h=c.height(),u=new Hn.A;this.contentBox=c,u.append(this._getBackground(s)),r.visible&&(h-=yi.A(i,{font:r.font}).height+o.top+o.bottom);try{t=l.encode(i,c.width(),h)}catch(t){return this.onError(t),u}return r.visible&&(e=i,n.checksum&&Ht(l.checksum)&&(e+=" "+l.checksum),u.append(this._getText(e))),this.barHeight=h,this._bandsGroup=this._getBands(t.pattern,t.baseUnit),u.append(this._bandsGroup),u},e.prototype.exportVisual=function(){return this._render()},e.prototype._getSize=function(){var t=qg(this.element,this.options.renderAs),e=new Mh.A(300,100);return t.width>0&&(e.width=t.width),t.height>0&&(e.height=t.height),this.options.width&&(e.width=this.options.width),this.options.height&&(e.height=this.options.height),e},e.prototype.value=function(t){if(!Ht(t))return this.options.value;this.options.value=String(t),this.redraw()},e.prototype._getBands=function(t,e){for(var n,i,r=this.contentBox,o=r.x1,s=new Hn.A,a=0;a<t.length;a++){if(n=(i=at(t[a])?t[a]:{width:t[a],y1:0,y2:this.barHeight}).width*e,a%2){var l=kn.A.fromPoints(new Pn.A(o,i.y1+r.y1),new Pn.A(o+n,i.y2+r.y1)),c=Ln.w.fromRect(l,{fill:{color:this.options.color},stroke:null});s.append(c)}o+=n}return s},e.prototype._getBackground=function(t){var e=this.options,n=e.border||{},i=new Tn(0,0,t.width,t.height).unpad(n.width/2);return Ln.w.fromRect(i.toRect(),{fill:{color:e.background},stroke:{color:n.width?n.color:"",width:n.width,dashType:n.dashType}})},e.prototype._getText=function(t){var e=this.options.text,n=this._textbox=new Ci(t,{font:e.font,color:e.color,align:"center",vAlign:"bottom",margin:e.margin});return n.reflow(this.contentBox),n.renderVisual(),n.visual},e.prototype._setOptions=function(t){if(this.type=(t.type||this.options.type).toLowerCase(),"upca"===this.type&&(this.type="ean13",t.value="0"+t.value),"upce"===this.type&&(this.type="ean8",t.value="0"+t.value),!Wg[this.type])throw new Error("Encoding '"+this.type+"' is not supported.");this.encoding=new Wg[this.type],this.options=st({},this.options,t)},e}(Nt.A);re(Kg,{name:"Barcode",renderAs:"svg",value:"",type:"code39",checksum:!1,width:0,height:0,color:"black",background:"white",text:{visible:!0,font:"16px Consolas, Monaco, Sans Mono, monospace, sans-serif",color:"black",margin:{top:0,bottom:0,left:0,right:0}},border:{width:0,dashType:"solid",color:"black"},padding:{top:0,bottom:0,left:0,right:0}});const Xg=Kg;var Gg={width:500,height:100};const Yg=function(t,e){if(void 0===e&&(e=Gg),!t)throw new Error("Please specify barcode type to validate.");var n=t.toLowerCase(),i="";if("upca"===n?(n="ean13",i="0"):"upce"===n&&(n="ean8",i="0"),!Wg[n])throw new Error("Encoding '"+t+"' is not supported.");return function(t,e,n){return function(i){try{t.encode(n+i,e.width,e.height)}catch(t){return{valid:!1,error:t}}return{valid:!0}}}(new Wg[n],e,i)};var Jg=n(677),Zg=Object.assign;function Qg(t,e){for(var n=[],i=0;i<t.length;)n.push(t.substring(i,i+e)),i+=e;return n}function tm(t,e){var n=Number(t).toString(2);return n.length<e&&(n=new Array(e-n.length+1).join(0)+n),n}function em(t){return parseInt(t,2)}var nm=function(t){function e(e){t.call(this),this.matrix=e,this.row=e.length-1,this.column=e.length-1,this.startColumn=this.column,this.dir=-1,this.c=0}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.move=function(){this.row+=this.dir*this.c,this.c^=1,this.column=this.startColumn-this.c},e.prototype.getNextCell=function(){for(var t=this;void 0!==this.matrix[this.row][this.column];)t.move(),(t.row<0||t.row>=t.matrix.length)&&(t.dir=-t.dir,t.startColumn-=8!==t.startColumn?2:3,t.column=t.startColumn,t.row=t.dir<0?t.matrix.length-1:0);return{row:this.row,column:this.column}},e.prototype.getNextRemainderCell=function(){if(this.move(),void 0===this.matrix[this.row][this.column])return{row:this.row,column:this.column}},e}(Nt.A),im=function(t){function e(e,n){t.call(this),this.dataString=e,this.version=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nt.A),rm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getEncodingResult=function(t,e){var n=function(t){var e,n=[],i=0,r=t;n.push(qm(r,Fm,Pm,Rm,e)),e=n[0].mode,r=r.substr(n[0].modeString.length);for(;r.length>0;){var o=qm(r,Lm,Nm,Bm,e);o.mode!==e?(e=o.mode,n.push(o),i++):n[i].modeString+=o.modeString,r=r.substr(o.modeString.length)}return n}(t),i=function(t){for(var e=0,n=0;n<t.length;n++)e+=cm[t[n].mode].getStringBitsLength(t[n].modeString.length);return Math.ceil(e/8)}(n),r=Km(i,e),o=function(t,e){for(var n="",i=0;i<t.length;i++)n+=cm[t[i].mode].encode(t[i].modeString,e);return n}(n,r);return new im(o,r)},e}(Nt.A),om=function(t){function e(){t.call(this),this.initProperties()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){Zg(this,{modeIndicator:"",bitsInCharacterCount:[]})},e.prototype.getVersionIndex=function(t){return t<10?0:t>26?2:1},e.prototype.getBitsCharacterCount=function(t){return this.bitsInCharacterCount[this.getVersionIndex(t||40)]},e.prototype.getModeCountString=function(t,e){return this.modeIndicator+tm(t,this.getBitsCharacterCount(e))},e.prototype.encode=function(){},e.prototype.getStringBitsLength=function(){},e.prototype.getValue=function(){},e}(Nt.A),sm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Zg(this,{bitsInCharacterCount:[10,12,14],modeIndicator:"0001"})},e.prototype.getValue=function(t){return parseInt(t,10)},e.prototype.encode=function(t,e){var n,i=Qg(t,3),r=this.getModeCountString(t.length,e);for(n=0;n<i.length-1;n++)r+=tm(i[n],10);return r+tm(i[n],1+3*i[n].length)},e.prototype.getStringBitsLength=function(t,e){var n=t%3;return 4+this.getBitsCharacterCount(e)+10*Math.floor(t/3)+3*n+(0===n?0:1)},e}(om),am=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Zg(this,{characters:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,G:16,H:17,I:18,J:19,K:20,L:21,M:22,N:23,O:24,P:25,Q:26,R:27,S:28,T:29,U:30,V:31,W:32,X:33,Y:34,Z:35," ":36,$:37,"%":38,"*":39,"+":40,"-":41,".":42,"/":43,":":44},bitsInCharacterCount:[9,11,13],modeIndicator:"0010"})},e.prototype.getValue=function(t){return this.characters[t]},e.prototype.encode=function(t,e){var n,i=Qg(t,2),r=this.getModeCountString(t.length,e);for(n=0;n<i.length-1;n++)r+=tm(45*this.getValue(i[n].charAt(0))+this.getValue(i[n].charAt(1)),11);return r+tm(2===i[n].length?45*this.getValue(i[n].charAt(0))+this.getValue(i[n].charAt(1)):this.getValue(i[n].charAt(0)),1+5*i[n].length)},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+11*Math.floor(t/2)+t%2*6},e}(om),lm=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),Zg(this,{bitsInCharacterCount:[8,16,16],modeIndicator:"0100"})},e.prototype.getValue=function(t){var e=t.charCodeAt(0);if(e<=127||160<=e&&e<=255)return e;throw new Error('Unsupported character in QR Code: "'+t+'".')},e.prototype.encode=function(t,e){for(var n=this.getModeCountString(t.length,e),i=0;i<t.length;i++)n+=tm(this.getValue(t.charAt(i)),8);return n},e.prototype.getStringBitsLength=function(t,e){return 4+this.getBitsCharacterCount(e)+8*t},e}(om),cm={};cm.numeric=new sm,cm.alphanumeric=new am,cm.byte=new lm;var hm=function(t){function e(){t.call(this),this.initProperties(),this.mode=cm[this.encodingMode]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){Zg(this,{encodingMode:"byte",utfBOM:"111011111011101110111111",initialModeCountStringLength:20,ranges:[128,2048,65536,2097152,67108864]})},e.prototype.getEncodingResult=function(t,e){var n=this.encode(t),i=Km(this.getDataCodewordsCount(n),e),r=this.mode.getModeCountString(n.length/8,i)+n;return new im(r,i)},e.prototype.getDataCodewordsCount=function(t){var e=t.length;return Math.ceil((this.initialModeCountStringLength+e)/8)},e.prototype.encode=function(t){for(var e=this.utfBOM,n=0;n<t.length;n++)e+=this.encodeCharacter(t.charCodeAt(n));return e},e.prototype.encodeCharacter=function(t){var e=this.getBytesCount(t),n=e-1,i="";if(1===e)i=tm(t,8);else{for(var r=8-e,o=0;o<n;o++)i=tm(t>>6*o&63|128,8)+i;i=(t>>6*n|255>>r<<r).toString(2)+i}return i},e.prototype.getBytesCount=function(t){for(var e=this.ranges,n=0;n<e.length;n++)if(t<e[n])return n+1},e}(Nt.A),um=[{L:{groups:[[1,19]],totalDataCodewords:19,errorCodewordsPerBlock:7},M:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:10},Q:{groups:[[1,13]],totalDataCodewords:13,errorCodewordsPerBlock:13},H:{groups:[[1,9]],totalDataCodewords:9,errorCodewordsPerBlock:17}},{L:{groups:[[1,34]],totalDataCodewords:34,errorCodewordsPerBlock:10},M:{groups:[[1,28]],totalDataCodewords:28,errorCodewordsPerBlock:16},Q:{groups:[[1,22]],totalDataCodewords:22,errorCodewordsPerBlock:22},H:{groups:[[1,16]],totalDataCodewords:16,errorCodewordsPerBlock:28}},{L:{groups:[[1,55]],totalDataCodewords:55,errorCodewordsPerBlock:15},M:{groups:[[1,44]],totalDataCodewords:44,errorCodewordsPerBlock:26},Q:{groups:[[2,17]],totalDataCodewords:34,errorCodewordsPerBlock:18},H:{groups:[[2,13]],totalDataCodewords:26,errorCodewordsPerBlock:22}},{L:{groups:[[1,80]],totalDataCodewords:80,errorCodewordsPerBlock:20},M:{groups:[[2,32]],totalDataCodewords:64,errorCodewordsPerBlock:18},Q:{groups:[[2,24]],totalDataCodewords:48,errorCodewordsPerBlock:26},H:{groups:[[4,9]],totalDataCodewords:36,errorCodewordsPerBlock:16}},{L:{groups:[[1,108]],totalDataCodewords:108,errorCodewordsPerBlock:26},M:{groups:[[2,43]],totalDataCodewords:86,errorCodewordsPerBlock:24},Q:{groups:[[2,15],[2,16]],totalDataCodewords:62,errorCodewordsPerBlock:18},H:{groups:[[2,11],[2,12]],totalDataCodewords:46,errorCodewordsPerBlock:22}},{L:{groups:[[2,68]],totalDataCodewords:136,errorCodewordsPerBlock:18},M:{groups:[[4,27]],totalDataCodewords:108,errorCodewordsPerBlock:16},Q:{groups:[[4,19]],totalDataCodewords:76,errorCodewordsPerBlock:24},H:{groups:[[4,15]],totalDataCodewords:60,errorCodewordsPerBlock:28}},{L:{groups:[[2,78]],totalDataCodewords:156,errorCodewordsPerBlock:20},M:{groups:[[4,31]],totalDataCodewords:124,errorCodewordsPerBlock:18},Q:{groups:[[2,14],[4,15]],totalDataCodewords:88,errorCodewordsPerBlock:18},H:{groups:[[4,13],[1,14]],totalDataCodewords:66,errorCodewordsPerBlock:26}},{L:{groups:[[2,97]],totalDataCodewords:194,errorCodewordsPerBlock:24},M:{groups:[[2,38],[2,39]],totalDataCodewords:154,errorCodewordsPerBlock:22},Q:{groups:[[4,18],[2,19]],totalDataCodewords:110,errorCodewordsPerBlock:22},H:{groups:[[4,14],[2,15]],totalDataCodewords:86,errorCodewordsPerBlock:26}},{L:{groups:[[2,116]],totalDataCodewords:232,errorCodewordsPerBlock:30},M:{groups:[[3,36],[2,37]],totalDataCodewords:182,errorCodewordsPerBlock:22},Q:{groups:[[4,16],[4,17]],totalDataCodewords:132,errorCodewordsPerBlock:20},H:{groups:[[4,12],[4,13]],totalDataCodewords:100,errorCodewordsPerBlock:24}},{L:{groups:[[2,68],[2,69]],totalDataCodewords:274,errorCodewordsPerBlock:18},M:{groups:[[4,43],[1,44]],totalDataCodewords:216,errorCodewordsPerBlock:26},Q:{groups:[[6,19],[2,20]],totalDataCodewords:154,errorCodewordsPerBlock:24},H:{groups:[[6,15],[2,16]],totalDataCodewords:122,errorCodewordsPerBlock:28}},{L:{groups:[[4,81]],totalDataCodewords:324,errorCodewordsPerBlock:20},M:{groups:[[1,50],[4,51]],totalDataCodewords:254,errorCodewordsPerBlock:30},Q:{groups:[[4,22],[4,23]],totalDataCodewords:180,errorCodewordsPerBlock:28},H:{groups:[[3,12],[8,13]],totalDataCodewords:140,errorCodewordsPerBlock:24}},{L:{groups:[[2,92],[2,93]],totalDataCodewords:370,errorCodewordsPerBlock:24},M:{groups:[[6,36],[2,37]],totalDataCodewords:290,errorCodewordsPerBlock:22},Q:{groups:[[4,20],[6,21]],totalDataCodewords:206,errorCodewordsPerBlock:26},H:{groups:[[7,14],[4,15]],totalDataCodewords:158,errorCodewordsPerBlock:28}},{L:{groups:[[4,107]],totalDataCodewords:428,errorCodewordsPerBlock:26},M:{groups:[[8,37],[1,38]],totalDataCodewords:334,errorCodewordsPerBlock:22},Q:{groups:[[8,20],[4,21]],totalDataCodewords:244,errorCodewordsPerBlock:24},H:{groups:[[12,11],[4,12]],totalDataCodewords:180,errorCodewordsPerBlock:22}},{L:{groups:[[3,115],[1,116]],totalDataCodewords:461,errorCodewordsPerBlock:30},M:{groups:[[4,40],[5,41]],totalDataCodewords:365,errorCodewordsPerBlock:24},Q:{groups:[[11,16],[5,17]],totalDataCodewords:261,errorCodewordsPerBlock:20},H:{groups:[[11,12],[5,13]],totalDataCodewords:197,errorCodewordsPerBlock:24}},{L:{groups:[[5,87],[1,88]],totalDataCodewords:523,errorCodewordsPerBlock:22},M:{groups:[[5,41],[5,42]],totalDataCodewords:415,errorCodewordsPerBlock:24},Q:{groups:[[5,24],[7,25]],totalDataCodewords:295,errorCodewordsPerBlock:30},H:{groups:[[11,12],[7,13]],totalDataCodewords:223,errorCodewordsPerBlock:24}},{L:{groups:[[5,98],[1,99]],totalDataCodewords:589,errorCodewordsPerBlock:24},M:{groups:[[7,45],[3,46]],totalDataCodewords:453,errorCodewordsPerBlock:28},Q:{groups:[[15,19],[2,20]],totalDataCodewords:325,errorCodewordsPerBlock:24},H:{groups:[[3,15],[13,16]],totalDataCodewords:253,errorCodewordsPerBlock:30}},{L:{groups:[[1,107],[5,108]],totalDataCodewords:647,errorCodewordsPerBlock:28},M:{groups:[[10,46],[1,47]],totalDataCodewords:507,errorCodewordsPerBlock:28},Q:{groups:[[1,22],[15,23]],totalDataCodewords:367,errorCodewordsPerBlock:28},H:{groups:[[2,14],[17,15]],totalDataCodewords:283,errorCodewordsPerBlock:28}},{L:{groups:[[5,120],[1,121]],totalDataCodewords:721,errorCodewordsPerBlock:30},M:{groups:[[9,43],[4,44]],totalDataCodewords:563,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[1,23]],totalDataCodewords:397,errorCodewordsPerBlock:28},H:{groups:[[2,14],[19,15]],totalDataCodewords:313,errorCodewordsPerBlock:28}},{L:{groups:[[3,113],[4,114]],totalDataCodewords:795,errorCodewordsPerBlock:28},M:{groups:[[3,44],[11,45]],totalDataCodewords:627,errorCodewordsPerBlock:26},Q:{groups:[[17,21],[4,22]],totalDataCodewords:445,errorCodewordsPerBlock:26},H:{groups:[[9,13],[16,14]],totalDataCodewords:341,errorCodewordsPerBlock:26}},{L:{groups:[[3,107],[5,108]],totalDataCodewords:861,errorCodewordsPerBlock:28},M:{groups:[[3,41],[13,42]],totalDataCodewords:669,errorCodewordsPerBlock:26},Q:{groups:[[15,24],[5,25]],totalDataCodewords:485,errorCodewordsPerBlock:30},H:{groups:[[15,15],[10,16]],totalDataCodewords:385,errorCodewordsPerBlock:28}},{L:{groups:[[4,116],[4,117]],totalDataCodewords:932,errorCodewordsPerBlock:28},M:{groups:[[17,42]],totalDataCodewords:714,errorCodewordsPerBlock:26},Q:{groups:[[17,22],[6,23]],totalDataCodewords:512,errorCodewordsPerBlock:28},H:{groups:[[19,16],[6,17]],totalDataCodewords:406,errorCodewordsPerBlock:30}},{L:{groups:[[2,111],[7,112]],totalDataCodewords:1006,errorCodewordsPerBlock:28},M:{groups:[[17,46]],totalDataCodewords:782,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[16,25]],totalDataCodewords:568,errorCodewordsPerBlock:30},H:{groups:[[34,13]],totalDataCodewords:442,errorCodewordsPerBlock:24}},{L:{groups:[[4,121],[5,122]],totalDataCodewords:1094,errorCodewordsPerBlock:30},M:{groups:[[4,47],[14,48]],totalDataCodewords:860,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[14,25]],totalDataCodewords:614,errorCodewordsPerBlock:30},H:{groups:[[16,15],[14,16]],totalDataCodewords:464,errorCodewordsPerBlock:30}},{L:{groups:[[6,117],[4,118]],totalDataCodewords:1174,errorCodewordsPerBlock:30},M:{groups:[[6,45],[14,46]],totalDataCodewords:914,errorCodewordsPerBlock:28},Q:{groups:[[11,24],[16,25]],totalDataCodewords:664,errorCodewordsPerBlock:30},H:{groups:[[30,16],[2,17]],totalDataCodewords:514,errorCodewordsPerBlock:30}},{L:{groups:[[8,106],[4,107]],totalDataCodewords:1276,errorCodewordsPerBlock:26},M:{groups:[[8,47],[13,48]],totalDataCodewords:1e3,errorCodewordsPerBlock:28},Q:{groups:[[7,24],[22,25]],totalDataCodewords:718,errorCodewordsPerBlock:30},H:{groups:[[22,15],[13,16]],totalDataCodewords:538,errorCodewordsPerBlock:30}},{L:{groups:[[10,114],[2,115]],totalDataCodewords:1370,errorCodewordsPerBlock:28},M:{groups:[[19,46],[4,47]],totalDataCodewords:1062,errorCodewordsPerBlock:28},Q:{groups:[[28,22],[6,23]],totalDataCodewords:754,errorCodewordsPerBlock:28},H:{groups:[[33,16],[4,17]],totalDataCodewords:596,errorCodewordsPerBlock:30}},{L:{groups:[[8,122],[4,123]],totalDataCodewords:1468,errorCodewordsPerBlock:30},M:{groups:[[22,45],[3,46]],totalDataCodewords:1128,errorCodewordsPerBlock:28},Q:{groups:[[8,23],[26,24]],totalDataCodewords:808,errorCodewordsPerBlock:30},H:{groups:[[12,15],[28,16]],totalDataCodewords:628,errorCodewordsPerBlock:30}},{L:{groups:[[3,117],[10,118]],totalDataCodewords:1531,errorCodewordsPerBlock:30},M:{groups:[[3,45],[23,46]],totalDataCodewords:1193,errorCodewordsPerBlock:28},Q:{groups:[[4,24],[31,25]],totalDataCodewords:871,errorCodewordsPerBlock:30},H:{groups:[[11,15],[31,16]],totalDataCodewords:661,errorCodewordsPerBlock:30}},{L:{groups:[[7,116],[7,117]],totalDataCodewords:1631,errorCodewordsPerBlock:30},M:{groups:[[21,45],[7,46]],totalDataCodewords:1267,errorCodewordsPerBlock:28},Q:{groups:[[1,23],[37,24]],totalDataCodewords:911,errorCodewordsPerBlock:30},H:{groups:[[19,15],[26,16]],totalDataCodewords:701,errorCodewordsPerBlock:30}},{L:{groups:[[5,115],[10,116]],totalDataCodewords:1735,errorCodewordsPerBlock:30},M:{groups:[[19,47],[10,48]],totalDataCodewords:1373,errorCodewordsPerBlock:28},Q:{groups:[[15,24],[25,25]],totalDataCodewords:985,errorCodewordsPerBlock:30},H:{groups:[[23,15],[25,16]],totalDataCodewords:745,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[3,116]],totalDataCodewords:1843,errorCodewordsPerBlock:30},M:{groups:[[2,46],[29,47]],totalDataCodewords:1455,errorCodewordsPerBlock:28},Q:{groups:[[42,24],[1,25]],totalDataCodewords:1033,errorCodewordsPerBlock:30},H:{groups:[[23,15],[28,16]],totalDataCodewords:793,errorCodewordsPerBlock:30}},{L:{groups:[[17,115]],totalDataCodewords:1955,errorCodewordsPerBlock:30},M:{groups:[[10,46],[23,47]],totalDataCodewords:1541,errorCodewordsPerBlock:28},Q:{groups:[[10,24],[35,25]],totalDataCodewords:1115,errorCodewordsPerBlock:30},H:{groups:[[19,15],[35,16]],totalDataCodewords:845,errorCodewordsPerBlock:30}},{L:{groups:[[17,115],[1,116]],totalDataCodewords:2071,errorCodewordsPerBlock:30},M:{groups:[[14,46],[21,47]],totalDataCodewords:1631,errorCodewordsPerBlock:28},Q:{groups:[[29,24],[19,25]],totalDataCodewords:1171,errorCodewordsPerBlock:30},H:{groups:[[11,15],[46,16]],totalDataCodewords:901,errorCodewordsPerBlock:30}},{L:{groups:[[13,115],[6,116]],totalDataCodewords:2191,errorCodewordsPerBlock:30},M:{groups:[[14,46],[23,47]],totalDataCodewords:1725,errorCodewordsPerBlock:28},Q:{groups:[[44,24],[7,25]],totalDataCodewords:1231,errorCodewordsPerBlock:30},H:{groups:[[59,16],[1,17]],totalDataCodewords:961,errorCodewordsPerBlock:30}},{L:{groups:[[12,121],[7,122]],totalDataCodewords:2306,errorCodewordsPerBlock:30},M:{groups:[[12,47],[26,48]],totalDataCodewords:1812,errorCodewordsPerBlock:28},Q:{groups:[[39,24],[14,25]],totalDataCodewords:1286,errorCodewordsPerBlock:30},H:{groups:[[22,15],[41,16]],totalDataCodewords:986,errorCodewordsPerBlock:30}},{L:{groups:[[6,121],[14,122]],totalDataCodewords:2434,errorCodewordsPerBlock:30},M:{groups:[[6,47],[34,48]],totalDataCodewords:1914,errorCodewordsPerBlock:28},Q:{groups:[[46,24],[10,25]],totalDataCodewords:1354,errorCodewordsPerBlock:30},H:{groups:[[2,15],[64,16]],totalDataCodewords:1054,errorCodewordsPerBlock:30}},{L:{groups:[[17,122],[4,123]],totalDataCodewords:2566,errorCodewordsPerBlock:30},M:{groups:[[29,46],[14,47]],totalDataCodewords:1992,errorCodewordsPerBlock:28},Q:{groups:[[49,24],[10,25]],totalDataCodewords:1426,errorCodewordsPerBlock:30},H:{groups:[[24,15],[46,16]],totalDataCodewords:1096,errorCodewordsPerBlock:30}},{L:{groups:[[4,122],[18,123]],totalDataCodewords:2702,errorCodewordsPerBlock:30},M:{groups:[[13,46],[32,47]],totalDataCodewords:2102,errorCodewordsPerBlock:28},Q:{groups:[[48,24],[14,25]],totalDataCodewords:1502,errorCodewordsPerBlock:30},H:{groups:[[42,15],[32,16]],totalDataCodewords:1142,errorCodewordsPerBlock:30}},{L:{groups:[[20,117],[4,118]],totalDataCodewords:2812,errorCodewordsPerBlock:30},M:{groups:[[40,47],[7,48]],totalDataCodewords:2216,errorCodewordsPerBlock:28},Q:{groups:[[43,24],[22,25]],totalDataCodewords:1582,errorCodewordsPerBlock:30},H:{groups:[[10,15],[67,16]],totalDataCodewords:1222,errorCodewordsPerBlock:30}},{L:{groups:[[19,118],[6,119]],totalDataCodewords:2956,errorCodewordsPerBlock:30},M:{groups:[[18,47],[31,48]],totalDataCodewords:2334,errorCodewordsPerBlock:28},Q:{groups:[[34,24],[34,25]],totalDataCodewords:1666,errorCodewordsPerBlock:30},H:{groups:[[20,15],[61,16]],totalDataCodewords:1276,errorCodewordsPerBlock:30}}],dm="0000",pm="numeric",fm="alphanumeric",gm="byte",mm={1:0},ym={0:1},vm={15:20,16:20,18:24,19:24,22:20,24:22,26:24,28:20,30:20,31:24,32:28,33:24,36:18,37:22,39:20,40:24},bm=[1,0,1,1,1],wm=[1,0,1],xm={L:"01",M:"00",Q:"11",H:"10"},_m="101010000010010",Sm="10100110111",Cm="1111100100101",km=["11101100","00010001"],Am=93,Em=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return(Math.floor(t/2)+Math.floor(e/3))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],Tm=/^\d+/,Mm="A-Z0-9 $%*+./:-",Om=new RegExp("^[A-Z $%*+./:-]+"),Im=new RegExp("^["+Mm+"]+"),Dm=new RegExp("^[^"+Mm+"]+"),Fm=8,Pm=5,Rm=8,Lm=17,Nm=9,Bm=16,jm=[[1,0],[1,25,0]];function zm(t,e,n,i){for(var r=0;r<t.length;r++)t[r][n][i]=e}function $m(t,e,n,i){for(var r=0;r<Em.length;r++)t[r][n][i]=Em[r](n,i)?1^e:parseInt(e,10)}function Hm(t,e){for(var n=[],i=t.length-2;i>=0;i--)n[i]=t[i]^e[i];return n}function Um(t,e){for(var n=[],i=0;i<t.length;i++)for(var r=0;r<e.length;r++)void 0===n[i+r]?n[i+r]=(t[i]+(e[r]>=0?e[r]:0))%255:n[i+r]=mm[ym[n[i+r]]^ym[(t[i]+e[r])%255]];return n}function Vm(t,e){var n=[],i=t.length-1;do{n[i]=ym[(t[i]+e)%255],i--}while(void 0!==t[i]);return n}function Wm(t,e){var n,i,r=jm[e-1],o=new Array(e).concat(t),s=new Array(o.length-r.length).concat(r),a=t.length,l=[];for(i=0;i<a;i++)n=Vm(s,mm[o[o.length-1]]),s.splice(0,1),o=Hm(n,o);for(i=o.length-1;i>=0;i--)l[e-1-i]=tm(o[i],8);return l}function qm(t,e,n,i,r){var o,s,a=Tm.exec(t),l=a?a[0]:"",c=Om.exec(t),h=c?c[0]:"",u=Im.exec(t),d=u?u[0]:"";return l&&(l.length>=e||t.length===l.length||l.length>=n&&!Im.test(t.charAt(l.length)))?(o=pm,s=l):d&&(t.length===d.length||d.length>=i||r===fm)?(o=fm,s=l||h):(o=gm,s=d?d+Dm.exec(t.substring(d.length))[0]:Dm.exec(t)[0]),{mode:o,modeString:s}}function Km(t,e){var n=0,i=um.length-1,r=Math.floor(um.length/2);do{t<um[r][e].totalDataCodewords?i=r:n=r,r=n+Math.floor((i-n)/2)}while(i-n>1);return t<=um[n][e].totalDataCodewords?r+1:i+1}function Xm(t,e,n){var i=em(e),r=e.length-1,o=t<<r,s=tm(t,n-r),a=function(t,e){var n=e.toString(2).length,i=t.toString(2).length,r=t;do{i=(r^=e<<i-n).toString(2).length}while(i>=n);return r}(o,i);return a=s+tm(a,r)}function Gm(t,e){return parseInt(t.charAt(e),10)}function Ym(t,e){var n,i,r=t[0],o=0,s=e.length;for(n=0,i=8;n<=8;n++)6!==n&&zm(t,Gm(e,s-1-o++),n,i);for(n=8,i=7;i>=0;i--)6!==i&&zm(t,Gm(e,s-1-o++),n,i);for(o=0,i=r.length-1,n=8;i>=r.length-8;i--)zm(t,Gm(e,s-1-o++),n,i);for(zm(t,1,r.length-8,8),n=r.length-7,i=8;n<r.length;n++)zm(t,Gm(e,s-1-o++),n,i)}function Jm(t,e){for(var n,i,r,o=t[0].length,s=o-11,a=o-11,l=0;l<e.length;l++)n=Math.floor(l/3),i=l%3,zm(t,r=Gm(e,e.length-l-1),0+n,s+i),zm(t,r,a+i,0+n)}function Zm(t,e,n,i){for(var r,o=e.length+2,s=e.length+1,a=0;a<e.length;a++)for(var l=a;l<o-a;l++)zm(t,r=e[a],n+l,i+a),zm(t,r,n+a,i+l),zm(t,r,n+s-l,i+s-a),zm(t,r,n+s-a,i+s-l)}function Qm(t,e,n,i){var r=n,o=i,s=t[0];do{zm(t,0,r,i),zm(t,0,n,o),r+=e[0],o+=e[1]}while(r>=0&&r<s.length)}function ty(t,e,n,i,r){e[t][i]=(e[t][i]<<1^r)%128,e[t][i]===Am&&(n[t]+=40)}function ey(t,e,n,i,r,o){n[t][o]===i?r[t][o]++:(n[t][o]=i,r[t][o]>=5&&(e[t]+=3+r[t][o]-5),r[t][o]=1)}function ny(t,e){var n=Math.floor(t/e*100),i=n%5,r=Math.abs(n-i-50),o=Math.abs(n+5-i-50);return 10*Math.min(r/5,o/5)}function iy(t,e,n){var i=function(t){return t&&t.toLowerCase().indexOf("utf_8")>=0?new hm:new rm}(n),r=i.getEncodingResult(t,e),o=r.version,s=um[o-1][e],a=function(t,e){for(var n,i,r,o,s,a=0,l=[],c=[],h=e.groups,u=0;u<h.length;u++){r=h[u][0];for(var d=0;d<r;d++){i=h[u][1],n=[],o=[];for(var p=1;p<=i;p++)s=t.substring(a,a+8),n.push(s),o[i-p]=em(s),a+=8;l.push(n),c.push(Wm(o,e.errorCodewordsPerBlock))}}return[l,c]}(function(t,e){for(var n=8*e,i=0,r=0,o=t;o.length<n&&i<dm.length;)o+=dm.charAt(i++);for(o.length%8!=0&&(o+=new Array(9-o.length%8).join("0"));o.length<n;)o+=km[r],r^=1;return o}(r.dataString,s.totalDataCodewords),s),l=function(t){for(var e=[],n=17+4*t,i=0;i<Em.length;i++){e[i]=new Array(n);for(var r=0;r<n;r++)e[i][r]=new Array(n)}return e}(o);!function(t){var e=t[0].length;Zm(t,bm,0,0),Qm(t,[-1,-1],7,7),Zm(t,bm,e-7,0),Qm(t,[1,-1],e-8,7),Zm(t,bm,0,e-7),Qm(t,[-1,1],7,e-8)}(l),function(t,e){if(!(e<2)){var n,i,r=t[0],o=r.length,s=Math.floor(e/7),a=[6],l=0;for((n=vm[e])?i=(o-13-n)/s:n=i=(o-13)/(s+1),a.push(a[l++]+n);a[l]+i<o;)a.push(a[l++]+i);for(var c=0;c<a.length;c++)for(var h=0;h<a.length;h++)void 0===r[a[c]][a[h]]&&Zm(t,wm,a[c]-2,a[h]-2)}}(l,o),function(t){for(var e=1,n=t[0].length,i=8;i<n-8;i++)zm(t,e,6,i),zm(t,e,i,6),e^=1}(l),o>=7&&Jm(l,tm(0,18)),Ym(l,tm(0,15)),function(t,e){for(var n,i,r,o=new nm(t[0]),s=0;s<e.length;s++)for(n=e[s],i=0;n.length>0;){for(var a=0;a<n.length;a++)for(var l=0;l<8;l++)r=o.getNextCell(),$m(t,n[a][i].charAt(l),r.row,r.column);for(i++;n[0]&&i===n[0].length;)n.splice(0,1)}for(;r=o.getNextRemainderCell();)$m(t,0,r.row,r.column)}(l,a);var c=function(t){var e,n,i=[],r=[],o=[],s=[],a=[],l=t[0].length;for(n=0;n<t.length;n++)i[n]=0,o[n]=0,a[n]=[0,0],s[n]=[0,0],r[n]=[];for(var c=0;c<l;c++)for(var h=0;h<l;h++)for(var u=0;u<t.length;u++)e=t[u],o[u]+=parseInt(e[c][h],10),r[u][0]===e[c][h]&&c+1<l&&h-1>=0&&e[c+1][h]===r[u][0]&&e[c+1][h-1]===r[u][0]&&(i[u]+=3),ty(u,s,i,0,e[c][h]),ty(u,s,i,1,e[h][c]),ey(u,i,r,e[c][h],a,0),ey(u,i,r,e[h][c],a,1);var d,p=l*l,f=Number.MAX_VALUE;for(n=0;n<i.length;n++)i[n]+=ny(o[n],p),i[n]<f&&(f=i[n],d=n);return d}(l),h=l[c];return o>=7&&Jm([h],function(t){return Xm(t,Cm,18)}(o)),Ym([h],function(t){var e,n="";if(0===em(t))return"101010000010010";e=Xm(em(t),Sm,15);for(var i=0;i<e.length;i++)n+=e.charAt(i)^_m.charAt(i);return n}(xm[e]+tm(c,3))),h}!function(){var t,e;for(e=1;e<255;e++)(t=2*ym[e-1])>255&&(t^=285),ym[e]=t,mm[t]=e;t=2*ym[e-1]^285,ym[e]=t,ym[-1]=0}(),function(){for(var t=2;t<=68;t++){var e=jm[t-1],n=[t,0];jm[t]=Um(e,n)}}();var ry=Math.round,oy=[[0,1],[1,1],[1,2],[2,2],[2,1],[3,1],[3,0],[2,0],[2,-1],[1,-1],[1,0]],sy=[[0,1],[1,1],[1,0]],ay=200,ly="L",cy="#fff",hy="#000",uy=1,dy=7,py=function(t){function e(e,n,i){void 0===i&&(i=Oe),t.call(this),this.options=st({},this.options,n),this.element=e,this.wrapper=this.element,this.onError=i,this._initElement(),this._initSurface(),this.setOptions(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._destroySurface()},e.prototype._initElement=function(){V(this.element,"k-qrcode")},e.prototype._initSurface=function(){var t=this.options,e=this.surface;e&&e.options.type===t.renderAs||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._createSurface=function(){return mh.A.create(this.surfaceElement,{type:this.options.renderAs})},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.surfaceElement.style.position="relative",this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.redraw=function(){var t=this._getSize();this.surface.clear(),this.surface.setSize({width:t,height:t}),this.createVisual(),this.surface.draw(this.visual)},e.prototype.getSize=function(){var t=this.element,e=t.clientWidth,n=t.clientHeight,i={width:0,height:0};return e>0&&(i.width=e),n&&(i.height=n),i},e.prototype._resize=function(){this.redraw()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.exportVisual=function(){return this._render()},e.prototype._render=function(){var t,e,n,i,r,o=this._value,s=this.options.border||{},a=this.options.padding||0,l=s.width||0;s.width=l;var c=new Hn.A;try{o&&(n=iy(o,this.options.errorCorrection,this.options.encoding),r=(i=this._getSize())-2*(l+a),t=this._calculateBaseUnit(r,n.length),e=l+a+(r-n.length*t)/2,c.append(this._renderBackground(i,s)),c.append(this._renderMatrix(n,t,e)),this._hasCustomLogo()?c.append(this._renderLogo(i,t)):this._isSwiss()&&c.append(this._renderSwissCode(i,t)))}catch(t){this.onError(t)}return c},e.prototype._renderLogo=function(t,e){var n,i=ry(t/2),r=this._getLogoSize(e*dy),o=this.options.overlay.imageUrl,s={x:i-r.width/2,y:i-r.height/2};return n=new kn.A(new Pn.A(s.x,s.y),new Mh.A(r.width,r.height)),new Jg.A(o,n)},e.prototype._renderSwissCode=function(t,e){var n=this._getLogoSize(e*dy),i=(n=Math.max(n.width,n.height))/4,r=i/2,o=t/2,s={},a=new Hn.A;return s.x=s.y=Math.ceil(o-e-n/2),a.append(this._renderShape(s,Math.ceil(n+2*e),sy,"#fff")),s.x=s.y=o-n/2,a.append(this._renderShape(s,n,sy,this.options.color)),s.x=o+r-n/2,s.y=o+r+i-n/2,a.append(this._renderShape(s,i,oy,"#fff")),a},e.prototype._renderShape=function(t,e,n,i){var r=new Ln.P({fill:{color:i},stroke:null});r.moveTo(t.x,t.y);for(var o=0;o<n.length;o++)r.lineTo(t.x+e*n[o][0],t.y+e*n[o][1]);return r.close(),r},e.prototype._getSize=function(){var t;if(this.options.size)t=parseInt(this.options.size,10);else{var e=qg(this.element,this.options.renderAs),n=Math.min(e.width,e.height);t=n>0?n:ay}return t},e.prototype._calculateBaseUnit=function(t,e){var n=Math.floor(t/e);if(n<uy){var i=Math.ceil(e*uy);this.onError(new Error("Insufficient size for QR Code: the current size is "+t+"px and the minimum size is "+i+"px."))}else n*e>=t&&n-1>=uy&&n--;return n},e.prototype._renderMatrix=function(t,e,n){for(var i=new Ln.P({fill:{color:this.options.color},stroke:null}),r=0;r<t.length;r++)for(var o=n+r*e,s=0;s<t.length;){for(;0===t[r][s]&&s<t.length;)s++;if(s<t.length){for(var a=s;1===t[r][s];)s++;var l=ry(n+a*e),c=ry(o),h=ry(n+s*e),u=ry(o+e);i.moveTo(l,c).lineTo(l,u).lineTo(h,u).lineTo(h,c).close()}}return i},e.prototype._renderBackground=function(t,e){var n=new Tn(0,0,t,t).unpad(e.width/2);return Ln.w.fromRect(n.toRect(),{fill:{color:this.options.background},stroke:{color:e.color,width:e.width}})},e.prototype.setOptions=function(t){var e=t||{};this.options=Zg(this.options,e),void 0!==t.value&&(this._value=String(this.options.value)),this._initSurface(),this.redraw()},e.prototype.value=function(t){if(void 0===t)return this._value;this._value=String(t),this.redraw()},e.prototype._hasCustomLogo=function(){return Boolean(this.options.overlay.imageUrl)},e.prototype._isSwiss=function(){return"swiss"===this.options.overlay.type},e.prototype._getLogoSize=function(t){var e=this.options.overlay.width,n=this.options.overlay.height;return e||n?e&&!n?n=e:!e&&n&&(e=n):e=n=t,{width:e,height:n}},e}(Nt.A);re(py,{name:"QRCode",renderAs:"svg",encoding:"ISO_8859_1",value:"",errorCorrection:ly,background:cy,color:hy,size:"",padding:0,border:{color:"",width:0},overlay:{type:"image",imageUrl:"",width:0,height:0}});const fy=py;const gy=function(t){return void 0===t&&(t="ISO_8859_1"),function(e){try{iy(e,"L",t)}catch(t){return{valid:!1,error:t}}return{valid:!0}}};var my={WGS84:{a:6378137,b:6356752.314245179,f:.0033528106647474805,e:.08181919084262149}};function yy(t){return t*t}var vy=Math,by=vy.abs,wy=vy.atan,xy=vy.atan2,_y=vy.cos,Sy=vy.sin,Cy=vy.tan,ky=function(t){function e(e,n){t.call(this),this.initProperties(),1===arguments.length?(this.lat=e[0],this.lng=e[1]):(this.lat=e,this.lng=n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){st(this,{DISTANCE_ITERATIONS:100,DISTANCE_CONVERGENCE:1e-12,DISTANCE_PRECISION:2,FORMAT:"{0:N6}{1:N6}"})},e.prototype.toArray=function(){return[this.lat,this.lng]},e.prototype.equals=function(t){return t&&t.lat===this.lat&&t.lng===this.lng},e.prototype.clone=function(){return new e(this.lat,this.lng)},e.prototype.round=function(t){return this.lng=Qt(this.lng,t),this.lat=Qt(this.lat,t),this},e.prototype.wrap=function(){return this.lng=this.lng%180,this.lat=this.lat%90,this},e.prototype.distanceTo=function(t,e){return this.greatCircleTo(t,e).distance},e.prototype.destination=function(t,n,i){var r=Zt(n),o=i||my.WGS84,s=Zt(this.lat),a=Zt(this.lng),l=t/o.a,c=vy.asin(Sy(s)*_y(l)+_y(s)*Sy(l)*_y(r)),h=a+xy(Sy(r)*Sy(l)*_y(s),_y(l)-Sy(s)*Sy(c));return new e(Ut(c),Ut(h))},e.prototype.greatCircleTo=function(t,n){var i=e.create(i),r=n||my.WGS84;if(!i||this.clone().round(8).equals(i.clone().round(8)))return{distance:0,azimuthFrom:0,azimuthTo:0};for(var o,s,a,l,c,h,u,d,p=r.a,f=r.b,g=r.f,m=Zt(i.lng-this.lng),y=wy((1-g)*Cy(Zt(this.lat))),v=Sy(y),b=_y(y),w=wy((1-g)*Cy(Zt(i.lat))),x=Sy(w),_=_y(w),S=m,C=this.DISTANCE_ITERATIONS,k=!1;!k&&C-- >0;){s=Sy(S),a=_y(S),l=vy.sqrt(yy(_*s)+yy(b*x-v*_*a)),d=xy(l,h=v*x+b*_*a);var A=b*_*s/l;u=0,0!==(c=1-yy(A))&&(u=h-2*v*x/c),o=S;var E=g/16*c*(4+g*(4-3*c));S=m+(1-E)*g*A*(d+E*l*(u+E*h*(2*yy(u)-1))),k=by(S-o)<=this.DISTANCE_CONVERGENCE}var T=c*(yy(p)-yy(f))/yy(f),M=1+T/16384*(4096+T*(T*(320-175*T)-768)),O=T/1024*(256+T*(T*(74-47*T)-128)),I=O*l*(u+O/4*(h*(2*yy(u)-1)-O/6*u*(4*yy(l)-3)*(4*yy(u)-3))),D=xy(_*s,b*x-v*_*a),F=xy(b*s,-v*_+b*x*a);return{distance:Qt(f*M*(d-I),this.DISTANCE_PRECISION),azimuthFrom:Ut(D),azimuthTo:Ut(F)}},e.prototype.toString=function(){return String(this.lat)+","+String(this.lng)},e.fromLngLat=function(t){return new e(t[1],t[0])},e.fromLatLng=function(t){return new e(t[0],t[1])},e.create=function(t,n){if(Ht(t))return t instanceof e?t.clone():1===arguments.length&&2===t.length?e.fromLatLng(t):new e(t,n)},e}(Nt.A),Ay=Math,Ey=Ay.atan,Ty=Ay.exp,My=Ay.pow,Oy=Ay.sin,Iy=Ay.log,Dy=Ay.tan,Fy=Pn.A,Py=Ay.PI,Ry=Py/2,Ly=Py/4,Ny=Py/180,By=my.WGS84,jy=function(t){function e(e){t.call(this),this.initProperties(),this._initOptions(e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype.initProperties=function(){st(this,{MAX_LNG:180,MAX_LAT:85.0840590501,INVERSE_ITERATIONS:15,INVERSE_CONVERGENCE:1e-12})},e.prototype.forward=function(t,e){var n=this,i=n.options,r=i.datum.a,o=i.centralMeridian,s=Yt(t.lat,-n.MAX_LAT,n.MAX_LAT),a=e?Yt(t.lng,-n.MAX_LNG,n.MAX_LNG):t.lng,l=Zt(a-o)*r,c=n._projectLat(s);return new Fy(l,c)},e.prototype._projectLat=function(t){var e=this.options.datum,n=e.e,i=e.a,r=Zt(t),o=Dy(Ly+r/2),s=n*Oy(r),a=My((1-s)/(1+s),n/2);return i*Iy(o*a)},e.prototype.inverse=function(t,e){var n=this,i=n.options,r=i.datum.a,o=i.centralMeridian,s=t.x/(Ny*r)+o,a=Yt(n._inverseY(t.y),-n.MAX_LAT,n.MAX_LAT);return e&&(s=Yt(s,-n.MAX_LNG,n.MAX_LNG)),new ky(a,s)},e.prototype._inverseY=function(t){var e,n=this,i=n.options.datum,r=i.a,o=i.e,s=o/2,a=Ty(-t/r),l=Ry-2*Ey(a);for(e=0;e<=n.INVERSE_ITERATIONS;e++){var c=o*Oy(l),h=My((1-c)/(1+c),s),u=Ry-2*Ey(a*h)-l;if(l+=u,Ay.abs(u)<=n.INVERSE_CONVERGENCE)break}return Ut(l)},e}(Nt.A);re(jy,{centralMeridian:0,datum:By});var zy=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initProperties=function(){t.prototype.initProperties.call(this),st(this,{MAX_LAT:85.0511287798})},e.prototype._projectLat=function(t){var e=this.options.datum.a,n=Zt(t),i=Dy(Ly+n/2);return e*Iy(i)},e.prototype._inverseY=function(t){var e=this.options.datum.a,n=Ty(-t/e);return Ut(Ry-2*Ey(n))},e}(jy),$y=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.forward=function(t){return new Fy(t.lng,t.lat)},e.prototype.inverse=function(t){return new ky(t.y,t.x)},e}(Nt.A),Hy=function(t){function e(){t.call(this);var e=this._proj=new zy,n=this.c=2*Py*e.options.datum.a;this._tm=$n.A().translate(.5,.5).scale(1/n,-1/n),this._itm=$n.A().scale(n,-n).translate(-.5,-.5)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t,e,n){return this._proj.forward(t,n).transform(this._tm).scale(e||1)},e.prototype.toLocation=function(t,e,n){var i=t.clone().scale(1/(e||1)).transform(this._itm);return this._proj.inverse(i,n)},e}(Nt.A),Uy=(function(t){function e(){t.call(this),this._proj=new jy}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(Nt.A),function(t){function e(){t.call(this),this._proj=new $y}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toPoint=function(t){return this._proj.forward(t)},e.prototype.toLocation=function(t){return this._proj.inverse(t)}}(Nt.A),Object.assign,function(t,e){return t.bind(e)}),Vy=function(t){var e=document.createElement("div");return e.innerHTML=t,e.firstChild},Wy=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},qy=function(t,e){e.insertBefore(t,e.firstChild)},Ky=function(t){return t.replace(/([a-z][A-Z])/g,(function(t){return t.charAt(0)+"-"+t.charAt(1).toLowerCase()}))},Xy=function(t){return t&&String(t).endsWith("px")?t:String(t)+"px"},Gy=function(t,e){var n=t.prototype;n.events?e.forEach((function(t){n.events.indexOf(t)<0&&n.events.push(t)})):n.events=e},Yy=function(t){var e=[];if(t)for(var n=Ky(t).split("-"),i=0;i<n.length;i++)e.push("k-pos-"+n[i]);return e.join(" ")},Jy=function(t){function e(e,n){t.call(this),this.element=e,this._initOptions(n),this.items=[],V(this.element,"k-widget k-attribution")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype.filter=function(t,e){this._extent=t,this._zoom=e,this._render()},e.prototype.add=function(t){var e=t;Ht(t)&&("string"==typeof t&&(e={text:t}),this.items.push(e),this._render())},e.prototype.remove=function(t){for(var e=[],n=0;n<this.items.length;n++){var i=this.items[n];i.text!==t&&e.push(i)}this.items=e,this._render()},e.prototype.clear=function(){this.items=[],Wy(this.element)},e.prototype._render=function(){for(var t=[],e=0;e<this.items.length;e++){var n=this.items[e],i=this._itemText(n);""!==i&&t.push(i)}t.length>0?(Wy(this.element),function(t,e){var n=document.createElement("div");for(n.innerHTML=t;n.childNodes.length>0;)e.appendChild(n.childNodes[0])}(t.join(this.options.separator),this.element),this.showElement()):this.hideElement()},e.prototype.hideElement=function(){this.element.style.display="none"},e.prototype.showElement=function(){this.element.style.display=""},e.prototype._itemText=function(t){var e="",n=this._inZoomLevel(t.minZoom,t.maxZoom),i=this._inArea(t.extent);return n&&i&&(e+=t.text),e},e.prototype._inZoomLevel=function(t,e){var n=ee(t,-Number.MAX_VALUE),i=ee(e,Number.MAX_VALUE);return this._zoom>n&&this._zoom<i},e.prototype._inArea=function(t){var e=!0;return t&&(e=t.contains(this._extent)),e},e}(Je);re(Jy,{name:"Attribution",separator:"&nbsp;|&nbsp;"});var Zy={up:{className:"k-navigator-n",iconClass:"k-i-caret-alt-up"},down:{className:"k-navigator-s",iconClass:"k-i-caret-alt-down"},right:{className:"k-navigator-e",iconClass:"k-i-caret-alt-right"},left:{className:"k-navigator-w",iconClass:"k-i-caret-alt-left"}};function Qy(t,e){var n='<button class="k-button k-button-square k-rounded-full k-button-flat k-button-flat-base k-icon-button '+Zy[t].className+'" aria-label="move '+t+'">'+ue({icon:"caret-alt-"+t,iconClass:"k-button-icon",svgIcons:e.svgIcons,type:e.type})+"</button>";return Vy(n)}var tv=function(t){function e(e,n){t.call(this),this.element=e,this._initOptions(n);var i=Qy("up",n.icons),r=Qy("right",n.icons),o=Qy("down",n.icons),s=Qy("left",n.icons);this.element.appendChild(i),this.element.appendChild(r),this.element.appendChild(o),this.element.appendChild(s),V(this.element,"k-widget k-navigator"),$e(this.element,"click",".k-button",Uy(this._click,this));var a=this.element.parentNode.closest("[data-role]");this._keyroot=a||this.element,this._tabindex(this._keyroot),this._keydownHandler=Uy(this._keydown,this),$e(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.dispose()},e.prototype.dispose=function(){He(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,n=this.element,i="tabindex",r=e.getAttribute(i)||n.getAttribute(i);n.removeAttribute(i),e.setAttribute(i,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype._pan=function(t,e){var n=this.options.panStep;this.trigger("pan",{x:t*n,y:e*n})},e.prototype._click=function(t){var e=0,n=0,i=t.currentTarget;i.matches(".k-navigator-n")?n=1:i.matches(".k-navigator-s")?n=-1:i.matches(".k-navigator-e")?e=1:i.matches(".k-navigator-w")&&(e=-1),this._pan(e,n),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Ie.UP:this._pan(0,1),t.preventDefault();break;case Ie.DOWN:this._pan(0,-1),t.preventDefault();break;case Ie.RIGHT:this._pan(1,0),t.preventDefault();break;case Ie.LEFT:this._pan(-1,0),t.preventDefault()}},e}(Je);function ev(t,e,n){var i='<button class="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-icon-button k-zoom-'+t+'" title="zoom-'+t+'" aria-label="zoom-'+t+'">'+ue({icon:e,iconClass:"k-button-icon",svgIcons:n.svgIcons,type:n.type})+"</button>";return Vy(i)}re(tv,{name:"Navigator",panStep:1}),Gy(tv,["pan"]);var nv="change",iv=function(t){function e(e,n,i){t.call(this),this.element=e,this._initOptions(n);var r=ev("in","plus",i),o=ev("out","minus",i);this.element.appendChild(r),this.element.appendChild(o),this.element.setAttribute("role","group"),V(this.element,"k-widget k-zoom-control k-button-group k-group-horizontal"),this._clickHandler=this._click.bind(this),$e(this.element,"click",".k-button",this._clickHandler);var s=this.element.parentNode.closest("[data-role]");this._keyroot=s||this.element,this._tabindex(this._keyroot),this._keydownHandler=this._keydown.bind(this),$e(this._keyroot,"keydown",this._keydownHandler)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&He(this.element,"click",this._clickHandler),this._keyroot&&He(this._keyroot,"keydown",this._keydownHandler)},e.prototype._tabindex=function(t){var e=t||this.wrapper||this.element,n=this.element,i="tabindex",r=e.getAttribute(i)||n.getAttribute(i);n.removeAttribute(i),e.setAttribute(i,isNaN(r)?0:r)},e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype._change=function(t){var e=this.options.zoomStep;this.trigger(nv,{delta:t*e})},e.prototype._click=function(t){var e=1;_t(t.currentTarget,"k-zoom-out")&&(e=-1),this._change(e),t.preventDefault()},e.prototype._keydown=function(t){switch(t.which){case Ie.NUMPAD_PLUS:case 187:case 61:this._change(1);break;case Ie.NUMPAD_MINUS:case 189:case 173:this._change(-1)}},e}(Je);re(iv,{name:"ZoomControl",zoomStep:1}),Gy(iv,[nv]);var rv=Math,ov=rv.max,sv=rv.min,av=function(t){function e(e,n){t.call(this);var i=ky.create(e),r=ky.create(n);i.lng+180>r.lng+180&&i.lat+90<r.lat+90?(this.se=i,this.nw=r):(this.se=r,this.nw=i)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={World:{configurable:!0}};return e.prototype.contains=function(t){var e=this.nw,n=this.se,i=ee(t.lng,t[1]),r=ee(t.lat,t[0]);return t&&i+180>=e.lng+180&&i+180<=n.lng+180&&r+90>=n.lat+90&&r+90<=e.lat+90},e.prototype.center=function(){var t=this.nw,e=this.se,n=t.lng+(e.lng-t.lng)/2,i=t.lat+(e.lat-t.lat)/2;return new ky(i,n)},e.prototype.containsAny=function(t){for(var e=!1,n=0;n<t.length;n++)e=e||this.contains(t[n]);return e},e.prototype.include=function(t){var e=this.nw,n=this.se,i=ee(t.lng,t[1]),r=ee(t.lat,t[0]);e.lng=sv(e.lng,i),e.lat=ov(e.lat,r),n.lng=ov(n.lng,i),n.lat=sv(n.lat,r)},e.prototype.includeAll=function(t){for(var e=0;e<t.length;e++)this.include(t[e])},e.prototype.edges=function(){var t=this.nw,e=this.se;return{nw:this.nw,ne:new ky(t.lat,e.lng),se:this.se,sw:new ky(e.lat,t.lng)}},e.prototype.toArray=function(){var t=this.nw,e=this.se;return[t,new ky(t.lat,e.lng),e,new ky(e.lat,t.lng)]},e.prototype.overlaps=function(t){return this.containsAny(t.toArray())||t.containsAny(this.toArray())},e.create=function(t,n){return t instanceof e?t:t&&n?new e(t,n):t&&4===t.length&&!n?new e([t[0],t[1]],[t[2],t[3]]):void 0},n.World.get=function(){return new e([90,-180],[-90,180])},Object.defineProperties(e,n),e}(Nt.A),lv="centerChange",cv=function(t){function e(e,n){t.call(this),this.widgetService=e,this.options=st({},this.options,n),this.offset={x:0,y:0}}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchor:{configurable:!0}};return e.prototype.show=function(t,e){this.location!==e.location&&(this.anchor=t,this.location=e.location,this.widgetService.notify("showTooltip",Object.assign({anchor:this.anchor},e)),this.visible=!0)},e.prototype.hide=function(){this.widgetService&&this.widgetService.notify("hideTooltip"),this.visible=!1,this.location=null},n.anchor.get=function(){return this._anchor},n.anchor.set=function(t){var e=this.widgetService.widget._toDocumentCoordinates({x:t.left-this.offset.x,y:t.top-this.offset.y});this._anchor={left:e.left,top:e.top}},e.prototype.destroy=function(){this.widgetService=null},Object.defineProperties(e.prototype,n),e}(Nt.A);re(cv,{border:{width:1},opacity:1});var hv=function(t){function e(e,n){t.call(this),this.support=Ue(),this._initOptions(n),this.map=e;var i=document.createElement("div");V(i,"k-layer"),i.style.zIndex=this.options.zIndex,i.style.opacity=this.options.opacity,this.element=i,e.scrollElement.appendChild(this.element),this._beforeReset=this._beforeReset.bind(this),this._reset=this._reset.bind(this),this._resize=this._resize.bind(this),this._panEnd=this._panEnd.bind(this),this._activate(),this._updateAttribution()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this._deactivate()},e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype.show=function(){this.reset(),this._activate(),this._applyExtent(!0)},e.prototype.hide=function(){this._deactivate(),this._setVisibility(!1)},e.prototype.reset=function(){this._beforeReset(),this._reset()},e.prototype._reset=function(){this._applyExtent()},e.prototype._beforeReset=function(){},e.prototype._resize=function(){},e.prototype._panEnd=function(){this._applyExtent()},e.prototype._applyExtent=function(){var t=this.options,e=this.map.zoom(),n=!Ht(t.minZoom)||e>=t.minZoom,i=!Ht(t.maxZoom)||e<=t.maxZoom,r=av.create(t.extent),o=!r||r.overlaps(this.map.extent());this._setVisibility(n&&i&&o)},e.prototype._setVisibility=function(t){this.element.style.display=t?"":"none"},e.prototype._activate=function(){var t=this.map;this._deactivate(),t.bind("beforeReset",this._beforeReset),t.bind("reset",this._reset),t.bind("resize",this._resize),t.bind("panEnd",this._panEnd)},e.prototype._deactivate=function(){var t=this.map;t.unbind("beforeReset",this._beforeReset),t.unbind("reset",this._reset),t.unbind("resize",this._resize),t.unbind("panEnd",this._panEnd)},e.prototype._updateAttribution=function(){var t=this.map.attribution;t&&t.add(this.options.attribution)},e.prototype._readData=function(){return this.options.data||[]},e.prototype._hasData=function(){return this._data&&this._data.length>0},e.prototype._layerIndex=function(){return(this.map.layers||[]).indexOf(this)},e}(Nt.A),uv=Math,dv=Pn.A;function pv(t){return nt(t)?t:gt.compile(t)}function fv(t){return new dv(Qt(t.x),Qt(t.y))}function gv(t){var e=t;return"string"!=typeof t&&(e+="px"),e}var mv=function(t){function e(e,n){t.call(this,e,n),"string"==typeof this.options.subdomains&&(this.options.subdomains=this.options.subdomains.split(""));var i=this._viewType();this._view=new i(this.element,this.options)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this._view.destroy(),this._view=null},e.prototype._beforeReset=function(){var t=this.map,e=t.locationToLayer(t.extent().nw).round();this._view.viewOrigin(e)},e.prototype._reset=function(){t.prototype._reset.call(this),this._updateView(),this._view.reset()},e.prototype._viewType=function(){return yv},e.prototype._activate=function(){t.prototype._activate.call(this),this.support.mobileOS||(this._pan||(this._pan=(0,yh.A)(this._render.bind(this),100)),this.map.bind("pan",this._pan))},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this._pan&&this.map.unbind("pan",this._pan)},e.prototype._updateView=function(){var t=this._view,e=this.map,n=e.extent(),i={nw:e.locationToLayer(n.nw).round(),se:e.locationToLayer(n.se).round()};t.center(e.locationToLayer(e.center())),t.extent(i),t.zoom(e.zoom())},e.prototype._resize=function(){this._render()},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._render()},e.prototype._render=function(){this._updateView(),this._view.render()},e}(hv);re(mv,{tileSize:256,subdomains:["a","b","c"],urlTemplate:"",zIndex:1});var yv=function(t){function e(e,n){t.call(this),this.element=e,this._initOptions(n),this.pool=new bv}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype.center=function(t){this._center=t},e.prototype.extent=function(t){this._extent=t},e.prototype.viewOrigin=function(t){this._viewOrigin=t},e.prototype.zoom=function(t){this._zoom=t},e.prototype.pointToTileIndex=function(t){return new dv(uv.floor(t.x/this.options.tileSize),uv.floor(t.y/this.options.tileSize))},e.prototype.tileCount=function(){var t=this.size(),e=this.pointToTileIndex(this._extent.nw),n=this._extent.nw,i=this.indexToPoint(e).translate(-n.x,-n.y);return{x:uv.ceil((uv.abs(i.x)+t.width)/this.options.tileSize),y:uv.ceil((uv.abs(i.y)+t.height)/this.options.tileSize)}},e.prototype.size=function(){var t=this._extent.nw,e=this._extent.se.clone().translate(-t.x,-t.y);return{width:e.x,height:e.y}},e.prototype.indexToPoint=function(t){var e=t.x,n=t.y;return new dv(e*this.options.tileSize,n*this.options.tileSize)},e.prototype.subdomainText=function(){var t=this.options.subdomains;return t[this.subdomainIndex++%t.length]},e.prototype.destroy=function(){Wy(this.element),this.pool.empty()},e.prototype.reset=function(){this.pool.reset(),this.subdomainIndex=0,this.render()},e.prototype.render=function(){var t,e,n,i=this.tileCount(),r=this.pointToTileIndex(this._extent.nw);for(e=0;e<i.x;e++)for(n=0;n<i.y;n++)(t=this.createTile({x:r.x+e,y:r.y+n})).visible||t.show()},e.prototype.createTile=function(t){var e=this.tileOptions(t),n=this.pool.get(this._center,e);return n.element.parentNode||this.element.append(n.element),n},e.prototype.tileOptions=function(t){var e=this.wrapIndex(t),n=this.indexToPoint(t),i=this._viewOrigin,r=n.clone().translate(-i.x,-i.y);return{index:e,currentIndex:t,point:n,offset:fv(r),zoom:this._zoom,size:this.options.tileSize,subdomain:this.subdomainText(),urlTemplate:this.options.urlTemplate,errorUrlTemplate:this.options.errorUrlTemplate}},e.prototype.wrapIndex=function(t){var e=uv.pow(2,this._zoom);return{x:this.wrapValue(t.x,e),y:Yt(t.y,0,e-1)}},e.prototype.wrapValue=function(t,e){var n=uv.abs(t)%e;return t>=0?n:e-(0===n?e:n)},e}(Nt.A),vv=function(t){function e(e,n){t.call(this),this.id=e,this.visible=!0,this._initOptions(n),this.createElement(),this.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){var t=this.element,e=t?t.parentNode:null;t&&(e&&e.removeChild(t),this.element=null)},e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype.createElement=function(){var t=document.createElement("img"),e=this.options.size+"px";t.setAttribute("alt",""),t.style.position="absolute",t.style.display="block",t.style.width=t.style.maxWidth=e,t.style.height=t.style.maxHeight=e,this.element=t},e.prototype.show=function(){var t=this.element;t.style.top=gv(this.options.offset.y),t.style.left=gv(this.options.offset.x);var e=this.url();e&&t.setAttribute("src",e),t.style.visibility="visible",this.visible=!0},e.prototype.hide=function(){this.element.style.visibility="hidden",this.visible=!1},e.prototype.url=function(){return pv(this.options.urlTemplate)(this.urlOptions())},e.prototype.errorUrl=function(){return pv(this.options.errorUrlTemplate)(this.urlOptions())},e.prototype.urlOptions=function(){var t=this.options;return{zoom:t.zoom,subdomain:t.subdomain,z:t.zoom,x:t.index.x,y:t.index.y,s:t.subdomain,quadkey:t.quadkey,q:t.quadkey,culture:t.culture,c:t.culture}},e}(Nt.A);re(vv,{urlTemplate:"",errorUrlTemplate:""});var bv=function(t){function e(){t.call(this),this._items=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._items.length>=this.options.maxSize&&this._remove(t),this._create(e)},e.prototype.empty=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].destroy();this._items=[]},e.prototype.reset=function(){for(var t=this._items,e=0;e<t.length;e++)t[e].hide()},e.prototype._create=function(t){for(var e,n=this._items,i=Xt(t.point.toString()+t.offset.toString()+t.zoom+t.urlTemplate),r=0;r<n.length;r++)if(n[r].id===i){e=n[r];break}return e?e.show():(e=new vv(i,t),this._items.push(e)),e},e.prototype._remove=function(t){for(var e=this._items,n=-1,i=-1,r=0;r<e.length;r++){var o=e[r].options.point.distanceTo(t);o>n&&!e[r].visible&&(i=r,n=o)}-1!==i&&(e[i].destroy(),e.splice(i,1))},e}(Nt.A);re(bv,{maxSize:100});var wv=Object.assign,xv="change",_v=function(t){function e(e,n){t.call(this);var i=this,r=e[0]||e;i.capture=!1,r.addEventListener?(Re.down.split(" ").forEach((function(t){r.addEventListener(t,Uy(i._press,i),!0)})),Re.up.split(" ").forEach((function(t){r.addEventListener(t,Uy(i._release,i),!0)}))):(Re.down.split(" ").forEach((function(t){r.attachEvent(t,Uy(i._press,i))})),Re.up.split(" ").forEach((function(t){r.attachEvent(t,Uy(i._release,i))}))),i.bind(["press","release"],n||{})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.captureNext=function(){this.capture=!0},e.prototype.cancelCapture=function(){this.capture=!1},e.prototype._press=function(t){this.trigger("press"),this.capture&&t.preventDefault()},e.prototype._release=function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())},e}(Je),Sv=function(t){function e(e){t.call(this);var n=this;n.forcedEnabled=!1,wv(n,e),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.makeVirtual=function(){wv(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},e.prototype.virtualSize=function(t,e){this._virtualMin===t&&this._virtualMax===e||(this._virtualMin=t,this._virtualMax=e,this.update())},e.prototype.outOfBounds=function(t){return t>this.max||t<this.min},e.prototype.forceEnabled=function(){this.forcedEnabled=!0},e.prototype.getSize=function(){return this.container[this.measure]},e.prototype.getTotal=function(){return this.element[this.scrollSize]},e.prototype.rescale=function(t){this.scale=t},e.prototype.update=function(t){var e=this,n=e.virtual?e._virtualMax:e.getTotal(),i=n*e.scale,r=e.getSize();(0!==n||e.forcedEnabled)&&(e.max=e.virtual?-e._virtualMin:0,e.size=r,e.total=i,e.min=Math.min(e.max,r-i),e.minScale=r/n,e.centerOffset=(i-r)/2,e.enabled=e.forcedEnabled||i>r,t||e.trigger(xv,e))},e}(Je),Cv=function(t){function e(e){t.call(this);var n=this;n.x=new Sv(wv({horizontal:!0},e)),n.y=new Sv(wv({horizontal:!1},e)),n.container=e.container,n.forcedMinScale=e.minScale,n.maxScale=e.maxScale||100,n.bind(xv,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rescale=function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},e.prototype.centerCoordinates=function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},e.prototype.refresh=function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(xv)},e}(Je),kv=function(t){function e(e){t.call(this),wv(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.outOfBounds=function(){return this.dimension.outOfBounds(this.movable[this.axis])},e.prototype.dragMove=function(t){var e=this,n=e.dimension,i=e.axis,r=e.movable,o=r[i]+t;if(n.enabled){var s=t;(o<n.min&&t<0||o>n.max&&t>0)&&(s*=e.resistance),r.translateAxis(i,s),e.trigger(xv,e)}},e}(Je),Av=function(t){function e(e){t.call(this);var n,i,r,o,s=this;wv(s,{elastic:!0},e),r=s.elastic?.5:0,o=s.movable,s.x=n=new kv({axis:"x",dimension:s.dimensions.x,resistance:r,movable:o}),s.y=i=new kv({axis:"y",dimension:s.dimensions.y,resistance:r,movable:o}),s.userEvents.bind(["press","move","end","gesturestart","gesturechange"],{gesturestart:function(t){s.gesture=t,s.offset=Vt(s.dimensions.container)},press:function(t){var e=t.event.target.closest("a");e&&e.matches("[data-navigate-on-press=true]")&&t.sender.cancel()},gesturechange:function(t){var e,r=s.gesture,a=r.center,l=t.center,c=t.distance/r.distance,h=s.dimensions.minScale,u=s.dimensions.maxScale;o.scale<=h&&c<1&&(c+=.8*(1-c)),o.scale*c>=u&&(c=u/o.scale);var d=o.x+s.offset.left,p=o.y+s.offset.top;e={x:(d-a.x)*c+l.x-d,y:(p-a.y)*c+l.y-p},o.scaleWith(c),n.dragMove(e.x),i.dragMove(e.y),s.dimensions.rescale(o.scale),s.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(n.dimension.enabled||i.dimension.enabled?(n.dragMove(t.x.delta),i.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Nt.A),Ev=function(t,e,n){return"translate3d("+t+"px,"+e+"px,0) scale("+n+")"},Tv=function(t){function e(e){t.call(this);var n=this;n.element=e,n.element.style.transformOrigin="left top",n.x=0,n.y=0,n.scale=1;var i=Ev(n.x,n.y,n.scale);n.element.style.transform=i,n._saveCoordinates(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.translateAxis=function(t,e){this[t]+=e,this.refresh()},e.prototype.scaleTo=function(t){this.scale=t,this.refresh()},e.prototype.scaleWith=function(t){this.scale*=t,this.refresh()},e.prototype.translate=function(t){this.x+=t.x,this.y+=t.y,this.refresh()},e.prototype.moveAxis=function(t,e){this[t]=e,this.refresh()},e.prototype.moveTo=function(t){wv(this,t),this.refresh()},e.prototype.refresh=function(){var t,e=this,n=e.x,i=e.y;e.round&&(n=Math.round(n),i=Math.round(i)),(t=Ev(n,i,e.scale))!==e.coordinates&&(e.element.style.transform=t,e._saveCoordinates(t),e.trigger(xv))},e.prototype._saveCoordinates=function(t){this.coordinates=t},e}(Je),Mv=Hn.A,Ov=function(t){function e(e,n){t.call(this,e,n),this._pan=Uy(this._pan,this),this.surface=mh.A.create(this.element,{width:e.scrollElement.clientWidth,height:e.scrollElement.clientHeight}),this._initRoot(),this.movable=new Tv(this.surface.element),this._markers=[],this._click=this._handler("shapeClick"),this.surface.bind("click",this._click),this._mouseleave=this._handler("shapeMouseLeave"),this.surface.bind("mouseleave",this._mouseleave),this.surface.bind("mouseenter",this._mouseenter.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.surface.destroy()},e.prototype._reset=function(){t.prototype._reset.call(this),this._translateSurface(),this._data=this._readData(),this._hasData()&&this._load(this._data)},e.prototype._initRoot=function(){this._root=new Mv,this.surface.draw(this._root)},e.prototype._beforeReset=function(){this.surface.clear(),this._initRoot()},e.prototype._resize=function(){this.surface.size(this.map.size())},e.prototype._readData=function(){var e=t.prototype._readData.call(this);return"FeatureCollection"===e.type?e.features:"GeometryCollection"===e.type?e.geometries:e},e.prototype._load=function(t){this._data=t,this._clearMarkers(),this._loader||(this._loader=new Iv(this.map,this.options.style,this));for(var e=new Mv,n=0;n<t.length;n++){var i=this._loader.parse(t[n]);i&&e.append(i)}this._root.clear(),this._root.append(e)},e.prototype.shapeCreated=function(t){var e=!1;if(t instanceof jn.A&&this.map.options.renderPointsAsMarkers&&(e=Ht(this._createMarker(t))),!e){var n={layer:this,shape:t};e=this.map.trigger("shapeCreated",n)}return e},e.prototype.featureCreated=function(t){t.layer=this,this.map.trigger("shapeFeatureCreated",t)},e.prototype._createMarker=function(t){var e=this.map.markers.bind({location:t.location},t.dataItem);return e&&this._markers.push(e),e},e.prototype._clearMarkers=function(){for(var t=0;t<this._markers.length;t++)this.map.markers.remove(this._markers[t]);this._markers=[]},e.prototype._pan=function(){this._panning||(this._panning=!0,this.surface.suspendTracking())},e.prototype._panEnd=function(e){t.prototype._panEnd.call(this,e),this._translateSurface(),this.surface.resumeTracking(),this._panning=!1},e.prototype._translateSurface=function(){var t=this.map,e=t.locationToView(t.extent().nw);this.surface.translate&&(this.surface.translate(e),this.movable.moveTo({x:e.x,y:e.y}))},e.prototype._eventArgs=function(t){return{layer:this,layerIndex:this._layerIndex(),shape:t.element,shapeIndex:(this._data||[]).indexOf(t.element.dataItem),originalEvent:t.originalEvent}},e.prototype._handler=function(t){var e=this;return function(n){n.element&&e.map.trigger(t,e._eventArgs(n))}},e.prototype._mouseenter=function(t){if(t.element){this.map.trigger("shapeMouseEnter",this._eventArgs(t));var e=t.element,n=this._tooltipAnchor(t);this.map._tooltip.show(n,this._tooltipContext(e))}},e.prototype._tooltipContext=function(t){return{type:"shape",layerIndex:this._layerIndex(),className:"k-map-shape-tooltip",dataItem:t.dataItem,location:t.location}},e.prototype._tooltipAnchor=function(t){var e=this.map.eventOffset(t.originalEvent);return{top:e.y,left:e.x}},e.prototype._activate=function(){t.prototype._activate.call(this),this._panHandler=Uy(this._pan,this),this.map.bind("pan",this.panHandler)},e.prototype._deactivate=function(){t.prototype._deactivate.call(this),this.map.unbind("pan",this._panHandler)},e}(hv);re(Ov,{autoBind:!0,zIndex:100});var Iv=function(t){function e(e,n,i){t.call(this),this.observer=i,this.locator=e,this.style=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=new Mv,n=!0;return"Feature"===t.type?(n=!1,this._loadGeometryTo(e,t.geometry,t),this._featureCreated(e,t)):this._loadGeometryTo(e,t,t),n&&e.children.length<2&&(e=e.children[0]),e},e.prototype._shapeCreated=function(t){var e=!1;return this.observer&&this.observer.shapeCreated&&(e=this.observer.shapeCreated(t)),e},e.prototype._featureCreated=function(t,e){this.observer&&this.observer.featureCreated&&this.observer.featureCreated({group:t,dataItem:e,properties:e.properties})},e.prototype._loadGeometryTo=function(t,e,n){var i,r,o=this,s=e.coordinates;switch(e.type){case"LineString":r=this._loadPolygon(t,[s],n),this._setLineFill(r);break;case"MultiLineString":for(i=0;i<s.length;i++)r=o._loadPolygon(t,[s[i]],n),o._setLineFill(r);break;case"Polygon":this._loadPolygon(t,s,n);break;case"MultiPolygon":for(i=0;i<s.length;i++)o._loadPolygon(t,s[i],n);break;case"Point":this._loadPoint(t,s,n);break;case"MultiPoint":for(i=0;i<s.length;i++)o._loadPoint(t,s[i],n)}},e.prototype._setLineFill=function(t){var e=t.segments;(e.length<4||!e[0].anchor().equals(Gt(e).anchor()))&&(t.options.fill=null)},e.prototype._loadShape=function(t,e){return this._shapeCreated(e)||t.append(e),e},e.prototype._loadPolygon=function(t,e,n){var i=this._buildPolygon(e);return i.dataItem=n,i.location=this.locator.viewToLocation(i.bbox().center()),this._loadShape(t,i)},e.prototype._buildPolygon=function(t){for(var e=new(t.length>1?Ln.P:Ln.w)(this.style),n=0;n<t.length;n++)for(var i=0;i<t[n].length;i++){var r=this.locator.locationToView(ky.fromLngLat(t[n][i]));0===i?e.moveTo(r.x,r.y):e.lineTo(r.x,r.y)}return e},e.prototype._loadPoint=function(t,e,n){var i=ky.fromLngLat(e),r=this.locator.locationToView(i),o=new zn.A(r,10),s=new jn.A(o,this.style);return s.dataItem=n,s.location=i,this._loadShape(t,s)},e}(Nt.A),Dv=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){var e=this;if(this._data=t,this.surface.clear(),0!==t.length){var n=this.options,i=wt(n.valueField),r=t.slice(0);r.sort((function(t,e){return i(e)-i(t)}));for(var o,s=this._scaleType(),a=wt(this.options.locationField),l=0;l<r.length;l++){var c=r[l],h=a(c),u=i(c);if(Ht(h)&&Ht(u)){o||(o=new s([0,u],[n.minSize,n.maxSize])),h=ky.create(h);var d=e.map.locationToView(h),p=o.map(u),f=e._createSymbol({center:d,size:p,style:n.style,dataItem:c,location:h});f.dataItem=c,f.location=h,f.value=u,e._drawSymbol(f)}}}},e.prototype._scaleType=function(){var t=this.options.scale;return nt(t)?t:Pv[t]},e.prototype._createSymbol=function(t){var e=this.options.symbol;return nt(e)||(e=Rv[e]),e(t)},e.prototype._drawSymbol=function(t){var e={layer:this,shape:t};this.map.trigger("shapeCreated",e)||this.surface.draw(t)},e.prototype._tooltipContext=function(t){return{type:"bubble",layerIndex:this._layerIndex(),className:"k-map-bubble-tooltip",dataItem:t.dataItem,location:t.location,value:t.value}},e.prototype._tooltipAnchor=function(t){var e=t.element.bbox().center();return{top:e.y,left:e.x}},e}(Ov);re(Dv,{locationField:"location",valueField:"value",minSize:0,maxSize:100,scale:"sqrt",symbol:"circle",zIndex:200});var Fv=function(t){function e(e,n){t.call(this),this._domain=e,this._range=n;var i=Math.sqrt(e[1])-Math.sqrt(e[0]),r=n[1]-n[0];this._ratio=r/i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t){var e=(Math.sqrt(t)-Math.sqrt(this._domain[0]))*this._ratio;return this._range[0]+e},e}(Nt.A),Pv={sqrt:Fv},Rv={circle:function(t){var e=new zn.A(t.center,t.size/2);return new jn.A(e,t.style)},square:function(t){var e=new Ln.w(t.style),n=t.size/2,i=t.center;return e.moveTo(i.x-n,i.y-n).lineTo(i.x+n,i.y-n).lineTo(i.x+n,i.y+n).lineTo(i.x-n,i.y+n).close(),e}},Lv="click",Nv="mouseenter",Bv="mouseleave",jv=Object.assign,zv="k-marker",$v="."+zv,Hv=function(t){function e(e,n){t.call(this,e,n),this._markerClickHandler=Uy(this._markerClick,this),$e(this.element,Lv,$v,this._markerClickHandler),this.items=[],this._load(this._readData())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),He(this.element,Lv,this._markerClickHandler),this.clear()},e.prototype.add=function(t){if(!U(t))return this._addOne(t);for(var e=0;e<t.length;e++)this._addOne(t[e])},e.prototype.remove=function(t){t.destroy();var e=(this.items||[]).indexOf(t);e>-1&&this.items.splice(e,1)},e.prototype.clear=function(){for(var t=0;t<this.items.length;t++)this.items[t].destroy();this.items=[]},e.prototype.update=function(t){var e=t.location();if(e){t.showAt(this.map.locationToView(e));var n={marker:t,layer:this};this.map.trigger("markerActivate",n)}},e.prototype._reset=function(){t.prototype._reset.call(this);for(var e=this.items,n=0;n<e.length;n++)this.update(e[n])},e.prototype.bind=function(t,e){var n=Uv.create(t,this.options);n.dataItem=e;var i={marker:n,layer:this};if(!this.map.trigger("markerCreated",i))return this.add(n),n},e.prototype._addOne=function(t){var e=Uv.create(t,this.options);return e.addTo(this),e},e.prototype._readData=function(){return this.options.data||[]},e.prototype._load=function(t){this._data=t,this.clear();for(var e=wt(this.options.locationField),n=wt(this.options.titleField),i=0;i<t.length;i++){var r=t[i];this.bind({location:e(r),title:n(r)},r)}},e.prototype._markerClick=function(t){var e=t.currentTarget._kendoNode,n={layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e),originalEvent:t};this.map.trigger("markerClick",n)},e.prototype._markerMouseEnter=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseEnter",e)},e.prototype._markerMouseLeave=function(t){var e=this._createMarkerEventArgs(t);this.map.trigger("markerMouseLeave",e)},e.prototype._createMarkerEventArgs=function(t){var e=t.marker;return jv({},{layer:this,layerIndex:this._layerIndex(),marker:e,markerIndex:(this.items||[]).indexOf(e)},t)},e}(hv);re(Hv,{zIndex:1e3,autoBind:!0,locationField:"location",titleField:"title",template:""});var Uv=function(t){function e(e){t.call(this),this.options=e||{}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.layer=null,this.unbindEvents(),this.hide()},e.prototype.addTo=function(t){this.layer=t.markers||t,this.layer.items.push(this),this.layer.update(this)},e.prototype.location=function(t){return t?(this.options.location=ky.create(t).toArray(),this.layer&&this.layer.update(this),this):ky.create(this.options.location)},e.prototype.showAt=function(t){this.render(),this._anchor={left:Math.round(t.x),top:Math.round(t.y)},this.element.style.left=Xy(this._anchor.left),this.element.style.top=Xy(this._anchor.top)},e.prototype.hide=function(){this.element&&(this.element.remove(),this.element=null)},e.prototype.bindEvents=function(){this.element&&(this._mouseEnterHandler=Uy(this._mouseEnter,this),$e(this.element,Nv,$v,this._mouseEnterHandler),this._mouseLeaveHandler=Uy(this._mouseLeave,this),$e(this.element,Bv,$v,this._mouseLeaveHandler))},e.prototype.unbindEvents=function(){this.element&&(He(this.element,Nv,this._mouseEnterHandler),He(this.element,Bv,this._mouseLeaveHandler))},e.prototype.render=function(){if(!this.element){var t=this.options,e=this.layer,n=document.createElement("span");if(V(n,zv),this.options.template){var i=this._compileTemplate(this.options.template)(this.dataItem),r=Vy(i);n.appendChild(r)}else if(t.svgIcon)ue(n,{icon:t.svgIcon,iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:"svg"});else{var o={icon:"map-marker",iconClass:"k-icon-xxl",svgIcons:this.options.icons.svgIcons,type:this.options.icons.type};t.shape?"pinTarget"===t.shape?(o.icon="map-marker-target",ue(n,o)):"pin"===t.shape?ue(n,o):V(n,"k-icon k-icon-xxl k-i-marker-"+Ky(t.shape||"pin")):ue(n,o)}t.title&&n.setAttribute("title",t.title);var s=t.attributes||{};Object.keys(s).forEach((function(t){n.setAttribute(t,s[t])})),n._kendoNode=this,n.style.zIndex=t.zIndex,this.element=n,e&&e.element.appendChild(this.element),this.bindEvents()}},e.prototype._mouseEnter=function(t){var e=this._createEventArgs(t);this.layer._markerMouseEnter(e),this.layer.map._tooltip.show({top:this._anchor.top-this.element.offsetHeight,left:this._anchor.left},this._tooltipContext())},e.prototype._tooltipContext=function(){return{type:"marker",layerIndex:this.layer._layerIndex(),className:"k-map-marker-tooltip",dataItem:this.dataItem,title:this.options.title,location:this.location()}},e.prototype._mouseLeave=function(t){var e=this._createEventArgs(t);this.layer._markerMouseLeave(e)},e.prototype._createEventArgs=function(t){return{marker:this,originalEvent:t}},e.prototype._compileTemplate=function(t){return gt.compile(t,{paramName:"dataItem",useWithBlock:!1})},e.create=function(t,n){return t instanceof e?t:new e(st({},n,t))},e}(Nt.A),Vv=Object.assign;function Wv(t){window.requestAnimationFrame(t)}var qv=function(t){function e(){t.call(this);var e=this;e._tickProxy=Uy(e._tick,e),e._started=!1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){},e.prototype.done=function(){},e.prototype.onEnd=function(){},e.prototype.onCancel=function(){},e.prototype.start=function(){this.enabled()&&(this.done()?this.onEnd():(this._started=!0,Wv(this._tickProxy)))},e.prototype.enabled=function(){return!0},e.prototype.cancel=function(){this._started=!1,this.onCancel()},e.prototype._tick=function(){var t=this;t._started&&(t.tick(),t.done()?(t._started=!1,t.onEnd()):Wv(t._tickProxy))},e}(Nt.A),Kv=function(t){function e(e){t.call(this),Vv(this,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.done=function(){return this.timePassed()>=this.duration},e.prototype.timePassed=function(){return Math.min(this.duration,qe()-this.startDate)},e.prototype.moveTo=function(t){var e=this,n=e.movable;e.initial=n[e.axis],e.delta=t.location-e.initial,e.duration="number"==typeof t.duration?t.duration:300,e.tick=e._easeProxy(t.ease),e.startDate=qe(),e.start()},e.prototype._easeProxy=function(t){var e=this;return function(){e.movable.moveAxis(e.axis,t(e.timePassed(),e.initial,e.delta,e.duration))}},e.easeOutExpo=function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},e}(qv),Xv=Object.assign,Gv=Math.abs,Yv="change",Jv="scroll",Zv=function(t){function e(e){t.call(this,e);var n=this;Xv(n,e),n.userEvents.bind("gestureend",n.start.bind(this)),n.tapCapture.bind("press",n.cancel.bind(this))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.enabled=function(){return this.movable.scale<this.dimensions.minScale},e.prototype.done=function(){return this.dimensions.minScale-this.movable.scale<.01},e.prototype.tick=function(){var t=this.movable;t.scaleWith(1.1),this.dimensions.rescale(t.scale)},e.prototype.onEnd=function(){var t=this.movable;t.scaleTo(this.dimensions.minScale),this.dimensions.rescale(t.scale)},e}(qv),Qv=function(t){function e(e){t.call(this);var n=this;Xv(n,e,{transition:new Kv({axis:e.axis,movable:e.movable,onEnd:function(){n._end()}})}),n.tapCapture.bind("press",(function(){n.cancel()})),n.userEvents.bind("end",Uy(n.start,n)),n.userEvents.bind("gestureend",Uy(n.start,n)),n.userEvents.bind("tap",Uy(n.onEnd,n))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.onCancel=function(){this.transition.cancel()},e.prototype.freeze=function(t){this.cancel(),this._moveTo(t)},e.prototype.onEnd=function(){var t=this;t.paneAxis.outOfBounds()?t._snapBack():t._end()},e.prototype.done=function(){return Gv(this.velocity)<1},e.prototype.start=function(e){var n,i=this;i.dimension.enabled&&(i.paneAxis.outOfBounds()?i.transition._started?(i.transition.cancel(),i.velocity=Math.min(e.touch[i.axis].velocity*i.velocityMultiplier,55),t.prototype.start.call(this)):i._snapBack():(n=2===e.touch.id?0:e.touch[i.axis].velocity,i.velocity=Math.max(Math.min(n*i.velocityMultiplier,55),-55),i.tapCapture.captureNext(),t.prototype.start.call(this)))},e.prototype.tick=function(){var t=this,e=t.dimension,n=t.paneAxis.outOfBounds()?.5:t.friction,i=t.velocity*=n,r=t.movable[t.axis]+i;!t.elastic&&e.outOfBounds(r)&&(r=Math.max(Math.min(r,e.max),e.min),t.velocity=0),t.movable.moveAxis(t.axis,r)},e.prototype._end=function(){this.tapCapture.cancelCapture(),this.end()},e.prototype._snapBack=function(){var t=this,e=t.dimension,n=t.movable[t.axis]>e.max?e.max:e.min;t._moveTo(n)},e.prototype._moveTo=function(t){this.transition.moveTo({location:t,duration:500,ease:Kv.easeOutExpo})},e}(qv),tb=function(t){function e(e){t.call(this,e);Xv(this,e,{origin:{},destination:{},offset:{}})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.tick=function(){this._updateCoordinates(),this.moveTo(this.origin)},e.prototype.done=function(){return Gv(this.offset.y)<5&&Gv(this.offset.x)<5},e.prototype.onEnd=function(){this.moveTo(this.destination),this.callback&&this.callback.call()},e.prototype.setCoordinates=function(t,e){this.offset={},this.origin=t,this.destination=e},e.prototype.setCallback=function(t){t&&nt(t)?this.callback=t:t=void 0},e.prototype._updateCoordinates=function(){this.offset={x:(this.destination.x-this.origin.x)/4,y:(this.destination.y-this.origin.y)/4},this.origin={y:this.origin.y+this.offset.y,x:this.origin.x+this.offset.x}},e}(qv),eb=function(t){function e(e){t.call(this);var n=this,i="x"===e.axis,r=Vy('<div class="km-touch-scrollbar km-'+(i?"horizontal":"vertical")+'-scrollbar" />');Xv(n,e,{element:r,elementSize:0,movable:new Tv(r),scrollMovable:e.movable,alwaysVisible:e.alwaysVisible,size:i?"width":"height"}),n.scrollMovable.bind(Yv,n.refresh.bind(n)),n.container.appendChild(r),e.alwaysVisible&&n.show()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.refresh=function(){var t=this,e=t.axis,n=t.dimension,i=n.size,r=t.scrollMovable,o=i/n.total,s=Math.round(-r[e]*o),a=Math.round(i*o);this.element.style.display=o>=1?"none":"",s+a>i?a=i-s:s<0&&(a+=s,s=0),t.elementSize!==a&&(t.element.style[t.size]=a+"px",t.elementSize=a),t.movable.moveAxis(e,s)},e.prototype.show=function(){this.element.style.opacity=.7,this.element.style.visibility="visible"},e.prototype.hide=function(){this.alwaysVisible||(this.element.style.opacity=0)},e}(Nt.A),nb=function(t){function e(e,n){t.call(this);var i=this;this.element=e,this._initOptions(n);var r,o=(navigator.userAgent,(r=Ue().mobileOS).ios||r.android);i._native=i.options.useNative&&o;var s=Vy('<div class="km-scroll-header"/>');if(i._native)return V(e,"km-native-scroller"),qy(s,e),void Xv(i,{scrollElement:e,fixedContainer:e.children[0]});e.style.overflow="hidden",V(e,"km-scroll-wrapper"),function(t,e){for(t.appendChild(e);t.firstChild!==e;)e.appendChild(t.firstChild)}(e,Vy('<div class="km-scroll-container"/>')),qy(s,e);var a=e.children[1],l=new _v(e),c=new Tv(a),h=new Cv({element:a,container:e,forcedEnabled:i.options.zoom}),u=this.options.avoidScrolling,d=new _n(e,{touchAction:"none",allowSelection:!0,preventDragEvent:!0,captureUpIfMoved:!0,multiTouch:i.options.zoom,supportDoubleTap:i.options.supportDoubleTap,start:function(t){h.refresh();var e=Gv(t.x.velocity),n=Gv(t.y.velocity),r=2*e>=n,o=2*n>=e;!i.fixedContainer.contains(t.event.target)&&!u(t)&&i.enabled&&(h.x.enabled&&r||h.y.enabled&&o)?d.capture():d.cancel()}}),p=new Av({movable:c,dimensions:h,userEvents:d,elastic:i.options.elastic}),f=new Zv({movable:c,dimensions:h,userEvents:d,tapCapture:l}),g=new tb({moveTo:function(t){i.scrollTo(t.x,t.y)}});c.bind(Yv,(function(){i.scrollTop=-c.y,i.scrollLeft=-c.x,i.trigger(Jv,{scrollTop:i.scrollTop,scrollLeft:i.scrollLeft})})),i.options.mousewheelScrolling&&(this._wheelScrollHandler=this._wheelScroll.bind(this),$e(e,"wheel",this._wheelScrollHandler)),Xv(i,{movable:c,dimensions:h,zoomSnapBack:f,animatedScroller:g,userEvents:d,pane:p,tapCapture:l,pulled:!1,enabled:!0,scrollElement:a,scrollTop:0,scrollLeft:0,fixedContainer:e.children[0]}),i._initAxis("x"),i._initAxis("y"),i._wheelEnd=function(){i._wheel=!1,i.userEvents.end(0,i._wheelY)},h.refresh(),i.options.pullToRefresh&&i._initPullToRefresh()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype._wheelScroll=function(t){if(!t.ctrlKey){this._wheel||(this._wheel=!0,this._wheelY=0,this.userEvents.press(0,this._wheelY)),clearTimeout(this._wheelTimeout),this._wheelTimeout=setTimeout(this._wheelEnd,50);var e=function(t){var e,n=t.wheelDeltaY;return t.wheelDelta?(void 0===n||n)&&(e=t.wheelDelta):t.detail&&t.axis===t.VERTICAL_AXIS&&(e=10*-t.detail),e}(t);e&&(this._wheelY+=e,this.userEvents.move(0,this._wheelY)),t.preventDefault()}},e.prototype.makeVirtual=function(){this.dimensions.y.makeVirtual()},e.prototype.virtualSize=function(t,e){this.dimensions.y.virtualSize(t,e)},e.prototype.height=function(){return this.dimensions.y.size},e.prototype.scrollHeight=function(){return this.scrollElement.scrollHeight},e.prototype.scrollWidth=function(){return this.scrollElement.scrollWidth},e.prototype._resize=function(){this._native||this.contentResized()},e.prototype.setOptions=function(t){this._initOptions(t),t.pullToRefresh&&this._initPullToRefresh()},e.prototype.reset=function(){this._native?this.scrollElement.scrollTop(0):(this.movable.moveTo({x:0,y:0}),this._scale(1))},e.prototype.contentResized=function(){this.dimensions.refresh(),this.pane.x.outOfBounds()&&this.movable.moveAxis("x",this.dimensions.x.min),this.pane.y.outOfBounds()&&this.movable.moveAxis("y",this.dimensions.y.min)},e.prototype.zoomOut=function(){var t=this.dimensions;t.refresh(),this._scale(t.fitScale),this.movable.moveTo(t.centerCoordinates())},e.prototype.enable=function(){this.enabled=!0},e.prototype.disable=function(){this.enabled=!1},e.prototype.scrollTo=function(t,e){this._native?(this.scrollElement.scrollLeft(Gv(t)),this.scrollElement.scrollTop(Gv(e))):(this.dimensions.refresh(),this.movable.moveTo({x:t,y:e}))},e.prototype.animatedScrollTo=function(t,e,n){var i,r;this._native?this.scrollTo(t,e):(i={x:this.movable.x,y:this.movable.y},r={x:t,y:e},this.animatedScroller.setCoordinates(i,r),this.animatedScroller.setCallback(n),this.animatedScroller.start())},e.prototype.pullHandled=function(){},e.prototype.destroy=function(){He(this.element,"wheel",this._wheelScrollHandler),this.userEvents&&this.userEvents.destroy()},e.prototype._scale=function(t){this.dimensions.rescale(t),this.movable.scaleTo(t)},e.prototype._initPullToRefresh=function(){},e.prototype._dragEnd=function(){},e.prototype._paneChange=function(){},e.prototype._initAxis=function(t){var e=this,n=e.movable,i=e.dimensions[t],r=e.tapCapture,o=e.pane[t],s=new eb({axis:t,movable:n,dimension:i,container:e.element,alwaysVisible:e.options.visibleScrollHints});i.bind(Yv,(function(){s.refresh()})),o.bind(Yv,(function(){s.show()})),e[t+"inertia"]=new Qv({axis:t,paneAxis:o,movable:n,tapCapture:r,userEvents:e.userEvents,dimension:i,elastic:e.options.elastic,friction:e.options.friction||.96,velocityMultiplier:e.options.velocityMultiplier||10,end:function(){s.hide(),e.trigger("scrollEnd",{axis:t,scrollTop:e.scrollTop,scrollLeft:e.scrollLeft})}})},e}(Je);re(nb,{name:"Scroller",zoom:!1,pullOffset:140,visibleScrollHints:!1,elastic:!0,useNative:!1,mousewheelScrolling:!0,avoidScrolling:function(){return!1},pullToRefresh:!1,messages:{pullTemplate:"Pull to refresh",releaseTemplate:"Release to refresh",refreshTemplate:"Refreshing"}}),Gy(nb,["pull",Jv,"resize"]);var ib=function(t,e){void 0===e&&(e={}),this.sender=e.sender||t,this.widget=t,this.rtl=Boolean(e.rtl)};ib.prototype.notify=function(t,e){this.widget&&this.widget.trigger(t,e)};const rb=ib;var ob=Math,sb=ob.min,ab=ob.pow,lb=Pn.A,cb="marker",hb="location",ub="wheel",db={bubble:Dv,shape:Ov,tile:mv};db[cb]=Hv;var pb=function(t){function e(e,n,i,r){void 0===n&&(n={}),void 0===i&&(i={}),void 0===r&&(r={}),t.call(this),this._init(e,n,i,r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.scroller.destroy(),this._tooltip&&this._tooltip.destroy(),this.navigator&&this.navigator.destroy(),this.attribution&&this.attribution.destroy(),this.zoomControl&&this.zoomControl.destroy(),U(this.markers)?this.markers.forEach((function(t){t.destroy()})):this.markers.destroy();for(var e=0;e<this.layers.length;e++)this.layers[e].destroy();He(this.element,ub,this._mousewheelHandler),t.prototype.destroy.call(this)},e.prototype._init=function(t,e,n,i){void 0===e&&(e={}),void 0===n&&(n={}),void 0===i&&(i={}),this.support=Ue(),this.context=i,this.initObserver(i),this.initServices(i),this._notifyObserver("init"),this._initOptions(e),this._setEvents(e),this.crs=new Hy,this._initElement(t),this._viewOrigin=this._getOrigin(),this._tooltip=this._createTooltip(),this._initScroller(),this._initMarkers(),this._initControls(),this._initLayers(),this._reset();var r=(0,yh.A)(this._mousewheel.bind(this),50);this._mousewheelHandler=function(t){t.preventDefault(),r(t)},$e(this.element,ub,this._mousewheelHandler)},e.prototype._initOptions=function(t){this.options=st({},this.options,t)},e.prototype._initElement=function(t){this.element=t,V(t,"k-map"),t.style.position="relative",t.setAttribute("data-role","map"),Wy(t);var e=Vy("<div />");this.element.appendChild(e)},e.prototype.initServices=function(t){void 0===t&&(t={}),this.widgetService=new rb(this,t)},e.prototype.initObserver=function(t){void 0===t&&(t={}),this.observers=[],this.addObserver(t.observer)},e.prototype.addObserver=function(t){t&&this.observers.push(t)},e.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);e>=0&&this.observers.splice(e,1)},e.prototype.requiresHandlers=function(t){for(var e=this.observers,n=0;n<e.length;n++)if(e[n].requiresHandlers(t))return!0},e.prototype.trigger=function(e,n){void 0===n&&(n={}),n.sender=this;for(var i=this.observers,r=!1,o=0;o<i.length;o++)i[o].trigger(e,n)&&(r=!0);return r||t.prototype.trigger.call(this,e,n),r},e.prototype._notifyObserver=function(t,e){void 0===e&&(e={}),e.sender=this;for(var n=this.observers,i=!1,r=0;r<n.length;r++)n[r].trigger(t,e)&&(i=!0);return i},e.prototype.zoom=function(t){var e,n=this.options;if(Ht(t)){var i=ob.round(Yt(t,n.minZoom,n.maxZoom));n.zoom!==i&&(n.zoom=i,this.widgetService.notify("zoomChange",{zoom:n.zoom}),this._reset()),e=this}else e=n.zoom;return e},e.prototype.center=function(t){var e;if(t){var n=ky.create(t),i=ky.create(this.options.center);n.equals(i)||(this.options.center=n.toArray(),this.widgetService.notify(lv,{center:this.options.center}),this._reset()),e=this}else e=ky.create(this.options.center);return e},e.prototype.extent=function(t){var e;return t?(this._setExtent(t),e=this):e=this._getExtent(),e},e.prototype.setOptions=function(t){void 0===t&&(t={});var e=this.element;this.destroy(),Wy(e),this._init(e,t,{},this.context),this._reset()},e.prototype.locationToLayer=function(t,e){var n=!this.options.wraparound,i=ky.create(t);return this.crs.toPoint(i,this._layerSize(e),n)},e.prototype.layerToLocation=function(t,e){var n=!this.options.wraparound,i=lb.create(t);return this.crs.toLocation(i,this._layerSize(e),n)},e.prototype.locationToView=function(t){var e=ky.create(t),n=this.locationToLayer(this._viewOrigin);return this.locationToLayer(e).translateWith(n.scale(-1))},e.prototype.viewToLocation=function(t,e){var n=this.locationToLayer(this._getOrigin(),e),i=lb.create(t).clone().translateWith(n);return this.layerToLocation(i,e)},e.prototype.eventOffset=function(t){var e,n,i=Vt(this.element);if(t.x&&t.x[hb]||t.y&&t.y[hb])e=t.x[hb]-i.left,n=t.y[hb]-i.top;else{var r=t.originalEvent||t;e=ee(r.pageX,r.clientX)-i.left,n=ee(r.pageY,r.clientY)-i.top}return new Pn.A(e,n)},e.prototype.eventToView=function(t){var e=this.eventOffset(t);return this.locationToView(this.viewToLocation(e))},e.prototype.eventToLayer=function(t){return this.locationToLayer(this.eventToLocation(t))},e.prototype.eventToLocation=function(t){var e=this.eventOffset(t);return this.viewToLocation(e)},e.prototype.viewSize=function(){var t=this.element,e=this._layerSize(),n=t.clientWidth;return this.options.wraparound||(n=sb(e,n)),{width:n,height:sb(e,t.clientHeight)}},e.prototype.exportVisual=function(){return this._reset(),!1},e.prototype.hideTooltip=function(){this._tooltip&&this._tooltip.hide()},e.prototype._setOrigin=function(t,e){var n,i=this.viewSize(),r=this._origin=ky.create(t);return(n=this.locationToLayer(r,e)).x+=i.width/2,n.y+=i.height/2,this.options.center=this.layerToLocation(n,e).toArray(),this.widgetService.notify(lv,{center:this.options.center}),this},e.prototype._getOrigin=function(t){var e,n=this.viewSize();return!t&&this._origin||((e=this.locationToLayer(this.center())).x-=n.width/2,e.y-=n.height/2,this._origin=this.layerToLocation(e)),this._origin},e.prototype._setExtent=function(t){var e=av.create(t),n=e.se.clone();this.options.wraparound&&n.lng<0&&t.nw.lng>0&&(n.lng=180+(180+n.lng));var i=new av(e.nw,n);this.center(i.center());var r,o=this.element.clientWidth,s=this.element.clientHeight;for(r=this.options.maxZoom;r>=this.options.minZoom;r--){var a=this.locationToLayer(i.nw,r),l=this.locationToLayer(i.se,r),c=ob.abs(l.x-a.x),h=ob.abs(l.y-a.y);if(c<=o&&h<=s)break}this.zoom(r)},e.prototype._getExtent=function(){var t=this._getOrigin(),e=this.locationToLayer(t),n=this.viewSize();e.x+=n.width,e.y+=n.height;var i=this.layerToLocation(e);return new av(t,i)},e.prototype._zoomAround=function(t,e){this._setOrigin(this.layerToLocation(t,e),e),this.zoom(e)},e.prototype._initControls=function(){var t=this.options.controls;t.attribution&&this._createAttribution(t.attribution),this.support.mobileOS||(t.navigator&&this._createNavigator(t.navigator),t.zoom&&this._createZoomControl(t.zoom))},e.prototype._createControlElement=function(t,e){var n=t.position||e,i="."+Yy(n).replace(" ","."),r=this.element.querySelector(".k-map-controls"+i)||[];if(0===r.length){var o=document.createElement("div");V(o,"k-map-controls "+Yy(n)),r=o,this.element.appendChild(r)}var s=document.createElement("div");return r.appendChild(s),s},e.prototype._createAttribution=function(t){var e=this._createControlElement(t,"bottomRight");this.attribution=new Jy(e,t)},e.prototype._createNavigator=function(t){var e=this._createControlElement(t,"topLeft"),n=this.navigator=new tv(e,st({},t,{icons:this.options.icons}));this._navigatorPan=this._navigatorPan.bind(this),n.bind("pan",this._navigatorPan),this._navigatorCenter=this._navigatorCenter.bind(this),n.bind("center",this._navigatorCenter)},e.prototype._navigatorPan=function(t){var e=this.scroller,n=e.scrollLeft+t.x,i=e.scrollTop-t.y,r=this._virtualSize,o=this.element.clientWidth,s=this.element.clientHeight;n=Yt(n,r.x.min,r.x.max-o),i=Yt(i,r.y.min,r.y.max-s),this.scroller.one("scroll",Uy(this._scrollEnd,this)),this.scroller.scrollTo(-n,-i)},e.prototype._navigatorCenter=function(){this.center(this.options.center)},e.prototype._createZoomControl=function(t){var e=this._createControlElement(t,"topLeft"),n=this.zoomControl=new iv(e,t,this.options.icons);this._zoomControlChange=this._zoomControlChange.bind(this),n.bind("change",this._zoomControlChange)},e.prototype._zoomControlChange=function(t){this.trigger("zoomStart",{originalEvent:t})||(this.zoom(this.zoom()+t.delta),this.trigger("zoomEnd",{originalEvent:t}))},e.prototype._initScroller=function(){var t=this.support.mobileOS?.93:.9,e=!1!==this.options.zoomable,n=this.scroller=new nb(this.element.children[0],{friction:t,velocityMultiplier:5,zoom:e,mousewheelScrolling:!1,supportDoubleTap:!0});n.bind("scroll",Uy(this._scroll,this)),n.bind("scrollEnd",Uy(this._scrollEnd,this)),n.userEvents.bind("gesturestart",Uy(this._scaleStart,this)),n.userEvents.bind("gestureend",Uy(this._scale,this)),n.userEvents.bind("doubleTap",Uy(this._doubleTap,this)),n.userEvents.bind("tap",Uy(this._tap,this)),this.scrollElement=n.scrollElement},e.prototype._initLayers=function(){for(var t=this.options.layers,e=this.layers=[],n=0;n<t.length;n++){var i=t[n],r=this._createLayer(i);e.push(r)}},e.prototype._createLayer=function(t){var e=t.type||"shape",n=this.options.layerDefaults[e],i=e===cb?st({},this.options.markerDefaults,t,{icons:this.options.icons}):st({},n,t),r=new(0,db[e])(this,i);return e===cb&&(this.markers=r),r},e.prototype._createTooltip=function(){return new cv(this.widgetService,this.options.tooltip)},e.prototype._initMarkers=function(){(this.options.layers||[]).filter((function(t){return t&&t.type===cb})).length>0||(this.markers=new Hv(this,st({},this.options.markerDefaults,{icons:this.options.icons})),this.markers.add(this.options.markers))},e.prototype._scroll=function(t){var e=this.locationToLayer(this._viewOrigin).round(),n=t.sender.movable,i=new Pn.A(n.x,n.y).scale(-1).scale(1/n.scale);e.x+=i.x,e.y+=i.y,this._scrollOffset=i,this._tooltip.offset=i,this.hideTooltip(),this._setOrigin(this.layerToLocation(e)),this.trigger("pan",{originalEvent:t,origin:this._getOrigin(),center:this.center()})},e.prototype._scrollEnd=function(t){this._scrollOffset&&this._panComplete()&&(this._scrollOffset=null,this._panEndTimestamp=qe(),this.trigger("panEnd",{originalEvent:t,origin:this._getOrigin(),center:this.center()}))},e.prototype._panComplete=function(){return qe()-(this._panEndTimestamp||0)>50},e.prototype._scaleStart=function(t){if(this.trigger("zoomStart",{originalEvent:t})){var e=t.touches[1];e&&e.cancel()}},e.prototype._scale=function(t){var e=this.scroller.movable.scale,n=this._scaleToZoom(e),i=new Pn.A(t.center.x,t.center.y),r=this.viewToLocation(i,n),o=this.locationToLayer(r,n).translate(-i.x,-i.y);this._zoomAround(o,n),this.trigger("zoomEnd",{originalEvent:t})},e.prototype._scaleToZoom=function(t){var e=this._layerSize()*t/this.options.minSize,n=ob.log(e)/ob.log(2);return ob.round(n)},e.prototype._reset=function(){this.attribution&&this.attribution.filter(this.center(),this.zoom()),this._viewOrigin=this._getOrigin(!0),this._resetScroller(),this.hideTooltip(),this.trigger("beforeReset"),this.trigger("reset")},e.prototype._resetScroller=function(){var t=this.scroller,e=t.dimensions.x,n=t.dimensions.y,i=this._layerSize(),r=this.extent().nw,o=this.locationToLayer(r).round();t.movable.round=!0,t.reset(),t.userEvents.cancel();var s=this.zoom();t.dimensions.forcedMinScale=ab(2,this.options.minZoom-s),t.dimensions.maxScale=ab(2,this.options.maxZoom-s);var a={min:-o.x,max:i-o.x},l={min:-o.y,max:i-o.y};if(this.options.wraparound&&(a.max=20*i,a.min=-a.max),!1===this.options.pannable){var c=this.viewSize();a.min=l.min=0,a.max=c.width,l.max=c.height}e.makeVirtual(),n.makeVirtual(),e.virtualSize(a.min,a.max),n.virtualSize(l.min,l.max),this._virtualSize={x:a,y:l}},e.prototype._renderLayers=function(){},e.prototype._layerSize=function(t){var e=ee(t,this.options.zoom);return this.options.minSize*ab(2,e)},e.prototype._tap=function(t){if(this._panComplete()){var e=this.eventOffset(t);this.hideTooltip(),this.trigger("click",{originalEvent:t,location:this.viewToLocation(e)})}},e.prototype._doubleTap=function(t){if(!1!==this.options.zoomable&&!this.trigger("zoomStart",{originalEvent:t})){var e=this.zoom()+1,n=this.eventOffset(t),i=this.viewToLocation(n),r=this.locationToLayer(i,e).translate(-n.x,-n.y);this._zoomAround(r,e),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._mousewheel=function(t){var e=Rt(t)>0?-1:1,n=this.options,i=this.zoom(),r=Yt(i+e,n.minZoom,n.maxZoom);if(!1!==n.zoomable&&r!==i&&!this.trigger("zoomStart",{originalEvent:t})){var o=this.eventOffset(t),s=this.viewToLocation(o),a=this.locationToLayer(s,r).translate(-o.x,-o.y);this._zoomAround(a,r),this.trigger("zoomEnd",{originalEvent:t})}},e.prototype._toDocumentCoordinates=function(t){var e=Vt(this.element);return{left:Qt(t.x+e.left),top:Qt(t.y+e.top)}},e}(Je);re(pb,{name:"Map",controls:{attribution:!0,navigator:{panStep:100},zoom:!0},layers:[],layerDefaults:{shape:{style:{fill:{color:"#fff"},stroke:{color:"#aaa",width:.5}}},bubble:{style:{fill:{color:"#fff",opacity:.5},stroke:{color:"#aaa",width:.5}}},marker:{shape:"pinTarget",tooltip:{position:"top"}}},center:[0,0],icons:{type:"font",svgIcons:{}},zoom:3,minSize:256,minZoom:1,maxZoom:19,markers:[],markerDefaults:{shape:"pinTarget",tooltip:{position:"top"}},wraparound:!0,renderPointsAsMarkers:!1}),Gy(pb,["beforeReset","click","markerActivate","markerClick","markerCreated","markerMouseEnter","markerMouseLeave","pan","panEnd","reset","shapeClick","shapeCreated","shapeFeatureCreated","shapeMouseEnter","shapeMouseLeave","zoomEnd","zoomStart"]);const fb=pb;var gb=function(t,e){return t.map(e).reduce((function(t,e){return t+e}),0)},mb=function(t,e){return t.y0===e.y0?t.index-e.index:t.y0+t.y1-e.y0-e.y1},yb=function(t,e){return mb(t.source,e.source)},vb=function(t,e){return mb(t.target,e.target)},bb=function(t){return t.value};function wb(t){t.forEach((function(t){t.targetLinks.forEach((function(t){t.source.sourceLinks.sort(vb)})),t.sourceLinks.forEach((function(t){t.target.targetLinks.sort(yb)}))}))}var xb=function(t,e){return"left"===t.align?t.depth:"right"===t.align?e-t.height:t.sourceLinks.length?t.depth:e},_b=function(t){var e=t.nodesOptions,n=e.offset;void 0===n&&(n={});var i=e.align;this.data={nodes:t.nodes.map((function(t){return st({},{offset:n,align:i},t)})),links:t.links.map((function(t){return st({},t)}))},this.width=t.width,this.height=t.height,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.nodeWidth=t.nodesOptions.width,this.nodePadding=t.nodesOptions.padding,this.reverse=t.reverse,this.targetColumnIndex=t.targetColumnIndex,this.loops=t.loops,this.autoLayout=t.autoLayout};_b.prototype.calculate=function(){var t=this.data,e=t.nodes,n=t.links;this.connectLinksToNodes(e,n),this.calculateNodeValues(e);var i=this.calculateNodeHeights(e);if(i)return{nodes:[],links:[],columns:[],circularLinks:i};this.calculateNodeDepths(e);var r=this.calculateNodeColumns(e);return this.calculateNodeBreadths(r),this.applyNodesOffset(e),this.calculateLinkBreadths(e),Object.assign({},this.data,{columns:r})},_b.prototype.connectLinksToNodes=function(t,e){var n=new Map;t.forEach((function(t,e){t.index=e,t.sourceLinks=[],t.targetLinks=[],t.id=void 0!==t.id?t.id:t.label.text,n.set(t.id,t)})),e.forEach((function(t){t.source=n.get(t.sourceId),t.target=n.get(t.targetId),t.source.sourceLinks.push(t),t.target.targetLinks.push(t)}))},_b.prototype.calculateNodeValues=function(t){t.forEach((function(t){t.value=Math.max(gb(t.sourceLinks,bb),gb(t.targetLinks,bb))}))},_b.prototype.calculateNodeDepths=function(t){for(var e=new Set(t),n=new Set,i=0;e.size;){for(var r=Array.from(e),o=0;o<r.length;o++){var s=r[o];s.depth=i;for(var a=0;a<s.sourceLinks.length;a++){var l=s.sourceLinks[a];n.add(l.target)}}i++,e=n,n=new Set}},_b.prototype.calculateNodeHeights=function(t){for(var e=t.length,n=new Set(t),i=new Set,r=0,o=function(t){t.height=r,t.targetLinks.forEach((function(t){i.add(t.source)}))};n.size;){if(n.forEach(o),++r>e)return!0;n=i,i=new Set}return!1},_b.prototype.calculateNodeColumns=function(t){for(var e,n,i=(e=t,n=function(t){return t.depth},Math.max.apply(null,e.map(n))),r=(this.width-this.offsetX-this.nodeWidth)/i,o=new Array(i+1),s=0;s<t.length;s++){var a=t[s],l=Math.max(0,Math.min(i,xb(a,i)));a.x0=this.offsetX+l*r,a.x1=a.x0+this.nodeWidth,a.layer=l,o[l]=o[l]||[],o[l].push(a)}return o},_b.prototype.calculateNodeBreadths=function(t){var e,n,i=this,r=(e=t,n=function(t){return(i.height-i.offsetY-(t.length-1)*i.nodePadding)/gb(t,bb)},Math.min.apply(null,e.map(n)));if(t.forEach((function(t){var e=i.offsetY;t.forEach((function(t){t.y0=e,t.y1=e+t.value*r,e=t.y1+i.nodePadding,t.sourceLinks.forEach((function(t){t.width=t.value*r}))})),e=(i.height-e+i.nodePadding)/(t.length+1),t.forEach((function(t,n){t.y0+=e*(n+1),t.y1+=e*(n+1)}))})),!1!==this.autoLayout)for(var o=void 0!==this.loops?this.loops:t.length-1,s=this.targetColumnIndex||1,a=0;a<o;a++)i.reverse?(i.uncurlLinksToRight(t,s),i.uncurlLinksToLeft(t,s)):(i.uncurlLinksToLeft(t,s),i.uncurlLinksToRight(t,s));t.forEach(wb)},_b.prototype.applyNodesOffset=function(t){t.forEach((function(t){var e=(t.offset?t.offset.left:0)||0,n=(t.offset?t.offset.top:0)||0;t.x0+=e,t.x1+=e,t.y0+=n,t.y1+=n}))},_b.prototype.calculateLinkBreadths=function(t){t.forEach((function(t){var e=t.sourceLinks,n=t.targetLinks,i=t.y0,r=i;e.forEach((function(t){t.x0=t.source.x1,t.y0=i+t.width/2,i+=t.width})),n.forEach((function(t){t.x1=t.target.x0,t.y1=r+t.width/2,r+=t.width}))}))},_b.prototype.uncurlLinksToRight=function(t,e){for(var n=this,i=t.length,r=e;r<i;r++){var o=t[r];o.forEach((function(t){var e=0,i=0;t.targetLinks.forEach((function(r){var o=r.value*(t.layer-r.source.layer);e+=n.targetTopPos(r.source,t)*o,i+=o}));var r=0===e?0:e/i-t.y0;t.y0+=r,t.y1+=r,wb([t])})),o.sort(mb),n.arrangeNodesVertically(o)}},_b.prototype.uncurlLinksToLeft=function(t,e){for(var n=this,i=t.length-1-e;i>=0;i--){for(var r=t[i],o=function(t){var e=r[t],i=0,o=0;e.sourceLinks.forEach((function(t){var r=t.value*(t.target.layer-e.layer);i+=n.sourceTopPos(e,t.target)*r,o+=r}));var s=0===i?0:i/o-e.y0;e.y0+=s,e.y1+=s,wb([e])},s=0;s<r.length;s++)o(s);r.sort(mb),n.arrangeNodesVertically(r)}},_b.prototype.arrangeNodesVertically=function(t){var e=t.length-1;this.arrangeUp(t,this.height,e),this.arrangeDown(t,this.offsetY,0)},_b.prototype.arrangeDown=function(t,e,n){for(var i=e,r=n;r<t.length;r++){var o=t[r],s=Math.max(0,i-o.y0);o.y0+=s,o.y1+=s,i=o.y1+this.nodePadding}},_b.prototype.arrangeUp=function(t,e,n){for(var i=e,r=n;r>=0;--r){var o=t[r],s=Math.max(0,o.y1-i);o.y0-=s,o.y1-=s,i=o.y0-this.nodePadding}},_b.prototype.sourceTopPos=function(t,e){for(var n=e.y0-(e.targetLinks.length-1)*this.nodePadding/2,i=0;i<e.targetLinks.length;i++){var r=e.targetLinks[i];if(r.source===t)break;n+=r.width+this.nodePadding}for(var o=0;o<t.sourceLinks.length;o++){var s=t.sourceLinks[o];if(s.target===e)break;n-=s.width}return n},_b.prototype.targetTopPos=function(t,e){for(var n=t.y0-(t.sourceLinks.length-1)*this.nodePadding/2,i=0;i<t.sourceLinks.length;i++){var r=t.sourceLinks[i];if(r.target===e)break;n+=r.width+this.nodePadding}for(var o=0;o<e.targetLinks.length;o++){var s=e.targetLinks[o];if(s.source===t)break;n-=s.width}return n};var Sb=function(t){return new _b(t).calculate()};function Cb(t,e,n,i,r,o){var s=(o-e)*(n-t),a=(i-e)*(r-t);return s>a?1:s===a?0:-1}var kb=function(t){function e(e){t.call(this),this.options=st({},this.options,e),this.createVisual()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.createVisual=function(){this.visual=this.createElement()},e.prototype.exportVisual=function(){return this.visual},e.prototype.createElement=function(){var t=this,e=this.options.visual;return e?e({sender:this.getSender(),options:this.visualOptions(),createVisual:function(){return t.getElement()}}):this.getElement()},e.prototype.getSender=function(){return this},e}(Nt.A),Ab=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){return Ln.w.fromRect(this.getRect(),this.visualOptions())},e.prototype.getRect=function(){var t=this.options.node;return new kn.A([t.x0,t.y0],[t.x1-t.x0,t.y1-t.y0])},e.prototype.getLabelText=function(t){var e=t.labels.ariaTemplate;if(e)return e({node:t.node})},e.prototype.visualOptions=function(){var t=st({},this.options,this.options.node),e=this.getLabelText(t);return{fill:{color:t.color,opacity:t.opacity},stroke:{width:0},className:"k-sankey-node",role:"graphics-symbol",ariaRoleDescription:"Node",ariaLabel:e}},e.prototype.createFocusHighlight=function(){if(this.options.navigatable)return this._highlight=Ln.w.fromRect(this.getRect(),{stroke:this.options.focusHighlight,visible:!1}),this._highlight},e.prototype.focus=function(t){if(this._highlight){var e=(t||{}).highlight;void 0===e&&(e=!0),e&&this._highlight.options.set("visible",!0);var n=this.options.node.id;this.visual.options.set("id",n),this.options.root()&&this.options.root().setAttribute(h,n)}},e.prototype.blur=function(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(h))},e}(kb),Eb=function(t,e,n){return t.color||e[n%e.length]},Tb=function(t,e,n,i){var r=st({},e,e.node);return st({},{color:Eb(t,n,i)},r,{node:t},{visual:t.visual,opacity:t.opacity,offset:t.offset,color:t.color})},Mb=function(t,e){var n,i,r,o,s,a,l,c,h=t.x0,u=t.x1,d=t.y0,p=t.y1,f=(h+u)/2,g=t.width,m=g/2,y=[[(h+f)/2,d-m],[(u+f)/2,p-m]],v=function(t,e){var n=t[0],i=n[0],r=n[1],o=t[1],s=o[0],a=o[1],l=e[0],c=e[1];return Math.abs((s-i)*(c-r)-(l-i)*(a-r))/Math.sqrt(Math.pow(s-i,2)+Math.pow(a-r,2))}(y,[f,(n=d+m,i=d+m,r=p+m,o=p+m,s=.5,a=1-s,l=a*a,c=s*s,n*l*a+3*i*s*l+3*r*c*a+o*c*s)]),b=(g-v)/2,w=function(t,e){var n=t[0],i=n[0],r=n[1],o=t[1],s=o[0],a=o[1],l=e[0],c=l[0],h=l[1],u=e[1],d=u[0],p=u[1],f=Math.atan2(a-r,s-i),g=Math.atan2(p-h,d-c);return Math.abs(f-g)}(y,[[h,d-m],[f,d-m]]),x=b,_=Math.sin(w)*x,S=d-p>0?-1:1;return e&&(S=-S),S*Math.sqrt(x*x+_*_)},Ob=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options.link,e=t.x0,n=t.x1,i=t.y0,r=t.y1,o=(e+n)/2;return new Ln.w(this.visualOptions()).moveTo(e,i).curveTo([o,i],[o,r],[n,r])},e.prototype.getLabelText=function(t){var e=t.labels.ariaTemplate;if(e)return e({link:t.link})},e.prototype.visualOptions=function(){var t=this.options,e=this.options.link,n=this.getLabelText(t);return{stroke:{width:t.link.width,color:e.color||t.color,opacity:Ht(e.opacity)?e.opacity:t.opacity},role:"graphics-symbol",ariaRoleDescription:"Link",ariaLabel:n}},e.prototype.createFocusHighlight=function(){if(this.options.navigatable){var t=this.options,e=t.link,n=t.rtl,i=e.x0,r=e.x1,o=e.y0,s=e.y1,a=(i+r)/2,l=e.width/2,c=Mb(e,n);this._highlight=new Ln.w({stroke:this.options.focusHighlight,visible:!1}).moveTo(i,o+l).lineTo(i,o-l).curveTo([a+c,o-l],[a+c,s-l],[r,s-l]).lineTo(r,s+l).curveTo([a-c,s+l],[a-c,o+l],[i,o+l])}},e.prototype.focus=function(t){if(this._highlight){var e=(t||{}).highlight;void 0===e&&(e=!0),e&&this._highlight.options.set("visible",!0);var n=this.options.link.sourceId+"->"+this.options.link.targetId;this.visual.options.set("id",n),this.options.root()&&this.options.root().setAttribute(h,n)}},e.prototype.blur=function(){this._highlight&&(this._highlight.options.set("visible",!1),this.visual.options.set("id",""),this.options.root()&&this.options.root().removeAttribute(h))},e}(kb),Ib="inside",Db="before",Fb="after",Pb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=st({},this.options,this.options.node.label),e=t.node,n=t.diagramMinX,i=t.diagramMaxX,r=t.text,o=t.offset,s=t.rtl,a=t.position;if(s&&a!==Ib&&(a=a===Db?Fb:Db),!t.visible||!r)return null;var l=new Tn(e.x0,e.y0,e.x1,e.y1),c=this.visualOptions();s&&!c.align&&(c.align="right");var h=new Ci(r,c);h.reflow(new Tn);var u=h.box,d=l.center().y-u.height()/2,p=e.x1+u.width()>i,f=e.x0-u.width()<n,g=a===Db||a===Ib&&p?Db:Fb;s&&(g=a===Fb||a===Ib&&f?Fb:Db);var m=[g===Db?e.x0-u.width():e.x1,d],y=new Tn(m[0],m[1],m[0]+u.width(),m[1]+u.height());return y.translate(o.left||0,o.top||0),h.reflow(y),h.renderVisual(),h.visual},e.prototype.visualOptions=function(){var t=st({},this.options,this.options.node.label);return{color:t.color,font:t.font,border:t.border,margin:t.margin,padding:t.padding,align:t.align,paintOrder:t.paintOrder,stroke:t.stroke}},e}(kb);re(Pb,{position:Ib});var Rb=function(t,e,n,i,r){return st({},e,{node:t,diagramMinX:i,diagramMaxX:r,rtl:n,visual:t.label.visual,visible:t.label.visible,margin:t.label.margin,padding:t.label.padding,border:t.label.border,align:t.label.align,offset:t.label.offset})},Lb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=t.drawingRect,n=t.text;if(!1===t.visible||!n)return null;var i=Ei.buildTitle(n,t);return i.reflow(e),i.renderVisual(),i.visual},e.prototype.createElement=function(){return this.getElement()},e}(kb);re(Lb,{align:p,border:{width:0},margin:dt(5),padding:dt(5)});var Nb=function(t,e){return t.node.x0-e.node.x0!=0?t.node.x0-e.node.x0:t.node.y0-e.node.y0},Bb=function(t,e){return t.node.x1-e.node.x1!=0?t.node.x1-e.node.x1:e.node.y0-t.node.y0},jb=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getElement=function(){var t=this.options,e=t.drawingRect,n=t.rtl,i=t.nodes;void 0===i&&(i=[]);var r=t.item,o=t.position;if(!1===t.visible||!i.length)return null;var s=i.map((function(t){return{text:t.label&&t.label.text||"",area:{background:void 0!==r.areaBackground?r.areaBackground:t.color,opacity:void 0!==r.areaOpacity?r.areaOpacity:t.opacity},node:t}}));s.sort(function(t){return t?Bb:Nb}(n));var a=n&&o!==k&&o!==I,l=new Zh(Object.assign({},t,{data:s,reverse:a}),{rtl:n});return l.reflow(e),l.renderVisual(),l.visual},e.prototype.createElement=function(){return this.getElement()},e}(kb);re(jb,{markers:{visible:!1},item:{type:Go,cursor:$,opacity:1},position:d,align:p,accessibility:{role:"presentation",ariaLabel:null,ariaRoleDescription:null},border:{width:0}});var zb="link",$b="node",Hb=function(t){function e(e,n,i){t.call(this),this._initTheme(i),this._setOptions(n),this._initElement(e),this._initSurface(),n&&n.data&&(this._redraw(),this._initResizeObserver(),this._initNavigation(e))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.unbind(),this._destroySurface(),this._destroyResizeObserver(),this.element&&(this.element.removeEventListener("keydown",this._keydownHandler),this.element.removeEventListener("focus",this._focusHandler),this.element.removeEventListener("mousedown",this._onDownHandler),this.element.removeEventListener("touchstart",this._onDownHandler),this.element.removeEventListener("pointerdown",this._onDownHandler)),this._focusState=null,this.element=null},e.prototype._initElement=function(t){this.element=t,V(t,["k-chart","k-sankey"]),t.setAttribute("role","graphics-document");var e=this.options.title;e.text&&t.setAttribute("aria-label",e.text),e.description&&t.setAttribute("aria-roledescription",e.description)},e.prototype._initSurface=function(){this.surface||(this._destroySurface(),this._initSurfaceElement(),this.surface=this._createSurface())},e.prototype._initNavigation=function(t){t.tabIndex=t.getAttribute("tabindex")||0,this.options.disableKeyboardNavigation||(this._keydownHandler=this._keydown.bind(this),this._focusHandler=this._focus.bind(this),this._blurHandler=this._blur.bind(this),this._onDownHandler=this._onDown.bind(this),t.addEventListener("keydown",this._keydownHandler),t.addEventListener("focus",this._focusHandler),t.addEventListener("blur",this._blurHandler),t.addEventListener("mousedown",this._onDownHandler),t.addEventListener("touchstart",this._onDownHandler),t.addEventListener("pointerdown",this._onDownHandler),this._focusState={node:this.firstFocusableNode(),link:null})},e.prototype.firstFocusableNode=function(){return this.columns[0][0]},e.prototype._initResizeObserver=function(){var t=this,e=new ResizeObserver((function(e){e.forEach((function(e){var n=e.contentRect,i=n.width,r=n.height;e.target!==t.element||t.size&&t.size.width===i&&t.size.height===r||(t.size={width:i,height:r},t.surface.setSize(t.size),t.resize=!0,t._redraw())}))}));this._resizeObserver=e,e.observe(this.element)},e.prototype._createSurface=function(){return mh.A.create(this.surfaceElement,{mouseenter:this._mouseenter.bind(this),mouseleave:this._mouseleave.bind(this),mousemove:this._mousemove.bind(this),click:this._click.bind(this)})},e.prototype._initTheme=function(t){var e=t||this.theme||{};this.theme=e,this.options=st({},e,this.options)},e.prototype.setLinksOpacity=function(t){var e=this;this.linksVisuals.forEach((function(n){e.setOpacity(n,t,n.linkOptions.opacity)}))},e.prototype.setLinksInactivityOpacity=function(t){var e=this;this.linksVisuals.forEach((function(n){e.setOpacity(n,t,n.linkOptions.highlight.inactiveOpacity)}))},e.prototype.setOpacity=function(t,e,n){t.options.set("stroke",Object.assign({},t.options.stroke,{opacity:Ht(n)?n:e}))},e.prototype.trigger=function(e,n){var i=n.element.dataItem,r=n.element.type,o=Object.assign({},n,{type:e,targetType:r,dataItem:i});return t.prototype.trigger.call(this,e,o)},e.prototype._mouseenter=function(t){var e=t.element,n=e.type===zb,i=e.type===$b,r=Boolean(e.chartElement&&e.chartElement.options.node);if(!(n&&this.trigger("linkEnter",t)||i&&this.trigger("nodeEnter",t))){var o=this.options.links.highlight;if(n)this.setLinksInactivityOpacity(o.inactiveOpacity),this.setOpacity(e,o.opacity,e.linkOptions.highlight.opacity);else if(i)this.highlightLinks(e,o);else if(r){var s=this.nodesVisuals.get(e.chartElement.options.node.id);this.highlightLinks(s,o)}}},e.prototype._mouseleave=function(t){var e=this,n=t.element,i=n.type===zb,r=n.type===$b,o=Boolean(n.chartElement&&n.chartElement.options.node),s=t.originalEvent.relatedTarget;i&&s&&"text"===s.nodeName||((i||r)&&(this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null),this.tooltipShown=!1,this.trigger("tooltipHide",t)),i&&this.trigger("linkLeave",t)||r&&this.trigger("nodeLeave",t)||(i||r||o)&&this.linksVisuals.forEach((function(t){e.setOpacity(t,e.options.links.opacity,t.linkOptions.opacity)})))},e.prototype._mousemove=function(t){var e=this,n=this.options.tooltip,i=n.followPointer,r=n.delay,o=t.element,s=o.type;if(!(s!==zb&&s!==$b||this.tooltipShown&&!i)){var a=t.originalEvent,l=this.element.getBoundingClientRect(),c=a.clientX-l.left<l.width/2,h=a.clientY-l.top<l.height/2;if(t.tooltipData={popupOffset:{left:a.pageX,top:a.pageY},popupAlign:{horizontal:c?"left":"right",vertical:h?"top":"bottom"}},s===$b){var u=o.dataItem,d=u.sourceLinks,p=u.targetLinks,f=p.length?p:d;t.nodeValue=f.reduce((function(t,e){return t+e.value}),0)}this.tooltipTimeOut&&(clearTimeout(this.tooltipTimeOut),this.tooltipTimeOut=null);var g=i&&this.tooltipShown?0:r;this.tooltipTimeOut=setTimeout((function(){e.trigger("tooltipShow",t),e.tooltipShown=!0,e.tooltipTimeOut=null}),g)}},e.prototype._click=function(t){var e=t.element,n=e.dataItem,i=e.type===zb,r=e.type===$b,o=this._focusState||{};if(r)!o.link&&this.sameNode(o.node,n)||(this._focusState={node:n,link:null},this._focusNode({highlight:!1})),this.trigger("nodeClick",t);else if(i){var s={sourceId:n.source.id,targetId:n.target.id,value:n.value};this.sameLink(o.link,s)||(this._focusState={node:n.source,link:s},this._focusLink({highlight:!1})),this.trigger("linkClick",t)}},e.prototype.sameNode=function(t,e){return t&&e&&t.id===e.id},e.prototype.sameLink=function(t,e){return t&&e&&t.sourceId===e.sourceId&&t.targetId===e.targetId},e.prototype._focusNode=function(t){this._cleanFocusHighlight();var e=this._focusState.node;this.models.map.get(e.id).focus(t)},e.prototype._focusLink=function(t){this._cleanFocusHighlight();var e=this._focusState.link;this.models.map.get(e.sourceId+"-"+e.targetId).focus(t)},e.prototype._focusNextNode=function(t){void 0===t&&(t=1);var e=this._focusState.node,n=this.columns.findIndex((function(t){return t.find((function(t){return t.id===e.id}))})),i=this.columns[n],r=i.findIndex((function(t){return t.id===e.id})),o=i[r+t];o&&(this._focusState.node=o,this._focusNode())},e.prototype._focusNextLink=function(t){void 0===t&&(t=1);var e=this._focusState.node,n=this._focusState.link,i=e.sourceLinks.findIndex((function(t){return t.sourceId===n.sourceId&&t.targetId===n.targetId})),r=e.targetLinks.findIndex((function(t){return t.sourceId===n.sourceId&&t.targetId===n.targetId}));if(-1!==i){var o=e.sourceLinks[i+t];o&&(this._focusState.link=o,this._focusLink())}else if(-1!==r){var s=e.targetLinks[r+t];s&&(this._focusState.link=s,this._focusLink())}},e.prototype._focusSourceNode=function(){var t=this._focusState.link,e=this.models.map.get(t.sourceId);this._focusState={node:e.options.node,link:null},this._focusNode()},e.prototype._focusTargetNode=function(){var t=this._focusState.link,e=this.models.map.get(t.targetId);this._focusState={node:e.options.node,link:null},this._focusNode()},e.prototype._focusSourceLink=function(){var t=this._focusState.node.sourceLinks[0];t&&(this._focusState.link=t,this._focusLink())},e.prototype._focusTargetLink=function(){var t=this._focusState.node.targetLinks[0];t&&(this._focusState.link=t,this._focusLink())},e.prototype._focus=function(){this._skipFocusHighlight||(this._focusState.link?this._focusLink():this._focusNode()),this._skipFocusHighlight=!1},e.prototype._blur=function(){this._cleanFocusHighlight()},e.prototype._onDown=function(){this._hasFocus()||(this._skipFocusHighlight=!0)},e.prototype._hasFocus=function(){return this.element.ownerDocument.activeElement===this.element},e.prototype._cleanFocusHighlight=function(){this.models.nodes.forEach((function(t){return t.blur()})),this.models.links.forEach((function(t){return t.blur()}))},e.prototype._keydown=function(t){var e=this["on"+t.key],n=this.options.rtl;n&&"ArrowLeft"===t.key?e=this.onArrowRight:n&&"ArrowRight"===t.key&&(e=this.onArrowLeft),e&&e.call(this,t)},e.prototype.onEscape=function(t){t.preventDefault(),this._focusState={node:this.firstFocusableNode(),link:null},this._focusNode()},e.prototype.onArrowDown=function(t){t.preventDefault(),this._focusState.link?this._focusNextLink(1):this._focusNextNode(1)},e.prototype.onArrowUp=function(t){t.preventDefault(),this._focusState.link?this._focusNextLink(-1):this._focusNextNode(-1)},e.prototype.onArrowLeft=function(t){t.preventDefault(),this._focusState.link?this._focusSourceNode():this._focusTargetLink()},e.prototype.onArrowRight=function(t){t.preventDefault(),this._focusState.link?this._focusTargetNode():this._focusSourceLink()},e.prototype.highlightLinks=function(t,e){var n=this;t&&(this.setLinksInactivityOpacity(e.inactiveOpacity),t.links.forEach((function(t){n.setOpacity(t,e.opacity,t.linkOptions.highlight.opacity)})))},e.prototype._destroySurface=function(){this.surface&&(this.surface.destroy(),this.surface=null,this._destroySurfaceElement())},e.prototype._destroyResizeObserver=function(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},e.prototype._initSurfaceElement=function(){this.surfaceElement||(this.surfaceElement=document.createElement("div"),this.element.appendChild(this.surfaceElement))},e.prototype._destroySurfaceElement=function(){this.surfaceElement&&this.surfaceElement.parentNode&&(this.surfaceElement.parentNode.removeChild(this.surfaceElement),this.surfaceElement=null)},e.prototype.setOptions=function(t,e){this._setOptions(t),this._initTheme(e),this._initSurface(),this._redraw()},e.prototype._redraw=function(){this.surface.clear();var t=this._getSize(),e=t.width,n=t.height;this.size={width:e,height:n},this.surface.setSize(this.size),this.createVisual(),this.surface.draw(this.visual)},e.prototype._getSize=function(){return this.element.getBoundingClientRect()},e.prototype.createVisual=function(){this.visual=this._render()},e.prototype.titleBox=function(t,e){return t&&!1!==t.visible&&t.text?new Lb(Object.assign({},{drawingRect:e},t)).exportVisual().chartElement.box:null},e.prototype.legendBox=function(t,e,n){return t&&!1!==t.visible?new jb(Object.assign({},{nodes:e},t,{drawingRect:n})).exportVisual().chartElement.box:null},e.prototype.calculateSankey=function(t,e){var n=e.title,i=e.legend,r=e.data,o=e.nodes,s=e.labels,a=e.nodeColors,l=e.disableAutoLayout,c=e.disableKeyboardNavigation,h=e.rtl,u=!l,p=c?0:Ub.width/2,f=new Tn(0,0,t.width,t.height);f.unpad(p);var g=this.titleBox(n,f),m=f.clone();if(g){var y=g.height();n.position===R?(f.unpad({top:y}),m=new Tn(0,y,t.width,t.height)):(f.shrink(0,y),m=new Tn(0,0,t.width,t.height-y))}var v=this.legendBox(i,r.nodes,m),b=i&&i.position||jb.prototype.options.position;v&&(b===k&&f.unpad({left:v.width()}),b===I&&f.shrink(v.width(),0),b===R&&f.unpad({top:v.height()}),b===d&&f.shrink(0,v.height()));var w=Sb(Object.assign({},t,{offsetX:0,offsetY:0,width:f.width(),height:f.height()})),x=w.nodes,_=w.circularLinks;if(_)return console.warn("Circular links detected. Kendo Sankey diagram does not support circular links."),{sankey:{nodes:[],links:[],columns:[[]],circularLinks:_},legendBox:v,titleBox:g};var S=new Tn,C=x.reduce((function(t,e){return Math.min(t,e.x0)}),1/0),A=x.reduce((function(t,e){return Math.max(t,e.x1)}),0);x.forEach((function(t,e){if(h){var n=t.x0,i=t.x1;t.x0=A-i,t.x1=A-n}var r=Tb(t,o,a,e),l=new Ab(r);S.wrap(xi(l.exportVisual().rawBBox()));var c=new Pb(Rb(t,s,h,C,A)).exportVisual();c&&S.wrap(xi(c.rawBBox()))}));var E=f.x1,T=f.y1,M=f.width()+E,O=f.height()+T;if(M-=S.x2>f.width()?S.x2-f.width():0,O-=S.y2>f.height()?S.y2-f.height():0,E+=S.x1<0?-S.x1:0,T+=S.y1<0?-S.y1:0,!1===u)return{sankey:Sb(Object.assign({},t,{offsetX:E,offsetY:T,width:M,height:O,autoLayout:!1})),legendBox:v,titleBox:g};if(this.resize&&u&&this.permutation)return this.resize=!1,{sankey:Sb(Object.assign({},t,{offsetX:E,offsetY:T,width:M,height:O},this.permutation)),legendBox:v,titleBox:g};for(var D=Sb(Object.assign({},t,{offsetX:E,offsetY:T,width:M,height:O,autoLayout:!1})).columns.length,F=[],P=function(e,n){var i=function(t){for(var e,n,i,r,o,s,a=0,l=t.length,c=0;c<l;c++)for(var h=t[c],u=c+1;u<l;u++){var d=t[u];n=d,i=void 0,r=void 0,o=void 0,s=void 0,i=Cb((e=h).x0,e.y0,e.x1,e.y1,n.x1,n.y1),r=Cb(e.x0,e.y0,e.x1,e.y1,n.x0,n.y0),o=Cb(e.x0,e.y0,n.x0,n.y0,n.x1,n.y1),s=Cb(e.x1,e.y1,n.x0,n.y0,n.x1,n.y1),i!==r&&o!==s&&(a+=Math.min(h.value,d.value))}return a}(Sb(Object.assign({},t,{offsetX:E,offsetY:T,width:M,height:O,loops:2,targetColumnIndex:e,reverse:n})).links);return F.push({crosses:i,reverse:n,targetColumnIndex:e}),0===i},L=1;L<=D-1&&(!P(L,!1)&&!P(L,!0));L++);var N=Math.min.apply(null,F.map((function(t){return t.crosses}))),B=F.find((function(t){return t.crosses===N}));return this.permutation={targetColumnIndex:B.targetColumnIndex,reverse:B.reverse},{sankey:Sb(Object.assign({},t,{offsetX:E,offsetY:T,width:M,height:O},this.permutation)),legendBox:v,titleBox:g}},e.prototype._render=function(t,e){var n=t||this.options,i=e||this,r=n.labels,o=n.nodes,s=n.links,a=n.nodeColors,l=n.title,c=n.legend,h=n.rtl,u=n.disableKeyboardNavigation,d=n.data,p=i.size,f=p.width,g=p.height,m=Object.assign({},d,{width:f,height:g,nodesOptions:o,title:l,legend:c}),y=this.calculateSankey(m,n),v=y.sankey,b=y.titleBox,w=y.legendBox;h&&function(t){var e=t.nodes,n=t.links,i=Math.min.apply(Math,e.map((function(t){return t.x0}))),r=Math.max.apply(Math,e.map((function(t){return t.x1})))-i;e.forEach((function(t){var e=r-(t.x1-2*i),n=r-(t.x0-2*i);t.x0=e,t.x1=n})),n.forEach((function(t){var e=r-(t.x1-2*i),n=r-(t.x0-2*i);t.x1=e,t.x0=n}))}(v);var x=v.nodes,_=v.links,S=v.columns;i.columns=S.map((function(t){var e=t.slice();return e.sort((function(t,e){return t.y0-e.y0})),e}));var C=new Hn.A({clip:Ln.w.fromRect(new kn.A([0,0],[f,g]))});if(b){var k=new Lb(Object.assign({},l,{drawingRect:b})).exportVisual();C.append(k)}if(v.circularLinks)return C;var A=new Map;i.nodesVisuals=A;var E={nodes:[],links:[],map:new Map};i.models=E;var T=[];x.forEach((function(t,e){var n=Tb(t,o,a,e);n.root=function(){return i.element},n.navigatable=!0!==u;var r=new Ab(n),s=r.exportVisual();s.links=[],s.type=$b,t.color=n.color,t.opacity=n.opacity,s.dataItem=Object.assign({},d.nodes[e],{color:n.color,opacity:n.opacity,sourceLinks:t.sourceLinks.map((function(t){return{sourceId:t.sourceId,targetId:t.targetId,value:t.value}})),targetLinks:t.targetLinks.map((function(t){return{sourceId:t.sourceId,targetId:t.targetId,value:t.value}}))}),A.set(t.id,s),E.nodes.push(r),E.map.set(t.id,r),C.append(s),r.createFocusHighlight(),r._highlight&&T.push(r._highlight)}));var M=_.slice().sort((function(t,e){return e.value-t.value})),O=[];i.linksVisuals=O,M.forEach((function(t){var e=t.source,n=t.target,r=A.get(e.id),o=A.get(n.id),a=function(t,e,n,i){var r=st({},e,{link:t,opacity:t.opacity,color:t.color,colorType:t.colorType,visual:t.visual,highlight:t.highlight});return"source"===r.colorType?r.color=n.options.fill.color:"target"===r.colorType&&(r.color=i.options.fill.color),r}(t,s,r,o);a.root=function(){return i.element},a.navigatable=!0!==u,a.rtl=h;var l=new Ob(a),c=l.exportVisual();c.type=zb,c.dataItem={source:Object.assign({},r.dataItem),target:Object.assign({},o.dataItem),value:t.value},c.linkOptions=a,O.push(c),r.links.push(c),o.links.push(c),E.links.push(l),E.map.set(e.id+"-"+n.id,l),l.createFocusHighlight(),l._highlight&&T.push(l._highlight),C.append(c)}));var I=x.reduce((function(t,e){return Math.min(t,e.x0)}),1/0),D=x.reduce((function(t,e){return Math.max(t,e.x1)}),0);if(x.forEach((function(t){var e=Rb(t,r,h,I,D),n=new Pb(e).exportVisual();n&&C.append(n)})),w){var F=new jb(Object.assign({},c,{rtl:h,drawingRect:w,nodes:x})).exportVisual();C.append(F)}if(0!==T.length){var P=new Hn.A;P.append.apply(P,T),C.append(P)}return C},e.prototype.exportVisual=function(t){var e=t&&t.options?st({},this.options,t.options):this.options,n={size:{width:Ht(t&&t.width)?t.width:this.size.width,height:Ht(t&&t.height)?t.height:this.size.height}};return this._render(e,n)},e.prototype._setOptions=function(t){this.options=st({},this.options,t)},e}(Je),Ub={opacity:1,width:2,color:u};re(Hb,{title:{position:R},labels:{visible:!0,margin:{left:8,right:8},padding:0,border:{width:0},paintOrder:"stroke",stroke:{lineJoin:"round",width:1},offset:{left:0,top:0}},nodes:{width:24,padding:16,opacity:1,align:"stretch",offset:{left:0,top:0},focusHighlight:Object.assign({},Ub),labels:{ariaTemplate:function(t){return t.node.label.text}}},links:{colorType:"static",opacity:.4,highlight:{opacity:.8,inactiveOpacity:.2},focusHighlight:Object.assign({},Ub),labels:{ariaTemplate:function(t){var e=t.link;return e.source.label.text+" to "+e.target.label.text}}},tooltip:{followPointer:!1,delay:200}});var Vb=function(t,e,n){var i=new Set,r=new Map,o=new Map;t.forEach((function(t){e.forEach((function(e){i.add(e.value(t))}));for(var s=0;s<e.length-1;s++){var a=e[s].value(t),l=e[s+1].value(t),c=a+"_"+l,h=n.value(t),u=r.get(c);void 0!==u?r.set(c,u+h):(r.set(c,h),o.set(c,{source:a,target:l}))}}));var s=new Map,a=Array.from(i).map((function(t,e){return s.set(t,e),{id:e,label:{text:String(t)}}})),l=Array.from(r).map((function(t){var e=t[0],n=t[1],i=o.get(e),r=i.source,a=i.target;return{sourceId:s.get(r),targetId:s.get(a),value:n}}));return{nodes:a,links:l}},Wb=1.5,qb=.4,Kb="#000",Xb="Arial, Helvetica, sans-serif",Gb="11px "+Xb,Yb="12px "+Xb,Jb="16px "+Xb,Zb="transparent",Qb="#fff",tw={type:as},ew={type:Go},nw=Object.assign({},ew,{markers:{visible:!1},highlight:{visible:!1}}),iw=function(){return{icon:{border:{width:1}},label:{font:Yb,padding:3},line:{length:10,width:2},legendItem:nw,visible:!0}},rw=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:ew,opacity:.4}},ow=function(){return{highlight:{markers:{border:{}}},line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:ew,opacity:.4}},sw=function(){return{outliersField:"",meanField:"",border:{_brightness:.8,width:1},downColor:Qb,gap:1,highlight:{border:{opacity:1,width:2},whiskers:{width:3},mean:{width:2},median:{width:2}},mean:{width:2},median:{width:2},spacing:.3,whiskers:{width:2},legendItem:nw}},aw=function(){return{gap:Wb,spacing:qb,target:{color:"#ff0000"},legendItem:nw}},lw=function(){return{width:2,legendItem:tw}},cw=function(){return{line:{opacity:1,width:0},markers:{size:6,visible:!1},legendItem:ew,opacity:.5}},hw=function(){return{markers:{visible:!1},legendItem:tw,width:2}},uw=function(){return{gap:.5,line:{color:Kb,width:1},legendItem:nw,spacing:qb}},dw=function(){return{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:nw}},pw=dw,fw=function(t){return Object.assign({color:C,trendline:{},markers:{visible:!1},width:1,dashType:"longDash",legendItem:tw},t)},gw=function(t){return{visible:!0,labels:{font:Gb},overlay:t.gradients?{}:{gradient:"none"},area:rw(),rangeArea:ow(),verticalRangeArea:ow(),bar:{gap:Wb,spacing:qb,legendItem:nw},boxPlot:sw(),bubble:{border:{width:0},labels:{background:Zb},legendItem:nw,opacity:.6},bullet:aw(),candlestick:{border:{_brightness:.8,width:1},downColor:Qb,gap:1,highlight:{border:{opacity:1,width:2},line:{width:2}},line:{color:Kb,width:1},legendItem:nw,spacing:.3},column:{gap:Wb,spacing:qb,legendItem:nw},heatmap:{labels:{color:"",background:Zb,visible:!0},highlight:{border:{width:0}},legendItem:nw},pie:{labels:{background:"",color:"",padding:{top:5,bottom:5,left:7,right:7}},legendItem:nw},donut:{margin:1,legendItem:nw},funnel:dw(),pyramid:pw(),horizontalWaterfall:uw(),line:lw(),notes:iw(),ohlc:{gap:1,highlight:{line:{opacity:1,width:3}},line:{width:1},legendItem:nw,spacing:.3},radarArea:cw(),radarLine:hw(),radarColumn:{legendItem:nw},polarArea:cw(),polarLine:hw(),polarScatter:{legendItem:tw},rangeBar:{gap:Wb,spacing:qb,legendItem:nw},rangeColumn:{gap:Wb,spacing:qb,legendItem:nw},scatter:{legendItem:tw},scatterLine:{width:1,legendItem:tw},verticalArea:rw(),verticalBoxPlot:sw(),verticalBullet:aw(),verticalLine:lw(),waterfall:uw(),linearTrendline:fw(),exponentialTrendline:fw({style:"smooth"}),logarithmicTrendline:fw({style:"smooth"}),polynomialTrendline:fw({style:"smooth"}),powerTrendline:fw({style:"smooth"}),movingAverageTrendline:fw()}},mw=function(t){return void 0===t&&(t={}),{axisDefaults:{labels:{font:Yb},notes:iw(),title:{font:Jb,margin:5}},categoryAxis:{majorGridLines:{visible:!0}},navigator:{pane:{height:90,margin:{top:10}}},seriesDefaults:gw(t),title:{font:Jb},subtitle:{font:Yb},legend:{labels:{font:Yb}}}}},6764:(t,e,n)=>{"use strict";n.d(e,{T:()=>d,s4:()=>h,e9:()=>c});var i=function(){return"undefined"!=typeof window},r={wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)(\.(\d+(\.\d+)?))?/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,tizen:/(tizen).*?Version\/(\d+)\.(\d+(\.\d+)?)/i,sailfish:/(sailfish).*rv:(\d+)\.(\d+(\.\d+)?).*firefox/i,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},o={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,flat:/sailfish|ffos|tizen/i,meego:/meego/},s={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i},a={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,ie:/MSIE|Windows\sPhone/i,chrome:/chrome|crios/i,webkit:/webkit/i},l=function(t,e,n){for(var i in e)if(e.hasOwnProperty(i)&&e[i].test(t))return i;return void 0!==n?n:t},c=function(t){var e,n=[];for(var i in r)if(r.hasOwnProperty(i)){if(!(n=t.match(r[i])))continue;if("windows"===i&&"plugins"in window.navigator)return null;var s={};return s.device=i,s.browser=l(t,a,"default"),s.name=l(i,o),s[s.name]=!0,s.majorVersion=n[2],s.minorVersion=n[3]?n[3].replace("_","."):".0",e=s.minorVersion.replace(".","").substr(0,2),s.flatVersion=s.majorVersion+e+new Array(3-(e.length<3?e.length:2)).join("0"),s.cordova=void 0!==typeof window.PhoneGap||void 0!==typeof window.cordova,s.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||s.cordova,s}return null},h=function(t){var e=null,n=[];for(var i in s)if(s.hasOwnProperty(i)&&(n=t.match(s[i]))){(e={})[i]=!0,e[n[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,e.version=parseInt(document.documentMode||n[2],10);break}return e},u=i()&&window.navigator?window.navigator.userAgent:null,d=u?h(u):null,p=(u&&c(u),i()&&window,d&&!d.chrome&&window.MSPointerEvent,d&&!d.chrome&&window.PointerEvent,{});p[void 0]=function(t){return t}},6813:(t,e,n)=>{"use strict";n.d(e,{f:()=>o});var i=n(2089),r=n(6916),o=function(t,e){var n=(0,r.a)(t);return n.setDate(n.getDate()+e),(0,i.t)(n,t.getHours())}},2089:(t,e,n)=>{"use strict";n.d(e,{t:()=>r});var i=n(6916),r=function(t,e){var n=(0,i.a)(t);return 0===e&&23===n.getHours()&&n.setHours(n.getHours()+2),n}},6916:(t,e,n)=>{"use strict";n.d(e,{a:()=>i});var i=function(t){return t?new Date(t.getTime()):null}},749:(t,e,n)=>{"use strict";n.d(e,{J:()=>r});var i=n(2089),r=function(t,e,n,r,o,s,a){void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0);var l=new Date(t,e,n,r,o,s,a);return t>-1&&t<100&&l.setFullYear(l.getFullYear()-1900),(0,i.t)(l,r)}},1775:(t,e,n)=>{"use strict";n.d(e,{p:()=>r});var i=n(749),r=function(t){return(0,i.J)(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0)}},4984:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DateInput:()=>pt});var i,r,o,s=n(1635),a=n(6916),l=function(t,e){return!t&&!e||t&&e&&t.getTime()===e.getTime()},c=n(749),h=n(1775),u=n(2089),d=n(6813),p=function(t){var e=(0,c.J)(t.getFullYear(),t.getMonth()+1,1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return(0,d.f)(e,-1)},f=function(t,e){var n=(0,a.a)(t),i=(12+(n.getMonth()+e)%12)%12;return n.setMonth(n.getMonth()+e),function(t,e){return t.getMonth()!==e?p(f(t,-1)):t}((0,u.t)(n,t.getHours()),i)},g=function(){this.symbols="",this.partMap=[]},m="_",y=68,v="d",b="en",w="Delete",x="Backspace",_=" ",S=function(t){return new Array(Math.max(t,0)).fill("0").join("")},C=function(t){return t.replace(/^0*/,"")},k=function(t,e){return t[e.pattern[0]]=e.type,t},A=function(t){return null!=t},E=function(t){return A(t)&&"number"==typeof t&&!Number.isNaN(t)},T=function(t){return parseInt(t,10)},M=function(t,e,n){return Math.min(n,Math.max(e,t))},O=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object.assign.apply(Object,t)},I=(i="setFullYear",function(t,e){var n=(0,a.a)(t);return n[i](e),n}),D=function(t,e,n,i,r,o,s,a){return!(!t||t.getFullYear()!==e||t.getMonth()!==n||t.getDate()!==i||t.getHours()!==r||t.getMinutes()!==o||t.getSeconds()!==s||t.getMilliseconds()!==a)},F=function(t){return A(t)&&t.getTime&&E(t.getTime())},P=/d|M|H|h|m|s/,R=function(){function t(t){var e=t.intlService,n=t.formatPlaceholder,i=t.format,r=t.cycleTime,o=void 0!==r&&r,s=t.twoDigitYearMax,l=void 0===s?y:s,c=t.value,h=void 0===c?null:c,u=t.autoCorrectParts,d=void 0===u||u;if(this.year=!0,this.month=!0,this.date=!0,this.hours=!0,this.minutes=!0,this.seconds=!0,this.milliseconds=!0,this.dayperiod=!0,this.leadingZero=null,this.typedMonthPart="",this.knownParts="adHhmMsEyS",this.symbols={E:"E",H:"H",M:"M",a:"a",d:"d",h:"h",m:"m",s:"s",y:"y",S:"S"},this._value=this.getDefaultDate(),this.cycleTime=!1,this._partiallyInvalidDate={startDate:null,invalidDateParts:{E:{value:null,date:null,startDateOffset:0},H:{value:null,date:null,startDateOffset:0},M:{value:null,date:null,startDateOffset:0},a:{value:null,date:null,startDateOffset:0},d:{value:null,date:null,startDateOffset:0},h:{value:null,date:null,startDateOffset:0},m:{value:null,date:null,startDateOffset:0},s:{value:null,date:null,startDateOffset:0},y:{value:null,date:null,startDateOffset:0},S:{value:null,date:null,startDateOffset:0}}},this.setOptions({intlService:e,formatPlaceholder:n,format:i,cycleTime:o,twoDigitYearMax:l,value:h,autoCorrectParts:d}),h)this._value=(0,a.a)(h);else{this._value=this.getDefaultDate();for(var p=this.dateFormatString(this.value,this.format).symbols,f=0;f<p.length;f++)this.setExisting(p[f],!1)}}return Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){(!t||t instanceof Date)&&(this._value=t,this.resetInvalidDate())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"localeId",{get:function(){for(var t=b,e=Object.keys(this.intl.cldr),n=0;n<e.length;n++){var i=e[n],r=this.intl.cldr[i];if(r.name&&r.calendar&&r.numbers&&r.name!==b){t=r.name;break}}return t},enumerable:!0,configurable:!0}),t.prototype.setOptions=function(t){this.intl=t.intlService,this.formatPlaceholder=t.formatPlaceholder||"wide",this.format=t.format,this.cycleTime=t.cycleTime,this.monthNames=this.allFormattedMonths(this.localeId),this.dayPeriods=this.allDayPeriods(this.localeId),this.twoDigitYearMax=t.twoDigitYearMax,this.autoCorrectParts=t.autoCorrectParts},t.prototype.setValue=function(t){t?l(t,this._value)||(this._value=(0,a.a)(t),this.modifyExisting(!0)):(this._value=this.getDefaultDate(),this.modifyExisting(!1)),this.resetInvalidDate()},t.prototype.hasValue=function(){var t=this;return this.intl.splitDateFormat(this.format,this.localeId).reduce((function(e,n){return e||"literal"!==n.type&&"dayperiod"!==n.type&&t.getExisting(n.pattern[0])}),!1)},t.prototype.getValue=function(){for(var t=0;t<this.knownParts.length;t++)if(!this.getExisting(this.knownParts[t]))return null;return(0,a.a)(this.value)},t.prototype.createDefaultDate=function(){return(0,c.J)(2e3,0,31)},t.prototype.getDefaultDate=function(){return(0,h.p)(this.createDefaultDate())},t.prototype.getFormattedDate=function(t){return this.intl.formatDate(this.getValue(),t,this.localeId)},t.prototype.getTextAndFormat=function(t){void 0===t&&(t="");var e=t||this.format,n=this.intl.formatDate(this.value,e,this.localeId),i=this.dateFormatString(this.value,e);if(!this.autoCorrectParts&&this._partiallyInvalidDate.startDate){for(var r="",o=this.intl.formatDate(this.value,e,this.localeId),s=this.getFormattedInvalidDates(e),a=0;a<o.length;a++){var l=i.symbols[a];if("literal"===i.partMap[a].type)r+=n[a];else if(this.getInvalidDatePartValue(l)){var c=this.getPartsForSegment(i,a);if("M"===l){var h=(T(this.getInvalidDatePartValue(l))+1).toString();if(c.length>2)r+=s[l][a];else if(this.getInvalidDatePartValue(l))r+=S(c.length-h.length)+h,a+=c.length-1;else r+=s[l][a]}else if(this.getInvalidDatePartValue(l)){h=this.getInvalidDatePartValue(l).toString();r+=S(c.length-h.length)+h,a+=c.length-1}else r+=s[l][a]}else r+=n[a]}n=r}return this.merge(n,i)},t.prototype.getFormattedInvalidDates=function(t){var e=this;void 0===t&&(t="");var n=t||this.format,i={E:"",H:"",M:"",a:"",d:"",h:"",m:"",s:"",y:"",S:""};return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){var r=e.getInvalidDatePart(t).date;if(r){var o=e.intl.formatDate(r,n,e.localeId);i[t]=o}})),i},t.prototype.modifyExisting=function(t){for(var e=this.dateFormatString(this.value,this.format).symbols,n=0;n<e.length;n++)this.setExisting(e[n],t)},t.prototype.getExisting=function(t){switch(t){case"y":return this.year;case"M":case"L":return this.month;case"d":return this.date;case"E":return this.date&&this.month&&this.year;case"h":case"H":return this.hours;case"t":case"a":return this.dayperiod;case"m":return this.minutes;case"s":return this.seconds;case"S":return this.milliseconds;default:return!0}},t.prototype.setExisting=function(t,e){switch(t){case"y":this.year=e,!1===e&&this._value.setFullYear(2e3);break;case"M":this.month=e,!1===e&&this.autoCorrectParts&&this._value.setMonth(0);break;case"d":this.date=e;break;case"h":case"H":this.hours=e;break;case"t":case"a":this.dayperiod=e;break;case"m":this.minutes=e;break;case"s":this.seconds=e;break;case"S":this.milliseconds=e}this.getValue()&&this.resetInvalidDate()},t.prototype.modifyPart=function(t,e){if(A(t)&&A(e)&&0!==e){var n,i=(0,a.a)(this.value),r=!1,o="M"===t,s="d"===t||"E"===t,l=this.getExisting(t);if(this.autoCorrectParts||!s&&!o)switch(t){case"y":i.setFullYear(i.getFullYear()+e);break;case"M":i=f(this.value,e);break;case"d":case"E":i.setDate(i.getDate()+e);break;case"h":case"H":i.setHours(i.getHours()+e),r=!0;break;case"m":i.setMinutes(i.getMinutes()+e),r=!0;break;case"s":i.setSeconds(i.getSeconds()+e),r=!0;break;case"S":i.setMilliseconds(i.getMilliseconds()+e);break;case"a":i.setHours(i.getHours()+12*e),r=!0}else{var h=this._partiallyInvalidDate.invalidDateParts||{},u=this.getInvalidDatePartValue(t),d=h.y.value||i.getFullYear(),p=h.M.value||i.getMonth(),g=h.d.value||h.E.value||i.getDate(),m=h.h.value||h.H.value||i.getHours(),y=h.m.value||i.getMinutes(),v=h.s.value||i.getSeconds(),b=h.S.value||i.getMilliseconds();switch(t){case"y":d+=e;break;case"M":p+=e;break;case"d":case"E":g+=e}if("M"===t){if((p<0||p>11)&&l)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(!l){if(p<0)p=M(p%11+1+11,0,11);else{var w=A(u)?p:(e-1)%12;p=M(w,0,11)}p=M(p,0,11)}p=M(p,0,11)}else if("d"===t)if(l){if(g<=0||g>31)return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t)}else if(!l){if(A(u)&&(g<=0||g>31))return this.setExisting(t,!1),void this.resetInvalidDateSymbol(t);if(e<0){var x=A(u)?g:31-Math.abs(e%31)+1;g=M(x,1,31)}else{x=A(u)?g:e%31;g=M(x,1,31)}g=M(g,1,31)}var _=(0,c.J)(d,p,g,m,y,v,b),S=o||s?this.modifyDateSymbolWithValue(i,t,o?p:g):null,C=D(_,d,p,g,m,y,v,b);this.getValue()&&D(_,d,p,g,m,y,v,b)?(i=(0,a.a)(_),this.markDatePartsAsExisting()):o&&S?S.getMonth()===p?this.getExisting("d")?C?(i=(0,a.a)(_),this.resetInvalidDateSymbol(t)):(n=!0,this.setInvalidDatePart(t,{value:p,date:(0,a.a)(S),startDateOffset:e,startDate:(0,a.a)(this.value)}),this.setExisting(t,!1)):C?(this.resetInvalidDateSymbol(t),i=(0,a.a)(_),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(t),i=(0,a.a)(S)):(n=!0,this.setInvalidDatePart(t,{value:p,date:(0,a.a)(S),startDateOffset:e,startDate:(0,a.a)(this.value)}),this.setExisting(t,!1)):s&&S&&(S.getDate()===g?this.getExisting("M")?C?(i=(0,a.a)(_),this.resetInvalidDateSymbol(t)):(n=!0,this.setInvalidDatePart(t,{value:g,date:(0,a.a)(S),startDateOffset:e,startDate:(0,a.a)(this.value)}),this.setExisting(t,!1)):C?(i=(0,a.a)(_),this.resetInvalidDateSymbol(t),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(t),i=(0,a.a)(S)):(n=!0,this.setInvalidDatePart(t,{value:g,date:(0,a.a)(this.value),startDateOffset:e,startDate:(0,a.a)(this.value)}),this.setExisting(t,!1)))}this.shouldNormalizeCentury()&&(i=this.normalizeCentury(i)),r&&!this.cycleTime&&(i.getDate(),this._value.getDate()),n||(this.setExisting(t,!0),this._value=i,this.getValue()&&this.resetInvalidDate())}},t.prototype.parsePart=function(t){for(var e=t.symbol,n=t.currentChar,i=t.resetSegmentValue,r=t.cycleSegmentValue,o=t.rawTextValue,s=t.isDeleting,l=t.originalFormat,h=!r,u=this.dateFormatString(this.value,this.format),d=u.partMap.filter((function(t){return"literal"===t.type})).map((function(t,e){return{datePartIndex:e,type:t.type,pattern:t.pattern,literal:""}})),g=u.partMap.map((function(t){return{type:t.type,pattern:t.pattern,text:""}})),m=0;m<d.length;m++){for(var y=d[m],v=0;v<y.pattern.length;v++)d[m+v]&&(d[m+v].literal=y.pattern[v]);m+=y.pattern.length-1}for(m=0;m<g.length;m++){for(y=g[m],v=0;v<y.pattern.length;v++)g[m+v]&&(g[m+v].text=y.pattern[v]);m+=y.pattern.length-1}var b={value:null,switchToNext:!1,resetPart:h&&"M"===e&&u.partMap.filter((function(t){return"month"===t.type})).some((function(t){return t.pattern.length>2})),hasInvalidDatePart:!1};if(!n){if(!h)return this.resetLeadingZero(),this.setExisting(e,!1),this.resetInvalidDateSymbol(e),O(b,{value:null,switchToNext:!1});for(m=0;m<d.length;m++){var w=d[m].literal,x=o.startsWith(w),_=o.endsWith(w),k=o.indexOf(w+w)>=0;if(x||_||k)return this.resetLeadingZero(),this.setExisting(e,!1),this.resetInvalidDateSymbol(e),O(b,{value:null,switchToNext:!1})}}var A=this.intl.formatDate(this.value,this.format,this.localeId),M=u.symbols,I=!1,P="",R="",L="",N="",B="",j="",z="";for(m=0;m<g.length;m++)z+=g[m].text;var $=this.format===M||this.format===z||this.format===l||this.format.length===l.length,H=($?z:l).indexOf(e),U=($?z:l).lastIndexOf(e)-H+1,V=l.length-o.length;if(h||!h&&!this.autoCorrectParts){for(m=0;m<A.length;m++){if(M[m]===e)R+=this.getExisting(e)?A[m]:"0",V>0?L.length+V<U&&(L+=o[m]||""):L+=o[m]||"",I=!0;else I?(j+=A[m],B+=A[m]):(P+=A[m],N+=A[m])}if($&&(z.length<o.length?L+=n:!s&&(l.length,o.length),L.length>U))return O(b,{value:null,switchToNext:!1});if(!$||$&&!this.autoCorrectParts){R="",L="",P="",j="",I=!1;for(m=0;m<l.length;m++){if(l[m]===e)R+=this.getExisting(e)?A[m]||"":"0",V>0?L.length+V<U&&(L+=o[m]||""):L+=o[m]||"",I=!0;else I?j+=o[m-V]||"":P+=o[m]||""}l.length<o.length&&(L+=n)}}if(!h)if(this.autoCorrectParts){R="",L="",P="",j="",I=!1;for(m=0;m<A.length;m++){if(M[m]===e)R+=this.getExisting(e)?A[m]:"0",I=!0;else I?j+=A[m]:P+=A[m]}}else R=i?L:R;var W=null,q=this.matchMonth(n),K=this.matchDayPeriod(n,e),X="0"===n,G=this.leadingZero||{};X?("0"===L&&(L=R),0!==T(i?n:(h?L:R)+n)||this.isAbbrMonth(u.partMap,e)||this.incrementLeadingZero(e)):this.resetLeadingZero();var Y=this.partPattern(u.partMap,e),J=Y?Y.pattern:null,Z=this.patternLength(J)||J.length;if(h&&s&&!L)return this.setExisting(e,!1),O(b,{value:null,switchToNext:!1});var Q=R.length-3,tt=!0,et=h?L:R;for(m=Math.max(0,Q);m<=R.length&&tt;m++){et=i?n:h?L:R.substring(m)+n,!h&&this.autoCorrectParts||(tt=!1,et=C(et),et=S(Z-et.length)+et);var nt=parseInt(et,10),it=P+et+j;W=this.intl.parseDate(it,this.format,this.localeId);var rt=!1;h&&!F(W)&&this.autoCorrectParts&&(W=this.intl.parseDate(N+et+B,this.format,this.localeId),rt=!0);var ot=!isNaN(parseInt(n,10))||h&&s&&""===n;if(!W&&!isNaN(nt)&&ot&&this.autoCorrectParts){if("M"===e&&!q){var st=nt-1;st>-1&&st<12&&((W=(0,a.a)(this.value)).setMonth(st),W.getMonth()!==st&&(W=p(f(W,-1))))}"y"===e&&(W=(0,c.J)(parseInt(et,10),this.month?this.value.getMonth():0,this.date?this.value.getDate():1,this.hours?this.value.getHours():0,this.minutes?this.value.getMinutes():0,this.seconds?this.value.getSeconds():0,this.milliseconds?this.value.getMilliseconds():0),(h&&F(W)||!h&&W)&&this.date&&W.getDate()!==this.value.getDate()&&(W=p(f(W,-1))))}if(h&&F(W)||!h&&W){var at=this.isPeekDateOverflowingDatePart({useBasePrefixAndSuffix:rt,middle:et,patternValue:J,basePrefix:N,baseSuffix:B,prefix:P,suffix:j,symbol:e,patternLength:Z,leadingZero:G}),lt=at.switchToNext;return this.shouldNormalizeCentury()&&(W=this.normalizeCentury(W)),this._value=W,this.setExisting(e,!0),this.resetInvalidDateSymbol(e),this.autoCorrectParts||("M"===e?this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d")):"d"===e&&this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M")),this.hasInvalidDatePart()||(this.markDatePartsAsExisting(),at.peekedDate||!at.switchToNext||this.autoCorrectParts||"M"===e||"d"===e&&30===at.parsedPeekedValue&&1===this.value.getMonth()&&(lt=!1))),O(b,{value:this.value,switchToNext:lt})}}if(q&&(W=this.intl.parseDate(P+q+j,this.format,this.localeId)))return this._value=W,this.setExisting(e,!0),O(b,{value:this.value,switchToNext:!1});if(K&&(W=this.intl.parseDate(P+K+j,this.format)||this.intl.parseDate(N+K+B,this.format)))return this._value=W,this.setExisting(e,!0),O(b,{value:this.value,switchToNext:!0});if(X&&this.setExisting(e,!1),!this.autoCorrectParts){var ct=void 0,ht=h?L:et,ut=T(ht);if(E(ut)){if("d"===e&&(ut<=0||ut>31)||"M"===e&&(ut<=0||ut>11)){if(h)return O(b,{value:null,switchToNext:!1});ut=T(ht=n)}ct="M"===e?ut-1:ut;var dt="M"===e,pt="d"===e,ft=(0,a.a)(this._value),gt=this._partiallyInvalidDate.invalidDateParts||{},mt=gt.y.value||ft.getFullYear(),yt=dt?ct:gt.M.value||ft.getMonth(),vt=pt?ct:gt.d.value||gt.E.value||ft.getDate(),bt=gt.h.value||gt.H.value||ft.getHours(),wt=gt.m.value||ft.getMinutes(),xt=gt.s.value||ft.getSeconds(),_t=gt.S.value||ft.getMilliseconds(),St=(0,c.J)(mt,yt,vt,bt,wt,xt,_t),Ct=D(St,mt,yt,vt,bt,wt,xt,_t),kt=dt||pt?this.modifyDateSymbolWithValue(ft,e,dt?yt:vt):null,At=!1;if(dt&&kt?kt.getMonth()===yt?this.getExisting("d")?Ct?(ft=(0,a.a)(St),this.resetInvalidDateSymbol(e)):(At=!0,this.setInvalidDatePart(e,{value:yt,date:(0,a.a)(kt),startDate:(0,a.a)(this.value)}),this.setExisting(e,!1)):Ct?(this.resetInvalidDateSymbol(e),ft=(0,a.a)(St),this.getExisting("M")&&this.getExisting("y")&&(this.setExisting("d",!0),this.resetInvalidDateSymbol("d"))):(this.resetInvalidDateSymbol(e),ft=(0,a.a)(kt)):(At=!0,this.setInvalidDatePart(e,{value:yt,date:(0,a.a)(kt),startDate:(0,a.a)(this.value)}),this.setExisting(e,!1)):pt&&kt&&(kt.getDate()===vt?this.getExisting("M")?Ct?(ft=(0,a.a)(St),this.resetInvalidDateSymbol(e)):(At=!0,this.setInvalidDatePart(e,{value:vt,date:(0,a.a)(kt),startDate:(0,a.a)(this.value)}),this.setExisting(e,!1)):Ct?(ft=(0,a.a)(St),this.resetInvalidDateSymbol(e),this.getExisting("d")&&this.getExisting("y")&&(this.setExisting("M",!0),this.resetInvalidDateSymbol("M"))):(this.resetInvalidDateSymbol(e),ft=(0,a.a)(kt)):(At=!0,this.setInvalidDatePart(e,{value:vt,date:(0,a.a)(this.value),startDate:(0,a.a)(this.value)}),this.setExisting(e,!1))),!At){if(this.setExisting(e,!0),h&&!F(W)){var Et=this.intl.parseDate(N+et+B,this.format,this.localeId);F(Et)&&(this._value=Et)}else this._value=ft;this.getValue()&&this.resetInvalidDate()}lt=!1;if("M"===e)lt=ut>=2||ht.length>=2;else if($)lt=this.isPeekDateOverflowingDatePart({useBasePrefixAndSuffix:!this.autoCorrectParts,middle:et,patternValue:J,basePrefix:N,baseSuffix:B,prefix:P,suffix:j,symbol:e,patternLength:Z,leadingZero:G}).switchToNext;else lt=ht.length>U;return O(b,{value:null,switchToNext:lt,hasInvalidDatePart:At})}}return O(b,{value:null,switchToNext:!1})},t.prototype.symbolMap=function(t){return this.intl.splitDateFormat(this.format,this.localeId).reduce(k,{})[t]},t.prototype.resetLeadingZero=function(){var t=null!==this.leadingZero;return this.setLeadingZero(null),t},t.prototype.setLeadingZero=function(t){this.leadingZero=t},t.prototype.getLeadingZero=function(){return this.leadingZero||{}},t.prototype.normalizeCentury=function(t){if(!A(t))return t;var e=function(t){return!A(t)||isNaN(t.getTime())?0:Number(t.getFullYear().toString().slice(-2))}(t),n=this.getNormalizedCenturyBase(e);return I(t,n+e)},t.prototype.incrementLeadingZero=function(t){var e=this.leadingZero||{};e[t]=(e[t]||0)+1,this.leadingZero=e},t.prototype.isAbbrMonth=function(t,e){var n=this.partPattern(t,e);return"month"===n.type&&n.names},t.prototype.partPattern=function(t,e){return t.filter((function(t){return-1!==t.pattern.indexOf(e)}))[0]},t.prototype.peek=function(t,e){var n=t.replace(/^0*/,"")+"0";return S(e.length-n.length)+n},t.prototype.matchMonth=function(t){if(this.typedMonthPart+=t.toLowerCase(),0===this.monthNames.length)return"";for(;this.typedMonthPart.length>0;){for(var e=0;e<this.monthNames.length;e++)if(0===this.monthNames[e].toLowerCase().indexOf(this.typedMonthPart))return this.monthNames[e];var n=parseInt(this.typedMonthPart,10);if(n>=1&&n<=12&&n.toString()===this.typedMonthPart)return this.monthNames[n-1];this.typedMonthPart=this.typedMonthPart.substring(1,this.typedMonthPart.length)}return""},t.prototype.matchDayPeriod=function(t,e){var n=t.toLowerCase();if("a"===e&&this.dayPeriods){if(this.dayPeriods.am.toLowerCase().startsWith(n))return this.dayPeriods.am;if(this.dayPeriods.pm.toLowerCase().startsWith(n))return this.dayPeriods.pm}return""},t.prototype.allFormattedMonths=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format,this.localeId),n=0;n<e.length;n++)if("month"===e[n].type&&e[n].names)return this.intl.dateFormatNames(t,e[n].names);return[]},t.prototype.allDayPeriods=function(t){void 0===t&&(t="en");for(var e=this.intl.splitDateFormat(this.format),n=0;n<e.length;n++)if("dayperiod"===e[n].type&&e[n].names)return this.intl.dateFormatNames(t,e[n].names);return null},t.prototype.patternLength=function(t){return"y"===t[0]?4:P.test(t)?2:0},t.prototype.dateFormatString=function(t,e){for(var n=this.intl.splitDateFormat(e,this.localeId),i=[],r=[],o=0;o<n.length;o++)for(var s=this.intl.formatDate(t,{pattern:n[o].pattern},this.localeId).length;s>0;)i.push(this.symbols[n[o].pattern[0]]||m),r.push(n[o]),s--;var a=new g;return a.symbols=i.join(""),a.partMap=r,a},t.prototype.merge=function(t,e){for(var n="",i="",r=e.symbols,o=!1,s=0,a=this.getFormattedInvalidDates(r),l=r.length-1;l>=0;l--){var c=this.getPartsForSegment(e,l);if(-1===this.knownParts.indexOf(r[l])||this.getExisting(r[l]))this.autoCorrectParts?n=t[l]+n:t.length!==r.length?o?n=t[l]+n:s>0?(n=t[l]+n,--s<=0&&(o=!0)):n=(t[l+t.length-r.length]||"")+n:n=t[l]+n,i=r[l]+i;else{var h=r[l],u=0;if(this.autoCorrectParts||!this.autoCorrectParts&&!this.getInvalidDatePartValue(h)){for(;l>=0&&h===r[l];)l--;l++}if(this.leadingZero&&this.leadingZero[h])n="0"+n;else if(!this.autoCorrectParts&&this.getInvalidDatePartValue(h)){var d=this.getInvalidDatePartValue(h).toString();if("M"===h)if(d=(T(this.getInvalidDatePartValue(h))+1).toString(),c.length>2)n=a[h][l]+n;else d=(T(this.getInvalidDatePartValue(h))+1).toString(),n=S(c.length-d.length)+d+n,u=c.length-1,s=d.length-c.length;else n=S(c.length-d.length)+d+n,u=c.length-1,s=d.length-c.length}else n=this.dateFieldName(e.partMap[l])+n;for(;i.length<n.length;)i=r[l]+i;0!==u&&(l=l-u+(t.length-r.length))}}return{text:n,format:i}},t.prototype.dateFieldName=function(t){var e=this.formatPlaceholder||"wide";return e[t.type]?e[t.type]:"formatPattern"===e?t.pattern:this.intl.dateFieldName(Object.assign(t,{nameType:e}))},t.prototype.getNormalizedCenturyBase=function(t){return t>this.twoDigitYearMax?1900:2e3},t.prototype.shouldNormalizeCentury=function(){return this.intl.splitDateFormat(this.format).some((function(t){return"yy"===t.pattern}))},t.prototype.resetInvalidDate=function(){var t=this;this._partiallyInvalidDate.startDate=null,Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(e){t.resetInvalidDatePart(e)}))},t.prototype.resetInvalidDateSymbol=function(t){var e=this;this.resetInvalidDatePart(t);var n=!0;Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(t){e._partiallyInvalidDate.invalidDateParts[t]&&A(e._partiallyInvalidDate.invalidDateParts[t].value)&&(n=!1)})),n&&this.resetInvalidDate()},t.prototype.resetInvalidDatePart=function(t){this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t]={value:null,date:null,startDateOffset:0})},t.prototype.getInvalidDatePart=function(t){return this._partiallyInvalidDate.invalidDateParts[t]||{}},t.prototype.getInvalidDatePartValue=function(t){return(this._partiallyInvalidDate.invalidDateParts[t]||{}).value},t.prototype.setInvalidDatePart=function(t,e){var n=e.value,i=void 0===n?null:n,r=e.date,o=void 0===r?null:r,s=e.startDateOffset,a=void 0===s?0:s,l=e.startDate,c=void 0===l?null:l;this._partiallyInvalidDate.invalidDateParts[t]&&(this._partiallyInvalidDate.invalidDateParts[t].value=i,this._partiallyInvalidDate.invalidDateParts[t].date=o,this._partiallyInvalidDate.invalidDateParts[t].startDateOffset=a,this._partiallyInvalidDate.startDate=c)},t.prototype.hasInvalidDatePart=function(){var t=this,e=!1;return Object.keys(this._partiallyInvalidDate.invalidDateParts).forEach((function(n){t._partiallyInvalidDate.invalidDateParts[n]&&A(t._partiallyInvalidDate.invalidDateParts[n].value)&&(e=!0)})),e},t.prototype.modifyDateSymbolWithOffset=function(t,e,n){var i=(0,a.a)(t),r=!1;switch(e){case"y":i.setFullYear(i.getFullYear()+n);break;case"M":i=f(this.value,n);break;case"d":case"E":i.setDate(i.getDate()+n);break;case"h":case"H":i.setHours(i.getHours()+n),r=!0;break;case"m":i.setMinutes(i.getMinutes()+n),r=!0;break;case"s":i.setSeconds(i.getSeconds()+n),r=!0;break;case"S":i.setMilliseconds(i.getMilliseconds()+n);break;case"a":i.setHours(i.getHours()+12*n),r=!0}return{date:i,timeModified:r}},t.prototype.modifyDateSymbolWithValue=function(t,e,n){var i=(0,a.a)(t);switch(e){case"y":i.setFullYear(n);break;case"M":i=f(t,n-t.getMonth());break;case"d":case"E":i.setDate(n);break;case"h":case"H":case"a":i.setHours(n);break;case"m":i.setMinutes(n);break;case"s":i.setSeconds(n);break;case"S":i.setMilliseconds(n)}return i},t.prototype.markDatePartsAsExisting=function(){this.modifyExisting(!0)},t.prototype.getPartsForSegment=function(t,e){for(var n=t.partMap[e],i=[],r=e;r<t.partMap.length;r++){var o=t.partMap[r];if(n.type!==o.type||n.pattern!==o.pattern)break;i.push(o)}for(r=e-1;r>=0;r--){o=t.partMap[r];if(n.type!==o.type||n.pattern!==o.pattern)break;i.unshift(o)}return i},t.prototype.isPeekDateOverflowingDatePart=function(t){var e=t.useBasePrefixAndSuffix,n=t.middle,i=t.patternValue,r=t.basePrefix,o=t.baseSuffix,s=t.prefix,a=t.suffix,l=t.symbol,c=t.patternLength,h=t.leadingZero,u=this.peek(n,i),d=e?""+r+u+o:""+s+u+a,p=this.intl.parseDate(d,this.format,this.localeId),f=((this.leadingZero||{})[l]||0)+C(n).length>=c;return{peekedDate:p,peekedDateString:d,peekedValue:u,parsedPeekedValue:T(u),switchToNext:null===p||(h[l]?i.length<=n.length:f)}},t}(),L=8,N=46,B=9,j=13,z=37,$=38,H=39,U=40,V=35,W=36,q={events:{}},K=function(){function t(t){this.options=O({},q,t)}return t.prototype.destroy=function(){},t.prototype.trigger=function(t,e){void 0===e&&(e={});var n={defaultPrevented:!1,preventDefault:function(){n.defaultPrevented=!0}};return"function"==typeof this.options.events[t]&&(this.options.events[t](O(n,e,{sender:this})),n.defaultPrevented)},t}();!function(t){t.None="none",t.Caret="caret",t.Selection="selection"}(r||(r={}));var X="dragStart",G="drop",Y="touchstart",J="mousedown",Z="mouseup",Q="click",tt="input",et="keydown",nt="focus",it="blur",rt="paste",ot="DOMMouseScroll",st="mousewheel",at="valueChange",lt="inputEnd",ct="blurEnd",ht="focusEnd",ut="change",dt={format:"d",hasPlaceholder:!1,placeholder:null,cycleTime:!0,locale:null,steps:{millisecond:1,second:1,minute:1,hour:1,day:1,month:1,year:1},formatPlaceholder:null,events:(o={},o[at]=null,o[tt]=null,o[lt]=null,o[nt]=null,o[ht]=null,o[it]=null,o[ct]=null,o[et]=null,o[st]=null,o[ut]=null,o),selectNearestSegmentOnFocus:!1,selectPreviousSegmentOnBackspace:!1,enableMouseWheel:!1,allowCaretMode:!1,autoSwitchParts:!0,autoSwitchKeys:[],twoDigitYearMax:y,autoCorrectParts:!0,autoFill:!1},pt=function(t){function e(e,n){var i=t.call(this,n)||this;return i.dateObject=null,i.currentText="",i.currentFormat="",i.interactionMode=r.None,i.previousElementSelection={start:0,end:0},i.init(e,n),i}return s.__extends(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.dateObject&&this.dateObject.getValue()},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){var n=F(this.options.value)?(0,a.a)(this.options.value):new Date(e.formattedValue);F(n)||(n=null),this.element=t,this.options=O({},dt,e,{steps:s.__assign({},dt.steps,e.steps)}),this.intl=this.options.intlService,this.dateObject=this.createDateObject(),this.dateObject.setValue(n),this.setTextAndFormat(),this.bindEvents(),this.resetSegmentValue=!0,this.interactionMode=r.None,this.forceUpdate()},e.prototype.destroy=function(){this.unbindEvents(),this.dateObject=null,t.prototype.destroy.call(this)},e.prototype.bindEvents=function(){this.onElementDragStart=this.onElementDragStart.bind(this),this.element.addEventListener(X,this.onElementDragStart),this.onElementDrop=this.onElementDrop.bind(this),this.element.addEventListener(G,this.onElementDrop),this.onElementClick=this.onElementClick.bind(this),this.element.addEventListener(Q,this.onElementClick),this.onElementMouseDown=this.onElementMouseDown.bind(this),this.element.addEventListener(J,this.onElementMouseDown),this.element.addEventListener(Y,this.onElementMouseDown),this.onElementMouseUp=this.onElementMouseUp.bind(this),this.element.addEventListener(Z,this.onElementMouseUp),this.onElementInput=this.onElementInput.bind(this),this.element.addEventListener(tt,this.onElementInput),this.onElementKeyDown=this.onElementKeyDown.bind(this),this.element.addEventListener(et,this.onElementKeyDown),this.onElementFocus=this.onElementFocus.bind(this),this.element.addEventListener(nt,this.onElementFocus),this.onElementBlur=this.onElementBlur.bind(this),this.element.addEventListener(it,this.onElementBlur),this.onElementChange=this.onElementChange.bind(this),this.element.addEventListener(ut,this.onElementChange),this.onElementPaste=this.onElementPaste.bind(this),this.element.addEventListener(rt,this.onElementPaste),this.onElementMouseWheel=this.onElementMouseWheel.bind(this),this.element.addEventListener(ot,this.onElementMouseWheel),this.element.addEventListener(st,this.onElementMouseWheel)},e.prototype.unbindEvents=function(){this.element.removeEventListener(X,this.onElementDragStart),this.element.removeEventListener(G,this.onElementDrop),this.element.removeEventListener(Y,this.onElementMouseDown),this.element.removeEventListener(J,this.onElementMouseDown),this.element.removeEventListener(Z,this.onElementMouseUp),this.element.removeEventListener(Q,this.onElementClick),this.element.removeEventListener(tt,this.onElementInput),this.element.removeEventListener(et,this.onElementKeyDown),this.element.removeEventListener(nt,this.onElementFocus),this.element.removeEventListener(it,this.onElementBlur),this.element.removeEventListener(ut,this.onElementChange),this.element.removeEventListener(rt,this.onElementPaste),this.element.removeEventListener(ot,this.onElementMouseWheel),this.element.removeEventListener(st,this.onElementMouseWheel)},e.prototype.setOptions=function(t,e){void 0===e&&(e=!1),this.options=O({},this.options,t,{steps:s.__assign({},dt.steps,t.steps)}),this.setDateObjectOptions(),e&&(this.unbindEvents(),this.init(this.element,this.options))},e.prototype.setDateObjectOptions=function(){if(this.dateObject){var t=this.getDateObjectOptions();this.dateObject.setOptions(t)}},e.prototype.resetLocale=function(){this.unbindEvents(),this.init(this.element,this.options)},e.prototype.isInCaretMode=function(){return this.interactionMode===r.Caret},e.prototype.focus=function(){this.element.focus(),this.options.selectNearestSegmentOnFocus&&this.selectNearestSegment(0)},e.prototype.onElementDragStart=function(t){t.preventDefault()},e.prototype.onElementDrop=function(t){t.preventDefault()},e.prototype.onElementMouseDown=function(){this.mouseDownStarted=!0,this.focusedPriorToMouseDown=this.isActive},e.prototype.onElementMouseUp=function(t){this.mouseDownStarted=!1,t.preventDefault()},e.prototype.onElementClick=function(t){this.mouseDownStarted=!1,this.switchedPartOnPreviousKeyAction=!1;var e=this.selection;if(this.isInCaretMode()&&this.forceUpdate(),3===t.detail);else if(this.isActive&&this.options.selectNearestSegmentOnFocus){var n=this.element.selectionStart!==this.element.selectionEnd,i=A(this.options.placeholder)&&!this.dateObject.hasValue()&&!this.focusedPriorToMouseDown,r=!n&&i?0:this.caret()[0];this.selectNearestSegment(r)}else this.setSelection(this.selectionByIndex(e.start))},e.prototype.onElementInput=function(t){this.triggerInput({event:t});var e=this.elementValue;if(this.element&&this.dateObject){var n=this.switchedPartOnPreviousKeyAction;if(this.isPasteInProgress)return this.options.allowCaretMode&&(this.resetSegmentValue=!1),this.updateOnPaste(t),void(this.isPasteInProgress=!1);var i=this.keyDownEvent||{},o=i.keyCode===L||i.key===x,s=i.keyCode===N||i.key===w,a=this.interactionMode;!this.options.allowCaretMode||a===r.Caret||s||o||(this.resetSegmentValue=!0),this.options.allowCaretMode?this.interactionMode=r.Caret:this.interactionMode=r.Selection;var c=this.isInCaretMode();if(c&&this.keyDownEvent.key===_)this.restorePreviousInputEventState();else{var h=this.dateObject&&this.dateObject.getValue(),u=this.dateObject?this.dateObject.value:null,d=this.dateObject.getTextAndFormat(),p=d.text,f=d.format;this.currentFormat=f;var g=function(t){var e=t.oldText,n=t.newText,i=t.formatPattern,r=t.selectionStart,o=t.isInCaretMode,s=t.keyEvent,a=r+e.length-n.length,l=e[a],c=e.substring(0,a),h=n.substring(0,r),u=[];if(c===h&&r>0)return u.push([i[r-1],h[r-1]]),u;if(0===c.indexOf(h)&&o&&(s.key===w||s.key===x)||0===c.indexOf(h)&&!o&&(0===h.length||i[h.length-1]!==i[h.length])){var d="";o||1!==h.length||u.push([i[0],h[0]]);for(var p=h.length;p<c.length;p++)i[p]!==d&&i[p]!==m&&(d=i[p],u.push([d,""]));return u}if(o&&(0===h.indexOf(c)||i[r-1]===m)||!o&&(0===h.indexOf(c)||i[r-1]===m)){var f=i[0];for(p=Math.max(0,c.length-1);p<i.length;p++)if(i[p]!==m){f=i[p];break}return[[f,h[r-1]]]}return" "===h[h.length-1]||h[h.length-1]===l&&"_"===i[a]?[[i[r-1],m]]:[[i[r-1],h[r-1]]]}({oldText:c&&(o||s||a===r.Caret)?this.previousElementValue:p,newText:this.elementValue,formatPattern:this.currentFormat,selectionStart:this.selection.start,isInCaretMode:c,keyEvent:this.keyDownEvent});if(g&&g.length&&g[0]&&g[0][1]!==m&&(this.switchedPartOnPreviousKeyAction=!1),!c||g&&0!==g.length){if(c&&1===g.length){if(!g[0]||!g[0][0])return void this.restorePreviousInputEventState();if(c&&g[0]&&(g[0][0]===m||g[0][1]===m))return void this.restorePreviousInputEventState()}var y=1===g.length&&g[0][1]===m,v=[],b=!1,S=null;if(!y)for(var C=0;C<g.length;C++){var k=this.dateObject.parsePart({symbol:g[C][0],currentChar:g[C][1],resetSegmentValue:this.resetSegmentValue,cycleSegmentValue:!this.isInCaretMode(),rawTextValue:this.element.value,isDeleting:o||s,originalFormat:this.currentFormat});v.push(k),k.value||(S={type:"parse"}),b=k.switchToNext}this.options.autoSwitchParts||(b=!1),this.resetSegmentValue=!1;var E,T=this.options.format===this.currentFormat||A(this.options.format)&&this.options.format.length>1,M=v[v.length-1],O=M&&!A(M.value),I=c&&(o||s)&&O,D=!!M&&M.resetPart,F=this.dateObject.getValue(),P=!l(h,F),R=this.dateObject.value,B=this.selection;if(c){var j=g&&g.length>0?g[0][0]:null,z=this.dateObject.getLeadingZero()[j];g.length&&g[0][0]!==m?b?(this.forceUpdateWithSelection(),this.switchDateSegment(1)):D?(E=this.currentFormat[B.start])?(this.forceUpdate(),this.setSelection(this.selectionBySymbol(E))):this.restorePreviousInputEventState():I?(this.forceUpdate(),g.length&&g[0][0]!==m&&this.setSelection(this.selectionBySymbol(g[0][0]))):O?"0"===t.data&&z||(A(h)&&!A(F)?this.restorePreviousInputEventState():!A(h)&&A(F)?this.forceUpdateWithSelection():A(h)&&A(F)?P?this.forceUpdateWithSelection():this.restorePreviousInputEventState():A(h)||A(F)?u!==R||this.restorePreviousInputEventState():this.forceUpdateWithSelection()):O||T||this.forceUpdateWithSelection():(this.options.autoSwitchParts||g[0][1]!==m)&&this.setSelection(this.selectionBySymbol(g[0][0]))}else c||(this.forceUpdate(),g.length&&g[0][0]!==m&&this.setSelection(this.selectionBySymbol(g[0][0])),this.options.autoSwitchParts?y?(this.resetSegmentValue=!0,n||this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0):b&&(this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0):M&&M.switchToNext?this.resetSegmentValue=!0:y&&(this.resetSegmentValue=!0,n||this.switchDateSegment(1),this.switchedPartOnPreviousKeyAction=!0),o&&this.options.selectPreviousSegmentOnBackspace&&this.switchDateSegment(-1));this.tryTriggerValueChange({oldValue:h,event:t}),this.triggerInputEnd({event:t,error:S,oldElementValue:e,newElementValue:this.elementValue}),c&&this.setTextAndFormat()}else this.restorePreviousInputEventState()}}},e.prototype.onElementFocus=function(t){this.triggerFocus({event:t})||(this.isActive=!0,this.interactionMode=r.None,this.switchedPartOnPreviousKeyAction=!1,this.refreshElementValue(),this.mouseDownStarted||this.caret(0,this.elementValue.length),this.mouseDownStarted=!1,this.triggerFocusEnd({event:t}))},e.prototype.onElementBlur=function(t){this.resetSegmentValue=!0,this.isActive=!1,this.triggerBlur({event:t})||(this.options.autoFill&&this.autoFill(),this.interactionMode=r.None,this.switchedPartOnPreviousKeyAction=!1,this.refreshElementValue(),this.triggerBlurEnd({event:t}))},e.prototype.onElementChange=function(t){this.triggerChange({event:t})},e.prototype.onElementKeyDown=function(t){if(!this.triggerKeyDown({event:t})){var e=this.selection,n=e.start,i=e.end,r=t;if(this.keyDownEvent=t,this.previousElementValue=this.element.value,this.previousElementSelection={start:n,end:i},this.keyEventMatchesAutoSwitchKeys(t)){var o=t.keyCode===B;if(!o)return t.preventDefault(),void this.switchDateSegment(1);var s=this.selection,a=s.start,l=s.end;if(t.shiftKey&&o?this.switchDateSegment(-1):this.switchDateSegment(1),a!==this.selection.start||l!==this.selection.end)return void t.preventDefault()}var c=this.currentFormat[this.selection.start],h=this.getStepFromSymbol(c),u=!1,d=this.elementValue;if(!(t.altKey||t.ctrlKey||t.metaKey||t.keyCode===B)){switch(t.keyCode){case z:this.switchDateSegment(-1),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case $:this.modifyDateSegmentValue(h,c,r),d!==this.elementValue&&this.triggerInputEnd({event:t,error:null,newElementValue:this.elementValue,oldElementValue:d}),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case H:this.switchDateSegment(1),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case U:this.modifyDateSegmentValue(-h,c,r),d!==this.elementValue&&this.triggerInputEnd({event:t,error:null,newElementValue:this.elementValue,oldElementValue:d}),u=!0,this.switchedPartOnPreviousKeyAction=!1;break;case j:break;case W:this.selectNearestSegment(0),u=!0,this.switchedPartOnPreviousKeyAction=!1,this.resetSegmentValue=!0;break;case V:this.selectNearestSegment(this.elementValue.length),u=!0,this.switchedPartOnPreviousKeyAction=!1,this.resetSegmentValue=!0;break;default:return}u&&t.preventDefault()}}},e.prototype.onElementPaste=function(){this.isPasteInProgress=!0},e.prototype.onElementMouseWheel=function(t){var e=this.elementValue;if(this.options.enableMouseWheel&&!this.triggerMouseWheel({event:t})&&this.isActive){var n=t;n.shiftKey?this.switchDateSegment((n.wheelDelta||-n.detail)>0?-1:1):this.modifyDateSegmentValue((n.wheelDelta||-n.detail)>0?1:-1),n.returnValue=!1,n.preventDefault&&n.preventDefault(),n.stopPropagation&&n.stopPropagation(),e!==this.elementValue&&this.triggerInputEnd({event:t,error:null,newElementValue:this.elementValue,oldElementValue:e})}},e.prototype.updateOnPaste=function(t){var e=this.intl.parseDate(this.elementValue,this.inputFormat)||this.value;A(e)&&this.dateObject.shouldNormalizeCentury()&&(e=this.dateObject.normalizeCentury(e));var n=this.dateObject&&this.dateObject.getValue();this.writeValue(e),this.tryTriggerValueChange({oldValue:n,event:t})},Object.defineProperty(e.prototype,"elementValue",{get:function(){return(this.element||{}).value||""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.inputFormat:v},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayFormat",{get:function(){return this.options.format?"string"==typeof this.options.format?this.options.format:this.options.format.displayFormat:v},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){var t={start:0,end:0};return null!==this.element&&void 0!==this.element.selectionStart&&(t={start:this.element.selectionStart,end:this.element.selectionEnd}),t},enumerable:!0,configurable:!0}),e.prototype.setSelection=function(t){this.element&&document.activeElement===this.element&&(this.element.setSelectionRange(t.start,t.end),t.start!==t.end&&(this.interactionMode=r.Selection))},e.prototype.selectionBySymbol=function(t){for(var e=-1,n=0,i=0;i<this.currentFormat.length;i++)this.currentFormat[i]===t&&(n=i+1,-1===e&&(e=i));return e<0&&(e=0),this.options.autoCorrectParts||this.currentFormat.length===this.currentText.length||(this.currentFormat.length<this.currentText.length?n+=this.currentText.length-this.currentFormat.length:n=Math.max(0,n-(this.currentFormat.length-this.currentText.length))),{start:e,end:n}},e.prototype.selectionByIndex=function(t){for(var e={start:t,end:t},n=t,i=t-1;n<this.currentFormat.length||i>=0;n++,i--){if(n<this.currentFormat.length&&this.currentFormat[n]!==m){e=this.selectionBySymbol(this.currentFormat[n]);break}if(i>=0&&this.currentFormat[i]!==m){e=this.selectionBySymbol(this.currentFormat[i]);break}}return e},e.prototype.switchDateSegment=function(t){var e=this.selection;if(this.isInCaretMode()){var n=e.start,i=this.currentFormat[n-1],o="",s="";if(t<0){for(var a=n+t;a>=0;a--)if((s=this.currentFormat[a])!==m&&s!==i){n=a,o=s;break}}else for(a=n+t;a<this.currentFormat.length;a++)if((s=this.currentFormat[a])!==m&&s!==i){n=a,o=s;break}if(o)return this.forceUpdate(),this.setSelection(this.selectionBySymbol(o)),void(this.interactionMode=r.Selection)}this.interactionMode=r.None;var l=this.selection,c=l.start,h=l.end;if(c<h&&this.currentFormat[c]!==this.currentFormat[h-1])return this.setSelection(this.selectionByIndex(t>0?c:h-1)),this.resetSegmentValue=!0,void(this.interactionMode=r.None);for(var u=this.currentFormat[c],d=c+t;d>0&&d<this.currentFormat.length&&(this.currentFormat[d]===u||this.currentFormat[d]===m);)d+=t;if(this.currentFormat[d]!==m){for(var p=d;p>=0&&p<this.currentFormat.length&&this.currentFormat[p]===this.currentFormat[d];)p+=t;d>p&&(p+1!==c||d+1!==h)?(this.setSelection({start:p+1,end:d+1}),this.resetSegmentValue=!0):d<p&&(d!==c||p!==h)&&(this.setSelection({start:d,end:p}),this.resetSegmentValue=!0),this.interactionMode=r.None}},e.prototype.modifyDateSegmentValue=function(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n={}),this.dateObject&&!this.options.readonly){var i,r,o,s=this.value,a=1,l=this.caret();if("S"===(e=e||this.currentFormat[l[0]])&&(!this.options.steps.millisecond||1===this.options.steps.millisecond)){var c=(r=this.inputFormat,(o=r&&r.match(/S+(\1)/))?o[0].length:0);i=c,a=Math.pow(10,3-i)}this.dateObject.modifyPart(e,a*t),this.tryTriggerValueChange({oldValue:s,event:n}),this.forceUpdate(),this.setSelection(this.selectionBySymbol(e))}},e.prototype.tryTriggerValueChange=function(t){if(void 0===t&&(t={oldValue:null,event:{}}),!l(this.value,t.oldValue))return this.triggerValueChange(t)},e.prototype.triggerValueChange=function(t){return void 0===t&&(t={oldValue:null,event:{}}),this.trigger(at,O(t,{value:this.value}))},e.prototype.triggerInput=function(t){return void 0===t&&(t={event:{}}),this.trigger(tt,O(t,{value:this.value}))},e.prototype.triggerInputEnd=function(t){return void 0===t&&(t={event:{},error:null,oldElementValue:"",newElementValue:""}),this.trigger(lt,O(t,{value:this.value}))},e.prototype.triggerFocus=function(t){return void 0===t&&(t={event:{}}),this.trigger(nt,O({},t))},e.prototype.triggerFocusEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(ht,O({},t))},e.prototype.triggerBlur=function(t){return void 0===t&&(t={event:{}}),this.trigger(it,O({},t))},e.prototype.triggerBlurEnd=function(t){return void 0===t&&(t={event:{}}),this.trigger(ct,O({},t))},e.prototype.triggerChange=function(t){return void 0===t&&(t={event:{}}),this.trigger(ut,O(t,{value:this.value}))},e.prototype.triggerKeyDown=function(t){return void 0===t&&(t={event:{}}),this.trigger(et,O({},t))},e.prototype.triggerMouseWheel=function(t){return void 0===t&&(t={event:{}}),this.trigger(st,O({},t))},e.prototype.forceUpdate=function(){this.setTextAndFormat(),this.refreshElementValue()},e.prototype.forceUpdateWithSelection=function(){var t=this.selection,e=t.start,n=t.end,i=this.elementValue.length;this.forceUpdate();var r=this.elementValue.length-i;this.setSelection({start:e+r,end:n+r})},e.prototype.setTextAndFormat=function(){var t=this.dateObject.getTextAndFormat(),e=t.text,n=t.format;this.currentFormat=n,this.currentText=e},e.prototype.setElementValue=function(t){this.element.value=t},e.prototype.getStepFromSymbol=function(t){switch(t){case"S":return Number(this.options.steps.millisecond);case"s":return Number(this.options.steps.second);case"m":return Number(this.options.steps.minute);case"h":case"H":return Number(this.options.steps.hour);case"M":return Number(this.options.steps.month);case"d":case"E":return Number(this.options.steps.day);case"y":return Number(this.options.steps.year);default:return 1}},e.prototype.restorePreviousInputEventState=function(){this.restorePreviousElementValue(),this.restorePreviousElementSelection()},e.prototype.restorePreviousElementValue=function(){this.setElementValue(this.previousElementValue||"")},e.prototype.restorePreviousElementSelection=function(){var t=this.previousElementSelection,e=t.start,n=t.end;this.setSelection({start:e||0,end:n||0})},e.prototype.writeValue=function(t){this.verifyValue(t),this.dateObject=this.getDateObject(t),this.refreshElementValue()},e.prototype.verifyValue=function(t){if(t&&!F(t))throw new Error("The 'value' should be a valid JavaScript Date instance.")},e.prototype.refreshElementValue=function(){var t=this.element,e=this.isActive?this.inputFormat:this.displayFormat,n=this.dateObject.getTextAndFormat(e),i=n.text,r=n.format;this.currentFormat=r,this.currentText=i;var o=this.options.hasPlaceholder||A(this.options.placeholder),s=!this.isActive&&o&&!this.dateObject.hasValue();o&&A(this.options.placeholder)&&(t.placeholder=this.options.placeholder);var a=s?"":i;this.previousElementValue=this.elementValue,this.setElementValue(a)},e.prototype.caret=function(t,e){void 0===e&&(e=t);var n=void 0!==t,i=[t,t],r=this.element;if(!n||!this.options.disabled&&!this.options.readonly){try{void 0!==r.selectionStart&&(n&&(document&&document.activeElement!==r&&r.focus(),r.setSelectionRange(t,e)),i=[r.selectionStart,r.selectionEnd])}catch(t){i=[]}return i}},e.prototype.selectNearestSegment=function(t){for(var e=t,n=t-1;e<this.currentFormat.length||n>=0;e++,n--){if(e<this.currentFormat.length&&"_"!==this.currentFormat[e])return void this.selectDateSegment(this.currentFormat[e]);if(n>=0&&"_"!==this.currentFormat[n])return void this.selectDateSegment(this.currentFormat[n])}},e.prototype.selectDateSegment=function(t){for(var e=-1,n=0,i=0;i<this.currentFormat.length;i++)this.currentFormat[i]===t&&(n=i+1,-1===e&&(e=i));e<0&&(e=0),this.caret(0,0),this.caret(e,n)},e.prototype.getDateObject=function(t){var e=(this.dateObject||{}||null).leadingZero;this.options.value=t;var n=this.createDateObject();return n.setLeadingZero(this.isActive?e:null),n},e.prototype.createDateObject=function(){var t=this.getDateObjectOptions();return new R(O({},t))},e.prototype.getDateObjectOptions=function(){return{intlService:this.options.intlService,formatPlaceholder:this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern",format:this.inputFormat,cycleTime:this.options.cycleTime,twoDigitYearMax:this.options.twoDigitYearMax,autoCorrectParts:this.options.autoCorrectParts,value:this.options.value}},e.prototype.keyEventMatchesAutoSwitchKeys=function(t){var e=(this.options.autoSwitchKeys||[]).map((function(t){return t.toString().toLowerCase().trim()}));return e.indexOf(t.keyCode.toString())>=0||e.indexOf(t.keyCode)>=0||e.indexOf(t.key.toLowerCase().trim())>=0},e.prototype.autoFill=function(){var t,e,n,i,r,o,s=this.dateObject,a=new Date;(s.date||s.month||s.year||s.hours||s.minutes||s.seconds)&&(n=s.year?s.value.getFullYear():a.getFullYear(),e=s.month?s.value.getMonth():a.getMonth(),t=s.date?s.value.getDate():a.getDate(),i=s.hours?s.value.getHours():a.getHours(),r=s.minutes?s.value.getMinutes():a.getMinutes(),o=s.seconds?s.value.getSeconds():a.getSeconds(),s.setValue(new Date(n,e,t,i,r,o)),this.refreshElementValue(),this.triggerValueChange())},e}(K)},4419:(t,e,n)=>{"use strict";n.r(e),n.d(e,{Draggable:()=>h,default:()=>d});var i=function(t,e){return function(n){return e(t(n))}},r=function(t,e,n){return t.addEventListener&&t.addEventListener(e,n)},o=function(t,e,n){return t&&t.removeEventListener&&t.removeEventListener(e,n)},s=function(){},a=function(t){return t.preventDefault()},l=/touch/;function c(t){return t.type.match(l)?{pageX:t.changedTouches[0].pageX,pageY:t.changedTouches[0].pageY,clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY,type:t.type,originalEvent:t,isTouch:!0}:{pageX:t.pageX,pageY:t.pageY,clientX:t.clientX,clientY:t.clientY,offsetX:t.offsetX,offsetY:t.offsetY,type:t.type,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,originalEvent:t}}var h=function(t){var e=this,n=t.press;void 0===n&&(n=s);var l=t.drag;void 0===l&&(l=s);var h=t.release;void 0===h&&(h=s);var u=t.mouseOnly;void 0===u&&(u=!1),this._pressHandler=i(c,n),this._dragHandler=i(c,l),this._releaseHandler=i(c,h),this._ignoreMouse=!1,this._mouseOnly=u,this._touchstart=function(t){1===t.touches.length&&e._pressHandler(t)},this._touchmove=function(t){1===t.touches.length&&e._dragHandler(t)},this._touchend=function(t){0===t.touches.length&&1===t.changedTouches.length&&(e._releaseHandler(t),e._ignoreMouse=!0,setTimeout(e._restoreMouse,2e3))},this._restoreMouse=function(){e._ignoreMouse=!1},this._mousedown=function(t){var n=t.which;n&&n>1||e._ignoreMouse||(r(e.document,"mousemove",e._mousemove),r(e.document,"mouseup",e._mouseup),e._pressHandler(t))},this._mousemove=function(t){e._dragHandler(t)},this._mouseup=function(t){o(e.document,"mousemove",e._mousemove),o(e.document,"mouseup",e._mouseup),e._releaseHandler(t)},this._pointerdown=function(t){t.isPrimary&&0===t.button&&(r(e.document,"pointermove",e._pointermove),r(e.document,"pointerup",e._pointerup),r(e.document,"pointercancel",e._pointerup),r(e.document,"contextmenu",a),e._pressHandler(t))},this._pointermove=function(t){t.isPrimary&&e._dragHandler(t)},this._pointerup=function(t){t.isPrimary&&(o(e.document,"pointermove",e._pointermove),o(e.document,"pointerup",e._pointerup),o(e.document,"pointercancel",e._pointerup),o(e.document,"contextmenu",a),e._releaseHandler(t))}},u={document:{configurable:!0}};h.supportPointerEvent=function(){return"undefined"!=typeof window&&window.PointerEvent},u.document.get=function(){return this._element?this._element.ownerDocument:document},h.prototype.cancelDrag=function(){o(this.document,"pointermove",this._pointermove),o(this.document,"pointerup",this._pointerup),o(this.document,"pointercancel",this._pointerup)},h.prototype.bindTo=function(t){t!==this._element&&(this._element&&this._unbindFromCurrent(),this._element=t,this._bindToCurrent())},h.prototype._bindToCurrent=function(){var t=this._element;this._usePointers()?r(t,"pointerdown",this._pointerdown):(r(t,"mousedown",this._mousedown),this._mouseOnly||(r(t,"touchstart",this._touchstart),r(t,"touchmove",this._touchmove),r(t,"touchend",this._touchend)))},h.prototype._unbindFromCurrent=function(){var t=this._element;if(this._usePointers())return o(t,"pointerdown",this._pointerdown),o(this.document,"pointermove",this._pointermove),o(this.document,"pointerup",this._pointerup),o(this.document,"contextmenu",a),void o(this.document,"pointercancel",this._pointerup);o(t,"mousedown",this._mousedown),this._mouseOnly||(o(t,"touchstart",this._touchstart),o(t,"touchmove",this._touchmove),o(t,"touchend",this._touchend))},h.prototype._usePointers=function(){return!this._mouseOnly&&h.supportPointerEvent()},h.prototype.update=function(t){var e=t.press;void 0===e&&(e=s);var n=t.drag;void 0===n&&(n=s);var r=t.release;void 0===r&&(r=s);var o=t.mouseOnly;void 0===o&&(o=!1),this._pressHandler=i(c,e),this._dragHandler=i(c,n),this._releaseHandler=i(c,r),this._mouseOnly=o},h.prototype.destroy=function(){this._unbindFromCurrent(),this._element=null},Object.defineProperties(h.prototype,u),h.default=h;const d=h},1123:(t,e,n)=>{"use strict";n.d(e,{A:()=>J});var i=n(6324),r=n(8830),o=n(4653),s=n(2336),a=n(5532),l=n(8721),c=n(853);const h={};var u=n(8599);const d=function(t){function e(e){t.call(this,e),e&&this.initClip()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initClip=function(){var t=this.srcElement.clip();t&&(this.clip=t,t.addObserver(this))},e.prototype.clear=function(){this.srcElement&&this.srcElement.removeObserver(this),this.clearClip(),t.prototype.clear.call(this)},e.prototype.clearClip=function(){this.clip&&(this.clip.removeObserver(this),delete this.clip)},e.prototype.setClip=function(t){this.clip&&(t.beginPath(),new h[this.clip.nodeType](this.clip).renderPoints(t,this.clip),t.clip("evenodd"))},e.prototype.optionsChange=function(e){"clip"===e.field&&(this.clearClip(),this.initClip()),t.prototype.optionsChange.call(this,e)},e.prototype.setTransform=function(t){if(this.srcElement){var e=this.srcElement.transform();e&&t.transform.apply(t,e.matrix().toArray(6))}},e.prototype.loadElements=function(t,e,n){for(var i=0;i<t.length;i++){var r=t[i],o=r.children,s=new h[r.nodeType](r,n);o&&o.length>0&&s.load(o,e,n),(0,u.A)(e)?this.insertAt(s,e):this.append(s)}},e.prototype.load=function(t,e,n){this.loadElements(t,e,n),this.invalidate()},e.prototype.setOpacity=function(t){if(this.srcElement){var e=this.srcElement.opacity();(0,u.A)(e)&&this.globalAlpha(t,e)}},e.prototype.globalAlpha=function(t,e){var n=e;n&&t.globalAlpha&&(n*=t.globalAlpha),t.globalAlpha=n},e.prototype.visible=function(){var t=this.srcElement;return!t||t&&!1!==t.options.visible},e}(c.A);var p=n(8199);const f=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){if(this.visible()){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t);for(var e=this.childNodes,n=0;n<e.length;n++){var i=e[n];i.visible()&&i.renderTo(t)}t.restore()}},e}((0,p.A)(d,"childNodes"));var g=n(1811),m=n(4517);const y=function(t){function e(e,n){t.call(this),this.canvas=e,this.size=n,this.ctx=e.getContext("2d");var i=this._invalidate.bind(this);this.invalidate=(0,g.A)((function(){(0,m.A)(i)}),16.666666666666668)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){t.prototype.destroy.call(this),this.canvas=null,this.ctx=null},e.prototype.load=function(t,e,n){this.loadElements(t,e,n),this._invalidate()},e.prototype._rescale=function(t){var e=this.canvas,n=this.size;e.width=n.width*t,e.height=n.height*t,this.ctx.scale(t,t)},e.prototype._devicePixelRatio=function(){return"number"==typeof window.devicePixelRatio?window.devicePixelRatio:1},e.prototype._invalidate=function(t){if(this.ctx){var e=t&&t.fixedScale?1:this._devicePixelRatio();this._rescale(e),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderTo(this.ctx)}},e}((0,p.A)(f,"childNodes"));var v=n(15);const b=function(t){function e(){t.call(this),this.shapes=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._add=function(t,e){this.shapes.push({bbox:e,shape:t}),t._quadNode=this},e.prototype.pointShapes=function(t){for(var e=this.shapes,n=e.length,i=[],r=0;r<n;r++)e[r].bbox.containsPoint(t)&&i.push(e[r].shape);return i},e.prototype.insert=function(t,e){this._add(t,e)},e.prototype.remove=function(t){for(var e=this.shapes,n=e.length,i=0;i<n;i++)if(e[i].shape===t){e.splice(i,1);break}},e}(v.A);var w=n(2226),x=n(9188),_=function(t){function e(e){t.call(this),this.children=[],this.rect=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.inBounds=function(t){var e=this.rect,n=e.bottomRight(),i=t.bottomRight(),r=e.origin.x<=t.origin.x&&e.origin.y<=t.origin.y&&i.x<=n.x&&i.y<=n.y;return r},e.prototype.pointShapes=function(e){for(var n=this.children,i=n.length,r=t.prototype.pointShapes.call(this,e),o=0;o<i;o++)(0,x.A)(r,n[o].pointShapes(e));return r},e.prototype.insert=function(t,e){var n=this.children,i=!1;if(this.inBounds(e)){if(this.shapes.length<4)this._add(t,e);else{n.length||this._initChildren();for(var r=0;r<n.length;r++)if(n[r].insert(t,e)){i=!0;break}i||this._add(t,e)}i=!0}return i},e.prototype._initChildren=function(){var t=this.rect,n=this.children,i=t.center(),r=t.width()/2,o=t.height()/2;n.push(new e(new w.A([t.origin.x,t.origin.y],[r,o])),new e(new w.A([i.x,t.origin.y],[r,o])),new e(new w.A([t.origin.x,i.y],[r,o])),new e(new w.A([i.x,i.y],[r,o])))},e}(b);const S=_;var C=3e3;function k(t,e){return t._zIndex<e._zIndex?1:t._zIndex>e._zIndex?-1:0}const A=function(t){function e(){t.call(this),this.initRoots()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.initRoots=function(){this.rootMap={},this.root=new b,this.rootElements=[]},e.prototype.clear=function(){for(var t=this.rootElements,e=0;e<t.length;e++)this.remove(t[e]);this.initRoots()},e.prototype.pointShape=function(t){var e=(this.rootMap[Math.floor(t.x/C)]||{})[Math.floor(t.y/C)],n=this.root.pointShapes(t);e&&(n=n.concat(e.pointShapes(t))),this.assignZindex(n),n.sort(k);for(var i=0;i<n.length;i++)if(n[i].containsPoint(t))return n[i]},e.prototype.assignZindex=function(t){for(var e=0;e<t.length;e++){for(var n=t[e],i=0,r=Math.pow(1e4,75),o=[];n;)o.push(n),n=n.parent;for(;o.length;)i+=(((n=o.pop()).parent?n.parent.children:this.rootElements).indexOf(n)+1)*r,r/=1e4;t[e]._zIndex=i}},e.prototype.optionsChange=function(t){"transform"!==t.field&&"stroke.width"!==t.field||this.bboxChange(t.element)},e.prototype.geometryChange=function(t){this.bboxChange(t.element)},e.prototype.bboxChange=function(t){if("Group"===t.nodeType)for(var e=0;e<t.children.length;e++)this.bboxChange(t.children[e]);else t._quadNode&&t._quadNode.remove(t),this._insertShape(t)},e.prototype.add=function(t){var e=Array.isArray(t)?t.slice(0):[t];(0,x.A)(this.rootElements,e),this._insert(e)},e.prototype.childrenChange=function(t){if("remove"===t.action)for(var e=0;e<t.items.length;e++)this.remove(t.items[e]);else this._insert(Array.prototype.slice.call(t.items,0))},e.prototype._insert=function(t){for(var e;t.length>0;)(e=t.pop()).addObserver(this),"Group"===e.nodeType?(0,x.A)(t,e.children):this._insertShape(e)},e.prototype._insertShape=function(t){var e=t.bbox();if(e){var n=this.getSectors(e),i=n[0][0],r=n[1][0];if(this.inRoot(n))this.root.insert(t,e);else{var o=this.rootMap;o[i]||(o[i]={}),o[i][r]||(o[i][r]=new S(new w.A([i*C,r*C],[C,C]))),o[i][r].insert(t,e)}}},e.prototype.remove=function(t){if(t.removeObserver(this),"Group"===t.nodeType)for(var e=t.children,n=0;n<e.length;n++)this.remove(e[n]);else t._quadNode&&(t._quadNode.remove(t),delete t._quadNode)},e.prototype.inRoot=function(t){return t[0].length>1||t[1].length>1},e.prototype.getSectors=function(t){for(var e=t.bottomRight(),n=Math.floor(e.x/C),i=Math.floor(e.y/C),r=[[],[]],o=Math.floor(t.origin.x/C);o<=n;o++)r[0].push(o);for(var s=Math.floor(t.origin.y/C);s<=i;s++)r[1].push(s);return r},e}(v.A);var E=function(t){t.bind("mouseenter",this._mouseenter.bind(this)),t.bind("mouseleave",this._mouseleave.bind(this)),this.element=t.element};E.prototype.clear=function(){this._resetCursor()},E.prototype.destroy=function(){this._resetCursor(),delete this.element},E.prototype._mouseenter=function(t){var e=this._shapeCursor(t);e?(this._current||(this._defaultCursor=this._getCursor()),this._setCursor(e)):this._resetCursor()},E.prototype._mouseleave=function(){this._resetCursor()},E.prototype._shapeCursor=function(t){for(var e=t.element;e&&!(0,u.A)(e.options.cursor);)e=e.parent;if(e)return e.options.cursor},E.prototype._getCursor=function(){if(this.element)return this.element.style.cursor},E.prototype._setCursor=function(t){this.element&&(this.element.style.cursor=t,this._current=t)},E.prototype._resetCursor=function(){this._current&&(this._setCursor(this._defaultCursor||""),delete this._current)};const T=E;var M=n(1474),O=n(7003),I=n(9929),D=n(8703),F=n(4877),P=n(2464);function R(t,e){var n=e.segments;if(0!==n.length){var i=n[0],r=i.anchor();t.moveTo(r.x,r.y);for(var o=1;o<n.length;o++){r=(i=n[o]).anchor();var s=n[o-1].controlOut(),a=i.controlIn();s&&a?t.bezierCurveTo(s.x,s.y,a.x,a.y,r.x,r.y):t.lineTo(r.x,r.y)}e.options.closed&&t.closePath()}}var L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),this.renderPoints(t,this.srcElement),this.setLineDash(t),this.setLineCap(t),this.setLineJoin(t),this.setFill(t),this.setStroke(t),t.restore()},e.prototype.setFill=function(t){var e=this.srcElement.options.fill,n=!1;return e&&("Gradient"===e.nodeType?(this.setGradientFill(t,e),n=!0):(0,O.A)(e.color)||(t.fillStyle=e.color,t.save(),this.globalAlpha(t,e.opacity),t.fill(),t.restore(),n=!0)),n},e.prototype.setGradientFill=function(t,e){var n,i=this.srcElement.rawBBox();if(e instanceof D.A){var r=e.start(),o=e.end();n=t.createLinearGradient(r.x,r.y,o.x,o.y)}else if(e instanceof F.A){var s=e.center();n=t.createRadialGradient(s.x,s.y,0,s.x,s.y,e.radius())}!function(t,e){for(var n=0;n<e.length;n++){var i=e[n],r=(0,M.Ay)(i.color());r.a*=i.opacity(),t.addColorStop(i.offset(),r.toCssRgba())}}(n,e.stops),t.save(),e.userSpace()||t.transform(i.width(),0,0,i.height(),i.origin.x,i.origin.y),t.fillStyle=n,t.fill(),t.restore()},e.prototype.setStroke=function(t){var e=this.srcElement.options.stroke;if(e&&!(0,O.A)(e.color)&&e.width>0)return t.strokeStyle=e.color,t.lineWidth=(0,I.A)(e.width,1),t.lineJoin=(0,I.A)(e.lineJoin,t.lineJoin),t.save(),this.globalAlpha(t,e.opacity),t.stroke(),t.restore(),!0},e.prototype.dashType=function(){var t=this.srcElement.options.stroke;if(t&&t.dashType)return t.dashType.toLowerCase()},e.prototype.setLineDash=function(t){var e=this.dashType();if(e&&e!==P.I$){var n=P.MT[e];t.setLineDash?t.setLineDash(n):(t.mozDash=n,t.webkitLineDash=n)}},e.prototype.setLineCap=function(t){var e=this.dashType(),n=this.srcElement.options.stroke;e&&e!==P.I$?t.lineCap=P.SQ:n&&n.lineCap&&(t.lineCap=n.lineCap)},e.prototype.setLineJoin=function(t){var e=this.srcElement.options.stroke;e&&e.lineJoin&&(t.lineJoin=e.lineJoin)},e.prototype.renderPoints=function(t,e){R(t,e)},e}(d);const N=L;var B=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){R(t,this.srcElement.toPath())},e}(N);const j=B;var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){var e=this.srcElement.geometry(),n=e.center,i=e.radius;t.arc(n.x,n.y,i,0,2*Math.PI)},e}(N);const $=z;var H=function(t){function e(e,n){t.call(this,e),this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this),this.loading=(0,a.A)();var i=this.img=new Image,r=e.src();n&&!/^data:/i.test(r)&&(i.crossOrigin=n),r&&(i.src=r),i.complete?this.onLoad():(i.onload=this.onLoad,i.onerror=this.onError)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){"resolved"===this.loading.state()&&(t.save(),this.setTransform(t),this.setClip(t),this.drawImage(t),t.restore())},e.prototype.optionsChange=function(e){"src"===e.field?(this.loading=(0,a.A)(),this.img.src=this.srcElement.src()):t.prototype.optionsChange.call(this,e)},e.prototype.onLoad=function(){this.loading.resolve(),this.invalidate()},e.prototype.onError=function(){this.loading.reject(new Error("Unable to load image '"+this.img.src+"'. Check for connectivity and verify CORS headers."))},e.prototype.drawImage=function(t){var e=this.srcElement.rect(),n=e.topLeft();t.drawImage(this.img,n.x,n.y,e.width(),e.height())},e}(N);const U=H;var V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(t){for(var e=this.srcElement.paths,n=0;n<e.length;n++)R(t,e[n])},e}(N);const W=V;var q=n(116),K=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderPoints=function(e){var n=this.srcElement.geometry(),i=n.cornerRadius,r=i[0],o=i[1];if(0===r&&0===o){var s=n.origin,a=n.size;e.rect(s.x,s.y,a.width,a.height)}else t.prototype.renderPoints.call(this,e,q.w.fromRect(n))},e}(N);const X=K;var G=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderTo=function(t){var e=this.srcElement,n=e.position(),i=e.measure();t.save(),this.setTransform(t),this.setClip(t),this.setOpacity(t),t.beginPath(),t.font=e.options.font,t.textAlign="left","stroke"===e.options.paintOrder?(this.stroke(t,e,n,i),this.fill(t,e,n,i)):(this.fill(t,e,n,i),this.stroke(t,e,n,i)),t.restore()},e.prototype.stroke=function(t,e,n,i){this.setStroke(t)&&(this.setLineDash(t),t.strokeText(e.content(),n.x,n.y+i.baseline))},e.prototype.fill=function(t,e,n,i){this.setFill(t)&&t.fillText(e.content(),n.x,n.y+i.baseline)},e}(N);const Y=G;h.Arc=j,h.Circle=$,h.Group=f,h.Image=U,h.MultiPath=W,h.Path=N,h.Rect=X,h.Text=Y;const J=function(t){function e(e,n){t.call(this,e,n),this.element.innerHTML=this._template(this);var i=this.element.firstElementChild;i.style.width="100%",i.style.height="100%";var s=(0,r.A)(e);i.width=s.width,i.height=s.height,this._rootElement=i,this._root=new y(i,s),this._mouseTrackHandler=this._trackMouse.bind(this),(0,o.A)(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={type:{configurable:!0}};return n.type.get=function(){return"canvas"},e.prototype.destroy=function(){t.prototype.destroy.call(this),this._root&&(this._root.destroy(),this._root=null),this._searchTree&&(this._searchTree.clear(),delete this._searchTree),this._cursor&&(this._cursor.destroy(),delete this._cursor),(0,s.A)(this.element,{click:this._mouseTrackHandler,mousemove:this._mouseTrackHandler})},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e],void 0,this.options.cors),this._searchTree&&this._searchTree.add([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear(),this._searchTree&&this._searchTree.clear(),this._cursor&&this._cursor.clear()},e.prototype.eventTarget=function(t){if(this._searchTree){var e=this._surfacePoint(t);return this._searchTree.pointShape(e)}},e.prototype.image=function(){var t=this._root,e=this._rootElement,n=[];t.traverse((function(t){t.loading&&n.push(t.loading)}));var i=(0,a.A)(),r=function(){t._invalidate({fixedScale:!0});try{var n=e.toDataURL();i.resolve(n)}catch(t){i.reject(t)}};return(0,l.A)(n).then(r,r),i},e.prototype.suspendTracking=function(){t.prototype.suspendTracking.call(this),this._searchTree&&(this._searchTree.clear(),delete this._searchTree)},e.prototype.resumeTracking=function(){if(t.prototype.resumeTracking.call(this),!this._searchTree){this._searchTree=new A;for(var e=this._root.childNodes,n=[],i=0;i<e.length;i++)n.push(e[i].srcElement);this._searchTree.add(n)}},e.prototype._resize=function(){this._rootElement.width=this._size.width,this._rootElement.height=this._size.height,this._root.size=this._size,this._root.invalidate()},e.prototype._template=function(){return"<canvas></canvas>"},e.prototype._enableTracking=function(){this._searchTree=new A,this._cursor=new T(this),t.prototype._enableTracking.call(this)},e.prototype._trackMouse=function(t){if(!this._suspendedTracking){var e=this.eventTarget(t);if("click"!==t.type){var n=this._currentShape;n&&n!==e&&this.trigger("mouseleave",{element:n,originalEvent:t,type:"mouseleave"}),e&&n!==e&&this.trigger("mouseenter",{element:e,originalEvent:t,type:"mouseenter"}),this.trigger("mousemove",{element:e,originalEvent:t,type:"mousemove"}),this._currentShape=e}else e&&this.trigger("click",{element:e,originalEvent:t,type:"click"})}},Object.defineProperties(e.prototype,n),e}(i.A)},4517:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=function(t){var e="undefined"!=typeof window?window:{},n=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};i=function(t){return n.call(e,t)},i(t)};const r=i},15:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=function(){}},1115:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}},1474:(t,e,n)=>{"use strict";n.d(e,{Ay:()=>m,Ix:()=>h,WV:()=>d,i8:()=>p,m0:()=>c});var i=n(15),r=n(3452),o=n(1115),s=r.A.browser,a=function(t){var e=Object.keys(o.A);e.push("transparent");var n=new RegExp("^("+e.join("|")+")(\\W|$)","i");return a=function(t){return n.exec(t)},n.exec(t)},l=function(t){function e(){t.call(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){return this},e.prototype.toRGB=function(){return this},e.prototype.toHex=function(t){return this.toBytes().toHex(t)},e.prototype.toBytes=function(){return this},e.prototype.toCss=function(t){return"#"+this.toHex(t)},e.prototype.toCssRgba=function(){var t=this.toBytes();return"rgba("+t.r+", "+t.g+", "+t.b+", "+parseFloat(Number(this.a).toFixed(3))+")"},e.prototype.toDisplay=function(){return s.msie&&s.version<9?this.toCss():this.toCssRgba()},e.prototype.equals=function(t){return t===this||null!=t&&this.toCssRgba()===m(t).toCssRgba()},e.prototype.diff=function(t){if(null===t)return NaN;var e=this.toBytes(),n=t.toBytes();return Math.sqrt(Math.pow(.3*(e.r-n.r),2)+Math.pow(.59*(e.g-n.g),2)+Math.pow(.11*(e.b-n.b),2))},e.prototype.clone=function(){var t=this.toBytes();return t===this&&(t=new h(t.r,t.g,t.b,t.a)),t},e}(i.A),c=function(t){function e(e,n,i,r){t.call(this),this.r=e,this.g=n,this.b=i,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toHSV=function(){var t,e,n=this,i=n.r,r=n.g,o=n.b,s=Math.min(i,r,o),a=Math.max(i,r,o),l=a-s,c=a;return 0===l?new d(0,0,c,this.a):(0!==a?(e=l/a,t=i===a?(r-o)/l:r===a?2+(o-i)/l:4+(i-r)/l,(t*=60)<0&&(t+=360)):(e=0,t=-1),new d(t,e,c,this.a))},e.prototype.toHSL=function(){var t,e,n=this,i=n.r,r=n.g,o=n.b,s=Math.max(i,r,o),a=Math.min(i,r,o),l=(s+a)/2;if(s===a)t=e=0;else{var c=s-a;switch(e=l>.5?c/(2-s-a):c/(s+a),s){case i:t=(r-o)/c+(r<o?6:0);break;case r:t=(o-i)/c+2;break;case o:t=(i-r)/c+4}}return new p(60*t,100*e,100*l,this.a)},e.prototype.toBytes=function(){return new h(255*this.r,255*this.g,255*this.b,this.a)},e}(l),h=function(t){function e(e,n,i,r){t.call(this,Math.round(e),Math.round(n),Math.round(i),r)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){return new t(this.r/255,this.g/255,this.b/255,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toHex=function(t){var e=u(this.r,2)+u(this.g,2)+u(this.b,2);return t&&t.alpha&&(e+=u(Math.round(255*this.a),2)),e},e.prototype.toBytes=function(){return this},e}(c);function u(t,e,n){void 0===n&&(n="0");for(var i=t.toString(16);e>i.length;)i=n+i;return i}var d=function(t){function e(e,n,i,r){t.call(this),this.h=e,this.s=n,this.v=i,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,n,i=this,r=i.h,o=i.s,s=i.v;if(0===o)t=e=n=s;else{r/=60;var a=Math.floor(r),l=r-a,h=s*(1-o),u=s*(1-o*l),d=s*(1-o*(1-l));switch(a){case 0:t=s,e=d,n=h;break;case 1:t=u,e=s,n=h;break;case 2:t=h,e=s,n=d;break;case 3:t=h,e=u,n=s;break;case 4:t=d,e=h,n=s;break;default:t=s,e=h,n=u}}return new c(t,e,n,this.a)},e.prototype.toHSL=function(){return this.toRGB().toHSL()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(l),p=function(t){function e(e,n,i,r){t.call(this),this.h=e,this.s=n,this.l=i,this.a=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toRGB=function(){var t,e,n,i=this.h/360,r=this.s/100,o=this.l/100;if(0===r)t=e=n=o;else{var s=o<.5?o*(1+r):o+r-o*r,a=2*o-s;t=f(a,s,i+1/3),e=f(a,s,i),n=f(a,s,i-1/3)}return new c(t,e,n,this.a)},e.prototype.toHSV=function(){return this.toRGB().toHSV()},e.prototype.toBytes=function(){return this.toRGB().toBytes()},e}(l);function f(t,e,n){var i=n;return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function g(t){return parseFloat(parseFloat(parseInt(t,16)/255).toFixed(3))}function m(t,e){var n,i;if(null==t||"none"===t)return null;if(t instanceof l)return t;var r=t.toLowerCase();if(n=a(r))return(r="transparent"===n[1]?new c(1,1,1,0):m(o.A[n[1]],e)).match=[n[1]],r;if((n=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?i=new h(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),1):(n=/^#?([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?i=new h(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16),1):(n=/^#?([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])\b/i.exec(r))?i=new h(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16),g(n[4]+n[4])):(n=/^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})\b/i.exec(r))?i=new h(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),g(n[4])):(n=/^rgb\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/.exec(r))?i=new h(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),1):(n=/^rgba\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9.]+)\s*\)/.exec(r))?i=new h(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4])):(n=/^rgb\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*\)/.exec(r))?i=new c(parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])/100,1):(n=/^rgba\(\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9]*\.?[0-9]+)%\s*,\s*([0-9.]+)\s*\)/.exec(r))?i=new c(parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])/100,parseFloat(n[4])):(n=/^color\(\s*srgb\s*([0-9\.]+)\s*([0-9\.]+)\s*([0-9\.]+)\s*(\/\s+([0-9\.]*))?\)/.exec(r))&&(i=new c(parseFloat(n[1]),parseFloat(n[2]),parseFloat(n[3]),parseFloat(n[5]||"1"))),i)i.match=n;else if(!e)throw new Error("Cannot parse color: "+r);return i}},7103:(t,e,n)=>{"use strict";function i(t){var e=window.console;void 0!==e&&e.log&&e.log(t)}n.d(e,{A:()=>i})},3452:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=null;const r={get browser(){return"undefined"==typeof window||i?i:i=function(t){var e={edge:/(edge)[ \/]([\w.]+)/i,webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie\s|trident.*? rv:)([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+))/i},n={};for(var i in e)if(e.hasOwnProperty(i)){var r=t.match(e[i]);if(r){n[i]=!0,n[r[1].toLowerCase().split(" ")[0].split("/")[0]]=!0,n.version=parseInt(document.documentMode||r[2],10);break}}return n}(window.navigator.userAgent)}}},1811:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(9866);function r(t,e){var n,r=0;if(!e||e<=0)return t;var o=function(){var o=(0,i.A)()-r,s=arguments,a=function(){t.apply(null,s),r=(0,i.A)()};if(!r)return a();n&&clearTimeout(n),o>e?a():n=setTimeout(a,e-o)};return o.cancel=function(){clearTimeout(n)},o}},853:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=function(t){function e(e){t.call(this),this.childNodes=[],this.parent=null,e&&(this.srcElement=e,this.observe())}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.srcElement&&this.srcElement.removeObserver(this);for(var t=this.childNodes,e=0;e<t.length;e++)this.childNodes[e].destroy();this.parent=null},e.prototype.load=function(){},e.prototype.observe=function(){this.srcElement&&this.srcElement.addObserver(this)},e.prototype.append=function(t){this.childNodes.push(t),t.parent=this},e.prototype.insertAt=function(t,e){this.childNodes.splice(e,0,t),t.parent=this},e.prototype.remove=function(t,e){for(var n=t+e,i=t;i<n;i++)this.childNodes[i].removeSelf();this.childNodes.splice(t,e)},e.prototype.removeSelf=function(){this.clear(),this.destroy()},e.prototype.clear=function(){this.remove(0,this.childNodes.length)},e.prototype.invalidate=function(){this.parent&&this.parent.invalidate()},e.prototype.geometryChange=function(){this.invalidate()},e.prototype.optionsChange=function(){this.invalidate()},e.prototype.childrenChange=function(t){"add"===t.action?this.load(t.items,t.index):"remove"===t.action&&this.remove(t.index,t.items.length),this.invalidate()},e}(n(15).A)},2464:(t,e,n)=>{"use strict";n.d(e,{I$:()=>r,MT:()=>i,SQ:()=>o});var i={dot:[1.5,3.5],dash:[4,3.5],longdash:[8,3.5],dashdot:[3.5,3.5,1.5,3.5],longdashdot:[8,3.5,1.5,3.5],longdashdotdot:[8,3.5,1.5,3.5,1.5,3.5]},r="solid",o="butt"},7691:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.observers=function(){return this._observers=this._observers||[],this._observers},e.prototype.addObserver=function(t){return this._observers?this._observers.push(t):this._observers=[t],this},e.prototype.removeObserver=function(t){var e=this.observers(),n=e.indexOf(t);return-1!==n&&e.splice(n,1),this},e.prototype.trigger=function(t,e){var n=this._observers;if(n&&!this._suspended)for(var i=0;i<n.length;i++){var r=n[i];r[t]&&r[t](e)}return this},e.prototype.optionsChange=function(t){void 0===t&&(t={}),t.element=this,this.trigger("optionsChange",t)},e.prototype.geometryChange=function(){this.trigger("geometryChange",{element:this})},e.prototype.suspend=function(){return this._suspended=(this._suspended||0)+1,this},e.prototype.resume=function(){return this._suspended=Math.max((this._suspended||0)-1,0),this},e.prototype._observerField=function(t,e){this[t]&&this[t].removeObserver(this),this[t]=e,e.addObserver(this)},e}(n(15).A)},963:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(15),r=n(7691),o=n(8599),s={}.toString;const a=function(t){function e(e,n){for(var i in void 0===n&&(n=""),t.call(this),this.prefix=n,e){var r=e[i];r=this._wrap(r,i),this[i]=r}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t){for(var e=t.split("."),n=this;e.length&&n;){n=n[e.shift()]}return n},e.prototype.set=function(t,e){this.get(t)!==e&&(this._set(t,this._wrap(e,t)),this.optionsChange({field:this.prefix+t,value:e}))},e.prototype._set=function(t,n){var i=t.indexOf(".")>=0,r=this,o=t;if(i){for(var s=o.split("."),a=this.prefix;s.length>1;){a+=(o=s.shift())+".";var l=r[o];l||((l=new e({},a)).addObserver(this),r[o]=l),r=l}o=s[0]}r._clear(o),r[o]=n},e.prototype._clear=function(t){var e=this[t];e&&e.removeObserver&&e.removeObserver(this)},e.prototype._wrap=function(t,n){var r=s.call(t),a=t;return null!==a&&(0,o.A)(a)&&"[object Object]"===r&&(t instanceof e||t instanceof i.A||(a=new e(a,this.prefix+n+".")),a.addObserver(this)),a},e}(r.A)},6324:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});var i=n(6651),r=n(1836),o=function(t){function e(){t.call(this),this._events={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bind=function(t,e,n){var i=arguments,r=this,o=a(t),l=s(e),c=o.length;if(void 0===e){for(var h in t)r.bind(h,t[h]);return this}for(var u=function(t){var s=o[t],a=l?e:e[s];if(a){if(n){var c=a;(a=function(){r.unbind(s,a),c.apply(r,i)}).original=c}(r._events[s]=r._events[s]||[]).push(a)}},d=0;d<c;d++)u(d);return this},e.prototype.one=function(t,e){return this.bind(t,e,!0)},e.prototype.first=function(t,e){for(var n=a(t),i=s(e),r=0,o=n.length;r<o;r++){var l=n[r],c=i?e:e[l];if(c)(this._events[l]=this._events[l]||[]).unshift(c)}return this},e.prototype.trigger=function(t,e){void 0===e&&(e={});var n=this._events[t];if(n){var i=n.length;e.sender=this,e._defaultPrevented=!1,e.preventDefault=l,e.isDefaultPrevented=c,n=n.slice();for(var r=0;r<i;r++)n[r].call(this,e);return!0===e._defaultPrevented}return!1},e.prototype.unbind=function(t,e){var n=this._events[t];if(void 0===t)this._events={};else if(n)if(e)for(var i=n.length-1;i>=0;i--)n[i]!==e&&n[i].original!==e||n.splice(i,1);else this._events[t]=[];return this},e}(n(15).A);function s(t){return"function"==typeof t}function a(t){return"string"==typeof t?[t]:t}function l(){this._defaultPrevented=!0}function c(){return!0===this._defaultPrevented}const h=o;var u=n(8830),d=n(7439),p=n(8714),f=n(3836),g=n(6815),m=n(2841),y=["click","mouseenter","mouseleave","mousemove","resize"],v=function(t){function e(e,n){t.call(this),this.options=Object.assign({},n),this.element=e,this.element._kendoExportVisual=this.exportVisual.bind(this),this._click=this._handler("click"),this._mouseenter=this._handler("mouseenter"),this._mouseleave=this._handler("mouseleave"),this._mousemove=this._handler("mousemove"),this._visual=new i.A,(0,u.A)(e,this.options),this.bind(y,this.options),this._enableTracking()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.draw=function(t){this._visual.children.push(t)},e.prototype.clear=function(){this._visual.children=[]},e.prototype.destroy=function(){this._visual=null,this.element._kendoExportVisual=null,this.unbind()},e.prototype.eventTarget=function(t){for(var e,n=(0,d.A)(t);!e&&n&&(e=n._kendoNode,n!==this.element);)n=n.parentElement;if(e)return e.srcElement},e.prototype.exportVisual=function(){return this._visual},e.prototype.getSize=function(){return(0,u.A)(this.element)},e.prototype.currentSize=function(t){if(!t)return this._size;this._size=t},e.prototype.setSize=function(t){(0,u.A)(this.element,t),this.currentSize(t),this._resize()},e.prototype.resize=function(t){var e=this.getSize(),n=this.currentSize();(t||(e.width>0||e.height>0)&&(!n||e.width!==n.width||e.height!==n.height))&&(this.currentSize(e),this._resize(e,t),this.trigger("resize",e))},e.prototype.size=function(t){if(!t)return this.getSize();this.setSize(t)},e.prototype.suspendTracking=function(){this._suspendedTracking=!0},e.prototype.resumeTracking=function(){this._suspendedTracking=!1},e.prototype._enableTracking=function(){},e.prototype._resize=function(){},e.prototype._handler=function(t){var e=this;return function(n){var i=e.eventTarget(n);i&&!e._suspendedTracking&&e.trigger(t,{element:i,originalEvent:n,type:t})}},e.prototype._elementOffset=function(){var t=this.element,e=(0,p.A)(t),n=(0,f.A)(t),i=n.left,r=n.top;return{left:i+e.left,top:r+e.top}},e.prototype._surfacePoint=function(t){var e=this._elementOffset(),n=(0,g.A)(t),i=n.x-e.left,o=n.y-e.top,s=(0,m.A)(this.element).invert();return new r.A(i,o).transform(s)},e}(h);const b=v},818:(t,e,n)=>{"use strict";n.d(e,{A:()=>b});var i=n(7691),r=n(9917),o=n(562),s=n(1454),a=n(5123),l=n(1833);function c(t,e,n){return t<e||(0,l.A)(t,e,n)}var h=n(1836);function u(t,e,n,i){var r=e.x-t.x,o=i.x-n.x,s=e.y-t.y,a=i.y-n.y,l=t.x-n.x,c=t.y-n.y,u=r*a-o*s,d=(r*c-s*l)/u,p=(o*c-a*l)/u;if(d>=0&&d<=1&&p>=0&&p<=1)return new h.A(t.x+p*r,t.y+p*s)}var d=n(7739),p=n(9919),f=n(2226),g=n(289),m=Math.pow;function y(t,e,n,i,r,a){var l=(0,s.A)((r-t)/n,3),c=(0,s.A)((a-e)/i,3);return(0,s.A)((0,o.A)(Math.atan2(c,l)))}function v(t,e){for(var n=t;n<e;)n+=90;return n}const b=function(t){function e(e,n){void 0===e&&(e=new h.A),void 0===n&&(n={}),t.call(this),this.setCenter(e),this.radiusX=n.radiusX,this.radiusY=n.radiusY||n.radiusX,this.startAngle=n.startAngle,this.endAngle=n.endAngle,this.anticlockwise=n.anticlockwise||!1,this.xRotation=n.xRotation}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.center,{radiusX:this.radiusX,radiusY:this.radiusY,startAngle:this.startAngle,endAngle:this.endAngle,anticlockwise:this.anticlockwise})},e.prototype.setCenter=function(t){return this._observerField("center",h.A.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.pointAt=function(t){var e=this.center,n=(0,r.A)(t);return new h.A(e.x+this.radiusX*Math.cos(n),e.y+this.radiusY*Math.sin(n))},e.prototype.curvePoints=function(){var t,e=this.startAngle,n=this.anticlockwise?-1:1,i=[this.pointAt(e)],r=this._arcInterval(),o=r.endAngle-r.startAngle,s=Math.ceil(o/45),a=o/s,l=e;this.xRotation&&(t=(0,g.A)().rotate(this.xRotation,this.center));for(var c=1;c<=s;c++){var h=l+n*a,u=this._intervalCurvePoints(l,h,t);i.push(u.cp1,u.cp2,u.p2),l=h}return i},e.prototype.bbox=function(t){for(var e=this._arcInterval(),n=e.startAngle,i=e.endAngle,r=(0,d.A)(this.center,this.radiusX,this.radiusY,t),s=(0,o.A)(r.x),a=(0,o.A)(r.y),l=this.pointAt(i).transformCopy(t),c=v(s,n),u=v(a,n),p=this.pointAt(n).transformCopy(t),g=h.A.min(p,l),m=h.A.max(p,l);c<i||u<i;){var y=void 0;c<i&&(y=this.pointAt(c).transformCopy(t),c+=90);var b=void 0;u<i&&(b=this.pointAt(u).transformCopy(t),u+=90),p=new h.A(y.x,b.y),g=h.A.min(g,p),m=h.A.max(m,p)}return f.A.fromPoints(g,m)},e.prototype._arcInterval=function(){var t=this,e=t.startAngle,n=t.endAngle,i=t.anticlockwise;if(i){var r=e;e=n,n=r}return(e>n||i&&e===n)&&(n+=360),{startAngle:e,endAngle:n}},e.prototype._intervalCurvePoints=function(t,e,n){var i=this.pointAt(t),o=this.pointAt(e),s=this._derivativeAt(t),a=this._derivativeAt(e),l=((0,r.A)(e)-(0,r.A)(t))/3,c=new h.A(i.x+l*s.x,i.y+l*s.y),u=new h.A(o.x-l*a.x,o.y-l*a.y);return n&&(i.transform(n),o.transform(n),c.transform(n),u.transform(n)),{p1:i,cp1:c,cp2:u,p2:o}},e.prototype._derivativeAt=function(t){var e=(0,r.A)(t);return new h.A(-this.radiusX*Math.sin(e),this.radiusY*Math.cos(e))},e.prototype.containsPoint=function(t){var e,n=this._arcInterval(),i=n.endAngle-n.startAngle,r=this,o=r.center,s=r.radiusX,a=r.radiusY,l=o.distanceTo(t),h=Math.atan2(t.y-o.y,t.x-o.x),d=s*a/Math.sqrt(m(s,2)*m(Math.sin(h),2)+m(a,2)*m(Math.cos(h),2)),f=this.pointAt(this.startAngle).round(p.P),g=this.pointAt(this.endAngle).round(p.P),v=u(o,t.round(p.P),f,g);if(i<180)e=v&&c(o.distanceTo(v),l)&&c(l,d);else{var b=y(o.x,o.y,s,a,t.x,t.y);360!==b&&(b=(360+b)%360);var w=n.startAngle<=b&&b<=n.endAngle;e=w&&c(l,d)||!w&&(!v||v.equals(t))}return e},e.prototype._isOnPath=function(t,e){var n=this._arcInterval(),i=this.center,r=y(i.x,i.y,this.radiusX,this.radiusY,t.x,t.y);return 360!==r&&(r=(360+r)%360),n.startAngle<=r&&r<=n.endAngle&&this.pointAt(r).distanceTo(t)<=e},e.fromPoints=function(t,n,i,a,l,c,u){var d=function(t){var e=t.x1,n=t.y1,i=t.x2,a=t.y2,l=t.rx,c=t.ry,u=t.largeArc,d=t.swipe,p=t.rotation;void 0===p&&(p=0);var f=(0,r.A)(p),g=Math.cos(f),m=Math.sin(f),y=g*(e-i)/2+m*(n-a)/2,v=-m*(e-i)/2+g*(n-a)/2,b=u!==d?1:-1,w=Math.pow(y,2),x=Math.pow(v,2),_=Math.pow(l,2),S=Math.pow(c,2),C=w/_+x/S;C>1&&(l*=C=Math.sqrt(w/_+x/S),_=Math.pow(l,2),c*=C,S=Math.pow(c,2));var k=b*Math.sqrt((_*S-_*x-S*w)/(_*x+S*w));isNaN(k)&&(k=0);var A=k*(l*v)/c,E=c*y*-k/l,T=g*A-m*E+(e+i)/2,M=m*A+g*E+(n+a)/2,O=(y-A)/l,I=(v-E)/c,D=-(y+A)/l,F=-(v+E)/c,P=(I>=0?1:-1)*(0,o.A)(Math.acos(O/Math.sqrt(O*O+I*I))),R=(0,s.A)((O*D+I*F)/(Math.sqrt(O*O+I*I)*Math.sqrt(D*D+F*F)),10),L=(O*F-I*D>=0?1:-1)*(0,o.A)(Math.acos(R));!d&&L>0&&(L-=360);d&&L<0&&(L+=360);var N=P+L,B=N>=0?1:-1;return N=Math.abs(N)%360*B,{center:new h.A(T,M),startAngle:P,endAngle:N,radiusX:l,radiusY:c,xRotation:p}}({x1:t.x,y1:t.y,x2:n.x,y2:n.y,rx:i,ry:a,largeArc:l,swipe:c,rotation:u});return new e(d.center,{startAngle:d.startAngle,endAngle:d.endAngle,radiusX:d.radiusX,radiusY:d.radiusY,xRotation:d.xRotation,anticlockwise:0===c})},e}((0,a.A)(i.A,["radiusX","radiusY","startAngle","endAngle","anticlockwise"]))},6428:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var i=n(5123),r=n(1836),o=n(2226),s=n(7739),a=n(7691),l=n(9917),c=Math.PI/2;const h=function(t){function e(e,n){void 0===e&&(e=new r.A),void 0===n&&(n=0),t.call(this),this.setCenter(e),this.setRadius(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setCenter=function(t){return this._observerField("center",r.A.create(t)),this.geometryChange(),this},e.prototype.getCenter=function(){return this.center},e.prototype.equals=function(t){return t&&t.center.equals(this.center)&&t.radius===this.radius},e.prototype.clone=function(){return new e(this.center.clone(),this.radius)},e.prototype.pointAt=function(t){return this._pointAt((0,l.A)(t))},e.prototype.bbox=function(t){for(var e=(0,s.A)(this.center,this.radius,this.radius,t),n=r.A.maxPoint(),i=r.A.minPoint(),a=0;a<4;a++){var l=this._pointAt(e.x+a*c).transformCopy(t),h=this._pointAt(e.y+a*c).transformCopy(t),u=new r.A(l.x,h.y);n=r.A.min(n,u),i=r.A.max(i,u)}return o.A.fromPoints(n,i)},e.prototype._pointAt=function(t){var e=this.center,n=this.radius;return new r.A(e.x+n*Math.cos(t),e.y+n*Math.sin(t))},e.prototype.containsPoint=function(t){var e=this.center,n=this.radius;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n,2)},e.prototype._isOnPath=function(t,e){var n=this.center,i=this.radius,r=n.distanceTo(t);return i-e<=r&&r<=i+e},e}((0,i.A)(a.A,["radius"]))},9919:(t,e,n)=>{"use strict";n.d(e,{P:()=>i});var i=10},1833:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(9919),r=n(1454);function o(t,e,n){return void 0===n&&(n=i.P),0===(0,r.A)(Math.abs(t-e),n)}},7739:(t,e,n)=>{"use strict";function i(t,e,n,i){var r=0,o=0;return i&&(r=Math.atan2(i.c*n,i.a*e),0!==i.b&&(o=Math.atan2(i.d*n,i.b*e))),{x:r,y:o}}n.d(e,{A:()=>i})},402:(t,e,n)=>{"use strict";function i(t,e,n){var i;if(t.x!==e.x){var r=Math.min(t.x,e.x),o=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),l=r<=n.x&&n.x<o;i=s===a?n.y<=s&&l:l&&(a-s)*((t.x-e.x)*(t.y-e.y)>0?n.x-r:o-n.x)/(o-r)+s-n.y>=0}return i?1:0}n.d(e,{A:()=>i})},6349:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(15),r=n(8599),o=n(9917),s=n(1454),a=function(t){function e(e,n,i,r,o,s){void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=0),void 0===s&&(s=0),t.call(this),this.a=e,this.b=n,this.c=i,this.d=r,this.e=o,this.f=s}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.multiplyCopy=function(t){return new e(this.a*t.a+this.c*t.b,this.b*t.a+this.d*t.b,this.a*t.c+this.c*t.d,this.b*t.c+this.d*t.d,this.a*t.e+this.c*t.f+this.e,this.b*t.e+this.d*t.f+this.f)},e.prototype.invert=function(){var t=this,n=t.a,i=t.b,r=t.c,o=t.d,s=t.e,a=t.f,l=n*o-i*r;return 0===l?null:new e(o/l,-i/l,-r/l,n/l,(r*a-o*s)/l,(i*s-n*a)/l)},e.prototype.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},e.prototype.equals=function(t){return!!t&&(this.a===t.a&&this.b===t.b&&this.c===t.c&&this.d===t.d&&this.e===t.e&&this.f===t.f)},e.prototype.round=function(t){return this.a=(0,s.A)(this.a,t),this.b=(0,s.A)(this.b,t),this.c=(0,s.A)(this.c,t),this.d=(0,s.A)(this.d,t),this.e=(0,s.A)(this.e,t),this.f=(0,s.A)(this.f,t),this},e.prototype.toArray=function(t){var e=[this.a,this.b,this.c,this.d,this.e,this.f];if((0,r.A)(t))for(var n=0;n<e.length;n++)e[n]=(0,s.A)(e[n],t);return e},e.prototype.toString=function(t,e){return void 0===e&&(e=","),this.toArray(t).join(e)},e.translate=function(t,n){return new e(1,0,0,1,t,n)},e.unit=function(){return new e(1,0,0,1,0,0)},e.rotate=function(t,n,i){var r=new e;return r.a=Math.cos((0,o.A)(t)),r.b=Math.sin((0,o.A)(t)),r.c=-r.b,r.d=r.a,r.e=n-n*r.a+i*r.b||0,r.f=i-i*r.a-n*r.b||0,r},e.scale=function(t,n){return new e(t,0,0,n,0,0)},e}(i.A);a.IDENTITY=a.unit();const l=a},1836:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var i=n(5123),r=n(7691),o=n(1454),s=n(8599),a=n(2575),l=n(6349),c=n(4635);const h=function(t){function e(e,n){t.call(this),this.x=e||0,this.y=n||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.x===this.x&&t.y===this.y},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.rotate=function(t,n){var i=e.create(n)||e.ZERO;return this.transform(l.A.rotate(t,i.x,i.y))},e.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this.geometryChange(),this},e.prototype.translateWith=function(t){return this.translate(t.x,t.y)},e.prototype.move=function(t,e){return this.x=this.y=0,this.translate(t,e)},e.prototype.scale=function(t,e){return void 0===e&&(e=t),this.x*=t,this.y*=e,this.geometryChange(),this},e.prototype.scaleCopy=function(t,e){return this.clone().scale(t,e)},e.prototype.transform=function(t){var e=(0,c.A)(t),n=this.x,i=this.y;return this.x=e.a*n+e.c*i+e.e,this.y=e.b*n+e.d*i+e.f,this.geometryChange(),this},e.prototype.transformCopy=function(t){var e=this.clone();return t&&e.transform(t),e},e.prototype.distanceTo=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},e.prototype.round=function(t){return this.x=(0,o.A)(this.x,t),this.y=(0,o.A)(this.y,t),this.geometryChange(),this},e.prototype.toArray=function(t){var e=(0,s.A)(t);return[e?(0,o.A)(this.x,t):this.x,e?(0,o.A)(this.y,t):this.y]},e.prototype.toString=function(t,e){void 0===e&&(e=" ");var n=this.x,i=this.y;return(0,s.A)(t)&&(n=(0,o.A)(n,t),i=(0,o.A)(i,t)),n+e+i},e.create=function(t,n){if((0,s.A)(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,n)},e.min=function(){for(var t=arguments,n=a.eN,i=a.eN,r=0;r<arguments.length;r++){var o=t[r];n=Math.min(o.x,n),i=Math.min(o.y,i)}return new e(n,i)},e.max=function(){for(var t=arguments,n=a.uo,i=a.uo,r=0;r<arguments.length;r++){var o=t[r];n=Math.max(o.x,n),i=Math.max(o.y,i)}return new e(n,i)},e.minPoint=function(){return new e(a.uo,a.uo)},e.maxPoint=function(){return new e(a.eN,a.eN)},n.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,n),e}((0,i.A)(r.A,["x","y"]))},2226:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(7691),r=n(1836),o=n(6145);const s=function(t){function e(e,n,i){void 0===e&&(e=new r.A),void 0===n&&(n=new o.A),void 0===i&&(i=0),t.call(this),this.setOrigin(e),this.setSize(n),this.setCornerRadius(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.origin.clone(),this.size.clone())},e.prototype.equals=function(t){return t&&t.origin.equals(this.origin)&&t.size.equals(this.size)},e.prototype.setOrigin=function(t){return this._observerField("origin",r.A.create(t)),this.geometryChange(),this},e.prototype.getOrigin=function(){return this.origin},e.prototype.setCornerRadius=function(t){return this.cornerRadius=Array.isArray(t)?t:[t,t],this.geometryChange(),this},e.prototype.getCornerRadius=function(){return this.cornerRadius},e.prototype.setSize=function(t){return this._observerField("size",o.A.create(t)),this.geometryChange(),this},e.prototype.getSize=function(){return this.size},e.prototype.width=function(){return this.size.width},e.prototype.height=function(){return this.size.height},e.prototype.topLeft=function(){return this.origin.clone()},e.prototype.bottomRight=function(){return this.origin.clone().translate(this.width(),this.height())},e.prototype.topRight=function(){return this.origin.clone().translate(this.width(),0)},e.prototype.bottomLeft=function(){return this.origin.clone().translate(0,this.height())},e.prototype.center=function(){return this.origin.clone().translate(this.width()/2,this.height()/2)},e.prototype.bbox=function(t){var n=this.topLeft().transformCopy(t),i=this.topRight().transformCopy(t),r=this.bottomRight().transformCopy(t),o=this.bottomLeft().transformCopy(t);return e.fromPoints(n,i,r,o)},e.prototype.transformCopy=function(t){return e.fromPoints(this.topLeft().transform(t),this.bottomRight().transform(t))},e.prototype.expand=function(t,e){return void 0===e&&(e=t),this.size.width+=2*t,this.size.height+=2*e,this.origin.translate(-t,-e),this},e.prototype.expandCopy=function(t,e){return this.clone().expand(t,e)},e.prototype.containsPoint=function(t){var e=this.origin,n=this.bottomRight();return!(t.x<e.x||t.y<e.y||n.x<t.x||n.y<t.y)},e.prototype._isOnPath=function(t,e){var n=this.expandCopy(e,e),i=this.expandCopy(-e,-e);return n.containsPoint(t)&&!i.containsPoint(t)},e.fromPoints=function(){var t=r.A.min.apply(null,arguments),n=r.A.max.apply(null,arguments);return new e(t,new o.A(n.x-t.x,n.y-t.y))},e.union=function(t,n){return e.fromPoints(r.A.min(t.topLeft(),n.topLeft()),r.A.max(t.bottomRight(),n.bottomRight()))},e.intersect=function(t,n){var i={left:t.topLeft().x,top:t.topLeft().y,right:t.bottomRight().x,bottom:t.bottomRight().y},o={left:n.topLeft().x,top:n.topLeft().y,right:n.bottomRight().x,bottom:n.bottomRight().y};if(i.left<=o.right&&o.left<=i.right&&i.top<=o.bottom&&o.top<=i.bottom)return e.fromPoints(new r.A(Math.max(i.left,o.left),Math.max(i.top,o.top)),new r.A(Math.min(i.right,o.right),Math.min(i.bottom,o.bottom)))},e}(i.A)},281:(t,e,n)=>{"use strict";n.d(e,{A:()=>S});var i=n(7691),r=n(2226),o=n(1836),s=n(289),a=n(562),l=n(2575);function c(t,e,n){var i=(0,a.A)(Math.atan2(e.y-t.y,e.x-t.x));return n.transformCopy((0,s.A)().rotate(-i,t)).x<t.x}function h(t,e,n){var i=1-t;return Math.pow(i,3)*n[0][e]+3*Math.pow(i,2)*t*n[1][e]+3*Math.pow(t,2)*i*n[2][e]+Math.pow(t,3)*n[3][e]}function u(t,e){return[-t[0][e]+3*t[1][e]-3*t[2][e]+t[3][e],3*(t[0][e]-2*t[1][e]+t[2][e]),3*(-t[0][e]+t[1][e]),t[0][e]]}var d=n(9919),p=n(15),f=n(1454);const g=function(t){function e(e,n){void 0===e&&(e=0),void 0===n&&(n=0),t.call(this),this.real=e,this.img=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.add=function(t){return new e((0,f.A)(this.real+t.real,d.P),(0,f.A)(this.img+t.img,d.P))},e.prototype.addConstant=function(t){return new e(this.real+t,this.img)},e.prototype.negate=function(){return new e(-this.real,-this.img)},e.prototype.multiply=function(t){return new e(this.real*t.real-this.img*t.img,this.real*t.img+this.img*t.real)},e.prototype.multiplyConstant=function(t){return new e(this.real*t,this.img*t)},e.prototype.nthRoot=function(t){var n=Math.atan2(this.img,this.real),i=Math.sqrt(Math.pow(this.img,2)+Math.pow(this.real,2)),r=Math.pow(i,1/t);return new e(r*Math.cos(n/t),r*Math.sin(n/t))},e.prototype.equals=function(t){return this.real===t.real&&this.img===t.img},e.prototype.isReal=function(){return 0===this.img},e}(p.A);function m(t){return t<0?-1:1}function y(t,e,n,i){if(0===t)return function(t,e,n){var i=Math.sqrt(Math.pow(e,2)-4*t*n);return[(-e+i)/(2*t),(-e-i)/(2*t)]}(e,n,i);var r,o,s,a,l,c,h,u=(3*t*n-Math.pow(e,2))/(3*Math.pow(t,2)),p=(2*Math.pow(e,3)-9*t*e*n+27*Math.pow(t,2)*i)/(27*Math.pow(t,3)),y=Math.pow(u/3,3)+Math.pow(p/2,2),v=new g(0,1),b=-e/(3*t);y<0?(r=new g(-p/2,Math.sqrt(-y)).nthRoot(3),o=new g(-p/2,-Math.sqrt(-y)).nthRoot(3)):(r=-p/2+Math.sqrt(y),r=new g(m(r)*Math.pow(Math.abs(r),1/3)),o=-p/2-Math.sqrt(y),o=new g(m(o)*Math.pow(Math.abs(o),1/3))),s=r.add(o),c=r.add(o).multiplyConstant(-.5),h=r.add(o.negate()).multiplyConstant(Math.sqrt(3)/2),a=c.add(v.multiply(h)),l=c.add(v.negate().multiply(h));var w=[];return s.isReal()&&w.push((0,f.A)(s.real+b,d.P)),a.isReal()&&w.push((0,f.A)(a.real+b,d.P)),l.isReal()&&w.push((0,f.A)(l.real+b,d.P)),w}function v(t,e,n,i,r){for(var o,s=u(t,i),a=y(s[0],s[1],s[2],s[3]-e[i]),l=0;l<a.length;l++)if(0<=a[l]&&a[l]<=1&&(o=h(a[l],n,t),Math.abs(o-e[n])<=r))return!0}var b=n(1833);var w=n(402),x=function(t){function e(e,n,i){t.call(this),this.anchor(e||new o.A),this.controlIn(n),this.controlOut(i)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bboxTo=function(t,e){var n=this.anchor().transformCopy(e),i=t.anchor().transformCopy(e);return this.controlOut()&&t.controlIn()?this._curveBoundingBox(n,this.controlOut().transformCopy(e),t.controlIn().transformCopy(e),i):this._lineBoundingBox(n,i)},e.prototype._lineBoundingBox=function(t,e){return r.A.fromPoints(t,e)},e.prototype._curveBoundingBox=function(t,e,n,i){var s=[t,e,n,i],a=this._curveExtremesFor(s,"x"),l=this._curveExtremesFor(s,"y"),c=_([a.min,a.max,t.x,i.x]),h=_([l.min,l.max,t.y,i.y]);return r.A.fromPoints(new o.A(c.min,h.min),new o.A(c.max,h.max))},e.prototype._curveExtremesFor=function(t,e){var n=this._curveExtremes(t[0][e],t[1][e],t[2][e],t[3][e]);return{min:h(n.min,e,t),max:h(n.max,e,t)}},e.prototype._curveExtremes=function(t,e,n,i){var r=t-3*e+3*n-i,o=-2*(t-2*e+n),s=t-e,a=Math.sqrt(o*o-4*r*s),l=0,c=1;0===r?0!==o&&(l=c=-s/o):isNaN(a)||(l=(-o+a)/(2*r),c=(-o-a)/(2*r));var h=Math.max(Math.min(l,c),0);(h<0||h>1)&&(h=0);var u=Math.min(Math.max(l,c),1);return(u>1||u<0)&&(u=1),{min:h,max:u}},e.prototype._intersectionsTo=function(t,e){var n;return n=this.controlOut()&&t.controlIn()?function(t,e,n){for(var i,r=u(t,"x"),o=y(r[0],r[1],r[2],r[3]-e.x),s=0,a=0;a<o.length;a++)i=h(o[a],"y",t),((0,b.A)(i,e.y)||i>e.y)&&((0===o[a]||1===o[a])&&n.bottomRight().x>e.x||0<o[a]&&o[a]<1)&&s++;return s}([this.anchor(),this.controlOut(),t.controlIn(),t.anchor()],e,this.bboxTo(t)):(0,w.A)(this.anchor(),t.anchor(),e),n},e.prototype._isOnCurveTo=function(t,e,n,i){if(this.bboxTo(t).expand(n,n).containsPoint(e)){var r=this.anchor(),o=this.controlOut(),a=t.controlIn(),l=t.anchor();if("start"===i&&r.distanceTo(e)<=n)return!c(r,o,e);if("end"===i&&l.distanceTo(e)<=n)return!c(l,a,e);var h=[r,o,a,l];if(v(h,e,"x","y",n)||v(h,e,"y","x",n))return!0;var u=(0,s.A)().rotate(45,e),d=[r.transformCopy(u),o.transformCopy(u),a.transformCopy(u),l.transformCopy(u)];return v(d,e,"x","y",n)||v(d,e,"y","x",n)}},e.prototype._isOnLineTo=function(t,e,n){var i=this.anchor(),o=t.anchor(),l=(0,a.A)(Math.atan2(o.y-i.y,o.x-i.x));return new r.A([i.x,i.y-n/2],[i.distanceTo(o),n]).containsPoint(e.transformCopy((0,s.A)().rotate(-l,i)))},e.prototype._isOnPathTo=function(t,e,n,i){return this.controlOut()&&t.controlIn()?this._isOnCurveTo(t,e,n/2,i):this._isOnLineTo(t,e,n)},e}((0,n(1284).A)(i.A,["anchor","controlIn","controlOut"]));function _(t){for(var e=t.length,n=l.eN,i=l.uo,r=0;r<e;r++)i=Math.max(i,t[r]),n=Math.min(n,t[r]);return{min:n,max:i}}const S=x},6145:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(7691),r=n(5123),o=n(8599),s=n(1454);const a=function(t){function e(e,n){t.call(this),this.width=e||0,this.height=n||0}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={ZERO:{configurable:!0}};return e.prototype.equals=function(t){return t&&t.width===this.width&&t.height===this.height},e.prototype.clone=function(){return new e(this.width,this.height)},e.prototype.toArray=function(t){var e=(0,o.A)(t);return[e?(0,s.A)(this.width,t):this.width,e?(0,s.A)(this.height,t):this.height]},e.create=function(t,n){if((0,o.A)(t))return t instanceof e?t:1===arguments.length&&2===t.length?new e(t[0],t[1]):new e(t,n)},n.ZERO.get=function(){return new e(0,0)},Object.defineProperties(e,n),e}((0,r.A)(i.A,["width","height"]))},4635:(t,e,n)=>{"use strict";function i(t){return t&&"function"==typeof t.matrix?t.matrix():t}n.d(e,{A:()=>i})},289:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(7691),r=n(4635),o=n(6349),s=n(1836),a=function(t){function e(e){void 0===e&&(e=o.A.unit()),t.call(this),this._matrix=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this._matrix.clone())},e.prototype.equals=function(t){return t&&t._matrix.equals(this._matrix)},e.prototype.translate=function(t,e){return this._matrix=this._matrix.multiplyCopy(o.A.translate(t,e)),this._optionsChange(),this},e.prototype.scale=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=null);var i=n;return i&&(i=s.A.create(i),this._matrix=this._matrix.multiplyCopy(o.A.translate(i.x,i.y))),this._matrix=this._matrix.multiplyCopy(o.A.scale(t,e)),i&&(this._matrix=this._matrix.multiplyCopy(o.A.translate(-i.x,-i.y))),this._optionsChange(),this},e.prototype.rotate=function(t,e){var n=s.A.create(e)||s.A.ZERO;return this._matrix=this._matrix.multiplyCopy(o.A.rotate(t,n.x,n.y)),this._optionsChange(),this},e.prototype.multiply=function(t){var e=(0,r.A)(t);return this._matrix=this._matrix.multiplyCopy(e),this._optionsChange(),this},e.prototype.matrix=function(t){return t?(this._matrix=t,this._optionsChange(),this):this._matrix},e.prototype._optionsChange=function(){this.optionsChange({field:"transform",value:this})},e}(i.A);const l=a;function c(t){return null===t?null:t instanceof l?t:new l(t)}},1986:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});const i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.optionsChange({field:"stops"})},e}(n(4655).A);var r=n(963),o=n(8599);function s(t){return function(e){return(0,o.A)(e)?(this.options.set(t,e),this):this.options.get(t)}}const a=function(t,e){var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var n=0;n<e.length;n++)t[e[n]]=s(e[n])}(n.prototype,e),n};var l=n(7691);const c=function(t){function e(e,n,i){t.call(this),this.options=new r.A({offset:e,color:n,opacity:(0,o.A)(i)?i:1}),this.options.addObserver(this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t){if((0,o.A)(t))return t instanceof e?t:t.length>1?new e(t[0],t[1],t[2]):new e(t.offset,t.color,t.opacity)},e}(a(l.A,["offset","color","opacity"]));var h=n(5071),u=function(t){function e(e){void 0===e&&(e={}),t.call(this),this.stops=new i(this._createStops(e.stops)),this.stops.addObserver(this),this._userSpace=e.userSpace,this.id=(0,h.A)()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Gradient"},e.prototype.userSpace=function(t){return(0,o.A)(t)?(this._userSpace=t,this.optionsChange(),this):this._userSpace},e.prototype._createStops=function(t){void 0===t&&(t=[]);for(var e=[],n=0;n<t.length;n++)e.push(c.create(t[n]));return e},e.prototype.addStop=function(t,e,n){this.stops.push(new c(t,e,n))},e.prototype.removeStop=function(t){var e=this.stops.indexOf(t);e>=0&&this.stops.splice(e,1)},e.prototype.optionsChange=function(t){this.trigger("optionsChange",{field:"gradient"+(t?"."+t.field:""),value:this})},e.prototype.geometryChange=function(){this.optionsChange()},Object.defineProperties(e.prototype,n),e}(l.A);const d=u},8703:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(1284),r=n(1836),o=n(1986);const s=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.start(e.start||new r.A),this.end(e.end||new r.A(1,0))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}((0,i.A)(o.A,["start","end"]))},4877:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var i=n(1284),r=n(1836),o=n(1986),s=n(8599);const a=function(t){function e(e){void 0===e&&(e={}),t.call(this,e),this.center(e.center||new r.A),this._radius=(0,s.A)(e.radius)?e.radius:1,this._fallbackFill=e.fallbackFill}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.radius=function(t){return(0,s.A)(t)?(this._radius=t,this.geometryChange(),this):this._radius},e.prototype.fallbackFill=function(t){return(0,s.A)(t)?(this._fallbackFill=t,this.optionsChange(),this):this._fallbackFill},e}((0,i.A)(o.A,["center"]))},9603:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(6349),r=n(4635),o=i.A.IDENTITY.toString();const s=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.bbox=function(t){var e,n=(0,r.A)(this.currentTransform(t)),i=n?n.toString():o;this._bboxCache&&this._matrixHash===i?e=this._bboxCache.clone():(e=this._bbox(n),this._bboxCache=e?e.clone():null,this._matrixHash=i);var s=this.options.get("stroke.width");return s&&e&&e.expand(s/2),e},e.prototype.geometryChange=function(){delete this._bboxCache,this.trigger("geometryChange",{element:this})},e}(t)}},1112:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8599);const r=function(t){return function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.fill=function(t,e){var n=this.options;if((0,i.A)(t)){if(t&&"Gradient"!==t.nodeType){var r={color:t};(0,i.A)(e)&&(r.opacity=e),n.set("fill",r)}else n.set("fill",t);return this}return n.get("fill")},e.prototype.stroke=function(t,e,n){return(0,i.A)(t)?(this.options.set("stroke.color",t),(0,i.A)(e)&&this.options.set("stroke.width",e),(0,i.A)(n)&&this.options.set("stroke.opacity",n),this):this.options.get("stroke")},e}(t)}},8199:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=function(t,e){return function(t){function n(){t.apply(this,arguments)}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.traverse=function(t){for(var n=this[e],i=0;i<n.length;i++){var r=n[i];r.traverse?r.traverse(t):t(r)}return this},n}(t)}},5123:(t,e,n)=>{"use strict";function i(t){return function(e){return this[t]!==e&&(this[t]=e,this.geometryChange()),this}}function r(t){return function(){return this[t]}}n.d(e,{A:()=>o});const o=function(t,e){var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var n=0;n<e.length;n++){var o=e[n],s=o.charAt(0).toUpperCase()+o.substring(1,o.length);t["set"+s]=i(o),t["get"+s]=r(o)}}(n.prototype,e),n}},8623:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(8599);function r(t){var e="_"+t;return function(t){return(0,i.A)(t)?(this._observerField(e,t),this.geometryChange(),this):this[e]}}const o=function(t,e){void 0===e&&(e=["geometry"]);var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var n=0;n<e.length;n++)t[e[n]]=r(e[n])}(n.prototype,e),n}},1284:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(8599),r=n(1836);function o(t){var e="_"+t;return function(t){return(0,i.A)(t)?(this._observerField(e,r.A.create(t)),this.geometryChange(),this):this[e]}}const s=function(t,e){var n=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(t);return function(t,e){for(var n=0;n<e.length;n++)t[e[n]]=o(e[n])}(n.prototype,e),n}},3018:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(6428),r=n(1112),o=n(9603),s=n(8623),a=n(1020),l=n(8599);const c=function(t){function e(e,n){void 0===e&&(e=new i.A),void 0===n&&(n={}),t.call(this,n),this.geometry(e),(0,l.A)(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Circle"},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype._containsPoint=function(t){return this.geometry().containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,n),e}((0,r.A)((0,o.A)((0,s.A)(a.A))))},1020:(t,e,n)=>{"use strict";n.d(e,{A:()=>p});var i=n(963),r=n(2226),o=n(6349),s=n(289),a=n(4635),l=n(7691),c=n(5071),h=n(8599),u=n(9929),d=n(7003);const p=function(t){function e(e){t.call(this),this._initOptions(e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Rect"},e.prototype._initOptions=function(t){void 0===t&&(t={});var e=t.clip,n=t.transform;n&&(t.transform=(0,s.A)(n)),e&&!e.id&&(e.id=(0,c.A)()),this.options=new i.A(t),this.options.addObserver(this)},e.prototype.transform=function(t){if(!(0,h.A)(t))return this.options.get("transform");this.options.set("transform",(0,s.A)(t))},e.prototype.parentTransform=function(){for(var t,e=this;e.parent;){var n=(e=e.parent).transform();n&&(t=n.matrix().multiplyCopy(t||o.A.unit()))}if(t)return(0,s.A)(t)},e.prototype.currentTransform=function(t){void 0===t&&(t=this.parentTransform());var e,n=this.transform(),i=(0,a.A)(n),r=(0,a.A)(t);if(e=i&&r?r.multiplyCopy(i):i||r)return(0,s.A)(e)},e.prototype.visible=function(t){return(0,h.A)(t)?(this.options.set("visible",t),this):!1!==this.options.get("visible")},e.prototype.clip=function(t){var e=this.options;return(0,h.A)(t)?(t&&!t.id&&(t.id=(0,c.A)()),e.set("clip",t),this):e.get("clip")},e.prototype.opacity=function(t){return(0,h.A)(t)?(this.options.set("opacity",t),this):(0,u.A)(this.options.get("opacity"),1)},e.prototype.className=function(t){return(0,h.A)(t)?(this.options.set("className",t),this):this.options.get("className")},e.prototype.clippedBBox=function(t){var e=this._clippedBBox(t);if(e){var n=this.clip();return n?r.A.intersect(e,n.bbox(t)):e}},e.prototype.containsPoint=function(t,e){if(this.visible()){var n=this.currentTransform(e),i=t;return n&&(i=t.transformCopy(n.matrix().invert())),this._hasFill()&&this._containsPoint(i)||this._isOnPath&&this._hasStroke()&&this._isOnPath(i)}return!1},e.prototype._hasFill=function(){var t=this.options.fill;return t&&!(0,d.A)(t.color)},e.prototype._hasStroke=function(){var t=this.options.stroke;return t&&t.width>0&&!(0,d.A)(t.color)},e.prototype._clippedBBox=function(t){return this.bbox(t)},Object.defineProperties(e.prototype,n),e}(l.A)},4655:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var i=n(7691),r=[].push,o=[].pop,s=[].splice,a=[].shift,l=[].slice,c=[].unshift;const h=function(t){function e(e){void 0===e&&(e=[]),t.call(this),this.length=0,this._splice(0,e.length,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.elements=function(t){return t?(this._splice(0,this.length,t),this._change(),this):this.slice(0)},e.prototype.push=function(){var t=arguments,e=r.apply(this,t);return this._add(t),e},e.prototype.slice=function(){return l.call(this)},e.prototype.pop=function(){var t=this.length,e=o.apply(this);return t&&this._remove([e]),e},e.prototype.splice=function(t,e){var n=l.call(arguments,2),i=this._splice(t,e,n);return this._change(),i},e.prototype.shift=function(){var t=this.length,e=a.apply(this);return t&&this._remove([e]),e},e.prototype.unshift=function(){var t=arguments,e=c.apply(this,t);return this._add(t),e},e.prototype.indexOf=function(t){for(var e=this.length,n=0;n<e;n++)if(this[n]===t)return n;return-1},e.prototype._splice=function(t,e,n){var i=s.apply(this,[t,e].concat(n));return this._clearObserver(i),this._setObserver(n),i},e.prototype._add=function(t){this._setObserver(t),this._change()},e.prototype._remove=function(t){this._clearObserver(t),this._change()},e.prototype._setObserver=function(t){for(var e=0;e<t.length;e++)t[e].addObserver(this)},e.prototype._clearObserver=function(t){for(var e=0;e<t.length;e++)t[e].removeObserver(this)},e.prototype._change=function(){},e}(i.A)},6651:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(1020),r=n(8199),o=n(9188),s=n(1626),a=n(8014);const l=function(t){function e(e){t.call(this,e),this.children=[]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Group"},e.prototype.childrenChange=function(t,e,n){this.trigger("childrenChange",{action:t,items:e,index:n})},e.prototype.append=function(){return(0,o.A)(this.children,arguments),this._reparent(arguments,this),this.childrenChange("add",arguments),this},e.prototype.insert=function(t,e){return this.children.splice(t,0,e),e.parent=this,this.childrenChange("add",[e],t),this},e.prototype.insertAt=function(t,e){return this.insert(e,t)},e.prototype.remove=function(t){var e=this.children.indexOf(t);return e>=0&&(this.children.splice(e,1),t.parent=null,this.childrenChange("remove",[t],e)),this},e.prototype.removeAt=function(t){if(0<=t&&t<this.children.length){var e=this.children[t];this.children.splice(t,1),e.parent=null,this.childrenChange("remove",[e],t)}return this},e.prototype.clear=function(){var t=this.children;return this.children=[],this._reparent(t,null),this.childrenChange("remove",t,0),this},e.prototype.bbox=function(t){return(0,s.A)(this.children,!0,this.currentTransform(t))},e.prototype.rawBBox=function(){return(0,s.A)(this.children,!1)},e.prototype._clippedBBox=function(t){return(0,a.A)(this.children,this.currentTransform(t))},e.prototype.currentTransform=function(t){return i.A.prototype.currentTransform.call(this,t)||null},e.prototype.containsPoint=function(t,e){if(this.visible())for(var n=this.children,i=this.currentTransform(e),r=0;r<n.length;r++)if(n[r].containsPoint(t,i))return!0;return!1},e.prototype._reparent=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=i.parent;r&&r!==this&&r.remove&&r.remove(i),i.parent=e}},Object.defineProperties(e.prototype,n),e}((0,r.A)(i.A,"children"))},677:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var i=n(8623),r=n(1020),o=n(2226),s=n(4635),a=n(8599);const l=function(t){function e(e,n,i){void 0===n&&(n=new o.A),void 0===i&&(i={}),t.call(this,i),this.src(e),this.rect(n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Image"},e.prototype.src=function(t){return(0,a.A)(t)?(this.options.set("src",t),this):this.options.get("src")},e.prototype.bbox=function(t){var e=(0,s.A)(this.currentTransform(t));return this._rect.bbox(e)},e.prototype.rawBBox=function(){return this._rect.bbox()},e.prototype._containsPoint=function(t){return this._rect.containsPoint(t)},e.prototype._hasFill=function(){return this.src()},Object.defineProperties(e.prototype,n),e}((0,i.A)(r.A,["rect"]))},116:(t,e,n)=>{"use strict";n.d(e,{P:()=>K,w:()=>q});const i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._change=function(){this.geometryChange()},e}(n(4655).A);var r=n(1020),o=n(281),s=n(1836),a=n(6964),l=n(1454),c=.333,h=.01,u="x",d="y";function p(t,e){var n=t.slice(0),i=[],r=n.length;if(r>2&&(f(0,n),r=n.length),r<2||2===r&&n[0].equals(n[1]))return i;var s,l,c=n[0],h=n[1],p=n[2];for(i.push(new o.A(c));c.equals(n[r-1]);)e=!0,n.pop(),r--;if(2===r){var g=v(c,h,u,d);return(0,a.A)(i).controlOut(w(g,c,h,u,d)),i.push(new o.A(h,x(g,c,h,u,d))),i}if(e){var y=m(c=n[r-1],h=n[0],p=n[1]);s=y[1],l=y[0]}else{s=w(v(c,h,u,d),c,h,u,d)}for(var b=s,_=0;_<=r-3;_++)if(f(_,n),_+3<=(r=n.length)){var S=m(c=n[_],h=n[_+1],p=n[_+2]);(0,a.A)(i).controlOut(b),b=S[1];var C=S[0];i.push(new o.A(h,C))}if(e){var k=m(c=n[r-2],h=n[r-1],p=n[0]);(0,a.A)(i).controlOut(b),i.push(new o.A(h,k[0])),(0,a.A)(i).controlOut(k[1]),i.push(new o.A(p,l))}else{var A=v(h,p,u,d);(0,a.A)(i).controlOut(b),i.push(new o.A(p,x(A,h,p,u,d)))}return i}function f(t,e){for(;e[t+1]&&(e[t].equals(e[t+1])||e[t+1].equals(e[t+2]));)e.splice(t+1,1)}function g(t,e){var n=(e.y-t.y)/(e.x-t.x);return[t.y-n*t.x,n]}function m(t,e,n){var i,r=u,o=d,s=!1,a=!1;if(function(t,e,n){var i=S(g(t,e),n.x);return t.x===e.x&&e.x===n.x||(0,l.A)(i,1)===(0,l.A)(n.y,1)}(t,e,n))i=v(t,e,u,d);else{var c,p={x:b(t,e,n,u),y:b(t,e,n,d)};if(p.x&&p.y)i=v(t,n,u,d),s=!0;else if(function(t,e,n){var i=!1;if(t.x===e.x)i=!0;else if(e.x===n.x)(e.y<n.y&&t.y<=e.y||n.y<e.y&&e.y<=t.y)&&(i=!0);else{var r=S(g(t,e),n.x);t.y<=e.y&&n.y<=r||e.y<=t.y&&n.y>=r||(i=!0)}return i}(t,e,n)&&(r=d,o=u),p[r])i=0;else c=n[o]<t[o]&&t[o]<=e[o]||t[o]<n[o]&&e[o]<=t[o]?C((n[o]-t[o])*(e[r]-t[r])):-C((n[r]-t[r])*(e[o]-t[o])),i=h*c,a=!0}var f=x(i,t,e,r,o);if(a){var m=r;r=o,o=m}var _=w(i,e,n,r,o);return s&&(y(t,e,f,i),y(e,n,_,i)),[f,_]}function y(t,e,n,i){t.y<e.y?e.y<n.y?(n.x=t.x+(e.y-t.y)/i,n.y=e.y):n.y<t.y&&(n.x=e.x-(e.y-t.y)/i,n.y=t.y):n.y<e.y?(n.x=t.x-(t.y-e.y)/i,n.y=e.y):t.y<n.y&&(n.x=e.x+(t.y-e.y)/i,n.y=t.y)}function v(t,e,n,i){var r=e[n]-t[n],o=e[i]-t[i];return 0===r?0:o/r}function b(t,e,n,i){return n[i]>e[i]&&e[i]>t[i]||n[i]<e[i]&&e[i]<t[i]}function w(t,e,n,i,r){var o=e[i],s=(n[i]-o)*c;return _(o+s,e[r]+s*t,i,r)}function x(t,e,n,i,r){var o=e[i],s=n[i],a=(s-o)*c;return _(s-a,n[r]-a*t,i,r)}function _(t,e,n,i){var r=new s.A;return r[n]=t,r[i]=e,r}function S(t,e){for(var n=t.length,i=0,r=0;r<n;r++)i+=Math.pow(e,r)*t[r];return i}function C(t){return t<=0?-1:1}var k=n(1112),A=n(9603),E=n(818),T=n(2226),M=n(6145),O=n(402),I=n(8599),D=n(9917),F={l:function(t,e){for(var n=e.parameters,i=e.position,r=0;r<n.length;r+=2){var o=new s.A(n[r],n[r+1]);e.isRelative&&o.translateWith(i),t.lineTo(o.x,o.y),i.x=o.x,i.y=o.y}},c:function(t,e){for(var n=e.parameters,i=e.position,r=0;r<n.length;r+=6){var o=new s.A(n[r],n[r+1]),a=new s.A(n[r+2],n[r+3]),l=new s.A(n[r+4],n[r+5]);e.isRelative&&(a.translateWith(i),o.translateWith(i),l.translateWith(i)),t.curveTo(o,a,l),i.x=l.x,i.y=l.y}},v:function(t,e){var n=e.isRelative?0:e.position.x;P(e.parameters,!0,n),this.l(t,e)},h:function(t,e){var n=e.isRelative?0:e.position.y;P(e.parameters,!1,n),this.l(t,e)},a:function(t,e){for(var n=e.parameters,i=e.position,r=0;r<n.length;r+=7){var o=n[r],a=n[r+1],l=n[r+2],c=n[r+3],h=n[r+4],u=new s.A(n[r+5],n[r+6]);e.isRelative&&u.translateWith(i),i.x===u.x&&i.y===u.y||(t.arcTo(u,o,a,c,h,l),i.x=u.x,i.y=u.y)}},s:function(t,e){var n,i=e.parameters,r=e.position,o=e.previousCommand;"s"!==o&&"c"!==o||(n=(0,a.A)((0,a.A)(t.paths).segments).controlIn());for(var l=0;l<i.length;l+=4){var c=new s.A(i[l],i[l+1]),h=new s.A(i[l+2],i[l+3]),u=void 0;e.isRelative&&(c.translateWith(r),h.translateWith(r)),u=n?R(n,r):r.clone(),n=c,t.curveTo(u,c,h),r.x=h.x,r.y=h.y}},q:function(t,e){for(var n=e.parameters,i=e.position,r=0;r<n.length;r+=4){var o=new s.A(n[r],n[r+1]),a=new s.A(n[r+2],n[r+3]);e.isRelative&&(o.translateWith(i),a.translateWith(i));var l=N(i,o,a);t.curveTo(l.controlOut,l.controlIn,a),i.x=a.x,i.y=a.y}},t:function(t,e){var n,i=e.parameters,r=e.position,o=e.previousCommand;"q"!==o&&"t"!==o||(n=(0,a.A)((0,a.A)(t.paths).segments).controlIn().clone().translateWith(r.scaleCopy(-1/3)).scale(1.5));for(var l=0;l<i.length;l+=2){var c=new s.A(i[l],i[l+1]);e.isRelative&&c.translateWith(r),n=n?R(n,r):r.clone();var h=N(r,n,c);t.curveTo(h.controlOut,h.controlIn,c),r.x=c.x,r.y=c.y}}};function P(t,e,n){for(var i=e?0:1,r=0;r<t.length;r+=2)t.splice(r+i,0,n)}function R(t,e){if(t&&e)return e.scaleCopy(2).translate(-t.x,-t.y)}var L=1/3;function N(t,e,n){var i=e.clone().scale(2/3);return{controlOut:i.clone().translateWith(t.scaleCopy(L)),controlIn:i.translateWith(n.scaleCopy(L))}}const B=F;var j=/([a-df-z]{1})([^a-df-z]*)(z)?/gi,z=/[,\s]?([+\-]?(?:\d*\.\d+|\d+)(?:[eE][+\-]?\d+)?)/g;const $=function(t,e){var n,i=new s.A;return e.replace(j,(function(e,r,o,s){var a=r.toLowerCase(),l=a===r,c=function(t){var e=[];return t.replace(z,(function(t,n){e.push(parseFloat(n))})),e}(o.trim());if("m"===a&&(l?(i.x+=c[0],i.y+=c[1]):(i.x=c[0],i.y=c[1]),t.moveTo(i.x,i.y),c.length>2&&(a="l",c.splice(0,2))),B[a])B[a](t,{parameters:c,position:i,isRelative:l,previousCommand:n}),s&&"z"===s.toLowerCase()&&t.close();else if("m"!==a)throw new Error("Error while parsing SVG path. Unsupported command: "+a);n=a})),t};var H=n(1626),U=n(8014),V=n(1901),W=" ",q=function(t){function e(e){t.call(this,e),this.segments=new i,this.segments.addObserver(this),(0,I.A)(this.options.stroke)||(this.stroke("#000"),(0,I.A)(this.options.stroke.lineJoin)||this.options.set("stroke.lineJoin","miter"))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Path"},e.prototype.moveTo=function(t,e){return this.suspend(),this.segments.elements([]),this.resume(),this.lineTo(t,e),this},e.prototype.lineTo=function(t,e){var n=(0,I.A)(e)?new s.A(t,e):t,i=new o.A(n);return this.segments.push(i),this},e.prototype.curveTo=function(t,e,n){if(this.segments.length>0){var i=(0,a.A)(this.segments),r=new o.A(n,e);this.suspend(),i.controlOut(t),this.resume(),this.segments.push(r)}return this},e.prototype.arc=function(t,e,n,i,r){if(this.segments.length>0){var o=(0,a.A)(this.segments).anchor(),l=(0,D.A)(t),c=new s.A(o.x-n*Math.cos(l),o.y-i*Math.sin(l)),h=new E.A(c,{startAngle:t,endAngle:e,radiusX:n,radiusY:i,anticlockwise:r});this._addArcSegments(h)}return this},e.prototype.arcTo=function(t,e,n,i,r,o){if(this.segments.length>0){var l=(0,a.A)(this.segments).anchor(),c=E.A.fromPoints(l,s.A.create(t),e,n,i,r,o);this._addArcSegments(c)}return this},e.prototype._addArcSegments=function(t){this.suspend();for(var e=t.curvePoints(),n=1;n<e.length;n+=3)this.curveTo(e[n],e[n+1],e[n+2]);this.resume(),this.geometryChange()},e.prototype.close=function(){return this.options.closed=!0,this.geometryChange(),this},e.prototype.rawBBox=function(){return this._bbox()},e.prototype.toString=function(t){var e,n,i,r="",o=this.segments,s=o.length;if(s>0){for(var a,l=[],c=(i=t,function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.map((function(t){return t.toString(i)})).join(W)}),h=1;h<s;h++){var u=(e=o[h-1],n=o[h],e.controlOut()&&n.controlIn()?"C":"L");u!==a&&(a=u,l.push(u)),"L"===u?l.push(c(o[h].anchor())):l.push(c(o[h-1].controlOut(),o[h].controlIn(),o[h].anchor()))}r="M"+c(o[0].anchor())+W+l.join(W),this.options.closed&&(r+="Z")}return r},e.prototype._containsPoint=function(t){for(var e,n,i=this.segments,r=i.length,o=0,s=1;s<r;s++)e=i[s-1],n=i[s],o+=e._intersectionsTo(n,t);return!this.options.closed&&i[0].anchor().equals(i[r-1].anchor())||(o+=(0,O.A)(i[0].anchor(),i[r-1].anchor(),t)),o%2!=0},e.prototype._isOnPath=function(t,e){var n=this.segments,i=n.length,r=e||this.options.stroke.width;if(i>1){if(n[0]._isOnPathTo(n[1],t,r,"start"))return!0;for(var o=2;o<=i-2;o++)if(n[o-1]._isOnPathTo(n[o],t,r))return!0;if(n[i-2]._isOnPathTo(n[i-1],t,r,"end"))return!0}return!1},e.prototype._bbox=function(t){var e,n=this.segments,i=n.length;if(1===i){var r=n[0].anchor().transformCopy(t);e=new T.A(r,M.A.ZERO)}else if(i>0)for(var o=1;o<i;o++){var s=n[o-1].bboxTo(n[o],t);e=e?T.A.union(e,s):s}return e},e.parse=function(t,e){return K.parse(t,e)},e.fromRect=function(t,n){var i=new e(n),r=t.cornerRadius,o=r[0],s=r[1];if(0===o&&0===s)i.moveTo(t.topLeft()).lineTo(t.topRight()).lineTo(t.bottomRight()).lineTo(t.bottomLeft()).close();else{var a=t.origin,l=a.x,c=a.y,h=t.width(),u=t.height();o=(0,V.A)(o,0,h/2),s=(0,V.A)(s,0,u/2),i.moveTo(l+o,c).lineTo(l+h-o,c).arcTo([l+h,c+s],o,s,!1).lineTo(l+h,c+u-s).arcTo([l+h-o,c+u],o,s,!1).lineTo(l+o,c+u).arcTo([l,c+u-s],o,s,!1).lineTo(l,c+s).arcTo([l+o,c],o,s,!1)}return i},e.fromPoints=function(t,n){if(t){for(var i=new e(n),r=0;r<t.length;r++){var o=s.A.create(t[r]);o&&(0===r?i.moveTo(o):i.lineTo(o))}return i}},e.curveFromPoints=function(t,n){if(t){var i=p(t),r=new e(n);return r.segments.push.apply(r.segments,i),r}},e.fromArc=function(t,n){var i=new e(n),r=t.startAngle,o=t.pointAt(r);return i.moveTo(o.x,o.y),i.arc(r,t.endAngle,t.radiusX,t.radiusY,t.anticlockwise),i},Object.defineProperties(e.prototype,n),e}((0,k.A)((0,A.A)(r.A))),K=function(t){function e(e){t.call(this,e),this.paths=new i,this.paths.addObserver(this),(0,I.A)(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return e.parse=function(t,n){var i=new e(n);return $(i,t)},e.prototype.toString=function(t){var e=this.paths,n="";if(e.length>0){for(var i=[],r=0;r<e.length;r++)i.push(e[r].toString(t));n=i.join(W)}return n},n.nodeType.get=function(){return"MultiPath"},e.prototype.moveTo=function(t,e){var n=new q;return n.moveTo(t,e),this.paths.push(n),this},e.prototype.lineTo=function(t,e){return this.paths.length>0&&(0,a.A)(this.paths).lineTo(t,e),this},e.prototype.curveTo=function(t,e,n){return this.paths.length>0&&(0,a.A)(this.paths).curveTo(t,e,n),this},e.prototype.arc=function(t,e,n,i,r){return this.paths.length>0&&(0,a.A)(this.paths).arc(t,e,n,i,r),this},e.prototype.arcTo=function(t,e,n,i,r,o){return this.paths.length>0&&(0,a.A)(this.paths).arcTo(t,e,n,i,r,o),this},e.prototype.close=function(){return this.paths.length>0&&(0,a.A)(this.paths).close(),this},e.prototype._bbox=function(t){return(0,H.A)(this.paths,!0,t)},e.prototype.rawBBox=function(){return(0,H.A)(this.paths,!1)},e.prototype._containsPoint=function(t){for(var e=this.paths,n=0;n<e.length;n++)if(e[n]._containsPoint(t))return!0;return!1},e.prototype._isOnPath=function(t){for(var e=this.paths,n=this.options.stroke.width,i=0;i<e.length;i++)if(e[i]._isOnPath(t,n))return!0;return!1},e.prototype._clippedBBox=function(t){return(0,U.A)(this.paths,this.currentTransform(t))},Object.defineProperties(e.prototype,n),e}((0,k.A)((0,A.A)(r.A)))},3657:(t,e,n)=>{"use strict";n.d(e,{A:()=>u});var i=n(1020),r=n(1836),o=n(2226),s=n(4635),a=n(1112),l=n(1284),c=n(8599),h=n(5753);const u=function(t){function e(e,n,i){void 0===n&&(n=new r.A),void 0===i&&(i={}),t.call(this,i),this.content(e),this.position(n),this.options.font||(this.options.font="12px sans-serif"),(0,c.A)(this.options.fill)||this.fill("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Text"},e.prototype.content=function(t){return(0,c.A)(t)?(this.options.set("content",t),this):this.options.get("content")},e.prototype.measure=function(){return(0,h.A)(this.content(),{font:this.options.get("font")})},e.prototype.rect=function(){var t=this.measure(),e=this.position().clone();return new o.A(e,[t.width,t.height])},e.prototype.bbox=function(t){var e=(0,s.A)(this.currentTransform(t));return this.rect().bbox(e)},e.prototype.rawBBox=function(){return this.rect().bbox()},e.prototype._containsPoint=function(t){return this.rect().containsPoint(t)},Object.defineProperties(e.prototype,n),e}((0,a.A)((0,l.A)(i.A,["position"])))},1626:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2226);function r(t,e,n){for(var r,o=0;o<t.length;o++){var s=t[o];if(s.visible()){var a=e?s.bbox(n):s.rawBBox();a&&(r=r?i.A.union(r,a):a)}}return r}},8014:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2226);function r(t,e){for(var n,r=0;r<t.length;r++){var o=t[r];if(o.visible()){var s=o.clippedBBox(e);s&&(n=n?i.A.union(n,s):s)}}return n}},9306:(t,e,n)=>{"use strict";n.d(e,{A:()=>Ot});var i=n(6324),r=n(7103),o=n(15),s=n(853),a=n(8599);function l(t,e){return(0,a.A)(e)&&null!==e?" "+t+'="'+e+'" ':""}function c(t){for(var e="",n=0;n<t.length;n++)e+=l(t[n][0],t[n][1]);return e}function h(t){for(var e="",n=0;n<t.length;n++){var i=t[n][1];(0,a.A)(i)&&(e+=t[n][0]+":"+i+";")}if(""!==e)return e}const u={};var d="http://www.w3.org/2000/svg",p="none",f="data-style",g=function(t){return t.replace(/\sstyle=/g," "+f+"=")},m=function(t){Array.from(t.querySelectorAll("["+f+"]")).forEach((function(t){var e=t.getAttribute(f);t.removeAttribute(f),function(t,e){t.split(";").filter((function(t){return""!==t})).forEach((function(t){var n=t.split(":");e.style[n[0].trim()]=n[1].trim()}))}(e,t)}))},y=function(t,e){t.innerHTML=g(e),m(t)};if("undefined"!=typeof document){var v="<svg xmlns='"+d+"'></svg>",b=document.createElement("div"),w="undefined"!=typeof DOMParser;b.innerHTML=v,w&&b.firstChild.namespaceURI!==d&&(y=function(t,e){var n=(new DOMParser).parseFromString(g(e),"text/xml");m(n);var i=document.adoptNode(n.documentElement);t.innerHTML="",t.appendChild(i)})}const x=y;var _=n(3452),S=/&/g,C=/</g,k=/"/g,A=/'/g,E=/>/g;function T(t){return String(t).replace(S,"&amp;").replace(C,"&lt;").replace(E,"&gt;").replace(k,"&quot;").replace(A,"&#39;")}var M="transform",O={clip:"clip-path",fill:"fill"};function I(t,e){return"clip"===t||"fill"===t&&(!e||"Gradient"===e.nodeType)}var D=function(t){function e(e,n){t.call(this,e),this.definitions={},this.options=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.destroy=function(){this.element&&(this.element._kendoNode=null,this.element=null),this.clearDefinitions(),t.prototype.destroy.call(this)},e.prototype.load=function(t,e){for(var n=this,i=0;i<t.length;i++){var r=t[i],o=r.children,s=new u[r.nodeType](r,n.options);(0,a.A)(e)?n.insertAt(s,e):n.append(s),s.createDefinitions(),o&&o.length>0&&s.load(o);var l=n.element;l&&s.attachTo(l,e)}},e.prototype.root=function(){for(var t=this;t.parent;)t=t.parent;return t},e.prototype.attachTo=function(t,e){var n=document.createElement("div");x(n,"<svg xmlns='"+d+"' version='1.1'>"+this.render()+"</svg>");var i=n.firstChild.firstChild;i&&((0,a.A)(e)?t.insertBefore(i,t.childNodes[e]||null):t.appendChild(i),this.setElement(i))},e.prototype.setElement=function(t){this.element&&(this.element._kendoNode=null),this.element=t,this.element._kendoNode=this;for(var e=this.childNodes,n=0;n<e.length;n++){var i=t.childNodes[n];e[n].setElement(i)}},e.prototype.clear=function(){this.clearDefinitions(),this.element&&(this.element.innerHTML="");for(var t=this.childNodes,e=0;e<t.length;e++)t[e].destroy();this.childNodes=[]},e.prototype.removeSelf=function(){if(this.element){var e=this.element.parentNode;e&&e.removeChild(this.element),this.element=null}t.prototype.removeSelf.call(this)},e.prototype.template=function(){return this.renderChildren()},e.prototype.render=function(){return this.template()},e.prototype.renderChildren=function(){for(var t=this.childNodes,e="",n=0;n<t.length;n++)e+=t[n].render();return e},e.prototype.optionsChange=function(e){var n=e.field,i=e.value;"visible"===n?this.css("display",i?"":p):O[n]&&I(n,i)?this.updateDefinition(n,i):"opacity"===n?this.attr("opacity",i):"cursor"===n?this.css("cursor",i):"id"===n&&(i?this.attr("id",i):this.removeAttr("id")),t.prototype.optionsChange.call(this,e)},e.prototype.accessibilityOptionsChange=function(t){var e=t.field,n=t.value;"role"===e?n?this.attr("role",n):this.removeAttr("role"):"ariaLabel"===e?n?this.attr("aria-label",T(n)):this.removeAttr("aria-label"):"ariaRoleDescription"===e?n?this.attr("aria-roledescription",T(n)):this.removeAttr("aria-roledescription"):"ariaChecked"===e?(0,a.A)(n)?this.attr("aria-checked",n):this.removeAttr("aria-checked"):"className"===e&&this.className(n)},e.prototype.attr=function(t,e){this.element&&this.element.setAttribute(t,e)},e.prototype.allAttr=function(t){for(var e=0;e<t.length;e++)this.attr(t[e][0],t[e][1])},e.prototype.toggleAttr=function(t,e){e?this.attr(t,e):this.removeAttr(t)},e.prototype.css=function(t,e){this.element&&(this.element.style[t]=e)},e.prototype.allCss=function(t){for(var e=0;e<t.length;e++)this.css(t[e][0],t[e][1])},e.prototype.className=function(t){var e,n=this;this.element&&((e=this.element.classList).remove.apply(e,this.element.classList),t.split(" ").forEach((function(t){n.element.classList.add(t)})))},e.prototype.removeAttr=function(t){this.element&&this.element.removeAttribute(t)},e.prototype.mapTransform=function(t){var e=[];return t&&e.push([M,"matrix("+t.matrix().toString(6)+")"]),e},e.prototype.renderTransform=function(){return c(this.mapTransform(this.srcElement.transform()))},e.prototype.transformChange=function(t){t?this.allAttr(this.mapTransform(t)):this.removeAttr(M)},e.prototype.mapStyle=function(){var t=this.srcElement.options,e=[["cursor",t.cursor]];return!1===t.visible&&e.push(["display",p]),e},e.prototype.renderStyle=function(){return l("style",h(this.mapStyle(!0)))},e.prototype.renderOpacity=function(){return l("opacity",this.srcElement.options.opacity)},e.prototype.renderId=function(){return l("id",this.srcElement.options.id)},e.prototype.renderClassName=function(){return l("class",this.srcElement.options.className)},e.prototype.renderRole=function(){return l("role",this.srcElement.options.role)},e.prototype.renderAriaLabel=function(){var t=this.srcElement.options.ariaLabel;return t&&(t=T(t)),l("aria-label",t)},e.prototype.renderAriaRoleDescription=function(){var t=this.srcElement.options.ariaRoleDescription;return t&&(t=T(t)),l("aria-roledescription",t)},e.prototype.renderAriaChecked=function(){return l("aria-checked",this.srcElement.options.ariaChecked)},e.prototype.createDefinitions=function(){var t=this.srcElement,e=this.definitions;if(t){var n,i=t.options;for(var r in O){var o=i.get(r);o&&I(r,o)&&(e[r]=o,n=!0)}n&&this.definitionChange({action:"add",definitions:e})}},e.prototype.definitionChange=function(t){this.parent&&this.parent.definitionChange(t)},e.prototype.updateDefinition=function(t,e){var n=this.definitions,i=n[t],r=O[t],o={};i&&(o[t]=i,this.definitionChange({action:"remove",definitions:o}),delete n[t]),e?(o[t]=e,this.definitionChange({action:"add",definitions:o}),n[t]=e,this.attr(r,this.refUrl(e.id))):i&&this.removeAttr(r)},e.prototype.clearDefinitions=function(){var t=this.definitions;this.definitionChange({action:"remove",definitions:t}),this.definitions={}},e.prototype.renderDefinitions=function(){return c(this.mapDefinitions())},e.prototype.mapDefinitions=function(){var t=this.definitions,e=[];for(var n in t)e.push([O[n],this.refUrl(t[n].id)]);return e},e.prototype.refUrl=function(t){var e=(this.options||{}).skipBaseHref,n=this.baseUrl().replace(/'/g,"\\'");return"url("+(e?"":n)+"#"+t+")"},e.prototype.baseUrl=function(){return function(){var t=document.getElementsByTagName("base")[0],e=document.location.href,n="";if(t&&!(_.A.browser||{}).msie){var i=e.indexOf("#");-1!==i&&(e=e.substring(0,i)),n=e}return n}()},e}(s.A);const F=D;var P=n(8703),R=n(4877),L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<stop "+this.renderOffset()+" "+this.renderStyle()+" />"},e.prototype.renderOffset=function(){return l("offset",this.srcElement.offset())},e.prototype.mapStyle=function(){var t=this.srcElement;return[["stop-color",t.color()],["stop-opacity",t.opacity()]]},e.prototype.optionsChange=function(t){"offset"===t.field?this.attr(t.field,t.value):"color"!==t.field&&"opacity"!==t.field||this.css("stop-"+t.field,t.value)},e}(F);const N=L;var B=function(t){function e(e){t.call(this,e),this.id=e.id,this.loadStops()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.loadStops=function(){for(var t=this.srcElement.stops,e=this.element,n=0;n<t.length;n++){var i=new N(t[n]);this.append(i),e&&i.attachTo(e)}},e.prototype.optionsChange=function(t){"gradient.stops"===t.field?(s.A.prototype.clear.call(this),this.loadStops()):"gradient"===t.field&&this.allAttr(this.mapCoordinates())},e.prototype.renderCoordinates=function(){return c(this.mapCoordinates())},e.prototype.mapSpace=function(){return["gradientUnits",this.srcElement.userSpace()?"userSpaceOnUse":"objectBoundingBox"]},e}(F);const j=B;var z=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<linearGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</linearGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.start(),n=t.end();return[["x1",e.x],["y1",e.y],["x2",n.x],["y2",n.y],this.mapSpace()]},e}(j);const $=z;var H=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<radialGradient id='"+this.id+"' "+this.renderCoordinates()+">"+this.renderChildren()+"</radialGradient>"},e.prototype.mapCoordinates=function(){var t=this.srcElement,e=t.center(),n=t.radius();return[["cx",e.x],["cy",e.y],["r",n],this.mapSpace()]},e}(j);const U=H;var V=function(t){function e(e){t.call(this),this.srcElement=e,this.id=e.id,this.load([e])}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderClipRule=function(){return l("clip-rule","evenodd")},e.prototype.template=function(){return"<clipPath "+this.renderClipRule()+" id='"+this.id+"'>"+this.renderChildren()+"</clipPath>"},e}(F);const W=V;var q=function(t){function e(){t.call(this),this.definitionMap={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t},e.prototype.template=function(){return"<defs>"+this.renderChildren()+"</defs>"},e.prototype.definitionChange=function(t){var e=t.definitions,n=t.action;"add"===n?this.addDefinitions(e):"remove"===n&&this.removeDefinitions(e)},e.prototype.createDefinition=function(t,e){var n;return"clip"===t?n=W:"fill"===t&&(e instanceof P.A?n=$:e instanceof R.A&&(n=U)),new n(e)},e.prototype.addDefinitions=function(t){for(var e in t)this.addDefinition(e,t[e])},e.prototype.addDefinition=function(t,e){var n=this.element,i=this.definitionMap,r=e.id,o=i[r];if(o)o.count++;else{var s=this.createDefinition(t,e);i[r]={element:s,count:1},this.append(s),n&&s.attachTo(this.element)}},e.prototype.removeDefinitions=function(t){for(var e in t)this.removeDefinition(t[e])},e.prototype.removeDefinition=function(t){var e=this.definitionMap,n=t.id,i=e[n];i&&(i.count--,0===i.count&&(this.remove(this.childNodes.indexOf(i.element),1),delete e[n]))},e}(F);const K=q;var X=function(t){function e(e){t.call(this),this.options=e,this.defs=new K}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.attachTo=function(t){this.element=t,this.defs.attachTo(t.firstElementChild)},e.prototype.clear=function(){s.A.prototype.clear.call(this)},e.prototype.template=function(){return this.defs.render()+this.renderChildren()},e.prototype.definitionChange=function(t){this.defs.definitionChange(t)},e}(F);const G=X;var Y=n(6651),J=n(289),Z=n(1081),Q=n(4653),tt=n(2336),et=n(7003),nt=n(2464),it={"fill.opacity":"fill-opacity","stroke.color":"stroke","stroke.width":"stroke-width","stroke.opacity":"stroke-opacity"},rt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.attr("d",this.renderData()),this.invalidate()},e.prototype.optionsChange=function(e){switch(e.field){case"fill":e.value?this.allAttr(this.mapFill(e.value)):this.removeAttr("fill");break;case"fill.color":this.allAttr(this.mapFill({color:e.value}));break;case"stroke":e.value?this.allAttr(this.mapStroke(e.value)):this.removeAttr("stroke");break;case"transform":this.transformChange(e.value);break;default:var n=it[e.field];n&&this.attr(n,e.value)}this.accessibilityOptionsChange(e),t.prototype.optionsChange.call(this,e)},e.prototype.content=function(){this.element&&(this.element.textContent=this.srcElement.content())},e.prototype.renderData=function(){return this.srcElement.toString(3)||void 0},e.prototype.mapStroke=function(t){var e=[];return t&&!(0,et.A)(t.color)?(e.push(["stroke",t.color]),e.push(["stroke-width",t.width]),e.push(["stroke-linecap",this.renderLinecap(t)]),e.push(["stroke-linejoin",t.lineJoin]),(0,a.A)(t.opacity)&&e.push(["stroke-opacity",t.opacity]),(0,a.A)(t.dashType)&&e.push(["stroke-dasharray",this.renderDashType(t)])):e.push(["stroke",p]),e},e.prototype.renderStroke=function(){return c(this.mapStroke(this.srcElement.options.stroke))},e.prototype.renderDashType=function(t){var e=t.dashType,n=t.width;if(void 0===n&&(n=1),e&&e!==nt.I$){for(var i=nt.MT[e.toLowerCase()],r=[],o=0;o<i.length;o++)r.push(i[o]*n);return r.join(" ")}},e.prototype.renderLinecap=function(t){var e=t.dashType,n=t.lineCap;return e&&"solid"!==e?nt.SQ:n},e.prototype.mapFill=function(t){var e=[];return t&&"Gradient"===t.nodeType||(t&&!(0,et.A)(t.color)?(e.push(["fill",t.color]),(0,a.A)(t.opacity)&&e.push(["fill-opacity",t.opacity])):e.push(["fill",p])),e},e.prototype.renderFill=function(){return c(this.mapFill(this.srcElement.options.fill))},e.prototype.template=function(){return"<path "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" "+l("d",this.renderData())+this.renderStroke()+this.renderFill()+this.renderDefinitions()+this.renderTransform()+this.renderClassName()+" "+this.renderRole()+this.renderAriaLabel()+" "+this.renderAriaRoleDescription()+this.renderAriaChecked()+" ></path>"},e}(F);const ot=rt;var st=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toPath().toString(3)},e}(ot);const at=st;var lt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.center();this.attr("cx",t.x),this.attr("cy",t.y),this.attr("r",this.radius()),this.invalidate()},e.prototype.center=function(){return this.srcElement.geometry().center},e.prototype.radius=function(){return this.srcElement.geometry().radius},e.prototype.template=function(){return"<circle "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+"cx='"+this.center().x+"' cy='"+this.center().y+"' r='"+this.radius()+"'"+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+this.renderClassName()+" "+this.renderRole()+this.renderAriaLabel()+" "+this.renderAriaRoleDescription()+this.renderAriaChecked()+" "+this.renderTransform()+" ></circle>"},e}(ot);const ct=lt;var ht=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.template=function(){return"<g"+(this.renderId()+this.renderTransform()+this.renderClassName()+this.renderStyle()+this.renderOpacity()+this.renderRole()+this.renderAriaLabel()+this.renderAriaRoleDescription()+this.renderAriaChecked()+this.renderDefinitions())+">"+this.renderChildren()+"</g>"},e.prototype.optionsChange=function(e){var n=e.field,i=e.value;"transform"===n&&this.transformChange(i),this.accessibilityOptionsChange(e),t.prototype.optionsChange.call(this,e)},e}(F);const ut=ht;var dt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){this.allAttr(this.mapPosition()),this.invalidate()},e.prototype.optionsChange=function(e){"src"===e.field&&this.allAttr(this.mapSource()),t.prototype.optionsChange.call(this,e)},e.prototype.mapPosition=function(){var t=this.srcElement.rect(),e=t.topLeft();return[["x",e.x],["y",e.y],["width",t.width()+"px"],["height",t.height()+"px"]]},e.prototype.renderPosition=function(){return c(this.mapPosition())},e.prototype.mapSource=function(t){var e=this.srcElement.src();return t&&(e=T(e)),[["xlink:href",e]]},e.prototype.renderSource=function(){return c(this.mapSource(!0))},e.prototype.template=function(){return"<image preserveAspectRatio='none' "+this.renderId()+" "+this.renderStyle()+" "+this.renderTransform()+" "+this.renderOpacity()+this.renderPosition()+" "+this.renderSource()+" "+this.renderDefinitions()+this.renderClassName()+" "+this.renderRole()+this.renderAriaLabel()+" "+this.renderAriaRoleDescription()+this.renderAriaChecked()+" ></image>"},e}(ot);const pt=dt;var ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.renderData=function(){return this.srcElement.toString(3)||"undefined"},e}(ot);const gt=ft;var mt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.srcElement.geometry();this.attr("x",t.origin.x),this.attr("y",t.origin.y),this.attr("width",t.size.width),this.attr("height",t.size.height),this.attr("rx",t.cornerRadius[0]),this.attr("ry",t.cornerRadius[1]),this.invalidate()},e.prototype.size=function(){return this.srcElement.geometry().size},e.prototype.origin=function(){return this.srcElement.geometry().origin},e.prototype.rx=function(){return this.srcElement.geometry().cornerRadius[0]},e.prototype.ry=function(){return this.srcElement.geometry().cornerRadius[1]},e.prototype.template=function(){return"<rect "+this.renderId()+" "+this.renderStyle()+" "+this.renderOpacity()+" x='"+this.origin().x+"' y='"+this.origin().y+"' rx='"+this.rx()+"' ry='"+this.ry()+"' width='"+this.size().width+"' height='"+this.size().height+"' "+this.renderStroke()+" "+this.renderFill()+" "+this.renderDefinitions()+" "+this.renderTransform()+this.renderClassName()+" "+this.renderRole()+this.renderAriaLabel()+" "+this.renderAriaRoleDescription()+this.renderAriaChecked()+" />"},e}(ot);const yt=mt;var vt=n(9581),bt=/&(?:[a-zA-Z]+|#\d+);/g;function wt(t){if(!t||"string"!=typeof t||!bt.test(t))return t;var e=wt._element;return bt.lastIndex=0,t.replace(bt,(function(t){return e.innerHTML=t,e.textContent||e.innerText}))}"undefined"!=typeof document&&(wt._element=document.createElement("span"));var xt=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.geometryChange=function(){var t=this.pos();this.attr("x",t.x),this.attr("y",t.y),this.invalidate()},e.prototype.optionsChange=function(e){"font"===e.field?(this.attr("style",h(this.mapStyle())),this.geometryChange()):"content"===e.field&&t.prototype.content.call(this,this.srcElement.content()),t.prototype.optionsChange.call(this,e)},e.prototype.mapStyle=function(e){var n=t.prototype.mapStyle.call(this,e),i=this.srcElement.options.font;return e&&(i=T(i)),n.push(["font",i],["white-space","pre"]),n},e.prototype.pos=function(){var t=this.srcElement.position(),e=this.srcElement.measure();return t.clone().setY(t.y+e.baseline)},e.prototype.renderContent=function(){var t=this.srcElement.content();return t=T(t=wt(t)),(0,vt.fQ)(t)},e.prototype.renderTextAnchor=function(){var t;return!(this.options||{}).rtl||_.A.browser.msie||_.A.browser.edge||(t="end"),l("text-anchor",t)},e.prototype.renderPaintOrder=function(){var t=this.srcElement.options.paintOrder;return t?l("paint-order",t):""},e.prototype.template=function(){return"<text "+this.renderId()+" "+this.renderTextAnchor()+" "+this.renderStyle()+" "+this.renderOpacity()+"x='"+this.pos().x+"' y='"+this.pos().y+"' "+this.renderStroke()+" "+this.renderTransform()+" "+this.renderDefinitions()+this.renderPaintOrder()+this.renderFill()+this.renderClassName()+" "+this.renderRole()+this.renderAriaLabel()+" "+this.renderAriaRoleDescription()+this.renderAriaChecked()+">"+this.renderContent()+"</text>"},e}(ot);const _t=xt;u.Arc=at,u.Circle=ct,u.Group=ut,u.Image=pt,u.MultiPath=gt,u.Path=ot,u.Rect=yt,u.Text=_t;const St=function(t){function e(e,n){t.call(this,e,n),this._root=new G(Object.assign({rtl:"rtl"===(0,Z.A)(e,"direction").direction},this.options)),x(this.element,this._template("")),this._rootElement=this.element.firstElementChild,this._rootElement.style.width="100%",this._rootElement.style.height="100%",this._rootElement.style.overflow="hidden",function(t){var e;try{e=t.getScreenCTM?t.getScreenCTM():null}catch(t){}if(e){var n=-e.e%1,i=-e.f%1,r=t.style;0===n&&0===i||(r.left=n+"px",r.top=i+"px")}}(this._rootElement),this._root.attachTo(this._rootElement),(0,Q.A)(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove}),this.resize()}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={type:{configurable:!0}};return n.type.get=function(){return"svg"},e.prototype.destroy=function(){this._root&&(this._root.destroy(),this._root=null,this._rootElement=null,(0,tt.A)(this.element,{click:this._click,mouseover:this._mouseenter,mouseout:this._mouseleave,mousemove:this._mousemove})),t.prototype.destroy.call(this)},e.prototype.translate=function(t){var e=Math.round(t.x)+" "+Math.round(t.y)+" "+this._size.width+" "+this._size.height;this._offset=t,this._rootElement.setAttribute("viewBox",e)},e.prototype.draw=function(e){t.prototype.draw.call(this,e),this._root.load([e])},e.prototype.clear=function(){t.prototype.clear.call(this),this._root.clear()},e.prototype.svg=function(){return"<?xml version='1.0' ?>"+this._template()},e.prototype.exportVisual=function(){var t=this._visual,e=this._offset;if(e){var n=new Y.A;n.children.push(t),n.transform((0,J.A)().translate(-e.x,-e.y)),t=n}return t},e.prototype._resize=function(){this._offset&&this.translate(this._offset)},e.prototype._template=function(t){return"<svg "+("string"==typeof t?t:"style='width: 100%; height: 100%; overflow: hidden;' ")+"xmlns='"+d+"' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1'>"+this._root.render()+"</svg>"},Object.defineProperties(e.prototype,n),e}(i.A);var Ct,kt,At=n(1123),Et=function(){return"undefined"!=typeof document};const Tt=function(t){function e(){t.call(this),this._items=[{name:"svg",type:St},{name:"canvas",type:At.A}]}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={support:{configurable:!0},current:{configurable:!0}};return n.support.get=function(){return kt||(kt={canvas:Et()&&document.createElement("canvas").getContext,svg:Et()&&document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}),kt},n.current.get=function(){return Ct||(Ct=new e),Ct},e.prototype.create=function(t,e){var n=this._items,i=n[0];if(e&&e.type)for(var o=e.type.toLowerCase(),s=0;s<n.length;s++)if(n[s].name===o){i=n[s];break}if(i)return new i.type(t,e);(0,r.A)("Warning: Unable to create Kendo UI Drawing Surface. Possible causes:\n- The browser does not support SVG and Canvas. User agent: "+navigator.userAgent)},Object.defineProperties(e,n),e}(o.A);var Mt=function(t){function e(){t.apply(this,arguments)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={support:{configurable:!0}};return n.support.get=function(){return Tt.support},e.create=function(t,e){return Tt.current.create(t,e)},Object.defineProperties(e,n),e}(i.A);const Ot=Mt},4127:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=function(t){function e(e){t.call(this),this._size=e,this._length=0,this._map={}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.put=function(t,e){var n=this._map,i={key:t,value:e};n[t]=i,this._head?(this._tail.newer=i,i.older=this._tail,this._tail=i):this._head=this._tail=i,this._length>=this._size?(n[this._head.key]=null,this._head=this._head.newer,this._head.older=null):this._length++},e.prototype.get=function(t){var e=this._map[t];if(e)return e===this._head&&e!==this._tail&&(this._head=e.newer,this._head.older=null),e!==this._tail&&(e.older&&(e.older.newer=e.newer,e.newer.older=e.older),e.older=this._tail,e.newer=null,this._tail.newer=e,this._tail=e),e.value},e}(n(15).A)},5753:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8470);function r(t,e,n){return i.A.current.measure(t,e,n)}},8470:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var i=n(4127),r=n(15),o=n(9581);var s,a={baselineMarkerSize:1};"undefined"!=typeof document&&((s=document.createElement("div")).style.cssText="position: absolute !important; top: -4000px !important; width: auto !important; height: auto !important;padding: 0 !important; margin: 0 !important; border: 0 !important;line-height: normal !important; visibility: hidden !important; white-space: pre!important;");var l=function(t){function e(e){t.call(this),this._cache=new i.A(1e3),this.options=Object.assign({},a,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.measure=function(t,e,n){if(void 0===n&&(n={}),null==t)return{width:0,height:0,baseline:0};var i=(0,o.T5)(e),r=(0,o.EN)(t+i),a=this._cache.get(r);if(a)return a;var l={width:0,height:0,baseline:0},c=n.box||s,h=this._baselineMarker().cloneNode(!1);for(var u in e){var d=e[u];void 0!==d&&(c.style[u]=d)}var p=!1!==n.normalizeText?(0,o.fQ)(t):String(t);return c.textContent=p,c.appendChild(h),document.body.appendChild(c),p.length&&(l.width=c.offsetWidth-this.options.baselineMarkerSize,l.height=c.offsetHeight,l.baseline=h.offsetTop+this.options.baselineMarkerSize),l.width>0&&l.height>0&&this._cache.put(r,l),c.parentNode.removeChild(c),l},e.prototype._baselineMarker=function(){var t=document.createElement("div");return t.style.cssText="display: inline-block; vertical-align: baseline;width: "+this.options.baselineMarkerSize+"px; height: "+this.options.baselineMarkerSize+"px;overflow: hidden;",t},e}(r.A);l.current=new l;const c=l},9581:(t,e,n)=>{"use strict";n.d(e,{EN:()=>a,T5:()=>s,fQ:()=>o});var i=/\r?\n|\r|\t/g,r=" ";function o(t){return String(t).replace(i,r)}function s(t){var e=[];for(var n in t)e.push(n+t[n]);return e.sort().join("")}function a(t){for(var e=2166136261,n=0;n<t.length;++n)e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24),e^=t.charCodeAt(n);return e>>>0}},9408:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DEG_TO_RAD:()=>T.Td,LRUCache:()=>M.A,MAX_NUM:()=>T.eN,MIN_NUM:()=>T.uo,TextMetrics:()=>O.A,append:()=>i.A,arabicToRoman:()=>r.A,bindEvents:()=>x.A,createPromise:()=>o.A,defined:()=>s.A,definitionId:()=>a.A,deg:()=>l.A,elementOffset:()=>_.A,elementPadding:()=>A.A,elementScale:()=>E.A,elementSize:()=>S.A,elementStyles:()=>C.A,encodeBase64:()=>c.A,eventCoordinates:()=>h.A,eventElement:()=>u.A,hashKey:()=>D.EN,isTransparent:()=>d.A,last:()=>p.A,limitValue:()=>f.A,measureText:()=>I.A,mergeSort:()=>g.A,normalizeText:()=>D.fQ,now:()=>m.A,objectKey:()=>D.T5,promiseAll:()=>y.A,rad:()=>v.A,round:()=>b.A,unbindEvents:()=>k.A,valueOrDefault:()=>w.A});var i=n(9188),r=n(2876),o=n(5532),s=n(8599),a=n(5071),l=n(562),c=n(5844),h=n(6815),u=n(7439),d=n(7003),p=n(6964),f=n(1901),g=n(1867),m=n(9866),y=n(8721),v=n(9917),b=n(1454),w=n(9929),x=n(4653),_=n(3836),S=n(8830),C=n(1081),k=n(2336),A=n(8714),E=n(2841),T=n(2575),M=n(4127),O=n(8470),I=n(5753),D=n(9581)},9188:(t,e,n)=>{"use strict";function i(t,e){return t.push.apply(t,e),t}n.d(e,{A:()=>i})},2876:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"};function r(t){for(var e=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],n="";t>0;)t<e[0]?e.shift():(n+=i[e[0]],t-=e[0]);return n}},4653:(t,e,n)=>{"use strict";function i(t,e){for(var n in e)for(var i=n.trim().split(" "),r=0;r<i.length;r++)t.addEventListener(i[r],e[n],!1)}n.d(e,{A:()=>i})},2575:(t,e,n)=>{"use strict";n.d(e,{Td:()=>i,eN:()=>r,uo:()=>o});var i=Math.PI/180,r=Number.MAX_VALUE,o=-Number.MAX_VALUE},5532:(t,e,n)=>{"use strict";function i(){var t,e,n=new Promise((function(i,r){t=function(t){return n._state="resolved",i(t),n},e=function(t){return n._state="rejected",r(t),n}}));return n._state="pending",n.resolve=t,n.reject=e,n.state=function(){return n._state},n}n.d(e,{A:()=>i})},8599:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i="undefined";function r(t){return typeof t!==i}},5071:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=1;function r(){return"kdef"+i++}},562:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2575);function r(t){return t/i.Td}},3836:(t,e,n)=>{"use strict";function i(t){var e=t.getBoundingClientRect(),n=document.documentElement;return{top:e.top+(window.pageYOffset||n.scrollTop)-(n.clientTop||0),left:e.left+(window.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}}n.d(e,{A:()=>i})},8714:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(1081);function r(t){var e=(0,i.A)(t,["paddingLeft","paddingTop"]),n=e.paddingLeft,r=e.paddingTop;return{top:parseFloat(r),left:parseFloat(n)}}},2841:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(6349),r=/matrix\((.*)\)/;function o(t){var e=getComputedStyle(t).transform;return"none"===e?i.A.unit():function(t){var e=t.match(r);if(null===e||2!==e.length)return i.A.unit();var n=e[1].split(",").map((function(t){return parseFloat(t)}));return new(Function.prototype.bind.apply(i.A,[null].concat(n)))}(e)}function s(t){if(!t)return i.A.unit();for(var e=o(t),n=t.parentElement;n;){var r=o(n);e=e.multiplyCopy(r),n=n.parentElement}return e.b=e.c=e.e=e.f=0,e}},8830:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var i=n(1081),r=n(8599);function o(t){return isNaN(t)?t:t+"px"}function s(t,e){if(!e){var n=(0,i.A)(t,["width","height"]);return{width:parseInt(n.width,10),height:parseInt(n.height,10)}}var s=e.width,a=e.height;(0,r.A)(s)&&(t.style.width=o(s)),(0,r.A)(a)&&(t.style.height=o(a))}},1081:(t,e,n)=>{"use strict";function i(t,e){for(var n={},i=window.getComputedStyle(t)||{},r=Array.isArray(e)?e:[e],o=0;o<r.length;o++){var s=r[o];n[s]=i[s]}return n}n.d(e,{A:()=>i})},5844:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var i=n(4542),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function o(t){for(var e="",n=0,o=(0,i.YH)(t);n<o.length;){var s=o.charCodeAt(n++),a=o.charCodeAt(n++),l=o.charCodeAt(n++),c=s>>2,h=(3&s)<<4|a>>4,u=(15&a)<<2|l>>6,d=63&l;isNaN(a)?u=d=64:isNaN(l)&&(d=64),e=e+r.charAt(c)+r.charAt(h)+r.charAt(u)+r.charAt(d)}return e}},4542:(t,e,n)=>{"use strict";n.d(e,{CH:()=>a,YH:()=>o,bh:()=>r});var i=String.fromCharCode,r="þÿ";function o(t){for(var e="",n=0;n<t.length;n++){var r=t.charCodeAt(n);if(55296<=r&&r<=56319){var o=r,s=t.charCodeAt(++n);isNaN(s)||(r=1024*(o-55296)+(s-56320)+65536)}r<128?e+=i(r):r<2048?(e+=i(192|r>>>6),e+=i(128|63&r)):r<65536?(e+=i(224|r>>>12),e+=i(128|r>>>6&63),e+=i(128|63&r)):r<1114111&&(e+=i(240|r>>>18),e+=i(128|r>>>12&63),e+=i(128|r>>>6&63),e+=i(128|63&r))}return e}function s(t){return i(t>>8)+i(255&t)}function a(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i<65535)e+=s(i);else{var r=56320+(i-65536&1023);e+=s(55296+(i-65536>>10)),e+=s(r)}}return e}},6815:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8599);function r(t){return(0,i.A)((t.x||{}).location)?{x:t.x.location,y:t.y.location}:{x:t.pageX||t.clientX||0,y:t.pageY||t.clientY||0}}},7439:(t,e,n)=>{"use strict";function i(t){return void 0===t&&(t={}),t.touch?t.touch.initialTouch:t.target}n.d(e,{A:()=>i})},7003:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8599);function r(t){return""===t||null===t||"none"===t||"transparent"===t||!(0,i.A)(t)}},6964:(t,e,n)=>{"use strict";function i(t){if(t)return t[t.length-1]}n.d(e,{A:()=>i})},1901:(t,e,n)=>{"use strict";function i(t,e,n){return Math.max(Math.min(t,n),e)}n.d(e,{A:()=>i})},1867:(t,e,n)=>{"use strict";function i(t,e){if(t.length<2)return t.slice();return function t(n){if(n.length<=1)return n;var i=Math.floor(n.length/2),r=n.slice(0,i),o=n.slice(i);return function(t,n){for(var i=[],r=0,o=0,s=0;r<t.length&&o<n.length;)e(t[r],n[o])<=0?i[s++]=t[r++]:i[s++]=n[o++];return r<t.length&&i.push.apply(i,t.slice(r)),o<n.length&&i.push.apply(i,n.slice(o)),i}(r=t(r),o=t(o))}(t)}n.d(e,{A:()=>i})},9866:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const i=Date.now||function(){return(new Date).getTime()}},8721:(t,e,n)=>{"use strict";function i(t){return Promise.all(t)}n.d(e,{A:()=>i})},9917:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(2575);function r(t){return t*i.Td}},1454:(t,e,n)=>{"use strict";function i(t,e){var n,i=(n=e)?Math.pow(10,n):1;return Math.round(t*i)/i}n.d(e,{A:()=>i})},2336:(t,e,n)=>{"use strict";function i(t,e){for(var n in void 0===e&&(e={}),e)for(var i=n.trim().split(" "),r=0;r<i.length;r++)t.removeEventListener(i[r],e[n],!1)}n.d(e,{A:()=>i})},9929:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});var i=n(8599);function r(t,e){return(0,i.A)(t)?t:e}},7085:(t,e,n)=>{"use strict";function i(t){this.content=t}n.r(e),n.d(e,{AddMarkStep:()=>St,AddNodeMarkStep:()=>kt,AllSelection:()=>he,AttrStep:()=>Jt,CellSelection:()=>_l,ContentMatch:()=>P,DOMParser:()=>Z,DOMSerializer:()=>lt,Decoration:()=>aa,DecorationSet:()=>ha,DocAttrStep:()=>Zt,EditorState:()=>be,EditorView:()=>Ba,Fragment:()=>a,GapCursor:()=>wd,InputRule:()=>gh,MapResult:()=>mt,Mapping:()=>vt,Mark:()=>u,MarkType:()=>G,Node:()=>I,NodeRange:()=>M,NodeSelection:()=>le,NodeType:()=>K,Plugin:()=>xe,PluginKey:()=>Ce,RemoveMarkStep:()=>Ct,RemoveNodeMarkStep:()=>At,ReplaceAroundStep:()=>Tt,ReplaceError:()=>d,ReplaceStep:()=>Et,ResolvedPos:()=>k,Schema:()=>Y,Selection:()=>ne,SelectionRange:()=>ie,Slice:()=>p,Step:()=>wt,StepMap:()=>yt,StepResult:()=>xt,TableMap:()=>il,TextSelection:()=>se,Transaction:()=>fe,Transform:()=>te,TransformError:()=>Qt,__endComposition:()=>Na,__parseFromClipboard:()=>La,__serializeForClipboard:()=>Ra,activeNode:()=>qn,addColSpan:()=>wl,addColumn:()=>tc,addColumnAfter:()=>Bd,addColumnBefore:()=>Nd,addListNodes:()=>ii,addRow:()=>sc,addRowAfter:()=>Pd,addRowBefore:()=>Fd,alignBlocks:()=>Kn,alignCenterRules:()=>_r,alignJustifyRules:()=>Sr,alignLeftRules:()=>wr,alignRemoveRules:()=>Cr,alignRightRules:()=>xr,applyInlineStyle:()=>Fn,applyLink:()=>Rn,autoJoin:()=>Xi,baseKeymap:()=>tr,blockNodes:()=>jn,blockquote:()=>er,bold:()=>Mh,buildKeymap:()=>Nh,buildListKeymap:()=>Bh,bulletList:()=>ti,canBeIndented:()=>ar,canIndentAsListItem:()=>or,canInsert:()=>Re,canJoin:()=>Lt,canOutdentAsListItem:()=>sr,canSplit:()=>Rt,caretColor:()=>zu,caretColorKey:()=>ju,cellAround:()=>hl,chainCommands:()=>Gi,changeTextBlock:()=>Bn,cleanFormatting:()=>Gn,cleanMarks:()=>_n,cleanTextBlockFormatting:()=>$n,closeDoubleQuote:()=>Sh,closeHistory:()=>rh,closeSingleQuote:()=>kh,colCount:()=>yl,columnIsHeader:()=>xl,columnResizing:()=>Kl,columnResizingPluginKey:()=>ql,convertMsLists:()=>Kh,createParagraphNear:()=>Fi,createTable:()=>Td,cspFix:()=>Eu,deleteColumn:()=>jd,deleteRow:()=>hc,deleteSelection:()=>fi,deleteTable:()=>_c,domToPmDoc:()=>fn,dropCursor:()=>vd,dropPoint:()=>zt,ellipsis:()=>xh,emDash:()=>wh,exitCode:()=>Di,expandSelection:()=>Ke,expandToWordWrap:()=>Xe,find:()=>pu,findAll:()=>fu,findAt:()=>du,findCell:()=>ml,findWrapping:()=>Ft,fixTables:()=>El,fixTablesKey:()=>kl,formatBlockElements:()=>zn,fragmentToHtml:()=>dn,gapCursor:()=>_d,getActiveMarks:()=>En,getBlockFormats:()=>Hn,getHtml:()=>mn,getInlineStyles:()=>On,getMark:()=>An,getNodeFromSelection:()=>Ue,getSelectionText:()=>He,goToNextCell:()=>xc,hasMark:()=>Sn,hasNode:()=>Vn,hasSameMarkup:()=>$e,history:()=>ah,htmlToFragment:()=>un,imageResizeKey:()=>Du,imageResizing:()=>Bu,inSameTable:()=>gl,indent:()=>lr,indentBlocks:()=>ir,indentHtml:()=>We,indentRules:()=>di,inputRules:()=>yh,insertImage:()=>Nn,insertNode:()=>ze,insertPoint:()=>jt,insertText:()=>Ln,isAligned:()=>Xn,isInTable:()=>ul,isIndented:()=>rr,italic:()=>Oh,joinBackward:()=>mi,joinDown:()=>Ti,joinForward:()=>Ci,joinPoint:()=>Bt,joinTextblockBackward:()=>yi,joinTextblockForward:()=>vi,joinUp:()=>Ei,keydownHandler:()=>tl,keymap:()=>Qa,lift:()=>Mi,liftBlockquote:()=>nr,liftEmptyBlock:()=>Pi,liftListItem:()=>ai,liftTarget:()=>Dt,link:()=>Rh,listItem:()=>ei,listMarkersStyles:()=>yd,listStyle:()=>gr,macBaseKeymap:()=>Qi,marks:()=>Lc,mergeCells:()=>dc,moveCellForward:()=>fl,newlineInCode:()=>Oi,nextCell:()=>vl,nodes:()=>Uc,openDoubleQuote:()=>_h,openSingleQuote:()=>Ch,orderedList:()=>Qn,outdent:()=>cr,outdentRules:()=>pi,parentBlockFormat:()=>Wn,parseContent:()=>gn,pasteCleanup:()=>nu,pcBaseKeymap:()=>Zi,placeholder:()=>wu,pmAddColumnAfter:()=>nc,pmAddColumnBefore:()=>ec,pmAddRowAfter:()=>lc,pmAddRowBefore:()=>ac,pmDeleteColumn:()=>rc,pmDocToFragment:()=>pn,redo:()=>hh,redoDepth:()=>fh,redoNoScroll:()=>dh,removeAllMarks:()=>xn,removeAttribute:()=>Jh,removeColSpan:()=>bl,removeComments:()=>Gh,removeLink:()=>Pn,removeTag:()=>Yh,replace:()=>gu,replaceAll:()=>mu,replaceImageSourcesFromRtf:()=>uu,replaceStep:()=>$t,rowIsHeader:()=>oc,sanitize:()=>Xh,sanitizeClassAttr:()=>Zh,sanitizeStyleAttr:()=>eu,selectAll:()=>ji,selectNodeBackward:()=>xi,selectNodeForward:()=>ki,selectParentNode:()=>Bi,selectTextblockEnd:()=>Ui,selectTextblockStart:()=>Hi,selectedLineTextOnly:()=>Ve,selectedRect:()=>Ql,selectionCell:()=>dl,selectionMarks:()=>kn,setBlockType:()=>Wi,setCellAttr:()=>gc,setHtml:()=>yn,sinkListItem:()=>li,smartQuotes:()=>Ah,spacesFix:()=>Su,splitBlock:()=>Li,splitBlockAs:()=>Ri,splitBlockKeepMarks:()=>Ni,splitCell:()=>pc,splitCellWithType:()=>fc,splitListItem:()=>oi,splitListItemKeepMarks:()=>si,strikethrough:()=>Dh,subscript:()=>Fh,superscript:()=>Ph,tableColumnResizeKey:()=>Vu,tableEditing:()=>Sc,tableEditingKey:()=>cl,tableNodeTypes:()=>ll,tableNodes:()=>al,tableResizeKey:()=>Uu,tableResizing:()=>dd,tableRowResizeKey:()=>Wu,textHighlight:()=>Mu,textHighlightKey:()=>Tu,textblockTypeInputRule:()=>Th,toggleHeader:()=>yc,toggleHeaderCell:()=>wc,toggleHeaderColumn:()=>bc,toggleHeaderRow:()=>vc,toggleInlineFormat:()=>Dn,toggleList:()=>mr,toggleMark:()=>qi,toggleOrderedList:()=>vr,toggleUnorderedList:()=>yr,trimWhitespace:()=>on,underline:()=>Ih,undo:()=>ch,undoDepth:()=>ph,undoInputRule:()=>bh,undoNoScroll:()=>uh,updateColumnsOnResize:()=>Wl,wrapIn:()=>Vi,wrapInList:()=>ri,wrappingInputRule:()=>Eh}),i.prototype={constructor:i,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return-1==o?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new i(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new i(n)},addToStart:function(t,e){return new i([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new i(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(-1==s?o.length:s,0,e,n),new i(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return(t=i.from(t)).size?new i(t.content.concat(this.subtract(t).content)):this},append:function(t){return(t=i.from(t)).size?new i(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=i.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach((function(e,n){t[e]=n})),t},get size(){return this.content.length>>1}},i.from=function(t){if(t instanceof i)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new i(e)};const r=i;function o(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let r=t.child(i),s=e.child(i);if(r!=s){if(!r.sameMarkup(s))return n;if(r.isText&&r.text!=s.text){for(let t=0;r.text[t]==s.text[t];t++)n++;return n}if(r.content.size||s.content.size){let t=o(r.content,s.content,n+1);if(null!=t)return t}n+=r.nodeSize}else n+=r.nodeSize}}function s(t,e,n,i){for(let r=t.childCount,o=e.childCount;;){if(0==r||0==o)return r==o?null:{a:n,b:i};let a=t.child(--r),l=e.child(--o),c=a.nodeSize;if(a!=l){if(!a.sameMarkup(l))return{a:n,b:i};if(a.isText&&a.text!=l.text){let t=0,e=Math.min(a.text.length,l.text.length);for(;t<e&&a.text[a.text.length-t-1]==l.text[l.text.length-t-1];)t++,n--,i--;return{a:n,b:i}}if(a.content.size||l.content.size){let t=s(a.content,l.content,n-1,i-1);if(t)return t}n-=c,i-=c}else n-=c,i-=c}}class a{constructor(t,e){if(this.content=t,this.size=e||0,null==e)for(let e=0;e<t.length;e++)this.size+=t[e].nodeSize}nodesBetween(t,e,n,i=0,r){for(let o=0,s=0;s<e;o++){let a=this.content[o],l=s+a.nodeSize;if(l>t&&!1!==n(a,i+s,r||null,o)&&a.content.size){let r=s+1;a.nodesBetween(Math.max(0,t-r),Math.min(a.content.size,e-r),n,i+r)}s=l}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,e,n,i){let r="",o=!0;return this.nodesBetween(t,e,((s,a)=>{let l=s.isText?s.text.slice(Math.max(t,a)-a,e-a):s.isLeaf?i?"function"==typeof i?i(s):i:s.type.spec.leafText?s.type.spec.leafText(s):"":"";s.isBlock&&(s.isLeaf&&l||s.isTextblock)&&n&&(o?o=!1:r+=n),r+=l}),0),r}append(t){if(!t.size)return this;if(!this.size)return t;let e=this.lastChild,n=t.firstChild,i=this.content.slice(),r=0;for(e.isText&&e.sameMarkup(n)&&(i[i.length-1]=e.withText(e.text+n.text),r=1);r<t.content.length;r++)i.push(t.content[r]);return new a(i,this.size+t.size)}cut(t,e=this.size){if(0==t&&e==this.size)return this;let n=[],i=0;if(e>t)for(let r=0,o=0;o<e;r++){let s=this.content[r],a=o+s.nodeSize;a>t&&((o<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-o),Math.min(s.text.length,e-o)):s.cut(Math.max(0,t-o-1),Math.min(s.content.size,e-o-1))),n.push(s),i+=s.nodeSize),o=a}return new a(n,i)}cutByIndex(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))}replaceChild(t,e){let n=this.content[t];if(n==e)return this;let i=this.content.slice(),r=this.size+e.nodeSize-n.nodeSize;return i[t]=e,new a(i,r)}addToStart(t){return new a([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new a(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e}maybeChild(t){return this.content[t]||null}forEach(t){for(let e=0,n=0;e<this.content.length;e++){let i=this.content[e];t(i,n,e),n+=i.nodeSize}}findDiffStart(t,e=0){return o(this,t,e)}findDiffEnd(t,e=this.size,n=t.size){return s(this,t,e,n)}findIndex(t,e=-1){if(0==t)return c(0,t);if(t==this.size)return c(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,i=0;;n++){let r=i+this.child(n).nodeSize;if(r>=t)return r==t||e>0?c(n+1,r):c(n,i);i=r}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map((t=>t.toJSON())):null}static fromJSON(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return a.empty;let e,n=0;for(let i=0;i<t.length;i++){let r=t[i];n+=r.nodeSize,i&&r.isText&&t[i-1].sameMarkup(r)?(e||(e=t.slice(0,i)),e[e.length-1]=r.withText(e[e.length-1].text+r.text)):e&&e.push(r)}return new a(e||t,n)}static from(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}a.empty=new a([],0);const l={index:0,offset:0};function c(t,e){return l.index=t,l.offset=e,l}function h(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!h(t[n],e[n]))return!1}else{for(let n in t)if(!(n in e)||!h(t[n],e[n]))return!1;for(let n in e)if(!(n in t))return!1}return!0}class u{constructor(t,e){this.type=t,this.attrs=e}addToSet(t){let e,n=!1;for(let i=0;i<t.length;i++){let r=t[i];if(this.eq(r))return t;if(this.type.excludes(r.type))e||(e=t.slice(0,i));else{if(r.type.excludes(this.type))return t;!n&&r.type.rank>this.type.rank&&(e||(e=t.slice(0,i)),e.push(this),n=!0),e&&e.push(r)}}return e||(e=t.slice()),n||e.push(this),e}removeFromSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t}isInSet(t){for(let e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1}eq(t){return this==t||this.type==t.type&&h(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");let n=t.marks[e.type];if(!n)throw new RangeError(`There is no mark type ${e.type} in this schema`);let i=n.create(e.attrs);return n.checkAttrs(i.attrs),i}static sameSet(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&0==t.length)return u.none;if(t instanceof u)return[t];let e=t.slice();return e.sort(((t,e)=>t.type.rank-e.type.rank)),e}}u.none=[];class d extends Error{}class p{constructor(t,e,n){this.content=t,this.openStart=e,this.openEnd=n}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,e){let n=g(this.content,t+this.openStart,e);return n&&new p(n,this.openStart,this.openEnd)}removeBetween(t,e){return new p(f(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,e){if(!e)return p.empty;let n=e.openStart||0,i=e.openEnd||0;if("number"!=typeof n||"number"!=typeof i)throw new RangeError("Invalid input for Slice.fromJSON");return new p(a.fromJSON(t,e.content),n,i)}static maxOpen(t,e=!0){let n=0,i=0;for(let i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(let n=t.lastChild;n&&!n.isLeaf&&(e||!n.type.spec.isolating);n=n.lastChild)i++;return new p(t,n,i)}}function f(t,e,n){let{index:i,offset:r}=t.findIndex(e),o=t.maybeChild(i),{index:s,offset:a}=t.findIndex(n);if(r==e||o.isText){if(a!=n&&!t.child(s).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=s)throw new RangeError("Removing non-flat range");return t.replaceChild(i,o.copy(f(o.content,e-r-1,n-r-1)))}function g(t,e,n,i){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r);if(o==e||s.isText)return i&&!i.canReplace(r,r,n)?null:t.cut(0,e).append(n).append(t.cut(e));let a=g(s.content,e-o-1,n);return a&&t.replaceChild(r,s.copy(a))}function m(t,e,n){if(n.openStart>t.depth)throw new d("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new d("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,i){let r=t.index(i),o=t.node(i);if(r==e.index(i)&&i<t.depth-n.openStart){let s=y(t,e,n,i+1);return o.copy(o.content.replaceChild(r,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=i||e.depth!=i){let{start:r,end:s}=function(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let t=n-1;t>=0;t--)i=e.node(t).copy(a.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}(n,t);return _(o,S(t,r,s,e,i))}{let i=t.parent,r=i.content;return _(i,r.cut(0,t.parentOffset).append(n.content).append(r.cut(e.parentOffset)))}}return _(o,C(t,e,i))}function v(t,e){if(!e.type.compatibleContent(t.type))throw new d("Cannot join "+e.type.name+" onto "+t.type.name)}function b(t,e,n){let i=t.node(n);return v(i,e.node(n)),i}function w(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function x(t,e,n,i){let r=(e||t).node(n),o=0,s=e?e.index(n):r.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(w(t.nodeAfter,i),o++));for(let t=o;t<s;t++)w(r.child(t),i);e&&e.depth==n&&e.textOffset&&w(e.nodeBefore,i)}function _(t,e){return t.type.checkContent(e),t.copy(e)}function S(t,e,n,i,r){let o=t.depth>r&&b(t,e,r+1),s=i.depth>r&&b(n,i,r+1),l=[];return x(null,t,r,l),o&&s&&e.index(r)==n.index(r)?(v(o,s),w(_(o,S(t,e,n,i,r+1)),l)):(o&&w(_(o,C(t,e,r+1)),l),x(e,n,r,l),s&&w(_(s,C(n,i,r+1)),l)),x(i,null,r,l),new a(l)}function C(t,e,n){let i=[];if(x(null,t,n,i),t.depth>n){w(_(b(t,e,n+1),C(t,e,n+1)),i)}return x(e,null,n,i),new a(i)}p.empty=new p(a.empty,0,0);class k{constructor(t,e,n){this.pos=t,this.path=e,this.parentOffset=n,this.depth=e.length/3-1}resolveDepth(t){return null==t?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[3*this.resolveDepth(t)]}index(t){return this.path[3*this.resolveDepth(t)+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)}start(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]}after(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;let n=this.pos-this.path[this.path.length-1],i=t.child(e);return n?t.child(e).cut(n):i}get nodeBefore(){let t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)}posAtIndex(t,e){e=this.resolveDepth(e);let n=this.path[3*e],i=0==e?0:this.path[3*e-1]+1;for(let e=0;e<t;e++)i+=n.child(e).nodeSize;return i}marks(){let t=this.parent,e=this.index();if(0==t.content.size)return u.none;if(this.textOffset)return t.child(e).marks;let n=t.maybeChild(e-1),i=t.maybeChild(e);if(!n){let t=n;n=i,i=t}let r=n.marks;for(var o=0;o<r.length;o++)!1!==r[o].type.spec.inclusive||i&&r[o].isInSet(i.marks)||(r=r[o--].removeFromSet(r));return r}marksAcross(t){let e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;let n=e.marks,i=t.parent.maybeChild(t.index());for(var r=0;r<n.length;r++)!1!==n[r].type.spec.inclusive||i&&n[r].isInSet(i.marks)||(n=n[r--].removeFromSet(n));return n}sharedDepth(t){for(let e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0}blockRange(t=this,e){if(t.pos<this.pos)return t.blockRange(this);for(let n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new M(this,t,n);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset}static resolve(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");let n=[],i=0,r=e;for(let e=t;;){let{index:t,offset:o}=e.content.findIndex(r),s=r-o;if(n.push(e,t,i+o),!s)break;if(e=e.child(t),e.isText)break;r=s-1,i+=o+1}return new k(e,n,r)}static resolveCached(t,e){let n=T.get(t);if(n)for(let t=0;t<n.elts.length;t++){let i=n.elts[t];if(i.pos==e)return i}else T.set(t,n=new A);let i=n.elts[n.i]=k.resolve(t,e);return n.i=(n.i+1)%E,i}}class A{constructor(){this.elts=[],this.i=0}}const E=12,T=new WeakMap;class M{constructor(t,e,n){this.$from=t,this.$to=e,this.depth=n}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const O=Object.create(null);class I{constructor(t,e,n,i=u.none){this.type=t,this.attrs=e,this.marks=i,this.content=n||a.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,e,n,i=0){this.content.nodesBetween(t,e,n,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,e,n,i){return this.content.textBetween(t,e,n,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,e,n){return this.type==t&&h(this.attrs,e||t.defaultAttrs||O)&&u.sameSet(this.marks,n||u.none)}copy(t=null){return t==this.content?this:new I(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new I(this.type,this.attrs,this.content,t)}cut(t,e=this.content.size){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))}slice(t,e=this.content.size,n=!1){if(t==e)return p.empty;let i=this.resolve(t),r=this.resolve(e),o=n?0:i.sharedDepth(e),s=i.start(o),a=i.node(o).content.cut(i.pos-s,r.pos-s);return new p(a,i.depth-o,r.depth-o)}replace(t,e,n){return m(this.resolve(t),this.resolve(e),n)}nodeAt(t){for(let e=this;;){let{index:n,offset:i}=e.content.findIndex(t);if(e=e.maybeChild(n),!e)return null;if(i==t||e.isText)return e;t-=i+1}}childAfter(t){let{index:e,offset:n}=this.content.findIndex(t);return{node:this.content.maybeChild(e),index:e,offset:n}}childBefore(t){if(0==t)return{node:null,index:0,offset:0};let{index:e,offset:n}=this.content.findIndex(t);if(n<t)return{node:this.content.child(e),index:e,offset:n};let i=this.content.child(e-1);return{node:i,index:e-1,offset:n-i.nodeSize}}resolve(t){return k.resolveCached(this,t)}resolveNoCache(t){return k.resolve(this,t)}rangeHasMark(t,e,n){let i=!1;return e>t&&this.nodesBetween(t,e,(t=>(n.isInSet(t.marks)&&(i=!0),!i))),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),F(this.marks,t)}contentMatchAt(t){let e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e}canReplace(t,e,n=a.empty,i=0,r=n.childCount){let o=this.contentMatchAt(t).matchFragment(n,i,r),s=o&&o.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(let t=i;t<r;t++)if(!this.type.allowsMarks(n.child(t).marks))return!1;return!0}canReplaceWith(t,e,n,i){if(i&&!this.type.allowsMarks(i))return!1;let r=this.contentMatchAt(t).matchType(n),o=r&&r.matchFragment(this.content,e);return!!o&&o.validEnd}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=u.none;for(let e=0;e<this.marks.length;e++){let n=this.marks[e];n.type.checkAttrs(n.attrs),t=n.addToSet(t)}if(!u.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map((t=>t.type.name))}`);this.content.forEach((t=>t.check()))}toJSON(){let t={type:this.type.name};for(let e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((t=>t.toJSON()))),t}static fromJSON(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");let n;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}let i=a.fromJSON(t,e.content),r=t.nodeType(e.type).create(e.attrs,i,n);return r.type.checkAttrs(r.attrs),r}}I.prototype.text=void 0;class D extends I{constructor(t,e,n,i){if(super(t,e,null,i),!n)throw new RangeError("Empty text nodes are not allowed");this.text=n}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):F(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,e){return this.text.slice(t,e)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new D(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new D(this.type,this.attrs,t,this.marks)}cut(t=0,e=this.text.length){return 0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function F(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class P{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,e){let n=new R(t,e);if(null==n.next)return P.empty;let i=L(n);n.next&&n.err("Unexpected trailing text");let r=function(t){let e=Object.create(null);return n(H(t,0));function n(i){let r=[];i.forEach((e=>{t[e].forEach((({term:e,to:n})=>{if(!e)return;let i;for(let t=0;t<r.length;t++)r[t][0]==e&&(i=r[t][1]);H(t,n).forEach((t=>{i||r.push([e,i=[]]),-1==i.indexOf(t)&&i.push(t)}))}))}));let o=e[i.join(",")]=new P(i.indexOf(t.length-1)>-1);for(let t=0;t<r.length;t++){let i=r[t][1].sort($);o.next.push({type:r[t][0],next:e[i.join(",")]||n(i)})}return o}}(function(t){let e=[[]];return r(o(t,0),n()),e;function n(){return e.push([])-1}function i(t,n,i){let r={term:i,to:n};return e[t].push(r),r}function r(t,e){t.forEach((t=>t.to=e))}function o(t,e){if("choice"==t.type)return t.exprs.reduce(((t,n)=>t.concat(o(n,e))),[]);if("seq"!=t.type){if("star"==t.type){let s=n();return i(e,s),r(o(t.expr,s),s),[i(s)]}if("plus"==t.type){let s=n();return r(o(t.expr,e),s),r(o(t.expr,s),s),[i(s)]}if("opt"==t.type)return[i(e)].concat(o(t.expr,e));if("range"==t.type){let s=e;for(let e=0;e<t.min;e++){let e=n();r(o(t.expr,s),e),s=e}if(-1==t.max)r(o(t.expr,s),s);else for(let e=t.min;e<t.max;e++){let e=n();i(s,e),r(o(t.expr,s),e),s=e}return[i(s)]}if("name"==t.type)return[i(e,void 0,t.value)];throw new Error("Unknown expr type")}for(let i=0;;i++){let s=o(t.exprs[i],e);if(i==t.exprs.length-1)return s;r(s,e=n())}}}(i));return function(t,e){for(let n=0,i=[t];n<i.length;n++){let t=i[n],r=!t.validEnd,o=[];for(let e=0;e<t.next.length;e++){let{type:n,next:s}=t.next[e];o.push(n.name),!r||n.isText||n.hasRequiredAttrs()||(r=!1),-1==i.indexOf(s)&&i.push(s)}r&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}(r,n),r}matchType(t){for(let e=0;e<this.next.length;e++)if(this.next[e].type==t)return this.next[e].next;return null}matchFragment(t,e=0,n=t.childCount){let i=this;for(let r=e;i&&r<n;r++)i=i.matchType(t.child(r).type);return i}get inlineContent(){return 0!=this.next.length&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:e}=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}return null}compatible(t){for(let e=0;e<this.next.length;e++)for(let n=0;n<t.next.length;n++)if(this.next[e].type==t.next[n].type)return!0;return!1}fillBefore(t,e=!1,n=0){let i=[this];return function r(o,s){let l=o.matchFragment(t,n);if(l&&(!e||l.validEnd))return a.from(s.map((t=>t.createAndFill())));for(let t=0;t<o.next.length;t++){let{type:e,next:n}=o.next[t];if(!e.isText&&!e.hasRequiredAttrs()&&-1==i.indexOf(n)){i.push(n);let t=r(n,s.concat(e));if(t)return t}}return null}(this,[])}findWrapping(t){for(let e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];let e=this.computeWrapping(t);return this.wrapCache.push(t,e),e}computeWrapping(t){let e=Object.create(null),n=[{match:this,type:null,via:null}];for(;n.length;){let i=n.shift(),r=i.match;if(r.matchType(t)){let t=[];for(let e=i;e.type;e=e.via)t.push(e.type);return t.reverse()}for(let t=0;t<r.next.length;t++){let{type:o,next:s}=r.next[t];o.isLeaf||o.hasRequiredAttrs()||o.name in e||i.type&&!s.validEnd||(n.push({match:o.contentMatch,type:o,via:i}),e[o.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];return function e(n){t.push(n);for(let i=0;i<n.next.length;i++)-1==t.indexOf(n.next[i].next)&&e(n.next[i].next)}(this),t.map(((e,n)=>{let i=n+(e.validEnd?"*":" ")+" ";for(let n=0;n<e.next.length;n++)i+=(n?", ":"")+e.next[n].type.name+"->"+t.indexOf(e.next[n].next);return i})).join("\n")}}P.empty=new P(!0);class R{constructor(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function L(t){let e=[];do{e.push(N(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function N(t){let e=[];do{e.push(B(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function B(t){let e=function(t){if(t.eat("(")){let e=L(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){let e=function(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let r=[];for(let t in n){let i=n[t];i.groups.indexOf(e)>-1&&r.push(i)}0==r.length&&t.err("No node type or group '"+e+"' found");return r}(t,t.next).map((e=>(null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e})));return t.pos++,1==e.length?e[0]:{type:"choice",exprs:e}}t.err("Unexpected token '"+t.next+"'")}(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=z(t,e)}return e}function j(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function z(t,e){let n=j(t),i=n;return t.eat(",")&&(i="}"!=t.next?j(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function $(t,e){return e-t}function H(t,e){let n=[];return function e(i){let r=t[i];if(1==r.length&&!r[0].term)return e(r[0].to);n.push(i);for(let t=0;t<r.length;t++){let{term:i,to:o}=r[t];i||-1!=n.indexOf(o)||e(o)}}(e),n.sort($)}function U(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function V(t,e){let n=Object.create(null);for(let i in t){let r=e&&e[i];if(void 0===r){let e=t[i];if(!e.hasDefault)throw new RangeError("No value supplied for attribute "+i);r=e.default}n[i]=r}return n}function W(t,e,n,i){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let n in t){let i=t[n];i.validate&&i.validate(e[n])}}function q(t,e){let n=Object.create(null);if(e)for(let i in e)n[i]=new X(t,i,e[i]);return n}class K{constructor(t,e,n){this.name=t,this.schema=e,this.spec=n,this.markSet=null,this.groups=n.group?n.group.split(" "):[],this.attrs=q(t,n.attrs),this.defaultAttrs=U(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==P.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:V(this.attrs,t)}create(t=null,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(t),a.from(e),u.setFrom(n))}createChecked(t=null,e,n){return e=a.from(e),this.checkContent(e),new I(this,this.computeAttrs(t),e,u.setFrom(n))}createAndFill(t=null,e,n){if(t=this.computeAttrs(t),(e=a.from(e)).size){let t=this.contentMatch.fillBefore(e);if(!t)return null;e=t.append(e)}let i=this.contentMatch.matchFragment(e),r=i&&i.fillBefore(a.empty,!0);return r?new I(this,t,e.append(r),u.setFrom(n)):null}validContent(t){let e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(let e=0;e<t.childCount;e++)if(!this.allowsMarks(t.child(e).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){W(this.attrs,t,"node",this.name)}allowsMarkType(t){return null==this.markSet||this.markSet.indexOf(t)>-1}allowsMarks(t){if(null==this.markSet)return!0;for(let e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0}allowedMarks(t){if(null==this.markSet)return t;let e;for(let n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:u.none:t}static compile(t,e){let n=Object.create(null);t.forEach(((t,i)=>n[t]=new K(t,e,i)));let i=e.spec.topNode||"doc";if(!n[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(let t in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n}}class X{constructor(t,e,n){this.hasDefault=Object.prototype.hasOwnProperty.call(n,"default"),this.default=n.default,this.validate="string"==typeof n.validate?function(t,e,n){let i=n.split("|");return n=>{let r=null===n?"null":typeof n;if(i.indexOf(r)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${t}, got ${r}`)}}(t,e,n.validate):n.validate}get isRequired(){return!this.hasDefault}}class G{constructor(t,e,n,i){this.name=t,this.rank=e,this.schema=n,this.spec=i,this.attrs=q(t,i.attrs),this.excluded=null;let r=U(this.attrs);this.instance=r?new u(this,r):null}create(t=null){return!t&&this.instance?this.instance:new u(this,V(this.attrs,t))}static compile(t,e){let n=Object.create(null),i=0;return t.forEach(((t,r)=>n[t]=new G(t,i++,e,r))),n}removeFromSet(t){for(var e=0;e<t.length;e++)t[e].type==this&&(t=t.slice(0,e).concat(t.slice(e+1)),e--);return t}isInSet(t){for(let e=0;e<t.length;e++)if(t[e].type==this)return t[e]}checkAttrs(t){W(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class Y{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let e=this.spec={};for(let n in t)e[n]=t[n];e.nodes=r.from(t.nodes),e.marks=r.from(t.marks||{}),this.nodes=K.compile(this.spec.nodes,this),this.marks=G.compile(this.spec.marks,this);let n=Object.create(null);for(let t in this.nodes){if(t in this.marks)throw new RangeError(t+" can not be both a node and a mark");let e=this.nodes[t],i=e.spec.content||"",r=e.spec.marks;if(e.contentMatch=n[i]||(n[i]=P.parse(i,this.nodes)),e.inlineContent=e.contentMatch.inlineContent,e.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!e.isInline||!e.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=e}e.markSet="_"==r?null:r?J(this,r.split(" ")):""!=r&&e.inlineContent?null:[]}for(let t in this.marks){let e=this.marks[t],n=e.spec.excludes;e.excluded=null==n?[e]:""==n?[]:J(this,n.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,e=null,n,i){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof K))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,i)}text(t,e){let n=this.nodes.text;return new D(n,n.defaultAttrs,t,u.setFrom(e))}mark(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)}nodeFromJSON(t){return I.fromJSON(this,t)}markFromJSON(t){return u.fromJSON(this,t)}nodeType(t){let e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e}}function J(t,e){let n=[];for(let i=0;i<e.length;i++){let r=e[i],o=t.marks[r],s=o;if(o)n.push(o);else for(let e in t.marks){let i=t.marks[e];("_"==r||i.spec.group&&i.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=i)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}class Z{constructor(t,e){this.schema=t,this.rules=e,this.tags=[],this.styles=[];let n=this.matchedStyles=[];e.forEach((t=>{if(function(t){return null!=t.tag}(t))this.tags.push(t);else if(function(t){return null!=t.style}(t)){let e=/[^=]*/.exec(t.style)[0];n.indexOf(e)<0&&n.push(e),this.styles.push(t)}})),this.normalizeLists=!this.tags.some((e=>{if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;let n=t.nodes[e.node];return n.contentMatch.matchType(n)}))}parse(t,e={}){let n=new rt(this,e,!1);return n.addAll(t,e.from,e.to),n.finish()}parseSlice(t,e={}){let n=new rt(this,e,!0);return n.addAll(t,e.from,e.to),p.maxOpen(n.finish())}matchTag(t,e,n){for(let i=n?this.tags.indexOf(n)+1:0;i<this.tags.length;i++){let n=this.tags[i];if(ot(t,n.tag)&&(void 0===n.namespace||t.namespaceURI==n.namespace)&&(!n.context||e.matchesContext(n.context))){if(n.getAttrs){let e=n.getAttrs(t);if(!1===e)continue;n.attrs=e||void 0}return n}}}matchStyle(t,e,n,i){for(let r=i?this.styles.indexOf(i)+1:0;r<this.styles.length;r++){let i=this.styles[r],o=i.style;if(!(0!=o.indexOf(t)||i.context&&!n.matchesContext(i.context)||o.length>t.length&&(61!=o.charCodeAt(t.length)||o.slice(t.length+1)!=e))){if(i.getAttrs){let t=i.getAttrs(e);if(!1===t)continue;i.attrs=t||void 0}return i}}}static schemaRules(t){let e=[];function n(t){let n=null==t.priority?50:t.priority,i=0;for(;i<e.length;i++){let t=e[i];if((null==t.priority?50:t.priority)<n)break}e.splice(i,0,t)}for(let e in t.marks){let i=t.marks[e].spec.parseDOM;i&&i.forEach((t=>{n(t=st(t)),t.mark||t.ignore||t.clearMark||(t.mark=e)}))}for(let e in t.nodes){let i=t.nodes[e].spec.parseDOM;i&&i.forEach((t=>{n(t=st(t)),t.node||t.ignore||t.mark||(t.node=e)}))}return e}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Z(t,Z.schemaRules(t)))}}const Q={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},et={ol:!0,ul:!0};function nt(t,e,n){return null!=e?(e?1:0)|("full"===e?2:0):t&&"pre"==t.whitespace?3:-5&n}class it{constructor(t,e,n,i,r,o,s){this.type=t,this.attrs=e,this.marks=n,this.pendingMarks=i,this.solid=r,this.options=s,this.content=[],this.activeMarks=u.none,this.stashMarks=[],this.match=o||(4&s?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let e=this.type.contentMatch.fillBefore(a.from(t));if(!e){let e,n=this.type.contentMatch;return(e=n.findWrapping(t.type))?(this.match=n,e):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)}finish(t){if(!(1&this.options)){let t,e=this.content[this.content.length-1];if(e&&e.isText&&(t=/[ \t\r\n\u000c]+$/.exec(e.text))){let n=e;e.text.length==t[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-t[0].length))}}let e=a.from(this.content);return!t&&this.match&&(e=e.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,e,this.marks):e}popFromStashMark(t){for(let e=this.stashMarks.length-1;e>=0;e--)if(t.eq(this.stashMarks[e]))return this.stashMarks.splice(e,1)[0]}applyPending(t){for(let e=0,n=this.pendingMarks;e<n.length;e++){let i=n[e];(this.type?this.type.allowsMarkType(i.type):at(i.type,t))&&!i.isInSet(this.activeMarks)&&(this.activeMarks=i.addToSet(this.activeMarks),this.pendingMarks=i.removeFromSet(this.pendingMarks))}}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!Q.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class rt{constructor(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.open=0;let i,r=e.topNode,o=nt(null,e.preserveWhitespace,0)|(n?4:0);i=r?new it(r.type,r.attrs,u.none,u.none,!0,e.topMatch||r.type.contentMatch,o):new it(n?null:t.schema.topNodeType,null,u.none,u.none,!0,null,o),this.nodes=[i],this.find=e.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t){3==t.nodeType?this.addTextNode(t):1==t.nodeType&&this.addElement(t)}withStyleRules(t,e){let n=t.style;if(!n||!n.length)return e();let i=this.readStyles(t.style);if(!i)return;let[r,o]=i,s=this.top;for(let t=0;t<o.length;t++)this.removePendingMark(o[t],s);for(let t=0;t<r.length;t++)this.addPendingMark(r[t]);e();for(let t=0;t<r.length;t++)this.removePendingMark(r[t],s);for(let t=0;t<o.length;t++)this.addPendingMark(o[t])}addTextNode(t){let e=t.nodeValue,n=this.top;if(2&n.options||n.inlineContext(t)||/[^ \t\r\n\u000c]/.test(e)){if(1&n.options)e=2&n.options?e.replace(/\r\n?/g,"\n"):e.replace(/\r?\n|\r/g," ");else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){let i=n.content[n.content.length-1],r=t.previousSibling;(!i||r&&"BR"==r.nodeName||i.isText&&/[ \t\r\n\u000c]$/.test(i.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)}addElement(t,e){let n,i=t.nodeName.toLowerCase();et.hasOwnProperty(i)&&this.parser.normalizeLists&&function(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let t=1==e.nodeType?e.nodeName.toLowerCase():null;t&&et.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):"li"==t?n=e:t&&(n=null)}}(t);let r=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(n=this.parser.matchTag(t,this,e));if(r?r.ignore:tt.hasOwnProperty(i))this.findInside(t),this.ignoreFallback(t);else if(!r||r.skip||r.closeParent){r&&r.closeParent?this.open=Math.max(0,this.open-1):r&&r.skip.nodeType&&(t=r.skip);let e,n=this.top,o=this.needsBlock;if(Q.hasOwnProperty(i))n.content.length&&n.content[0].isInline&&this.open&&(this.open--,n=this.top),e=!0,n.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);r&&r.skip?this.addAll(t):this.withStyleRules(t,(()=>this.addAll(t))),e&&this.sync(n),this.needsBlock=o}else this.withStyleRules(t,(()=>{this.addElementByRule(t,r,!1===r.consuming?n:void 0)}))}leafFallback(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))}ignoreFallback(t){"BR"!=t.nodeName||this.top.type&&this.top.type.inlineContent||this.findPlace(this.parser.schema.text("-"))}readStyles(t){let e=u.none,n=u.none;if(t.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let r=this.parser.matchedStyles[i],o=t.getPropertyValue(r);if(o)for(let t;;){let i=this.parser.matchStyle(r,o,this,t);if(!i)break;if(i.ignore)return null;if(i.clearMark?this.top.pendingMarks.concat(this.top.activeMarks).forEach((t=>{i.clearMark(t)&&(n=t.addToSet(n))})):e=this.parser.schema.marks[i.mark].create(i.attrs).addToSet(e),!1!==i.consuming)break;t=i}}return[e,n]}addElementByRule(t,e,n){let i,r,o;if(e.node)r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):i=this.enter(r,e.attrs||null,e.preserveWhitespace);else{o=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(o)}let s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(n)this.addElement(t,n);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((t=>this.insertNode(t)));else{let n=t;"string"==typeof e.contentElement?n=t.querySelector(e.contentElement):"function"==typeof e.contentElement?n=e.contentElement(t):e.contentElement&&(n=e.contentElement),this.findAround(t,n,!0),this.addAll(n)}i&&this.sync(s)&&this.open--,o&&this.removePendingMark(o,s)}addAll(t,e,n){let i=e||0;for(let r=e?t.childNodes[e]:t.firstChild,o=null==n?null:t.childNodes[n];r!=o;r=r.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(r);this.findAtPoint(t,i)}findPlace(t){let e,n;for(let i=this.open;i>=0;i--){let r=this.nodes[i],o=r.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=r,!o.length))break;if(r.solid)break}if(!e)return!1;this.sync(n);for(let t=0;t<e.length;t++)this.enterInner(e[t],null,!1);return!0}insertNode(t){if(t.isInline&&this.needsBlock&&!this.top.type){let t=this.textblockFromContext();t&&this.enterInner(t)}if(this.findPlace(t)){this.closeExtra();let e=this.top;e.applyPending(t.type),e.match&&(e.match=e.match.matchType(t.type));let n=e.activeMarks;for(let i=0;i<t.marks.length;i++)e.type&&!e.type.allowsMarkType(t.marks[i].type)||(n=t.marks[i].addToSet(n));return e.content.push(t.mark(n)),!0}return!1}enter(t,e,n){let i=this.findPlace(t.create(e));return i&&this.enterInner(t,e,!0,n),i}enterInner(t,e=null,n=!1,i){this.closeExtra();let r=this.top;r.applyPending(t),r.match=r.match&&r.match.matchType(t);let o=nt(t,i,r.options);4&r.options&&0==r.content.length&&(o|=4),this.nodes.push(new it(t,e,r.activeMarks,r.pendingMarks,n,null,o)),this.open++}closeExtra(t=!1){let e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(t){for(let e=this.open;e>=0;e--)if(this.nodes[e]==t)return this.open=e,!0;return!1}get currentPos(){this.closeExtra();let t=0;for(let e=this.open;e>=0;e--){let n=this.nodes[e].content;for(let e=n.length-1;e>=0;e--)t+=n[e].nodeSize;e&&t++}return t}findAtPoint(t,e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)}findInside(t){if(this.find)for(let e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)}findAround(t,e,n){if(t!=e&&this.find)for(let i=0;i<this.find.length;i++)if(null==this.find[i].pos&&1==t.nodeType&&t.contains(this.find[i].node)){e.compareDocumentPosition(this.find[i].node)&(n?2:4)&&(this.find[i].pos=this.currentPos)}}findInText(t){if(this.find)for(let e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let e=t.split("/"),n=this.options.context,i=!(this.isOpen||n&&n.parent.type!=this.nodes[0].type),r=-(n?n.depth+1:0)+(i?0:1),o=(t,s)=>{for(;t>=0;t--){let a=e[t];if(""==a){if(t==e.length-1||0==t)continue;for(;s>=r;s--)if(o(t-1,s))return!0;return!1}{let t=s>0||0==s&&i?this.nodes[s].type:n&&s>=r?n.node(s-r).type:null;if(!t||t.name!=a&&-1==t.groups.indexOf(a))return!1;s--}}return!0};return o(e.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let e=t.depth;e>=0;e--){let n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(let t in this.parser.schema.nodes){let e=this.parser.schema.nodes[t];if(e.isTextblock&&e.defaultAttrs)return e}}addPendingMark(t){let e=function(t,e){for(let n=0;n<e.length;n++)if(t.eq(e[n]))return e[n]}(t,this.top.pendingMarks);e&&this.top.stashMarks.push(e),this.top.pendingMarks=t.addToSet(this.top.pendingMarks)}removePendingMark(t,e){for(let n=this.open;n>=0;n--){let i=this.nodes[n];if(i.pendingMarks.lastIndexOf(t)>-1)i.pendingMarks=t.removeFromSet(i.pendingMarks);else{i.activeMarks=t.removeFromSet(i.activeMarks);let e=i.popFromStashMark(t);e&&i.type&&i.type.allowsMarkType(e.type)&&(i.activeMarks=e.addToSet(i.activeMarks))}if(i==e)break}}}function ot(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function st(t){let e={};for(let n in t)e[n]=t[n];return e}function at(t,e){let n=e.schema.nodes;for(let i in n){let r=n[i];if(!r.allowsMarkType(t))continue;let o=[],s=t=>{o.push(t);for(let n=0;n<t.edgeCount;n++){let{type:i,next:r}=t.edge(n);if(i==e)return!0;if(o.indexOf(r)<0&&s(r))return!0}};if(s(r.contentMatch))return!0}}class lt{constructor(t,e){this.nodes=t,this.marks=e}serializeFragment(t,e={},n){n||(n=ht(e).createDocumentFragment());let i=n,r=[];return t.forEach((t=>{if(r.length||t.marks.length){let n=0,o=0;for(;n<r.length&&o<t.marks.length;){let e=t.marks[o];if(this.marks[e.type.name]){if(!e.eq(r[n][0])||!1===e.type.spec.spanning)break;n++,o++}else o++}for(;n<r.length;)i=r.pop()[1];for(;o<t.marks.length;){let n=t.marks[o++],s=this.serializeMark(n,t.isInline,e);s&&(r.push([n,i]),i.appendChild(s.dom),i=s.contentDOM||s.dom)}}i.appendChild(this.serializeNodeInner(t,e))})),n}serializeNodeInner(t,e){let{dom:n,contentDOM:i}=pt(ht(e),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,e,i)}return n}serializeNode(t,e={}){let n=this.serializeNodeInner(t,e);for(let i=t.marks.length-1;i>=0;i--){let r=this.serializeMark(t.marks[i],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n}serializeMark(t,e,n={}){let i=this.marks[t.type.name];return i&&pt(ht(n),i(t,e),null,t.attrs)}static renderSpec(t,e,n=null,i){return pt(t,e,n,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new lt(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let e=ct(t.nodes);return e.text||(e.text=t=>t.text),e}static marksFromSchema(t){return ct(t.marks)}}function ct(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function ht(t){return t.document||window.document}const ut=new WeakMap;function dt(t){let e=ut.get(t);return void 0===e&&ut.set(t,e=function(t){let e=null;function n(t){if(t&&"object"==typeof t)if(Array.isArray(t))if("string"==typeof t[0])e||(e=[]),e.push(t);else for(let e=0;e<t.length;e++)n(t[e]);else for(let e in t)n(t[e])}return n(t),e}(t)),e}function pt(t,e,n,i){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};if(e.dom&&null!=e.dom.nodeType)return e;let r,o=e[0];if("string"!=typeof o)throw new RangeError("Invalid array passed to renderSpec");if(i&&(r=dt(i))&&r.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s,a=o.indexOf(" ");a>0&&(n=o.slice(0,a),o=o.slice(a+1));let l=n?t.createElementNS(n,o):t.createElement(o),c=e[1],h=1;if(c&&"object"==typeof c&&null==c.nodeType&&!Array.isArray(c)){h=2;for(let t in c)if(null!=c[t]){let e=t.indexOf(" ");e>0?l.setAttributeNS(t.slice(0,e),t.slice(e+1),c[t]):l.setAttribute(t,c[t])}}for(let r=h;r<e.length;r++){let o=e[r];if(0===o){if(r<e.length-1||r>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}{let{dom:e,contentDOM:r}=pt(t,o,n,i);if(l.appendChild(e),r){if(s)throw new RangeError("Multiple content holes");s=r}}}return{dom:l,contentDOM:s}}const ft=Math.pow(2,16);function gt(t){return 65535&t}class mt{constructor(t,e,n){this.pos=t,this.delInfo=e,this.recover=n}get deleted(){return(8&this.delInfo)>0}get deletedBefore(){return(5&this.delInfo)>0}get deletedAfter(){return(6&this.delInfo)>0}get deletedAcross(){return(4&this.delInfo)>0}}class yt{constructor(t,e=!1){if(this.ranges=t,this.inverted=e,!t.length&&yt.empty)return yt.empty}recover(t){let e=0,n=gt(t);if(!this.inverted)for(let t=0;t<n;t++)e+=this.ranges[3*t+2]-this.ranges[3*t+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/ft}(t)}mapResult(t,e=1){return this._map(t,e,!1)}map(t,e=1){return this._map(t,e,!0)}_map(t,e,n){let i=0,r=this.inverted?2:1,o=this.inverted?1:2;for(let s=0;s<this.ranges.length;s+=3){let a=this.ranges[s]-(this.inverted?i:0);if(a>t)break;let l=this.ranges[s+r],c=this.ranges[s+o],h=a+l;if(t<=h){let r=a+i+((l?t==a?-1:t==h?1:e:e)<0?0:c);if(n)return r;let o=t==(e<0?a:h)?null:s/3+(t-a)*ft,u=t==a?2:t==h?1:4;return(e<0?t!=a:t!=h)&&(u|=8),new mt(r,u,o)}i+=c-l}return n?t+i:new mt(t+i,0,null)}touches(t,e){let n=0,i=gt(e),r=this.inverted?2:1,o=this.inverted?1:2;for(let e=0;e<this.ranges.length;e+=3){let s=this.ranges[e]-(this.inverted?n:0);if(s>t)break;let a=this.ranges[e+r];if(t<=s+a&&e==3*i)return!0;n+=this.ranges[e+o]-a}return!1}forEach(t){let e=this.inverted?2:1,n=this.inverted?1:2;for(let i=0,r=0;i<this.ranges.length;i+=3){let o=this.ranges[i],s=o-(this.inverted?r:0),a=o+(this.inverted?0:r),l=this.ranges[i+e],c=this.ranges[i+n];t(s,s+l,a,a+c),r+=c-l}}invert(){return new yt(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return 0==t?yt.empty:new yt(t<0?[0,-t,0]:[0,0,t])}}yt.empty=new yt([]);class vt{constructor(t=[],e,n=0,i=t.length){this.maps=t,this.mirror=e,this.from=n,this.to=i}slice(t=0,e=this.maps.length){return new vt(this.maps,this.mirror,t,e)}copy(){return new vt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)}appendMapping(t){for(let e=0,n=this.maps.length;e<t.maps.length;e++){let i=t.getMirror(e);this.appendMap(t.maps[e],null!=i&&i<e?n+i:void 0)}}getMirror(t){if(this.mirror)for(let e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]}setMirror(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)}appendMappingInverted(t){for(let e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){let i=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=i&&i>e?n-i-1:void 0)}}invert(){let t=new vt;return t.appendMappingInverted(this),t}map(t,e=1){if(this.mirror)return this._map(t,e,!0);for(let n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t}mapResult(t,e=1){return this._map(t,e,!1)}_map(t,e,n){let i=0;for(let n=this.from;n<this.to;n++){let r=this.maps[n].mapResult(t,e);if(null!=r.recover){let e=this.getMirror(n);if(null!=e&&e>n&&e<this.to){n=e,t=this.maps[e].recover(r.recover);continue}}i|=r.delInfo,t=r.pos}return n?t:new mt(t,i,null)}}const bt=Object.create(null);class wt{getMap(){return yt.empty}merge(t){return null}static fromJSON(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");let n=bt[e.stepType];if(!n)throw new RangeError(`No step type ${e.stepType} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in bt)throw new RangeError("Duplicate use of step JSON ID "+t);return bt[t]=e,e.prototype.jsonID=t,e}}class xt{constructor(t,e){this.doc=t,this.failed=e}static ok(t){return new xt(t,null)}static fail(t){return new xt(null,t)}static fromReplace(t,e,n,i){try{return xt.ok(t.replace(e,n,i))}catch(t){if(t instanceof d)return xt.fail(t.message);throw t}}}function _t(t,e,n){let i=[];for(let r=0;r<t.childCount;r++){let o=t.child(r);o.content.size&&(o=o.copy(_t(o.content,e,o))),o.isInline&&(o=e(o,n,r)),i.push(o)}return a.fromArray(i)}class St extends wt{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=t.resolve(this.from),i=n.node(n.sharedDepth(this.to)),r=new p(_t(e.content,((t,e)=>t.isAtom&&e.type.allowsMarkType(this.mark.type)?t.mark(this.mark.addToSet(t.marks)):t),i),e.openStart,e.openEnd);return xt.fromReplace(t,this.from,this.to,r)}invert(){return new Ct(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new St(e.pos,n.pos,this.mark)}merge(t){return t instanceof St&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new St(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new St(e.from,e.to,t.markFromJSON(e.mark))}}wt.jsonID("addMark",St);class Ct extends wt{constructor(t,e,n){super(),this.from=t,this.to=e,this.mark=n}apply(t){let e=t.slice(this.from,this.to),n=new p(_t(e.content,(t=>t.mark(this.mark.removeFromSet(t.marks))),t),e.openStart,e.openEnd);return xt.fromReplace(t,this.from,this.to,n)}invert(){return new St(this.from,this.to,this.mark)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new Ct(e.pos,n.pos,this.mark)}merge(t){return t instanceof Ct&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ct(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ct(e.from,e.to,t.markFromJSON(e.mark))}}wt.jsonID("removeMark",Ct);class kt extends wt{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return xt.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.addToSet(e.marks));return xt.fromReplace(t,this.pos,this.pos+1,new p(a.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);if(e){let t=this.mark.addToSet(e.marks);if(t.length==e.marks.length){for(let n=0;n<e.marks.length;n++)if(!e.marks[n].isInSet(t))return new kt(this.pos,e.marks[n]);return new kt(this.pos,this.mark)}}return new At(this.pos,this.mark)}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new kt(e.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new kt(e.pos,t.markFromJSON(e.mark))}}wt.jsonID("addNodeMark",kt);class At extends wt{constructor(t,e){super(),this.pos=t,this.mark=e}apply(t){let e=t.nodeAt(this.pos);if(!e)return xt.fail("No node at mark step's position");let n=e.type.create(e.attrs,null,this.mark.removeFromSet(e.marks));return xt.fromReplace(t,this.pos,this.pos+1,new p(a.from(n),0,e.isLeaf?0:1))}invert(t){let e=t.nodeAt(this.pos);return e&&this.mark.isInSet(e.marks)?new kt(this.pos,this.mark):this}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new At(e.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new At(e.pos,t.markFromJSON(e.mark))}}wt.jsonID("removeNodeMark",At);class Et extends wt{constructor(t,e,n,i=!1){super(),this.from=t,this.to=e,this.slice=n,this.structure=i}apply(t){return this.structure&&Mt(t,this.from,this.to)?xt.fail("Structure replace would overwrite content"):xt.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new yt([this.from,this.to-this.from,this.slice.size])}invert(t){return new Et(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deletedAcross&&n.deletedAcross?null:new Et(e.pos,Math.max(e.pos,n.pos),this.slice)}merge(t){if(!(t instanceof Et)||t.structure||this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;{let e=this.slice.size+t.slice.size==0?p.empty:new p(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Et(t.from,this.to,e,this.structure)}}{let e=this.slice.size+t.slice.size==0?p.empty:new p(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Et(this.from,this.to+(t.to-t.from),e,this.structure)}}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Et(e.from,e.to,p.fromJSON(t,e.slice),!!e.structure)}}wt.jsonID("replace",Et);class Tt extends wt{constructor(t,e,n,i,r,o,s=!1){super(),this.from=t,this.to=e,this.gapFrom=n,this.gapTo=i,this.slice=r,this.insert=o,this.structure=s}apply(t){if(this.structure&&(Mt(t,this.from,this.gapFrom)||Mt(t,this.gapTo,this.to)))return xt.fail("Structure gap-replace would overwrite content");let e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return xt.fail("Gap is not a flat range");let n=this.slice.insertAt(this.insert,e.content);return n?xt.fromReplace(t,this.from,this.to,n):xt.fail("Content does not fit in gap")}getMap(){return new yt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let e=this.gapTo-this.gapFrom;return new Tt(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),i=this.from==this.gapFrom?e.pos:t.map(this.gapFrom,-1),r=this.to==this.gapTo?n.pos:t.map(this.gapTo,1);return e.deletedAcross&&n.deletedAcross||i<e.pos||r>n.pos?null:new Tt(e.pos,n.pos,i,r,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,e){if("number"!=typeof e.from||"number"!=typeof e.to||"number"!=typeof e.gapFrom||"number"!=typeof e.gapTo||"number"!=typeof e.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Tt(e.from,e.to,e.gapFrom,e.gapTo,p.fromJSON(t,e.slice),e.insert,!!e.structure)}}function Mt(t,e,n){let i=t.resolve(e),r=n-e,o=i.depth;for(;r>0&&o>0&&i.indexAfter(o)==i.node(o).childCount;)o--,r--;if(r>0){let t=i.node(o).maybeChild(i.indexAfter(o));for(;r>0;){if(!t||t.isLeaf)return!0;t=t.firstChild,r--}}return!1}function Ot(t,e,n,i=n.contentMatch,r=!0){let o=t.doc.nodeAt(e),s=[],l=e+1;for(let e=0;e<o.childCount;e++){let c=o.child(e),h=l+c.nodeSize,u=i.matchType(c.type);if(u){i=u;for(let e=0;e<c.marks.length;e++)n.allowsMarkType(c.marks[e].type)||t.step(new Ct(l,h,c.marks[e]));if(r&&c.isText&&"pre"!=n.whitespace){let t,e,i=/\r?\n|\r/g;for(;t=i.exec(c.text);)e||(e=new p(a.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new Et(l+t.index,l+t.index+t[0].length,e))}}else s.push(new Et(l,h,p.empty));l=h}if(!i.validEnd){let e=i.fillBefore(a.empty,!0);t.replace(l,l,new p(e,0,0))}for(let e=s.length-1;e>=0;e--)t.step(s[e])}function It(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Dt(t){let e=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let n=t.depth;;--n){let i=t.$from.node(n),r=t.$from.index(n),o=t.$to.indexAfter(n);if(n<t.depth&&i.canReplace(r,o,e))return n;if(0==n||i.type.spec.isolating||!It(i,r,o))break}return null}function Ft(t,e,n=null,i=t){let r=function(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.contentMatchAt(i).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(i,r,s)?o:null}(t,e),o=r&&function(t,e){let{parent:n,startIndex:i,endIndex:r}=t,o=n.child(i),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let a=(s.length?s[s.length-1]:e).contentMatch;for(let t=i;a&&t<r;t++)a=a.matchType(n.child(t).type);return a&&a.validEnd?s:null}(i,e);return o?r.map(Pt).concat({type:e,attrs:n}).concat(o.map(Pt)):null}function Pt(t){return{type:t,attrs:null}}function Rt(t,e,n=1,i){let r=t.resolve(e),o=r.depth-n,s=i&&i[i.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let t=r.depth-1,e=n-2;t>o;t--,e--){let n=r.node(t),o=r.index(t);if(n.type.spec.isolating)return!1;let s=n.content.cutByIndex(o,n.childCount),a=i&&i[e+1];a&&(s=s.replaceChild(0,a.type.create(a.attrs)));let l=i&&i[e]||n;if(!n.canReplace(o+1,n.childCount)||!l.type.validContent(s))return!1}let a=r.indexAfter(o),l=i&&i[0];return r.node(o).canReplaceWith(a,a,l?l.type:r.node(o+1).type)}function Lt(t,e){let n=t.resolve(e),i=n.index();return Nt(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function Nt(t,e){return!(!t||!e||t.isLeaf||!t.canAppend(e))}function Bt(t,e,n=-1){let i=t.resolve(e);for(let t=i.depth;;t--){let r,o,s=i.index(t);if(t==i.depth?(r=i.nodeBefore,o=i.nodeAfter):n>0?(r=i.node(t+1),s++,o=i.node(t).maybeChild(s)):(r=i.node(t).maybeChild(s-1),o=i.node(t+1)),r&&!r.isTextblock&&Nt(r,o)&&i.node(t).canReplace(s,s+1))return e;if(0==t)break;e=n<0?i.before(t):i.after(t)}}function jt(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(0==i.parentOffset)for(let t=i.depth-1;t>=0;t--){let e=i.index(t);if(i.node(t).canReplaceWith(e,e,n))return i.before(t+1);if(e>0)return null}if(i.parentOffset==i.parent.content.size)for(let t=i.depth-1;t>=0;t--){let e=i.indexAfter(t);if(i.node(t).canReplaceWith(e,e,n))return i.after(t+1);if(e<i.node(t).childCount)return null}return null}function zt(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let r=n.content;for(let t=0;t<n.openStart;t++)r=r.firstChild.content;for(let t=1;t<=(0==n.openStart&&n.size?2:1);t++)for(let e=i.depth;e>=0;e--){let n=e==i.depth?0:i.pos<=(i.start(e+1)+i.end(e+1))/2?-1:1,o=i.index(e)+(n>0?1:0),s=i.node(e),a=!1;if(1==t)a=s.canReplace(o,o,r);else{let t=s.contentMatchAt(o).findWrapping(r.firstChild.type);a=t&&s.canReplaceWith(o,o,t[0])}if(a)return 0==n?i.pos:n<0?i.before(e+1):i.after(e+1)}return null}function $t(t,e,n=e,i=p.empty){if(e==n&&!i.size)return null;let r=t.resolve(e),o=t.resolve(n);return Ht(r,o,i)?new Et(e,n,i):new Ut(r,o,i).fit()}function Ht(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}wt.jsonID("replaceAround",Tt);class Ut{constructor(t,e,n){this.$from=t,this.$to=e,this.unplaced=n,this.frontier=[],this.placed=a.empty;for(let e=0;e<=t.depth;e++){let n=t.node(e);this.frontier.push({type:n.type,match:n.contentMatchAt(t.indexAfter(e))})}for(let e=t.depth;e>0;e--)this.placed=a.from(t.node(e).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),e=this.placed.size-this.depth-this.$from.depth,n=this.$from,i=this.close(t<0?this.$to:n.doc.resolve(t));if(!i)return null;let r=this.placed,o=n.depth,s=i.depth;for(;o&&s&&1==r.childCount;)r=r.firstChild.content,o--,s--;let a=new p(r,o,s);return t>-1?new Tt(n.pos,t,this.$to.pos,this.$to.end(),a,e):a.size||n.pos!=this.$to.pos?new Et(n.pos,i.pos,a):null}findFittable(){let t=this.unplaced.openStart;for(let e=this.unplaced.content,n=0,i=this.unplaced.openEnd;n<t;n++){let r=e.firstChild;if(e.childCount>1&&(i=0),r.type.spec.isolating&&i<=n){t=n;break}e=r.content}for(let e=1;e<=2;e++)for(let n=1==e?t:this.unplaced.openStart;n>=0;n--){let t,i=null;n?(i=qt(this.unplaced.content,n-1).firstChild,t=i.content):t=this.unplaced.content;let r=t.firstChild;for(let t=this.depth;t>=0;t--){let o,{type:s,match:l}=this.frontier[t],c=null;if(1==e&&(r?l.matchType(r.type)||(c=l.fillBefore(a.from(r),!1)):i&&s.compatibleContent(i.type)))return{sliceDepth:n,frontierDepth:t,parent:i,inject:c};if(2==e&&r&&(o=l.findWrapping(r.type)))return{sliceDepth:n,frontierDepth:t,parent:i,wrap:o};if(i&&l.matchType(i.type))break}}}openMore(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=qt(t,e);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new p(t,e+1,Math.max(n,i.size+e>=t.size-n?e+1:0)),!0)}dropNode(){let{content:t,openStart:e,openEnd:n}=this.unplaced,i=qt(t,e);if(i.childCount<=1&&e>0){let r=t.size-e<=e+i.size;this.unplaced=new p(Vt(t,e-1,1),e-1,r?e-1:n)}else this.unplaced=new p(Vt(t,e,1),e,n)}placeNodes({sliceDepth:t,frontierDepth:e,parent:n,inject:i,wrap:r}){for(;this.depth>e;)this.closeFrontierNode();if(r)for(let t=0;t<r.length;t++)this.openFrontierNode(r[t]);let o=this.unplaced,s=n?n.content:o.content,l=o.openStart-t,c=0,h=[],{match:u,type:d}=this.frontier[e];if(i){for(let t=0;t<i.childCount;t++)h.push(i.child(t));u=u.matchFragment(i)}let f=s.size+t-(o.content.size-o.openEnd);for(;c<s.childCount;){let t=s.child(c),e=u.matchType(t.type);if(!e)break;c++,(c>1||0==l||t.content.size)&&(u=e,h.push(Kt(t.mark(d.allowedMarks(t.marks)),1==c?l:0,c==s.childCount?f:-1)))}let g=c==s.childCount;g||(f=-1),this.placed=Wt(this.placed,e,a.from(h)),this.frontier[e].match=u,g&&f<0&&n&&n.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let t=0,e=s;t<f;t++){let t=e.lastChild;this.frontier.push({type:t.type,match:t.contentMatchAt(t.childCount)}),e=t.content}this.unplaced=g?0==t?p.empty:new p(Vt(o.content,t-1,1),t-1,f<0?o.openEnd:t-1):new p(Vt(o.content,t,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t,e=this.frontier[this.depth];if(!e.type.isTextblock||!Xt(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:n}=this.$to,i=this.$to.after(n);for(;n>1&&i==this.$to.end(--n);)++i;return i}findCloseLevel(t){t:for(let e=Math.min(this.depth,t.depth);e>=0;e--){let{match:n,type:i}=this.frontier[e],r=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),o=Xt(t,e,i,n,r);if(o){for(let n=e-1;n>=0;n--){let{match:e,type:i}=this.frontier[n],r=Xt(t,n,i,e,!0);if(!r||r.childCount)continue t}return{depth:e,fit:o,move:r?t.doc.resolve(t.after(e+1)):t}}}}close(t){let e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=Wt(this.placed,e.depth,e.fit)),t=e.move;for(let n=e.depth+1;n<=t.depth;n++){let e=t.node(n),i=e.type.contentMatch.fillBefore(e.content,!0,t.index(n));this.openFrontierNode(e.type,e.attrs,i)}return t}openFrontierNode(t,e=null,n){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Wt(this.placed,this.depth,a.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(a.empty,!0);t.childCount&&(this.placed=Wt(this.placed,this.frontier.length,t))}}function Vt(t,e,n){return 0==e?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Vt(t.firstChild.content,e-1,n)))}function Wt(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Wt(t.lastChild.content,e-1,n)))}function qt(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Kt(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,Kt(i.firstChild,e-1,1==i.childCount?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(a.empty,!0)))),t.copy(i)}function Xt(t,e,n,i,r){let o=t.node(e),s=r?t.indexAfter(e):t.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=i.fillBefore(o.content,!0,s);return a&&!function(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}(n,o.content,s)?a:null}function Gt(t,e,n,i,r){if(e<n){let r=t.firstChild;t=t.replaceChild(0,r.copy(Gt(r.content,e+1,n,i,r)))}if(e>i){let e=r.contentMatchAt(0),n=e.fillBefore(t).append(t);t=n.append(e.matchFragment(n).fillBefore(a.empty,!0))}return t}function Yt(t,e){let n=[];for(let i=Math.min(t.depth,e.depth);i>=0;i--){let r=t.start(i);if(r<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(r==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==r-1)&&n.push(i)}return n}class Jt extends wt{constructor(t,e,n){super(),this.pos=t,this.attr=e,this.value=n}apply(t){let e=t.nodeAt(this.pos);if(!e)return xt.fail("No node at attribute step's position");let n=Object.create(null);for(let t in e.attrs)n[t]=e.attrs[t];n[this.attr]=this.value;let i=e.type.create(n,null,e.marks);return xt.fromReplace(t,this.pos,this.pos+1,new p(a.from(i),0,e.isLeaf?0:1))}getMap(){return yt.empty}invert(t){return new Jt(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let e=t.mapResult(this.pos,1);return e.deletedAfter?null:new Jt(e.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,e){if("number"!=typeof e.pos||"string"!=typeof e.attr)throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jt(e.pos,e.attr,e.value)}}wt.jsonID("attr",Jt);class Zt extends wt{constructor(t,e){super(),this.attr=t,this.value=e}apply(t){let e=Object.create(null);for(let n in t.attrs)e[n]=t.attrs[n];e[this.attr]=this.value;let n=t.type.create(e,t.content,t.marks);return xt.ok(n)}getMap(){return yt.empty}invert(t){return new Zt(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,e){if("string"!=typeof e.attr)throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Zt(e.attr,e.value)}}wt.jsonID("docAttr",Zt);let Qt=class extends Error{};Qt=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n},Qt.prototype=Object.create(Error.prototype),Qt.prototype.constructor=Qt,Qt.prototype.name="TransformError";class te{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new vt}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let e=this.maybeStep(t);if(e.failed)throw new Qt(e.failed);return this}maybeStep(t){let e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e}get docChanged(){return this.steps.length>0}addStep(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e}replace(t,e=t,n=p.empty){let i=$t(this.doc,t,e,n);return i&&this.step(i),this}replaceWith(t,e,n){return this.replace(t,e,new p(a.from(n),0,0))}delete(t,e){return this.replace(t,e,p.empty)}insert(t,e){return this.replaceWith(t,t,e)}replaceRange(t,e,n){return function(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let r=t.doc.resolve(e),o=t.doc.resolve(n);if(Ht(r,o,i))return t.step(new Et(e,n,i));let s=Yt(r,t.doc.resolve(n));0==s[s.length-1]&&s.pop();let a=-(r.depth+1);s.unshift(a);for(let t=r.depth,e=r.pos-1;t>0;t--,e--){let n=r.node(t).type.spec;if(n.defining||n.definingAsContext||n.isolating)break;s.indexOf(t)>-1?a=t:r.before(t)==e&&s.splice(1,0,-t)}let l=s.indexOf(a),c=[],h=i.openStart;for(let t=i.content,e=0;;e++){let n=t.firstChild;if(c.push(n),e==i.openStart)break;t=n.content}for(let t=h-1;t>=0;t--){let e=c[t],n=(u=e.type).spec.defining||u.spec.definingForContent;if(n&&!e.sameMarkup(r.node(Math.abs(a)-1)))h=t;else if(n||!e.type.isTextblock)break}var u;for(let e=i.openStart;e>=0;e--){let a=(e+h+1)%(i.openStart+1),u=c[a];if(u)for(let e=0;e<s.length;e++){let c=s[(e+l)%s.length],h=!0;c<0&&(h=!1,c=-c);let d=r.node(c-1),f=r.index(c-1);if(d.canReplaceWith(f,f,u.type,u.marks))return t.replace(r.before(c),h?o.after(c):n,new p(Gt(i.content,0,i.openStart,a),a,i.openEnd))}}let d=t.steps.length;for(let a=s.length-1;a>=0&&(t.replace(e,n,i),!(t.steps.length>d));a--){let t=s[a];t<0||(e=r.before(t),n=o.after(t))}}(this,t,e,n),this}replaceRangeWith(t,e,n){return function(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let r=jt(t.doc,e,i.type);null!=r&&(e=n=r)}t.replaceRange(e,n,new p(a.from(i),0,0))}(this,t,e,n),this}deleteRange(t,e){return function(t,e,n){let i=t.doc.resolve(e),r=t.doc.resolve(n),o=Yt(i,r);for(let e=0;e<o.length;e++){let n=o[e],s=e==o.length-1;if(s&&0==n||i.node(n).type.contentMatch.validEnd)return t.delete(i.start(n),r.end(n));if(n>0&&(s||i.node(n-1).canReplace(i.index(n-1),r.indexAfter(n-1))))return t.delete(i.before(n),r.after(n))}for(let o=1;o<=i.depth&&o<=r.depth;o++)if(e-i.start(o)==i.depth-o&&n>i.end(o)&&r.end(o)-n!=r.depth-o)return t.delete(i.before(o),n);t.delete(e,n)}(this,t,e),this}lift(t,e){return function(t,e,n){let{$from:i,$to:r,depth:o}=e,s=i.before(o+1),l=r.after(o+1),c=s,h=l,u=a.empty,d=0;for(let t=o,e=!1;t>n;t--)e||i.index(t)>0?(e=!0,u=a.from(i.node(t).copy(u)),d++):c--;let f=a.empty,g=0;for(let t=o,e=!1;t>n;t--)e||r.after(t+1)<r.end(t)?(e=!0,f=a.from(r.node(t).copy(f)),g++):h++;t.step(new Tt(c,h,s,l,new p(u.append(f),d,g),u.size-d,!0))}(this,t,e),this}join(t,e=1){return function(t,e,n){let i=new Et(e-n,e+n,p.empty,!0);t.step(i)}(this,t,e),this}wrap(t,e){return function(t,e,n){let i=a.empty;for(let t=n.length-1;t>=0;t--){if(i.size){let e=n[t].type.contentMatch.matchFragment(i);if(!e||!e.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=a.from(n[t].type.create(n[t].attrs,i))}let r=e.start,o=e.end;t.step(new Tt(r,o,r,o,new p(i,0,0),n.length,!0))}(this,t,e),this}setBlockType(t,e=t,n,i=null){return function(t,e,n,i,r){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,((e,n)=>{if(e.isTextblock&&!e.hasMarkup(i,r)&&function(t,e,n){let i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(t.doc,t.mapping.slice(o).map(n),i)){let s=null;if(i.schema.linebreakReplacement){let t="pre"==i.whitespace,e=!!i.contentMatch.matchType(i.schema.linebreakReplacement);t&&!e?s=!1:!t&&e&&(s=!0)}!1===s&&function(t,e,n,i){e.forEach(((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let r=t.mapping.slice(i).map(n+1+o);t.replaceWith(r,r+1,e.type.schema.text("\n"))}}))}(t,e,n,o),Ot(t,t.mapping.slice(o).map(n,1),i,void 0,null===s);let l=t.mapping.slice(o),c=l.map(n,1),h=l.map(n+e.nodeSize,1);return t.step(new Tt(c,h,c+1,h-1,new p(a.from(i.create(r,null,e.marks)),0,0),1,!0)),!0===s&&function(t,e,n,i){e.forEach(((r,o)=>{if(r.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(r.text);){let r=t.mapping.slice(i).map(n+1+o+s.index);t.replaceWith(r,r+1,e.type.schema.linebreakReplacement.create())}}}))}(t,e,n,o),!1}}))}(this,t,e,n,i),this}setNodeMarkup(t,e,n=null,i){return function(t,e,n,i,r){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(i,null,r||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Tt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new p(a.from(s),0,0),1,!0))}(this,t,e,n,i),this}setNodeAttribute(t,e,n){return this.step(new Jt(t,e,n)),this}setDocAttribute(t,e){return this.step(new Zt(t,e)),this}addNodeMark(t,e){return this.step(new kt(t,e)),this}removeNodeMark(t,e){if(!(e instanceof u)){let n=this.doc.nodeAt(t);if(!n)throw new RangeError("No node at position "+t);if(!(e=e.isInSet(n.marks)))return this}return this.step(new At(t,e)),this}split(t,e=1,n){return function(t,e,n=1,i){let r=t.doc.resolve(e),o=a.empty,s=a.empty;for(let t=r.depth,e=r.depth-n,l=n-1;t>e;t--,l--){o=a.from(r.node(t).copy(o));let e=i&&i[l];s=a.from(e?e.type.create(e.attrs,s):r.node(t).copy(s))}t.step(new Et(e,e,new p(o.append(s),n,n),!0))}(this,t,e,n),this}addMark(t,e,n){return function(t,e,n,i){let r,o,s=[],a=[];t.doc.nodesBetween(e,n,((t,l,c)=>{if(!t.isInline)return;let h=t.marks;if(!i.isInSet(h)&&c.type.allowsMarkType(i.type)){let c=Math.max(l,e),u=Math.min(l+t.nodeSize,n),d=i.addToSet(h);for(let t=0;t<h.length;t++)h[t].isInSet(d)||(r&&r.to==c&&r.mark.eq(h[t])?r.to=u:s.push(r=new Ct(c,u,h[t])));o&&o.to==c?o.to=u:a.push(o=new St(c,u,i))}})),s.forEach((e=>t.step(e))),a.forEach((e=>t.step(e)))}(this,t,e,n),this}removeMark(t,e,n){return function(t,e,n,i){let r=[],o=0;t.doc.nodesBetween(e,n,((t,s)=>{if(!t.isInline)return;o++;let a=null;if(i instanceof G){let e,n=t.marks;for(;e=i.isInSet(n);)(a||(a=[])).push(e),n=e.removeFromSet(n)}else i?i.isInSet(t.marks)&&(a=[i]):a=t.marks;if(a&&a.length){let i=Math.min(s+t.nodeSize,n);for(let t=0;t<a.length;t++){let n,l=a[t];for(let t=0;t<r.length;t++){let e=r[t];e.step==o-1&&l.eq(r[t].style)&&(n=e)}n?(n.to=i,n.step=o):r.push({style:l,from:Math.max(s,e),to:i,step:o})}}})),r.forEach((e=>t.step(new Ct(e.from,e.to,e.style))))}(this,t,e,n),this}clearIncompatible(t,e,n){return Ot(this,t,e,n),this}}const ee=Object.create(null);class ne{constructor(t,e,n){this.$anchor=t,this.$head=e,this.ranges=n||[new ie(t.min(e),t.max(e))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,e=p.empty){let n=e.content.lastChild,i=null;for(let t=0;t<e.openEnd;t++)i=n,n=n.lastChild;let r=t.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:a,$to:l}=o[s],c=t.mapping.slice(r);t.replaceRange(c.map(a.pos),c.map(l.pos),s?p.empty:e),0==s&&pe(t,r,(n?n.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,e){let n=t.steps.length,i=this.ranges;for(let r=0;r<i.length;r++){let{$from:o,$to:s}=i[r],a=t.mapping.slice(n),l=a.map(o.pos),c=a.map(s.pos);r?t.deleteRange(l,c):(t.replaceRangeWith(l,c,e),pe(t,n,e.isInline?-1:1))}}static findFrom(t,e,n=!1){let i=t.parent.inlineContent?new se(t):de(t.node(0),t.parent,t.pos,t.index(),e,n);if(i)return i;for(let i=t.depth-1;i>=0;i--){let r=e<0?de(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):de(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(r)return r}return null}static near(t,e=1){return this.findFrom(t,e)||this.findFrom(t,-e)||new he(t.node(0))}static atStart(t){return de(t,t,0,0,1)||new he(t)}static atEnd(t){return de(t,t,t.content.size,t.childCount,-1)||new he(t)}static fromJSON(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");let n=ee[e.type];if(!n)throw new RangeError(`No selection type ${e.type} defined`);return n.fromJSON(t,e)}static jsonID(t,e){if(t in ee)throw new RangeError("Duplicate use of selection JSON ID "+t);return ee[t]=e,e.prototype.jsonID=t,e}getBookmark(){return se.between(this.$anchor,this.$head).getBookmark()}}ne.prototype.visible=!0;class ie{constructor(t,e){this.$from=t,this.$to=e}}let re=!1;function oe(t){re||t.parent.inlineContent||(re=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class se extends ne{constructor(t,e=t){oe(t),oe(e),super(t,e)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,e){let n=t.resolve(e.map(this.head));if(!n.parent.inlineContent)return ne.near(n);let i=t.resolve(e.map(this.anchor));return new se(i.parent.inlineContent?i:n,n)}replace(t,e=p.empty){if(super.replace(t,e),e==p.empty){let e=this.$from.marksAcross(this.$to);e&&t.ensureMarks(e)}}eq(t){return t instanceof se&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new ae(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,e){if("number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new se(t.resolve(e.anchor),t.resolve(e.head))}static create(t,e,n=e){let i=t.resolve(e);return new this(i,n==e?i:t.resolve(n))}static between(t,e,n){let i=t.pos-e.pos;if(n&&!i||(n=i>=0?1:-1),!e.parent.inlineContent){let t=ne.findFrom(e,n,!0)||ne.findFrom(e,-n,!0);if(!t)return ne.near(e,n);e=t.$head}return t.parent.inlineContent||(0==i||(t=(ne.findFrom(t,-n,!0)||ne.findFrom(t,n,!0)).$anchor).pos<e.pos!=i<0)&&(t=e),new se(t,e)}}ne.jsonID("text",se);class ae{constructor(t,e){this.anchor=t,this.head=e}map(t){return new ae(t.map(this.anchor),t.map(this.head))}resolve(t){return se.between(t.resolve(this.anchor),t.resolve(this.head))}}class le extends ne{constructor(t){let e=t.nodeAfter,n=t.node(0).resolve(t.pos+e.nodeSize);super(t,n),this.node=e}map(t,e){let{deleted:n,pos:i}=e.mapResult(this.anchor),r=t.resolve(i);return n?ne.near(r):new le(r)}content(){return new p(a.from(this.node),0,0)}eq(t){return t instanceof le&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ce(this.anchor)}static fromJSON(t,e){if("number"!=typeof e.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new le(t.resolve(e.anchor))}static create(t,e){return new le(t.resolve(e))}static isSelectable(t){return!t.isText&&!1!==t.type.spec.selectable}}le.prototype.visible=!1,ne.jsonID("node",le);class ce{constructor(t){this.anchor=t}map(t){let{deleted:e,pos:n}=t.mapResult(this.anchor);return e?new ae(n,n):new ce(n)}resolve(t){let e=t.resolve(this.anchor),n=e.nodeAfter;return n&&le.isSelectable(n)?new le(e):ne.near(e)}}class he extends ne{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,e=p.empty){if(e==p.empty){t.delete(0,t.doc.content.size);let e=ne.atStart(t.doc);e.eq(t.selection)||t.setSelection(e)}else super.replace(t,e)}toJSON(){return{type:"all"}}static fromJSON(t){return new he(t)}map(t){return new he(t)}eq(t){return t instanceof he}getBookmark(){return ue}}ne.jsonID("all",he);const ue={map(){return this},resolve:t=>new he(t)};function de(t,e,n,i,r,o=!1){if(e.inlineContent)return se.create(t,n);for(let s=i-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){let i=e.child(s);if(i.isAtom){if(!o&&le.isSelectable(i))return le.create(t,n-(r<0?i.nodeSize:0))}else{let e=de(t,i,n+r,r<0?i.childCount:0,r,o);if(e)return e}n+=i.nodeSize*r}return null}function pe(t,e,n){let i=t.steps.length-1;if(i<e)return;let r,o=t.steps[i];(o instanceof Et||o instanceof Tt)&&(t.mapping.maps[i].forEach(((t,e,n,i)=>{null==r&&(r=i)})),t.setSelection(ne.near(t.doc.resolve(r),n)))}class fe extends te{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=-3&(1|this.updated),this.storedMarks=null,this}get selectionSet(){return(1&this.updated)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=2,this}ensureMarks(t){return u.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(2&this.updated)>0}addStep(t,e){super.addStep(t,e),this.updated=-3&this.updated,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,e=!0){let n=this.selection;return e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||u.none))),n.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,e,n){let i=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(null==n&&(n=e),n=null==n?e:n,!t)return this.deleteRange(e,n);let r=this.storedMarks;if(!r){let t=this.doc.resolve(e);r=n==e?t.marks():t.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,i.text(t,r)),this.selection.empty||this.setSelection(ne.near(this.selection.$to)),this}}setMeta(t,e){return this.meta["string"==typeof t?t:t.key]=e,this}getMeta(t){return this.meta["string"==typeof t?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=4,this}get scrolledIntoView(){return(4&this.updated)>0}}function ge(t,e){return e&&t?t.bind(e):t}class me{constructor(t,e,n){this.name=t,this.init=ge(e.init,n),this.apply=ge(e.apply,n)}}const ye=[new me("doc",{init:t=>t.doc||t.schema.topNodeType.createAndFill(),apply:t=>t.doc}),new me("selection",{init:(t,e)=>t.selection||ne.atStart(e.doc),apply:t=>t.selection}),new me("storedMarks",{init:t=>t.storedMarks||null,apply:(t,e,n,i)=>i.selection.$cursor?t.storedMarks:null}),new me("scrollToSelection",{init:()=>0,apply:(t,e)=>t.scrolledIntoView?e+1:e})];class ve{constructor(t,e){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=ye.slice(),e&&e.forEach((t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new me(t.key,t.spec.state,t))}))}}class be{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,e=-1){for(let n=0;n<this.config.plugins.length;n++)if(n!=e){let e=this.config.plugins[n];if(e.spec.filterTransaction&&!e.spec.filterTransaction.call(e,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let e=[t],n=this.applyInner(t),i=null;for(;;){let r=!1;for(let o=0;o<this.config.plugins.length;o++){let s=this.config.plugins[o];if(s.spec.appendTransaction){let a=i?i[o].n:0,l=i?i[o].state:this,c=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,l,n);if(c&&n.filterTransaction(c,o)){if(c.setMeta("appendedTransaction",t),!i){i=[];for(let t=0;t<this.config.plugins.length;t++)i.push(t<o?{state:n,n:e.length}:{state:this,n:0})}e.push(c),n=n.applyInner(c),r=!0}i&&(i[o]={state:n,n:e.length})}}if(!r)return{state:n,transactions:e}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let e=new be(this.config),n=this.config.fields;for(let i=0;i<n.length;i++){let r=n[i];e[r.name]=r.apply(t,this[r.name],this,e)}return e}get tr(){return new fe(this)}static create(t){let e=new ve(t.doc?t.doc.type.schema:t.schema,t.plugins),n=new be(e);for(let i=0;i<e.fields.length;i++)n[e.fields[i].name]=e.fields[i].init(t,n);return n}reconfigure(t){let e=new ve(this.schema,t.plugins),n=e.fields,i=new be(e);for(let e=0;e<n.length;e++){let r=n[e].name;i[r]=this.hasOwnProperty(r)?this[r]:n[e].init(t,i)}return i}toJSON(t){let e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((t=>t.toJSON()))),t&&"object"==typeof t)for(let n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[n],r=i.spec.state;r&&r.toJSON&&(e[n]=r.toJSON.call(i,this[i.key]))}return e}static fromJSON(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new ve(t.schema,t.plugins),r=new be(i);return i.fields.forEach((i=>{if("doc"==i.name)r.doc=I.fromJSON(t.schema,e.doc);else if("selection"==i.name)r.selection=ne.fromJSON(r.doc,e.selection);else if("storedMarks"==i.name)e.storedMarks&&(r.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(let o in n){let s=n[o],a=s.spec.state;if(s.key==i.name&&a&&a.fromJSON&&Object.prototype.hasOwnProperty.call(e,o))return void(r[i.name]=a.fromJSON.call(s,t,e[o],r))}r[i.name]=i.init(t,r)}})),r}}function we(t,e,n){for(let i in t){let r=t[i];r instanceof Function?r=r.bind(e):"handleDOMEvents"==i&&(r=we(r,e,{})),n[i]=r}return n}class xe{constructor(t){this.spec=t,this.props={},t.props&&we(t.props,this,this.props),this.key=t.key?t.key.key:Se("plugin")}getState(t){return t[this.key]}}const _e=Object.create(null);function Se(t){return t in _e?t+"$"+ ++_e[t]:(_e[t]=0,t+"$")}class Ce{constructor(t="key"){this.key=Se(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}var ke="k-parent-node",Ae="k-colgroup-data",Ee="k-resizable-node",Te="k-editor-resize-handle",Me="data-dir-table-resize",Oe="data-dir-image-resize",Ie=n(1635),De=function(t,e){var n=e.style,i=e.value,r=e.newValue;if(!t)return{changed:!1,style:null};var o=t.split(/\s*;\s*/).filter((function(t){return Boolean(t)})),s=o.filter((function(t){var e=t.split(/\s*:\s*/);return!(e[0].toLowerCase()===n&&i.test(e[1]))}));return r&&s.push("".concat(n,": ").concat(r)),{style:s.join("; ")+(s.length?";":""),changed:Boolean(r)||s.length!==o.length}},Fe=/^.+$/;function Pe(t,e,n){var i;if(new RegExp("[^-]?"+e+":").test(t.style||"")){var r=De(t.style||"",{style:e,value:Fe,newValue:n}).style;i=(0,Ie.__assign)((0,Ie.__assign)({},t),{style:r})}else i=t.style?(0,Ie.__assign)((0,Ie.__assign)({},t),{style:t.style.replace(/;$/,"")+"; "+e+": "+n+";"}):(0,Ie.__assign)((0,Ie.__assign)({},t),{style:e+": "+n+";"});return i}var Re=function(t,e){for(var n=t.selection.$from,i=n.depth;i>=0;i--){var r=n.index(i);if(n.node(i).canReplaceWith(r,r,e))return!0}return!1},Le=function(t){return t instanceof I?t.type.name:t.name},Ne=function(t,e){return void 0===e&&(e=1),function(n){return function(t,e){return void 0===e&&(e=1),function(n){for(var i=n.$from,r=i.depth;r>0;r--){var o=i.node(r);if(t(o)&&0==(e-=1))return{depth:r,node:o}}}}((function(e){return Le(e)===Le(t)}),e)(n)}};function Be(t,e){for(var n=t.depth;n>0;n--){var i=t.node(n);if(e(i))return{node:i,depth:n}}return null}var je=function(t){var e={};for(var n in t)n&&(t[n]||0===t[n])&&(e[n]=t[n]);return e},ze=function(t,e){return function(n,i){var r=n.selection,o=n.tr;r instanceof le&&r.node.type.name===t.type.name&&t.isLeaf&&!t.isText&&1===t.nodeSize?(o.setNodeMarkup(r.from,null,(0,Ie.__assign)((0,Ie.__assign)({},je(r.node.attrs)),je(t.attrs))),o.setSelection(le.create(o.doc,r.from))):o.replaceSelectionWith(t),e&&o.scrollIntoView(),i(o)}},$e=function(t,e,n,i){var r=a.from(gn(t,n,i)),o=a.from(gn(e,n,i));return r.eq(o)},He=function(t){var e=t.selection;if(e instanceof se||e instanceof he){var n=e.content().content;return n.textBetween(0,n.size)}return""},Ue=function(t){if(t.selection instanceof le)return t.selection.node},Ve=function(t){var e="",n=!1,i=t.selection,r=t.doc,o=i.$from,s=i.$to,a=i.from,l=i.to;return o.sameParent(s)&&(r.nodesBetween(a,l,(function(t){n=n||t.isLeaf&&!t.isText})),n||(e=He(t))),e},We=function(t){return t.replace(/<\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/gi,"</$1>\n").replace(/<(ul|ol)([^>]*)><li/gi,"<$1$2>\n<li").replace(/<br \/>/gi,"<br />\n").replace(/\n$/,"")},qe={before:/[^ !,?.\[\]{}()]+$/i,after:/^[^ !,?.\[\]{}()]+/i},Ke=function(t,e,n){if(!n.applyToWord||!t.selection.empty)return{state:t,dispatch:e};var i=!0===n.applyToWord?qe:n.applyToWord,r=null,o=t.tr,s=t.selection,a=s.$head.nodeBefore,l=s.$head.nodeAfter;if(a&&"text"===a.type.name&&a.text&&l&&"text"===l.type.name&&l.text){var c=[];s.$head.parent.descendants((function(t,e){return c.push({node:t,pos:e}),!1}));for(var h=s.$head.parentOffset,u=c.findIndex((function(t){var e=t.node,n=t.pos;return n<=h&&n+e.nodeSize>=h})),d=c[u].node.text,p=!1,f=u-1;f>=0;f--){var g=c[f];!p&&g&&"text"===g.node.type.name?d=g.node.text+d:(p=!0,h-=g.node.nodeSize)}for(f=u+1;f<c.length;f++){if(!(g=c[f])||"text"!==g.node.type.name)break;d+=g.node.text}var m=d.substring(0,h),y=d.substring(h),v=i.before.exec(m),b=i.after.exec(y);if(v&&b){var w=v[0].length,x=b[0].length,_=r=s.from;o.setSelection(se.create(t.doc,_-w,_+x));return{state:{tr:o,selection:o.selection,doc:o.doc,storedMarks:null,schema:o.doc.type.schema},dispatch:function(t){t.setSelection(se.create(t.doc,r)),e(t)}}}}return{state:t,dispatch:e}},Xe=function(t,e){return function(n,i){var r=Ke(n,i,e),o=r.state,s=r.dispatch;return t(e)(o,s)}},Ge=function(t){return(t||"").split(/\s*;\s*/).filter(Boolean).map((function(t){var e,n=t.split(/\s*:\s*/);return(e={})[n[0]]=n[1],e})).reduce((function(t,e){return(0,Ie.__assign)((0,Ie.__assign)({},t),e)}),{})},Ye=function(t,e,n){var i=Ge(t);i[e]=n;var r=Object.keys(i).map((function(t){return i[t]?"".concat(t,": ").concat(i[t]):null})).filter(Boolean).join("; ");return r?r+";":null},Je=function(t,e,n){var i=t.getAttribute(e);void 0!==n&&n!==i?"style"===e?(t.removeAttribute(e),function(t,e){var n=Ge(e);for(var i in n)i&&void 0!==t.style[i]&&(t.style[i]=n[i])}(t,n)):t.setAttribute(e,n):void 0===n&&t.removeAttribute(e)},Ze=function(){function t(t,e){this.nodes=t,this.marks=e}return t.renderSpec=function(e,n,i){if(void 0===i&&(i=null),"string"==typeof n)return{dom:e.createTextNode(n)};if(null!=n.nodeType)return{dom:n};if(n.dom&&null!=n.dom.nodeType)return n;var r,o=n[0],s=o.indexOf(" ");s>0&&(i=o.slice(0,s),o=o.slice(s+1));var a=i?e.createElementNS(i,o):e.createElement(o),l=n[1],c=1;if(l&&"object"==typeof l&&null==l.nodeType&&!Array.isArray(l))for(var h in c=2,l)null!=l[h]&&((s=h.indexOf(" "))>0?a.setAttributeNS(h.slice(0,s),h.slice(s+1),l[h]):Je(a,h,l[h]));for(var u=c;u<n.length;u++){var d=n[u];if(0===d){if(u<n.length-1||u>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}var p=t.renderSpec(e,d,i),f=p.dom,g=p.contentDOM;if(a.appendChild(f),g){if(r)throw new RangeError("Multiple content holes");r=g}}return{dom:a,contentDOM:r}},t.fromSchema=function(e){return e.cached.domSerializer||(e.cached.domSerializer=new t(this.nodesFromSchema(e),this.marksFromSchema(e)))},t.nodesFromSchema=function(t){var e=Qe(t.nodes);return e.text||(e.text=function(t){return t.text}),e},t.marksFromSchema=function(t){return Qe(t.marks)},t.prototype.serializeFragment=function(t,e,n){var i=this;void 0===e&&(e={}),n||(n=tn(e).createDocumentFragment());var r=n,o=[];return t.forEach((function(t){if(o.length||t.marks.length){for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(i.marks[a.type.name]){if(!a.eq(o[n][0])||!1===a.type.spec.spanning)break;n++,s++}else s++}for(;n<o.length;)r=o.pop()[1];for(;s<t.marks.length;){var l=t.marks[s++],c=i.serializeMark(l,t.isInline,e);c&&(o.push([l,r]),r.appendChild(c.dom),r=c.contentDOM||c.dom)}}r.appendChild(i.serializeNodeInner(t,e))})),n},t.prototype.serializeNode=function(t,e){void 0===e&&(e={});for(var n=this.serializeNodeInner(t,e),i=t.marks.length-1;i>=0;i--){var r=this.serializeMark(t.marks[i],t.isInline,e);r&&((r.contentDOM||r.dom).appendChild(n),n=r.dom)}return n},t.prototype.serializeMark=function(e,n,i){void 0===i&&(i={});var r=this.marks[e.type.name];return r&&t.renderSpec(tn(i),r(e,n))},t.prototype.serializeNodeInner=function(e,n){var i=t.renderSpec(tn(n),this.nodes[e.type.name](e)),r=i.dom,o=i.contentDOM;if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r},t}();function Qe(t){var e={};for(var n in t)if(t[n]){var i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function tn(t){return t.document||window.document}var en=["div","ol","ul","li","table","tbody","thead","tfoot","caption","td","th","p","tr","col","colgroup","article","main","nav","header","footer","aside","section"],nn=function(t,e){var n=(t.ownerDocument||document).createElement(e);Array.from(t.rows).filter((function(t){return t.getAttribute(ke)===e})).forEach((function(t){t.removeAttribute(ke),n.appendChild(t)})),n.children.length&&t.appendChild(n)},rn=function(t,e){var n=e.toUpperCase();t.filter((function(t){return t.nodeName===n})).forEach((function(t){Array.from(t.children).forEach((function(n){n.setAttribute(ke,e),t.parentNode&&t.parentNode.insertBefore(n,t)})),t.remove()}))},on=function(t,e){void 0===e&&(e=en);var n=e.join("|");return t.replace(new RegExp("\\s*(<(?:"+n+")(?:\\s[^>]*?)?>)","g"),"$1").replace(new RegExp("(<\\/(?:"+n+")(?:\\s[^>]*?)?>)\\s*","g"),"$1")},sn="data-style",an=" "+sn+"=",ln=/<[^>]+>/gm,cn=/\sstyle=/gm,hn=function(t){return t.replace(cn,an)},un=function(t){var e,n=document.createElement("template");return n.innerHTML=function(t){return t.replace(ln,hn)}(t),e=n.content,Array.from(e.querySelectorAll("["+sn+"]")).forEach((function(t){var e=t.getAttribute(sn);t.removeAttribute(sn),function(t,e){t.split(";").filter((function(t){return""!==t.trim()})).forEach((function(t){var n=t.split(":");e.style[n[0].trim()]=n[1].trim()}))}(e,t)})),n.content},dn=function(t){return Array.from(t.childNodes).reduce((function(t,e){return t+(e.outerHTML||e.textContent||"")}),"")},pn=function(t){var e=Ze.fromSchema(t.type.schema).serializeFragment(t.content);return function(t){Array.from(t.querySelectorAll("table")).forEach((function(t){nn(t,"thead"),nn(t,"tbody"),nn(t,"tfoot");var e=Array.from(t.children).find((function(t){return 0===t.children.length}));e&&e.remove();var n=t.parentNode instanceof HTMLDivElement?t.parentNode:null;if(n&&n.matches("div[table]")){t.style.marginLeft=n.style.marginLeft,t.style.marginRight=n.style.marginRight;var i=Array.from(n.children).find((function(t){return t.matches("div[caption]")}));if(i&&"<img>"!==i.innerHTML){var r=t.createCaption();for(i.id&&(r.id=i.id),i.className&&(r.className=i.className),Array.from(i.style).forEach((function(t){r.style[t]=i.style[t]}));i.firstChild;)r.appendChild(i.firstChild)}n.style.width&&!t.style.width&&(t.style.width=n.style.width),n.parentNode.insertBefore(t,n),n.parentNode.removeChild(n)}}))}(e),e},fn=function(t,e,n){return Z.fromSchema(e).parse(t,n)},gn=function(t,e,n){var i,r=un(t);return i=r,Array.from(i.querySelectorAll("table")).forEach((function(t){var e=Array.from(t.children);e.some((function(t){return"THEAD"===t.nodeName||"TFOOT"===t.nodeName}))&&(rn(e,"thead"),rn(e,"tbody"),rn(e,"tfoot"));var n=e.find((function(t){return"COLGROUP"===t.nodeName}));if(n&&(t.setAttribute(Ae,n.outerHTML),n.remove()),t.caption||t.style.marginLeft||t.style.marginRight){var i=document.createElement("div");if(i.setAttribute("table",""),i.style.display="table",i.style.marginLeft=t.style.marginLeft,i.style.marginRight=t.style.marginRight,t.caption){var r=document.createElement("div");for(r.setAttribute("caption",""),t.caption.id&&(r.id=t.caption.id),t.caption.className&&(r.className=t.caption.className),Array.from(t.caption.style).forEach((function(e){r.style[e]=t.caption.style[e]}));t.caption.firstChild;)r.appendChild(t.caption.firstChild);t.removeChild(t.caption),i.appendChild(r)}t.parentNode.insertBefore(i,t),i.appendChild(t),/%/.test(t.style.width)&&(i.style.width=t.style.width,t.style.width="")}})),fn(r,e,n)},mn=function(t){var e=pn(t.doc);return dn(e)},yn=function(t,e,n){return void 0===e&&(e="setHTML"),void 0===n&&(n={preserveWhitespace:"full"}),function(i,r){return r(i.tr.setSelection(new he(i.doc)).replaceSelectionWith(gn(t,i.schema,n)).setMeta("commandName",e))}},vn=function(t,e,n){for(var i=function(i){var r=e[i],o=r.$from,s=r.$to,a=0===o.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(o.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},r=0;r<e.length;r++){var o=i(r);if(o)return o.v}return!1},bn=function(t,e,n){return function(i,r){var o=i.selection,s=o.empty,a=o.$cursor,l=o.ranges;if(s&&!a||!vn(i.doc,l,t))return!1;if(r)if(a)t.isInSet(i.storedMarks||a.marks())?r(n.removeStoredMark(t)):r(n.addStoredMark(t.create(e)));else{for(var c=!1,h=0;!c&&h<l.length;h++){var u=l[h],d=u.$from,p=u.$to;c=i.doc.rangeHasMark(d.pos,p.pos,t)}for(h=0;h<l.length;h++){var f=l[h];d=f.$from,p=f.$to;c?n.removeMark(d.pos,p.pos,t):n.addMark(d.pos,p.pos,t.create(e))}r(n.scrollIntoView())}return!0}},wn=function(t,e,n,i){void 0===i&&(i=null);var r=[],o=0;return t.doc.nodesBetween(e,n,(function(t,s){if(t.isInline){o++;var a=null;if(i instanceof G){var l=i.isInSet(t.marks);l&&(a=[l])}else i?i.isInSet(t.marks)&&(a=[i]):a=t.marks;if(a&&a.length)for(var c=Math.min(s+t.nodeSize,n),h=0;h<a.length;h++){for(var u=a[h],d=void 0,p=0;p<r.length;p++){var f=r[p];f.step===o-1&&u.eq(f.style)&&(d=f)}d?(d.to=c,d.step=o):r.push({style:u,from:Math.max(s,e),to:c,step:o})}}})),r.forEach((function(e){return t.step(new Ct(e.from,e.to,e.style))})),t},xn=function(t){var e=(void 0===t?{}:t).except,n=void 0===e?[]:e;return function(t,e){var i,r=t.tr;_n(r,{except:(i=n,i instanceof Array?i:[i])}),r.docChanged&&e(r)}},_n=function(t,e){var n=e.except,i=t.doc,r=t.selection,o=i.type.schema,s=r.empty,a=r.ranges,l=(n||[]).map((function(t){return t.name}));if(!s){var c=Object.keys(o.marks).map((function(t){return o.marks[t]})).filter((function(t){return-1===l.indexOf(t.name)}));a.forEach((function(e){var n=e.$from,i=e.$to;c.forEach((function(e){return t.removeMark(n.pos,i.pos,e)}))}))}},Sn=function(t,e){var n,i=t.schema.marks,r=(e.altMarks||[]).filter((function(t){return i[t]})),o=e.altStyle,s=t.selection,a=s.from,l=s.$from,c=s.to,h=s.empty,u=i[e.mark],d=t.doc,p=!1;return h?(n=t.storedMarks||l.marks(),p=u&&u.isInSet(n)||r.some((function(t){return i[t].isInSet(n)}))):p=u&&d.rangeHasMark(a,c,u)||r.some((function(t){return d.rangeHasMark(a,c,i[t])})),!p&&o&&i.style?kn(t,i.style).some((function(t){return null!==Cn(t,o)})):Boolean(p)},Cn=function(t,e){for(var n=(t&&t.attrs.style||"").split(/\s*;\s*/).filter((function(t){return Boolean(t)})),i=0;i<n.length;i++){var r=n[i].split(/\s*:\s*/);if(r[0].toLowerCase()===e.name&&e.value.test(r[1]))return r[1]}return null},kn=function(t,e){var n=t.selection,i=n.from,r=n.$from,o=n.to,s=n.empty,a=[];return s?a.push(e.isInSet(t.storedMarks||r.marks())):t.doc.nodesBetween(i,o,(function(t){t.isInline&&a.push(e.isInSet(t.marks))})),a},An=function(t,e){var n=kn(t,e),i=n.filter((function(t){return Boolean(t)}));return n.length===i.length?n[0]:void 0},En=function(t,e){var n=kn(t,e),i=n.filter((function(t){return Boolean(t)}));return{hasNodesWithoutMarks:n.length!==i.length,marks:i}},Tn=function(t,e){var n=t.find((function(t){return"style"===t.type.name})),i=n&&n.attrs.style;return De(i,e)},Mn=function(t,e,n,i,r){var o=r.create({style:i.style}),s=[],a=[],l=null,c=null;return t.doc.nodesBetween(e,n,(function(t,h,u){if(t.isInline){var d=t.marks;if(!o.isInSet(d)&&u.type.allowsMarkType(o.type)){var p=Math.max(h,e),f=Math.min(h+t.nodeSize,n),g=Tn(d,i);if(g.changed||i.newValue){for(var m=g.changed?{style:g.style||null}:{style:"".concat([i.style],": ").concat(i.newValue,";")},y=r.isInSet(d)?d.find((function(t){return"style"===t.type.name})):null,v=y?(0,Ie.__assign)((0,Ie.__assign)({},y.attrs),m):m,b=r.create(v),w=b.addToSet(d),x=0;x<d.length;x++)d[x].isInSet(w)||(l&&l.to===p&&l.mark.eq(d[x])?l.to=f:(l=new Ct(p,f,d[x]),s.push(l)));var _=c&&c.to===p,S=_&&b.attrs.style===c.mark.attrs.style;_&&S?c.to=f:Object.keys(v).some((function(t){return null!==v[t]}))&&(c=new St(p,f,b),a.push(c))}}}})),s.forEach((function(e){return t.step(e)})),a.forEach((function(e){return t.step(e)})),s.length+a.length>0},On=function(t,e){var n=t.schema.marks.style;return(n?kn(t,n):[]).map((function(t){return Cn(t,e)})).filter((function(t){return null!==t}))},In=function(t,e){return function(n,i,r){var o=n.selection,s=o.empty,a=o.ranges,l=n.selection instanceof se&&n.selection.$cursor;if(s&&!l||!vn(n.doc,a,t))return!1;var c,h,u,d,p=!1;if(i){var f=r||n.tr;if(l){var g=n.storedMarks||l.marks();if(t.isInSet(g)){var m=Tn(g,e),y=g.find((function(t){return"style"===t.type.name})),v=(0,Ie.__assign)((0,Ie.__assign)({},y?y.attrs:{}),{style:m.style||null});if(c=y.attrs,h=v,u=Object.keys(c),d=Object.keys(h),u.length===d.length&&u.every((function(t){return c[t]===h[t]})))return!1;i(f.removeStoredMark(t)),Object.keys(v).some((function(t){return null!==v[t]}))&&i(f.addStoredMark(t.create(v))),p=!0}}else{for(var b=0;b<a.length;b++){var w=a[b],x=w.$from,_=w.$to;p=Mn(f,x.pos,_.pos,e,t)||p}p&&(f.scrollIntoView(),i(f))}}return p}},Dn=function(t,e,n){return function(i,r){var o=i.schema.marks,s=t.altStyle,a=t.altMarks,l=void 0===a?[]:a,c=t.mark,h=e||i.tr,u=!1,d=!1,p=function(){return d=!0};s&&o.style&&(u=In(o.style,{style:s.name,value:s.value})(i,p,h));var f=(0,Ie.__spreadArray)([c],l,!0).filter((function(t){return o[t]})).map((function(t){return Sn(i,{mark:t})&&o[t]})).filter((function(t){return t}));return f.length?function(t,e,n,i){var r=e.selection,o=r.$cursor,s=r.ranges;if(i=i||e.tr,o)t.forEach((function(t){t.isInSet(e.storedMarks||o.marks())&&n(i.removeStoredMark(t))}));else{for(var a=function(e){var n=s[e],r=n.$from,o=n.$to;t.forEach((function(t){wn(i,r.pos,o.pos,t)}))},l=0;l<s.length;l++)a(l);n(i.scrollIntoView())}}(f,i,p,h):u||bn(o[c],n,h)(i,p),d&&r(h),d}},Fn=function(t,e){return function(n,i){var r=n.schema.marks.style,o={style:t.style,value:/^.+$/,newValue:t.value},s=n.tr;e&&s.setMeta("commandName",e),s.setMeta("args",t);var a=n.selection,l=a.empty,c=a.$cursor,h=a.ranges;if(l&&!c||!r||!vn(n.doc,h,r))return!1;if(c){var u=n.storedMarks||c.marks(),d=r.isInSet(u)?u.find((function(t){return"style"===t.type.name})):null,p={style:null};if(d&&d.attrs.style){var f=De(d.attrs.style,o);f.changed&&f.style&&(p.style=f.style)}else o.newValue&&(p.style="".concat([o.style],": ").concat(o.newValue,";"));var g=d?(0,Ie.__assign)((0,Ie.__assign)({},d.attrs),p):p;return Object.keys(g).some((function(t){return null!==g[t]}))?i(s.addStoredMark(r.create(g))):i(s.removeStoredMark(r)),!0}return In(r,o)(n,i,s)}},Pn=function(t,e){return function(n,i){var r=n.selection.$cursor;if(r){var o=r.parent,s=r.index(),a=n.schema.marks[t.mark],l=o.child(s).marks.find((function(t){return t.type===a})),c=o.childCount,h=r.pos-r.textOffset,u=o.child(s).nodeSize,d=void 0,p=void 0;for(d=s-1;d>=0&&l.isInSet(o.child(d).marks);)u+=p=o.child(d).nodeSize,h-=p,d-=1;for(d=s+1;d<c&&l.isInSet(o.child(d).marks);)u+=o.child(d).nodeSize,d+=1;i(wn(e||n.tr,h,h+u,l))}else Dn(t,e)(n,i)}},Rn=function(t,e){var n=t.mark,i=t.attrs;return void 0===e&&(e="link"),function(t,r){var o=t.schema.marks,s=t.tr;e&&(s.setMeta("commandName",e),s.setMeta("args",i));var a=!1,l=function(){return a=!0};if(function(t,e){var n=kn(t,e);return 1===n.length&&n[0]?n[0]:null}(t,o[n]))!function(t,e){return function(n,i){var r=n.selection,o=r.$cursor,s=r.from,a=r.to,l=n.schema.marks[t.mark];if(o){var c=o.parent,h=o.index(),u=c.child(h).marks.find((function(t){return t.type===l})),d=c.childCount,p=o.pos-o.textOffset,f=c.child(h).nodeSize,g=void 0,m=void 0;for(g=h-1;g>=0&&u.isInSet(c.child(g).marks);)f+=m=c.child(g).nodeSize,p-=m,g-=1;for(g=h+1;g<d&&u.isInSet(c.child(g).marks);)f+=c.child(g).nodeSize,g+=1;e.removeMark(p,p+f,l),e.addMark(p,p+f,l.create(t.attrs)),i(e)}else e.doc.nodesBetween(s,a,(function(n,r){n.isInline&&l.isInSet(n.marks)&&(e.removeMark(r,r+n.nodeSize,l),e.addMark(r,r+n.nodeSize,l.create(t.attrs)),i(e))}))}}({mark:n,attrs:i},s)(t,l);else{var c=t;Sn(t,{mark:n})&&(Pn({mark:n,attrs:i},s)(t,l),c=be.create({doc:s.doc,selection:s.selection})),a?bn(o[n],i,s)(c,l):Dn({mark:n},s,i)(c,l)}return a&&r(s),a}},Ln=function(t){return function(e,n){n(e.tr.insertText(t.text,t.from,t.to))}},Nn=function(t){return function(e,n){var i=e.schema.nodes.image,r=i.createAndFill(t);ze(r)(e,(function(e){return n(e.setMeta("commandName","insertImage").setMeta("args",t))}))}},Bn=function(t,e,n,i){if(!n.isTextblock)return!1;t.selection.ranges.forEach((function(r){var o=t.steps.length,s=r.$from.pos,l=r.$to.pos;t.doc.nodesBetween(s,l,(function(r,s){if(r.eq(e)&&r.isTextblock&&!r.hasMarkup(n,i)&&function(t,e,n){var i=t.resolve(e),r=i.index();return i.parent.canReplaceWith(r,r+1,n)}(t.doc,t.mapping.slice(o).map(s),n)){t.clearIncompatible(t.mapping.slice(o).map(s,1),n);var l=t.mapping.slice(o),c=l.map(s,1),h=l.map(s+r.nodeSize,1),u=new p(a.from(n.create(i,null,r.marks)),0,0);return t.step(new Tt(c,h,c+1,h-1,u,1,!0)),!1}}))}))},jn=function(t,e){void 0===e&&(e={blocksInSelection:!1});var n=t.doc,i=t.selection,r=i.$from,o=i.ranges,s=e.blocksInSelection,a=[],l=i instanceof le?i.node:void 0;return l?l.isBlock?(a.push(l),l.nodesBetween(0,l.content.size,(function(t){t.isBlock&&a.push(t)}))):!s&&r.parent&&r.parent.isBlock&&a.push(r.parent):o.forEach((function(t){var e=t.$from.pos,i=t.$to.pos;n.nodesBetween(e,i,(function(t,n){t.isBlock&&(!s||n>=e&&n+t.content.size+2<=i)&&a.push(t)}))})),a},zn=function(t,e){return function(n,i){var r=jn(n),o=n.schema.nodes,s=n.tr;s.setMeta("commandName",e),s.setMeta("args",{value:t}),r.forEach((function(e){if(e.type.isTextblock)if("p"===t)Bn(s,e,o.paragraph,e.attrs);else if(/^h[1-6]$/i.test(t)){var n=parseInt(t.substr(1),10);Bn(s,e,o.heading,(0,Ie.__assign)((0,Ie.__assign)({},e.attrs),{level:n}))}else"blockquote"===t&&Bn(s,e,o.blockquote,e.attrs)}));var a=s.docChanged;return a&&i(s.scrollIntoView()),a}},$n=function(t,e){void 0===e&&(e={blocksInSelection:!0});var n=t.doc,i=t.selection,r=e.blocksInSelection,o=e.blockNodeType;jn({doc:n,selection:i},{blocksInSelection:r}).filter((function(t){return t.isTextblock})).forEach((function(e){var n=e.attrs||{},i=n.style,r=void 0===i?"":i,s=n.class,a=void 0===s?"":s,l=(0,Ie.__rest)(n,["style","class"]),c=o||e.type;(r||a||c!==e.type)&&Bn(t,e,c,l)}))},Hn=function(t){var e=jn(t),n=t.schema.nodes,i=[];return e.forEach((function(t){t.type===n.paragraph?i.push("p"):t.type===n.heading?i.push("h".concat(t.attrs.level)):t.type===n.blockquote&&n.blockquote.isTextblock&&i.push("blockquote")})),i},Un=function(t,e){var n,i,r=t.attrs.style;r&&e.forEach((function(t){i={style:t.name,value:/^.+$/,newValue:t.value},n=De(r,i),r=n.changed?n.style:r}));return r=r||e.reduce((function(t,e){return(t&&e.value?t+" ":"")+e.value?"".concat(e.name,": ").concat(e.value,";"):""}),""),Object.assign({},t.attrs,{style:r||null})},Vn=function(t,e){var n=t.selection,i=n.from,r=n.to,o=!1;return t.doc.nodesBetween(i,r,(function(t){return!(o=o||t.type===e)})),o},Wn=function(t){var e=Hn(t);return 1===new Set(e).size?e[0]:null},qn=function(t){return{tag:Wn(t)||""}},Kn=function(t,e){return function(n,i){var r=jn(n),o=n.tr;o.setMeta("commandName",e),r.forEach((function(e){if(e.type.isTextblock){var n=t.find((function(t){return t.node===e.type.name}));if(n){var i=Un(e,n.style);Bn(o,e,e.type,i)}}}));var s=o.docChanged;return s&&i(o.scrollIntoView()),s}},Xn=function(t,e){var n=jn(t),i=!1;return n.forEach((function(t){if(!i&&t.type.isTextblock&&t.attrs.style){var n=e.find((function(e){return e.node===t.type.name}));n&&(i=n.style.every((function(e){return!!e.value&&new RegExp("".concat(e.name,":\\s?").concat(e.value),"i").test(t.attrs.style)})))}})),i},Gn=function(t){return void 0===t&&(t={blocksInSelection:!0}),function(e,n){var i=e.tr,r=t.blocksInSelection,o=t.blockNodeType,s=(t.exceptMarks||[e.schema.marks.link]).filter(Boolean);_n(i,{except:s}),$n(i,{blocksInSelection:r,blockNodeType:o});var a=i.docChanged;return a&&n&&n(i),a}};const Yn=["ol",0],Jn=["ul",0],Zn=["li",0],Qn={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs:t=>({order:t.hasAttribute("start")?+t.getAttribute("start"):1})}],toDOM:t=>1==t.attrs.order?Yn:["ol",{start:t.attrs.order},0]},ti={parseDOM:[{tag:"ul"}],toDOM:()=>Jn},ei={parseDOM:[{tag:"li"}],toDOM:()=>Zn,defining:!0};function ni(t,e){let n={};for(let e in t)n[e]=t[e];for(let t in e)n[t]=e[t];return n}function ii(t,e,n){return t.append({ordered_list:ni(Qn,{content:"list_item+",group:n}),bullet_list:ni(ti,{content:"list_item+",group:n}),list_item:ni(ei,{content:e})})}function ri(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,s=r.blockRange(o),l=!1,c=s;if(!s)return!1;if(s.depth>=2&&r.node(s.depth-1).type.compatibleContent(t)&&0==s.startIndex){if(0==r.index(s.depth-1))return!1;let t=n.doc.resolve(s.start-2);c=new M(t,t,s.depth),s.endIndex<s.parent.childCount&&(s=new M(r,n.doc.resolve(o.end(s.depth)),s.depth)),l=!0}let h=Ft(c,t,e,s);return!!h&&(i&&i(function(t,e,n,i,r){let o=a.empty;for(let t=n.length-1;t>=0;t--)o=a.from(n[t].type.create(n[t].attrs,o));t.step(new Tt(e.start-(i?2:0),e.end,e.start,e.end,new p(o,0,0),n.length,!0));let s=0;for(let t=0;t<n.length;t++)n[t].type==r&&(s=t+1);let l=n.length-s,c=e.start+n.length-(i?2:0),h=e.parent;for(let n=e.startIndex,i=e.endIndex,r=!0;n<i;n++,r=!1)!r&&Rt(t.doc,c,l)&&(t.split(c,l),c+=2*l),c+=h.child(n).nodeSize;return t}(n.tr,s,h,l,t).scrollIntoView()),!0)}}function oi(t,e){return function(n,i){let{$from:r,$to:o,node:s}=n.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(o))return!1;let l=r.node(-1);if(l.type!=t)return!1;if(0==r.parent.content.size&&r.node(-1).childCount==r.indexAfter(-1)){if(3==r.depth||r.node(-3).type!=t||r.index(-2)!=r.node(-2).childCount-1)return!1;if(i){let e=a.empty,o=r.index(-1)?1:r.index(-2)?2:3;for(let t=r.depth-o;t>=r.depth-3;t--)e=a.from(r.node(t).copy(e));let s=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;e=e.append(a.from(t.createAndFill()));let l=r.before(r.depth-(o-1)),c=n.tr.replace(l,r.after(-s),new p(e,4-o,0)),h=-1;c.doc.nodesBetween(l,c.doc.content.size,((t,e)=>{if(h>-1)return!1;t.isTextblock&&0==t.content.size&&(h=e+1)})),h>-1&&c.setSelection(ne.near(c.doc.resolve(h))),i(c.scrollIntoView())}return!0}let c=o.pos==r.end()?l.contentMatchAt(0).defaultType:null,h=n.tr.delete(r.pos,o.pos),u=c?[e?{type:t,attrs:e}:null,{type:c}]:void 0;return!!Rt(h.doc,r.pos,2,u)&&(i&&i(h.split(r.pos,2,u).scrollIntoView()),!0)}}function si(t,e){let n=oi(t,e);return(t,e)=>n(t,e&&(n=>{let i=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();i&&n.ensureMarks(i),e(n)}))}function ai(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==t));return!!o&&(!n||(i.node(o.depth-1).type==t?function(t,e,n,i){let r=t.tr,o=i.end,s=i.$to.end(i.depth);o<s&&(r.step(new Tt(o-1,s,o,s,new p(a.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new M(r.doc.resolve(i.$from.pos),r.doc.resolve(s),i.depth));const l=Dt(i);if(null==l)return!1;r.lift(i,l);let c=r.mapping.map(o,-1)-1;Lt(r.doc,c)&&r.join(c);return e(r.scrollIntoView()),!0}(e,n,t,o):function(t,e,n){let i=t.tr,r=n.parent;for(let t=n.end,e=n.endIndex-1,o=n.startIndex;e>o;e--)t-=r.child(e).nodeSize,i.delete(t-1,t+1);let o=i.doc.resolve(n.start),s=o.nodeAfter;if(i.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=0==n.startIndex,c=n.endIndex==r.childCount,h=o.node(-1),u=o.index(-1);if(!h.canReplace(u+(l?0:1),u+1,s.content.append(c?a.empty:a.from(r))))return!1;let d=o.pos,f=d+s.nodeSize;return i.step(new Tt(d-(l?1:0),f+(c?1:0),d+1,f-1,new p((l?a.empty:a.from(r.copy(a.empty))).append(c?a.empty:a.from(r.copy(a.empty))),l?0:1,c?0:1),l?0:1)),e(i.scrollIntoView()),!0}(e,n,o)))}}function li(t){return function(e,n){let{$from:i,$to:r}=e.selection,o=i.blockRange(r,(e=>e.childCount>0&&e.firstChild.type==t));if(!o)return!1;let s=o.startIndex;if(0==s)return!1;let l=o.parent,c=l.child(s-1);if(c.type!=t)return!1;if(n){let i=c.lastChild&&c.lastChild.type==l.type,r=a.from(i?t.create():null),s=new p(a.from(t.create(null,a.from(l.type.create(null,r)))),i?3:1,0),h=o.start,u=o.end;n(e.tr.step(new Tt(h-(i?3:1),u,h,u,s,1,!0)).scrollIntoView())}return!0}}var ci={orderedList:"ordered_list",bulletList:"bullet_list",listItem:"list_item"},hi={listType:ci.orderedList,types:(0,Ie.__assign)({},ci)},ui={listType:ci.bulletList,types:(0,Ie.__assign)({},ci)},di={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:30,unit:"px"}],listsTypes:(0,Ie.__assign)({},ci)},pi={nodes:[{node:"paragraph",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"},{node:"heading",style:"margin-left",rtlStyle:"margin-right",step:-30,unit:"px"}],listsTypes:(0,Ie.__assign)({},ci)};const fi=(t,e)=>!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function gi(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const mi=(t,e,n)=>{let i=gi(t,n);if(!i)return!1;let r=_i(i);if(!r){let n=i.blockRange(),r=n&&Dt(n);return null!=r&&(e&&e(t.tr.lift(n,r).scrollIntoView()),!0)}let o=r.nodeBefore;if(!o.type.spec.isolating&&zi(t,r,e))return!0;if(0==i.parent.content.size&&(wi(o,"end")||le.isSelectable(o))){let n=$t(t.doc,i.before(),i.after(),p.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(wi(o,"end")?ne.findFrom(i.doc.resolve(i.mapping.map(r.pos,-1)),-1):le.create(i.doc,r.pos-o.nodeSize)),e(i.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1)&&(e&&e(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0)},yi=(t,e,n)=>{let i=gi(t,n);if(!i)return!1;let r=_i(i);return!!r&&bi(t,r,e)},vi=(t,e,n)=>{let i=Si(t,n);if(!i)return!1;let r=Ai(i);return!!r&&bi(t,r,e)};function bi(t,e,n){let i=e.nodeBefore,r=e.pos-1;for(;!i.isTextblock;r--){if(i.type.spec.isolating)return!1;let t=i.lastChild;if(!t)return!1;i=t}let o=e.nodeAfter,s=e.pos+1;for(;!o.isTextblock;s++){if(o.type.spec.isolating)return!1;let t=o.firstChild;if(!t)return!1;o=t}let a=$t(t.doc,r,s,p.empty);if(!a||a.from!=r||a instanceof Et&&a.slice.size>=s-r)return!1;if(n){let e=t.tr.step(a);e.setSelection(se.create(e.doc,r)),n(e.scrollIntoView())}return!0}function wi(t,e,n=!1){for(let i=t;i;i="start"==e?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&1!=i.childCount)return!1}return!1}const xi=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;o=_i(i)}let s=o&&o.nodeBefore;return!(!s||!le.isSelectable(s))&&(e&&e(t.tr.setSelection(le.create(t.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function _i(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function Si(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Ci=(t,e,n)=>{let i=Si(t,n);if(!i)return!1;let r=Ai(i);if(!r)return!1;let o=r.nodeAfter;if(zi(t,r,e))return!0;if(0==i.parent.content.size&&(wi(o,"start")||le.isSelectable(o))){let n=$t(t.doc,i.before(),i.after(),p.empty);if(n&&n.slice.size<n.to-n.from){if(e){let i=t.tr.step(n);i.setSelection(wi(o,"start")?ne.findFrom(i.doc.resolve(i.mapping.map(r.pos)),1):le.create(i.doc,i.mapping.map(r.pos))),e(i.scrollIntoView())}return!0}}return!(!o.isAtom||r.depth!=i.depth-1)&&(e&&e(t.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0)},ki=(t,e,n)=>{let{$head:i,empty:r}=t.selection,o=i;if(!r)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;o=Ai(i)}let s=o&&o.nodeAfter;return!(!s||!le.isSelectable(s))&&(e&&e(t.tr.setSelection(le.create(t.doc,o.pos)).scrollIntoView()),!0)};function Ai(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const Ei=(t,e)=>{let n,i=t.selection,r=i instanceof le;if(r){if(i.node.isTextblock||!Lt(t.doc,i.from))return!1;n=i.from}else if(n=Bt(t.doc,i.from,-1),null==n)return!1;if(e){let i=t.tr.join(n);r&&i.setSelection(le.create(i.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},Ti=(t,e)=>{let n,i=t.selection;if(i instanceof le){if(i.node.isTextblock||!Lt(t.doc,i.to))return!1;n=i.to}else if(n=Bt(t.doc,i.to,1),null==n)return!1;return e&&e(t.tr.join(n).scrollIntoView()),!0},Mi=(t,e)=>{let{$from:n,$to:i}=t.selection,r=n.blockRange(i),o=r&&Dt(r);return null!=o&&(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)},Oi=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!(!n.parent.type.spec.code||!n.sameParent(i))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)};function Ii(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const Di=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let r=n.node(-1),o=n.indexAfter(-1),s=Ii(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(e){let i=n.after(),r=t.tr.replaceWith(i,i,s.createAndFill());r.setSelection(ne.near(r.doc.resolve(i),1)),e(r.scrollIntoView())}return!0},Fi=(t,e)=>{let n=t.selection,{$from:i,$to:r}=n;if(n instanceof he||i.parent.inlineContent||r.parent.inlineContent)return!1;let o=Ii(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let n=(!i.parentOffset&&r.index()<r.parent.childCount?i:r).pos,s=t.tr.insert(n,o.createAndFill());s.setSelection(se.create(s.doc,n+1)),e(s.scrollIntoView())}return!0},Pi=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let i=n.before();if(Rt(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}let i=n.blockRange(),r=i&&Dt(i);return null!=r&&(e&&e(t.tr.lift(i,r).scrollIntoView()),!0)};function Ri(t){return(e,n)=>{let{$from:i,$to:r}=e.selection;if(e.selection instanceof le&&e.selection.node.isBlock)return!(!i.parentOffset||!Rt(e.doc,i.pos))&&(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.parent.isBlock)return!1;if(n){let o=r.parentOffset==r.parent.content.size,s=e.tr;(e.selection instanceof se||e.selection instanceof he)&&s.deleteSelection();let a=0==i.depth?null:Ii(i.node(-1).contentMatchAt(i.indexAfter(-1))),l=t&&t(r.parent,o),c=l?[l]:o&&a?[{type:a}]:void 0,h=Rt(s.doc,s.mapping.map(i.pos),1,c);if(c||h||!Rt(s.doc,s.mapping.map(i.pos),1,a?[{type:a}]:void 0)||(a&&(c=[{type:a}]),h=!0),h&&(s.split(s.mapping.map(i.pos),1,c),!o&&!i.parentOffset&&i.parent.type!=a)){let t=s.mapping.map(i.before()),e=s.doc.resolve(t);a&&i.node(-1).canReplaceWith(e.index(),e.index()+1,a)&&s.setNodeMarkup(s.mapping.map(i.before()),a)}n(s.scrollIntoView())}return!0}}const Li=Ri(),Ni=(t,e)=>Li(t,e&&(n=>{let i=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();i&&n.ensureMarks(i),e(n)})),Bi=(t,e)=>{let n,{$from:i,to:r}=t.selection,o=i.sharedDepth(r);return 0!=o&&(n=i.before(o),e&&e(t.tr.setSelection(le.create(t.doc,n))),!0)},ji=(t,e)=>(e&&e(t.tr.setSelection(new he(t.doc))),!0);function zi(t,e,n){let i,r,o=e.nodeBefore,s=e.nodeAfter;if(o.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){let i=e.nodeBefore,r=e.nodeAfter,o=e.index();return!(!(i&&r&&i.type.compatibleContent(r.type))||(!i.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),0):!e.parent.canReplace(o,o+1)||!r.isTextblock&&!Lt(t.doc,e.pos)||(n&&n(t.tr.clearIncompatible(e.pos,i.type,i.contentMatchAt(i.childCount)).join(e.pos).scrollIntoView()),0)))}(t,e,n))return!0;let l=e.parent.canReplace(e.index(),e.index()+1);if(l&&(i=(r=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&r.matchType(i[0]||s.type).validEnd){if(n){let r=e.pos+s.nodeSize,l=a.empty;for(let t=i.length-1;t>=0;t--)l=a.from(i[t].create(null,l));l=a.from(o.copy(l));let c=t.tr.step(new Tt(e.pos-1,r,e.pos,r,new p(l,1,0),i.length,!0)),h=r+2*i.length;Lt(c.doc,h)&&c.join(h),n(c.scrollIntoView())}return!0}let c=ne.findFrom(e,1),h=c&&c.$from.blockRange(c.$to),u=h&&Dt(h);if(null!=u&&u>=e.depth)return n&&n(t.tr.lift(h,u).scrollIntoView()),!0;if(l&&wi(s,"start",!0)&&wi(o,"end")){let i=o,r=[];for(;r.push(i),!i.isTextblock;)i=i.lastChild;let l=s,c=1;for(;!l.isTextblock;l=l.firstChild)c++;if(i.canReplace(i.childCount,i.childCount,l.content)){if(n){let i=a.empty;for(let t=r.length-1;t>=0;t--)i=a.from(r[t].copy(i));n(t.tr.step(new Tt(e.pos-r.length,e.pos+s.nodeSize,e.pos+c,e.pos+s.nodeSize-c,new p(i,r.length,0),0,!0)).scrollIntoView())}return!0}}return!1}function $i(t){return function(e,n){let i=e.selection,r=t<0?i.$from:i.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return!!r.node(o).isTextblock&&(n&&n(e.tr.setSelection(se.create(e.doc,t<0?r.start(o):r.end(o)))),!0)}}const Hi=$i(-1),Ui=$i(1);function Vi(t,e=null){return function(n,i){let{$from:r,$to:o}=n.selection,s=r.blockRange(o),a=s&&Ft(s,t,e);return!!a&&(i&&i(n.tr.wrap(s,a).scrollIntoView()),!0)}}function Wi(t,e=null){return function(n,i){let r=!1;for(let i=0;i<n.selection.ranges.length&&!r;i++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[i];n.doc.nodesBetween(o,s,((i,o)=>{if(r)return!1;if(i.isTextblock&&!i.hasMarkup(t,e))if(i.type==t)r=!0;else{let e=n.doc.resolve(o),i=e.index();r=e.parent.canReplaceWith(i,i+1,t)}}))}if(!r)return!1;if(i){let r=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:o},$to:{pos:s}}=n.selection.ranges[i];r.setBlockType(o,s,t,e)}i(r.scrollIntoView())}return!0}}function qi(t,e=null){return function(n,i){let{empty:r,$cursor:o,ranges:s}=n.selection;if(r&&!o||!function(t,e,n){for(let i=0;i<e.length;i++){let{$from:r,$to:o}=e[i],s=0==r.depth&&t.inlineContent&&t.type.allowsMarkType(n);if(t.nodesBetween(r.pos,o.pos,(t=>{if(s)return!1;s=t.inlineContent&&t.type.allowsMarkType(n)})),s)return!0}return!1}(n.doc,s,t))return!1;if(i)if(o)t.isInSet(n.storedMarks||o.marks())?i(n.tr.removeStoredMark(t)):i(n.tr.addStoredMark(t.create(e)));else{let r=!1,o=n.tr;for(let e=0;!r&&e<s.length;e++){let{$from:i,$to:o}=s[e];r=n.doc.rangeHasMark(i.pos,o.pos,t)}for(let n=0;n<s.length;n++){let{$from:i,$to:a}=s[n];if(r)o.removeMark(i.pos,a.pos,t);else{let n=i.pos,r=a.pos,s=i.nodeAfter,l=a.nodeBefore,c=s&&s.isText?/^\s*/.exec(s.text)[0].length:0,h=l&&l.isText?/\s*$/.exec(l.text)[0].length:0;n+c<r&&(n+=c,r-=h),o.addMark(n,r,t.create(e))}}i(o.scrollIntoView())}return!0}}function Ki(t,e){return n=>{if(!n.isGeneric)return t(n);let i=[];for(let t=0;t<n.mapping.maps.length;t++){let e=n.mapping.maps[t];for(let t=0;t<i.length;t++)i[t]=e.map(i[t]);e.forEach(((t,e,n,r)=>i.push(n,r)))}let r=[];for(let t=0;t<i.length;t+=2){let o=i[t],s=i[t+1],a=n.doc.resolve(o),l=a.sharedDepth(s),c=a.node(l);for(let t=a.indexAfter(l),n=a.after(l+1);n<=s;++t){let i=c.maybeChild(t);if(!i)break;if(t&&-1==r.indexOf(n)){let o=c.child(t-1);o.type==i.type&&e(o,i)&&r.push(n)}n+=i.nodeSize}}r.sort(((t,e)=>t-e));for(let t=r.length-1;t>=0;t--)Lt(n.doc,r[t])&&n.join(r[t]);t(n)}}function Xi(t,e){let n=Array.isArray(e)?t=>e.indexOf(t.type.name)>-1:e;return(e,i,r)=>t(e,i&&Ki(i,n),r)}function Gi(...t){return function(e,n,i){for(let r=0;r<t.length;r++)if(t[r](e,n,i))return!0;return!1}}let Yi=Gi(fi,mi,xi),Ji=Gi(fi,Ci,ki);const Zi={Enter:Gi(Oi,Fi,Pi,Li),"Mod-Enter":Di,Backspace:Yi,"Mod-Backspace":Yi,"Shift-Backspace":Yi,Delete:Ji,"Mod-Delete":Ji,"Mod-a":ji},Qi={"Ctrl-h":Zi.Backspace,"Alt-Backspace":Zi["Mod-Backspace"],"Ctrl-d":Zi.Delete,"Ctrl-Alt-Backspace":Zi["Mod-Delete"],"Alt-Delete":Zi["Mod-Delete"],"Alt-d":Zi["Mod-Delete"],"Ctrl-a":Hi,"Ctrl-e":Ui};for(let t in Zi)Qi[t]=Zi[t];const tr=("undefined"!=typeof navigator?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!("undefined"==typeof os||!os.platform)&&"darwin"==os.platform())?Qi:Zi;var er=function(t,e){return Vi(t.schema.nodes.blockquote)(t,e)},nr=function(t,e){var n=t.selection,i=n.$from,r=n.$to,o=t.schema.nodes.blockquote,s=t.doc,a=-1,l=i.blockRange(r);l&&s.nodesBetween(l.start,l.end,(function(t,e){t.type===o&&(a=e)}));var c=-1!==a;return e&&c&&e(t.tr.lift(l,s.resolve(a).depth)),c},ir=function(t,e,n){return function(i,r){var o=jn(i),s=i.tr;s.setMeta("commandName",e),o.forEach((function(e){if(e.type.isTextblock){var i=void 0,r=t.find((function(t){return t.node===e.type.name}));if(r){var o="rtl"===n?r.rtlStyle:r.style,a={name:o,value:r.step>0?"".concat(r.step).concat(r.unit):""};if(e.attrs.style){var l=new RegExp("".concat(o,":\\s?(\\d+)").concat(r.unit),"i"),c=e.attrs.style.match(l);if(c){var h=parseFloat(c[1])+r.step;h=h<=0?"":h,a.value="".concat(h).concat(h?r.unit:"")}}i=Un(e,[a])}i&&Bn(s,e,e.type,i)}}));var a=s.docChanged;return a&&r(s.scrollIntoView()),a}},rr=function(t,e,n){var i=jn(t),r=!1;return i.forEach((function(t){if(!r&&t.type.isTextblock&&t.attrs.style){var i=e.find((function(e){return e.node===t.type.name}));if(i){var o="rtl"===n?i.rtlStyle:i.style,s=new RegExp("".concat(o,":\\s?\\d+").concat(i.unit),"i");r=s.test(t.attrs.style)}}})),r},or=function(t,e){return li(e)(t)},sr=function(t,e){var n=t.schema.nodes[e.listsTypes.listItem],i=t.schema.nodes[e.listsTypes.orderedList],r=t.schema.nodes[e.listsTypes.bulletList],o=!!Ne(i,2)(t.selection),s=!!Ne(r,2)(t.selection);return(o||s)&&ai(n)(t)},ar=function(t,e){var n=t.schema.nodes,i=n[di.listsTypes.listItem];return(rr(t,e.nodes)||di.nodes.some((function(e){return n[e.node]&&Vn(t,n[e.node])})))&&!Vn(t,i)},lr=function(t,e){var n=t.schema.nodes[di.listsTypes.listItem],i=ar(t,di);or(t,n)?li(n)(t,e):i&&ir(di.nodes)(t,e)},cr=function(t,e){var n=t.schema.nodes,i=n[pi.listsTypes.listItem],r=ar(t,pi);Vn(t,n.blockquote)?nr(t,e):sr(t,pi)?ai(i)(t,e):r&&ir(pi.nodes)(t,e)},hr=function(t,e,n){for(var i=e.depth,r=t.nodes[n.bulletList],o=t.nodes[n.orderedList],s=t.nodes[n.listItem],a=e.depth;a>0;a--){var l=e.node(a);if(l.type!==r&&l.type!==o||(i=a),l.type!==r&&l.type!==o&&l.type!==s)break}return i-1};function ur(t){return function(e,n,i){if(!i)return!1;var r=(e=i.state).schema.nodes[t.listType],o=e.selection,s=o.$from,a=o.$to,l=s.node(-2),c=s.node(-3),h=function(t,e,n,i){return 0===function(t,e,n){var i=[],r=function(t,e){var n=["blockquote","bulletList","orderedList"];if(1===e.depth)return e;var i=e.node(e.depth),r=e;for(;e.depth>=1;)(i=(e=t.resolve(e.before(e.depth))).node(e.depth))&&-1!==n.indexOf(i.type.name)&&(r=e);return r}(t,e).depth,o=t.resolve(e.start(r));for(;o.pos<=n.start(n.depth);){var s=Math.min(o.depth,r),a=o.node(s);if(a&&i.push(a),0===s)break;var l=t.resolve(o.after(s));if(l.start(s)>=t.nodeSize-2)break;l.depth!==o.depth&&(l=t.resolve(l.pos+2)),o=l.depth?t.resolve(l.start(l.depth)):t.resolve(l.end(l.depth))}return i}(t,e,n).filter((function(t){return t.type!==i})).length}(e.doc,s,a,r);return(l&&l.type===r||c&&c.type===r)&&h?pr(t)(e,n):(h||(pr(t)(e,n),e=i.state),function(t,e){void 0===e&&(e={});return Xi(ri(t,e),(function(e,n){return e.type===n.type&&e.type===t}))}(r,t.listAttrs)(e,n))}}function dr(t,e,n,i){var r=i||t.schema.nodes.listItem,o=e.$from,s=e.$to,l=o.blockRange(s,(function(t){return t.childCount&&t.firstChild.type===r}));if(!l||l.depth<2||o.node(l.depth-1).type!==r)return n;var c=l.end,h=s.end(l.depth);return c<h&&(n.step(new Tt(c-1,h,c,h,new p(a.from(r.create(void 0,l.parent.copy())),1,0),1,!0)),l=new M(n.doc.resolve(o.pos),n.doc.resolve(h),l.depth)),n.lift(l,Dt(l)).scrollIntoView()}function pr(t){return function(e,n){var i=e.tr,r=e.selection,o=r.$from,s=r.$to;return i.doc.nodesBetween(o.pos,s.pos,(function(n,r){if(n.isTextblock||"blockquote"===n.type.name||"div"===n.type.name){var o=new le(i.doc.resolve(i.mapping.map(r))),s=o.$from.blockRange(o.$to);if(!s||o.$from.parent.type!==e.schema.nodes[t.listItem])return!1;var a=s&&Dt(s);if(null==a)return!1;i.lift(s,a)}})),n&&n(i),!0}}var fr=/list\-style\-type:\s?([\w-]+)/,gr=function(t){var e=t.style||"",n=fr.exec(e);return n&&n[1]||""},mr=function(t,e,n,i,r){var o=i.listType,s=i.listAttrs,a=void 0===s?{style:null}:s,l=t.selection,c=l.$from.node(l.$from.depth-2),h=l.$to.node(l.$to.depth-2);if(c&&c.type.name===o&&gr(c.attrs)===gr(a)&&h&&h.type.name===o&&gr(h.attrs)===gr(a)){var u=n.state.schema.nodes,d={bulletList:u[i.bulletList],orderedList:u[i.orderedList],listItem:u[i.listItem]},p=function(t,e){for(var n,i=e.bulletList,r=e.orderedList,o=e.listItem,s=t.depth-1;s>0;s--){var a=t.node(s);if(a.type!==i&&a.type!==r||(n=s),a.type!==i&&a.type!==r&&a.type!==o)break}return n}(l.$to,d),f=function(t,e,n,i,r,o){o||(o=t.schema.nodes.listItem);var s=!1;return r.doc.nodesBetween(e,n,(function(n,a){if(!s&&n.type===o&&a>e){s=!0;for(var l=i+3;l>i+2;){var c=r.doc.resolve(r.mapping.map(a));l=c.depth;var h=r.doc.resolve(r.mapping.map(a+n.textContent.length)),u=new se(c,h);r=dr(t,u,r,o)}}})),r}(t,l.$to.pos,l.$to.end(p),p,n.state.tr,d.listItem);return f=function(t,e,n){var i=t.selection,r=i.from,o=i.to,s=t.schema.nodes,a=s.paragraph,l=s.heading,c=[];e.doc.nodesBetween(r,o,(function(t,e){t.type!==a&&t.type!==l||c.push({node:t,pos:e})}));for(var h=c.length-1;h>=0;h--){var u=c[h],d=e.doc.resolve(e.mapping.map(u.pos));if(d.depth>0){var p=void 0;p=u.node.textContent&&u.node.textContent.length>0?e.doc.resolve(e.mapping.map(u.pos+u.node.textContent.length)):e.doc.resolve(e.mapping.map(u.pos+1));var f=d.blockRange(p);f&&e.lift(f,hr(t.schema,d,n))}}return e}(t,f,i),f.setMeta("commandName",r),e(f),!0}return ur(i)(t,e,n)};function yr(t,e,n){return mr(t,e,n,(0,Ie.__assign)({listType:ui.listType},ui.types))}function vr(t,e,n){return mr(t,e,n,(0,Ie.__assign)({listType:hi.listType},hi.types))}var br=function(t,e){return{name:t,value:e}},wr=[{node:"paragraph",style:[br("text-align","left")]},{node:"heading",style:[br("text-align","left")]},{node:"table_caption_external",style:[br("text-align","left")]}],xr=[{node:"paragraph",style:[br("text-align","right")]},{node:"heading",style:[br("text-align","right")]},{node:"table_caption_external",style:[br("text-align","right")]}],_r=[{node:"paragraph",style:[br("text-align","center")]},{node:"heading",style:[br("text-align","center")]},{node:"table_caption_external",style:[br("text-align","center")]}],Sr=[{node:"paragraph",style:[br("text-align","justify")]},{node:"heading",style:[br("text-align","justify")]},{node:"table_caption_external",style:[br("text-align","justify")]}],Cr=[{node:"paragraph",style:[br("text-align","")]},{node:"heading",style:[br("text-align","")]},{node:"table_caption_external",style:[br("text-align","")]}];const kr=function(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e},Ar=function(t){let e=t.assignedSlot||t.parentNode;return e&&11==e.nodeType?e.host:e};let Er=null;const Tr=function(t,e,n){let i=Er||(Er=document.createRange());return i.setEnd(t,null==n?t.nodeValue.length:n),i.setStart(t,e||0),i},Mr=function(t,e,n,i){return n&&(Ir(t,e,n,i,-1)||Ir(t,e,n,i,1))},Or=/^(img|br|input|textarea|hr)$/i;function Ir(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:Dr(t))){let n=t.parentNode;if(!n||1!=n.nodeType||Fr(t)||Or.test(t.nodeName)||"false"==t.contentEditable)return!1;e=kr(t)+(r<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if("false"==(t=t.childNodes[e+(r<0?-1:0)]).contentEditable)return!1;e=r<0?Dr(t):0}}}function Dr(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Fr(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Pr=function(t){return t.focusNode&&Mr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Rr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}const Lr="undefined"!=typeof navigator?navigator:null,Nr="undefined"!=typeof document?document:null,Br=Lr&&Lr.userAgent||"",jr=/Edge\/(\d+)/.exec(Br),zr=/MSIE \d/.exec(Br),$r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br),Hr=!!(zr||$r||jr),Ur=zr?document.documentMode:$r?+$r[1]:jr?+jr[1]:0,Vr=!Hr&&/gecko\/(\d+)/i.test(Br);Vr&&(/Firefox\/(\d+)/.exec(Br)||[0,0])[1];const Wr=!Hr&&/Chrome\/(\d+)/.exec(Br),qr=!!Wr,Kr=Wr?+Wr[1]:0,Xr=!Hr&&!!Lr&&/Apple Computer/.test(Lr.vendor),Gr=Xr&&(/Mobile\/\w+/.test(Br)||!!Lr&&Lr.maxTouchPoints>2),Yr=Gr||!!Lr&&/Mac/.test(Lr.platform),Jr=!!Lr&&/Win/.test(Lr.platform),Zr=/Android \d/.test(Br),Qr=!!Nr&&"webkitFontSmoothing"in Nr.documentElement.style,to=Qr?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function eo(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function no(t,e){return"number"==typeof t?t:t[e]}function io(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function ro(t,e,n){let i=t.someProp("scrollThreshold")||0,r=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let s=n||t.dom;s;s=Ar(s)){if(1!=s.nodeType)continue;let t=s,n=t==o.body,a=n?eo(o):io(t),l=0,c=0;if(e.top<a.top+no(i,"top")?c=-(a.top-e.top+no(r,"top")):e.bottom>a.bottom-no(i,"bottom")&&(c=e.bottom-e.top>a.bottom-a.top?e.top+no(r,"top")-a.top:e.bottom-a.bottom+no(r,"bottom")),e.left<a.left+no(i,"left")?l=-(a.left-e.left+no(r,"left")):e.right>a.right-no(i,"right")&&(l=e.right-a.right+no(r,"right")),l||c)if(n)o.defaultView.scrollBy(l,c);else{let n=t.scrollLeft,i=t.scrollTop;c&&(t.scrollTop+=c),l&&(t.scrollLeft+=l);let r=t.scrollLeft-n,o=t.scrollTop-i;e={left:e.left-r,top:e.top-o,right:e.right-r,bottom:e.bottom-o}}if(n||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function oo(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=Ar(i));return e}function so(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:r,left:o}=t[n];i.scrollTop!=r+e&&(i.scrollTop=r+e),i.scrollLeft!=o&&(i.scrollLeft=o)}}let ao=null;function lo(t,e){let n,i,r,o,s=2e8,a=0,l=e.top,c=e.top;for(let h=t.firstChild,u=0;h;h=h.nextSibling,u++){let t;if(1==h.nodeType)t=h.getClientRects();else{if(3!=h.nodeType)continue;t=Tr(h).getClientRects()}for(let d=0;d<t.length;d++){let p=t[d];if(p.top<=l&&p.bottom>=c){l=Math.max(p.bottom,l),c=Math.min(p.top,c);let t=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(t<s){n=h,s=t,i=t&&3==n.nodeType?{left:p.right<e.left?p.right:p.left,top:e.top}:e,1==h.nodeType&&t&&(a=u+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!r&&p.left<=e.left&&p.right>=e.left&&(r=h,o={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!n&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(a=u+1)}}return!n&&r&&(n=r,i=o,s=0),n&&3==n.nodeType?function(t,e){let n=t.nodeValue.length,i=document.createRange();for(let r=0;r<n;r++){i.setEnd(t,r+1),i.setStart(t,r);let n=fo(i,1);if(n.top!=n.bottom&&co(e,n))return{node:t,offset:r+(e.left>=(n.left+n.right)/2?1:0)}}return{node:t,offset:0}}(n,i):!n||s&&1==n.nodeType?{node:t,offset:a}:lo(n,i)}function co(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function ho(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let r=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let n=t.childNodes[o];if(1==n.nodeType){let t=n.getClientRects();for(let i=0;i<t.length;i++){let r=t[i];if(co(e,r))return ho(n,e,r)}}if((o=(o+1)%i)==r)break}return t}function uo(t,e){let n,i=t.dom.ownerDocument,r=0,o=function(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:i.offset}}catch(t){}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:i.startOffset}}}(i,e.left,e.top);o&&({node:n,offset:r}=o);let s,a=(t.root.elementFromPoint?t.root:i).elementFromPoint(e.left,e.top);if(!a||!t.dom.contains(1!=a.nodeType?a.parentNode:a)){let n=t.dom.getBoundingClientRect();if(!co(e,n))return null;if(a=ho(t.dom,e,n),!a)return null}if(Xr)for(let t=a;n&&t;t=Ar(t))t.draggable&&(n=void 0);if(a=function(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}(a,e),n){if(Vr&&1==n.nodeType&&(r=Math.min(r,n.childNodes.length),r<n.childNodes.length)){let t,i=n.childNodes[r];"IMG"==i.nodeName&&(t=i.getBoundingClientRect()).right<=e.left&&t.bottom>e.top&&r++}let i;Qr&&r&&1==n.nodeType&&1==(i=n.childNodes[r-1]).nodeType&&"false"==i.contentEditable&&i.getBoundingClientRect().top>=e.top&&r--,n==t.dom&&r==n.childNodes.length-1&&1==n.lastChild.nodeType&&e.top>n.lastChild.getBoundingClientRect().bottom?s=t.state.doc.content.size:0!=r&&1==n.nodeType&&"BR"==n.childNodes[r-1].nodeName||(s=function(t,e,n,i){let r=-1;for(let n=e,o=!1;n!=t.dom;){let e=t.docView.nearestDesc(n,!0);if(!e)return null;if(1==e.dom.nodeType&&(e.node.isBlock&&e.parent||!e.contentDOM)){let t=e.dom.getBoundingClientRect();if(e.node.isBlock&&e.parent&&(!o&&t.left>i.left||t.top>i.top?r=e.posBefore:(!o&&t.right<i.left||t.bottom<i.top)&&(r=e.posAfter),o=!0),!e.contentDOM&&r<0&&!e.node.isText)return(e.node.isBlock?i.top<(t.top+t.bottom)/2:i.left<(t.left+t.right)/2)?e.posBefore:e.posAfter}n=e.dom.parentNode}return r>-1?r:t.docView.posFromDOM(e,n,-1)}(t,n,r,e))}null==s&&(s=function(t,e,n){let{node:i,offset:r}=lo(e,n),o=-1;if(1==i.nodeType&&!i.firstChild){let t=i.getBoundingClientRect();o=t.left!=t.right&&n.left>(t.left+t.right)/2?1:-1}return t.docView.posFromDOM(i,r,o)}(t,a,e));let l=t.docView.nearestDesc(a,!0);return{pos:s,inside:l?l.posAtStart-l.border:-1}}function po(t){return t.top<t.bottom||t.left<t.right}function fo(t,e){let n=t.getClientRects();if(n.length){let t=n[e<0?0:n.length-1];if(po(t))return t}return Array.prototype.find.call(n,po)||t.getBoundingClientRect()}const go=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function mo(t,e,n){let{node:i,offset:r,atom:o}=t.docView.domFromPos(e,n<0?-1:1),s=Qr||Vr;if(3==i.nodeType){if(!s||!go.test(i.nodeValue)&&(n<0?r:r!=i.nodeValue.length)){let t=r,e=r,o=n<0?1:-1;return n<0&&!r?(e++,o=-1):n>=0&&r==i.nodeValue.length?(t--,o=1):n<0?t--:e++,yo(fo(Tr(i,t,e),o),o<0)}{let t=fo(Tr(i,r,r),n);if(Vr&&r&&/\s/.test(i.nodeValue[r-1])&&r<i.nodeValue.length){let e=fo(Tr(i,r-1,r-1),-1);if(e.top==t.top){let n=fo(Tr(i,r,r+1),-1);if(n.top!=t.top)return yo(n,n.left<e.left)}}return t}}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(null==o&&r&&(n<0||r==Dr(i))){let t=i.childNodes[r-1];if(1==t.nodeType)return vo(t.getBoundingClientRect(),!1)}if(null==o&&r<Dr(i)){let t=i.childNodes[r];if(1==t.nodeType)return vo(t.getBoundingClientRect(),!0)}return vo(i.getBoundingClientRect(),n>=0)}if(null==o&&r&&(n<0||r==Dr(i))){let t=i.childNodes[r-1],e=3==t.nodeType?Tr(t,Dr(t)-(s?0:1)):1!=t.nodeType||"BR"==t.nodeName&&t.nextSibling?null:t;if(e)return yo(fo(e,1),!1)}if(null==o&&r<Dr(i)){let t=i.childNodes[r];for(;t.pmViewDesc&&t.pmViewDesc.ignoreForCoords;)t=t.nextSibling;let e=t?3==t.nodeType?Tr(t,0,s?0:1):1==t.nodeType?t:null:null;if(e)return yo(fo(e,-1),!0)}return yo(fo(3==i.nodeType?Tr(i):i,-n),n>=0)}function yo(t,e){if(0==t.width)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function vo(t,e){if(0==t.height)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function bo(t,e,n){let i=t.state,r=t.root.activeElement;i!=e&&t.updateState(e),r!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),r!=t.dom&&r&&r.focus()}}const wo=/[\u0590-\u08ac]/;let xo=null,_o=null,So=!1;function Co(t,e,n){return xo==e&&_o==n?So:(xo=e,_o=n,So="up"==n||"down"==n?function(t,e,n){let i=e.selection,r="up"==n?i.$from:i.$to;return bo(t,e,(()=>{let{node:e}=t.docView.domFromPos(r.pos,"up"==n?-1:1);for(;;){let n=t.docView.nearestDesc(e,!0);if(!n)break;if(n.node.isBlock){e=n.contentDOM||n.dom;break}e=n.dom.parentNode}let i=mo(t,r.pos,1);for(let t=e.firstChild;t;t=t.nextSibling){let e;if(1==t.nodeType)e=t.getClientRects();else{if(3!=t.nodeType)continue;e=Tr(t,0,t.nodeValue.length).getClientRects()}for(let t=0;t<e.length;t++){let r=e[t];if(r.bottom>r.top+1&&("up"==n?i.top-r.top>2*(r.bottom-i.top):r.bottom-i.bottom>2*(i.bottom-r.top)))return!1}}return!0}))}(t,e,n):function(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let r=i.parentOffset,o=!r,s=r==i.parent.content.size,a=t.domSelection();return wo.test(i.parent.textContent)&&a.modify?bo(t,e,(()=>{let{focusNode:e,focusOffset:r,anchorNode:o,anchorOffset:s}=t.domSelectionRange(),l=a.caretBidiLevel;a.modify("move",n,"character");let c=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:h,focusOffset:u}=t.domSelectionRange(),d=h&&!c.contains(1==h.nodeType?h:h.parentNode)||e==h&&r==u;try{a.collapse(o,s),e&&(e!=o||r!=s)&&a.extend&&a.extend(e,r)}catch(t){}return null!=l&&(a.caretBidiLevel=l),d})):"left"==n||"backward"==n?o:s}(t,e,n))}class ko{constructor(t,e,n,i){this.parent=t,this.children=e,this.dom=n,this.contentDOM=i,this.dirty=0,n.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,e,n){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let e=0;e<this.children.length;e++)t+=this.children[e].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let e=0,n=this.posAtStart;;e++){let i=this.children[e];if(i==t)return n;n+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){let n,i;if(t==this.contentDOM)n=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.previousSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(i)+i.size:this.posAtStart}{let n,i;if(t==this.contentDOM)n=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;n=t.nextSibling}for(;n&&(!(i=n.pmViewDesc)||i.parent!=this);)n=n.nextSibling;return n?this.posBeforeChild(i):this.posAtEnd}}let i;if(t==this.dom&&this.contentDOM)i=e>kr(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(let e=t;;e=e.parentNode){if(e==this.dom){i=!1;break}if(e.previousSibling)break}if(null==i&&e==t.childNodes.length)for(let e=t;;e=e.parentNode){if(e==this.dom){i=!0;break}if(e.nextSibling)break}}return(null==i?n>0:i)?this.posAtEnd:this.posAtStart}nearestDesc(t,e=!1){for(let n=!0,i=t;i;i=i.parentNode){let r,o=this.getDesc(i);if(o&&(!e||o.node)){if(!n||!(r=o.nodeDOM)||(1==r.nodeType?r.contains(1==t.nodeType?t:t.parentNode):r==t))return o;n=!1}}}getDesc(t){let e=t.pmViewDesc;for(let t=e;t;t=t.parent)if(t==this)return e}posFromDOM(t,e,n){for(let i=t;i;i=i.parentNode){let r=this.getDesc(i);if(r)return r.localPosFromDOM(t,e,n)}return-1}descAt(t){for(let e=0,n=0;e<this.children.length;e++){let i=this.children[e],r=n+i.size;if(n==t&&r!=n){for(;!i.border&&i.children.length;)i=i.children[0];return i}if(t<r)return i.descAt(t-n-i.border);n=r}}domFromPos(t,e){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let n=0,i=0;for(let e=0;n<this.children.length;n++){let r=this.children[n],o=e+r.size;if(o>t||r instanceof Do){i=t-e;break}e=o}if(i)return this.children[n].domFromPos(i-this.children[n].border,e);for(let t;n&&!(t=this.children[n-1]).size&&t instanceof Ao&&t.side>=0;n--);if(e<=0){let t,i=!0;for(;t=n?this.children[n-1]:null,t&&t.dom.parentNode!=this.contentDOM;n--,i=!1);return t&&e&&i&&!t.border&&!t.domAtom?t.domFromPos(t.size,e):{node:this.contentDOM,offset:t?kr(t.dom)+1:0}}{let t,i=!0;for(;t=n<this.children.length?this.children[n]:null,t&&t.dom.parentNode!=this.contentDOM;n++,i=!1);return t&&i&&!t.border&&!t.domAtom?t.domFromPos(0,e):{node:this.contentDOM,offset:t?kr(t.dom):this.contentDOM.childNodes.length}}}parseRange(t,e,n=0){if(0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,r=-1;for(let o=n,s=0;;s++){let n=this.children[s],a=o+n.size;if(-1==i&&t<=a){let r=o+n.border;if(t>=r&&e<=a-n.border&&n.node&&n.contentDOM&&this.contentDOM.contains(n.contentDOM))return n.parseRange(t,e,r);t=o;for(let e=s;e>0;e--){let n=this.children[e-1];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(1)){i=kr(n.dom)+1;break}t-=n.size}-1==i&&(i=0)}if(i>-1&&(a>e||s==this.children.length-1)){e=a;for(let t=s+1;t<this.children.length;t++){let n=this.children[t];if(n.size&&n.dom.parentNode==this.contentDOM&&!n.emptyChildAt(-1)){r=kr(n.dom);break}e+=n.size}-1==r&&(r=this.contentDOM.childNodes.length);break}o=a}return{node:this.contentDOM,from:t,to:e,fromOffset:i,toOffset:r}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)}domAfterPos(t){let{node:e,offset:n}=this.domFromPos(t,0);if(1!=e.nodeType||n==e.childNodes.length)throw new RangeError("No node after pos "+t);return e.childNodes[n]}setSelection(t,e,n,i=!1){let r=Math.min(t,e),o=Math.max(t,e);for(let s=0,a=0;s<this.children.length;s++){let l=this.children[s],c=a+l.size;if(r>a&&o<c)return l.setSelection(t-a-l.border,e-a-l.border,n,i);a=c}let s=this.domFromPos(t,t?-1:1),a=e==t?s:this.domFromPos(e,e?-1:1),l=n.getSelection(),c=!1;if((Vr||Xr)&&t==e){let{node:t,offset:e}=s;if(3==t.nodeType){if(c=!(!e||"\n"!=t.nodeValue[e-1]),c&&e==t.nodeValue.length)for(let e,n=t;n;n=n.parentNode){if(e=n.nextSibling){"BR"==e.nodeName&&(s=a={node:e.parentNode,offset:kr(e)+1});break}let t=n.pmViewDesc;if(t&&t.node&&t.node.isBlock)break}}else{let n=t.childNodes[e-1];c=n&&("BR"==n.nodeName||"false"==n.contentEditable)}}if(Vr&&l.focusNode&&l.focusNode!=a.node&&1==l.focusNode.nodeType){let t=l.focusNode.childNodes[l.focusOffset];t&&"false"==t.contentEditable&&(i=!0)}if(!(i||c&&Xr)&&Mr(s.node,s.offset,l.anchorNode,l.anchorOffset)&&Mr(a.node,a.offset,l.focusNode,l.focusOffset))return;let h=!1;if((l.extend||t==e)&&!c){l.collapse(s.node,s.offset);try{t!=e&&l.extend(a.node,a.offset),h=!0}catch(t){}}if(!h){if(t>e){let t=s;s=a,a=t}let n=document.createRange();n.setEnd(a.node,a.offset),n.setStart(s.node,s.offset),l.removeAllRanges(),l.addRange(n)}}ignoreMutation(t){return!this.contentDOM&&"selection"!=t.type}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,e){for(let n=0,i=0;i<this.children.length;i++){let r=this.children[i],o=n+r.size;if(n==o?t<=o&&e>=n:t<o&&e>n){let i=n+r.border,s=o-r.border;if(t>=i&&e<=s)return this.dirty=t==n||e==o?2:1,void(t!=i||e!=s||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(t-i,e-i):r.dirty=3);r.dirty=r.dom!=r.contentDOM||r.dom.parentNode!=this.contentDOM||r.children.length?3:2}n=o}this.dirty=2}markParentsDirty(){let t=1;for(let e=this.parent;e;e=e.parent,t++){let n=1==t?2:1;e.dirty<n&&(e.dirty=n)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(t){return!1}}class Ao extends ko{constructor(t,e,n,i){let r,o=e.type.toDOM;if("function"==typeof o&&(o=o(n,(()=>r?r.parent?r.parent.posBeforeChild(r):void 0:i))),!e.type.spec.raw){if(1!=o.nodeType){let t=document.createElement("span");t.appendChild(o),o=t}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=e,this.widget=e,r=this}matchesWidget(t){return 0==this.dirty&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let e=this.widget.spec.stopEvent;return!!e&&e(t)}ignoreMutation(t){return"selection"!=t.type||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class Eo extends ko{constructor(t,e,n,i){super(t,[],e,null),this.textDOM=n,this.text=i}get size(){return this.text.length}localPosFromDOM(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue}}class To extends ko{constructor(t,e,n,i){super(t,[],n,i),this.mark=e}static create(t,e,n,i){let r=i.nodeViews[e.type.name],o=r&&r(e,i,n);return o&&o.dom||(o=lt.renderSpec(document,e.type.spec.toDOM(e,n),null,e.attrs)),new To(t,e,o.dom,o.contentDOM||o.dom)}parseRule(){return 3&this.dirty||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return 3!=this.dirty&&this.mark.eq(t)}markDirty(t,e){if(super.markDirty(t,e),0!=this.dirty){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=0}}slice(t,e,n){let i=To.create(this.parent,this.mark,!0,n),r=this.children,o=this.size;e<o&&(r=Wo(r,e,o,n)),t>0&&(r=Wo(r,0,t,n));for(let t=0;t<r.length;t++)r[t].parent=i;return i.children=r,i}}class Mo extends ko{constructor(t,e,n,i,r,o,s,a,l){super(t,[],r,o),this.node=e,this.outerDeco=n,this.innerDeco=i,this.nodeDOM=s}static create(t,e,n,i,r,o){let s,a=r.nodeViews[e.type.name],l=a&&a(e,r,(()=>s?s.parent?s.parent.posBeforeChild(s):void 0:o),n,i),c=l&&l.dom,h=l&&l.contentDOM;if(e.isText)if(c){if(3!=c.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else c=document.createTextNode(e.text);else if(!c){let t=lt.renderSpec(document,e.type.spec.toDOM(e),null,e.attrs);({dom:c,contentDOM:h}=t)}h||e.isText||"BR"==c.nodeName||(c.hasAttribute("contenteditable")||(c.contentEditable="false"),e.type.spec.draggable&&(c.draggable=!0));let u=c;return c=zo(c,n,e),l?s=new Fo(t,e,n,i,c,h||null,u,l,r,o+1):e.isText?new Io(t,e,n,i,c,u,r):new Mo(t,e,n,i,c,h||null,u,r,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if("pre"==this.node.type.whitespace&&(t.preserveWhitespace="full"),this.contentDOM)if(this.contentLost){for(let e=this.children.length-1;e>=0;e--){let n=this.children[e];if(this.dom.contains(n.dom.parentNode)){t.contentElement=n.dom.parentNode;break}}t.contentElement||(t.getContent=()=>a.empty)}else t.contentElement=this.contentDOM;else t.getContent=()=>this.node.content;return t}matchesNode(t,e,n){return 0==this.dirty&&t.eq(this.node)&&$o(e,this.outerDeco)&&n.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,e){let n=this.node.inlineContent,i=e,r=t.composing?this.localCompositionInfo(t,e):null,o=r&&r.pos>-1?r:null,s=r&&r.pos<0,a=new Uo(this,o&&o.node,t);!function(t,e,n,i){let r=e.locals(t),o=0;if(0==r.length){for(let n=0;n<t.childCount;n++){let s=t.child(n);i(s,r,e.forChild(o,s),n),o+=s.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let h,u,d,p;for(;s<r.length&&r[s].to==o;){let t=r[s++];t.widget&&(h?(u||(u=[h])).push(t):h=t)}if(h)if(u){u.sort(Vo);for(let t=0;t<u.length;t++)n(u[t],c,!!l)}else n(h,c,!!l);if(l)p=-1,d=l,l=null;else{if(!(c<t.childCount))break;p=c,d=t.child(c++)}for(let t=0;t<a.length;t++)a[t].to<=o&&a.splice(t--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)a.push(r[s++]);let f=o+d.nodeSize;if(d.isText){let t=f;s<r.length&&r[s].from<t&&(t=r[s].from);for(let e=0;e<a.length;e++)a[e].to<t&&(t=a[e].to);t<f&&(l=d.cut(t-o),d=d.cut(0,t-o),f=t,p=-1)}else for(;s<r.length&&r[s].to<f;)s++;i(d,d.isInline&&!d.isLeaf?a.filter((t=>!t.inline)):a.slice(),e.forChild(o,d),p),o=f}}(this.node,this.innerDeco,((e,r,o)=>{e.spec.marks?a.syncToMarks(e.spec.marks,n,t):e.type.side>=0&&!o&&a.syncToMarks(r==this.node.childCount?u.none:this.node.child(r).marks,n,t),a.placeWidget(e,t,i)}),((e,o,l,c)=>{let h;a.syncToMarks(e.marks,n,t),a.findNodeMatch(e,o,l,c)||s&&t.state.selection.from>i&&t.state.selection.to<i+e.nodeSize&&(h=a.findIndexWithChild(r.node))>-1&&a.updateNodeAt(e,o,l,h,t)||a.updateNextNode(e,o,l,t,c,i)||a.addNode(e,o,l,t,i),i+=e.nodeSize})),a.syncToMarks([],n,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||2==this.dirty)&&(o&&this.protectLocalComposition(t,o),Po(this.contentDOM,this.children,t),Gr&&function(t){if("UL"==t.nodeName||"OL"==t.nodeName){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}(this.dom))}localCompositionInfo(t,e){let{from:n,to:i}=t.state.selection;if(!(t.state.selection instanceof se)||n<e||i>e+this.node.content.size)return null;let r=t.input.compositionNode;if(!r||!this.dom.contains(r.parentNode))return null;if(this.node.inlineContent){let t=r.nodeValue,o=function(t,e,n,i){for(let r=0,o=0;r<t.childCount&&o<=i;){let s=t.child(r++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;r<t.childCount;){let e=t.child(r++);if(o+=e.nodeSize,!e.isText)break;l+=e.text}if(o>=n){if(o>=i&&l.slice(i-e.length-a,i-a)==e)return i-e.length;let t=a<i?l.lastIndexOf(e,i-a-1):-1;if(t>=0&&t+e.length+a>=n)return a+t;if(n==i&&l.length>=i+e.length-a&&l.slice(i-a,i-a+e.length)==e)return i}}return-1}(this.node.content,t,n-e,i-e);return o<0?null:{node:r,pos:o,text:t}}return{node:r,pos:-1,text:""}}protectLocalComposition(t,{node:e,pos:n,text:i}){if(this.getDesc(e))return;let r=e;for(;r.parentNode!=this.contentDOM;r=r.parentNode){for(;r.previousSibling;)r.parentNode.removeChild(r.previousSibling);for(;r.nextSibling;)r.parentNode.removeChild(r.nextSibling);r.pmViewDesc&&(r.pmViewDesc=void 0)}let o=new Eo(this,r,e,i);t.input.compositionNodes.push(o),this.children=Wo(this.children,n,n+i.length,t,o)}update(t,e,n,i){return!(3==this.dirty||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,i),!0)}updateInner(t,e,n,i){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=0}updateOuterDeco(t){if($o(t,this.outerDeco))return;let e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Bo(this.dom,this.nodeDOM,No(this.outerDeco,this.node,e),No(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){1==this.nodeDOM.nodeType&&this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)}deselectNode(){1==this.nodeDOM.nodeType&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Oo(t,e,n,i,r){zo(i,e,t);let o=new Mo(void 0,t,e,n,i,i,i,r,0);return o.contentDOM&&o.updateChildren(r,0),o}class Io extends Mo{constructor(t,e,n,i,r,o,s){super(t,e,n,i,r,null,o,s,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,e,n,i){return!(3==this.dirty||0!=this.dirty&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),0==this.dirty&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=0,!0)}inParent(){let t=this.parent.contentDOM;for(let e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,e,n){return t==this.nodeDOM?this.posAtStart+Math.min(e,this.node.text.length):super.localPosFromDOM(t,e,n)}ignoreMutation(t){return"characterData"!=t.type&&"selection"!=t.type}slice(t,e,n){let i=this.node.cut(t,e),r=document.createTextNode(i.text);return new Io(this.parent,i,this.outerDeco,this.innerDeco,r,r,n)}markDirty(t,e){super.markDirty(t,e),this.dom==this.nodeDOM||0!=t&&e!=this.nodeDOM.nodeValue.length||(this.dirty=3)}get domAtom(){return!1}isText(t){return this.node.text==t}}class Do extends ko{parseRule(){return{ignore:!0}}matchesHack(t){return 0==this.dirty&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return"IMG"==this.dom.nodeName}}class Fo extends Mo{constructor(t,e,n,i,r,o,s,a,l,c){super(t,e,n,i,r,o,s,l,c),this.spec=a}update(t,e,n,i){if(3==this.dirty)return!1;if(this.spec.update){let r=this.spec.update(t,e,n);return r&&this.updateInner(t,e,n,i),r}return!(!this.contentDOM&&!t.isLeaf)&&super.update(t,e,n,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,e,n,i){this.spec.setSelection?this.spec.setSelection(t,e,n):super.setSelection(t,e,n,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Po(t,e,n){let i=t.firstChild,r=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==t){for(;a!=i;)i=Ho(i),r=!0;i=i.nextSibling}else r=!0,t.insertBefore(a,i);if(s instanceof To){let e=i?i.previousSibling:t.lastChild;Po(s.contentDOM,s.children,n),i=e?e.nextSibling:t.firstChild}}for(;i;)i=Ho(i),r=!0;r&&n.trackWrites==t&&(n.trackWrites=null)}const Ro=function(t){t&&(this.nodeName=t)};Ro.prototype=Object.create(null);const Lo=[new Ro];function No(t,e,n){if(0==t.length)return Lo;let i=n?Lo[0]:new Ro,r=[i];for(let o=0;o<t.length;o++){let s=t[o].type.attrs;if(s){s.nodeName&&r.push(i=new Ro(s.nodeName));for(let t in s){let o=s[t];null!=o&&(n&&1==r.length&&r.push(i=new Ro(e.isInline?"span":"div")),"class"==t?i.class=(i.class?i.class+" ":"")+o:"style"==t?i.style=(i.style?i.style+";":"")+o:"nodeName"!=t&&(i[t]=o))}}}return r}function Bo(t,e,n,i){if(n==Lo&&i==Lo)return e;let r=e;for(let e=0;e<i.length;e++){let o=i[e],s=n[e];if(e){let e;s&&s.nodeName==o.nodeName&&r!=t&&(e=r.parentNode)&&e.nodeName.toLowerCase()==o.nodeName||(e=document.createElement(o.nodeName),e.pmIsDeco=!0,e.appendChild(r),s=Lo[0]),r=e}jo(r,s||Lo[0],o)}return r}function jo(t,e,n){for(let i in e)"class"==i||"style"==i||"nodeName"==i||i in n||t.removeAttribute(i);for(let i in n)"class"!=i&&"style"!=i&&"nodeName"!=i&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let e=0;e<i.length;e++)-1==r.indexOf(i[e])&&t.classList.remove(i[e]);for(let e=0;e<r.length;e++)-1==i.indexOf(r[e])&&t.classList.add(r[e]);0==t.classList.length&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let n,i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;for(;n=i.exec(e.style);)t.style.removeProperty(n[1])}n.style&&(t.style.cssText+=n.style)}}function zo(t,e,n){return Bo(t,t,Lo,No(e,n,1!=t.nodeType))}function $o(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ho(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class Uo{constructor(t,e,n){this.lock=e,this.view=n,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=function(t,e){let n=e,i=n.children.length,r=t.childCount,o=new Map,s=[];t:for(;r>0;){let a;for(;;)if(i){let t=n.children[i-1];if(!(t instanceof To)){a=t,i--;break}n=t,i=t.children.length}else{if(n==e)break t;i=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=t.child(r-1))break;--r,o.set(a,r),s.push(a)}}return{index:r,matched:o,matches:s.reverse()}}(t.node.content,t)}destroyBetween(t,e){if(t!=e){for(let n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,e,n){let i=0,r=this.stack.length>>1,o=Math.min(r,t.length);for(;i<o&&(i==r-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&!1!==t[i].type.spec.spanning;)i++;for(;i<r;)this.destroyRest(),this.top.dirty=0,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<t.length;){this.stack.push(this.top,this.index+1);let i=-1;for(let e=this.index;e<Math.min(this.index+3,this.top.children.length);e++){let n=this.top.children[e];if(n.matchesMark(t[r])&&!this.isLocked(n.dom)){i=e;break}}if(i>-1)i>this.index&&(this.changed=!0,this.destroyBetween(this.index,i)),this.top=this.top.children[this.index];else{let i=To.create(this.top,t[r],e,n);this.top.children.splice(this.index,0,i),this.top=i,this.changed=!0}this.index=0,r++}}findNodeMatch(t,e,n,i){let r,o=-1;if(i>=this.preMatch.index&&(r=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&r.matchesNode(t,e,n))o=this.top.children.indexOf(r,this.index);else for(let i=this.index,r=Math.min(this.top.children.length,i+5);i<r;i++){let r=this.top.children[i];if(r.matchesNode(t,e,n)&&!this.preMatch.matched.has(r)){o=i;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(t,e,n,i,r){let o=this.top.children[i];return 3==o.dirty&&o.dom==o.contentDOM&&(o.dirty=2),!!o.update(t,e,n,r)&&(this.destroyBetween(this.index,i),this.index++,!0)}findIndexWithChild(t){for(;;){let e=t.parentNode;if(!e)return-1;if(e==this.top.contentDOM){let e=t.pmViewDesc;if(e)for(let t=this.index;t<this.top.children.length;t++)if(this.top.children[t]==e)return t;return-1}t=e}}updateNextNode(t,e,n,i,r,o){for(let s=this.index;s<this.top.children.length;s++){let a=this.top.children[s];if(a instanceof Mo){let l=this.preMatch.matched.get(a);if(null!=l&&l!=r)return!1;let c,h=a.dom,u=this.isLocked(h)&&!(t.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==t.text&&3!=a.dirty&&$o(e,a.outerDeco));if(!u&&a.update(t,e,n,i))return this.destroyBetween(this.index,s),a.dom!=h&&(this.changed=!0),this.index++,!0;if(!u&&(c=this.recreateWrapper(a,t,e,n,i,o)))return this.top.children[this.index]=c,c.contentDOM&&(c.dirty=2,c.updateChildren(i,o+1),c.dirty=0),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,e,n,i,r,o){if(t.dirty||e.isAtom||!t.children.length||!t.node.content.eq(e.content))return null;let s=Mo.create(this.top,e,n,i,r,o);if(s.contentDOM){s.children=t.children,t.children=[];for(let t of s.children)t.parent=s}return t.destroy(),s}addNode(t,e,n,i,r){let o=Mo.create(this.top,t,e,n,i,r);o.contentDOM&&o.updateChildren(i,r+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,e,n){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(!i||!i.matchesWidget(t)||t!=i.widget&&i.widget.type.toDOM.parentNode){let i=new Ao(this.top,t,e,n);this.top.children.splice(this.index++,0,i),this.changed=!0}else this.index++}addTextblockHacks(){let t=this.top.children[this.index-1],e=this.top;for(;t instanceof To;)e=t,t=e.children[e.children.length-1];(!t||!(t instanceof Io)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((Xr||qr)&&t&&"false"==t.dom.contentEditable&&this.addHackNode("IMG",e),this.addHackNode("BR",this.top))}addHackNode(t,e){if(e==this.top&&this.index<e.children.length&&e.children[this.index].matchesHack(t))this.index++;else{let n=document.createElement(t);"IMG"==t&&(n.className="ProseMirror-separator",n.alt=""),"BR"==t&&(n.className="ProseMirror-trailingBreak");let i=new Do(this.top,[],n,null);e!=this.top?e.children.push(i):e.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||1==t.nodeType&&t.contains(this.lock.parentNode))}}function Vo(t,e){return t.type.side-e.type.side}function Wo(t,e,n,i,r){let o=[];for(let s=0,a=0;s<t.length;s++){let l=t[s],c=a,h=a+=l.size;c>=n||h<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,i)),r&&(o.push(r),r=void 0),h>n&&o.push(l.slice(n-c,l.size,i)))}return o}function qo(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let r=t.docView.nearestDesc(n.focusNode),o=r&&0==r.size,s=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a,l,c=i.resolve(s);if(Pr(n)){for(a=c;r&&!r.node;)r=r.parent;let t=r.node;if(r&&t.isAtom&&le.isSelectable(t)&&r.parent&&(!t.isInline||!function(t,e,n){for(let i=0==e,r=e==Dr(t);i||r;){if(t==n)return!0;let e=kr(t);if(!(t=t.parentNode))return!1;i=i&&0==e,r=r&&e==Dr(t)}}(n.focusNode,n.focusOffset,r.dom))){let t=r.posBefore;l=new le(s==t?c:i.resolve(t))}}else{let e=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(e<0)return null;a=i.resolve(e)}if(!l){l=es(t,a,c,"pointer"==e||t.state.selection.head<c.pos&&!o?1:-1)}return l}function Ko(t){return t.editable?t.hasFocus():is(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Xo(t,e=!1){let n=t.state.selection;if(Qo(t,n),Ko(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&qr){let e=t.domSelectionRange(),n=t.domObserver.currentSelection;if(e.anchorNode&&n.anchorNode&&Mr(e.anchorNode,e.anchorOffset,n.anchorNode,n.anchorOffset))return t.input.mouseDown.delayedSelectionSync=!0,void t.domObserver.setCurSelection()}if(t.domObserver.disconnectSelection(),t.cursorWrapper)!function(t){let e=t.domSelection(),n=document.createRange(),i=t.cursorWrapper.dom,r="IMG"==i.nodeName;r?n.setEnd(i.parentNode,kr(i)+1):n.setEnd(i,0);n.collapse(!1),e.removeAllRanges(),e.addRange(n),!r&&!t.state.selection.visible&&Hr&&Ur<=11&&(i.disabled=!0,i.disabled=!1)}(t);else{let i,r,{anchor:o,head:s}=n;!Go||n instanceof se||(n.$from.parent.inlineContent||(i=Yo(t,n.from)),n.empty||n.$from.parent.inlineContent||(r=Yo(t,n.to))),t.docView.setSelection(o,s,t.root,e),Go&&(i&&Zo(i),r&&Zo(r)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&function(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{n.anchorNode==i&&n.anchorOffset==r||(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout((()=>{Ko(t)&&!t.state.selection.visible||t.dom.classList.remove("ProseMirror-hideselection")}),20))})}(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Go=Xr||qr&&Kr<63;function Yo(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),r=i<n.childNodes.length?n.childNodes[i]:null,o=i?n.childNodes[i-1]:null;if(Xr&&r&&"false"==r.contentEditable)return Jo(r);if(!(r&&"false"!=r.contentEditable||o&&"false"!=o.contentEditable)){if(r)return Jo(r);if(o)return Jo(o)}}function Jo(t){return t.contentEditable="true",Xr&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Zo(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Qo(t,e){if(e instanceof le){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ts(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ts(t)}function ts(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function es(t,e,n,i){return t.someProp("createSelectionBetween",(i=>i(t,e,n)))||se.between(e,n,i)}function ns(t){return!(t.editable&&!t.hasFocus())&&is(t)}function is(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(t){return!1}}function rs(t,e){let{$anchor:n,$head:i}=t.selection,r=e>0?n.max(i):n.min(i),o=r.parent.inlineContent?r.depth?t.doc.resolve(e>0?r.after():r.before()):null:r;return o&&ne.findFrom(o,e)}function ss(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function as(t,e,n){let i=t.state.selection;if(!(i instanceof se)){if(i instanceof le&&i.node.isInline)return ss(t,new se(e>0?i.$to:i.$from));{let n=rs(t.state,e);return!!n&&ss(t,n)}}if(n.indexOf("s")>-1){let{$head:n}=i,r=n.textOffset?null:e<0?n.nodeBefore:n.nodeAfter;if(!r||r.isText||!r.isLeaf)return!1;let o=t.state.doc.resolve(n.pos+r.nodeSize*(e<0?-1:1));return ss(t,new se(i.$anchor,o))}if(!i.empty)return!1;if(t.endOfTextblock(e>0?"forward":"backward")){let n=rs(t.state,e);return!!(n&&n instanceof le)&&ss(t,n)}if(!(Yr&&n.indexOf("m")>-1)){let n,r=i.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText)return!1;let s=e<0?r.pos-o.nodeSize:r.pos;return!!(o.isAtom||(n=t.docView.descAt(s))&&!n.contentDOM)&&(le.isSelectable(o)?ss(t,new le(e<0?t.state.doc.resolve(r.pos-o.nodeSize):r)):!!Qr&&ss(t,new se(t.state.doc.resolve(e<0?s:s+o.nodeSize))))}}function ls(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function cs(t,e){let n=t.pmViewDesc;return n&&0==n.size&&(e<0||t.nextSibling||"BR"!=t.nodeName)}function hs(t,e){return e<0?function(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,o,s=!1;Vr&&1==n.nodeType&&i<ls(n)&&cs(n.childNodes[i],-1)&&(s=!0);for(;;)if(i>0){if(1!=n.nodeType)break;{let t=n.childNodes[i-1];if(cs(t,-1))r=n,o=--i;else{if(3!=t.nodeType)break;n=t,i=n.nodeValue.length}}}else{if(us(n))break;{let e=n.previousSibling;for(;e&&cs(e,-1);)r=n.parentNode,o=kr(e),e=e.previousSibling;if(e)n=e,i=ls(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}s?ds(t,n,i):r&&ds(t,r,o)}(t):function(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let r,o,s=ls(n);for(;;)if(i<s){if(1!=n.nodeType)break;if(!cs(n.childNodes[i],1))break;r=n,o=++i}else{if(us(n))break;{let e=n.nextSibling;for(;e&&cs(e,1);)r=e.parentNode,o=kr(e)+1,e=e.nextSibling;if(e)n=e,i=0,s=ls(n);else{if(n=n.parentNode,n==t.dom)break;i=s=0}}}r&&ds(t,r,o)}(t)}function us(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function ds(t,e,n){if(3!=e.nodeType){let t,i;(i=function(t,e){for(;t&&e==t.childNodes.length&&!Fr(t);)e=kr(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;t=n,e=0}}(e,n))?(e=i,n=0):(t=function(t,e){for(;t&&!e&&!Fr(t);)e=kr(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(3==n.nodeType)return n;if(1==n.nodeType&&"false"==n.contentEditable)break;e=(t=n).childNodes.length}}(e,n))&&(e=t,n=t.nodeValue.length)}let i=t.domSelection();if(Pr(i)){let t=document.createRange();t.setEnd(e,n),t.setStart(e,n),i.removeAllRanges(),i.addRange(t)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:r}=t;setTimeout((()=>{t.state==r&&Xo(t)}),50)}function ps(t,e){let n=t.state.doc.resolve(e);if(!qr&&!Jr&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let n=t.coordsAtPos(e-1),r=(n.top+n.bottom)/2;if(r>i.top&&r<i.bottom&&Math.abs(n.left-i.left)>1)return n.left<i.left?"ltr":"rtl"}if(e<n.end()){let n=t.coordsAtPos(e+1),r=(n.top+n.bottom)/2;if(r>i.top&&r<i.bottom&&Math.abs(n.left-i.left)>1)return n.left>i.left?"ltr":"rtl"}}return"rtl"==getComputedStyle(t.dom).direction?"rtl":"ltr"}function fs(t,e,n){let i=t.state.selection;if(i instanceof se&&!i.empty||n.indexOf("s")>-1)return!1;if(Yr&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=i;if(!r.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let n=rs(t.state,e);if(n&&n instanceof le)return ss(t,n)}if(!r.parent.inlineContent){let n=e<0?r:o,s=i instanceof he?ne.near(n,e):ne.findFrom(n,e);return!!s&&ss(t,s)}return!1}function gs(t,e){if(!(t.state.selection instanceof se))return!0;let{$head:n,$anchor:i,empty:r}=t.state.selection;if(!n.sameParent(i))return!0;if(!r)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=t.state.tr;return e<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),t.dispatch(i),!0}return!1}function ms(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function ys(t,e){let n=e.keyCode,i=function(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}(e);if(8==n||Yr&&72==n&&"c"==i)return gs(t,-1)||hs(t,-1);if(46==n&&!e.shiftKey||Yr&&68==n&&"c"==i)return gs(t,1)||hs(t,1);if(13==n||27==n)return!0;if(37==n||Yr&&66==n&&"c"==i){let e=37==n?"ltr"==ps(t,t.state.selection.from)?-1:1:-1;return as(t,e,i)||hs(t,e)}if(39==n||Yr&&70==n&&"c"==i){let e=39==n?"ltr"==ps(t,t.state.selection.from)?1:-1:1;return as(t,e,i)||hs(t,e)}return 38==n||Yr&&80==n&&"c"==i?fs(t,-1,i)||hs(t,-1):40==n||Yr&&78==n&&"c"==i?function(t){if(!Xr||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&1==e.nodeType&&0==n&&e.firstChild&&"false"==e.firstChild.contentEditable){let n=e.firstChild;ms(t,n,"true"),setTimeout((()=>ms(t,n,"false")),20)}return!1}(t)||fs(t,1,i)||hs(t,1):i==(Yr?"m":"c")&&(66==n||73==n||89==n||90==n)}function vs(t,e){t.someProp("transformCopied",(n=>{e=n(e,t)}));let n=[],{content:i,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&1==i.childCount&&1==i.firstChild.childCount;){r--,o--;let t=i.firstChild;n.push(t.type.name,t.attrs!=t.type.defaultAttrs?t.attrs:null),i=t.content}let s=t.someProp("clipboardSerializer")||lt.fromSchema(t.state.schema),a=Ts(),l=a.createElement("div");l.appendChild(s.serializeFragment(i,{document:a}));let c,h=l.firstChild,u=0;for(;h&&1==h.nodeType&&(c=As[h.nodeName.toLowerCase()]);){for(let t=c.length-1;t>=0;t--){let e=a.createElement(c[t]);for(;l.firstChild;)e.appendChild(l.firstChild);l.appendChild(e),u++}h=l.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",`${r} ${o}${u?` -${u}`:""} ${JSON.stringify(n)}`),{dom:l,text:t.someProp("clipboardTextSerializer",(n=>n(e,t)))||e.content.textBetween(0,e.content.size,"\n\n"),slice:e}}function bs(t,e,n,i,r){let o,s,l=r.parent.type.spec.code;if(!n&&!e)return null;let c=e&&(i||l||!n);if(c){if(t.someProp("transformPastedText",(n=>{e=n(e,l||i,t)})),l)return e?new p(a.from(t.state.schema.text(e.replace(/\r\n?/g,"\n"))),0,0):p.empty;let n=t.someProp("clipboardTextParser",(n=>n(e,r,i,t)));if(n)s=n;else{let n=r.marks(),{schema:i}=t.state,s=lt.fromSchema(i);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach((t=>{let e=o.appendChild(document.createElement("p"));t&&e.appendChild(s.serializeNode(i.text(t,n)))}))}}else t.someProp("transformPastedHTML",(e=>{n=e(n,t)})),o=function(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n,i=Ts().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t);(n=r&&As[r[1].toLowerCase()])&&(t=n.map((t=>"<"+t+">")).join("")+t+n.map((t=>"</"+t+">")).reverse().join(""));if(i.innerHTML=t,n)for(let t=0;t<n.length;t++)i=i.querySelector(n[t])||i;return i}(n),Qr&&function(t){let e=t.querySelectorAll(qr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];1==i.childNodes.length&&" "==i.textContent&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}(o);let h=o&&o.querySelector("[data-pm-slice]"),u=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let t=+u[3];t>0;t--){let t=o.firstChild;for(;t&&1!=t.nodeType;)t=t.nextSibling;if(!t)break;o=t}if(!s){let e=t.someProp("clipboardParser")||t.someProp("domParser")||Z.fromSchema(t.state.schema);s=e.parseSlice(o,{preserveWhitespace:!(!c&&!u),context:r,ruleFromNode:t=>"BR"!=t.nodeName||t.nextSibling||!t.parentNode||ws.test(t.parentNode.nodeName)?null:{ignore:!0}})}if(u)s=function(t,e){if(!t.size)return t;let n,i=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}let{content:r,openStart:o,openEnd:s}=t;for(let t=n.length-2;t>=0;t-=2){let e=i.nodes[n[t]];if(!e||e.hasRequiredAttrs())break;r=a.from(e.create(n[t+1],r)),o++,s++}return new p(r,o,s)}(ks(s,+u[1],+u[2]),u[4]);else if(s=p.maxOpen(function(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i,r=e.node(n).contentMatchAt(e.index(n)),o=[];if(t.forEach((t=>{if(!o)return;let e,n=r.findWrapping(t.type);if(!n)return o=null;if(e=o.length&&i.length&&_s(n,i,t,o[o.length-1],0))o[o.length-1]=e;else{o.length&&(o[o.length-1]=Ss(o[o.length-1],i.length));let e=xs(t,n);o.push(e),r=r.matchType(e.type),i=n}})),o)return a.from(o)}return t}(s.content,r),!0),s.openStart||s.openEnd){let t=0,e=0;for(let e=s.content.firstChild;t<s.openStart&&!e.type.spec.isolating;t++,e=e.firstChild);for(let t=s.content.lastChild;e<s.openEnd&&!t.type.spec.isolating;e++,t=t.lastChild);s=ks(s,t,e)}return t.someProp("transformPasted",(e=>{s=e(s,t)})),s}const ws=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function xs(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,a.from(t));return t}function _s(t,e,n,i,r){if(r<t.length&&r<e.length&&t[r]==e[r]){let o=_s(t,e,n,i.lastChild,r+1);if(o)return i.copy(i.content.replaceChild(i.childCount-1,o));if(i.contentMatchAt(i.childCount).matchType(r==t.length-1?n.type:t[r+1]))return i.copy(i.content.append(a.from(xs(n,t,r+1))))}}function Ss(t,e){if(0==e)return t;let n=t.content.replaceChild(t.childCount-1,Ss(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(a.empty,!0);return t.copy(n.append(i))}function Cs(t,e,n,i,r,o){let s=e<0?t.firstChild:t.lastChild,l=s.content;return t.childCount>1&&(o=0),r<i-1&&(l=Cs(l,e,n,i,r+1,o)),r>=n&&(l=e<0?s.contentMatchAt(0).fillBefore(l,o<=r).append(l):l.append(s.contentMatchAt(s.childCount).fillBefore(a.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(l))}function ks(t,e,n){return e<t.openStart&&(t=new p(Cs(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new p(Cs(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const As={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Es=null;function Ts(){return Es||(Es=document.implementation.createHTMLDocument("title"))}const Ms={},Os={},Is={touchstart:!0,touchmove:!0};class Ds{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Fs(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Ps(t){t.someProp("handleDOMEvents",(e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=e=>Rs(t,e))}))}function Rs(t,e){return t.someProp("handleDOMEvents",(n=>{let i=n[e.type];return!!i&&(i(t,e)||e.defaultPrevented)}))}function Ls(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Ns(t){return{left:t.clientX,top:t.clientY}}function Bs(t,e,n,i,r){if(-1==i)return!1;let o=t.state.doc.resolve(i);for(let i=o.depth+1;i>0;i--)if(t.someProp(e,(e=>i>o.depth?e(t,n,o.nodeAfter,o.before(i),r,!0):e(t,n,o.node(i),o.before(i),r,!1))))return!0;return!1}function js(t,e,n){t.focused||t.focus();let i=t.state.tr.setSelection(e);"pointer"==n&&i.setMeta("pointer",!0),t.dispatch(i)}function zs(t,e,n,i,r){return Bs(t,"handleClickOn",e,n,i)||t.someProp("handleClick",(n=>n(t,e,i)))||(r?function(t,e){if(-1==e)return!1;let n,i,r=t.state.selection;r instanceof le&&(n=r.node);let o=t.state.doc.resolve(e);for(let t=o.depth+1;t>0;t--){let e=t>o.depth?o.nodeAfter:o.node(t);if(le.isSelectable(e)){i=n&&r.$from.depth>0&&t>=r.$from.depth&&o.before(r.$from.depth+1)==r.$from.pos?o.before(r.$from.depth):o.before(t);break}}return null!=i&&(js(t,le.create(t.state.doc,i),"pointer"),!0)}(t,n):function(t,e){if(-1==e)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return!!(i&&i.isAtom&&le.isSelectable(i))&&(js(t,new le(n),"pointer"),!0)}(t,n))}function $s(t,e,n,i){return Bs(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",(n=>n(t,e,i)))}function Hs(t,e,n,i){return Bs(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",(n=>n(t,e,i)))||function(t,e,n){if(0!=n.button)return!1;let i=t.state.doc;if(-1==e)return!!i.inlineContent&&(js(t,se.create(i,0,i.content.size),"pointer"),!0);let r=i.resolve(e);for(let e=r.depth+1;e>0;e--){let n=e>r.depth?r.nodeAfter:r.node(e),o=r.before(e);if(n.inlineContent)js(t,se.create(i,o+1,o+1+n.content.size),"pointer");else{if(!le.isSelectable(n))continue;js(t,le.create(i,o),"pointer")}return!0}}(t,n,i)}function Us(t){return Js(t)}Os.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=16==n.keyCode||n.shiftKey,!qs(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!Zr||!qr||13!=n.keyCode))if(229!=n.keyCode&&t.domObserver.forceFlush(),!Gr||13!=n.keyCode||n.ctrlKey||n.altKey||n.metaKey)t.someProp("handleKeyDown",(e=>e(t,n)))||ys(t,n)?n.preventDefault():Fs(t,"key");else{let e=Date.now();t.input.lastIOSEnter=e,t.input.lastIOSEnterFallbackTimeout=setTimeout((()=>{t.input.lastIOSEnter==e&&(t.someProp("handleKeyDown",(e=>e(t,Rr(13,"Enter")))),t.input.lastIOSEnter=0)}),200)}},Os.keyup=(t,e)=>{16==e.keyCode&&(t.input.shiftKey=!1)},Os.keypress=(t,e)=>{let n=e;if(qs(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Yr&&n.metaKey)return;if(t.someProp("handleKeyPress",(e=>e(t,n))))return void n.preventDefault();let i=t.state.selection;if(!(i instanceof se&&i.$from.sameParent(i.$to))){let e=String.fromCharCode(n.charCode);/[\r\n]/.test(e)||t.someProp("handleTextInput",(n=>n(t,i.$from.pos,i.$to.pos,e)))||t.dispatch(t.state.tr.insertText(e).scrollIntoView()),n.preventDefault()}};const Vs=Yr?"metaKey":"ctrlKey";Ms.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=Us(t),r=Date.now(),o="singleClick";r-t.input.lastClick.time<500&&function(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}(n,t.input.lastClick)&&!n[Vs]&&("singleClick"==t.input.lastClick.type?o="doubleClick":"doubleClick"==t.input.lastClick.type&&(o="tripleClick")),t.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let s=t.posAtCoords(Ns(n));s&&("singleClick"==o?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Ws(t,s,n,!!i)):("doubleClick"==o?$s:Hs)(t,s.pos,s.inside,n)?n.preventDefault():Fs(t,"pointer"))};class Ws{constructor(t,e,n,i){let r,o;if(this.view=t,this.pos=e,this.event=n,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!n[Vs],this.allowDefault=n.shiftKey,e.inside>-1)r=t.state.doc.nodeAt(e.inside),o=e.inside;else{let n=t.state.doc.resolve(e.pos);r=n.parent,o=n.depth?n.before():0}const s=i?null:n.target,a=s?t.docView.nearestDesc(s,!0):null;this.target=a&&1==a.dom.nodeType?a.dom:null;let{selection:l}=t.state;(0==n.button&&r.type.spec.draggable&&!1!==r.type.spec.selectable||l instanceof le&&l.from<=o&&l.to>o)&&(this.mightDrag={node:r,pos:o,addAttr:!(!this.target||this.target.draggable),setUneditable:!(!this.target||!Vr||this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Fs(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout((()=>Xo(this.view))),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ns(t))),this.updateAllowDefault(t),this.allowDefault||!e?Fs(this.view,"pointer"):zs(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():0==t.button&&(this.flushed||Xr&&this.mightDrag&&!this.mightDrag.node.isAtom||qr&&!this.view.state.selection.visible&&Math.min(Math.abs(e.pos-this.view.state.selection.from),Math.abs(e.pos-this.view.state.selection.to))<=2)?(js(this.view,ne.near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Fs(this.view,"pointer")}move(t){this.updateAllowDefault(t),Fs(this.view,"pointer"),0==t.buttons&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}function qs(t,e){return!!t.composing||!!(Xr&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500)&&(t.input.compositionEndedAt=-2e8,!0)}Ms.touchstart=t=>{t.input.lastTouch=Date.now(),Us(t),Fs(t,"pointer")},Ms.touchmove=t=>{t.input.lastTouch=Date.now(),Fs(t,"pointer")},Ms.contextmenu=t=>Us(t);const Ks=Zr?5e3:-1;function Xs(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout((()=>Js(t)),e))}function Gs(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=function(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Ys(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=function(t,e){for(;;){if(3==t.nodeType&&e)return t;if(1==t.nodeType&&e>0){if("false"==t.contentEditable)return null;e=Dr(t=t.childNodes[e-1])}else{if(!t.parentNode||Fr(t))return null;e=kr(t),t=t.parentNode}}}(e.focusNode,e.focusOffset),i=function(t,e){for(;;){if(3==t.nodeType&&e<t.nodeValue.length)return t;if(1==t.nodeType&&e<t.childNodes.length){if("false"==t.contentEditable)return null;t=t.childNodes[e],e=0}else{if(!t.parentNode||Fr(t))return null;e=kr(t)+1,t=t.parentNode}}}(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let e=i.pmViewDesc,r=t.domObserver.lastChangedTextNode;if(n==r||i==r)return r;if(!e||!e.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let t=n.pmViewDesc;if(t&&t.isText(n.nodeValue))return i}}return n||i}function Js(t,e=!1){if(!(Zr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Gs(t),e||t.docView&&t.docView.dirty){let e=qo(t);return e&&!e.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(e)):t.updateState(t.state),!0}return!1}}Os.compositionstart=Os.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((t=>!1===t.type.spec.inclusive))))t.markCursor=t.state.storedMarks||n.marks(),Js(t,!0),t.markCursor=null;else if(Js(t),Vr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let e=t.domSelectionRange();for(let n=e.focusNode,i=e.focusOffset;n&&1==n.nodeType&&0!=i;){let e=i<0?n.lastChild:n.childNodes[i-1];if(!e)break;if(3==e.nodeType){t.domSelection().collapse(e,e.nodeValue.length);break}n=e,i=-1}}t.input.composing=!0}Xs(t,Ks)},Os.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then((()=>t.domObserver.flush())),t.input.compositionID++,Xs(t,20))};const Zs=Hr&&Ur<15||Gr&&to<604;function Qs(t,e,n,i,r){let o=bs(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",(e=>e(t,r,o||p.empty))))return!0;if(!o)return!1;let s=function(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}(o),a=s?t.state.tr.replaceSelectionWith(s,i):t.state.tr.replaceSelection(o);return t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ta(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Ms.copy=Os.cut=(t,e)=>{let n=e,i=t.state.selection,r="cut"==n.type;if(i.empty)return;let o=Zs?null:n.clipboardData,s=i.content(),{dom:a,text:l}=vs(t,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):function(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),r=document.createRange();r.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(r),setTimeout((()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))},Os.paste=(t,e)=>{let n=e;if(t.composing&&!Zr)return;let i=Zs?null:n.clipboardData,r=t.input.shiftKey&&45!=t.input.lastKeyCode;i&&Qs(t,ta(i),i.getData("text/html"),r,n)?n.preventDefault():function(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let r=t.input.shiftKey&&45!=t.input.lastKeyCode;setTimeout((()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?Qs(t,i.value,null,r,e):Qs(t,i.textContent,i.innerHTML,r,e)}),50)}(t,n)};class ea{constructor(t,e,n){this.slice=t,this.move=e,this.node=n}}const na=Yr?"altKey":"ctrlKey";Ms.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let r,o=t.state.selection,s=o.empty?null:t.posAtCoords(Ns(n));if(s&&s.pos>=o.from&&s.pos<=(o instanceof le?o.to-1:o.to));else if(i&&i.mightDrag)r=le.create(t.state.doc,i.mightDrag.pos);else if(n.target&&1==n.target.nodeType){let e=t.docView.nearestDesc(n.target,!0);e&&e.node.type.spec.draggable&&e!=t.docView&&(r=le.create(t.state.doc,e.posBefore))}let a=(r||t.state.selection).content(),{dom:l,text:c,slice:h}=vs(t,a);(!n.dataTransfer.files.length||!qr||Kr>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Zs?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Zs||n.dataTransfer.setData("text/plain",c),t.dragging=new ea(h,!n[na],r)},Ms.dragend=t=>{let e=t.dragging;window.setTimeout((()=>{t.dragging==e&&(t.dragging=null)}),50)},Os.dragover=Os.dragenter=(t,e)=>e.preventDefault(),Os.drop=(t,e)=>{let n=e,i=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let r=t.posAtCoords(Ns(n));if(!r)return;let o=t.state.doc.resolve(r.pos),s=i&&i.slice;s?t.someProp("transformPasted",(e=>{s=e(s,t)})):s=bs(t,ta(n.dataTransfer),Zs?null:n.dataTransfer.getData("text/html"),!1,o);let a=!(!i||n[na]);if(t.someProp("handleDrop",(e=>e(t,n,s||p.empty,a))))return void n.preventDefault();if(!s)return;n.preventDefault();let l=s?zt(t.state.doc,o.pos,s):o.pos;null==l&&(l=o.pos);let c=t.state.tr;if(a){let{node:t}=i;t?t.replace(c):c.deleteSelection()}let h=c.mapping.map(l),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,d=c.doc;if(u?c.replaceRangeWith(h,h,s.content.firstChild):c.replaceRange(h,h,s),c.doc.eq(d))return;let f=c.doc.resolve(h);if(u&&le.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new le(f));else{let e=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach(((t,n,i,r)=>e=r)),c.setSelection(es(t,f,c.doc.resolve(e)))}t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))},Ms.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Xo(t)}),20))},Ms.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)},Ms.beforeinput=(t,e)=>{if(qr&&Zr&&"deleteContentBackward"==e.inputType){t.domObserver.flushSoon();let{domChangeCount:e}=t.input;setTimeout((()=>{if(t.input.domChangeCount!=e)return;if(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",(e=>e(t,Rr(8,"Backspace")))))return;let{$cursor:n}=t.state.selection;n&&n.pos>0&&t.dispatch(t.state.tr.delete(n.pos-1,n.pos).scrollIntoView())}),50)}};for(let t in Os)Ms[t]=Os[t];function ia(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class ra{constructor(t,e){this.toDOM=t,this.spec=e||ca,this.side=this.spec.side||0}map(t,e,n,i){let{pos:r,deleted:o}=t.mapResult(e.from+i,this.side<0?-1:1);return o?null:new aa(r-n,r-n,this)}valid(){return!0}eq(t){return this==t||t instanceof ra&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&ia(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class oa{constructor(t,e){this.attrs=t,this.spec=e||ca}map(t,e,n,i){let r=t.map(e.from+i,this.spec.inclusiveStart?-1:1)-n,o=t.map(e.to+i,this.spec.inclusiveEnd?1:-1)-n;return r>=o?null:new aa(r,o,this)}valid(t,e){return e.from<e.to}eq(t){return this==t||t instanceof oa&&ia(this.attrs,t.attrs)&&ia(this.spec,t.spec)}static is(t){return t.type instanceof oa}destroy(){}}class sa{constructor(t,e){this.attrs=t,this.spec=e||ca}map(t,e,n,i){let r=t.mapResult(e.from+i,1);if(r.deleted)return null;let o=t.mapResult(e.to+i,-1);return o.deleted||o.pos<=r.pos?null:new aa(r.pos-n,o.pos-n,this)}valid(t,e){let n,{index:i,offset:r}=t.content.findIndex(e.from);return r==e.from&&!(n=t.child(i)).isText&&r+n.nodeSize==e.to}eq(t){return this==t||t instanceof sa&&ia(this.attrs,t.attrs)&&ia(this.spec,t.spec)}destroy(){}}class aa{constructor(t,e,n){this.from=t,this.to=e,this.type=n}copy(t,e){return new aa(t,e,this.type)}eq(t,e=0){return this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to}map(t,e,n){return this.type.map(t,this,e,n)}static widget(t,e,n){return new aa(t,t,new ra(e,n))}static inline(t,e,n,i){return new aa(t,e,new oa(n,i))}static node(t,e,n,i){return new aa(t,e,new sa(n,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof oa}get widget(){return this.type instanceof ra}}const la=[],ca={};class ha{constructor(t,e){this.local=t.length?t:la,this.children=e.length?e:la}static create(t,e){return e.length?ma(e,t,0,ca):ua}find(t,e,n){let i=[];return this.findInner(null==t?0:t,null==e?1e9:e,i,0,n),i}findInner(t,e,n,i,r){for(let o=0;o<this.local.length;o++){let s=this.local[o];s.from<=e&&s.to>=t&&(!r||r(s.spec))&&n.push(s.copy(s.from+i,s.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<e&&this.children[o+1]>t){let s=this.children[o]+1;this.children[o+2].findInner(t-s,e-s,n,i+s,r)}}map(t,e,n){return this==ua||0==t.maps.length?this:this.mapInner(t,e,0,0,n||ca)}mapInner(t,e,n,i,r){let o;for(let s=0;s<this.local.length;s++){let a=this.local[s].map(t,n,i);a&&a.type.valid(e,a)?(o||(o=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?function(t,e,n,i,r,o,s){let a=t.slice();for(let t=0,e=o;t<n.maps.length;t++){let i=0;n.maps[t].forEach(((t,n,r,o)=>{let s=o-r-(n-t);for(let r=0;r<a.length;r+=3){let o=a[r+1];if(o<0||t>o+e-i)continue;let l=a[r]+e-i;n>=l?a[r+1]=t<=l?-2:-1:t>=e&&s&&(a[r]+=s,a[r+1]+=s)}i+=s})),e=n.maps[t].map(e,-1)}let l=!1;for(let e=0;e<a.length;e+=3)if(a[e+1]<0){if(-2==a[e+1]){l=!0,a[e+1]=-1;continue}let c=n.map(t[e]+o),h=c-r;if(h<0||h>=i.content.size){l=!0;continue}let u=n.map(t[e+1]+o,-1)-r,{index:d,offset:p}=i.content.findIndex(h),f=i.maybeChild(d);if(f&&p==h&&p+f.nodeSize==u){let i=a[e+2].mapInner(n,f,c+1,t[e]+o+1,s);i!=ua?(a[e]=h,a[e+1]=u,a[e+2]=i):(a[e+1]=-2,l=!0)}else l=!0}if(l){let l=function(t,e,n,i,r,o,s){function a(t,e){for(let o=0;o<t.local.length;o++){let a=t.local[o].map(i,r,e);a?n.push(a):s.onRemove&&s.onRemove(t.local[o].spec)}for(let n=0;n<t.children.length;n+=3)a(t.children[n+2],t.children[n]+e+1)}for(let n=0;n<t.length;n+=3)-1==t[n+1]&&a(t[n+2],e[n]+o+1);return n}(a,t,e,n,r,o,s),c=ma(l,i,0,s);e=c.local;for(let t=0;t<a.length;t+=3)a[t+1]<0&&(a.splice(t,3),t-=3);for(let t=0,e=0;t<c.children.length;t+=3){let n=c.children[t];for(;e<a.length&&a[e]<n;)e+=3;a.splice(e,0,c.children[t],c.children[t+1],c.children[t+2])}}return new ha(e.sort(ya),a)}(this.children,o||[],t,e,n,i,r):o?new ha(o.sort(ya),la):ua}add(t,e){return e.length?this==ua?ha.create(t,e):this.addInner(t,e,0):this}addInner(t,e,n){let i,r=0;t.forEach(((t,o)=>{let s,a=o+n;if(s=fa(e,t,a)){for(i||(i=this.children.slice());r<i.length&&i[r]<o;)r+=3;i[r]==o?i[r+2]=i[r+2].addInner(t,s,a+1):i.splice(r,0,o,o+t.nodeSize,ma(s,t,a+1,ca)),r+=3}}));let o=pa(r?ga(e):e,-n);for(let e=0;e<o.length;e++)o[e].type.valid(t,o[e])||o.splice(e--,1);return new ha(o.length?this.local.concat(o).sort(ya):this.local,i||this.children)}remove(t){return 0==t.length||this==ua?this:this.removeInner(t,0)}removeInner(t,e){let n=this.children,i=this.local;for(let i=0;i<n.length;i+=3){let r,o=n[i]+e,s=n[i+1]+e;for(let e,n=0;n<t.length;n++)(e=t[n])&&e.from>o&&e.to<s&&(t[n]=null,(r||(r=[])).push(e));if(!r)continue;n==this.children&&(n=this.children.slice());let a=n[i+2].removeInner(r,o+1);a!=ua?n[i+2]=a:(n.splice(i,3),i-=3)}if(i.length)for(let n,r=0;r<t.length;r++)if(n=t[r])for(let t=0;t<i.length;t++)i[t].eq(n,e)&&(i==this.local&&(i=this.local.slice()),i.splice(t--,1));return n==this.children&&i==this.local?this:i.length||n.length?new ha(i,n):ua}forChild(t,e){if(this==ua)return this;if(e.isLeaf)return ha.empty;let n,i;for(let e=0;e<this.children.length;e+=3)if(this.children[e]>=t){this.children[e]==t&&(n=this.children[e+2]);break}let r=t+1,o=r+e.content.size;for(let t=0;t<this.local.length;t++){let e=this.local[t];if(e.from<o&&e.to>r&&e.type instanceof oa){let t=Math.max(r,e.from)-r,n=Math.min(o,e.to)-r;t<n&&(i||(i=[])).push(e.copy(t,n))}}if(i){let t=new ha(i.sort(ya),la);return n?new da([t,n]):t}return n||ua}eq(t){if(this==t)return!0;if(!(t instanceof ha)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(let e=0;e<this.children.length;e+=3)if(this.children[e]!=t.children[e]||this.children[e+1]!=t.children[e+1]||!this.children[e+2].eq(t.children[e+2]))return!1;return!0}locals(t){return va(this.localsInner(t))}localsInner(t){if(this==ua)return la;if(t.inlineContent||!this.local.some(oa.is))return this.local;let e=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof oa||e.push(this.local[t]);return e}}ha.empty=new ha([],[]),ha.removeOverlap=va;const ua=ha.empty;class da{constructor(t){this.members=t}map(t,e){const n=this.members.map((n=>n.map(t,e,ca)));return da.from(n)}forChild(t,e){if(e.isLeaf)return ha.empty;let n=[];for(let i=0;i<this.members.length;i++){let r=this.members[i].forChild(t,e);r!=ua&&(r instanceof da?n=n.concat(r.members):n.push(r))}return da.from(n)}eq(t){if(!(t instanceof da)||t.members.length!=this.members.length)return!1;for(let e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0}locals(t){let e,n=!0;for(let i=0;i<this.members.length;i++){let r=this.members[i].localsInner(t);if(r.length)if(e){n&&(e=e.slice(),n=!1);for(let t=0;t<r.length;t++)e.push(r[t])}else e=r}return e?va(n?e:e.sort(ya)):la}static from(t){switch(t.length){case 0:return ua;case 1:return t[0];default:return new da(t.every((t=>t instanceof ha))?t:t.reduce(((t,e)=>t.concat(e instanceof ha?e:e.members)),[]))}}}function pa(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let r=t[i];n.push(new aa(r.from+e,r.to+e,r.type))}return n}function fa(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,r=null;for(let e,o=0;o<t.length;o++)(e=t[o])&&e.from>n&&e.to<i&&((r||(r=[])).push(e),t[o]=null);return r}function ga(t){let e=[];for(let n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function ma(t,e,n,i){let r=[],o=!1;e.forEach(((e,s)=>{let a=fa(t,e,s+n);if(a){o=!0;let t=ma(a,e,n+s+1,i);t!=ua&&r.push(s,s+e.nodeSize,t)}}));let s=pa(o?ga(t):t,-n).sort(ya);for(let t=0;t<s.length;t++)s[t].type.valid(e,s[t])||(i.onRemove&&i.onRemove(s[t].spec),s.splice(t--,1));return s.length||r.length?new ha(s,r):ua}function ya(t,e){return t.from-e.from||t.to-e.to}function va(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let r=n+1;r<e.length;r++){let o=e[r];if(o.from!=i.from){o.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,o.from),ba(e,r,i.copy(o.from,i.to)));break}o.to!=i.to&&(e==t&&(e=t.slice()),e[r]=o.copy(o.from,i.to),ba(e,r+1,o.copy(i.to,o.to)))}}return e}function ba(t,e,n){for(;e<t.length&&ya(n,t[e])>0;)e++;t.splice(e,0,n)}function wa(t){let e=[];return t.someProp("decorations",(n=>{let i=n(t.state);i&&i!=ua&&e.push(i)})),t.cursorWrapper&&e.push(ha.create(t.state.doc,[t.cursorWrapper.deco])),da.from(e)}const xa={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},_a=Hr&&Ur<=11;class Sa{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class Ca{constructor(t,e){this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new Sa,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver((t=>{for(let e=0;e<t.length;e++)this.queue.push(t[e]);Hr&&Ur<=11&&t.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),_a&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((()=>{this.flushingSoon=-1,this.flush()}),20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xa)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let e=0;e<t.length;e++)this.queue.push(t[e]);window.setTimeout((()=>this.flush()),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout((()=>this.suppressingSelectionUpdates=!1),50)}onSelectionChange(){if(ns(this.view)){if(this.suppressingSelectionUpdates)return Xo(this.view);if(Hr&&Ur<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Mr(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let e,n=new Set;for(let e=t.focusNode;e;e=Ar(e))n.add(e);for(let i=t.anchorNode;i;i=Ar(i))if(n.has(i)){e=i;break}let i=e&&this.view.docView.nearestDesc(e);return i&&i.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let e=this.pendingRecords();e.length&&(this.queue=[]);let n=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(n)&&ns(t)&&!this.ignoreSelectionChange(n),r=-1,o=-1,s=!1,a=[];if(t.editable)for(let t=0;t<e.length;t++){let n=this.registerMutation(e[t],a);n&&(r=r<0?n.from:Math.min(n.from,r),o=o<0?n.to:Math.max(n.to,o),n.typeOver&&(s=!0))}if(Vr&&a.length){let e=a.filter((t=>"BR"==t.nodeName));if(2==e.length){let[t,n]=e;t.parentNode&&t.parentNode.parentNode==n.parentNode?n.remove():t.remove()}else{let{focusNode:n}=this.currentSelection;for(let i of e){let e=i.parentNode;!e||"LI"!=e.nodeName||n&&Ta(t,n)==e||i.remove()}}}let l=null;r<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Pr(n)&&(l=qo(t))&&l.eq(ne.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Xo(t),this.currentSelection.set(n),t.scrollToSelection()):(r>-1||i)&&(r>-1&&(t.docView.markDirty(r,o),function(t){if(ka.has(t))return;if(ka.set(t,null),-1!==["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)){if(t.requiresGeckoHackNode=Vr,Aa)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Aa=!0}}(t)),this.handleDOMChange(r,o,s,a),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(n)||Xo(t),this.currentSelection.set(n))}registerMutation(t,e){if(e.indexOf(t.target)>-1)return null;let n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){for(let n=0;n<t.addedNodes.length;n++){let i=t.addedNodes[n];e.push(i),3==i.nodeType&&(this.lastChangedTextNode=i)}if(n.contentDOM&&n.contentDOM!=n.dom&&!n.contentDOM.contains(t.target))return{from:n.posBefore,to:n.posAfter};let i=t.previousSibling,r=t.nextSibling;if(Hr&&Ur<=11&&t.addedNodes.length)for(let e=0;e<t.addedNodes.length;e++){let{previousSibling:n,nextSibling:o}=t.addedNodes[e];(!n||Array.prototype.indexOf.call(t.addedNodes,n)<0)&&(i=n),(!o||Array.prototype.indexOf.call(t.addedNodes,o)<0)&&(r=o)}let o=i&&i.parentNode==t.target?kr(i)+1:0,s=n.localPosFromDOM(t.target,o,-1),a=r&&r.parentNode==t.target?kr(r):t.target.childNodes.length;return{from:s,to:n.localPosFromDOM(t.target,a,1)}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:(this.lastChangedTextNode=t.target,{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let ka=new WeakMap,Aa=!1;function Ea(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,o=e.endOffset,s=t.domAtPos(t.state.selection.anchor);return Mr(s.node,s.offset,r,o)&&([n,i,r,o]=[r,o,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:o}}function Ta(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let e=t.docView.nearestDesc(n,!0);if(e&&e.node.isBlock)return n}return null}function Ma(t){let e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(Xr&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}if(t.parentNode.lastChild==t||Xr&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Oa=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Ia(t,e,n,i,r){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let e=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,n=qo(t,e);if(n&&!t.state.selection.eq(n)){if(qr&&Zr&&13===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",(e=>e(t,Rr(13,"Enter")))))return;let i=t.state.tr.setSelection(n);"pointer"==e?i.setMeta("pointer",!0):"key"==e&&i.scrollIntoView(),o&&i.setMeta("composition",o),t.dispatch(i)}return}let s=t.state.doc.resolve(e),l=s.sharedDepth(n);e=s.before(l+1),n=t.state.doc.resolve(n).after(l+1);let c,h,u=t.state.selection,d=function(t,e,n){let i,{node:r,fromOffset:o,toOffset:s,from:a,to:l}=t.docView.parseRange(e,n),c=t.domSelectionRange(),h=c.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(i=[{node:h,offset:c.anchorOffset}],Pr(c)||i.push({node:c.focusNode,offset:c.focusOffset})),qr&&8===t.input.lastKeyCode)for(let t=s;t>o;t--){let e=r.childNodes[t-1],n=e.pmViewDesc;if("BR"==e.nodeName&&!n){s=t;break}if(!n||n.size)break}let u=t.state.doc,d=t.someProp("domParser")||Z.fromSchema(t.state.schema),p=u.resolve(a),f=null,g=d.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:o,to:s,preserveWhitespace:"pre"!=p.parent.type.whitespace||"full",findPositions:i,ruleFromNode:Ma,context:p});if(i&&null!=i[0].pos){let t=i[0].pos,e=i[1]&&i[1].pos;null==e&&(e=t),f={anchor:t+a,head:e+a}}return{doc:g,sel:f,from:a,to:l}}(t,e,n),p=t.state.doc,f=p.slice(d.from,d.to);8===t.input.lastKeyCode&&Date.now()-100<t.input.lastKeyCodeTime?(c=t.state.selection.to,h="end"):(c=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let g=function(t,e,n,i,r){let o=t.findDiffStart(e,n);if(null==o)return null;let{a:s,b:a}=t.findDiffEnd(e,n+t.size,n+e.size);if("end"==r){i-=s+Math.max(0,o-Math.min(s,a))-o}if(s<o&&t.size<e.size){let t=i<=o&&i>=s?o-i:0;o-=t,o&&o<e.size&&Pa(e.textBetween(o-1,o+1))&&(o+=t?1:-1),a=o+(a-s),s=o}else if(a<o){let e=i<=o&&i>=a?o-i:0;o-=e,o&&o<t.size&&Pa(t.textBetween(o-1,o+1))&&(o+=e?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}(f.content,d.doc.content,d.from,c,h);if((Gr&&t.input.lastIOSEnter>Date.now()-225||Zr)&&r.some((t=>1==t.nodeType&&!Oa.test(t.nodeName)))&&(!g||g.endA>=g.endB)&&t.someProp("handleKeyDown",(e=>e(t,Rr(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(!g){if(!(i&&u instanceof se&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){let e=Da(t,t.state.doc,d.sel);if(e&&!e.eq(t.state.selection)){let n=t.state.tr.setSelection(e);o&&n.setMeta("composition",o),t.dispatch(n)}}return}g={start:u.from,endA:u.to,endB:u.to}}t.input.domChangeCount++,t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof se&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2&&t.state.selection.from>=d.from?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&t.state.selection.to<=d.to&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Hr&&Ur<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>d.from&&"  "==d.doc.textBetween(g.start-d.from-1,g.start-d.from+1)&&(g.start--,g.endA--,g.endB--);let m,y=d.doc.resolveNoCache(g.start-d.from),v=d.doc.resolveNoCache(g.endB-d.from),b=p.resolve(g.start),w=y.sameParent(v)&&y.parent.inlineContent&&b.end()>=g.endA;if((Gr&&t.input.lastIOSEnter>Date.now()-225&&(!w||r.some((t=>"DIV"==t.nodeName||"P"==t.nodeName)))||!w&&y.pos<d.doc.content.size&&!y.sameParent(v)&&(m=ne.findFrom(d.doc.resolve(y.pos+1),1,!0))&&m.head==v.pos)&&t.someProp("handleKeyDown",(e=>e(t,Rr(13,"Enter")))))return void(t.input.lastIOSEnter=0);if(t.state.selection.anchor>g.start&&function(t,e,n,i,r){if(n-e<=r.pos-i.pos||Fa(i,!0,!1)<r.pos)return!1;let o=t.resolve(e);if(!i.parent.isTextblock){let t=o.nodeAfter;return null!=t&&n==e+t.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=t.resolve(Fa(o,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Fa(s,!0,!1)<n)&&i.parent.content.cut(i.parentOffset).eq(s.parent.content)}(p,g.start,g.endA,y,v)&&t.someProp("handleKeyDown",(e=>e(t,Rr(8,"Backspace")))))return void(Zr&&qr&&t.domObserver.suppressSelectionUpdates());qr&&Zr&&g.endB==g.start&&(t.input.lastAndroidDelete=Date.now()),Zr&&!w&&y.start()!=v.start()&&0==v.parentOffset&&y.depth==v.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==g.endA&&(g.endB-=2,v=d.doc.resolveNoCache(g.endB-d.from),setTimeout((()=>{t.someProp("handleKeyDown",(function(e){return e(t,Rr(13,"Enter"))}))}),20));let x,_,S,C=g.start,k=g.endA;if(w)if(y.pos==v.pos)Hr&&Ur<=11&&0==y.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((()=>Xo(t)),20)),x=t.state.tr.delete(C,k),_=p.resolve(g.start).marksAcross(p.resolve(g.endA));else if(g.endA==g.endB&&(S=function(t,e){let n,i,r,o=t.firstChild.marks,s=e.firstChild.marks,l=o,c=s;for(let t=0;t<s.length;t++)l=s[t].removeFromSet(l);for(let t=0;t<o.length;t++)c=o[t].removeFromSet(c);if(1==l.length&&0==c.length)i=l[0],n="add",r=t=>t.mark(i.addToSet(t.marks));else{if(0!=l.length||1!=c.length)return null;i=c[0],n="remove",r=t=>t.mark(i.removeFromSet(t.marks))}let h=[];for(let t=0;t<e.childCount;t++)h.push(r(e.child(t)));if(a.from(h).eq(t))return{mark:i,type:n}}(y.parent.content.cut(y.parentOffset,v.parentOffset),b.parent.content.cut(b.parentOffset,g.endA-b.start()))))x=t.state.tr,"add"==S.type?x.addMark(C,k,S.mark):x.removeMark(C,k,S.mark);else if(y.parent.child(y.index()).isText&&y.index()==v.index()-(v.textOffset?0:1)){let e=y.parent.textBetween(y.parentOffset,v.parentOffset);if(t.someProp("handleTextInput",(n=>n(t,C,k,e))))return;x=t.state.tr.insertText(e,C,k)}if(x||(x=t.state.tr.replace(C,k,d.doc.slice(g.start-d.from,g.endB-d.from))),d.sel){let e=Da(t,x.doc,d.sel);e&&!(qr&&Zr&&t.composing&&e.empty&&(g.start!=g.endB||t.input.lastAndroidDelete<Date.now()-100)&&(e.head==C||e.head==x.mapping.map(k)-1)||Hr&&e.empty&&e.head==C)&&x.setSelection(e)}_&&x.ensureMarks(_),o&&x.setMeta("composition",o),t.dispatch(x.scrollIntoView())}function Da(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:es(t,e.resolve(n.anchor),e.resolve(n.head))}function Fa(t,e,n){let i=t.depth,r=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,r++,e=!1;if(n){let e=t.node(i).maybeChild(t.indexAfter(i));for(;e&&!e.isLeaf;)e=e.firstChild,r++}return r}function Pa(t){if(2!=t.length)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}const Ra=vs,La=bs,Na=Js;class Ba{constructor(t,e){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Ds,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=e,this.state=e.state,this.directPlugins=e.plugins||[],this.directPlugins.forEach(Ua),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):"function"==typeof t?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=$a(this),za(this),this.nodeViews=Ha(this),this.docView=Oo(this.state.doc,ja(this),wa(this),this.dom,this),this.domObserver=new Ca(this,((t,e,n,i)=>Ia(this,t,e,n,i))),this.domObserver.start(),function(t){for(let e in Ms){let n=Ms[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=e=>{!Ls(t,e)||Rs(t,e)||!t.editable&&e.type in Os||n(t,e)},Is[e]?{passive:!0}:void 0)}Xr&&t.dom.addEventListener("input",(()=>null)),Ps(t)}(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let e in t)this._props[e]=t[e];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Ps(this);let e=this._props;this._props=t,t.plugins&&(t.plugins.forEach(Ua),this.directPlugins=t.plugins),this.updateStateInner(t.state,e)}setProps(t){let e={};for(let t in this._props)e[t]=this._props[t];e.state=this.state;for(let n in t)e[n]=t[n];this.update(e)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,e){var n;let i=this.state,r=!1,o=!1;t.storedMarks&&this.composing&&(Gs(this),o=!0),this.state=t;let s=i.plugins!=t.plugins||this._props.plugins!=e.plugins;if(s||this._props.plugins!=e.plugins||this._props.nodeViews!=e.nodeViews){let t=Ha(this);(function(t,e){let n=0,i=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let t in e)i++;return n!=i})(t,this.nodeViews)&&(this.nodeViews=t,r=!0)}(s||e.handleDOMEvents!=this._props.handleDOMEvents)&&Ps(this),this.editable=$a(this),za(this);let a=wa(this),l=ja(this),c=i.plugins==t.plugins||i.doc.eq(t.doc)?t.scrollToSelection>i.scrollToSelection?"to selection":"preserve":"reset",h=r||!this.docView.matchesNode(t.doc,l,a);!h&&t.selection.eq(i.selection)||(o=!0);let u="preserve"==c&&o&&null==this.dom.style.overflowAnchor&&function(t){let e,n,i=t.dom.getBoundingClientRect(),r=Math.max(0,i.top);for(let o=(i.left+i.right)/2,s=r+1;s<Math.min(innerHeight,i.bottom);s+=5){let i=t.root.elementFromPoint(o,s);if(!i||i==t.dom||!t.dom.contains(i))continue;let a=i.getBoundingClientRect();if(a.top>=r-20){e=i,n=a.top;break}}return{refDOM:e,refTop:n,stack:oo(t.dom)}}(this);if(o){this.domObserver.stop();let e=h&&(Hr||qr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&function(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}(i.selection,t.selection);if(h){let n=qr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Ys(this)),!r&&this.docView.update(t.doc,l,a,this)||(this.docView.updateOuterDeco(l),this.docView.destroy(),this.docView=Oo(t.doc,l,a,this.dom,this)),n&&!this.trackWrites&&(e=!0)}e||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&function(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Mr(e.node,e.offset,n.anchorNode,n.anchorOffset)}(this))?Xo(this,e):(Qo(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),(null===(n=this.dragging)||void 0===n?void 0:n.node)&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),"reset"==c?this.dom.scrollTop=0:"to selection"==c?this.scrollToSelection():u&&function({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;so(n,0==i?0:i-e)}(u)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(this.someProp("handleScrollToSelection",(t=>t(this))));else if(this.state.selection instanceof le){let e=this.docView.domAfterPos(this.state.selection.from);1==e.nodeType&&ro(this,e.getBoundingClientRect(),t)}else ro(this,this.coordsAtPos(this.state.selection.head,1),t)}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(t&&t.plugins==this.state.plugins&&this.directPlugins==this.prevDirectPlugins)for(let e=0;e<this.pluginViews.length;e++){let n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let e=this.directPlugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let e=this.state.plugins[t];e.spec.view&&this.pluginViews.push(e.spec.view(this))}}}updateDraggedNode(t,e){let n=t.node,i=-1;if(this.state.doc.nodeAt(n.from)==n.node)i=n.from;else{let t=n.from+(this.state.doc.content.size-e.doc.content.size);(t>0&&this.state.doc.nodeAt(t))==n.node&&(i=t)}this.dragging=new ea(t.slice,t.move,i<0?void 0:le.create(this.state.doc,i))}someProp(t,e){let n,i=this._props&&this._props[t];if(null!=i&&(n=e?e(i):i))return n;for(let i=0;i<this.directPlugins.length;i++){let r=this.directPlugins[i].props[t];if(null!=r&&(n=e?e(r):r))return n}let r=this.state.plugins;if(r)for(let i=0;i<r.length;i++){let o=r[i].props[t];if(null!=o&&(n=e?e(o):o))return n}}hasFocus(){if(Hr){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if("false"==t.contentEditable)return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&function(t){if(t.setActive)return t.setActive();if(ao)return t.focus(ao);let e=oo(t);t.focus(null==ao?{get preventScroll(){return ao={preventScroll:!0},!0}}:void 0),ao||(ao=!1,so(e,0))}(this.dom),Xo(this),this.domObserver.start()}get root(){let t=this._root;if(null==t)for(let t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t;return t||document}updateRoot(){this._root=null}posAtCoords(t){return uo(this,t)}coordsAtPos(t,e=1){return mo(this,t,e)}domAtPos(t,e=0){return this.docView.domFromPos(t,e)}nodeDOM(t){let e=this.docView.descAt(t);return e?e.nodeDOM:null}posAtDOM(t,e,n=-1){let i=this.docView.posFromDOM(t,e,n);if(null==i)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,e){return Co(this,e||this.state,t)}pasteHTML(t,e){return Qs(this,"",t,!1,e||new ClipboardEvent("paste"))}pasteText(t,e){return Qs(this,t,null,!0,e||new ClipboardEvent("paste"))}destroy(){this.docView&&(!function(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],wa(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,Er=null)}get isDestroyed(){return null==this.docView}dispatchEvent(t){return function(t,e){Rs(t,e)||!Ms[e.type]||!t.editable&&e.type in Os||Ms[e.type](t,e)}(this,t)}dispatch(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))}domSelectionRange(){let t=this.domSelection();return Xr&&11===this.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t,e){if(e.getComposedRanges){let n=e.getComposedRanges(t.root)[0];if(n)return Ea(t,n)}let n;function i(t){t.preventDefault(),t.stopImmediatePropagation(),n=t.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?Ea(t,n):null}(this,t)||t}domSelection(){return this.root.getSelection()}}function ja(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(n=>{if("function"==typeof n&&(n=n(t.state)),n)for(let t in n)"class"==t?e.class+=" "+n[t]:"style"==t?e.style=(e.style?e.style+";":"")+n[t]:e[t]||"contenteditable"==t||"nodeName"==t||(e[t]=String(n[t]))})),e.translate||(e.translate="no"),[aa.node(0,t.state.doc.content.size,e)]}function za(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:aa.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function $a(t){return!t.someProp("editable",(e=>!1===e(t.state)))}function Ha(t){let e=Object.create(null);function n(t){for(let n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Ua(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}for(var Va={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Wa={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qa="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Ka="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Xa=0;Xa<10;Xa++)Va[48+Xa]=Va[96+Xa]=String(Xa);for(Xa=1;Xa<=24;Xa++)Va[Xa+111]="F"+Xa;for(Xa=65;Xa<=90;Xa++)Va[Xa]=String.fromCharCode(Xa+32),Wa[Xa]=String.fromCharCode(Xa);for(var Ga in Va)Wa.hasOwnProperty(Ga)||(Wa[Ga]=Va[Ga]);const Ya="undefined"!=typeof navigator&&/Mac|iP(hone|[oa]d)/.test(navigator.platform);function Ja(t){let e,n,i,r,o=t.split(/-(?!$)/),s=o[o.length-1];"Space"==s&&(s=" ");for(let t=0;t<o.length-1;t++){let s=o[t];if(/^(cmd|meta|m)$/i.test(s))r=!0;else if(/^a(lt)?$/i.test(s))e=!0;else if(/^(c|ctrl|control)$/i.test(s))n=!0;else if(/^s(hift)?$/i.test(s))i=!0;else{if(!/^mod$/i.test(s))throw new Error("Unrecognized modifier name: "+s);Ya?r=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),r&&(s="Meta-"+s),i&&(s="Shift-"+s),s}function Za(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Qa(t){return new xe({props:{handleKeyDown:tl(t)}})}function tl(t){let e=function(t){let e=Object.create(null);for(let n in t)e[Ja(n)]=t[n];return e}(t);return function(t,n){let i,r=function(t){var e=!(qa&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Ka&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?Wa:Va)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(n),o=e[Za(r,n)];if(o&&o(t.state,t.dispatch,t))return!0;if(1==r.length&&" "!=r){if(n.shiftKey){let i=e[Za(r,n,!1)];if(i&&i(t.state,t.dispatch,t))return!0}if((n.shiftKey||n.altKey||n.metaKey||r.charCodeAt(0)>127)&&(i=Va[n.keyCode])&&i!=r){let r=e[Za(i,n)];if(r&&r(t.state,t.dispatch,t))return!0}}return!1}}var el,nl;if("undefined"!=typeof WeakMap){let t=new WeakMap;el=e=>t.get(e),nl=(e,n)=>(t.set(e,n),n)}else{const t=[],e=10;let n=0;el=e=>{for(let n=0;n<t.length;n+=2)if(t[n]==e)return t[n+1]},nl=(i,r)=>(n==e&&(n=0),t[n++]=i,t[n++]=r)}var il=class{constructor(t,e,n,i){this.width=t,this.height=e,this.map=n,this.problems=i}findCell(t){for(let e=0;e<this.map.length;e++){const n=this.map[e];if(n!=t)continue;const i=e%this.width,r=e/this.width|0;let o=i+1,s=r+1;for(let t=1;o<this.width&&this.map[e+t]==n;t++)o++;for(let t=1;s<this.height&&this.map[e+this.width*t]==n;t++)s++;return{left:i,top:r,right:o,bottom:s}}throw new RangeError(`No cell with offset ${t} found`)}colCount(t){for(let e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError(`No cell with offset ${t} found`)}nextCell(t,e,n){const{left:i,right:r,top:o,bottom:s}=this.findCell(t);return"horiz"==e?(n<0?0==i:r==this.width)?null:this.map[o*this.width+(n<0?i-1:r)]:(n<0?0==o:s==this.height)?null:this.map[i+this.width*(n<0?o-1:s)]}rectBetween(t,e){const{left:n,right:i,top:r,bottom:o}=this.findCell(t),{left:s,right:a,top:l,bottom:c}=this.findCell(e);return{left:Math.min(n,s),top:Math.min(r,l),right:Math.max(i,a),bottom:Math.max(o,c)}}cellsInRect(t){const e=[],n={};for(let i=t.top;i<t.bottom;i++)for(let r=t.left;r<t.right;r++){const o=i*this.width+r,s=this.map[o];n[s]||(n[s]=!0,r==t.left&&r&&this.map[o-1]==s||i==t.top&&i&&this.map[o-this.width]==s||e.push(s))}return e}positionAt(t,e,n){for(let i=0,r=0;;i++){const o=r+n.child(i).nodeSize;if(i==t){let n=e+t*this.width;const i=(t+1)*this.width;for(;n<i&&this.map[n]<r;)n++;return n==i?o-1:this.map[n]}r=o}}static get(t){return el(t)||nl(t,function(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);const e=function(t){let e=-1,n=!1;for(let i=0;i<t.childCount;i++){const r=t.child(i);let o=0;if(n)for(let e=0;e<i;e++){const n=t.child(e);for(let t=0;t<n.childCount;t++){const r=n.child(t);e+r.attrs.rowspan>i&&(o+=r.attrs.colspan)}}for(let t=0;t<r.childCount;t++){const e=r.child(t);o+=e.attrs.colspan,e.attrs.rowspan>1&&(n=!0)}-1==e?e=o:e!=o&&(e=Math.max(e,o))}return e}(t),n=t.childCount,i=[];let r=0,o=null;const s=[];for(let t=0,r=e*n;t<r;t++)i[t]=0;for(let a=0,l=0;a<n;a++){const c=t.child(a);l++;for(let t=0;;t++){for(;r<i.length&&0!=i[r];)r++;if(t==c.childCount)break;const h=c.child(t),{colspan:u,rowspan:d,colwidth:p}=h.attrs;for(let t=0;t<d;t++){if(t+a>=n){(o||(o=[])).push({type:"overlong_rowspan",pos:l,n:d-t});break}const c=r+t*e;for(let t=0;t<u;t++){0==i[c+t]?i[c+t]=l:(o||(o=[])).push({type:"collision",row:a,pos:l,n:u-t});const n=p&&p[t];if(n){const i=(c+t)%e*2,r=s[i];null==r||r!=n&&1==s[i+1]?(s[i]=n,s[i+1]=1):r==n&&s[i+1]++}}}r+=u,l+=h.nodeSize}const h=(a+1)*e;let u=0;for(;r<h;)0==i[r++]&&u++;u&&(o||(o=[])).push({type:"missing",row:a,n:u}),l++}const a=new il(e,n,i,o);let l=!1;for(let t=0;!l&&t<s.length;t+=2)null!=s[t]&&s[t+1]<n&&(l=!0);l&&function(t,e,n){t.problems||(t.problems=[]);const i={};for(let r=0;r<t.map.length;r++){const o=t.map[r];if(i[o])continue;i[o]=!0;const s=n.nodeAt(o);if(!s)throw new RangeError(`No cell with offset ${o} found`);let a=null;const l=s.attrs;for(let n=0;n<l.colspan;n++){const i=e[2*((r+n)%t.width)];null==i||l.colwidth&&l.colwidth[n]==i||((a||(a=rl(l)))[n]=i)}a&&t.problems.unshift({type:"colwidth mismatch",pos:o,colwidth:a})}}(a,s,t);return a}(t))}};function rl(t){if(t.colwidth)return t.colwidth.slice();const e=[];for(let n=0;n<t.colspan;n++)e.push(0);return e}function ol(t,e){if("string"==typeof t)return{};const n=t.getAttribute("data-colwidth"),i=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((t=>Number(t))):null,r=Number(t.getAttribute("colspan")||1),o={colspan:r,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:i&&i.length==r?i:null};for(const n in e){const i=e[n].getFromDOM,r=i&&i(t);null!=r&&(o[n]=r)}return o}function sl(t,e){const n={};1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(","));for(const i in e){const r=e[i].setDOMAttr;r&&r(t.attrs[i],n)}return n}function al(t){const e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(const t in e)n[t]={default:e[t].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:()=>["table",["tbody",0]]},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:()=>["tr",0]},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:t=>ol(t,e)}],toDOM:t=>["td",sl(t,e),0]},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:t=>ol(t,e)}],toDOM:t=>["th",sl(t,e),0]}}}function ll(t){let e=t.cached.tableNodeTypes;if(!e){e=t.cached.tableNodeTypes={};for(const n in t.nodes){const i=t.nodes[n],r=i.spec.tableRole;r&&(e[r]=i)}}return e}var cl=new Ce("selectingCells");function hl(t){for(let e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function ul(t){const e=t.selection.$head;for(let t=e.depth;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return!0;return!1}function dl(t){const e=t.selection;if("$anchorCell"in e&&e.$anchorCell)return e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell;if("node"in e&&e.node&&"cell"==e.node.type.spec.tableRole)return e.$anchor;const n=hl(e.$head)||function(t){for(let e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){const i=e.type.spec.tableRole;if("cell"==i||"header_cell"==i)return t.doc.resolve(n)}for(let e=t.nodeBefore,n=t.pos;e;e=e.lastChild,n--){const i=e.type.spec.tableRole;if("cell"==i||"header_cell"==i)return t.doc.resolve(n-e.nodeSize)}}(e.$head);if(n)return n;throw new RangeError(`No cell found around position ${e.head}`)}function pl(t){return"row"==t.parent.type.spec.tableRole&&!!t.nodeAfter}function fl(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function gl(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function ml(t){return il.get(t.node(-1)).findCell(t.pos-t.start(-1))}function yl(t){return il.get(t.node(-1)).colCount(t.pos-t.start(-1))}function vl(t,e,n){const i=t.node(-1),r=il.get(i),o=t.start(-1),s=r.nextCell(t.pos-o,e,n);return null==s?null:t.node(0).resolve(o+s)}function bl(t,e,n=1){const i={...t,colspan:t.colspan-n};return i.colwidth&&(i.colwidth=i.colwidth.slice(),i.colwidth.splice(e,n),i.colwidth.some((t=>t>0))||(i.colwidth=null)),i}function wl(t,e,n=1){const i={...t,colspan:t.colspan+n};if(i.colwidth){i.colwidth=i.colwidth.slice();for(let t=0;t<n;t++)i.colwidth.splice(e,0,0)}return i}function xl(t,e,n){const i=ll(e.type.schema).header_cell;for(let r=0;r<t.height;r++)if(e.nodeAt(t.map[n+r*t.width]).type!=i)return!1;return!0}var _l=class t extends ne{constructor(t,e=t){const n=t.node(-1),i=il.get(n),r=t.start(-1),o=i.rectBetween(t.pos-r,e.pos-r),s=t.node(0),a=i.cellsInRect(o).filter((t=>t!=e.pos-r));a.unshift(e.pos-r);const l=a.map((t=>{const e=n.nodeAt(t);if(!e)throw RangeError(`No cell with offset ${t} found`);const i=r+t+1;return new ie(s.resolve(i),s.resolve(i+e.content.size))}));super(l[0].$from,l[0].$to,l),this.$anchorCell=t,this.$headCell=e}map(e,n){const i=e.resolve(n.map(this.$anchorCell.pos)),r=e.resolve(n.map(this.$headCell.pos));if(pl(i)&&pl(r)&&gl(i,r)){const e=this.$anchorCell.node(-1)!=i.node(-1);return e&&this.isRowSelection()?t.rowSelection(i,r):e&&this.isColSelection()?t.colSelection(i,r):new t(i,r)}return se.between(i,r)}content(){const t=this.$anchorCell.node(-1),e=il.get(t),n=this.$anchorCell.start(-1),i=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),r={},o=[];for(let n=i.top;n<i.bottom;n++){const s=[];for(let o=n*e.width+i.left,a=i.left;a<i.right;a++,o++){const n=e.map[o];if(r[n])continue;r[n]=!0;const a=e.findCell(n);let l=t.nodeAt(n);if(!l)throw RangeError(`No cell with offset ${n} found`);const c=i.left-a.left,h=a.right-i.right;if(c>0||h>0){let t=l.attrs;if(c>0&&(t=bl(t,0,c)),h>0&&(t=bl(t,t.colspan-h,h)),a.left<i.left){if(l=l.type.createAndFill(t),!l)throw RangeError(`Could not create cell with attrs ${JSON.stringify(t)}`)}else l=l.type.create(t,l.content)}if(a.top<i.top||a.bottom>i.bottom){const t={...l.attrs,rowspan:Math.min(a.bottom,i.bottom)-Math.max(a.top,i.top)};l=a.top<i.top?l.type.createAndFill(t):l.type.create(t,l.content)}s.push(l)}o.push(t.child(n).copy(a.from(s)))}const s=this.isColSelection()&&this.isRowSelection()?t:o;return new p(a.from(s),1,1)}replace(t,e=p.empty){const n=t.steps.length,i=this.ranges;for(let r=0;r<i.length;r++){const{$from:o,$to:s}=i[r],a=t.mapping.slice(n);t.replace(a.map(o.pos),a.map(s.pos),r?p.empty:e)}const r=ne.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);r&&t.setSelection(r)}replaceWith(t,e){this.replace(t,new p(a.from(e),0,0))}forEachCell(t){const e=this.$anchorCell.node(-1),n=il.get(e),i=this.$anchorCell.start(-1),r=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-i,this.$headCell.pos-i));for(let n=0;n<r.length;n++)t(e.nodeAt(r[n]),i+r[n])}isColSelection(){const t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;const n=t+this.$anchorCell.nodeAfter.attrs.rowspan,i=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,i)==this.$headCell.node(-1).childCount}static colSelection(e,n=e){const i=e.node(-1),r=il.get(i),o=e.start(-1),s=r.findCell(e.pos-o),a=r.findCell(n.pos-o),l=e.node(0);return s.top<=a.top?(s.top>0&&(e=l.resolve(o+r.map[s.left])),a.bottom<r.height&&(n=l.resolve(o+r.map[r.width*(r.height-1)+a.right-1]))):(a.top>0&&(n=l.resolve(o+r.map[a.left])),s.bottom<r.height&&(e=l.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))),new t(e,n)}isRowSelection(){const t=this.$anchorCell.node(-1),e=il.get(t),n=this.$anchorCell.start(-1),i=e.colCount(this.$anchorCell.pos-n),r=e.colCount(this.$headCell.pos-n);if(Math.min(i,r)>0)return!1;const o=i+this.$anchorCell.nodeAfter.attrs.colspan,s=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,s)==e.width}eq(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos}static rowSelection(e,n=e){const i=e.node(-1),r=il.get(i),o=e.start(-1),s=r.findCell(e.pos-o),a=r.findCell(n.pos-o),l=e.node(0);return s.left<=a.left?(s.left>0&&(e=l.resolve(o+r.map[s.top*r.width])),a.right<r.width&&(n=l.resolve(o+r.map[r.width*(a.top+1)-1]))):(a.left>0&&(n=l.resolve(o+r.map[a.top*r.width])),s.right<r.width&&(e=l.resolve(o+r.map[r.width*(s.top+1)-1]))),new t(e,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(e,n){return new t(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){return new t(e.resolve(n),e.resolve(i))}getBookmark(){return new Sl(this.$anchorCell.pos,this.$headCell.pos)}};_l.prototype.visible=!1,ne.jsonID("cell",_l);var Sl=class t{constructor(t,e){this.anchor=t,this.head=e}map(e){return new t(e.map(this.anchor),e.map(this.head))}resolve(t){const e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&gl(e,n)?new _l(e,n):ne.near(n,1)}};function Cl(t){if(!(t.selection instanceof _l))return null;const e=[];return t.selection.forEachCell(((t,n)=>{e.push(aa.node(n,n+t.nodeSize,{class:"selectedCell"}))})),ha.create(t.doc,e)}var kl=new Ce("fix-tables");function Al(t,e,n,i){const r=t.childCount,o=e.childCount;t:for(let s=0,a=0;s<o;s++){const o=e.child(s);for(let e=a,i=Math.min(r,s+3);e<i;e++)if(t.child(e)==o){a=e+1,n+=o.nodeSize;continue t}i(o,n),a<r&&t.child(a).sameMarkup(o)?Al(t.child(a),o,n+1,i):o.nodesBetween(0,o.content.size,i,n+1),n+=o.nodeSize}}function El(t,e){let n;const i=(e,i)=>{"table"==e.type.spec.tableRole&&(n=function(t,e,n,i){const r=il.get(e);if(!r.problems)return i;i||(i=t.tr);const o=[];for(let t=0;t<r.height;t++)o.push(0);for(let t=0;t<r.problems.length;t++){const s=r.problems[t];if("collision"==s.type){const t=e.nodeAt(s.pos);if(!t)continue;const r=t.attrs;for(let t=0;t<r.rowspan;t++)o[s.row+t]+=s.n;i.setNodeMarkup(i.mapping.map(n+1+s.pos),null,bl(r,r.colspan-s.n,s.n))}else if("missing"==s.type)o[s.row]+=s.n;else if("overlong_rowspan"==s.type){const t=e.nodeAt(s.pos);if(!t)continue;i.setNodeMarkup(i.mapping.map(n+1+s.pos),null,{...t.attrs,rowspan:t.attrs.rowspan-s.n})}else if("colwidth mismatch"==s.type){const t=e.nodeAt(s.pos);if(!t)continue;i.setNodeMarkup(i.mapping.map(n+1+s.pos),null,{...t.attrs,colwidth:s.colwidth})}}let s,a;for(let t=0;t<o.length;t++)o[t]&&(null==s&&(s=t),a=t);for(let l=0,c=n+1;l<r.height;l++){const n=e.child(l),r=c+n.nodeSize,h=o[l];if(h>0){let e="cell";n.firstChild&&(e=n.firstChild.type.spec.tableRole);const o=[];for(let n=0;n<h;n++){const n=ll(t.schema)[e].createAndFill();n&&o.push(n)}const u=0!=l&&s!=l-1||a!=l?r-1:c+1;i.insert(i.mapping.map(u),o)}c=r}return i.setMeta(kl,{fixTables:!0})}(t,e,i,n))};return e?e.doc!=t.doc&&Al(e.doc,t.doc,0,i):t.doc.descendants(i),n}function Tl(t){if(!t.size)return null;let{content:e,openStart:n,openEnd:i}=t;for(;1==e.childCount&&(n>0&&i>0||"table"==e.child(0).type.spec.tableRole);)n--,i--,e=e.child(0).content;const r=e.child(0),o=r.type.spec.tableRole,s=r.type.schema,l=[];if("row"==o)for(let t=0;t<e.childCount;t++){let r=e.child(t).content;const o=t?0:Math.max(0,n-1),a=t<e.childCount-1?0:Math.max(0,i-1);(o||a)&&(r=Ml(ll(s).row,new p(r,o,a)).content),l.push(r)}else{if("cell"!=o&&"header_cell"!=o)return null;l.push(n||i?Ml(ll(s).row,new p(e,n,i)).content:e)}return function(t,e){const n=[];for(let t=0;t<e.length;t++){const i=e[t];for(let e=i.childCount-1;e>=0;e--){const{rowspan:r,colspan:o}=i.child(e).attrs;for(let e=t;e<t+r;e++)n[e]=(n[e]||0)+o}}let i=0;for(let t=0;t<n.length;t++)i=Math.max(i,n[t]);for(let r=0;r<n.length;r++)if(r>=e.length&&e.push(a.empty),n[r]<i){const o=ll(t).cell.createAndFill(),s=[];for(let t=n[r];t<i;t++)s.push(o);e[r]=e[r].append(a.from(s))}return{height:e.length,width:i,rows:e}}(s,l)}function Ml(t,e){const n=t.createAndFill();return new te(n).replace(0,n.content.size,e).doc}function Ol(t,e,n,i,r,o,s,a){if(0==s||s==e.height)return!1;let l=!1;for(let c=r;c<o;c++){const r=s*e.width+c,o=e.map[r];if(e.map[r-e.width]==o){l=!0;const r=n.nodeAt(o),{top:h,left:u}=e.findCell(o);t.setNodeMarkup(t.mapping.slice(a).map(o+i),null,{...r.attrs,rowspan:s-h}),t.insert(t.mapping.slice(a).map(e.positionAt(s,u,n)),r.type.createAndFill({...r.attrs,rowspan:h+r.attrs.rowspan-s})),c+=r.attrs.colspan-1}}return l}function Il(t,e,n,i,r,o,s,a){if(0==s||s==e.width)return!1;let l=!1;for(let c=r;c<o;c++){const r=c*e.width+s,o=e.map[r];if(e.map[r-1]==o){l=!0;const r=n.nodeAt(o),h=e.colCount(o),u=t.mapping.slice(a).map(o+i);t.setNodeMarkup(u,null,bl(r.attrs,s-h,r.attrs.colspan-(s-h))),t.insert(u+r.nodeSize,r.type.createAndFill(bl(r.attrs,0,s-h))),c+=r.attrs.rowspan-1}}return l}function Dl(t,e,n,i,r){let o=n?t.doc.nodeAt(n-1):t.doc;if(!o)throw new Error("No table found");let s=il.get(o);const{top:l,left:c}=i,h=c+r.width,u=l+r.height,d=t.tr;let f=0;function g(){if(o=n?d.doc.nodeAt(n-1):d.doc,!o)throw new Error("No table found");s=il.get(o),f=d.mapping.maps.length}(function(t,e,n,i,r,o,s){const l=ll(t.doc.type.schema);let c,h;if(r>e.width)for(let o=0,a=0;o<e.height;o++){const u=n.child(o);a+=u.nodeSize;const d=[];let p;p=null==u.lastChild||u.lastChild.type==l.cell?c||(c=l.cell.createAndFill()):h||(h=l.header_cell.createAndFill());for(let t=e.width;t<r;t++)d.push(p);t.insert(t.mapping.slice(s).map(a-1+i),d)}if(o>e.height){const u=[];for(let t=0,i=(e.height-1)*e.width;t<Math.max(e.width,r);t++){const r=!(t>=e.width)&&n.nodeAt(e.map[i+t]).type==l.header_cell;u.push(r?h||(h=l.header_cell.createAndFill()):c||(c=l.cell.createAndFill()))}const d=l.row.create(null,a.from(u)),p=[];for(let t=e.height;t<o;t++)p.push(d);t.insert(t.mapping.slice(s).map(i+n.nodeSize-2),p)}return!(!c&&!h)})(d,s,o,n,h,u,f)&&g(),Ol(d,s,o,n,c,h,l,f)&&g(),Ol(d,s,o,n,c,h,u,f)&&g(),Il(d,s,o,n,l,u,c,f)&&g(),Il(d,s,o,n,l,u,h,f)&&g();for(let t=l;t<u;t++){const e=s.positionAt(t,c,o),i=s.positionAt(t,h,o);d.replace(d.mapping.slice(f).map(e+n),d.mapping.slice(f).map(i+n),new p(r.rows[t-l],0,0))}g(),d.setSelection(new _l(d.doc.resolve(n+s.positionAt(l,c,o)),d.doc.resolve(n+s.positionAt(u-1,h-1,o)))),e(d)}var Fl=tl({ArrowLeft:Rl("horiz",-1),ArrowRight:Rl("horiz",1),ArrowUp:Rl("vert",-1),ArrowDown:Rl("vert",1),"Shift-ArrowLeft":Ll("horiz",-1),"Shift-ArrowRight":Ll("horiz",1),"Shift-ArrowUp":Ll("vert",-1),"Shift-ArrowDown":Ll("vert",1),Backspace:Nl,"Mod-Backspace":Nl,Delete:Nl,"Mod-Delete":Nl});function Pl(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function Rl(t,e){return(n,i,r)=>{if(!r)return!1;const o=n.selection;if(o instanceof _l)return Pl(n,i,ne.near(o.$headCell,e));if("horiz"!=t&&!o.empty)return!1;const s=$l(r,t,e);if(null==s)return!1;if("horiz"==t)return Pl(n,i,ne.near(n.doc.resolve(o.head+e),e));{const r=n.doc.resolve(s),o=vl(r,t,e);let a;return a=o?ne.near(o,1):e<0?ne.near(n.doc.resolve(r.before(-1)),-1):ne.near(n.doc.resolve(r.after(-1)),1),Pl(n,i,a)}}}function Ll(t,e){return(n,i,r)=>{if(!r)return!1;const o=n.selection;let s;if(o instanceof _l)s=o;else{const i=$l(r,t,e);if(null==i)return!1;s=new _l(n.doc.resolve(i))}const a=vl(s.$headCell,t,e);return!!a&&Pl(n,i,new _l(s.$anchorCell,a))}}function Nl(t,e){const n=t.selection;if(!(n instanceof _l))return!1;if(e){const i=t.tr,r=ll(t.schema).cell.createAndFill().content;n.forEachCell(((t,e)=>{t.content.eq(r)||i.replace(i.mapping.map(e+1),i.mapping.map(e+t.nodeSize-1),new p(r,0,0))})),i.docChanged&&e(i)}return!0}function Bl(t,e){const n=hl(t.state.doc.resolve(e));return!!n&&(t.dispatch(t.state.tr.setSelection(new _l(n))),!0)}function jl(t,e,n){if(!ul(t.state))return!1;let i=Tl(n);const r=t.state.selection;if(r instanceof _l){i||(i={width:1,height:1,rows:[a.from(Ml(ll(t.state.schema).cell,n))]});const e=r.$anchorCell.node(-1),o=r.$anchorCell.start(-1),s=il.get(e).rectBetween(r.$anchorCell.pos-o,r.$headCell.pos-o);return i=function({width:t,height:e,rows:n},i,r){if(t!=i){const e=[],r=[];for(let t=0;t<n.length;t++){const o=n[t],s=[];for(let n=e[t]||0,r=0;n<i;r++){let a=o.child(r%o.childCount);n+a.attrs.colspan>i&&(a=a.type.createChecked(bl(a.attrs,a.attrs.colspan,n+a.attrs.colspan-i),a.content)),s.push(a),n+=a.attrs.colspan;for(let n=1;n<a.attrs.rowspan;n++)e[t+n]=(e[t+n]||0)+a.attrs.colspan}r.push(a.from(s))}n=r,t=i}if(e!=r){const t=[];for(let i=0,o=0;i<r;i++,o++){const s=[],l=n[o%e];for(let t=0;t<l.childCount;t++){let e=l.child(t);i+e.attrs.rowspan>r&&(e=e.type.create({...e.attrs,rowspan:Math.max(1,r-e.attrs.rowspan)},e.content)),s.push(e)}t.push(a.from(s))}n=t,e=r}return{width:t,height:e,rows:n}}(i,s.right-s.left,s.bottom-s.top),Dl(t.state,t.dispatch,o,s,i),!0}if(i){const e=dl(t.state),n=e.start(-1);return Dl(t.state,t.dispatch,n,il.get(e.node(-1)).findCell(e.pos-n),i),!0}return!1}function zl(t,e){var n;if(e.ctrlKey||e.metaKey)return;const i=Hl(t,e.target);let r;if(e.shiftKey&&t.state.selection instanceof _l)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&i&&null!=(r=hl(t.state.selection.$anchor))&&(null==(n=Ul(t,e))?void 0:n.pos)!=r.pos)o(r,e),e.preventDefault();else if(!i)return;function o(e,n){let i=Ul(t,n);const r=null==cl.getState(t.state);if(!i||!gl(e,i)){if(!r)return;i=e}const o=new _l(e,i);if(r||!t.state.selection.eq(o)){const n=t.state.tr.setSelection(o);r&&n.setMeta(cl,e.pos),t.dispatch(n)}}function s(){t.root.removeEventListener("mouseup",s),t.root.removeEventListener("dragstart",s),t.root.removeEventListener("mousemove",a),null!=cl.getState(t.state)&&t.dispatch(t.state.tr.setMeta(cl,-1))}function a(n){const r=n,a=cl.getState(t.state);let l;if(null!=a)l=t.state.doc.resolve(a);else if(Hl(t,r.target)!=i&&(l=Ul(t,e),!l))return s();l&&o(l,r)}t.root.addEventListener("mouseup",s),t.root.addEventListener("dragstart",s),t.root.addEventListener("mousemove",a)}function $l(t,e,n){if(!(t.state.selection instanceof se))return null;const{$head:i}=t.state.selection;for(let r=i.depth-1;r>=0;r--){const o=i.node(r);if((n<0?i.index(r):i.indexAfter(r))!=(n<0?0:o.childCount))return null;if("cell"==o.type.spec.tableRole||"header_cell"==o.type.spec.tableRole){const o=i.before(r),s="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(s)?o:null}}return null}function Hl(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e;return null}function Ul(t,e){const n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?hl(t.state.doc.resolve(n.pos)):null}var Vl=class{constructor(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),Wl(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type==this.node.type&&(this.node=t,Wl(t,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))}};function Wl(t,e,n,i,r,o){var s;let a=0,l=!0,c=e.firstChild;const h=t.firstChild;if(h){for(let t=0,n=0;t<h.childCount;t++){const{colspan:s,colwidth:u}=h.child(t).attrs;for(let t=0;t<s;t++,n++){const s=r==n?o:u&&u[t],h=s?s+"px":"";a+=s||i,s||(l=!1),c?(c.style.width!=h&&(c.style.width=h),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=h}}for(;c;){const t=c.nextSibling;null==(s=c.parentNode)||s.removeChild(c),c=t}l?(n.style.width=a+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=a+"px")}}var ql=new Ce("tableColumnResizing");function Kl({handleWidth:t=5,cellMinWidth:e=25,View:n=Vl,lastColumnResizable:i=!0}={}){const r=new xe({key:ql,state:{init(t,i){var o,s;const a=null==(s=null==(o=r.spec)?void 0:o.props)?void 0:s.nodeViews,l=ll(i.schema).table.name;return n&&a&&(a[l]=(t,i)=>new n(t,e,i)),new Xl(-1,!1)},apply:(t,e)=>e.apply(t)},props:{attributes:t=>{const e=ql.getState(t);return e&&e.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(e,n)=>{!function(t,e,n,i,r){const o=ql.getState(t.state);if(!o)return;if(!o.dragging){const i=function(t){for(;t&&"TD"!=t.nodeName&&"TH"!=t.nodeName;)t=t.classList&&t.classList.contains("ProseMirror")?null:t.parentNode;return t}(e.target);let s=-1;if(i){const{left:r,right:o}=i.getBoundingClientRect();e.clientX-r<=n?s=Gl(t,e,"left",n):o-e.clientX<=n&&(s=Gl(t,e,"right",n))}if(s!=o.activeHandle){if(!r&&-1!==s){const e=t.state.doc.resolve(s),n=e.node(-1),i=il.get(n),r=e.start(-1);if(i.colCount(e.pos-r)+e.nodeAfter.attrs.colspan-1==i.width-1)return}Jl(t,s)}}}(e,n,t,0,i)},mouseleave:t=>{!function(t){const e=ql.getState(t.state);e&&e.activeHandle>-1&&!e.dragging&&Jl(t,-1)}(t)},mousedown:(t,n)=>{!function(t,e,n){var i;const r=null!=(i=t.dom.ownerDocument.defaultView)?i:window,o=ql.getState(t.state);if(!o||-1==o.activeHandle||o.dragging)return!1;const s=t.state.doc.nodeAt(o.activeHandle),a=function(t,e,{colspan:n,colwidth:i}){const r=i&&i[i.length-1];if(r)return r;const o=t.domAtPos(e);let s=o.node.childNodes[o.offset].offsetWidth,a=n;if(i)for(let t=0;t<n;t++)i[t]&&(s-=i[t],a--);return s/a}(t,o.activeHandle,s.attrs);function l(e){r.removeEventListener("mouseup",l),r.removeEventListener("mousemove",c);const i=ql.getState(t.state);(null==i?void 0:i.dragging)&&(!function(t,e,n){const i=t.state.doc.resolve(e),r=i.node(-1),o=il.get(r),s=i.start(-1),a=o.colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1,l=t.state.tr;for(let t=0;t<o.height;t++){const e=t*o.width+a;if(t&&o.map[e]==o.map[e-o.width])continue;const i=o.map[e],c=r.nodeAt(i).attrs,h=1==c.colspan?0:a-o.colCount(i);if(c.colwidth&&c.colwidth[h]==n)continue;const u=c.colwidth?c.colwidth.slice():Zl(c.colspan);u[h]=n,l.setNodeMarkup(s+i,null,{...c,colwidth:u})}l.docChanged&&t.dispatch(l)}(t,i.activeHandle,Yl(i.dragging,e,n)),t.dispatch(t.state.tr.setMeta(ql,{setDragging:null})))}function c(e){if(!e.which)return l(e);const i=ql.getState(t.state);if(i&&i.dragging){const r=Yl(i.dragging,e,n);!function(t,e,n,i){const r=t.state.doc.resolve(e),o=r.node(-1),s=r.start(-1),a=il.get(o).colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1;let l=t.domAtPos(r.start(-1)).node;for(;l&&"TABLE"!=l.nodeName;)l=l.parentNode;if(!l)return;Wl(o,l.firstChild,l,i,a,n)}(t,i.activeHandle,r,n)}}t.dispatch(t.state.tr.setMeta(ql,{setDragging:{startX:e.clientX,startWidth:a}})),r.addEventListener("mouseup",l),r.addEventListener("mousemove",c),e.preventDefault()}(t,n,e)}},decorations:t=>{const e=ql.getState(t);if(e&&e.activeHandle>-1)return function(t,e){const n=[],i=t.doc.resolve(e),r=i.node(-1);if(!r)return ha.empty;const o=il.get(r),s=i.start(-1),a=o.colCount(i.pos-s)+i.nodeAfter.attrs.colspan-1;for(let t=0;t<o.height;t++){const e=a+t*o.width;if(!(a!=o.width-1&&o.map[e]==o.map[e+1]||0!=t&&o.map[e]==o.map[e-o.width])){const t=o.map[e],i=s+t+r.nodeAt(t).nodeSize-1,a=document.createElement("div");a.className="column-resize-handle",n.push(aa.widget(i,a))}}return ha.create(t.doc,n)}(t,e.activeHandle)},nodeViews:{}}});return r}var Xl=class t{constructor(t,e){this.activeHandle=t,this.dragging=e}apply(e){const n=this,i=e.getMeta(ql);if(i&&null!=i.setHandle)return new t(i.setHandle,!1);if(i&&void 0!==i.setDragging)return new t(n.activeHandle,i.setDragging);if(n.activeHandle>-1&&e.docChanged){let i=e.mapping.map(n.activeHandle,-1);return pl(e.doc.resolve(i))||(i=-1),new t(i,n.dragging)}return n}};function Gl(t,e,n,i){const r="right"==n?-i:i,o=t.posAtCoords({left:e.clientX+r,top:e.clientY});if(!o)return-1;const{pos:s}=o,a=hl(t.state.doc.resolve(s));if(!a)return-1;if("right"==n)return a.pos;const l=il.get(a.node(-1)),c=a.start(-1),h=l.map.indexOf(a.pos-c);return h%l.width==0?-1:c+l.map[h-1]}function Yl(t,e,n){const i=e.clientX-t.startX;return Math.max(n,t.startWidth+i)}function Jl(t,e){t.dispatch(t.state.tr.setMeta(ql,{setHandle:e}))}function Zl(t){return Array(t).fill(0)}function Ql(t){const e=t.selection,n=dl(t),i=n.node(-1),r=n.start(-1),o=il.get(i);return{...e instanceof _l?o.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r):o.findCell(n.pos-r),tableStart:r,map:o,table:i}}function tc(t,{map:e,tableStart:n,table:i},r){let o=r>0?-1:0;xl(e,i,r+o)&&(o=0==r||r==e.width?null:0);for(let s=0;s<e.height;s++){const a=s*e.width+r;if(r>0&&r<e.width&&e.map[a-1]==e.map[a]){const o=e.map[a],l=i.nodeAt(o);t.setNodeMarkup(t.mapping.map(n+o),null,wl(l.attrs,r-e.colCount(o))),s+=l.attrs.rowspan-1}else{const l=null==o?ll(i.type.schema).cell:i.nodeAt(e.map[a+o]).type,c=e.positionAt(s,r,i);t.insert(t.mapping.map(n+c),l.createAndFill())}}return t}function ec(t,e){if(!ul(t))return!1;if(e){const n=Ql(t);e(tc(t.tr,n,n.left))}return!0}function nc(t,e){if(!ul(t))return!1;if(e){const n=Ql(t);e(tc(t.tr,n,n.right))}return!0}function ic(t,{map:e,table:n,tableStart:i},r){const o=t.mapping.maps.length;for(let s=0;s<e.height;){const a=s*e.width+r,l=e.map[a],c=n.nodeAt(l),h=c.attrs;if(r>0&&e.map[a-1]==l||r<e.width-1&&e.map[a+1]==l)t.setNodeMarkup(t.mapping.slice(o).map(i+l),null,bl(h,r-e.colCount(l)));else{const e=t.mapping.slice(o).map(i+l);t.delete(e,e+c.nodeSize)}s+=h.rowspan}}function rc(t,e){if(!ul(t))return!1;if(e){const n=Ql(t),i=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(let t=n.right-1;ic(i,n,t),t!=n.left;t--){const t=n.tableStart?i.doc.nodeAt(n.tableStart-1):i.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=il.get(t)}e(i)}return!0}function oc(t,e,n){var i;const r=ll(e.type.schema).header_cell;for(let o=0;o<t.width;o++)if((null==(i=e.nodeAt(t.map[o+n*t.width]))?void 0:i.type)!=r)return!1;return!0}function sc(t,{map:e,tableStart:n,table:i},r){var o;let s=n;for(let t=0;t<r;t++)s+=i.child(t).nodeSize;const a=[];let l=r>0?-1:0;oc(e,i,r+l)&&(l=0==r||r==e.height?null:0);for(let s=0,c=e.width*r;s<e.width;s++,c++)if(r>0&&r<e.height&&e.map[c]==e.map[c-e.width]){const r=e.map[c],o=i.nodeAt(r).attrs;t.setNodeMarkup(n+r,null,{...o,rowspan:o.rowspan+1}),s+=o.colspan-1}else{const t=null==l?ll(i.type.schema).cell:null==(o=i.nodeAt(e.map[c+l*e.width]))?void 0:o.type,n=null==t?void 0:t.createAndFill();n&&a.push(n)}return t.insert(s,ll(i.type.schema).row.create(null,a)),t}function ac(t,e){if(!ul(t))return!1;if(e){const n=Ql(t);e(sc(t.tr,n,n.top))}return!0}function lc(t,e){if(!ul(t))return!1;if(e){const n=Ql(t);e(sc(t.tr,n,n.bottom))}return!0}function cc(t,{map:e,table:n,tableStart:i},r){let o=0;for(let t=0;t<r;t++)o+=n.child(t).nodeSize;const s=o+n.child(r).nodeSize,a=t.mapping.maps.length;t.delete(o+i,s+i);const l=new Set;for(let o=0,s=r*e.width;o<e.width;o++,s++){const c=e.map[s];if(!l.has(c))if(l.add(c),r>0&&c==e.map[s-e.width]){const e=n.nodeAt(c).attrs;t.setNodeMarkup(t.mapping.slice(a).map(c+i),null,{...e,rowspan:e.rowspan-1}),o+=e.colspan-1}else if(r<e.height&&c==e.map[s+e.width]){const s=n.nodeAt(c),l=s.attrs,h=s.type.create({...l,rowspan:s.attrs.rowspan-1},s.content),u=e.positionAt(r+1,o,n);t.insert(t.mapping.slice(a).map(i+u),h),o+=l.colspan-1}}}function hc(t,e){if(!ul(t))return!1;if(e){const n=Ql(t),i=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(let t=n.bottom-1;cc(i,n,t),t!=n.top;t--){const t=n.tableStart?i.doc.nodeAt(n.tableStart-1):i.doc;if(!t)throw RangeError("No table found");n.table=t,n.map=il.get(n.table)}e(i)}return!0}function uc(t){const e=t.content;return 1==e.childCount&&e.child(0).isTextblock&&0==e.child(0).childCount}function dc(t,e){const n=t.selection;if(!(n instanceof _l)||n.$anchorCell.pos==n.$headCell.pos)return!1;const i=Ql(t),{map:r}=i;if(function({width:t,height:e,map:n},i){let r=i.top*t+i.left,o=r,s=(i.bottom-1)*t+i.left,a=r+(i.right-i.left-1);for(let e=i.top;e<i.bottom;e++){if(i.left>0&&n[o]==n[o-1]||i.right<t&&n[a]==n[a+1])return!0;o+=t,a+=t}for(let o=i.left;o<i.right;o++){if(i.top>0&&n[r]==n[r-t]||i.bottom<e&&n[s]==n[s+t])return!0;r++,s++}return!1}(r,i))return!1;if(e){const n=t.tr,o={};let s,l,c=a.empty;for(let t=i.top;t<i.bottom;t++)for(let e=i.left;e<i.right;e++){const a=r.map[t*r.width+e],h=i.table.nodeAt(a);if(!o[a]&&h)if(o[a]=!0,null==s)s=a,l=h;else{uc(h)||(c=c.append(h.content));const t=n.mapping.map(a+i.tableStart);n.delete(t,t+h.nodeSize)}}if(null==s||null==l)return!0;if(n.setNodeMarkup(s+i.tableStart,null,{...wl(l.attrs,l.attrs.colspan,i.right-i.left-l.attrs.colspan),rowspan:i.bottom-i.top}),c.size){const t=s+1+l.content.size,e=uc(l)?s+1:t;n.replaceWith(e+i.tableStart,t+i.tableStart,c)}n.setSelection(new _l(n.doc.resolve(s+i.tableStart))),e(n)}return!0}function pc(t,e){const n=ll(t.schema);return fc((({node:t})=>n[t.type.spec.tableRole]))(t,e)}function fc(t){return(e,n)=>{var i;const r=e.selection;let o,s;if(r instanceof _l){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;o=r.$anchorCell.nodeAfter,s=r.$anchorCell.pos}else{if(o=function(t){for(let e=t.depth;e>0;e--){const n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}(r.$from),!o)return!1;s=null==(i=hl(r.$from))?void 0:i.pos}if(null==o||null==s)return!1;if(1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(n){let i=o.attrs;const a=[],l=i.colwidth;i.rowspan>1&&(i={...i,rowspan:1}),i.colspan>1&&(i={...i,colspan:1});const c=Ql(e),h=e.tr;for(let t=0;t<c.right-c.left;t++)a.push(l?{...i,colwidth:l&&l[t]?[l[t]]:null}:i);let u;for(let e=c.top;e<c.bottom;e++){let n=c.map.positionAt(e,c.left,c.table);e==c.top&&(n+=o.nodeSize);for(let i=c.left,r=0;i<c.right;i++,r++)i==c.left&&e==c.top||h.insert(u=h.mapping.map(n+c.tableStart,1),t({node:o,row:e,col:i}).createAndFill(a[r]))}h.setNodeMarkup(s,t({node:o,row:c.top,col:c.left}),a[0]),r instanceof _l&&h.setSelection(new _l(h.doc.resolve(r.$anchorCell.pos),u?h.doc.resolve(u):void 0)),n(h)}return!0}}function gc(t,e){return function(n,i){if(!ul(n))return!1;const r=dl(n);if(r.nodeAfter.attrs[t]===e)return!1;if(i){const o=n.tr;n.selection instanceof _l?n.selection.forEachCell(((n,i)=>{n.attrs[t]!==e&&o.setNodeMarkup(i,null,{...n.attrs,[t]:e})})):o.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[t]:e}),i(o)}return!0}}function mc(t,e,n){const i=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1});for(let t=0;t<i.length;t++){const r=e.table.nodeAt(i[t]);if(r&&r.type!==n.header_cell)return!1}return!0}function yc(t,e){return(e=e||{useDeprecatedLogic:!1}).useDeprecatedLogic?function(t){return function(e,n){if(!ul(e))return!1;if(n){const i=ll(e.schema),r=Ql(e),o=e.tr,s=r.map.cellsInRect("column"==t?{left:r.left,top:0,right:r.right,bottom:r.map.height}:"row"==t?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),a=s.map((t=>r.table.nodeAt(t)));for(let t=0;t<s.length;t++)a[t].type==i.header_cell&&o.setNodeMarkup(r.tableStart+s[t],i.cell,a[t].attrs);if(0==o.steps.length)for(let t=0;t<s.length;t++)o.setNodeMarkup(r.tableStart+s[t],i.header_cell,a[t].attrs);n(o)}return!0}}(t):function(e,n){if(!ul(e))return!1;if(n){const i=ll(e.schema),r=Ql(e),o=e.tr,s=mc("row",r,i),a=mc("column",r,i),l=("column"===t?s:"row"===t&&a)?1:0,c="column"==t?{left:0,top:l,right:1,bottom:r.map.height}:"row"==t?{left:l,top:0,right:r.map.width,bottom:1}:r,h="column"==t?a?i.cell:i.header_cell:"row"==t?s?i.cell:i.header_cell:i.cell;r.map.cellsInRect(c).forEach((t=>{const e=t+r.tableStart,n=o.doc.nodeAt(e);n&&o.setNodeMarkup(e,h,n.attrs)})),n(o)}return!0}}var vc=yc("row",{useDeprecatedLogic:!0}),bc=yc("column",{useDeprecatedLogic:!0}),wc=yc("cell",{useDeprecatedLogic:!0});function xc(t){return function(e,n){if(!ul(e))return!1;const i=function(t,e){if(e<0){const e=t.nodeBefore;if(e)return t.pos-e.nodeSize;for(let e=t.index(-1)-1,n=t.before();e>=0;e--){const i=t.node(-1).child(e),r=i.lastChild;if(r)return n-1-r.nodeSize;n-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;const e=t.node(-1);for(let n=t.indexAfter(-1),i=t.after();n<e.childCount;n++){const t=e.child(n);if(t.childCount)return i+1;i+=t.nodeSize}}return null}(dl(e),t);if(null==i)return!1;if(n){const t=e.doc.resolve(i);n(e.tr.setSelection(se.between(t,fl(t))).scrollIntoView())}return!0}}function _c(t,e){const n=t.selection.$anchor;for(let i=n.depth;i>0;i--){if("table"==n.node(i).type.spec.tableRole)return e&&e(t.tr.delete(n.before(i),n.after(i)).scrollIntoView()),!0}return!1}function Sc({allowTableNodeSelection:t=!1}={}){return new xe({key:cl,state:{init:()=>null,apply(t,e){const n=t.getMeta(cl);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;const{deleted:i,pos:r}=t.mapping.mapResult(e);return i?null:r}},props:{decorations:Cl,handleDOMEvents:{mousedown:zl},createSelectionBetween:t=>null!=cl.getState(t.state)?t.state.selection:null,handleTripleClick:Bl,handleKeyDown:Fl,handlePaste:jl},appendTransaction:(e,n,i)=>function(t,e,n){const i=(e||t).selection,r=(e||t).doc;let o,s;if(i instanceof le&&(s=i.node.type.spec.tableRole)){if("cell"==s||"header_cell"==s)o=_l.create(r,i.from);else if("row"==s){const t=r.resolve(i.from+1);o=_l.rowSelection(t,t)}else if(!n){const t=il.get(i.node),e=i.from+1,n=e+t.map[t.width*t.height-1];o=_l.create(r,e+1,n)}}else i instanceof se&&function({$from:t,$to:e}){if(t.pos==e.pos||t.pos<t.pos-6)return!1;let n=t.pos,i=e.pos,r=t.depth;for(;r>=0&&!(t.after(r+1)<t.end(r));r--,n++);for(let t=e.depth;t>=0&&!(e.before(t+1)>e.start(t));t--,i--);return n==i&&/row|table/.test(t.node(r).type.spec.tableRole)}(i)?o=se.create(r,i.from):i instanceof se&&function({$from:t,$to:e}){let n,i;for(let e=t.depth;e>0;e--){const i=t.node(e);if("cell"===i.type.spec.tableRole||"header_cell"===i.type.spec.tableRole){n=i;break}}for(let t=e.depth;t>0;t--){const n=e.node(t);if("cell"===n.type.spec.tableRole||"header_cell"===n.type.spec.tableRole){i=n;break}}return n!==i&&0===e.parentOffset}(i)&&(o=se.create(r,i.$from.start(),i.$from.end()));return o&&(e||(e=t.tr)).setSelection(o),e}(i,El(i,n),t)})}var Cc=["blockquote",0],kc=["hr"],Ac=["pre",["code",0]],Ec=["ol",0],Tc=["ul",0],Mc=["li",0],Oc=function(t){for(var e,n={},i=t.attributes,r=0;r<i.length;r++)n[(e=i[r]).name]=e.value;return n},Ic=function(t){var e={};return t.forEach((function(t){e[t]={default:null}})),e},Dc=function(){return Ic(["style","class","id"])},Fc=function(t,e){for(var n in t)if(n&&null!==t[n]&&n!==e)return!0;return!1},Pc=function(t,e){void 0===e&&(e=[]);var n={},i=function(i){i&&null!==t[i]&&!e.find((function(t){return t===i}))&&(n[i]=t[i])};for(var r in t)i(r);return n},Rc=function(t){var e;return(e={})[t]={name:t,inclusive:!0,parseDOM:[{tag:t}],toDOM:function(){return[t,0]}},e},Lc=(0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)({link:{attrs:(0,Ie.__assign)((0,Ie.__assign)({},Dc()),{href:{default:null},target:{default:null},title:{default:null}}),inclusive:!1,parseDOM:[{tag:"a",getAttrs:Oc}],toDOM:function(t){return["a",Pc(t.attrs),0]}}},Rc("strong")),Rc("b")),Rc("em")),Rc("i")),Rc("del")),Rc("sub")),Rc("sup")),Rc("code")),{style:{attrs:(0,Ie.__assign)({},Dc()),parseDOM:[{tag:"span",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["span",Pc(t.attrs),0]:["span",0]}}}),Rc("u")),Nc=function(t){var e;return(e={})[t]={default:null,getFromDOM:function(e){return e.getAttribute(t)},setDOMAttr:function(e,n){n[t]=e}},e},Bc=(0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)((0,Ie.__assign)({},Nc("style")),Nc("class")),Nc("id")),Nc("headers")),Nc("scope")),jc={doc:{content:"colgroup*"},col:{attrs:Ic(["id","class","style","span"]),parseDOM:[{getAttrs:Oc,tag:"col"}],toDOM:function(t){return["col",t.attrs]}},colgroup:{attrs:Ic(["id","class","style","span"]),content:"col*",parseDOM:[{getAttrs:Oc,tag:"colgroup"}],toDOM:function(t){return["colgroup",t.attrs,0]}},text:{inline:!0,group:"inline"}},zc=new Y({nodes:jc,marks:{}}),$c=function(t){var e=fn(un(t),zc,{preserveWhitespace:!1});return pn(e).firstChild},Hc=al({tableGroup:"block",cellContent:"block+",cellAttributes:Bc});Hc.table_row.attrs=(0,Ie.__assign)((0,Ie.__assign)({},Hc.table_row.attrs),Ic([ke,"style","class","id"])),Hc.table_row.toDOM=function(t){return["tr",Pc(t.attrs),0]},Hc.table_row.parseDOM=[{tag:"tr",getAttrs:Oc}],Hc.table.attrs=(0,Ie.__assign)((0,Ie.__assign)({},Hc.table.attrs),Ic(["style","class","id",Ae,Ee])),Hc.table.toDOM=function(t){var e=Fc(t.attrs)?Pc(t.attrs,[Ae,Ee]):{},n=null;if(t.attrs[Ae]&&!function(t){for(var e=!1,n=t.child(0),i=0;i<n.childCount;i++)if(n.child(i).attrs.colwidth){e=!0;break}return e}(t)){var i=$c(t.attrs[Ae]);if(i){var r=Array.from(i.children).map((function(t){return["col",Oc(t)]}));n=["colgroup",Oc(i)].concat(r)}}return n?["table",e,n,["tbody",0]]:["table",e,["tbody",0]]},Hc.table.parseDOM=[{tag:"table",getAttrs:function(t){var e=Oc(t),n=Array.from(t.childNodes).find((function(t){return"COLGROUP"===t.nodeName}));return n&&(e[Ae]=n.outerHTML),e}}];var Uc=(0,Ie.__assign)({doc:{content:"block+"},paragraph:{content:"inline*",group:"block",attrs:(0,Ie.__assign)({},Dc()),parseDOM:[{tag:"p",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["p",Pc(t.attrs),0]:["p",0]}},table_wrapper:{content:"(table_caption_external | table)+",group:"block",defining:!0,attrs:{table:{default:null},style:{default:null}},parseDOM:[{tag:"div[table]",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["div",Pc(t.attrs),0]:["div",0]}},table_caption_external:{content:"inline+",group:"block",attrs:(0,Ie.__assign)({caption:{default:null}},Dc()),parseDOM:[{tag:"div[caption]",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["div",Pc(t.attrs),0]:["div",0]}},div:{content:"block*",group:"block",attrs:(0,Ie.__assign)({},Dc()),parseDOM:[{tag:"div",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["div",Pc(t.attrs),0]:["div",0]}},blockquote:{attrs:(0,Ie.__assign)({},Dc()),content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["blockquote",Pc(t.attrs),0]:Cc}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return kc}},heading:{attrs:(0,Ie.__assign)((0,Ie.__assign)({},Dc()),{level:{default:1}}),content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:1})}},{tag:"h2",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:2})}},{tag:"h3",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:3})}},{tag:"h4",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:4})}},{tag:"h5",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:5})}},{tag:"h6",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{level:6})}}],toDOM:function(t){return Fc(t.attrs,"level")?["h"+t.attrs.level,Pc(t.attrs,["level"]),0]:["h"+t.attrs.level,0]}},code_block:{content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return Ac}},text:{inline:!0,group:"inline"},image:{inline:!0,attrs:(0,Ie.__assign)({src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}},Dc()),group:"inline",draggable:!0,parseDOM:[{tag:"img",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["img",Pc(t.attrs)]:["img"]}},hard_break:{inline:!0,attrs:(0,Ie.__assign)({},Dc()),group:"inline",selectable:!1,parseDOM:[{tag:"br",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["br",Pc(t.attrs)]:["br"]}},ordered_list:{content:"list_item+",group:"block",attrs:(0,Ie.__assign)((0,Ie.__assign)({},Dc()),{type:{default:null},order:{default:1}}),parseDOM:[{tag:"ol",getAttrs:function(t){return(0,Ie.__assign)((0,Ie.__assign)({},Oc(t)),{order:t.hasAttribute("start")?parseInt(t.getAttribute("start")||"1",10):1})}}],toDOM:function(t){return 1===t.attrs.order?Fc(t.attrs,"order")?["ol",Pc(t.attrs,["order"]),0]:Ec:["ol",(0,Ie.__assign)((0,Ie.__assign)({},Pc(t.attrs,["order"])),{start:t.attrs.order}),0]}},bullet_list:{content:"list_item+",group:"block",attrs:(0,Ie.__assign)({},Dc()),parseDOM:[{tag:"ul",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["ul",Pc(t.attrs),0]:Tc}},list_item:{content:"(paragraph | heading) block*",attrs:(0,Ie.__assign)({},Dc()),parseDOM:[{tag:"li",getAttrs:Oc}],toDOM:function(t){return Fc(t.attrs)?["li",Pc(t.attrs),0]:Mc},defining:!0}},Hc),Vc=200,Wc=function(){};Wc.prototype.append=function(t){return t.length?(t=Wc.from(t),!this.length&&t||t.length<Vc&&this.leafAppend(t)||this.length<Vc&&t.leafPrepend(this)||this.appendInner(t)):this},Wc.prototype.prepend=function(t){return t.length?Wc.from(t).append(this):this},Wc.prototype.appendInner=function(t){return new Kc(this,t)},Wc.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?Wc.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Wc.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Wc.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Wc.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var i=[];return this.forEach((function(e,n){return i.push(t(e,n))}),e,n),i},Wc.from=function(t){return t instanceof Wc?t:t&&t.length?new qc(t):Wc.empty};var qc=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,i){for(var r=e;r<n;r++)if(!1===t(this.values[r],i+r))return!1},e.prototype.forEachInvertedInner=function(t,e,n,i){for(var r=e-1;r>=n;r--)if(!1===t(this.values[r],i+r))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=Vc)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=Vc)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Wc);Wc.empty=new qc([]);var Kc=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,i){var r=this.left.length;return!(e<r&&!1===this.left.forEachInner(t,e,Math.min(n,r),i))&&(!(n>r&&!1===this.right.forEachInner(t,Math.max(e-r,0),Math.min(this.length,n)-r,i+r))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,i){var r=this.left.length;return!(e>r&&!1===this.right.forEachInvertedInner(t,e-r,Math.max(n,r)-r,i+r))&&(!(n<r&&!1===this.left.forEachInvertedInner(t,Math.min(e,r),n,i))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(Wc);const Xc=Wc;class Gc{constructor(t,e){this.items=t,this.eventCount=e}popEvent(t,e){if(0==this.eventCount)return null;let n,i,r=this.items.length;for(;;r--){if(this.items.get(r-1).selection){--r;break}}e&&(n=this.remapping(r,this.items.length),i=n.maps.length);let o,s,a=t.tr,l=[],c=[];return this.items.forEach(((t,e)=>{if(!t.step)return n||(n=this.remapping(r,e+1),i=n.maps.length),i--,void c.push(t);if(n){c.push(new Yc(t.map));let e,r=t.step.map(n.slice(i));r&&a.maybeStep(r).doc&&(e=a.mapping.maps[a.mapping.maps.length-1],l.push(new Yc(e,void 0,void 0,l.length+c.length))),i--,e&&n.appendMap(e,i)}else a.maybeStep(t.step);return t.selection?(o=n?t.selection.map(n.slice(i)):t.selection,s=new Gc(this.items.slice(0,r).append(c.reverse().concat(l)),this.eventCount-1),!1):void 0}),this.items.length,0),{remaining:s,transform:a,selection:o}}addTransform(t,e,n,i){let r=[],o=this.eventCount,s=this.items,a=!i&&s.length?s.get(s.length-1):null;for(let n=0;n<t.steps.length;n++){let l,c=t.steps[n].invert(t.docs[n]),h=new Yc(t.mapping.maps[n],c,e);(l=a&&a.merge(h))&&(h=l,n?r.pop():s=s.slice(0,s.length-1)),r.push(h),e&&(o++,e=void 0),i||(a=h)}let l=o-n.depth;return l>Zc&&(s=function(t,e){let n;return t.forEach(((t,i)=>{if(t.selection&&0==e--)return n=i,!1})),t.slice(n)}(s,l),o-=l),new Gc(s.append(r),o)}remapping(t,e){let n=new vt;return this.items.forEach(((e,i)=>{let r=null!=e.mirrorOffset&&i-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:void 0;n.appendMap(e.map,r)}),t,e),n}addMaps(t){return 0==this.eventCount?this:new Gc(this.items.append(t.map((t=>new Yc(t)))),this.eventCount)}rebased(t,e){if(!this.eventCount)return this;let n=[],i=Math.max(0,this.items.length-e),r=t.mapping,o=t.steps.length,s=this.eventCount;this.items.forEach((t=>{t.selection&&s--}),i);let a=e;this.items.forEach((e=>{let i=r.getMirror(--a);if(null==i)return;o=Math.min(o,i);let l=r.maps[i];if(e.step){let o=t.steps[i].invert(t.docs[i]),c=e.selection&&e.selection.map(r.slice(a+1,i));c&&s++,n.push(new Yc(l,o,c))}else n.push(new Yc(l))}),i);let l=[];for(let t=e;t<o;t++)l.push(new Yc(r.maps[t]));let c=this.items.slice(0,i).append(l).append(n),h=new Gc(c,s);return h.emptyItemCount()>500&&(h=h.compress(this.items.length-n.length)),h}emptyItemCount(){let t=0;return this.items.forEach((e=>{e.step||t++})),t}compress(t=this.items.length){let e=this.remapping(0,t),n=e.maps.length,i=[],r=0;return this.items.forEach(((o,s)=>{if(s>=t)i.push(o),o.selection&&r++;else if(o.step){let t=o.step.map(e.slice(n)),s=t&&t.getMap();if(n--,s&&e.appendMap(s,n),t){let a=o.selection&&o.selection.map(e.slice(n));a&&r++;let l,c=new Yc(s.invert(),t,a),h=i.length-1;(l=i.length&&i[h].merge(c))?i[h]=l:i.push(c)}}else o.map&&n--}),this.items.length,0),new Gc(Xc.from(i.reverse()),r)}}Gc.empty=new Gc(Xc.empty,0);class Yc{constructor(t,e,n,i){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let e=t.step.merge(this.step);if(e)return new Yc(e.getMap().invert(),e,this.selection)}}}class Jc{constructor(t,e,n,i,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=i,this.prevComposition=r}}const Zc=20;function Qc(t){let e=[];for(let n=t.length-1;n>=0&&0==e.length;n--)t[n].forEach(((t,n,i,r)=>e.push(i,r)));return e}function th(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let r=e.map(t[i],1),o=e.map(t[i+1],-1);r<=o&&n.push(r,o)}return n}let eh=!1,nh=null;function ih(t){let e=t.plugins;if(nh!=e){eh=!1,nh=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){eh=!0;break}}return eh}function rh(t){return t.setMeta(sh,!0)}const oh=new Ce("history"),sh=new Ce("closeHistory");function ah(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new xe({key:oh,state:{init:()=>new Jc(Gc.empty,Gc.empty,null,0,-1),apply:(e,n,i)=>function(t,e,n,i){let r,o=n.getMeta(oh);if(o)return o.historyState;n.getMeta(sh)&&(t=new Jc(t.done,t.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(oh))return s.getMeta(oh).redo?new Jc(t.done.addTransform(n,void 0,i,ih(e)),t.undone,Qc(n.mapping.maps),t.prevTime,t.prevComposition):new Jc(t.done,t.undone.addTransform(n,void 0,i,ih(e)),null,t.prevTime,t.prevComposition);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(r=n.getMeta("rebased"))?new Jc(t.done.rebased(n,r),t.undone.rebased(n,r),th(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Jc(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),th(t.prevRanges,n.mapping),t.prevTime,t.prevComposition);{let r=n.getMeta("composition"),o=0==t.prevTime||!s&&t.prevComposition!=r&&(t.prevTime<(n.time||0)-i.newGroupDelay||!function(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach(((t,i)=>{for(let r=0;r<e.length;r+=2)t<=e[r+1]&&i>=e[r]&&(n=!0)})),n}(n,t.prevRanges)),a=s?th(t.prevRanges,n.mapping):Qc(n.mapping.maps);return new Jc(t.done.addTransform(n,o?e.selection.getBookmark():void 0,i,ih(e)),Gc.empty,a,n.time,null==r?t.prevComposition:r)}}(n,i,e,t)},config:t,props:{handleDOMEvents:{beforeinput(t,e){let n=e.inputType,i="historyUndo"==n?ch:"historyRedo"==n?hh:null;return!!i&&(e.preventDefault(),i(t.state,t.dispatch))}}}})}function lh(t,e){return(n,i)=>{let r=oh.getState(n);if(!r||0==(t?r.undone:r.done).eventCount)return!1;if(i){let o=function(t,e,n){let i=ih(e),r=oh.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,i);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),r,i),l=new Jc(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(oh,{redo:n,historyState:l})}(r,n,t);o&&i(e?o.scrollIntoView():o)}return!0}}const ch=lh(!1,!0),hh=lh(!0,!0),uh=lh(!1,!1),dh=lh(!0,!1);function ph(t){let e=oh.getState(t);return e?e.done.eventCount:0}function fh(t){let e=oh.getState(t);return e?e.undone.eventCount:0}class gh{constructor(t,e,n={}){var i;this.match=t,this.match=t,this.handler="string"==typeof e?(i=e,function(t,e,n,r){let o=i;if(e[1]){let t=e[0].lastIndexOf(e[1]);o+=e[0].slice(t+e[1].length);let i=(n+=t)-r;i>0&&(o=e[0].slice(t-i,t)+o,n=r)}return t.tr.insertText(o,n,r)}):e,this.undoable=!1!==n.undoable,this.inCode=n.inCode||!1}}const mh=500;function yh({rules:t}){let e=new xe({state:{init:()=>null,apply(t,e){let n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:(n,i,r,o)=>vh(n,i,r,o,t,e),handleDOMEvents:{compositionend:n=>{setTimeout((()=>{let{$cursor:i}=n.state.selection;i&&vh(n,i.pos,i.pos,"",t,e)}))}}},isInputRules:!0});return e}function vh(t,e,n,i,r,o){if(t.composing)return!1;let s=t.state,a=s.doc.resolve(e),l=a.parent.textBetween(Math.max(0,a.parentOffset-mh),a.parentOffset,null,"￼")+i;for(let c=0;c<r.length;c++){let h=r[c];if(a.parent.type.spec.code){if(!h.inCode)continue}else if("only"===h.inCode)continue;let u=h.match.exec(l),d=u&&h.handler(s,u,e-(u[0].length-i.length),n);if(d)return h.undoable&&d.setMeta(o,{transform:d,from:e,to:n,text:i}),t.dispatch(d),!0}return!1}const bh=(t,e)=>{let n=t.plugins;for(let i=0;i<n.length;i++){let r,o=n[i];if(o.spec.isInputRules&&(r=o.getState(t))){if(e){let n=t.tr,i=r.transform;for(let t=i.steps.length-1;t>=0;t--)n.step(i.steps[t].invert(i.docs[t]));if(r.text){let e=n.doc.resolve(r.from).marks();n.replaceWith(r.from,r.to,t.schema.text(r.text,e))}else n.delete(r.from,r.to);e(n)}return!0}}return!1},wh=new gh(/--$/,"—"),xh=new gh(/\.\.\.$/,"…"),_h=new gh(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),Sh=new gh(/"$/,"”"),Ch=new gh(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),kh=new gh(/'$/,"’"),Ah=[_h,Sh,Ch,kh];function Eh(t,e,n=null,i){return new gh(t,((t,r,o,s)=>{let a=n instanceof Function?n(r):n,l=t.tr.delete(o,s),c=l.doc.resolve(o).blockRange(),h=c&&Ft(c,e,a);if(!h)return null;l.wrap(c,h);let u=l.doc.resolve(o-1).nodeBefore;return u&&u.type==e&&Lt(l.doc,o-1)&&(!i||i(r,u))&&l.join(o-1),l}))}function Th(t,e,n=null){return new gh(t,((t,i,r,o)=>{let s=t.doc.resolve(r),a=n instanceof Function?n(i):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(r,o).setBlockType(r,r,e,a):null}))}var Mh={mark:"strong",altMarks:["b"],altStyle:{name:"font-weight",value:/^(bold(er)?|[5-9]\d{2,})$/}},Oh={mark:"em",altMarks:["i"],altStyle:{name:"font-style",value:/^italic$/i}},Ih={mark:"u",altStyle:{name:"text-decoration",value:/^underline$/i}},Dh={mark:"del",altStyle:{name:"text-decoration",value:/^line-through$/i}},Fh={mark:"sub"},Ph={mark:"sup"},Rh={mark:"link"},Lh="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Nh=function(t,e){var n={},i=e&&e.applyToWord||!1;if(n["Mod-z"]=ch,n["Shift-Mod-z"]=hh,n.Backspace=Gi(bh,fi,mi,xi),n.Enter=Gi(Oi,Fi,Pi,Ni),Lh||(n["Mod-y"]=hh),t.marks.strong&&(n["Mod-b"]=Xe(Dn,(0,Ie.__assign)((0,Ie.__assign)({},Mh),{applyToWord:i}))),t.marks.em&&(n["Mod-i"]=Xe(Dn,(0,Ie.__assign)((0,Ie.__assign)({},Oh),{applyToWord:i}))),t.marks.u&&(n["Mod-u"]=Xe(Dn,(0,Ie.__assign)((0,Ie.__assign)({},Ih),{applyToWord:i}))),t.nodes.hard_break){var r=t.nodes.hard_break,o=Gi(Di,(function(t,e){return e(t.tr.replaceSelectionWith(r.create()).scrollIntoView()),!0}));n["Shift-Enter"]=o}return n},Bh=function(t){var e,n={};return t.nodes.list_item&&(n.Enter=(e=t.nodes.list_item,function(t,n){return oi(e)(t,(function(e){var i=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();i&&e.ensureMarks(i),n(e)}))})),n},jh=/style=['"]?[^'"]*?mso-list:\s*[a-zA-Z]+(\d+)\s[a-zA-Z]+(\d+)\s(\w+)/gi,zh=function(t){return/^MsoListParagraph/.test(t.className)},$h=function(t){var e=t.innerHTML;return e=(e=e.replace(/<!--(.|\s)*?-->/gi,"")).replace(/<\/?[^>]+?\/?>/gm,"")},Hh=function(t,e){var n=document.createElement(t);return n.style.listStyleType=e,n},Uh=function(t){var e=null;return/^\d/.test(t)||(e=(/^[a-z]/.test(t)?"lower-":"upper-")+(/^[ivxlcdm]/i.test(t)?"roman":"alpha")),e},Vh=function(t,e){var n=[];Array.from(t).forEach((function(t){if(t.nodeType===Node.ELEMENT_NODE){var i=t;i.getAttribute("datalist")?(n.push(t),e.add(n)):zh(i)&&n.length?n.push(t):(n=[],"DIV"===i.nodeName?Vh(i.children,e):"TABLE"===i.nodeName&&Array.from(i.querySelectorAll("td,th")).forEach((function(t){Vh(t.children,e)})))}}))},Wh=function(t){var e,n=t.innerHTML,i=function(t){return t.replace(/^(?:&nbsp;|[\u00a0\n\r\s])+/,"")};return n=n.replace(/<\/?\w+[^>]*>/g,"").replace(/&nbsp;/g," "),/^[\u2022\u00b7\u00a7\u00d8oØüvn][\u00a0 ]+/.test(n)?{tag:"ul",style:(e=i($h(t)),/^[\u2022\u00b7\u00FC\u00D8\u002dv-]/.test(e)?null:/^o/.test(e)?"circle":"square")}:/^\s*\w+[\.\)][\u00a0 ]{2,}/.test(n)?{tag:"ol",style:Uh(i($h(t)))}:void 0},qh=function(t){var e,n=t.nodeName.toLowerCase();t.firstChild&&t.firstChild.nodeType===Node.COMMENT_NODE&&t.removeChild(t.firstChild),1===t.childNodes.length?e=t.firstChild.nodeType===Node.TEXT_NODE?$h(t):t.firstChild.innerHTML.replace(/^\w+[\.\)](&nbsp;)+ /,""):(t.removeChild(t.firstChild),3===t.firstChild.nodeType&&/^[ivxlcdm]+\.$/i.test(t.firstChild.nodeValue)&&t.removeChild(t.firstChild),/^(&nbsp;|\s)+$/i.test(t.firstChild.innerHTML)&&t.removeChild(t.firstChild),e="p"!==n?"<"+n+">"+t.innerHTML+"</"+n+">":t.innerHTML),t.parentNode.removeChild(t);var i=document.createElement("li");return i.appendChild(un(e)),i},Kh=function(t){var e=un(function(t){return t.replace(jh,(function(t,e,n){return'datalist="'.concat(e,'" datalevel="').concat(n,'" ').concat(t)}))}(t)),n=new Set;return Vh(e.children,n),n.forEach((function(t){return function(t){var e,n,i,r,o,s,a,l,c,h,u,d,p,f=-1,g={};for(l=0;l<t.length;l++){var m=(p={datalist:(c=t[l]).getAttribute("datalist"),datalevel:c.getAttribute("datalevel")}).datalist,y=Wh(c);if(h=y&&y.tag){if(u=p.datalevel||parseFloat(c.style.marginLeft||0),p.datalevel||c.style.marginLeft){var v=h+m;g[u]||(g[u]={}),(!n||n<0)&&(n=u,i=m,r=(a=t.filter((function(t){return t.getAttribute("datalist")===String(i)})))[a.length-1],s=Hh(h,y&&y.style),c.parentNode.insertBefore(s,c),f=u,g[u][v]=s),o=r===c,d=g[u][v],(u>f||!d)&&(d=Hh(h,y&&y.style),g[u][v]=d,e.appendChild(d)),e=qh(c),d.appendChild(e),o?n=f=-1:f=u}}else!e||o&&!zh(c)||(c.style.marginLeft&&(c.style.marginLeft=""),c.style.marginLeft&&(c.style.margin=""),e.appendChild(c))}}(t)})),dn(e)},Xh=function(t){return t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace(/^[\s\S]+?<!--StartFragment-->\s*([\s\S]*?)\s*<!--EndFragment-->[\s\S]+$/,"$1")).replace(/<\/?[ovw]:[^>]*?>/gi,"")).replace(/<\\?\??xml[^>]*>/gi,"")).replace(/<(?:link|meta) [^>]+?>/gi,"")).replace(/<style[^>]*?>\s*<\/style>/gi,"")).replace(/<\/?st1:.*?>/gi,"")).replace(/<a name="[a-zA-Z0-9_]+">/gim,"")).replace(/v:shapes?="[^"]+"/gi,"")).replace(/<!\[if !supportLists\]>/gi,"")).replace(/<!\[endif\]>/gi,"")},Gh=function(t){return t.replace(/<!--[\s\S]+?-->/g,"")},Yh=function(t,e){return t.replace(new RegExp("<\\/?("+e+")(?:\\s[^>]*?)?>","gi"),"")},Jh=function(t){t.ownerElement&&t.ownerElement.removeAttribute(t.name)},Zh=function(t){/^Mso/.test(t.value)&&Jh(t)},Qh=/\s*;\s*/,tu=/\s*:\s*/,eu=function(t){var e,n,i=t.value.split(Qh).filter((function(t){return Boolean(t)})),r=t.ownerElement.style,o="";i.forEach((function(t){var i;i=t.split(tu),e=i[0],n=i[1],void 0!==r[e]&&(o+="".concat(e,": ").concat(n,"; "))})),(o=o.trim())?t.value=o:Jh(t)},nu=function(t,e){var n=t;if(e.convertMsLists&&(n=Kh(n)),e.stripTags&&(n=Yh(n,e.stripTags)),e.attributes){var i=un(n);Array.from(i.querySelectorAll("*")).forEach((function(t){return function(t,e){if(t.nodeType===Node.ELEMENT_NODE){for(var n=t.attributes.length-1;n>=0;n--){var i=t.attributes[n];e[i.name]?e[i.name](i):e["*"]&&e["*"](i)}"SPAN"===t.nodeName&&0===t.attributes.length&&function(t){var e=t.parentNode;if(e){for(;t.firstChild;)e.insertBefore(t.firstChild,t);e.removeChild(t)}}(t)}}(t,e.attributes)})),n=dn(i)}return n};function iu(t){for(var e=t.length,n=new Array(e/2),i=0;i<e;i+=2)n[i]=String.fromCharCode(parseInt(t.substring(i,i+2),16));return btoa(n.join(""))}var ru=/<img\s[^>]*?src=(?:'|")file:\/[^'"]+(?:'|")[^>]*>/gi,ou=/{\\pict[\s\S]+?\\bliptag-?\d+(\\blipupi-?\d+)?({\\\*\\blipuid\s?[\da-fA-F]+)?[\s}]*?/,su=new RegExp("(?:("+ou.source+"))([\\da-fA-F\\s]+)\\}","g"),au=/[^\da-fA-F]/g,lu=/file:\/[^'"]+\.(jpg|png|gif)/i,cu=/\\(png|jpeg)blip\\/,hu="text/rtf",uu=function(t,e){var n=t.match(ru);if(!n||-1===e.types.indexOf(hu))return t;var i=e.getData(hu),r=[],o=i.match(su);if(!i||!o)return t;for(var s=0,a=o;s<a.length;s++){var l=a[s],c=cu.exec(l);if(c){var h=l.replace(ou,"").replace(au,"");r.push("data:image/".concat(c[1],";base64,").concat(iu(h)))}}return n.length!==r.length?t:t.replace(ru,(function(t){var e=r.shift()||"";return t.replace(lu,e)}))},du=function(t,e,n,i,r){var o,s,a,l,c,h,u=[],d=[],p=e.matchCase,f=e.matchWord,g=e.useRegExp,m=e.text;if(g&&(/^\\$/.test(m)||/[^\\]\\$/.test(m))&&(m=m.substring(0,m.length-1)),!m)return u;var y=p?"g":"gi",v=g?new RegExp(m,y):bu(m,y);return t.nodesBetween(n,i,(function(e,p){if(r(u))return!1;e.inlineContent&&p+e.content.size>=n&&(d.length=0,e.nodesBetween(0,e.content.size,(function(e,g,m,y){if(r(u))return!1;var b=1+p+g;if(e.isText&&b+e.nodeSize>=n){if(c=e.text||"",h=m.childCount-1>=y+1&&m.child(y+1),d.push(n<=b?{text:c,start:b}:{text:c.slice(n-b),start:n}),h&&h.isText)return;for(s=d.map((function(t){return t.text})).join(""),o=v.exec(s);null!==o&&(a=d[0].start+o.index,l=a+o[0].length,n<=a&&i>=l&&vu(o,f)&&u.push(se.create(t,a,l)),!r(u));)o=v.exec(s)}else d.length=0})))})),u},pu=function(t,e){var n=e.backward,i=e.matchCyclic,r=(0,Ie.__rest)(e,["backward","matchCyclic"]),o=n?function(){return!1}:function(t){return t.length>0},s=t.doc,a=t.selection,l=[];return n?!(l=du(s,r,0,a.from,o)).length&&i&&(l=du(s,r,a.from,s.content.size,o)):!(l=du(s,r,a.to,s.content.size,o)).length&&i&&(l=du(s,r,0,a.to,o)),l.length?l[l.length-1]:null},fu=function(t,e){return du(t,e,0,t.content.size,(function(){return!1}))},gu=function(t,e,n){var i=t.from,r=t.to;return n.insertText(e,i,r).setSelection(se.create(n.doc,i,i+e.length)),n},mu=function(t,e,n){var i=fu(t.doc,n);if(0===i.length)return null;for(var r=t.tr,o=i.length-1;o>=0;o--)r.insertText(e,i[o].from,i[o].to);return r},yu=/^[\s0-9~`!@#$%\^&*\(\)_\-=+\\|\[\]{};:'"\?/.,<>]?$/,vu=function(t,e){if(e){if(!0===e){var n=t.input,i=n.charAt(t.index-1),r=n.charAt(t.index+t[0].length);return yu.test(i)&&yu.test(r)}return e(t)}return!0},bu=function(t,e){var n=t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d").replace(/\s/g,"\\s");return new RegExp(n,e)};function wu(t){var e={class:"k-placeholder","data-placeholder":t};return new xe({key:new Ce("placeholder"),props:{decorations:function(t){var n=t.doc,i=n.content.firstChild;if(!(0===n.childCount||1===n.childCount&&i.inlineContent&&0===i.childCount))return ha.empty;var r=[];return n.descendants((function(t,n){r.push(aa.node(n,n+t.nodeSize,e))})),ha.create(n,r)}}})}var xu=/\s+/g,_u=/text-align/,Su=function(){return new xe({key:new Ce("spaces-fix"),props:{decorations:function(t){var e,n,i,r,o=[],s=t.doc;return s.nodesBetween(0,s.content.size,(function(t,s,a){if(t.type.isText&&function(t){return _u.test(t&&t.attrs&&t.attrs.style||"")}(a))for(n=xu.exec(t.text||"");null!==n;){if(e=s+n.index,i=n[0].length,n.index+i<n.input.length)for(r=0;r<=i-1;r+=2)o.push(aa.inline(e+r,e+r+1,{style:"white-space: normal"}));n=xu.exec(t.text||"")}})),ha.create(s,o)}}})},Cu=function(t,e){for(var n in e)n&&Je(t,n,e[n])},ku=function(t,e,n,i){void 0===i&&(i=!1),this.node=t,this.view=e,this.dom=document.createElement(n),Cu(this.dom,t.attrs),this.contentDOM=i?void 0:this.dom},Au=function(t,e){this.mark=t,this.view=e,this.dom=document.createElement("span"),Cu(this.dom,t.attrs),this.contentDOM=this.dom},Eu=function(){return new xe({key:new Ce("csp-fix"),props:{nodeViews:{paragraph:function(t,e){return new ku(t,e,"p")},div:function(t,e){return new ku(t,e,"div")},table_wrapper:function(t,e){return new ku(t,e,"div")},table_caption_external:function(t,e){return new ku(t,e,"div")},table:function(t,e){return new ku(t,e,"table")},table_row:function(t,e){return new ku(t,e,"tr")},table_cell:function(t,e){return new ku(t,e,"td")},table_header:function(t,e){return new ku(t,e,"th")},image:function(t,e){return new ku(t,e,"img",!0)}},markViews:{style:function(t,e){return new Au(t,e)}}}})},Tu=new Ce("highlight");function Mu(t){return void 0===t&&(t=Tu),new xe({key:t,state:{init:function(){return null},apply:function(t){return t.getMeta(this.spec.key)}},props:{decorations:function(t){var e=(this.spec.key.getState(t)||[]).map((function(t){return aa.inline(t.from,t.to,t.attrs)}));return ha.create(t.doc,e)}}})}var Ou={southeast:{x:1,y:1},east:{x:1,y:0},south:{x:0,y:1},north:{x:0,y:-1},west:{x:-1,y:0},southwest:{x:-1,y:1},northwest:{x:-1,y:-1},northeast:{x:1,y:-1}},Iu=Object.keys(Ou),Du=new Ce("image-resize"),Fu=function(t,e,n){t.style[e]=n+"px"},Pu=/[^\-]width:|[^\-]height:/,Ru=/^.+$/,Lu=function(){function t(t,e,n,i){this.activeHandle=t,this.dragging=e,this.rect=n,this.nodePosition=i}return t.prototype.apply=function(e){var n=e.getMeta(Du);return n?new t(n.activeHandle,n.setDragging,n.rect,n.nodePosition):this},t}(),Nu=function(t,e,n){var i=e.target.getAttribute(Oe);if(!i)return!1;var r=Du.getState(t.state);e.preventDefault();var o=t.state.tr;function s(e){!function(t,e,n){var i=Du.getState(t.state),r=i.rect,o=i.dragging,s=i.nodePosition,a=i.activeHandle;if(o&&r){var l=t.nodeDOM(s),c=Ou[a],h=(e.clientX-o.startX)*c.x,u=(e.clientY-o.startY)*c.y,d=c.x?h+l.width:r.width,p=c.y?u+l.height:r.height;if(n.lockRatio&&c.x&&c.y){var f=Math.min(d/l.width,p/l.height),g=l.width*f,m=l.height*f;o.startX=e.clientX-(d-g)*c.x,o.startY=e.clientY-(p-m)*c.y,d=g,p=m}else o.startX=c.x?e.clientX:o.startX,o.startY=c.y?e.clientY:o.startY;Fu(l,"width",d),Fu(l,"height",p),r.top=l.offsetTop,r.left=l.offsetLeft,r.width=l.offsetWidth,r.height=l.offsetHeight;var y=l.nextElementSibling;y.style.width=r.width+"px",y.style.height=r.height+"px",y.style.top=r.top+"px",y.style.left=r.left+"px"}}(t,e,n)}return o.setMeta(Du,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:i,rect:r.rect,nodePosition:r.nodePosition}),o.setMeta("addToHistory",!1),t.dispatch(o),e.view.addEventListener("mouseup",(function e(n){n.view.removeEventListener("mouseup",e),n.view.removeEventListener("mousemove",s),function(t){var e=Du.getState(t.state),n=e.rect,i=e.dragging,r=e.nodePosition;if(i&&n){var o=t.state.selection;if(o instanceof le){var s=o.node.attrs,a=n.width,l=n.height,c=void 0;if(Pu.test(s.style||"")){var h=De(s.style,{style:"width",value:Ru,newValue:a+"px"}),u=De(h.style||"",{style:"height",value:Ru,newValue:l+"px"}).style;c=(0,Ie.__assign)((0,Ie.__assign)({},s),{style:u})}else c=(0,Ie.__assign)((0,Ie.__assign)({},s),{width:a,height:l});var d=o.node.type.createAndFill(c);if(d){var p=t.state.tr;p.replaceWith(r,r+1,d),p.setSelection(le.create(p.doc,r)),p.setMeta("commandName","image-resize"),p.setMeta("args",c),p.setMeta(Du,{setDragging:null,activeHandle:null,rect:n,nodePosition:r}),t.dispatch(p)}}}}(t)})),e.view.addEventListener("mousemove",s),!0},Bu=function(t){return void 0===t&&(t={node:"image",lockRatio:!0}),new xe({key:Du,view:function(e){return{resize:function(){Du.getState(e.state).rect&&e.dispatch(e.state.tr.setMeta("resize",!0))},get window(){return e.dom.ownerDocument&&e.dom.ownerDocument.defaultView},attachResize:function(){var t=this.window;t&&(t.removeEventListener("resize",this.resize),t.addEventListener("resize",this.resize))},removeResize:function(){var t=this.window;t&&t.removeEventListener("resize",this.resize)},update:function(e,n){var i=e.state,r=i.selection,o=i.schema.nodes[t.node],s=Du.getState(i),a=s.rect;if(r instanceof le&&o===r.node.type){var l=e.nodeDOM(r.from),c={top:l.offsetTop,left:l.offsetLeft,width:l.offsetWidth,height:l.offsetHeight};if(!n.selection.eq(r)||a&&(a.width!==c.width||a.height!==c.height||a.top!==c.top||a.left!==c.left)){var h=i.tr;h.setMeta(Du,{rect:c,nodePosition:r.from}),e.dispatch(h),this.attachResize()}}else a&&(s.rect=null,s.nodePosition=-1)},destroy:function(){this.removeResize()}}},state:{init:function(){return new Lu("",null,null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(e,n){return Nu(e,n,t)}},decorations:function(e){var n=e.selection,i=e.schema.nodes[t.node],r=Du.getState(e).rect;if(r&&n instanceof le&&i===n.node.type){var o=document.createElement("div");o.className="k-editor-resize-handles-wrapper",o.style.width=r.width+"px",o.style.height=r.height+"px",o.style.top=r.top+"px",o.style.left=r.left+"px";for(var s=0;s<Iu.length;s++){var a=document.createElement("div");a.className=Te+" "+Iu[s],a.setAttribute(Oe,Iu[s]),o.appendChild(a)}return ha.create(e.doc,[aa.widget(e.selection.from+1,o)])}return ha.empty}}})},ju=new Ce("caret-color");function zu(){return new xe({key:ju,props:{decorations:function(t){var e=t.doc,n=t.selection,i=t.storedMarks;if(!n.empty||!i)return ha.empty;var r=Cn((i||[]).find((function(t){return"style"===t.type.name})),{name:"color",value:/^.+$/});if(!r)return ha.empty;var o=n.$anchor.parent,s=[];return e.descendants((function(t,e){t.eq(o)&&s.push(aa.node(e,e+t.nodeSize,{style:"caret-color: "+r}))})),ha.create(e,s)}}})}var $u=function(){function t(t,e){this.node=t,this.view=e,this.dom=document.createElement("div"),this.dom.className="k-editor-resize-wrap-element",this.table=this.dom.appendChild(document.createElement("table")),t.attrs[Ae]&&this.renderColgroup(t.attrs[Ae]);var n=this.table.appendChild(document.createElement("tbody"));this.setAttributes(this.table,t.attrs),this.resizeHandles=Iu.map((function(t){var e=document.createElement("span");return e.className=Te+" "+t,e.setAttribute(Me,t),e})),this.contentDOM=n}return t.prototype.update=function(t){var e=this;if(t.type!==this.node.type)return!1;var n=this.node;return this.node=t,t.attrs[Ee]?this.resizeHandles.forEach((function(t){e.dom.appendChild(t)})):Array.from(this.dom.children).filter((function(t){return t.classList.contains(Te)})).forEach((function(t){return t.remove()})),this.setAttributes(this.table,t.attrs),n.attrs[Ae]!==t.attrs[Ae]&&this.renderColgroup(t.attrs[Ae]),!0},t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&(t.target===this.table||t.target.firstChild===this.table||this.colgroup&&this.colgroup.contains(t.target))},t.prototype.destroy=function(){this.node=void 0,this.view=void 0,this.table=void 0,this.colgroup=void 0,this.resizeHandles=void 0},t.prototype.renderColgroup=function(t){this.table&&this.table.firstChild&&"COLGROUP"===this.table.firstChild.nodeName&&this.table.removeChild(this.table.firstChild),t&&(this.colgroup=$c(t),this.table.insertBefore(this.colgroup,this.table.firstChild))},t.prototype.setAttributes=function(t,e){var n=[Ae,Ee];for(var i in e)i&&-1===n.indexOf(i)&&Je(t,i,e[i]);/%$/.test(t.style.width)?(this.dom.style.width=t.style.width,t.style.width=""):this.dom.style.width=""},t}(),Hu=function(){function t(t,e){this.node=t,this.view=e,this.dom=document.createElement("div"),this.setAttributes(this.dom,t.attrs),this.contentDOM=this.dom}return t.prototype.update=function(t){return t.type===this.node.type&&(this.node=t,this.setAttributes(this.dom,t.attrs),!0)},t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&"style"===t.attributeName},t.prototype.destroy=function(){this.node=void 0,this.view=void 0},t.prototype.setAttributes=function(t,e){for(var n in e)n&&Je(t,n,e[n]);if(t.setAttribute("table",""),/%/.test(t.style.width)){var i=this.node&&this.node.lastChild,r=(i?Ge(i.attrs.style):{}).width||"";r&&!/%/.test(r)&&(t.style.width="")}},t}(),Uu=new Ce("table-resize"),Vu=new Ce("table-column-resizing"),Wu=new Ce("table-row-resizing");function qu(t,e){var n=!1;return n=(n=(n=n||t!==Uu&&Boolean(Uu.get(e))&&Uu.getState(e).dragging)||t!==Vu&&Boolean(Vu.get(e))&&Vu.getState(e).dragging)||t!==Wu&&Boolean(Wu.get(e))&&Wu.getState(e).dragging}function Ku(t,e){var n=!1;return n=(n=n||t!==Vu&&Boolean(Vu.get(e))&&Vu.getState(e).activeHandle>-1)||t!==Wu&&Boolean(Wu.get(e))&&Wu.getState(e).activeHandle>-1}function Xu(t){return t&&t.firstChild&&"TABLE"===t.firstChild.nodeName?t.firstChild:t}function Gu(t){for(;t&&"TD"!==t.nodeName&&"TH"!==t.nodeName;)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Yu(t){for(var e=function(t){var e=Array.from(t&&t.rows||[]),n=Array.from(e&&e[0]&&e[0].cells||[]).map((function(t){return t.colSpan})).reduce((function(t,e){return t+e}),0),i=e.map((function(){return new Array(n)}));return e.forEach((function(t,e){var n=0;Array.from(t.cells).forEach((function(t){for(var r=0;r<t.colSpan;r++){for(var o=0;o<t.rowSpan;o++){var s=i[e+o].findIndex((function(t,e){return e>=n&&!t}));i[e+o][s]=t}n++}}))})),i}(t.closest("table")),n=null,i=function(i){if(e[i].forEach((function(e,r){t===e&&(n={rowIndex:i,cellIndex:r})})),n)return"break"},r=0;r<e.length;r++){if("break"===i(r))break}return n||{rowIndex:-1,cellIndex:-1}}function Ju(t,e,n){var i=t.posAtCoords({left:e.clientX,top:e.clientY});if(!i)return-1;var r=t.state.doc.resolve(i.pos),o=Be(r,(function(t){return"table"===t.type.spec.tableRole}));if(null===o)return-1;var s=r.start(o.depth),a=o.node,l=il.get(a);return s+l.map[l.width*n.rowIndex+n.cellIndex]}function Zu(){var t=new xe({key:Vu,state:{init:function(){return new Qu(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return Ku(Vu,t)?null:Vu.getState(t).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,e){return qu(Vu,t.state)||function(t,e,n){var i=Vu.getState(t.state);if(!i.dragging){var r=Gu(e.target),o=-1;if(r){var s=Yu(r),a=r.getBoundingClientRect(),l=a.left,c=a.right;Math.abs(e.clientX-l)<=n&&s.cellIndex>0?(s.cellIndex-=r.colSpan,o=Ju(t,e,s)):c-e.clientX>0&&c-e.clientX<=n&&(o=Ju(t,e,s))}o!==i.activeHandle&&td(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=Vu.getState(t.state);e.activeHandle>-1&&!e.dragging&&td(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e,n){var i,r=Vu.getState(t.state);if(-1===r.activeHandle||r.dragging)return!1;for(var o=t.state.doc.resolve(r.activeHandle),s=o.parent,a=o.index(),l=0,c=0;c<=a;c++)l+=s.child(c).attrs.colspan;var h,u,d=o.node(o.depth-1),p=t.domAtPos(r.activeHandle),f=p.node.childNodes[p.offset].closest("table");if(d.attrs[Ae]){(h=(m=f.firstChild).children[l-1]).style.width||(h.style.width=h.offsetWidth+"px")}else{var g=0;for(c=0;c<s.childCount;c++)g+=s.child(c).attrs.colspan;var m=document.createElement("colgroup"),y=new Array(g);for(c=0;c<g;c++)y[c]=document.createElement("col"),m.appendChild(y[c]);f.insertBefore(m,f.firstChild),(h=y[a]).style.width=h.offsetWidth+"px",u=(0,Ie.__assign)((0,Ie.__assign)({},d.attrs),((i={})[Ae]="<colgroup>"+y.reduce((function(t,e){return t+e.outerHTML}),"")+"</colgroup>",i))}var v=parseFloat(h.style.width),b=t.state.tr.setMeta(Vu,{setDragging:{startX:e.clientX,startWidth:v}});if(!f.style.width){var w=Array.from(h.parentNode.children).map((function(t){return t.style.width}));if(w.every(Boolean)){var x=w.reduce((function(t,e){return t+parseFloat(e)}),0);u=Pe(u||d.attrs,"width",x+"px")}}if(u){var _=o.posAtIndex(0,o.depth-1)-1;b.setNodeMarkup(_,null,u)}function S(e){e.view.removeEventListener("mouseup",S),e.view.removeEventListener("mousemove",C);var n=Vu.getState(t.state);if(n.dragging){var i=t.state.tr;!function(t,e,n){var i,r=t.state.doc.resolve(n),o=r.node(-1),s=r.start(-1),a=r.posAtIndex(0,r.depth-1)-1,l=t.nodeDOM(s).closest("table"),c=o.attrs;if(o&&c[Ae]){var h=l.firstChild;c=(0,Ie.__assign)((0,Ie.__assign)({},c),((i={})[Ae]=h.outerHTML,i))}var u=l.style.width;l&&u&&Ge(c.style).width!==u&&(c=Pe(c,"width",u));e.setNodeMarkup(a,null,c)}(t,i,n.activeHandle),t.dispatch(i.setMeta(Vu,{setDragging:null}))}}function C(e){if(!e.which)return S(e);var i=Vu.getState(t.state),r=function(t,e,n){var i=e.clientX-t.startX;return Math.max(n,t.startWidth+i)}(i.dragging,e,n);!function(t,e,n){var i=t.state.doc.resolve(e),r=i.node(-1),o=i.start(-1),s=il.get(r).colCount(i.pos-o)+i.nodeAfter.attrs.colspan-1,a=t.domAtPos(i.start(-1)).node;"TABLE"!==a.nodeName&&(a=a.closest("table"));var l=a,c=l.firstChild,h=Array.from(c.children);if(h[s].style.width=n+"px",l.style.width){var u=h.map((function(t){return t.style.width}));if(u.every(Boolean)){var d=u.reduce((function(t,e){return t+parseFloat(e)}),0);l.style.width=d+"px"}}}(t,i.activeHandle,r)}return t.dispatch(b),e.view.addEventListener("mouseup",S),e.view.addEventListener("mousemove",C),e.preventDefault(),!0}(t,e,25)}},decorations:function(t){if(!qu(Vu,t)){var e=Vu.getState(t);if(e.activeHandle>-1)return function(t,e){for(var n=[],i=t.doc.resolve(e),r=i.node(-1),o=il.get(r),s=i.start(-1),a=[],l=e-s,c=-1,h=0;h<o.height;h++)a.push(o.map.slice(h*o.width,h*o.width+o.width)),-1===c&&(c=a[h].lastIndexOf(l));var u=[];return a.forEach((function(t){var e=t[c];t[c]!==t[c+1]&&u.push(e)})),u.forEach((function(t){var e=s+t+r.nodeAt(t).nodeSize-1,i=document.createElement("div");i.className="column-resize-handle",n.push(aa.widget(e,i))})),ha.create(t.doc,n)}(t,e.activeHandle)}return ha.empty},nodeViews:{table_wrapper:function(t,e){return new Hu(t,e)},table:function(t,e){return new $u(t,e)}}}});return t}var Qu=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var n,i,r=e.getMeta(Vu);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(this.activeHandle,r.setDragging);if(this.activeHandle>-1&&e.docChanged){var o=e.mapping.map(this.activeHandle,-1);i=e.doc.resolve(o),Boolean("row"===i.parent.type.spec.tableRole&&i.nodeAfter)||(o=-1),n=new t(o,this.dragging)}return n||this},t}();function td(t,e){var n=t.state.tr;n.setMeta("addToHistory",!1),n.setMeta(Vu,{setHandle:e}),t.dispatch(n)}var ed={southeast:!0,southwest:!0,northwest:!0,northeast:!0},nd=(0,Ie.__assign)({east:!0,west:!0},ed),id=(0,Ie.__assign)({south:!0,north:!0},ed),rd=function(){function t(t,e,n){this.activeHandle=t,this.dragging=e,this.nodePosition=n}return t.prototype.apply=function(e){var n=e.getMeta(Uu);return n?new t(n.activeHandle,n.setDragging,n.nodePosition):this},t}(),od=function(t){var e=Array.from(t.firstChild.children).map((function(t){return t.offsetWidth})),n=Array.from(t.rows).map((function(t){return t.offsetHeight})),i=e.reduce((function(t,e){return t+e}),0),r=n.reduce((function(t,e){return t+e}),0),o=t.offsetHeight;return{width:i,height:r,colsWidth:e,rowsHeight:n,offsetWidth:t.offsetWidth,offsetHeight:o}},sd=function(t){var e=Uu.getState(t.state),n=e.dragging,i=e.nodePosition,r=e.activeHandle;if(n){var o=t.state.doc.nodeAt(i),s=Xu(t.nodeDOM(i)),a=od(s);if(o){var l=a.offsetWidth+"px",c=a.offsetHeight+"px",h=t.state.tr,u=o.attrs,d=Ge(u.style);if(nd[r]&&s.style.width&&d.width!==l&&(u=Pe(u,"width",l)),id[r]&&s.style.height&&d.height!==c&&(u=Pe(u,"height",c)),u=function(t,e,n,i){var r=t.state.doc.nodeAt(n),o=Xu(t.nodeDOM(n)),s=(o.ownerDocument&&o.ownerDocument.defaultView||window).getComputedStyle,a=Array.from(o.rows);r.forEach((function(t,i,r){var o=Ge(t.attrs.style).height;o&&!/px$/.test(o)&&e.setNodeMarkup(n+i+1,null,Pe(t.attrs,"height",s(a[r]).height))}));var l=o.firstChild,c=Array.from(l&&l.children||[]),h=!1;c.forEach((function(t,e){t.style.width&&!/px$/.test(t.style.width)&&(t.style.width=s(c[e]).width,h=!0)}));var u=(0,Ie.__assign)({},i);return h&&(u[Ae]=l.outerHTML),u}(t,h,i,u),h.setNodeMarkup(i,null,u),h.setMeta("commandName","node-resize"),h.setMeta("args",u),h.setMeta(Uu,{setDragging:null,activeHandle:null,nodePosition:i}),!/%/.test(Ge(u.style).width||"")){var p=h.doc.resolve(i),f=Be(p,(function(t){return"table_wrapper"===t.type.name}));if(f&&/%/.test(Ge(f.node.attrs.style).width||"")){var g=Pe(f.node.attrs,"width",""),m=p.start(f.depth)-1;h.setNodeMarkup(m,null,g)}}t.dispatch(h)}}},ad=function(t,e){var n=e.target.getAttribute(Me);if(!n)return!1;var i=Uu.getState(t.state);e.preventDefault();var r=t.state.tr;r.setMeta(Uu,{setDragging:{startX:e.clientX,startY:e.clientY},activeHandle:n,nodePosition:i.nodePosition}),r.setMeta("addToHistory",!1),function(t,e,n){var i=t.state.doc.nodeAt(n),r=Xu(t.nodeDOM(n)),o=od(r),s=o.width,a=o.height,l=o.colsWidth,c=o.rowsHeight,h=o.offsetWidth,u=o.offsetHeight,d=r.firstChild,p=Array.from(d&&d.children||[]),f=!1;p.forEach((function(t,e){t.style.width&&!/%$/.test(t.style.width)&&(t.style.width=100*l[e]/s+"%",f=!0)}));var g=!1;i.forEach((function(t,i,r){var o=Ge(t.attrs.style).height;o&&!/%$/.test(o)&&(e.setNodeMarkup(n+i+1,null,Pe(t.attrs,"height",100*c[r]/a+"%")),g=!0)}));var m=i.attrs;Ge(m.style).width!==h+"px"&&(m=Pe(m,"width",h+"px")),f&&(m[Ae]=d.outerHTML),g&&(m=Pe(m,"height",u+"px")),(f||g)&&e.setNodeMarkup(n,null,m)}(t,r,i.nodePosition),t.dispatch(r);var o=e.view||window;function s(e){!function(t,e){var n,i=Uu.getState(t.state),r=i.dragging,o=i.nodePosition,s=i.activeHandle;if(!(o<0)&&r){var a=Xu(t.nodeDOM(o)),l=a.getBoundingClientRect(),c=Ou[s],h=(e.clientX-r.startX)*c.x,u=(e.clientY-r.startY)*c.y,d=(a.ownerDocument&&a.ownerDocument.defaultView||window).getComputedStyle(a),p=/px/.test(d.width)?parseFloat(d.width):a.offsetWidth,f=/px/.test(d.height)?parseFloat(d.height):a.offsetHeight,g=c.x?h+p:l.width,m=c.y?u+f:l.height;if(r.startX=c.x?e.clientX:r.startX,r.startY=c.y?e.clientY:r.startY,nd[s]&&(a.style.width=g+"px"),id[s]&&(a.style.height=m+"px"),/px/.test(a.style.width)){var y=null===(n=a.parentNode)||void 0===n?void 0:n.parentNode;y instanceof HTMLDivElement&&y.matches("div[table]")&&/%/.test(y.style.width)&&(y.style.width="")}}}(t,e)}return o.addEventListener("mouseup",(function e(){o.removeEventListener("mouseup",e),o.removeEventListener("mousemove",s),sd(t)})),o.addEventListener("mousemove",s),!0},ld=function(){function t(){}return t.prototype.ignoreMutation=function(t){return"attributes"===t.type&&"style"===t.attributeName&&"TR"===t.target.nodeName},t}();function cd(){var t=new xe({key:Wu,state:{init:function(t,e){return this.spec.props.nodeViews[ll(e.schema).row.name]=function(){return new ld},new hd(-1,null)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){return Ku(Wu,t)?null:Wu.getState(t).activeHandle>-1?{class:"resize-cursor-vertical"}:null},handleDOMEvents:{mousemove:function(t,e){return qu(Wu,t.state)||function(t,e,n){var i=Wu.getState(t.state);if(!i.dragging){var r=Gu(e.target),o=-1;if(r){var s=Yu(r),a=r.getBoundingClientRect(),l=a.top,c=a.bottom;Math.abs(e.clientY-l)<=n&&s.rowIndex>0?(s.rowIndex-=r.rowSpan,o=Ju(t,e,s)):c-e.clientY>0&&c-e.clientY<=n&&(o=Ju(t,e,s))}o!==i.activeHandle&&ud(t,o)}}(t,e,5),!1},mouseleave:function(t){return function(t){var e=Wu.getState(t.state);e.activeHandle>-1&&!e.dragging&&ud(t,-1)}(t),!1},mousedown:function(t,e){return function(t,e){var n=Wu.getState(t.state);if(-1===n.activeHandle||n.dragging)return!1;var i=t.state.doc,r=i.resolve(n.activeHandle),o=r.parent,s=r.node(-1),a=Ge(o.attrs.style).height,l=Ge(s.attrs.style).height,c=a?parseFloat(a):0;if(!a){c=t.nodeDOM(n.activeHandle).offsetHeight}function h(e){e.view.removeEventListener("mouseup",h),e.view.removeEventListener("mousemove",u);var n=Wu.getState(t.state);if(n.dragging){var i=t.state.tr.setMeta(Wu,{setDragging:null});!function(t,e,n){var i=t.state.doc,r=i.resolve(n),o=r.parent,s=r.posAtIndex(0)-1,a=t.nodeDOM(s),l=a.ownerDocument&&a.ownerDocument.defaultView||window;a.style.height=l.getComputedStyle(a).height,e.setNodeMarkup(s,null,Pe(o.attrs,"height",a.style.height));var c=a&&a.closest("table"),h=c&&c.style.height;if(h){var u=i.resolve(s),d=u.start(u.depth)-1;e.setNodeMarkup(d,null,Pe(u.parent.attrs,"height",h))}}(t,i,n.activeHandle),t.dispatch(i)}}function u(e){if(!e.which)return h(e);var n=Wu.getState(t.state),i=function(t,e){var n=e.clientY-t.startY;return t.startHeight.rowHeight+n}(n.dragging,e),r=e.clientY-n.dragging.startY;!function(t,e,n,i,r){var o=t.nodeDOM(e),s=o&&o.parentNode;if(s){s.style.height=n+"px";var a=s.ownerDocument&&s.ownerDocument.defaultView||window;s.style.height=a.getComputedStyle(s).height;var l=s.closest("table"),c=parseFloat(r)+i+"px",h=l&&l.style.height;h&&h!==c&&(l.style.height=parseFloat(r)+i+"px",l.style.height=a.getComputedStyle(l).height)}}(t,n.activeHandle,i,r,l)}return t.dispatch(t.state.tr.setMeta(Wu,{setDragging:{startY:e.clientY,startHeight:{rowHeight:c,tableHeight:l}}})),e.view.addEventListener("mouseup",h),e.view.addEventListener("mousemove",u),e.preventDefault(),!0}(t,e)}},decorations:function(t){if(qu(Wu,t))return ha.empty;var e=Wu.getState(t);return e.activeHandle>-1?function(t,e){var n=[];if("number"!=typeof e)return ha.empty;for(var i=t.doc.resolve(e),r=i.node(-1),o=il.get(r),s=i.start(-1),a=[],l=e-s,c=-1,h=0;h<o.height;h++)a.push(o.map.slice(h*o.width,h*o.width+o.width)),-1!==a[h].indexOf(l)&&(c=h);var u=[];return a[c].forEach((function(t,e){a[c+1]&&t===a[c+1][e]||u.push(t)})),u.forEach((function(t){var e=r.nodeAt(t),i=s+t+(e?e.nodeSize:0)-1,o=document.createElement("div");o.className="row-resize-handle",n.push(aa.widget(i,o))})),ha.create(t.doc,n)}(t,e.activeHandle):void 0},nodeViews:{}}});return t}var hd=function(){function t(t,e){this.activeHandle=t,this.dragging=e}return t.prototype.apply=function(e){var n,i,r=e.getMeta(Wu);if(r&&null!=r.setHandle)return new t(r.setHandle,null);if(r&&void 0!==r.setDragging)return new t(this.activeHandle,r.setDragging);if(this.activeHandle>-1){var o=e.mapping.map(this.activeHandle,-1);"row"===(i=e.doc.resolve(o)).parent.type.spec.tableRole&&i.nodeAfter||(o=null),n=new t(o,this.dragging)}return n||this},t}();function ud(t,e){var n=t.state.tr;n.setMeta("addToHistory",!1),n.setMeta(Wu,{setHandle:e}),t.dispatch(n)}var dd=function(){return[(void 0===t&&(t={node:"table"}),new xe({key:Uu,view:function(){return{selectedNode:function(t,e){var n=t.selection;if(n instanceof le&&e===n.node.type&&n instanceof le)return{node:n.node,pos:n.from};var i=Be(n.$from,(function(t){return t.type===e})),r=i&&i.node;return r?{node:r,pos:n.$from.start(i.depth)-1}:null},update:function(e,n){var i,r,o,s,a,l=e.state,c=l.schema.nodes[t.node],h=this.selectedNode(l,c),u=this.selectedNode(n,c);if((h||!u||n.doc.eq(e.state.doc))&&(h||u)){var d=l.tr;if(d.setMeta("addToHistory",!1),h&&u&&h.pos!==u.pos){d.setMeta(Uu,{nodePosition:h.pos});var p=d.doc.nodeAt(u.pos);p&&p.type.name===c.name&&d.setNodeMarkup(u.pos,c,(0,Ie.__assign)((0,Ie.__assign)({},u.node.attrs),((i={})[Ee]=!1,i))),d.setNodeMarkup(h.pos,c,(0,Ie.__assign)((0,Ie.__assign)({},h.node.attrs),((r={})[Ee]=!0,r))),e.dispatch(d)}else h&&u&&h.pos===u.pos&&!h.node.attrs[Ee]&&!l.selection.eq(n.selection)?(d.setMeta(Uu,{nodePosition:h.pos}),e.dispatch(d.setNodeMarkup(h.pos,c,(0,Ie.__assign)((0,Ie.__assign)({},h.node.attrs),((o={})[Ee]=!0,o))))):h&&!u?(d.setMeta(Uu,{nodePosition:h.pos}),e.dispatch(d.setNodeMarkup(h.pos,c,(0,Ie.__assign)((0,Ie.__assign)({},h.node.attrs),((s={})[Ee]=!0,s))))):!h&&u&&(d.setMeta(Uu,{nodePosition:-1}),e.dispatch(d.setNodeMarkup(u.pos,c,(0,Ie.__assign)((0,Ie.__assign)({},u.node.attrs),((a={})[Ee]=!1,a)))))}}}},state:{init:function(){return new rd("",null,-1)},apply:function(t,e){return e.apply(t)}},props:{handleDOMEvents:{mousedown:function(t,e){return ad(t,e)}}}})),Zu(),cd()];var t},pd=function(t,e,n,i,r){var o,s,a=r.resolve(t),l=r.resolve(e),c=i.type.name;return!a.nodeBefore&&(o=a.node(a.depth),s=a.node(a.depth-1),o&&s&&s.firstChild===o&&s.type.name===c)?n+i.content.size<=e:!l.nodeAfter&&(o=l.node(l.depth),s=l.node(l.depth-1),o&&s&&s.lastChild===o&&s.type.name===c)?t<=n:t<=n&&n+i.content.size<=e},fd=function(t,e,n){var i=e.tr,r=e.doc,o=e.selection,s=o.from,a=o.to,l=t.getMeta("args");return r.nodesBetween(s,a,(function(t,e){t.type.name===n.listItem&&pd(s,a,e,t,r)&&i.setNodeMarkup(e,null,(0,Ie.__assign)((0,Ie.__assign)({},t.attrs),{style:Ye(t.attrs.style,l.style,l.value)}))})),i.docChanged?i:void 0},gd=function(t,e,n){var i=Object.keys(n.resetValues),r=e.tr,o=e.doc,s=e.selection,a=s.from,l=s.to;return o.nodesBetween(a,l,(function(t,e){if(t.type.name===n.listItem&&pd(a,l,e,t,o)){var s=t.attrs,c=Ge(t.attrs.style);i.forEach((function(t){c[t]&&(s=(0,Ie.__assign)((0,Ie.__assign)({},s),{style:Ye(s.style,t,"")}))})),s!==t.attrs&&r.setNodeMarkup(e,null,s)}})),t.steps.forEach((function(t){if(t instanceof Ct){var e=t.mark;if("style"===e.type.name&&e.attrs.style){var i=e.attrs.style.split(/\s*:\s*/)[0],o=Be(r.doc.resolve(t.from),(function(t){return t.type.name===n.listItem}));if(o)if(Ge(o.node.attrs.style)[i]&&n.resetValues[i]){var s=e.type.create({style:"".concat(i,": ").concat(n.resetValues[i],";")});r.addMark(t.from,t.to,s)}}}})),r.docChanged?r:void 0},md={listItem:"list_item",resetValues:{"font-size":"","font-family":"",color:""}};function yd(t){return void 0===t&&(t=md),new xe({key:new Ce("list-markers-styles"),appendTransaction:function(e,n,i){var r,o=e.slice().pop(),s=o.getMeta("commandName");return"FontSize"===s||"FontName"===s||"ForeColor"===s?r=fd(o,i,t):"CleanFormatting"===s&&(r=gd(o,i,t)),r&&r.setMeta("addToHistory",!0),r}})}function vd(t={}){return new xe({view:e=>new bd(e,t)})}class bd{constructor(t,e){var n;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=null!==(n=e.width)&&void 0!==n?n:1,this.color=!1===e.color?void 0:e.color||"black",this.class=e.class,this.handlers=["dragover","dragend","drop","dragleave"].map((e=>{let n=t=>{this[e](t)};return t.dom.addEventListener(e,n),{name:e,handler:n}}))}destroy(){this.handlers.forEach((({name:t,handler:e})=>this.editorView.dom.removeEventListener(t,e)))}update(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t,e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent;if(n){let n=e.nodeBefore,i=e.nodeAfter;if(n||i){let e=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0));if(e){let r=e.getBoundingClientRect(),o=n?r.bottom:r.top;n&&i&&(o=(o+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:o-this.width/2,bottom:o+this.width/2}}}}if(!t){let e=this.editorView.coordsAtPos(this.cursorPos);t={left:e.left-this.width/2,right:e.left+this.width/2,top:e.top,bottom:e.bottom}}let i,r,o=this.editorView.dom.offsetParent;if(this.element||(this.element=o.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n),!o||o==document.body&&"static"==getComputedStyle(o).position)i=-pageXOffset,r=-pageYOffset;else{let t=o.getBoundingClientRect();i=t.left-o.scrollLeft,r=t.top-o.scrollTop}this.element.style.left=t.left-i+"px",this.element.style.top=t.top-r+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout((()=>this.setCursor(null)),t)}dragover(t){if(!this.editorView.editable)return;let e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),n=e&&e.inside>=0&&this.editorView.state.doc.nodeAt(e.inside),i=n&&n.type.spec.disableDropCursor,r="function"==typeof i?i(this.editorView,e,t):i;if(e&&!r){let t=e.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let e=zt(this.editorView.state.doc,t,this.editorView.dragging.slice);null!=e&&(t=e)}this.setCursor(t),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class wd extends ne{constructor(t){super(t,t)}map(t,e){let n=t.resolve(e.map(this.head));return wd.valid(n)?new wd(n):ne.near(n)}content(){return p.empty}eq(t){return t instanceof wd&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,e){if("number"!=typeof e.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new wd(t.resolve(e.pos))}getBookmark(){return new xd(this.anchor)}static valid(t){let e=t.parent;if(e.isTextblock||!function(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(0!=n)for(let t=i.child(n-1);;t=t.lastChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(i.type.spec.isolating)return!0}return!0}(t)||!function(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n!=i.childCount)for(let t=i.child(n);;t=t.firstChild){if(0==t.childCount&&!t.inlineContent||t.isAtom||t.type.spec.isolating)return!0;if(t.inlineContent)return!1}else if(i.type.spec.isolating)return!0}return!0}(t))return!1;let n=e.type.spec.allowGapCursor;if(null!=n)return n;let i=e.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,e,n=!1){t:for(;;){if(!n&&wd.valid(t))return t;let i=t.pos,r=null;for(let n=t.depth;;n--){let o=t.node(n);if(e>0?t.indexAfter(n)<o.childCount:t.index(n)>0){r=o.child(e>0?t.indexAfter(n):t.index(n)-1);break}if(0==n)return null;i+=e;let s=t.doc.resolve(i);if(wd.valid(s))return s}for(;;){let o=e>0?r.firstChild:r.lastChild;if(!o){if(r.isAtom&&!r.isText&&!le.isSelectable(r)){t=t.doc.resolve(i+r.nodeSize*e),n=!1;continue t}break}r=o,i+=e;let s=t.doc.resolve(i);if(wd.valid(s))return s}return null}}}wd.prototype.visible=!1,wd.findFrom=wd.findGapCursorFrom,ne.jsonID("gapcursor",wd);class xd{constructor(t){this.pos=t}map(t){return new xd(t.map(this.pos))}resolve(t){let e=t.resolve(this.pos);return wd.valid(e)?new wd(e):ne.near(e)}}function _d(){return new xe({props:{decorations:Ed,createSelectionBetween:(t,e,n)=>e.pos==n.pos&&wd.valid(n)?new wd(n):null,handleClick:kd,handleKeyDown:Sd,handleDOMEvents:{beforeinput:Ad}}})}const Sd=tl({ArrowLeft:Cd("horiz",-1),ArrowRight:Cd("horiz",1),ArrowUp:Cd("vert",-1),ArrowDown:Cd("vert",1)});function Cd(t,e){const n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,i,r){let o=t.selection,s=e>0?o.$to:o.$from,a=o.empty;if(o instanceof se){if(!r.endOfTextblock(n)||0==s.depth)return!1;a=!1,s=t.doc.resolve(e>0?s.after():s.before())}let l=wd.findGapCursorFrom(s,e,a);return!!l&&(i&&i(t.tr.setSelection(new wd(l))),!0)}}function kd(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!wd.valid(i))return!1;let r=t.posAtCoords({left:n.clientX,top:n.clientY});return!(r&&r.inside>-1&&le.isSelectable(t.state.doc.nodeAt(r.inside)))&&(t.dispatch(t.state.tr.setSelection(new wd(i))),!0)}function Ad(t,e){if("insertCompositionText"!=e.inputType||!(t.state.selection instanceof wd))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let r=a.empty;for(let t=i.length-1;t>=0;t--)r=a.from(i[t].createAndFill(null,r));let o=t.state.tr.replace(n.pos,n.pos,new p(r,0,0));return o.setSelection(se.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function Ed(t){if(!(t.selection instanceof wd))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",ha.create(t.doc,[aa.widget(t.selection.head,e,{key:"gapcursor"})])}var Td=function(t,e,n){for(var i,r=t.table,o=t.table_row,s=t.table_cell,a=[],l=0;l<e+1;l++){i=[];for(var c=0;c<n+1;c++)i.push(s.createAndFill());a.push(o.createAndFill(void 0,i))}return r.createAndFill(void 0,a)},Md=/^table$/,Od=/^table_row$/,Id=/^table_cell|table_header$/,Dd=function(t,e){for(var n=t.$head,i=n.depth;i>0;i--){var r=n.node(i);if(e.test(r.type.name))return{pos:n.before(i),node:r}}return null},Fd=function(t,e){var n=e&&function(t){var n,i=Dd(t.selection,Od),r=Dd(t.selection,Md);if(i&&r&&i.node.attrs[ke]){for(var o=0,s=0;s<r.node.nodeSize;s++)if(r.node.child(s).eq(i.node)){o=s;break}var a=r.node.child(o-1),l=i.pos-a.nodeSize;t.setNodeMarkup(l,void 0,((n={})[ke]=i.node.attrs[ke],n))}return e(t)};return ac(t,n)},Pd=function(t,e){return lc(t,e&&function(t){var n,i=Dd(t.selection,Od);if(i&&i.node.attrs[ke]){var r=i.pos+i.node.nodeSize;t.setNodeMarkup(r,void 0,((n={})[ke]=i.node.attrs[ke],n))}return e(t)})},Rd=function(t,e){if(!t)return-1;var n=il.get(t.node),i=Dd(e,Id),r=n.map.indexOf(i.pos-t.pos-1),o=-1;return-1!==r&&(o=r%n.width),o},Ld=function(t,e,n){var i,r=Rd(e,t.selection),o=$c(e.node.attrs[Ae]);o.insertBefore(o.ownerDocument.createElement("col"),o.children[r+n]),t.setNodeMarkup(e.pos,null,(0,Ie.__assign)((0,Ie.__assign)({},e.node.attrs),((i={})[Ae]=o.outerHTML,i)))},Nd=function(t,e){return ec(t,e&&function(t){var n=Dd(t.selection,Md);return n.node.attrs[Ae]?(Ld(t,n,-1),e(t)):e(t)})},Bd=function(t,e){return nc(t,e&&function(t){var n=Dd(t.selection,Md);return n.node.attrs[Ae]?(Ld(t,n,1),e(t)):e(t)})},jd=function(t,e){var n=Dd(t.selection,Md),i=n&&n.node.attrs[Ae],r=Rd(n,t.selection),o=e&&function(t){if(!i)return e(t);var o=t.doc.nodeAt(n.pos);return function(t,e,n){var i,r=$c(e.node.attrs[Ae]);r.removeChild(r.children[n]),t.setNodeMarkup(e.pos,null,(0,Ie.__assign)((0,Ie.__assign)({},e.node.attrs),((i={})[Ae]=r.outerHTML,i)))}(t,{node:o,pos:n.pos},r),e(t)};return rc(t,o)}},9478:(t,e,n)=>{"use strict";function i(t,e,n){void 0===n&&(n={});var i=l;if(n.forceProxy&&!n.proxyURL)throw new Error("No proxyURL is set, but forceProxy is true");n.forceProxy||(o()&&(i=a),navigator.msSaveBlob&&(i=s)),i(t,e,n)}n.r(e),n.d(e,{encodeBase64:()=>u,saveAs:()=>i});var r=function(){return document.createElement("a")},o=function(){return"download"in r()};function s(t,e){var n=t;if("string"==typeof t){for(var i=t.split(";base64,"),r=i[0],o=atob(i[1]),s=new Uint8Array(o.length),a=0;a<o.length;a++)s[a]=o.charCodeAt(a);n=new Blob([s.buffer],{type:r})}navigator.msSaveBlob(n,e)}function a(t,e){var n=t;window.Blob&&t instanceof Blob&&(n=URL.createObjectURL(t));var i=r();i.download=e,i.href=n;var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),i.dispatchEvent(o),setTimeout((function(){return URL.revokeObjectURL(n)}))}function l(t,e,n){if(n.proxyURL){var i=document.createElement("form");i.setAttribute("action",n.proxyURL),i.setAttribute("method","POST"),i.setAttribute("target",n.proxyTarget||"_self");var r=n.proxyData||{};r.fileName=e;var o=t.split(";base64,");for(var s in r.contentType=o[0].replace("data:",""),r.base64=o[1],r)if(r.hasOwnProperty(s)){var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",s),a.setAttribute("value",r[s]),i.appendChild(a)}document.body.appendChild(i),i.submit(),document.body.removeChild(i)}}var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=String.fromCharCode;function u(t){for(var e,n,i,r,o,s,a,l=function(t){for(var e="",n=0;n<t.length;n++){var i=t.charCodeAt(n);i<128?e+=h(i):i<2048?(e+=h(192|i>>>6),e+=h(128|63&i)):i<65536&&(e+=h(224|i>>>12),e+=h(128|i>>>6&63),e+=h(128|63&i))}return e}(t),u="",d=0;d<l.length;)r=(e=l.charCodeAt(d++))>>2,o=(3&e)<<4|(n=l.charCodeAt(d++))>>4,s=(15&n)<<2|(i=l.charCodeAt(d++))>>6,a=63&i,isNaN(n)?s=a=64:isNaN(i)&&(a=64),u=u+c.charAt(r)+c.charAt(o)+c.charAt(s)+c.charAt(a);return u}},1243:(t,e,n)=>{"use strict";var i;n.r(e),n.d(e,{MaskingService:()=>p,SignaturePad:()=>I}),function(t){t[t.Literal=0]="Literal",t[t.Mask=1]="Mask",t[t.Undefined=2]="Undefined"}(i||(i={}));var r=function(){function t(t,e,n){void 0===n&&(n=i.Undefined),this.value=t,this.rest=e,this.type=n}return t.prototype.map=function(e){return new t(e(this.value),this.rest)},t.prototype.chain=function(t){return t(this.value,this.rest)},t.prototype.fold=function(t,e){return t(this.value,this.rest)},t.prototype.concat=function(t){return this.map((function(e,n){return t.chain((function(t,n){return e.concat([t])}))}))},t.prototype.toString=function(){return"Result({ value: '"+this.value+"', rest: "+this.rest+" })"},t}(),o=function(){function t(t,e){void 0===t&&(t=[]),void 0===e&&(e=[]),this.input=t,this.control=e,this.inputCursor=0,this.controlCursor=0}return t.prototype.eof=function(){return this.inputCursor>=this.input.length},t.prototype.next=function(){return{char:this.input[this.inputCursor++],control:this.control[this.controlCursor++]}},t.prototype.peek=function(){return{char:this.input[this.inputCursor],control:this.control[this.controlCursor]}},t.prototype.eat_input=function(){this.inputCursor++},t.prototype.eat_control=function(){this.controlCursor++},t.prototype.eat=function(){this.inputCursor++,this.controlCursor++},t}(),s=function(t){return(t||"").split("")},a=function(){function t(t){this.parse=t}return t.prototype.run=function(t,e){return void 0===e&&(e=""),t instanceof o?this.parse(t):this.parse(new o(s(t),s(e)))},t.prototype.map=function(e){var n=this;return new t((function(t){return n.parse(t).map(e)}))},t.prototype.chain=function(e){var n=this;return new t((function(t){return n.parse(t).chain((function(t,n){return e(t).run(n)}))}))},t.prototype.isLiteral=function(t){return this.run(t).type===i.Literal},t}(),l=function(t,e){return new a((function(n){var i=n.next().char,o=t[i];return"\\"===i?(i=n.next().char,new r(e.literal(i),n)):new r(o?e.mask(o):e.literal(i),n)}))},c=function(t){var e=t.prompt,n=t.promptPlaceholder;return new a((function(t){var i=t.next().char;return new r(i===e?n:i,t)}))},h=function(t){return new a((function(e){var n=e.next().char;return new r(t?n:"",e)}))},u=function(t){return t.reduce((function(t,e){return n=e,t.chain((function(t){return n.map((function(e){return t.concat([e])}))}));var n}),(e=[],new a((function(t){return new r(e,t)}))));var e},d=function(t){return new a((function(e){for(var n=new r([],e);!e.eof();)n=n.concat(t.run(e));return n}))},p=function(){function t(){this.rules={},this.prompt="_",this.mask="",this.promptPlaceholder=" ",this.includeLiterals=!1,this.maskTokens=[],this.unmaskTokens=[],this.rawTokens=[],this.validationTokens=[]}return t.prototype.update=function(t){var e=t.mask,n=void 0===e?"":e,i=t.prompt,r=void 0===i?"":i,o=t.promptPlaceholder,s=void 0===o?" ":o,a=t.rules,l=void 0===a?{}:a,c=t.includeLiterals,h=void 0!==c&&c;this.mask=n,this.prompt=r,this.promptPlaceholder=s,this.rules=l,this.includeLiterals=h,this.tokenize()},t.prototype.validationValue=function(t){void 0===t&&(t="");var e=t;return u(this.validationTokens).run(t).fold((function(t){e=t.join("")})),e},t.prototype.rawValue=function(t){void 0===t&&(t="");var e=t;return this.rawTokens.length?(u(this.rawTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskRaw=function(t){void 0===t&&(t="");var e=t;return this.maskTokens.length?(u(this.maskTokens).run(t).fold((function(t){e=t.join("")})),e):e},t.prototype.maskInput=function(t,e,n){return t.length<e.length?this.maskRemoved(t,e,n):this.maskInserted(t,e,n)},t.prototype.maskInRange=function(t,e,n,i){var r="",o=i,s=e.split("").slice(0,n),a=e.split("").slice(i);return u(this.maskTokens.slice(n,i)).run(t).fold((function(t){r=s.concat(t).concat(a).join("")})),{selection:o,value:r}},t.prototype.maskRemoved=function(t,e,n){var i=this,r="",o=n,s=t.split("").slice(n),a=t.split("").slice(0,n).join(""),l=this.maskTokens.length-(t.length-n);return u(this.maskTokens.slice(0,l)).run(a,e).fold((function(t){o=i.adjustPosition(t,o),r=t.concat(s).join("")})),{selection:o,value:r}},t.prototype.adjustPosition=function(t,e){var n=t[e];return this.maskTokens[e].isLiteral(n)||n===this.prompt?e:e+1},t.prototype.maskInserted=function(t,e,n){var i=this,r="",o=n,s=t.slice(0,n);return u(this.unmaskTokens).run(s,e).chain((function(t){o=t.join("").length;var n=e.slice(o);return u(i.maskTokens).run(t.join("")+n,e)})).fold((function(t){r=t.join("")})),{selection:o,value:r}},Object.defineProperty(t.prototype,"maskTokenCreator",{get:function(){var t=this.prompt,e=this.promptPlaceholder;return{literal:function(t){return e=t,new a((function(t){return t.peek().char===e?(t.eat(),new r(e,t,i.Literal)):new r(e,t,i.Literal)}));var e},mask:function(n){return function(t){var e=t.prompt,n=t.promptPlaceholder;return function(t){return new a((function(o){for(;!o.eof();){var s=o.peek(),a=s.char,l=s.control;if(a===l&&l===e)return o.eat(),new r(e,o,i.Mask);if(t.test(a))return o.eat(),new r(a,o,i.Mask);if(a===n)return o.eat(),new r(e,o,i.Mask);o.eat_input()}return o.eat(),new r(e,o,i.Mask)}))}}({prompt:t,promptPlaceholder:e})(n)}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"unmaskTokenCreator",{get:function(){var t=this;return{literal:function(t){return e=t,new a((function(t){return t.eof()?new r("",t):(t.peek().char===e&&t.eat(),new r(e,t))}));var e},mask:function(e){return(n=t.prompt,function(t){return new a((function(e){for(;!e.eof();){var i=e.peek(),o=i.char,s=i.control;if(o===n&&s===n)return e.eat(),new r(o,e);if(t.test(o))return e.eat(),new r(o,e);e.eat_input()}return e.eat(),new r("",e)}))})(e);var n}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rawTokenCreator",{get:function(){var t=this,e=t.prompt,n=t.promptPlaceholder,i=t.includeLiterals;return{literal:function(t){return h(i)},mask:function(t){return c({prompt:e,promptPlaceholder:n})}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"validationTokenCreator",{get:function(){var t=this.prompt;return{literal:function(t){return h(!1)},mask:function(e){return c({prompt:t,promptPlaceholder:""})}}},enumerable:!1,configurable:!0}),t.prototype.tokenize=function(){var t=this;d(l(this.rules,this.maskTokenCreator)).run(this.mask).fold((function(e,n){t.maskTokens=e})),d(l(this.rules,this.unmaskTokenCreator)).run(this.mask).fold((function(e,n){t.unmaskTokens=e})),d(l(this.rules,this.rawTokenCreator)).run(this.mask).fold((function(e,n){t.rawTokens=e})),d(l(this.rules,this.validationTokenCreator)).run(this.mask).fold((function(e,n){t.validationTokens=e}))},t}(),f=n(1836),g=n(2226),m=n(289),y=n(116),v=n(677),b=n(6651),w=n(1123);var x=n(9306),_=n(9408),S=_.elementOffset,C=_.limitValue,k=f.A,A=g.A,E=m.A,T=function(){},M="#000",O="#fff",I=function(){function t(t,e){void 0===e&&(e={}),this.element=t,this.lastMoveTime=0,this.resolveColors(e),this.options=Object.assign({scale:1,precision:1,samplingRate:200,smooth:!1!==e.smooth,color:M,backgroundColor:O,strokeWidth:1,onChange:T,onDraw:T,onDrawEnd:T},e,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions={stroke:{color:this.options.color,width:this.options.strokeWidth,lineCap:"round",lineJoin:"round"}},this.initSurface(),this.attachEvents()}return t.prototype.destroy=function(){this.detachEvents()},t.prototype.clear=function(){this.rootGroup.clear(),this.path=null},t.prototype.readThemeColors=function(){var t,e;if("undefined"!=typeof document){var n=this.element.closest(".k-signature")||this.element,i=n.ownerDocument.defaultView.getComputedStyle(n);t=i.color,e=i.backgroundColor}this.themeColor=t||this.themeColor||M,this.themeBackgroundColor=e||this.themeBackgroundColor||O},t.prototype.resolveColors=function(t){this.readThemeColors(),this.color=t.color||(this.options||{}).color||this.themeColor,this.backgroundColor=t.backgroundColor||(this.options||{}).backgroundColor||this.themeBackgroundColor},Object.defineProperty(t.prototype,"isDrawing",{get:function(){return Boolean(this.points)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"pathData",{get:function(){var t;return null===(t=this.path)||void 0===t?void 0:t.toString(3)},set:function(t){this.clear(),this.path=y.P.parse(t,this.pathOptions),this.rootGroup.append(this.path)},enumerable:!1,configurable:!0}),t.prototype.loadImage=function(t,e){if(void 0===e&&(e=[]),t){var n=this.size,i=n[0],r=n[1],o=i/this.options.scale,s=r/this.options.scale,a=e[0]||6*o,l=e[1]||6*s,c=o/a,h=s/l,u=Math.min(c,h),d=new v.A(t,new g.A([0,0],[a,l]));d.transform(E().scale(u,u)),this.clear(),this.rootGroup.append(d)}else this.clear()},t.prototype.exportImage=function(t){var e,n=this.size,i=n[0],r=n[1],o=i/this.options.scale,s=r/this.options.scale,a=(null==t?void 0:t.width)||6*o,l=(null==t?void 0:t.height)||6*s,c=a/o,h=l/s,u=Math.min(c,h),d=new A([0,0],[a,l]),p=new b.A({clip:y.w.fromRect(d)}),f=new b.A({transform:E().scale(u,u)}),g=y.w.fromRect(d,{fill:{color:this.options.backgroundColor}});return p.append(g),p.append(f),(e=f.children).push.apply(e,this.rootGroup.children),function(t,e){var n={width:"800px",height:"600px",cors:"Anonymous"},i=t,r=t.clippedBBox();if(r){var o=r.getOrigin();(i=new b.A).transform((0,m.A)().translate(-o.x,-o.y)),i.children.push(t);var s=r.getSize();n.width=s.width+"px",n.height=s.height+"px"}var a=Object.assign(n,e),l=document.createElement("div"),c=l.style;c.display="none",c.width=a.width,c.height=a.height,document.body.appendChild(l);var h=new w.A(l,a);h.suspendTracking(),h.draw(i);var u=h.image(),d=function(){h.destroy(),document.body.removeChild(l)};return u.then(d,d),u}(p,Object.assign({width:a,height:l},t))},t.prototype.resize=function(){this.surface.resize(!0)},t.prototype.setOptions=function(t){this.resolveColors(t),Object.assign(this.options,t,{color:this.color,backgroundColor:this.backgroundColor}),this.pathOptions.stroke.color=this.options.color,this.pathOptions.stroke.width=this.options.strokeWidth,this.path&&(this.path.options.set("stroke.color",this.options.color),this.path.options.set("stroke.width",this.options.strokeWidth)),this.background.options.set("fill.color",this.options.backgroundColor)},t.prototype.initSurface=function(){this.surface=x.A.create(this.element,{type:"canvas"}),this.element.style.touchAction="none";var t=this.options.scale;this.rootGroup=new b.A({transform:E().scale(t,t)});var e=this.element.offsetWidth||750,n=this.element.offsetHeight||250;this.size=[e,n],this.background=y.w.fromRect(new A([0,0],this.size),{fill:{color:this.options.backgroundColor}}),this.surface.draw(this.background),this.surface.draw(this.rootGroup)},t.prototype.attachEvents=function(){this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onDragStart=this.onDragStart.bind(this),this.element.addEventListener("pointerdown",this.onPointerDown),this.element.addEventListener("pointerup",this.onPointerUp),this.element.addEventListener("dragstart",this.onDragStart)},t.prototype.detachEvents=function(){this.element.removeEventListener("pointerdown",this.onPointerDown),this.detachPointerMove(),this.element.removeEventListener("pointerup",this.onPointerUp),this.element.removeEventListener("dragstart",this.onDragStart)},t.prototype.attachPointerMove=function(){this.element.addEventListener("pointermove",this.onPointerMove)},t.prototype.detachPointerMove=function(){this.element.removeEventListener("pointermove",this.onPointerMove)},t.prototype.touchPoint=function(t){var e=S(this.element),n=t.pageX,i=t.pageY,r=1/this.options.scale;return new k(n-e.left,i-e.top).scale(r,r)},t.prototype.onDragStart=function(t){t.preventDefault()},t.prototype.onPointerDown=function(t){if(!this.options.readonly&&t.isPrimary&&function(t){return"number"!=typeof t.button||0===t.button}(t)){this.detachPointerMove(),this.attachPointerMove(),this.path||(this.path=new y.P(this.pathOptions),this.rootGroup.append(this.path)),this.options.onDraw(),this.element.setPointerCapture(t.pointerId);var e=this.touchPoint(t);this.points=[e],this.path.moveTo(e)}},t.prototype.onPointerMove=function(t){if(this.points&&this.path&&t.isPrimary){var e=(new Date).getTime();if(!(e-this.lastMoveTime<1e3/C(this.options.samplingRate,1,1e4))){this.lastMoveTime=e;var n=this.touchPoint(t),i=this.points[this.points.length-1],r=1/C(this.options.precision,.01,100);n.distanceTo(i)<r||(this.points.push(n),this.path.lineTo(n))}}},t.prototype.onPointerUp=function(t){if(t.isPrimary&&this.path&&this.points&&!this.options.readonly){if(this.detachPointerMove(),this.options.smooth){var e=y.w.curveFromPoints(this.points);this.path.paths.splice(this.path.paths.length-1,1,e)}this.points=null,this.options.onDrawEnd(),this.options.onChange(this.pathData)}},t}()},8399:(t,e,n)=>{"use strict";n.r(e),n.d(e,{IntlError:()=>s,cldr:()=>h,currencyDisplay:()=>mt,currencyDisplays:()=>gt,currencyFractionOptions:()=>yt,dateFieldName:()=>et,dateFormatNames:()=>nt,errors:()=>c,firstDay:()=>Ct,format:()=>wn,formatDate:()=>$e,formatNumber:()=>ee,load:()=>Q,localeCurrency:()=>bt,localeInfo:()=>d,numberSymbols:()=>Et,parseDate:()=>dn,parseNumber:()=>ae,setData:()=>tt,splitDateFormat:()=>yn,territoryCurrencyCode:()=>vt,toIntlErrors:()=>l,toString:()=>bn,weekendRange:()=>At});const i={en:{name:"en",identity:{version:{_unicodeVersion:"14.0.0",_cldrVersion:"41"},language:"en"},territory:"US",numbers:{symbols:{decimal:".",group:",",list:";",percentSign:"%",plusSign:"+",minusSign:"-",exponential:"E",superscriptingExponent:"×",perMille:"‰",infinity:"∞",nan:"NaN",timeSeparator:":",approximatelySign:"~"},decimal:{patterns:["n"],groupSize:[3]},scientific:{patterns:["nEn"],groupSize:[]},percent:{patterns:["n%"],groupSize:[3]},currency:{patterns:["$n"],groupSize:[3],"unitPattern-count-one":"n $","unitPattern-count-other":"n $"},currencies:{BGN:{displayName:"Bulgarian Lev","displayName-count-one":"Bulgarian lev","displayName-count-other":"Bulgarian leva",symbol:"BGN"},EUR:{displayName:"Euro","displayName-count-one":"euro","displayName-count-other":"euros",symbol:"€","symbol-alt-narrow":"€"},USD:{displayName:"US Dollar","displayName-count-one":"US dollar","displayName-count-other":"US dollars",symbol:"$","symbol-alt-narrow":"$"}},localeCurrency:"USD",accounting:{patterns:["$n","($n)"],groupSize:[3]}},calendar:{gmtFormat:"GMT{0}",gmtZeroFormat:"GMT",patterns:{d:"M/d/y",D:"EEEE, MMMM d, y",m:"MMM d",M:"MMMM d",y:"MMM y",Y:"MMMM y",F:"EEEE, MMMM d, y h:mm:ss a",g:"M/d/y h:mm a",G:"M/d/y h:mm:ss a",t:"h:mm a",T:"h:mm:ss a",s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},dateTimeFormats:{full:"{1} 'at' {0}",long:"{1} 'at' {0}",medium:"{1}, {0}",short:"{1}, {0}",availableFormats:{Bh:"h B",Bhm:"h:mm B",Bhms:"h:mm:ss B",d:"d",E:"ccc",EBhm:"E h:mm B",EBhms:"E h:mm:ss B",Ed:"d E",Ehm:"E h:mm a",EHm:"E HH:mm",Ehms:"E h:mm:ss a",EHms:"E HH:mm:ss",Gy:"y G",GyMd:"M/d/y GGGGG",GyMMM:"MMM y G",GyMMMd:"MMM d, y G",GyMMMEd:"E, MMM d, y G",h:"h a",H:"HH",hm:"h:mm a",Hm:"HH:mm",hms:"h:mm:ss a",Hms:"HH:mm:ss",hmsv:"h:mm:ss a v",Hmsv:"HH:mm:ss v",hmv:"h:mm a v",Hmv:"HH:mm v",M:"L",Md:"M/d",MEd:"E, M/d",MMM:"LLL",MMMd:"MMM d",MMMEd:"E, MMM d",MMMMd:"MMMM d","MMMMW-count-one":"'week' W 'of' MMMM","MMMMW-count-other":"'week' W 'of' MMMM",ms:"mm:ss",y:"y",yM:"M/y",yMd:"M/d/y",yMEd:"E, M/d/y",yMMM:"MMM y",yMMMd:"MMM d, y",yMMMEd:"E, MMM d, y",yMMMM:"MMMM y",yQQQ:"QQQ y",yQQQQ:"QQQQ y","yw-count-one":"'week' w 'of' Y","yw-count-other":"'week' w 'of' Y"}},timeFormats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateFormats:{full:"EEEE, MMMM d, y",long:"MMMM d, y",medium:"MMM d, y",short:"M/d/yy"},days:{format:{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},"stand-alone":{abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},months:{format:{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},"stand-alone":{abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]}},quarters:{format:{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},"stand-alone":{abbreviated:["Q1","Q2","Q3","Q4"],narrow:["1","2","3","4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]}},dayPeriods:{format:{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},narrow:{midnight:"mi",am:"a","am-alt-variant":"am",noon:"n",pm:"p","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"in the morning",afternoon1:"in the afternoon",evening1:"in the evening",night1:"at night"}},"stand-alone":{abbreviated:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},narrow:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"},wide:{midnight:"midnight",am:"AM","am-alt-variant":"am",noon:"noon",pm:"PM","pm-alt-variant":"pm",morning1:"morning",afternoon1:"afternoon",evening1:"evening",night1:"night"}}},eras:{format:{wide:{0:"Before Christ",1:"Anno Domini","0-alt-variant":"Before Common Era","1-alt-variant":"Common Era"},abbreviated:{0:"BC",1:"AD","0-alt-variant":"BCE","1-alt-variant":"CE"},narrow:{0:"B",1:"A","0-alt-variant":"BCE","1-alt-variant":"CE"}}},dateFields:{era:{wide:"era",short:"era",narrow:"era"},year:{wide:"year",short:"yr.",narrow:"yr."},quarter:{wide:"quarter",short:"qtr.",narrow:"qtr."},month:{wide:"month",short:"mo.",narrow:"mo."},week:{wide:"week",short:"wk.",narrow:"wk."},weekOfMonth:{wide:"week of month",short:"wk. of mo.",narrow:"wk. of mo."},day:{wide:"day",short:"day",narrow:"day"},dayOfYear:{wide:"day of year",short:"day of yr.",narrow:"day of yr."},weekday:{wide:"day of the week",short:"day of wk.",narrow:"day of wk."},weekdayOfMonth:{wide:"weekday of the month",short:"wkday. of mo.",narrow:"wkday. of mo."},dayperiod:{short:"AM/PM",wide:"AM/PM",narrow:"AM/PM"},hour:{wide:"hour",short:"hr.",narrow:"hr."},minute:{wide:"minute",short:"min.",narrow:"min."},second:{wide:"second",short:"sec.",narrow:"sec."},zone:{wide:"time zone",short:"zone",narrow:"zone"},millisecond:{narrow:"ms",short:"ms",wide:"millisecond"}}}},supplemental:{likelySubtags:{en:"en-Latn-US"},currencyData:{region:{US:[{USD:{_from:"1792-01-01"}}]}},weekData:{firstDay:{US:"sun"},weekendStart:{"001":"sat"},weekendEnd:{"001":"sun"}}}};function r(t){return"string"==typeof t}var o=/\{(\d+)}?\}/g,s=function(t){var e=t.name,n=t.message;if(!e||!n)throw new Error("{ name: string, message: string } object is required!");this.name=e,this.message=n};s.prototype.formatMessage=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=a(t),i=this.message.replace(o,(function(t,e){return n[parseInt(e,10)]}));return this.name+": "+i},s.prototype.error=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new Error(this.formatMessage(t))};var a=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},l=function(t){return Object.keys(t).reduce((function(e,n){return e[n]=new s({name:n,message:t[n]}),e}),{})},c=l({NoLocale:"Missing locale info for '{0}'",NoCurrency:"Cannot determine currency information. Please load the locale currencies data.",NoSupplementalCurrency:"Cannot determine currency. Please load the supplemental currencyData.",NoCurrencyRegion:"No currency data for region '{0}'",NoCurrencyDisplay:"Cannot determine currency display information. Please load the locale currencies data. The default culture does not include the all currencies data.",NoGMTInfo:"Cannot determine locale GMT format. Please load the locale timeZoneNames data.",NoWeekData:"Cannot determine locale first day of week. Please load the supplemental weekData.",NoFirstDay:"Cannot determine locale first day of week. Please load the supplemental weekData. The default culture includes only the 'en-US' first day info.",NoValidCurrency:"Cannot determine a default currency for the {0} locale. Please specify explicitly the currency with the format options.",NoDateFieldNames:"Cannot determine the locale date field names. Please load the locale dateFields data."});var h=i;function u(t){return r(t)?d(t):t}function d(t){if(h[t])return h[t];if(h.supplemental.likelySubtags){var e=t.split("-"),n=e[0],i=e.slice(1),r=function(t,e){for(var n=h.supplemental.likelySubtags,i=0;i<e.length;i++){var r=n[t+"-"+e[i]];if(r)return r}if(n[t])return n[t]}(n,i),o=r?function(t,e){var n=t.split("-"),i=n[0],r=n[1],o=n[2];return h[t]||-1!==e.indexOf(o)&&h[i+"-"+o]||-1!==e.indexOf(r)&&h[i+"-"+r]||h[i]}(r,i):null;if(o)return o}throw c.NoLocale.error(t)}var p="decimal",f="currency",g="accounting",m="percent",y="scientific",v="$",b="%",w="n",x=";",_=",",S=".",C="",k="en",A="Formats-numberSystem-latn",E="symbols-numberSystem-latn",T=/([#,0.]+)/g,M=/¤/g;function O(t){return T.lastIndex=0,t.replace(M,v).replace(T,w).split(x)}function I(t){return T.lastIndex=0,T.exec(t.split(x)[0])[0].split(S)[0].split(_).slice(1).map((function(t){return t.length})).reverse()}function D(t,e){for(var n in e)n.startsWith("unitPattern")&&(t[n]=e[n].replace("{0}",w).replace("{1}",v))}function F(t,e){var n=h[t],i=n.numbers=n.numbers||{};for(var r in i.symbols=i.symbols||{},e)if(r===E)Object.assign(i.symbols,e[r]);else if(r.includes(A)){var o=r.substr(0,r.indexOf(A)),s=e[r].standard;i[o]={patterns:O(s)},o===f?(i[o].groupSize=I((e[p+A]||e[r]).standard),D(i[o],e[r]),i[g]={patterns:O(e[r][g]),groupSize:i[o].groupSize}):i[o].groupSize=I(s)}else"currencies"===r&&(i.currencies=e[r])}var P={s:"yyyy'-'MM'-'dd'T'HH':'mm':'ss",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'"},R=/y+/g,L=[["dateFormats","short"]],N={D:[["dateFormats","full"]],m:[["dateTimeFormats","availableFormats","MMMd"]],M:[["dateTimeFormats","availableFormats","MMMMd"]],y:[["dateTimeFormats","availableFormats","yMMM"]],Y:[["dateTimeFormats","availableFormats","yMMMM"]],F:[["dateFormats","full"],["timeFormats","medium"]],g:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","short"]],G:[["dateTimeFormats","availableFormats","yMd"],["timeFormats","medium"]],t:[["timeFormats","short"]],T:[["timeFormats","medium"]]};function B(t){for(var e=[],n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=t[n[i]];e.push(r)}return e}function j(t,e){var n={};for(var i in t){var r=n[i]={};for(var o in t[i]){var s=t[i][o];r[o]=e?s:B(s)}}return n}function z(t,e){var n=h[t].calendar;n.days=j(e.days),n.months=j(e.months),n.quarters=j(e.quarters),n.dayPeriods=j(e.dayPeriods,!0),n.eras=function(t){var e={},n=e.format={},i={eraAbbr:"abbreviated",eraNames:"wide",eraNarrow:"narrow"};for(var r in t)n[i[r]]=t[r];return e}(e.eras)}function $(t,e){var n=h[t].calendar,i={};for(var r in e){var o=r.split("-"),s=o[0],a=o[1];void 0===a&&(a="wide");var l=i[s]||{},c=e[r].displayName;c&&(l[a]=c,i[s]=l)}n.dateFields=i}function H(t,e){for(var n=[],i=0;i<t.length;i++){for(var r=t[i],o=e,s=0;s<r.length;s++)o=o[r[s]];n.push(o)}return n.join(" ")}function U(t,e){var n=h[t].calendar,i=n.patterns={};for(var r in i.d=H(L,e).replace(R,"y"),N)i[r]=H(N[r],e);for(var o in P)i[o]=P[o];var s=e.dateTimeFormats;n.dateTimeFormats={full:s.full,long:s.long,medium:s.medium,short:s.short,availableFormats:s.availableFormats},n.timeFormats=e.timeFormats,n.dateFormats=e.dateFormats}function V(t,e){var n=h[t].calendar=h[t].calendar||{};for(var i in e)"timeZoneNames"===i?(n.gmtFormat=e[i].gmtFormat,n.gmtZeroFormat=e[i].gmtZeroFormat):"calendars"===i&&e[i].gregorian?(U(t,e[i].gregorian),z(t,e[i].gregorian)):"fields"===i&&$(t,e.fields)}function W(t){if(t.territory)return t.territory;var e,n=t.name,i=t.identity;return e=i&&i.territory?i.territory:function(t,e){var n=h.supplemental.likelySubtags,i=t.split("-");if(n){var r=n[t]||n[i[0]];r&&(i=r.split("-"))}if(e)for(var o=i.length-1;o>=1;o--){var s=i[o];s!==e.variant&&s!==e.script||i.splice(o,1)}var a=i.length;if(a>1)return i[a-1].toUpperCase()}(n,i),t.territory=e,e}var q="duration-millisecond",K="unitPattern-count-one",X="unitPattern-count-other",G=/\{0\}\s?/;function Y(t){return(t[K]||t[X]).replace(G,"")}function J(t,e){t.calendar.dateFields.millisecond={narrow:Y(e.narrow[q]),short:Y(e.short[q]),wide:Y(e.long[q])}}function Z(t,e){for(var n in e)"numbers"===n?F(t,e[n]):"dates"===n&&V(t,e[n])}function Q(){for(var t=arguments,e=arguments.length,n=0;n<e;n++){var i=t[n];if(i.main){var r=Object.keys(i.main)[0],o=i.main[r],s=h[r]=h[r]||{};o.units?J(s,o.units):(s.name=s.name||r,s.identity=s.identity||o.identity,W(s),Z(r,o))}else if(i.supplemental)if(i.supplemental.weekData)h.supplemental.weekData={firstDay:i.supplemental.weekData.firstDay,weekendStart:i.supplemental.weekData.weekendStart,weekendEnd:i.supplemental.weekData.weekendEnd};else if(i.supplemental.likelySubtags)h.supplemental.likelySubtags=Object.assign(h.supplemental.likelySubtags,i.supplemental.likelySubtags);else if(i.supplemental.currencyData){var a=h.supplemental.currencyData;a.region=Object.assign(a.region||{},i.supplemental.currencyData.region),a.fractions=Object.assign(a.fractions||{},i.supplemental.currencyData.fractions)}}}function tt(t){var e=t.name,n=h[e]=h[e]||{},i=h.supplemental=h.supplemental||{};t.likelySubtags&&(i.likelySubtags=Object.assign(i.likelySubtags||{},t.likelySubtags)),t.currencyData&&(i.currencyData=i.currencyData||{},i.currencyData.fractions=Object.assign(i.currencyData.fractions||{},t.currencyData));var r=n.numbers;Object.assign(n,t),r&&t.numbers&&(n.numbers=Object.assign({},r,t.numbers))}function et(t,e){void 0===e&&(e=k);var n=d(e).calendar.dateFields;if(!n)throw c.NoDateFieldNames.error();var i=n[t.type]||{};return i[t.nameType]||i.wide}function nt(t,e){var n=e.type,i=e.nameType,r=e.standAlone,o=e.lower,s=u(t),a=r?"stand-alone":"format",l=(o?"lower-":C)+i,c=s.calendar[n][a],h=c[l];return!h&&o&&(h=c[l]=function(t){var e=Array.isArray(t)?function(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].toLowerCase());return e}(t):function(t){var e={};for(var n in t)e[n]=t[n].toLowerCase();return e}(t);return e}(c[i])),h}function it(t){var e=t.split("-"),n=parseInt(e[0],10),i=parseInt(e[1],10)-1,r=parseInt(e[2],10);return new Date(n,i,r)}var rt=c.NoCurrency,ot=c.NoCurrencyDisplay,st=c.NoSupplementalCurrency,at=c.NoCurrencyRegion,lt=c.NoValidCurrency,ct=2,ht="symbol",ut="XXX",dt={"001":"USD",150:"EUR"};function pt(t,e,n){var i=u(t).numbers.currencies;if(i){var r=i[e];if(r)return r;if(n)throw ot.error()}else if(n)throw rt.error()}function ft(t,e){return e.length-t.length}function gt(t,e,n){void 0===n&&(n=!0);var i=pt(t,e,n);if(i){if(!i.displays){var r=[e];for(var o in i)r.push(i[o]);r.sort(ft),i.displays=r}return i.displays}}function mt(t,e){var n=e.value,i=e.currency,r=e.currencyDisplay;if(void 0===r&&(r=ht),"code"===r)return i;var o=pt(t,i,!0);return r===ht?o["symbol-alt-narrow"]||o[ht]||i:void 0===n||1!==n?o["displayName-count-other"]:o["displayName-count-one"]}function yt(t){var e=ct,n=ct,i=((h.supplemental.currencyData||{}).fractions||{})[t];return i&&i._digits&&(n=e=parseInt(i._digits,10)),{minimumFractionDigits:e,maximumFractionDigits:n}}function vt(t,e){if(void 0===e&&(e=!0),dt[t])return dt[t];var n=h.supplemental.currencyData;if(n){var i=n.region[t];if(i){var r=function(t){for(var e,n,i,r,o=0;o<t.length;o++){var s=t[o],a=Object.keys(s)[0],l=s[a];if(a!==ut&&"false"!==l._tender&&l._from)if(l._to){if(!i){var c=it(l._from),h=it(l._to);(!n||n.to<h||n.from<c)&&(e=a,n={from:c,to:h})}}else{var u=it(l._from);(!r||r<u)&&(i=a,r=u)}}return i||e}(i);return r}if(e)throw at.error(t)}else if(e)throw st.error()}function bt(t,e){var n=u(t),i=n.numbers;if(!i.localeCurrency){var r=vt(W(n),e);if(!r&&e)throw lt.error(n.name);i.localeCurrency=r}return i.localeCurrency}var wt=["sun","mon","tue","wed","thu","fri","sat"],xt="001",_t=c.NoWeekData,St=c.NoFirstDay;function Ct(t){var e=u(t);if(!isNaN(e.firstDay))return e.firstDay;var n=h.supplemental.weekData;if(!n)throw _t.error();var i=n.firstDay[W(e)]||n.firstDay[xt];if(!i)throw St.error();return e.firstDay=wt.indexOf(i),e.firstDay}var kt=c.NoWeekData;function At(t){var e=u(t);if(e.weekendRange)return e.weekendRange;var n=h.supplemental.weekData;if(!n)throw kt.error();var i=W(e),r=n.weekendStart[i]||n.weekendStart[xt],o=n.weekendEnd[i]||n.weekendEnd[xt];return e.weekendRange={start:wt.indexOf(r),end:wt.indexOf(o)},e.weekendRange}function Et(t){return u(t).numbers.symbols}function Tt(t){return 1/t==-1/0}function Mt(t,e){return void 0===e&&(e={}),e.currency||(e.currency=bt(t,!0)),mt(t,e)}function Ot(t,e,n,i,r){var o=r.numbers.symbols,s=t.indexOf(o.decimal),a=i.groupSize.slice(),l=a.shift(),c=-1!==s?s:n+1,h=t.substring(e,c),u=t,d=h.length;if(d>=l){for(var p=d,f=[];p>-1;){var g=h.substring(p-l,p);g&&f.push(g),p-=l;var m=a.shift();if(0===(l=void 0!==m?m:l)){(g=h.substring(0,p))&&f.push(g);break}}h=f.reverse().join(o.group),u=t.substring(0,e)+h+t.substring(c)}return u}function It(t){return t===f||t===g}function Dt(t,e,n){void 0===e&&(e=2),void 0===n&&(n=!1);var i=e-String(t).length,r=t;if(i>0){var o=new Array(i+1).join("0");r=n?t+o:o+t}return r}var Ft=20;function Pt(t,e){var n=t,i=e||0;return n=n.toString().split("e"),n=(n=Math.round(Number(n[0]+"e"+(n[1]?Number(n[1])+i:i)))).toString().split("e"),(n=Number(n[0]+"e"+(n[1]?Number(n[1])-i:-i))).toFixed(Math.min(i,Ft))}var Rt=3,Lt=0,Nt=/0+$/;function Bt(t,e,n){var i=n.numbers.symbols,r=e.style,o=It(r);if(r===y)return(void 0!==e.minimumFractionDigits?t.toExponential(e.minimumFractionDigits):t.toExponential()).replace(S,i.decimal);var s,a=t;o&&(e.value=a,s=Mt(n,e)),r===m&&(a*=100,s=i.percentSign);var l=function(t){var e,n=t.minimumFractionDigits,i=t.maximumFractionDigits,r=t.style,o=It(r);return o&&(e=yt(t.currency)),void 0===n&&(n=o?e.minimumFractionDigits:0),void 0===i&&(i=r===m?Math.max(n,Lt):o?Math.max(n,e.maximumFractionDigits):Math.max(n,Rt)),{minimumFractionDigits:n,maximumFractionDigits:i}}(e),c=l.minimumFractionDigits,h=(a=Pt(a,l.maximumFractionDigits))<0,u=Tt(t),d=a.split(S),p=d[0],f=Dt(d[1]?d[1].replace(Nt,C):C,c,!0);h&&(p=p.substring(1)),e.minimumIntegerDigits&&(p=Dt(p,e.minimumIntegerDigits));var g,x=!1!==e.useGrouping?Ot(p,0,p.length,e,n):p;if(f&&(x+=i.decimal+f),o&&"name"===e.currencyDisplay)g=function(t,e){var n=t.numbers.currency,i=1!==e?n["unitPattern-count-other"]:n["unitPattern-count-one"];return e<0&&(i=i.replace(w,"-"+w)),i}(n,t);else{var _=e.patterns;g=h||u?_[1]||"-"+_[0]:_[0]}if(g===w&&!h)return x;var k=function(t,e,n){for(var i=C,r=0,o=e.length;r<o;r++){var s=e.charAt(r);i+=s===w?t:s===v||s===b?n:s}return i}(x,g,s);return k}var jt=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,zt="__??__";function $t(t,e){var n=t.format;-1!==n.indexOf(b)&&(t.style=m,t.symbol=e.numbers.symbols.percentSign,t.number*=100),-1!==n.indexOf(v)&&(t.style=f,t.symbol=Mt(e))}function Ht(t){var e=t.format;if(e.indexOf("'")>-1||e.indexOf('"')>-1||e.indexOf("\\")>-1){var n=t.literals=[];t.format=e.replace(jt,(function(t){var e=t.charAt(0).replace("\\",C),i=t.slice(1).replace(e,C);return n.push(i),zt}))}}var Ut="#",Vt="0",Wt=/(\.(?:[0-9]*[1-9])?)0+$/g,qt=/\.$/,Kt=/,/g;function Xt(t){var e,n,i,r=t.number,o=t.format,s=o.indexOf(S);if(-1!==s){var a=o.lastIndexOf(Vt)-s,l=o.lastIndexOf(Ut)-s,c=a>-1,h=l>-1,u=r.toString().split("e"),d=(u=(u=u[1]?Pt(r,Math.abs(u[1])):u[0]).split(S)[1]||C).length,p=-1;c||h?c&&a>l?d=a:l>a&&(h&&d>l?d=l:c&&d<a&&(d=a),p=c?a:0):(t.format=o.substring(0,s)+o.substring(s+1),s=-1,d=0),d>-1&&(r=Pt(r,d),p>-1&&(e=r,i=0===(n=p)?Wt:new RegExp("(\\.[0-9]{"+n+"}[1-9]*)0+$","g"),r=e.replace(i,"$1").replace(qt,C)))}else r=Pt(r);t.negative&&-1*r>=0&&!t.negativeZero&&(t.negative=!1),t.number=r,t.decimalIndex=s}function Gt(t){var e=t.number,n=t.format;if(n=n.split(x),(t.negative||t.negativeZero)&&n[1])n=n[1],t.hasNegativeFormat=!0;else if(0===e){var i=n[2];n=i||n[0],i&&function(t){return-1===t.indexOf(Ut)&&-1===t.indexOf(Vt)}(i)&&(t.constant=i)}else n=n[0];t.format=n}function Yt(t,e,n){return-1===t&&-1!==e?e:-1!==t&&-1===e?t:n?Math.min(t,e):Math.max(t,e)}function Jt(t,e){var n=t.number;return-1!==t.start&&(n=function(t,e){var n=t.start,i=t.end,r=t.negative,o=t.negativeZero,s=t.format,a=t.decimalIndex,l=t.lastZeroIndex,c=t.hasNegativeFormat,h=t.hasGroup,u=t.number,d=u.toString().split(S),p=s.length,f=d[0],g=d[1]||C,m=f.length,y=C;u=s.substring(0,n),!r&&!o||c||(u+="-");for(var v=n;v<p;v++){var b=s.charAt(v);if(-1===a){if(i-v<m){u+=f;break}}else if(-1!==l&&l<v&&(y=C),a-v<=m&&a-v>-1&&(u+=f,v=a),a===v){u+=(g?e.numbers.symbols.decimal:C)+g,v+=i-a+1;continue}b===Vt?(u+=b,y=b):b===Ut&&(u+=y)}return h&&(u=Ot(u,n+(r&&!c?1:0),Math.max(i,m+n),e.numbers.decimal,e)),i>=n&&(u+=s.substring(i+1)),u}(t,e),n=function(t,e){var n=t;if(e)for(var i=e.length,r=0;r<i;r++)n=n.replace(zt,e[r]);return n}(n=function(t,e,n){var i=t;if(e===f||e===m){i=C;for(var r=0,o=t.length;r<o;r++){var s=t.charAt(r);i+=s===v||s===b?n:s}}return i}(n,t.style,t.symbol),t.literals)),n}function Zt(t,e,n){var i={negative:t<0,number:Math.abs(t),negativeZero:Tt(t),format:e};return Gt(i),i.constant?i.constant:(Ht(i),$t(i,n),function(t){t.hasGroup=t.format.indexOf(_)>-1,t.hasGroup&&(t.format=t.format.replace(Kt,C))}(i),Xt(i),function(t){var e=t.format,n=e.indexOf(Ut),i=e.indexOf(Vt),r=Yt(n,i,!0),o=Yt(n=e.lastIndexOf(Ut),i=e.lastIndexOf(Vt));r===e.length&&(o=r),t.start=r,t.end=o,t.lastZeroIndex=i}(i),Jt(i,n))}var Qt=/^(n|c|p|e|a)(\d*)$/i;function te(t){return r(t)?function(t){var e=Qt.exec(t);if(e){var n={style:p},i=e[1].toLowerCase();return"c"===i?n.style=f:"a"===i?n.style=g:"p"===i?n.style=m:"e"===i&&(n.style=y),e[2]&&(n.minimumFractionDigits=n.maximumFractionDigits=parseInt(e[2],10)),n}}(t):t}function ee(t,e,n){if(void 0===e&&(e=w),void 0===n&&(n=k),null==t)return C;if(!isFinite(t))return String(t);var i,r=d(n),o=te(e);if(o){var s=o.style||p;i=Bt(t,Object.assign({},r.numbers[s],o),r)}else i=Zt(t,e,r);return i}function ne(t){return"number"==typeof t}var ie=/[eE][-+]?[0-9]+/,re=/\u00A0/g;function oe(t,e){if(e.length>1){var n=(e[1]||C).replace(v,C).split(w);if(t.indexOf(n[0])>-1&&t.indexOf(n[1])>-1)return t.replace(n[0],C).replace(n[1],C)}}function se(t,e,n){var i,r=te(n)||{},o=It(r.style),s=t,a=r.currency||bt(e,o);if(a){var l=gt(e,a,o);if(l)for(var c=0;c<l.length;c++){var h=l[c];if(s.includes(h)){s=s.replace(h,C),o=!0;break}}if(o){var u=oe(s,e.numbers.currency.patterns)||oe(s,e.numbers.accounting.patterns);u&&(i=!0,s=u)}}return{number:s,negative:i}}function ae(t,e,n){if(void 0===e&&(e=k),void 0===n&&(n={}),!t&&0!==t)return null;if(ne(t))return t;var i,o=d(e),s=o.numbers.symbols,a=t.toString(),l=n||{};if(r(n)&&(Ht(l={format:n}),a=function(t,e){var n=e.literals,i=t;if(n)for(var r=0;r<n.length;r++)i=i.replace(n[r],C);return i}(a,l),$t(l,o)),(l.style===m||a.indexOf(s.percentSign)>-1)&&(a=a.replace(s.percentSign,C),i=!0),ie.test(a))return a=parseFloat(a.replace(s.decimal,S)),isNaN(a)?null:a;var c=se(a,o,l),h=c.negative,u=c.number,p=(a=String(u).trim()).indexOf("-");if(p>0)return null;var f=p>-1;return f=void 0!==h?h:f,a=a.replace("-",C).replace(re," ").split(s.group.replace(re," ")).join(C).replace(s.decimal,S),a=parseFloat(a),isNaN(a)?a=null:f&&(a*=-1),a&&i&&(a=function(t){var e=String(t),n=e.indexOf(S),i=t/Math.pow(10,2);if(-1===n||String(i).length<=e.length+2)return i;var r=e.length-n+1+2;return parseFloat(i.toFixed(r))}(a)),a}var le=/\{(\d+)}/g;function ce(t){var e=arguments;return t.replace(le,(function(t,n){return e[parseInt(n,10)+1]}))}var he=120,ue=20,de=[2,1,5,3,4],pe={};pe[(-2).toString()]=8,pe[(-1).toString()]=6,pe[2..toString()]=6,pe[1..toString()]=3;var fe={numeric:1,"2-digit":2,short:3,long:4,narrow:5},ge=/[hHmsSzZoOvVxX]/;var me=[{key:"era",specifier:"G"},{key:"year",specifier:"y"},{key:"month",specifier:"M"},{key:"day",specifier:"d"},{key:"weekday",specifier:"E"},{key:"hour",getSpecifier:function(t){return t.hour12?"h":"H"}},{key:"minute",specifier:"m"},{key:"second",specifier:"s"},{key:"timeZoneName",specifier:"z"}],ye={e:"c",E:"c",M:"L",Q:"q"},ve={},be={};function we(t){return ve[t]||(ve[t]=new RegExp(t+"+")),ve[t]}function xe(t){for(var e=[],n=t.charAt(0),i=n,r=1;r<t.length;r++){var o=t.charAt(r);o===i?n+=o:(e.push(n),n=i=o)}return e.push(n),e}function _e(t,e){var n,i,r=t.length,o=-Number.MAX_VALUE;for(var s in e){for(var a=[],l=s.replace("v","z"),c=0,h=0;h<r;h++){var u=t[h],d=(we(u[0]).exec(l)||[])[0];if(d){if(l=l.replace(d,C),d.length!==u.length){var p=Math.max(Math.min(de[d.length]-de[u.length],2),-2);c-=pe[p]}}else c-=he;if(a.push(d),c<o)break}l.length&&(c-=xe(l).length*ue),c>o&&(o=c,n=a,i=e[s])}i=i.replace("v","z");for(var f=0;f<r;f++){var g=n[f];if(g&&g!==t[f]){var m=n[f][0];i=i.replace(we(m),t[f]),ye[m]&&(i=i.replace(we(ye[m]),t[f]))}}return i}function Se(t,e){var n=e.calendar.dateTimeFormats.availableFormats;if(n[t])return n[t];if(be[e.name]&&be[e.name][t])return be[e.name][t];var i,r=t.search(ge);if(r>0){var o=t.substr(0,r),s=t.substr(r);i=ce(e.calendar.dateTimeFormats.short,n[s]||_e(xe(s),n),n[o]||_e(xe(o),n))}else i=_e(xe(t),n);return function(t,e,n){be[n]||(be[n]={}),be[n][t]=e}(t,i,e.name),i}function Ce(t,e){var n,i=e.calendar;if(r(t))n=i.patterns[t]?i.patterns[t]:t;else if(t){if(t.pattern)return t.pattern;var o=t.skeleton;o||(t.datetime?n=ce(i.dateTimeFormats[t.datetime],i.timeFormats[t.datetime],i.dateFormats[t.datetime]):t.date?n=i.dateFormats[t.date]:t.time?n=i.timeFormats[t.time]:o=function(t){for(var e=[],n=0;n<me.length;n++){var i=me[n],r=t[i.key];if(r){var o=i.specifier||i.getSpecifier(t);e.push(o.repeat(fe[r]))}}return e.join(C)}(t)),o&&(n=Se(o,e))}return n||(n=i.patterns.d),n}function ke(t){var e;return t<=3?e="abbreviated":4===t?e="wide":5===t?e="narrow":6===t&&(e="short"),e}function Ae(t,e,n,i,r){return nt(t,{type:e,nameType:ke(n),standAlone:i,lower:r})}function Ee(t){return"function"==typeof t}function Te(t){return Boolean(t)&&Ee(t.getTime)&&Ee(t.getMonth)}var Me="month",Oe="hour",Ie="zone",De="weekday",Fe="quarter",Pe={G:"era",y:"year",q:Fe,Q:Fe,M:Me,L:Me,d:"day",E:De,c:De,e:De,h:Oe,H:Oe,k:Oe,K:Oe,m:"minute",s:"second",S:"millisecond",a:"dayperiod",x:Ie,X:Ie,z:Ie,Z:Ie},Re=/d{1,2}|E{1,6}|e{1,6}|c{3,6}|c{1}|M{1,5}|L{1,5}|y{1,4}|H{1,2}|h{1,2}|k{1,2}|K{1,2}|m{1,2}|a{1,5}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|x{1,5}|X{1,5}|G{1,5}|q{1,5}|Q{1,5}|"[^"]*"|'[^']*'/g;function Le(t,e,n,i){return e<=2?Dt(t+1,e):Ae(n,"months",e,i)[t]}function Ne(t,e,n,i){var r=Math.floor(t.getMonth()/3);return e<3?r+1:Ae(n,"quarters",e,i)[r]}function Be(t,e,n){var i=n.shortHours,r=n.optionalMinutes,o=n.separator,s=n.localizedName,a=n.zZeroOffset,l=t.getTimezoneOffset()/60;if(0===l&&a)return"Z";var c=l<=0?"+":"-",h=Math.abs(l).toString().split("."),u=h[1]||0,d=c+(i?h[0]:Dt(h[0],2));(!u&&r||(d+=(o?":":C)+Dt(u,2)),s)&&(d=ce(0===l?e.calendar.gmtZeroFormat:e.calendar.gmtFormat,d));return d}function je(t,e,n,i){var r;return r=e<3?function(t,e,n){var i=Ct(n);return(t<i?7-i+t:t-i)+1}(t.getDay(),0,n):Ae(n,"days",e,i)[t.getDay()],r}var ze={};function $e(t,e,n){if(void 0===n&&(n=k),!Te(t))return null==t?C:t;var i=d(n);return Ce(e,i).replace(Re,(function(e){var n=e.length;return e.includes("'")||e.includes('"')?e.slice(1,n-1):ze[e[0]](t,n,i)}))}function He(t,e,n){var i=t.getTimezoneOffset(),r=new Date(t.getTime()+6e4*(e-n)),o=r.getTimezoneOffset();return new Date(r.getTime()+6e4*(o-i))}ze.d=function(t,e){return Dt(t.getDate(),e)},ze.E=function(t,e,n){return Ae(n,"days",e)[t.getDay()]},ze.M=function(t,e,n){return Le(t.getMonth(),e,n,!1)},ze.L=function(t,e,n){return Le(t.getMonth(),e,n,!0)},ze.y=function(t,e){var n=t.getFullYear();return 2===e&&(n%=100),Dt(n,e)},ze.h=function(t,e){return Dt(t.getHours()%12||12,e)},ze.H=function(t,e){return Dt(t.getHours(),e)},ze.k=function(t,e){return Dt(t.getHours()||24,e)},ze.K=function(t,e){return Dt(t.getHours()%12,e)},ze.m=function(t,e){return Dt(t.getMinutes(),e)},ze.s=function(t,e){return Dt(t.getSeconds(),e)},ze.S=function(t,e){var n=t.getMilliseconds();return 0!==n?Dt(String(n/1e3).split(".")[1].substr(0,e),e,!0):Dt(C,e)},ze.a=function(t,e,n){return Ae(n,"dayPeriods",e)[t.getHours()<12?"am":"pm"]},ze.z=function(t,e,n){return Be(t,n,{shortHours:e<4,optionalMinutes:e<4,separator:!0,localizedName:!0})},ze.Z=function(t,e,n){return Be(t,n,{separator:e>3,localizedName:4===e,zZeroOffset:5===e})},ze.x=function(t,e,n){return Be(t,n,{optionalMinutes:1===e,separator:3===e||5===e})},ze.X=function(t,e,n){return Be(t,n,{optionalMinutes:1===e,separator:3===e||5===e,zZeroOffset:!0})},ze.G=function(t,e,n){var i=t.getFullYear()>=0?1:0;return Ae(n,"eras",e)[i]},ze.e=je,ze.c=function(t,e,n){return je(t,e,n,!0)},ze.q=function(t,e,n){return Ne(t,e,n,!0)},ze.Q=Ne;var Ue=/([+|-]\d{1,2})(:?)(\d{2})?/,Ve=/^\/Date\((.*?)\)\/$/,We=/[+-]\d*/,qe={2:/^\d{1,2}/,3:/^\d{1,3}/,4:/^\d{4}/},Ke=/\d+/,Xe="{0}",Ge=/^ */,Ye=/ *$/,Je=["yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","E MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.SSSSSSSXXX","yyyy-MM-ddTHH:mm:ss.SSSXXX","yyyy-MM-ddTHH:mm:ss.SSXXX","yyyy-MM-ddTHH:mm:ssXXX","yyyy-MM-ddTHH:mm:ss.SSSSSSS","yyyy-MM-ddTHH:mm:ss.SSS","yyyy-MM-ddTHH:mmXXX","yyyy-MM-ddTHH:mmX","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd","HH:mm:ss","HH:mm"],Ze=["G","g","F","Y","y","M","m","D","d","y","T","t"];function Qe(t,e,n){return!(t>=e&&t<=n)}function tn(t,e){for(var n=e.format,i=e.idx,r=0;n[i]===t;)r++,i++;return r>0&&(i-=1),e.idx=i,r}function en(t,e){var n=t?qe[t]||new RegExp("^\\d{1,"+t+"}"):Ke,i=e.value.substr(e.valueIdx,t).match(n);return i?(i=i[0],e.valueIdx+=i.length,parseInt(i,10)):null}function nn(t,e,n){for(var i,r,o,s=0,a=t.length,l=0,c=0;s<a;s++)r=(i=t[s]).length,o=e.value.substr(e.valueIdx,r),n&&(o=o.toLowerCase()),o===i&&r>l&&(l=r,c=s);return l?(e.valueIdx+=l,c+1):null}function rn(t){var e=!1;return t.value.charAt(t.valueIdx)===t.format[t.idx]&&(t.valueIdx++,e=!0),e}function on(t,e,n){var i=n.shortHours,r=n.noSeparator,o=n.optionalMinutes,s=n.localizedName,a=n.zLiteral;if(t.UTC=!0,a&&"Z"===t.value.charAt(t.valueIdx))return t.valueIdx++,!1;if(s&&!nn(function(t){var e=t.gmtFormat,n=t.gmtZeroFormat;if(!e)throw c.NoGMTInfo.error();return[e.replace(Xe,C).toLowerCase(),n.replace(Xe,C).toLowerCase()]}(e.calendar),t,!0))return!0;var l=Ue.exec(t.value.substr(t.valueIdx,6));if(!l)return!s;var h=l[1],u=l[3],d=parseInt(h,10),p=l[2],f=parseInt(u,10);return!!(isNaN(d)||!i&&3!==h.length||!o&&isNaN(f)||r&&p)||(isNaN(f)&&(f=null),!!(Qe(d,-12,13)||f&&Qe(f,0,59))||(t.valueIdx+=l[0].length,t.hoursOffset=d,void(t.minutesOffset=f)))}function sn(t,e,n){var i=tn(t,e),r=Ae(n,"months",i,"L"===t,!0),o=i<3?en(2,e):nn(r,e,!0);if(null===o||Qe(o,1,12))return!0;e.month=o-1}function an(t,e,n){var i=tn(t,e),r=Ae(n,"days",i,"c"===t,!0),o=i<3?en(1,e):nn(r,e,!0);if(!o&&0!==o||Qe(o,1,7))return!0}var ln={};function cn(t,e){return""+Ge.exec(e)[0]+t+Ye.exec(e)[0]}function hn(t,e,n){for(var i=Ce(e,n).split(C),r={format:i,idx:0,value:cn(t,e),valueIdx:0,year:null,month:null,day:null,hours:null,minutes:null,seconds:null,milliseconds:null},o=i.length,s=!1;r.idx<o;r.idx++){var a=i[r.idx];if(s)"'"===a&&(s=!1),rn(r);else if(ln[a]){if(ln[a](r,n))return null}else if("'"===a)s=!0,rn(r);else if(!rn(r))return null}return r.valueIdx<t.length?null:function(t){var e,n=t.year,i=t.month,r=t.day,o=t.hours,s=t.minutes,a=t.seconds,l=t.milliseconds,c=t.pmHour,h=t.UTC,u=t.hoursOffset,d=t.minutesOffset,p=null!==o||null!==s||a||null,f=new Date;return null===n&&null===i&&null===r&&p?(n=f.getFullYear(),i=f.getMonth(),r=f.getDate()):(null===n&&(n=f.getFullYear()),null===r&&(r=1)),c&&o<12&&(o+=12),h?(u&&(o+=-u),d&&(s+=-d*(u<0?-1:1)),e=new Date(Date.UTC(n,i,r,o,s,a,l))):function(t,e){e||23!==t.getHours()||t.setHours(t.getHours()+2)}(e=new Date(n,i,r,o,s,a,l),o),n<100&&e.setFullYear(n),e.getDate()!==r&&void 0===h?null:e}(r)||null}function un(t){if(t&&0===t.indexOf("/D")){var e=Ve.exec(t);if(e){e=e[1];var n=We.exec(e.substring(1));return e=new Date(parseInt(e,10)),n&&(i=n[0],r="-"===i.substr(0,1)?-1:1,o=i.substring(1),n=r*(60*parseInt(o.substr(0,2),10)+parseInt(o.substring(2),10)),e=He(e,e.getTimezoneOffset(),0),e=He(e,0,-1*n)),e}}var i,r,o}function dn(t,e,n){if(void 0===n&&(n=k),!t)return null;if(Te(t))return t;var i=String(t).trim(),r=un(i);if(r)return r;for(var o=d(n),s=e||function(t){for(var e=[],n=t.patterns,i=Ze.length,r=0;r<i;r++)e.push(n[Ze[r]]);return e.concat(Je)}(o.calendar),a=(s=Array.isArray(s)?s:[s]).length,l=0;l<a;l++)if(r=hn(i,s[l],o))return r;return r}ln.d=function(t){tn("d",t);var e=en(2,t);if(null===e||Qe(e,1,31))return!0;null===t.day&&(t.day=e)},ln.E=function(t,e){if(null===nn(Ae(e,"days",tn("E",t),!1,!0),t,!0))return!0},ln.M=function(t,e){return sn("M",t,e)},ln.L=function(t,e){return sn("L",t,e)},ln.y=function(t){var e=tn("y",t),n=en(1===e?void 0:e,t);if(null===n)return!0;if(2===e){var i=(new Date).getFullYear();(n=i-i%100+n)>2029&&(n-=100)}t.year=n},ln.h=function(t){tn("h",t);var e=en(2,t);if(12===e&&(e=0),null===e||Qe(e,0,11))return!0;t.hours=e},ln.K=function(t){tn("K",t);var e=en(2,t);if(null===e||Qe(e,0,11))return!0;t.hours=e},ln.a=function(t,e){var n=Ae(e,"dayPeriods",tn("a",t),!1,!0),i=nn([n.pm],t,!0);if(!i&&!nn([n.am],t,!0))return!0;t.pmHour=i},ln.H=function(t){tn("H",t);var e=en(2,t);if(null===e||Qe(e,0,23))return!0;t.hours=e},ln.k=function(t){tn("k",t);var e=en(2,t);if(null===e||Qe(e,1,24))return!0;t.hours=24===e?0:e},ln.m=function(t){tn("m",t);var e=en(2,t);if(null===e||Qe(e,0,59))return!0;t.minutes=e},ln.s=function(t){tn("s",t);var e=en(2,t);if(null===e||Qe(e,0,59))return!0;t.seconds=e},ln.S=function(t){var e=tn("S",t),n=t.value.substr(t.valueIdx,e),i=null;if(isNaN(parseInt(n,10))||(i=Pt(i=parseFloat("0."+n,10),3),i*=1e3,t.valueIdx+=e),null===i||Qe(i,0,999))return!0;t.milliseconds=i},ln.z=function(t,e){var n=tn("z",t)<4,i=on(t,e,{shortHours:n,optionalMinutes:n,localizedName:!0});if(i)return i},ln.Z=function(t,e){var n=tn("Z",t),i=on(t,e,{noSeparator:n<4,zLiteral:5===n,localizedName:4===n});if(i)return i},ln.x=function(t,e){var n=tn("x",t),i=on(t,e,{noSeparator:3!==n&&5!==n,optionalMinutes:1===n});if(i)return i},ln.X=function(t,e){var n=tn("X",t),i=on(t,e,{noSeparator:3!==n&&5!==n,optionalMinutes:1===n,zLiteral:!0});if(i)return i},ln.G=function(t,e){var n=Ae(e,"eras",tn("G",t),!1,!0);if(null===nn([n[0],n[1]],t,!0))return!0},ln.e=function(t,e){return an("e",t,e)},ln.c=function(t,e){return an("c",t,e)};var pn={month:{type:"months",minLength:3,standAlone:"L"},quarter:{type:"quarters",minLength:3,standAlone:"q"},weekday:{type:"days",minLength:{E:0,c:3,e:3},standAlone:"c"},dayperiod:{type:"dayPeriods",minLength:0},era:{type:"eras",minLength:0}},fn="literal";function gn(t,e){var n=t[t.length-1];n&&n.type===fn?n.pattern+=e:t.push({type:fn,pattern:e})}function mn(t){return"h"===t||"K"===t}function yn(t,e){void 0===e&&(e=k);for(var n=Ce(t,d(e)),i=[],r=Re.lastIndex=0,o=Re.exec(n);o;){var s=o[0];if(r<o.index&&gn(i,n.substring(r,o.index)),s.startsWith('"')||s.startsWith("'"))gn(i,s);else{var a=s[0],l=Pe[a],c={type:l,pattern:s};"hour"===l&&(c.hour12=mn(s));var h=pn[l];if(h){var u=ne(h.minLength)?h.minLength:h.minLength[a],p=s.length;p>=u&&(c.names={type:h.type,nameType:ke(p),standAlone:h.standAlone===a})}i.push(c)}r=Re.lastIndex,o=Re.exec(n)}return r<n.length&&gn(i,n.substring(r)),i}var vn=/\{(\d+)(:[^}]+)?\}/g;function bn(t,e,n){if(e){if(Te(t))return $e(t,e,n);if(ne(t))return ee(t,e,n)}return null!=t?t:C}function wn(t,e,n){return t.replace(vn,(function(t,i,r){return bn(e[parseInt(i,10)],r?r.substring(1):C,n)}))}},6994:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ExcelExporter:()=>g,IntlService:()=>v,TemplateService:()=>o,Workbook:()=>G,Worksheet:()=>U});var i={compile:function(t){return t}},r=function(){};r.register=function(t){i=t},r.compile=function(t){return i.compile(t)};const o=r;var s=/\[(?:(\d+)|['"](.*?)['"])\]|((?:(?!\[.*?\]|\.).)+)/g,a={},l="undefined";function c(t){if(a[t])return a[t];var e=[];return t.replace(s,(function(t,n,i,r){e.push(typeof n!==l?n:i||r)})),a[t]=function(t){for(var n=t,i=0;i<e.length&&n;i++)n=n[e[i]];return n},a[t]}function h(t,e){return t.reduce((function(t,n,i){var r=e(n,i);return null!=r&&t.push(r),t}),[])}function u(t){return t.title+": "+t.value}function d(t,e){for(var n=[],i=0;i<t;i++)n.push(e(i));return n}function p(t){return t.id}a[l]=function(t){return t};var f=function(t){t.columns=this._trimColumns(t.columns||[]),this.allColumns=h(this._leafColumns(t.columns||[]),this._prepareColumn),this.columns=this._visibleColumns(this.allColumns),this.options=t,this.data=t.data||[],this.aggregates=t.aggregates||{},this.groups=[].concat(t.groups||[]),this.hasGroups=this.groups.length>0,this.hierarchy=t.hierarchy,this.hasGroupHeaderColumn=this.columns.some((function(t){return t.groupHeaderColumnTemplate})),this.collapsible=this.options.collapsible};f.prototype.workbook=function(){var t={sheets:[{columns:this._columns(),rows:this.hierarchy?this._hierarchyRows():this._rows(),freezePane:this._freezePane(),filter:this._filter()}]};return t},f.prototype._trimColumns=function(t){var e=this;return t.filter((function(t){var n=Boolean(t.field);return!n&&t.columns&&(n=e._trimColumns(t.columns).length>0),n}))},f.prototype._leafColumns=function(t){for(var e=[],n=0;n<t.length;n++)t[n].columns?e=e.concat(this._leafColumns(t[n].columns)):e.push(t[n]);return e},f.prototype._prepareColumn=function(t){if(!t.field)return null;var e=function(e){return c(t.field)(e)},n=null;return t.values&&(n={},t.values.forEach((function(t){n[t.value]=t.text})),e=function(e){return n[c(t.field)(e)]}),Object.assign({},t,{value:e,values:n,groupHeaderTemplate:t.groupHeaderTemplate?o.compile(t.groupHeaderTemplate):u,groupHeaderColumnTemplate:t.groupHeaderColumnTemplate?o.compile(t.groupHeaderColumnTemplate):null,groupFooterTemplate:t.groupFooterTemplate?o.compile(t.groupFooterTemplate):null,footerTemplate:t.footerTemplate?o.compile(t.footerTemplate):null})},f.prototype._filter=function(){if(!this.options.filterable)return null;var t=this._depth();return{from:t,to:t+this.columns.length-1}},f.prototype._createPaddingCells=function(t){var e=this;return d(t,(function(){return Object.assign({background:"#dfdfdf",color:"#333"},e.options.paddingCellOptions)}))},f.prototype._dataRow=function(t,e,n){var i=this._createPaddingCells(e);if(this.hasGroups&&n&&t.items){i=i.concat(this._groupHeaderCells(t,e,n));var r=this._dataRows(t.items,e+1);return r.unshift({type:"group-header",cells:i,level:this.collapsible?e:null}),r.concat(this._footer(t,e))}for(var o=[],s=0;s<this.columns.length;s++)o[s]=this._cell(t,this.columns[s]);return this.hierarchy&&(o[0].colSpan=n-e+1),[{type:"data",cells:i.concat(o),level:this.collapsible?e:null}]},f.prototype._groupHeaderCells=function(t,e,n){var i=[],r=this.allColumns.filter((function(e){return e.field===t.field}))[0]||{},o=r&&r.title?r.title:t.field,s=r?r.groupHeaderTemplate||r.groupHeaderColumnTemplate:null,a=Object.assign({title:o,field:t.field,value:r&&r.values?r.values[t.value]:t.value,aggregates:t.aggregates,items:t.items},t.aggregates[t.field]),l=s?s(a):o+": "+t.value;return i.push(Object.assign({value:l,background:"#dfdfdf",color:"#333",colSpan:(this.hasGroupHeaderColumn?1:this.columns.length)+n-e},r.groupHeaderCellOptions)),this.hasGroupHeaderColumn&&this.columns.forEach((function(e,n){n>0&&i.push(Object.assign({background:"#dfdfdf",color:"#333",value:e.groupHeaderColumnTemplate?e.groupHeaderColumnTemplate(Object.assign({group:a},a,t.aggregates[e.field])):void 0},e.groupHeaderCellOptions))})),i},f.prototype._dataRows=function(t,e){for(var n=this._depth(),i=[],r=0;r<t.length;r++)i.push.apply(i,this._dataRow(t[r],e,n));return i},f.prototype._hierarchyRows=function(){var t,e=this._depth(),n=this.data,i=this.hierarchy.itemLevel,r=this.hierarchy.itemId||p,o=this._hasFooterTemplate(),s=[],a=[],l=0;o||(this.collapsible=!1);for(var c=0;c<n.length;c++){var h=n[c],u=i(h,c);o&&(u>l?a.push({id:t,level:l}):u<l&&s.push.apply(s,this._hierarchyFooterRows(a,u,e)),l=u,t=r(h,c)),s.push.apply(s,this._dataRow(h,u+1,e))}if(o){s.push.apply(s,this._hierarchyFooterRows(a,0,e));var d=n.length?this.aggregates[n[0].parentId]:{};s.push(this._hierarchyFooter(d,0,e))}return this._prependHeaderRows(s),s},f.prototype._hierarchyFooterRows=function(t,e,n){for(var i=[];t.length&&t[t.length-1].level>=e;){var r=t.pop();i.push(this._hierarchyFooter(this.aggregates[r.id],r.level+1,n))}return i},f.prototype._hasFooterTemplate=function(){for(var t=this.columns,e=0;e<t.length;e++)if(t[e].footerTemplate)return!0},f.prototype._hierarchyFooter=function(t,e,n){var i=this.columns.map((function(i,r){var o=r?1:n-e+1;if(i.footerTemplate){var s=(t||{})[i.field];return Object.assign({background:"#dfdfdf",color:"#333",colSpan:o,value:i.footerTemplate(Object.assign({aggregates:t},s))},i.footerCellOptions)}return Object.assign({background:"#dfdfdf",color:"#333",colSpan:o},i.footerCellOptions)}));return{type:"footer",cells:this._createPaddingCells(e).concat(i),level:this.collapsible?e:null}},f.prototype._footer=function(t,e){var n,i,r=[],o=this.columns.some((function(t){return t.groupFooterTemplate}));o&&(i={group:{items:t.items,field:t.field,value:t.value}},n={},Object.keys(t.aggregates).forEach((function(e){n[e]=Object.assign({},t.aggregates[e],i)})));var s=this.columns.map((function(e){if(e.groupFooterTemplate){var r=Object.assign({},n,t.aggregates[e.field],i);return Object.assign({background:"#dfdfdf",color:"#333",value:e.groupFooterTemplate(r)},e.groupFooterCellOptions)}return Object.assign({background:"#dfdfdf",color:"#333"},e.groupFooterCellOptions)}));return o&&r.push({type:"group-footer",cells:this._createPaddingCells(this.groups.length).concat(s),level:this.collapsible?e:null}),r},f.prototype._isColumnVisible=function(t){return this._visibleColumns([t]).length>0&&(t.field||t.columns)},f.prototype._visibleColumns=function(t){var e=this;return t.filter((function(t){var n=t.exportable;"object"==typeof n&&(n=t.exportable.excel);var i=!t.hidden&&!1!==n,r=t.hidden&&!0===n,o=i||r;return o&&t.columns&&(o=e._visibleColumns(t.columns).length>0),o}))},f.prototype._headerRow=function(t,e){var n=this,i=t.cells.map((function(e){return Object.assign(e,{colSpan:e.colSpan>1?e.colSpan:1,rowSpan:t.rowSpan>1&&!e.colSpan?t.rowSpan:1})}));return this.hierarchy&&i[0].firstCell&&(i[0].colSpan+=this._depth()),{type:"header",cells:d(e.length,(function(){return Object.assign({background:"#7a7a7a",color:"#fff"},n.options.headerPaddingCellOptions)})).concat(i)}},f.prototype._prependHeaderRows=function(t){var e=this.groups,n=[{rowSpan:1,cells:[],index:0}];this._prepareHeaderRows(n,this.options.columns);for(var i=n.length-1;i>=0;i--)t.unshift(this._headerRow(n[i],e))},f.prototype._prepareHeaderRows=function(t,e,n,i){for(var r=this,o=i||t[t.length-1],s=t[o.index+1],a=0,l=0;l<e.length;l++){var c=e[l];if(r._isColumnVisible(c)){var h=Object.assign({background:"#7a7a7a",color:"#fff",value:c.title||c.field,colSpan:0,firstCell:0===l&&(!n||n.firstCell)},c.headerCellOptions);o.cells.push(h),c.columns&&c.columns.length&&(s||(s={rowSpan:0,cells:[],index:t.length},t.push(s)),h.colSpan=r._trimColumns(r._visibleColumns(c.columns)).length,r._prepareHeaderRows(t,c.columns,h,s),a+=h.colSpan-1,o.rowSpan=t.length-o.index)}}n&&(n.colSpan+=a)},f.prototype._rows=function(){var t=this,e=this._dataRows(this.data,0);if(this.columns.length){this._prependHeaderRows(e);var n=!1,i=this.columns.map((function(e){return e.footerTemplate?(n=!0,Object.assign({background:"#dfdfdf",color:"#333",value:e.footerTemplate(Object.assign({},t.aggregates,t.aggregates[e.field]))},e.footerCellOptions)):Object.assign({background:"#dfdfdf",color:"#333"},e.footerCellOptions)}));n&&e.push({type:"footer",cells:this._createPaddingCells(this.groups.length).concat(i)})}return e},f.prototype._headerDepth=function(t){for(var e=0,n=0;n<t.length;n++)if(t[n].columns){var i=this._headerDepth(t[n].columns);i>e&&(e=i)}return 1+e},f.prototype._freezePane=function(){var t=this._visibleColumns(this.options.columns||[]),e=this._visibleColumns(this._trimColumns(this._leafColumns(t.filter((function(t){return t.locked}))))).length;return{rowSplit:this._headerDepth(t),colSplit:e?e+this.groups.length:0}},f.prototype._cell=function(t,e){return Object.assign({value:e.value(t)},e.cellOptions)},f.prototype._depth=function(){return this.hierarchy?this.hierarchy.depth:this.groups.length},f.prototype._columns=function(){return d(this._depth(),(function(){return{width:20}})).concat(this.columns.map((function(t){return{width:parseInt(t.width,10),autoWidth:!t.width}})))};const g=f;var m={toString:function(t){return t}},y=function(){};y.register=function(t){m=t},y.toString=function(t,e){return m.toString(t,e)};const v=y;var b=n(5713);function w(t,e,n){return(1461*(t+4800+((e-13)/12|0))/4|0)+(367*(e-1-12*((e-13)/12|0))/12|0)-(3*((t+4900+((e-13)/12|0))/100|0)/4|0)+n-32075}var x=w(1900,0,-1);function _(t){var e,n,i,r,o=(e=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),r=t.getMilliseconds(),(e+(n+(i+r/1e3)/60)/60)/24),s=function(t,e,n){return w(t,e,n)-x}(t.getFullYear(),t.getMonth(),t.getDate());return s<0?s-1+o:s+o}var S="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",C="data:"+S+";base64,",k={compression:"DEFLATE",type:"base64"},A={compression:"DEFLATE",type:"blob"},E={compression:"DEFLATE",type:"arraybuffer"};function T(t){return C+t}function M(t,e){return e.indexOf(t)}var O=JSON.parse.bind(JSON);function I(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}function D(t,e){for(var n="",i=0;i<t;++i)n+=e(i);return n}function F(t,e){var n="";if(null!=t)if(Array.isArray(t))for(var i=0;i<t.length;++i)n+=e(t[i],i);else"object"==typeof t&&Object.keys(t).forEach((function(i,r){n+=e(t[i],i,r)}));return n}var P='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r',R=P+'\n            <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n               <Relationship Id="rId3" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/>\n               <Relationship Id="rId2" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/>\n               <Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/>\n            </Relationships>',L=function(t){var e=t.frozenColumns,n=t.frozenRows,i=t.columns,r=t.defaults,o=t.data,s=t.index,a=t.mergeCells,l=t.autoFilter,c=t.filter,h=t.showGridLines,u=t.hyperlinks,d=t.validations,p=t.defaultCellStyleId,f=t.rtl,g=t.legacyDrawing,m=t.drawing,y=t.lastRow,v=t.lastCol;return P+'\n<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac" mc:Ignorable="x14ac">\n   '+(y&&v?'<dimension ref="A1:'+j(y-1,v-1)+'" />':"")+"\n\n   <sheetViews>\n     <sheetView "+(f?'rightToLeft="1"':"")+" "+(0===s?'tabSelected="1"':"")+' workbookViewId="0" '+(!1===h?'showGridLines="0"':"")+">\n     "+(n||e?'\n       <pane state="frozen"\n         '+(e?'xSplit="'+e+'"':"")+"\n         "+(n?'ySplit="'+n+'"':"")+'\n         topLeftCell="'+(String.fromCharCode(65+(e||0))+((n||0)+1))+'"\n       />':"")+'\n     </sheetView>\n   </sheetViews>\n\n   <sheetFormatPr x14ac:dyDescent="0.25" '+(r.skipCustomHeight?"":'customHeight="1"')+' defaultRowHeight="'+(r.rowHeight?.75*r.rowHeight:15)+'"\n     '+(r.columnWidth?'defaultColWidth="'+H(r.columnWidth)+'"':"")+" />\n\n   "+(null!=p||i&&i.length>0?"\n     <cols>\n       "+(i&&i.length?"":'\n         <col min="1" max="16384" style="'+p+'"\n              '+(r.columnWidth?'width="'+H(r.columnWidth)+'"':"")+" /> ")+"\n       "+F(i,(function(t,e){var n="number"==typeof t.index?t.index+1:e+1;return 0===t.width?"<col "+(null!=p?'style="'+p+'"':"")+'\n                        min="'+n+'" max="'+n+'" hidden="1" customWidth="1" />':"<col "+(null!=p?'style="'+p+'"':"")+'\n                      min="'+n+'" max="'+n+'" customWidth="1"\n                      '+(t.autoWidth?'width="'+(7*t.width+5)/7*256/256+'" bestFit="1"':'width="'+H(t.width)+'"')+" />"}))+"\n     </cols>":"")+"\n\n   <sheetData>\n     "+F(o,(function(t,e){return'\n         <row r="'+("number"==typeof t.index?t.index+1:e+1)+'" x14ac:dyDescent="0.25"\n              '+(t.level?'outlineLevel="'+t.level+'"':"")+"\n              "+(0===t.height?'hidden="1"':t.height?'ht="'+(.75*t.height+'" customHeight="1"'):"")+">\n           "+F(t.data,(function(t){return'\n             <c r="'+t.ref+'" '+(t.style?'s="'+t.style+'"':"")+" "+(t.type?'t="'+t.type+'"':"")+">\n               "+(null!=t.formula?function(t){if("string"==typeof t)return"<f>"+I(t)+"</f>";return'<f t="array" ref="'+t.ref+'">'+I(t.src)+"</f>"}(t.formula):"")+"\n               "+(null!=t.value?"<v>"+I(t.value)+"</v>":"")+"\n             </c>"}))+"\n         </row>\n       "}))+"\n   </sheetData>\n\n   "+(l?'<autoFilter ref="'+l.from+":"+l.to+'"/>':c?dt(c):"")+"\n\n   "+(a.length?'\n     <mergeCells count="'+a.length+'">\n       '+F(a,(function(t){return'<mergeCell ref="'+t+'"/>'}))+"\n     </mergeCells>":"")+"\n\n   "+(d.length?"\n     <dataValidations>\n       "+F(d,(function(t){return'\n         <dataValidation sqref="'+t.sqref.join(" ")+'"\n                         showErrorMessage="'+t.showErrorMessage+'"\n                         type="'+I(t.type)+'"\n                         '+("list"!==t.type?'operator="'+I(t.operator)+'"':"")+'\n                         allowBlank="'+t.allowBlank+'"\n                         showDropDown="'+t.showDropDown+'"\n                         '+(t.error?'error="'+I(t.error)+'"':"")+"\n                         "+(t.errorTitle?'errorTitle="'+I(t.errorTitle)+'"':"")+">\n           "+(t.formula1?"<formula1>"+I(t.formula1)+"</formula1>":"")+"\n           "+(t.formula2?"<formula2>"+I(t.formula2)+"</formula2>":"")+"\n         </dataValidation>"}))+"\n     </dataValidations>":"")+"\n\n   "+(u.length?"\n     <hyperlinks>\n       "+F(u,(function(t){return'\n         <hyperlink ref="'+t.ref+'" r:id="'+t.rId+'"/>'}))+"\n     </hyperlinks>":"")+'\n\n   <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3" />\n   '+(m?'<drawing r:id="'+m+'"/>':"")+"\n   "+(g?'<legacyDrawing r:id="'+g+'"/>':"")+"\n</worksheet>"},N=function(t){return P+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+F(t,(function(t){return'\n    <Relationship Id="'+t.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/image" Target="'+t.target+'"/>'}))+"\n</Relationships>"};function B(t){var e=Math.floor(t/26)-1;return(e>=0?B(e):"")+String.fromCharCode(65+t%26)}function j(t,e){return B(e)+(t+1)}function z(t,e){return"$"+B(e)+"$"+(t+1)}function $(t){return(t.frozenRows||(t.freezePane||{}).rowSplit||1)-1}function H(t){return t/7-Math.floor(128/7)/256}var U=function(t,e,n,i){this.options=t,this._strings=e,this._styles=n,this._borders=i,this._validations={},this._comments=[],this._drawings=t.drawings||[],this._hyperlinks=(this.options.hyperlinks||[]).map((function(t,e){return Object.assign({},t,{rId:"link"+e})}))};function V(t){var e=t.length;return t.forEach((function(t){t.index&&t.index>=e&&(e=t.index+1)})),e}U.prototype.relsToXML=function(){var t=this._hyperlinks,e=this._comments,n=this._drawings;if(t.length||e.length||n.length)return function(t){var e=t.hyperlinks,n=t.comments,i=t.sheetIndex,r=t.drawings;return P+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+F(e,(function(t){return'\n    <Relationship Id="'+t.rId+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink" Target="'+I(t.target)+'" TargetMode="External" />'}))+"\n  "+(n.length?'\n    <Relationship Id="comment'+i+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments" Target="../comments'+i+'.xml"/>\n    <Relationship Id="vml'+i+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing" Target="../drawings/vmlDrawing'+i+'.vml"/>':"")+"\n  "+(r.length?'\n    <Relationship Id="drw'+i+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing" Target="../drawings/drawing'+i+'.xml"/>':"")+"\n</Relationships>"}({hyperlinks:t,comments:e,sheetIndex:this.options.sheetIndex,drawings:n})},U.prototype.toXML=function(t){var e=this,n=this.options.mergedCells||[],i=function(t,e){var n=[],i=[];!function(t,e){for(var n=0;n<t.length;n++){var i=t[n];if(i){var r=i.index;"number"!=typeof r&&(r=n),e(i,r)}}}(t,(function(t,e){var r={_source:t,index:e,height:t.height,level:t.level,cells:[]};n.push(r),i[e]=r}));for(var r=Q(n).slice(0),o={rowData:n,rowsByIndex:i,mergedCells:e},s=0;s<r.length;s++)it(r[s],o),delete r[s]._source;return Q(n)}(this.options.rows||[],n);this._readCells(i);var r,o=this.options.filter;o&&"number"==typeof o.from&&"number"==typeof o.to?o={from:j($(this.options),o.from),to:j($(this.options),o.to)}:o&&o.ref&&o.columns&&(r=o,o=null);var s=[];for(var a in e._validations)Object.prototype.hasOwnProperty.call(e._validations,a)&&s.push(e._validations[a]);var l=null;this.options.defaultCellStyle&&(l=this._lookupStyle(this.options.defaultCellStyle));var c=this.options.freezePane||{},h=this.options.defaults||{},u=this.options.rows?this._getLastRow():1,d=this.options.rows?this._getLastCol():1;return L({frozenColumns:this.options.frozenColumns||c.colSplit,frozenRows:this.options.frozenRows||c.rowSplit,columns:this.options.columns,defaults:h,data:i,index:t,mergeCells:n,autoFilter:o,filter:r,showGridLines:this.options.showGridLines,hyperlinks:this._hyperlinks,validations:s,defaultCellStyleId:l,rtl:void 0!==this.options.rtl?this.options.rtl:h.rtl,legacyDrawing:this._comments.length?"vml"+this.options.sheetIndex:null,drawing:this._drawings.length?"drw"+this.options.sheetIndex:null,lastRow:u,lastCol:d})},U.prototype.commentsXML=function(){if(this._comments.length)return function(t){var e=t.comments;return P+'\n<comments xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">\n  <authors>\n    <author></author>\n  </authors>\n  <commentList>\n    '+F(e,(function(t){return'\n      <comment ref="'+t.ref+'" authorId="0">\n        <text>\n          <r>\n            <rPr>\n              <sz val="8"/>\n              <color indexed="81"/>\n              <rFont val="Tahoma"/>\n              <charset val="1"/>\n            </rPr>\n            <t>'+I(t.text)+"</t>\n          </r>\n        </text>\n      </comment>"}))+"\n  </commentList>\n</comments>"}({comments:this._comments})},U.prototype.drawingsXML=function(t){if(this._drawings.length){var e={},n=this._drawings.map((function(n){var i=et(n.topLeftCell),r=e[n.image];return r||(r=e[n.image]={rId:"img"+n.image,target:t[n.image].target}),{col:i.col,colOffset:nt(n.offsetX),row:i.row,rowOffset:nt(n.offsetY),width:nt(n.width),height:nt(n.height),imageId:r.rId}}));return{main:(i=n,P+'\n<xdr:wsDr xmlns:xdr="http://schemas.openxmlformats.org/drawingml/2006/spreadsheetDrawing"\n          xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"\n          xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">\n  '+F(i,(function(t,e){return'\n    <xdr:oneCellAnchor editAs="oneCell">\n      <xdr:from>\n        <xdr:col>'+t.col+"</xdr:col>\n        <xdr:colOff>"+t.colOffset+"</xdr:colOff>\n        <xdr:row>"+t.row+"</xdr:row>\n        <xdr:rowOff>"+t.rowOffset+'</xdr:rowOff>\n      </xdr:from>\n      <xdr:ext cx="'+t.width+'" cy="'+t.height+'" />\n      <xdr:pic>\n        <xdr:nvPicPr>\n          <xdr:cNvPr id="'+(e+1)+'" name="Picture '+(e+1)+'"/>\n          <xdr:cNvPicPr/>\n        </xdr:nvPicPr>\n        <xdr:blipFill>\n          <a:blip r:embed="'+t.imageId+'"/>\n          <a:stretch>\n            <a:fillRect/>\n          </a:stretch>\n        </xdr:blipFill>\n        <xdr:spPr>\n          <a:prstGeom prst="rect">\n            <a:avLst/>\n          </a:prstGeom>\n        </xdr:spPr>\n      </xdr:pic>\n      <xdr:clientData/>\n    </xdr:oneCellAnchor>'}))+"\n</xdr:wsDr>"),rels:N(e)}}var i},U.prototype.legacyDrawing=function(){if(this._comments.length)return function(t){return'<xml xmlns:v="urn:schemas-microsoft-com:vml"\n     xmlns:o="urn:schemas-microsoft-com:office:office"\n     xmlns:x="urn:schemas-microsoft-com:office:excel">\n  <v:shapetype coordsize="21600,21600" id="_x0000_t202" path="m,l,21600r21600,l21600,xe">\n    <v:stroke joinstyle="miter"/>\n    <v:path gradientshapeok="t" o:connecttype="rect"/>\n  </v:shapetype>\n  '+F(t.comments,(function(t){return'\n    <v:shape type="#_x0000_t202" style="visibility: hidden" fillcolor="#ffffe1" o:insetmode="auto">\n      <v:shadow on="t" color="black" obscured="t"/>\n      <x:ClientData ObjectType="Note">\n        <x:MoveWithCells/>\n        <x:SizeWithCells/>\n        <x:Anchor>'+t.anchor+"</x:Anchor>\n        <x:AutoFill>False</x:AutoFill>\n        <x:Row>"+t.row+"</x:Row>\n        <x:Column>"+t.col+"</x:Column>\n      </x:ClientData>\n    </v:shape>"}))+"\n</xml>"}({comments:this._comments})},U.prototype._lookupString=function(t){var e,n="$"+t,i=this._strings.indexes[n];return void 0!==i?e=i:(e=this._strings.indexes[n]=this._strings.uniqueCount,this._strings.uniqueCount++),this._strings.count++,e},U.prototype._lookupStyle=function(t){var e=JSON.stringify(t);if("{}"===e)return 0;var n=M(e,this._styles);return n<0&&(n=this._styles.push(e)-1),n+1},U.prototype._lookupBorder=function(t){var e=JSON.stringify(t);if("{}"!==e){var n=M(e,this._borders);return n<0&&(n=this._borders.push(e)-1),n+1}},U.prototype._readCells=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.cells;n.data=[];for(var r=0;r<i.length;r++){var o=this._cell(i[r],n.index,r);o&&n.data.push(o)}}},U.prototype._cell=function(t,e,n){if(!t||t===Z)return null;var i=t.value,r={};t.borderLeft&&(r.left=t.borderLeft),t.borderRight&&(r.right=t.borderRight),t.borderTop&&(r.top=t.borderTop),t.borderBottom&&(r.bottom=t.borderBottom),t.dBorders&&(r.diagonal=t.dBorders),r=this._lookupBorder(r);var o,s=this.options.defaultCellStyle||{},a={borderId:r};(o=function(e,n){var i=t[e];if(void 0===i&&(i=s[e]),void 0!==i)return a[n||e]=i,!0})("color"),o("background"),o("bold"),o("italic"),o("underline"),o("fontFamily")||o("fontName","fontFamily"),o("fontSize"),o("format"),o("textAlign")||o("hAlign","textAlign"),o("verticalAlign")||o("vAlign","verticalAlign"),o("wrap"),o("indent");var l=(this.options.columns||[])[n],c=typeof i;if(l&&l.autoWidth&&(!t.colSpan||1===t.colSpan)){var h=i;"number"===c&&(h=v.toString(i,t.format)),l.width=Math.max(l.width||0,String(h).length)}"string"===c?(i=function(t){return String(t).replace(/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,"").replace(/\r?\n/g,"\r\n")}(i),i=this._lookupString(i),c="s"):"number"===c?c="n":"boolean"===c?(c="b",i=Number(i)):i&&i.getTime?(c=null,i=_(i),a.format||(a.format="mm-dd-yy")):(c=null,i=null),a=this._lookupStyle(a);var u=j(e,n);if(t.validation&&this._addValidation(t.validation,u),t.comment){var d=[n+1,15,e,10,n+3,15,e+3,4];this._comments.push({ref:u,text:t.comment,row:e,col:n,anchor:d.join(", ")})}return{value:i,formula:t.formula,type:c,style:a,ref:u}},U.prototype._addValidation=function(t,e){var n={showErrorMessage:"reject"===t.type?1:0,formula1:t.from,formula2:t.to,type:q[t.dataType]||t.dataType,operator:W[t.comparerType]||t.comparerType,allowBlank:t.allowNulls?1:0,showDropDown:t.showButton?0:1,error:t.messageTemplate,errorTitle:t.titleTemplate},i=JSON.stringify(n);this._validations[i]||(this._validations[i]=n,n.sqref=[]),this._validations[i].sqref.push(e)},U.prototype._getLastRow=function(){return V(this.options.rows)},U.prototype._getLastCol=function(){var t=0;return this.options.rows.forEach((function(e){e.cells&&(t=Math.max(t,V(e.cells)))})),t};var W={greaterThanOrEqualTo:"greaterThanOrEqual",lessThanOrEqualTo:"lessThanOrEqual"},q={number:"decimal"},K={General:0,0:1,"0.00":2,"#,##0":3,"#,##0.00":4,"0%":9,"0.00%":10,"0.00E+00":11,"# ?/?":12,"# ??/??":13,"mm-dd-yy":14,"d-mmm-yy":15,"d-mmm":16,"mmm-yy":17,"h:mm AM/PM":18,"h:mm:ss AM/PM":19,"h:mm":20,"h:mm:ss":21,"m/d/yy h:mm":22,"#,##0 ;(#,##0)":37,"#,##0 ;[Red](#,##0)":38,"#,##0.00;(#,##0.00)":39,"#,##0.00;[Red](#,##0.00)":40,"mm:ss":45,"[h]:mm:ss":46,"mmss.0":47,"##0.0E+0":48,"@":49,"[$-404]e/m/d":27,"m/d/yy":30,t0:59,"t0.00":60,"t#,##0":61,"t#,##0.00":62,"t0%":67,"t0.00%":68,"t# ?/?":69,"t# ??/??":70};function X(t){var e=function(t){function e(t){var e=parseInt(t,10).toString(16);return e.length<2?"0"+e:e}var n=/^rgba?\((\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*([0-9.]+)\s*)?\)/i.exec(t.trim());return n?"#"+e(255*(n[4]?parseFloat(n[4]):1)|0)+e(n[1])+e(n[2])+e(n[3]):t}(t);return e.length<6&&(e=e.replace(/(\w)/g,(function(t,e){return e+e}))),(e=e.substring(1).toUpperCase()).length<8&&(e="FF"+e),e}var G=function(t){var e=this;this.options=t||{},this._strings={indexes:{},count:0,uniqueCount:0},this._styles=[],this._borders=[],this._images=this.options.images,this._imgId=0,this._sheets=h(this.options.sheets||[],(function(t,n){return t.defaults=e.options,t.sheetIndex=n+1,new U(t,e._strings,e._styles,e._borders)}))};function Y(t,e){var n,i,r="";return e&&(r+="<"+t+' style="'+(n=e.size,i="thin",2===n?i="medium":3===n&&(i="thick"),i+'">'),e.color&&(r+='<color rgb="'+X(e.color)+'"/>'),r+="</"+t+">"),r}function J(t){var e=t.diagonal?t.diagonal.type:0;return"<border "+(2&e?'diagonalUp="true"':"")+" "+(1&e?'diagonalDown="true"':"")+">\n      "+Y("left",t.left)+"\n      "+Y("right",t.right)+"\n      "+Y("top",t.top)+"\n      "+Y("bottom",t.bottom)+"\n      "+Y("diagonal",t.diagonal)+"\n    </border>"}G.prototype.imageFilename=function(t){var e=++this._imgId;switch(t){case"image/jpg":case"image/jpeg":return"image"+e+".jpg";case"image/png":return"image"+e+".png";case"image/gif":return"image"+e+".gif";default:return"image"+e+".bin"}},G.prototype.toZIP=function(){var t=this,e=new b.A,n=e.folder("docProps");n.file("core.xml",function(t){var e=t.creator,n=t.lastModifiedBy,i=t.created,r=t.modified;return P+'\n <cp:coreProperties xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties"\n   xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/"\n   xmlns:dcmitype="http://purl.org/dc/dcmitype/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n   <dc:creator>'+I(e)+"</dc:creator>\n   <cp:lastModifiedBy>"+I(n)+'</cp:lastModifiedBy>\n   <dcterms:created xsi:type="dcterms:W3CDTF">'+I(i)+'</dcterms:created>\n   <dcterms:modified xsi:type="dcterms:W3CDTF">'+I(r)+"</dcterms:modified>\n</cp:coreProperties>"}({creator:this.options.creator||"Kendo UI",lastModifiedBy:this.options.creator||"Kendo UI",created:this.options.date||(new Date).toJSON(),modified:this.options.date||(new Date).toJSON()}));var i=this._sheets.length;n.file("app.xml",function(t){var e=t.sheets;return P+'\n<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties" xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes">\n  <Application>Microsoft Excel</Application>\n  <DocSecurity>0</DocSecurity>\n  <ScaleCrop>false</ScaleCrop>\n  <HeadingPairs>\n    <vt:vector size="2" baseType="variant">\n      <vt:variant>\n        <vt:lpstr>Worksheets</vt:lpstr>\n      </vt:variant>\n      <vt:variant>\n        <vt:i4>'+e.length+'</vt:i4>\n      </vt:variant>\n    </vt:vector>\n  </HeadingPairs>\n  <TitlesOfParts>\n    <vt:vector size="'+e.length+'" baseType="lpstr">'+F(e,(function(t,e){return t.options.title?"<vt:lpstr>"+I(t.options.title)+"</vt:lpstr>":"<vt:lpstr>Sheet"+(e+1)+"</vt:lpstr>"}))+"</vt:vector>\n  </TitlesOfParts>\n  <LinksUpToDate>false</LinksUpToDate>\n  <SharedDoc>false</SharedDoc>\n  <HyperlinksChanged>false</HyperlinksChanged>\n  <AppVersion>14.0300</AppVersion>\n</Properties>"}({sheets:this._sheets})),e.folder("_rels").file(".rels",R);var r=e.folder("xl");if(r.folder("_rels").file("workbook.xml.rels",function(t){var e=t.count;return P+'\n<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">\n  '+D(e,(function(t){return'\n    <Relationship Id="rId'+(t+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet'+(t+1)+'.xml" />'}))+'\n  <Relationship Id="rId'+(e+1)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" />\n  <Relationship Id="rId'+(e+2)+'" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings" Target="sharedStrings.xml" />\n</Relationships>'}({count:i})),this._images){var o=r.folder("media");Object.keys(this._images).forEach((function(e){var n=t._images[e],i=t.imageFilename(n.type);o.file(i,n.data),n.target="../media/"+i}))}var s={};r.file("workbook.xml",function(t){var e=t.sheets,n=t.filterNames,i=t.userNames;return P+'\n<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">\n  <fileVersion appName="xl" lastEdited="5" lowestEdited="5" rupBuild="9303" />\n  <workbookPr defaultThemeVersion="124226" />\n  <bookViews>\n    <workbookView xWindow="240" yWindow="45" windowWidth="18195" windowHeight="7995" />\n  </bookViews>\n  <sheets>\n  '+F(e,(function(t,e){var n=t.options,i=n.name||n.title||"Sheet"+(e+1),r=n.state||"visible";return'<sheet name="'+I(i)+'" state="'+r+'" sheetId="'+(e+1)+'" r:id="rId'+(e+1)+'" />'}))+"\n  </sheets>\n  "+(n.length||i.length?"\n    <definedNames>\n      "+F(n,(function(t){return'\n         <definedName name="_xlnm._FilterDatabase" hidden="1" localSheetId="'+t.localSheetId+'">'+I(function(t){return/^\'/.test(t)||/^[a-z_][a-z0-9_]*$/i.test(t)?t:"'"+t.replace(/\x27/g,"\\'")+"'"}(t.name))+"!"+I(t.from)+":"+I(t.to)+"</definedName>"}))+"\n      "+F(i,(function(t){return'\n         <definedName name="'+t.name+'" hidden="'+(t.hidden?1:0)+'" '+(null!=t.localSheetId?'localSheetId="'+t.localSheetId+'"':"")+">"+I(t.value)+"</definedName>"}))+"\n    </definedNames>":"")+'\n  <calcPr fullCalcOnLoad="1" calcId="145621" />\n</workbook>'}({sheets:this._sheets,filterNames:h(this._sheets,(function(t,e){var n=t.options,i=n.name||n.title||"Sheet"+(e+1);s[i.toLowerCase()]=e;var r=n.filter;if(r){if(r.ref){var o=r.ref.split(":"),a=et(o[0]),l=et(o[1]);return{localSheetId:e,name:i,from:z(a.row,a.col),to:z(l.row,l.col)}}if(void 0!==r.from&&void 0!==r.to)return{localSheetId:e,name:i,from:z($(n),r.from),to:z($(n),r.to)}}})),userNames:h(this.options.names||[],(function(t){return{name:t.localName,localSheetId:t.sheet?s[t.sheet.toLowerCase()]:null,value:t.value,hidden:t.hidden}}))}));for(var a=r.folder("worksheets"),l=r.folder("drawings"),c=l.folder("_rels"),u=a.folder("_rels"),d=[],p=[],f=0;f<i;f++){var g=t._sheets[f],m="sheet"+(f+1)+".xml",y=g.toXML(f),v=g.relsToXML(),w=g.commentsXML(),x=g.legacyDrawing(),_=g.drawingsXML(t._images);if(v&&u.file(m+".rels",v),w){var S="comments"+g.options.sheetIndex+".xml";r.file(S,w),d.push(S)}if(x&&l.file("vmlDrawing"+g.options.sheetIndex+".vml",x),_){var C="drawing"+g.options.sheetIndex+".xml";l.file(C,_.main),c.file(C+".rels",_.rels),p.push(C)}a.file(m,y)}var k=h(this._borders,O),A=h(this._styles,O),E=function(t){return t.underline||t.bold||t.italic||t.color||t.fontFamily||t.fontSize},T=h(A,(function(t){var e,n,i;if(t.fontSize&&(t.fontSize=(e=t.fontSize,(i=Number(e))&&(n=3*i/4),n)),t.color&&(t.color=X(t.color)),E(t))return t})),L=h(A,(function(t){if(t.format&&void 0===K[t.format])return t})),N=h(A,(function(t){if(t.background)return t.background=X(t.background),t}));return r.file("styles.xml",function(t){var e=t.formats,n=t.fonts,i=t.fills,r=t.borders,o=t.styles;return P+'\n<styleSheet\n    xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"\n    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"\n    mc:Ignorable="x14ac"\n    xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">\n  <numFmts count="'+e.length+'">\n  '+F(e,(function(t,e){return'\n    <numFmt formatCode="'+I(t.format)+'" numFmtId="'+(165+e)+'" />'}))+'\n  </numFmts>\n  <fonts count="'+(n.length+1)+'" x14ac:knownFonts="1">\n    <font>\n       <sz val="11" />\n       <color theme="1" />\n       <name val="Calibri" />\n       <family val="2" />\n       <scheme val="minor" />\n    </font>\n    '+F(n,(function(t){return"\n    <font>\n      "+(t.bold?"<b/>":"")+"\n      "+(t.italic?"<i/>":"")+"\n      "+(t.underline?"<u/>":"")+'\n      <sz val="'+(t.fontSize||11)+'" />\n      '+(t.color?'<color rgb="'+I(t.color)+'" />':'<color theme="1" />')+"\n      "+(t.fontFamily?'\n        <name val="'+I(t.fontFamily)+'" />\n        <family val="2" />\n      ':'\n        <name val="Calibri" />\n        <family val="2" />\n        <scheme val="minor" />\n      ')+"\n    </font>"}))+'\n  </fonts>\n  <fills count="'+(i.length+2)+'">\n      <fill><patternFill patternType="none"/></fill>\n      <fill><patternFill patternType="gray125"/></fill>\n    '+F(i,(function(t){return"\n      "+(t.background?'\n        <fill>\n          <patternFill patternType="solid">\n              <fgColor rgb="'+I(t.background)+'"/>\n          </patternFill>\n        </fill>\n      ':"")}))+'\n  </fills>\n  <borders count="'+(r.length+1)+'">\n    <border><left/><right/><top/><bottom/><diagonal/></border>\n    '+F(r,J)+'\n  </borders>\n  <cellStyleXfs count="1">\n    <xf borderId="0" fillId="0" fontId="0" />\n  </cellStyleXfs>\n  <cellXfs count="'+(o.length+1)+'">\n    <xf numFmtId="0" fontId="0" fillId="0" borderId="0" xfId="0" />\n    '+F(o,(function(t){return'\n      <xf xfId="0"\n          '+(t.fontId?'fontId="'+t.fontId+'" applyFont="1"':"")+"\n          "+(t.fillId?'fillId="'+t.fillId+'" applyFill="1"':"")+"\n          "+(t.numFmtId?'numFmtId="'+t.numFmtId+'" applyNumberFormat="1"':"")+"\n          "+(t.textAlign||t.verticalAlign||t.wrap?'applyAlignment="1"':"")+"\n          "+(t.borderId?'borderId="'+t.borderId+'" applyBorder="1"':"")+">\n        "+(t.textAlign||t.verticalAlign||t.wrap?"\n        <alignment\n          "+(t.textAlign?'horizontal="'+I(t.textAlign)+'"':"")+"\n          "+(t.verticalAlign?'vertical="'+I(t.verticalAlign)+'"':"")+"\n          "+(t.indent?'indent="'+I(t.indent)+'"':"")+"\n          "+(t.wrap?'wrapText="1"':"")+" />\n        ":"")+"\n      </xf>\n    "}))+'\n  </cellXfs>\n  <cellStyles count="1">\n    <cellStyle name="Normal" xfId="0" builtinId="0"/>\n  </cellStyles>\n  <dxfs count="0" />\n  <tableStyles count="0" defaultTableStyle="TableStyleMedium2" defaultPivotStyle="PivotStyleMedium9" />\n</styleSheet>'}({fonts:T,fills:N,formats:L,borders:k,styles:h(A,(function(t){var e={};return E(t)&&(e.fontId=M(t,T)+1),t.background&&(e.fillId=M(t,N)+2),e.textAlign=t.textAlign,e.indent=t.indent,e.verticalAlign=t.verticalAlign,e.wrap=t.wrap,e.borderId=t.borderId,t.format&&(void 0!==K[t.format]?e.numFmtId=K[t.format]:e.numFmtId=165+M(t,L)),e}))})),r.file("sharedStrings.xml",function(t){var e=t.count,n=t.uniqueCount,i=t.indexes;return P+'\n<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="'+e+'" uniqueCount="'+n+'">\n  '+F(Object.keys(i),(function(t){return'\n    <si><t xml:space="preserve">'+I(t.substring(1))+"</t></si>"}))+"\n</sst>"}(this._strings)),e.file("[Content_Types].xml",function(t){var e=t.sheetCount,n=t.commentFiles,i=t.drawingFiles;return P+'\n<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">\n  <Default Extension="png" ContentType="image/png"/>\n  <Default Extension="gif" ContentType="image/gif"/>\n  <Default Extension="jpg" ContentType="image/jpeg"/>\n  <Default Extension="rels" ContentType="application/vnd.openxmlformats-package.relationships+xml" />\n  <Default Extension="xml" ContentType="application/xml" />\n  <Default Extension="vml" ContentType="application/vnd.openxmlformats-officedocument.vmlDrawing"/>\n  <Override PartName="/xl/workbook.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml" />\n  <Override PartName="/xl/styles.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"/>\n  <Override PartName="/xl/sharedStrings.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"/>\n  '+D(e,(function(t){return'<Override PartName="/xl/worksheets/sheet'+(t+1)+'.xml" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml" />'}))+"\n  "+F(n,(function(t){return'<Override PartName="/xl/'+t+'" ContentType="application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml"/>'}))+"\n  "+F(i,(function(t){return'<Override PartName="/xl/drawings/'+t+'" ContentType="application/vnd.openxmlformats-officedocument.drawing+xml"/>'}))+'\n  <Override PartName="/docProps/core.xml" ContentType="application/vnd.openxmlformats-package.core-properties+xml" />\n  <Override PartName="/docProps/app.xml" ContentType="application/vnd.openxmlformats-officedocument.extended-properties+xml" />\n</Types>'}({sheetCount:i,commentFiles:d,drawingFiles:p})),e},G.prototype.toDataURL=function(){var t=this.toZIP();return t.generateAsync?t.generateAsync(k).then(T):T(t.generate(k))},G.prototype.toBlob=function(){var t=this.toZIP();return t.generateAsync?t.generateAsync(A):new Blob([t.generate(E)],{type:S})};var Z={};function Q(t){return t.sort((function(t,e){return t.index-e.index}))}function tt(t,e){for(var n=0;n<t.length;++n){var i=t[n].split(":"),r=i[0];if(r===e){var o=i[1];return r=et(r),{rowSpan:(o=et(o)).row-r.row+1,colSpan:o.col-r.col+1}}}}function et(t){var e,n=/^([a-z]+)(\d+)$/i.exec(t);return{row:(e=n[2],parseInt(e,10)-1),col:function(t){for(var e=t.toUpperCase(),n=0,i=0;i<e.length;++i)n=26*n+e.charCodeAt(i)-64;return n-1}(n[1])}}function nt(t){return Math.round(9525*t)}function it(t,e){var n,i,r=t._source,o=t.index,s=r.cells,a=t.cells;if(s)for(var l=0;l<s.length;l++){var c=s[l]||Z,h=c.rowSpan||1,u=c.colSpan||1,d=rt(a,c),p=j(o,d);if(1===h&&1===u){var f=tt(e.mergedCells,p);f&&(u=f.colSpan,h=f.rowSpan)}if(st(c,a,d,u),(h>1||u>1)&&(n=e.mergedCells,i=p+":"+j(o+h-1,d+u-1),n.indexOf(i)<0&&n.push(i)),h>1)for(var g=o+1;g<o+h;g++){var m=e.rowsByIndex[g];m||(m=e.rowsByIndex[g]={index:g,cells:[]},e.rowData.push(m)),st(c,m.cells,d-1,u+1)}}}function rt(t,e){var n;return"number"==typeof e.index?(n=e.index,ot(t,e,e.index)):n=function(t,e){for(var n=t.length,i=0;i<t.length+1;i++)if(!t[i]){t[i]=e,n=i;break}return n}(t,e),n}function ot(t,e,n){t[n]=e}function st(t,e,n,i){for(var r=1;r<i;r++){ot(e,{borderTop:t.borderTop,borderRight:t.borderRight,borderBottom:t.borderBottom,borderLeft:t.borderLeft},n+r)}}var at=function(t){var e=t.ref,n=t.columns,i=t.generators;return'\n<autoFilter ref="'+e+'">\n  '+F(n,(function(t){return'\n    <filterColumn colId="'+t.index+'">\n      '+i[t.filter](t)+"\n    </filterColumn>\n  "}))+"\n</autoFilter>"},lt=function(t){return"\n<customFilters "+("and"===t.logic?'and="1"':"")+">\n"+F(t.criteria,(function(t){var e=dt.customOperator(t);return"<customFilter "+(e?'operator="'+e+'"':"")+' val="'+dt.customValue(t)+'"/>'}))+"\n</customFilters>"},ct=function(t){var e=t.type;return'<dynamicFilter type="'+dt.dynamicFilterType(e)+'" />'},ht=function(t){var e=t.type,n=t.value;return'<top10 percent="'+(/percent$/i.test(e)?1:0)+'"\n       top="'+(/^top/i.test(e)?1:0)+'"\n       val="'+n+'" />'},ut=function(t){return"<filters "+(t.blanks?'blank="1"':"")+">\n    "+F(t.values,(function(t){return'\n      <filter val="'+t+'" />'}))+"\n  </filters>"};function dt(t){return at({ref:t.ref,columns:t.columns,generators:{custom:lt,dynamic:ct,top:ht,value:ut}})}dt.customOperator=function(t){return{eq:"equal",gt:"greaterThan",gte:"greaterThanOrEqual",lt:"lessThan",lte:"lessThanOrEqual",ne:"notEqual",doesnotstartwith:"notEqual",doesnotendwith:"notEqual",doesnotcontain:"notEqual",doesnotmatch:"notEqual"}[t.operator.toLowerCase()]},dt.customValue=function(t){function e(t){return t.replace(/([*?])/g,"~$1")}switch(t.operator.toLowerCase()){case"startswith":case"doesnotstartwith":return e(t.value)+"*";case"endswith":case"doesnotendwith":return"*"+e(t.value);case"contains":case"doesnotcontain":return"*"+e(t.value)+"*";default:return t.value}},dt.dynamicFilterType=function(t){return{quarter1:"Q1",quarter2:"Q2",quarter3:"Q3",quarter4:"Q4",january:"M1",february:"M2",march:"M3",april:"M4",may:"M5",june:"M6",july:"M7",august:"M8",september:"M9",october:"M10",november:"M11",december:"M12"}[t.toLowerCase()]||t}},773:(t,e,n)=>{"use strict";n.r(e),n.d(e,{DEFAULT_ZOOM_LEVEL:()=>y,Scroller:()=>a,SearchService:()=>d,calculateZoomLevel:()=>P,currentPage:()=>L,download:()=>_,goToNextSearchMatch:()=>D,goToPreviousSearchMatch:()=>F,loadPDF:()=>S,print:()=>k,reloadDocument:()=>C,removeChildren:()=>w,scrollToPage:()=>R});var i=n(4419);const r=function(t,e,n={}){let i,r,o,s,a=0;const l=function(){a=!1===n.leading?0:(new Date).getTime(),i=void 0,s=t.apply(r,o),i||(r=o=null)};return function(){const c=(new Date).getTime();a||!1!==n.leading||(a=c);const h=e-(c-a);return r=void 0,o=arguments,h<=0||h>e?(i&&(clearTimeout(i),i=void 0),a=c,s=t.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=window.setTimeout(l,h)),s}},o=1e3/60,s="scroll";class a{constructor(t,e){this.options={events:{[s]:()=>{}},filter:"",panScrollThrottleDelay:o,scrollDirectionModifier:-1,scrollThrottleDelay:o},this.onElementScroll=()=>{const t=this.element;this.state.trackNextElementScroll?this.scrollTo(t.scrollLeft,t.scrollTop):this.state.trackNextElementScroll=!0},this.onDragStart=t=>{if(this.state.dragStarted=!1,!this.shouldTrackPanEvents())return;const e=t.target||(t.originalEvent||{}).target;this.options.filter&&!((t,e)=>!(!t||!e)&&t.closest(e))(e,this.options.filter)||((t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()})(t),this.setState({dragStarted:!0,location:{pageX:t.pageX,pageY:t.pageY},locationDelta:{x:0,y:0}}))},this.onDrag=t=>{if(!this.shouldTrackPanEvents()||!this.state.dragStarted)return;this.calculateEventLocationDelta(t),this.setState({location:{pageX:t.pageX,pageY:t.pageY}});const e=this.options.scrollDirectionModifier,n=this.element.scrollLeft+e*this.state.locationDelta.x,i=this.element.scrollTop+e*this.state.locationDelta.y;this.scrollTo(n,i)},this.onDragEnd=()=>{this.shouldTrackPanEvents()},this.element=t,this.options=Object.assign({},this.options,e),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents()}initDraggable(){this.destroyDraggable(),this.options.panScrollThrottleDelay>0?this.throttledOnDrag=r(this.onDrag,this.options.panScrollThrottleDelay):this.throttledOnDrag=this.onDrag,this.draggable=new i.default({mouseOnly:!1,press:this.onDragStart,drag:this.throttledOnDrag,release:this.onDragEnd}),this.draggable.bindTo(this.element)}destroyDraggable(){this.draggable&&this.draggable.destroy&&(this.draggable.destroy(),this.throttledOnDrag&&this.throttledOnDrag.cancel&&(this.throttledOnDrag.cancel(),this.throttledOnDrag=null))}bindEvents(){this.bindDraggableEvents(),this.bindElementScroll()}bindDraggableEvents(){this.initDraggable()}bindElementScroll(){this.options.scrollThrottleDelay>0?this.throttledOnElementScroll=r(this.onElementScroll,this.options.scrollThrottleDelay):this.throttledOnElementScroll=this.onElementScroll,this.element.addEventListener(s,this.throttledOnElementScroll)}unbindEvents(){this.unbindElementScroll(),this.unbindDraggableEvents()}unbindDraggableEvents(){this.destroyDraggable()}unbindElementScroll(){this.throttledOnElementScroll&&this.throttledOnElementScroll.cancel&&(this.throttledOnElementScroll.cancel(),this.throttledOnElementScroll=null),this.element.removeEventListener(s,this.throttledOnElementScroll)}setState(t){this.state=Object.assign({},this.state||{},t)}resetState(){this.setState({trackPanEvents:!1,trackNextElementScroll:!1,location:{pageX:0,pageY:0},locationDelta:{x:0,y:0}})}enablePanEventsTracking(){this.state.trackPanEvents=!0,this.bindDraggableEvents()}disablePanEventsTracking(){this.unbindDraggableEvents(),this.state.trackPanEvents=!1}shouldTrackPanEvents(){return this.state.trackPanEvents}calculateEventLocationDelta(t){this.state.locationDelta={x:t.pageX-this.state.location.pageX,y:t.pageY-this.state.location.pageY}}scrollTo(t,e,n={trackScrollEvent:!0}){n.trackScrollEvent||(this.state.trackNextElementScroll=!1),this.element.scrollLeft=t,this.element.scrollTop=e}}const l=t=>{const e=t.parentElement;t&&e&&e.replaceWith(...Array.from(e.childNodes))},c=t=>`.${t}`,h="data-char-index",u="data-match-index";class d{constructor(t){this.options={highlightClass:"k-search-highlight",highlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textContainers:[]},this.extendOptions(t),this.resetState()}destroy(){this.clearSearch()}extendOptions(t){this.options=Object.assign({},this.options,t)}setState(t){this.state=Object.assign({},this.state||{},t)}resetState(){this.setState({text:"",textNodes:[],charIndex:0,activeMatchIndex:0,matches:[]})}escapeRegExp(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}search({text:t,matchCase:e}){const n=this.escapeRegExp(t),i=new RegExp(n,e?"g":"ig");let r;if(this.shouldTransformText()&&this.transformTextForSearch(),this.state.matches=[],this.state.activeMatchIndex=0,this.removeIndicators(),""===n)return[];for(r=i.exec(this.state.text);r;)this.state.matches.push({startOffset:r.index,endOffset:r.index+r[0].length}),r=i.exec(this.state.text);return this.highlightAllMatches(),this.addActiveMatchMark(),this.state.matches}clearSearch(){this.removeIndicators(),this.restoreOriginalText()}restoreOriginalText(){this.forEachTextContainer((t=>{Array.from(t.querySelectorAll("span:not(."+this.options.charClass+")")).forEach((t=>{t.innerHTML=t.textContent}))}))}shouldTransformText(){return!this.state.text}transformTextForSearch(){this.state.textNodes=[],this.state.charIndex=0,this.state.text="",this.forEachTextContainer((t=>{this.extractTextNodes(t)})),this.transformTextNodesForSearch(this.state.textNodes)}extractTextNodes(t){if(t.nodeType===Node.TEXT_NODE)this.state.textNodes.push(t);else for(let e=0;e<t.childNodes.length;e++)this.extractTextNodes(t.childNodes[e])}transformTextNodesForSearch(t){for(let e=0;e<t.length;e++)this.transformTextNodeForSearch(t[e])}transformTextNodeForSearch(t){const e=t.textContent;if(e.length<=0)return;this.state.text=this.state.text+e;const n=document.createElement("span");var i,r;r=n,(i=t).parentNode&&(i.parentNode.insertBefore(r,i),r.appendChild(i));const o=this.splitTextByChars(e);n.innerHTML=o,l(n.childNodes[0])}splitTextByChars(t){let e="";for(let n=0;n<t.length;n++)e+=`<span class='${this.options.charClass}' ${h}=${this.state.charIndex}>${t[n]}</span>`,this.state.charIndex++;return e}forEachTextContainer(t){for(let e=0;e<this.options.textContainers.length;e++){t(this.options.textContainers[e],e)}}highlightAllMatches(){this.state.matches.forEach(((t,e)=>{this.addMatchHighlight(t.startOffset,t.endOffset,e)}))}addMatchHighlight(t,e,n){for(let i=t;i<e;i++)this.forEachTextContainer((t=>{Array.from(t.querySelectorAll(c(`${this.options.charClass}[${h}='${i}']`))).forEach((t=>{var e;e=this.options.highlightClass,t.classList.add(e),t.setAttribute(u,n)}))}))}removeMatchHighlights(){this.forEachTextContainer((t=>{Array.from(t.querySelectorAll(c(this.options.highlightClass))).forEach((t=>{var e;e=this.options.highlightClass,t.classList.remove(e),t.removeAttribute(u)}))}))}addActiveMatchMark(){this.state.activeMatchIndex||0===this.state.activeMatchIndex?this.state.activeMatchIndex>this.state.matches.length?this.state.activeMatchIndex=this.state.matches.length:this.removeActiveMatchMark():this.state.activeMatchIndex=0;const t=document.createElement("span");t.classList.add(this.options.highlightMarkClass),this.forEachTextContainer((e=>{Array.from(e.querySelectorAll(c(this.options.charClass+"["+u+"='"+this.state.activeMatchIndex+"']"))).forEach((e=>{((t,e)=>{if(t&&t.parentNode&&e)for(t.appendChild(e);t.firstChild&&t.firstChild!==e;)e.appendChild(t.firstChild)})(e,t.cloneNode(!0))}))}))}removeActiveMatchMark(){this.forEachTextContainer((t=>{(t=>{if(t&&t.length&&!(t.length<=0))for(let e=0;e<t.length;e++)l(t[e])})(Array.from(t.querySelectorAll(c(this.options.highlightMarkClass))).flatMap((t=>Array.from(t.childNodes))))}))}removeIndicators(){this.removeActiveMatchMark(),this.removeMatchHighlights()}markNextMatch(){this.markNextMatchIndex(),this.addActiveMatchMark()}markPreviousMatch(){this.markPreviousMatchIndex(),this.addActiveMatchMark()}markNextMatchIndex(){this.moveActiveMatchIndex(1)}markPreviousMatchIndex(){this.moveActiveMatchIndex(-1)}moveActiveMatchIndex(t){this.state.activeMatchIndex+=t,this.state.activeMatchIndex<0?this.state.activeMatchIndex=Math.max(this.state.matches.length-1,0):this.state.activeMatchIndex>this.state.matches.length-1&&(this.state.activeMatchIndex=0)}getActiveMatchElement(){let t;return this.forEachTextContainer((e=>{const n=e.querySelector(c(this.options.highlightMarkClass));n&&(t=n)})),t}}var p=n(9478),f=n(6764),g=n(748);const m=268435456,y=1.25,v=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&/Macintosh/i.test(navigator.userAgent)?devicePixelRatio:3*devicePixelRatio,b=t=>{let e={verbosity:0,isEvalSupported:!1};var n;return"string"==typeof t.data?e.data=(n=t.data,atob(n.replace(/^(data:application\/pdf;base64,)/gi,""))):"string"==typeof t.url?e.url=t.url:t.arrayBuffer instanceof ArrayBuffer?e=t.arrayBuffer:t.typedArray&&(e=t.typedArray),e},w=t=>{for(;t.firstChild;)t.removeChild(t.firstChild)},x=(t,e,n)=>{0===n&&w(t),t.appendChild(e)},_=(t,e="Document",n={},i)=>{t.pdf&&t.pdf.getData().then((t=>new Blob([t],{type:"application/pdf"}))).then((t=>{i(t,e,n)||(0,p.saveAs)(t,e,n)})).catch((e=>{t.error.call(void 0,e)}))},S=t=>{const e=b(t),{dom:n,zoom:i,done:r,error:o}=t;(0,g.getDocument)(e).promise.then((t=>{const e=[];for(let n=1;n<=t.numPages;n++)e.push(t.getPage(n));return{pages:e,pdfDoc:t}})).then((({pages:e,pdfDoc:s})=>{Promise.all(e).then((t=>t.map(((t,e)=>(x(n,O(t,i,o),e),t))))).then((t=>{r({pdfPages:t,pdfDoc:s,zoom:i})})).catch((e=>{t.error(e)}))})).catch((e=>{t.error(e)}))},C=t=>{const{pdfDoc:e,zoom:n,dom:i,done:r,error:o}=t,s=[];for(let t=1;t<=e.numPages;t++)s.push(e.getPage(t));Promise.all(s).then((t=>t.map(((t,e)=>(x(i,O(t,n,o),e),t))))).then(r).catch(o)},k=(t,e,n)=>{const i=document.createElement("div"),r=t.map((()=>!1)),o=v();t.forEach(((t,s)=>{const a=E(t,(t=>{i.appendChild(t),r[s]=!0,r.every(Boolean)&&A(i,Math.floor(a.width/o),Math.floor(a.height/o),e,n)}),n)}))},A=(t,e,n,i,r)=>{const o=window.open("","","innerWidth="+e+",innerHeight="+n+"location=no,titlebar=no,toolbar=no");if(o&&o.document){if(o){o.document.body.style.margin="0",o.document.body.appendChild(t),o.focus(),setTimeout((()=>{o.print(),i()}));const e=()=>{o.removeEventListener("afterprint",e),o.close()};o.addEventListener("afterprint",e)}}else r()},E=(t,e,n)=>{const{canvasContext:i,viewport:r,scaleNum:o,canvas:s,pageElement:a}=B(t);return t.render({canvasContext:i,viewport:r}).promise.then((()=>{const t=new Image(Math.floor(r.width/o),Math.floor(r.height/o));t.src=s.toDataURL();const n=()=>{t.removeEventListener("load",n),e(a)};t.addEventListener("load",n)})).catch(n),r},T=function(t,e,n){const i=document.createElement(t);return e&&(i.className=e),Object.keys(n).forEach((t=>i.style[t]=n[t])),i},M={0:"",90:"rotate(90deg) translateY(-100%)",180:"rotate(180deg) translate(-100%, -100%)",270:"rotate(270deg) translateX(-100%)"},O=(t,e,n)=>{const{canvasContext:i,viewport:r,pageElement:o,styles:s}=B(t,e,"k-page");return t.render({canvasContext:i,viewport:r}).promise.then((()=>{t.getTextContent().then((t=>{const e=T("div","k-text-layer",s);(0,g.renderTextLayer)({textContentSource:t,container:e,viewport:r,textDivs:[]}).promise.then((()=>{e.style.width=e.style.width.replace(/px/g,"pt"),e.style.height=e.style.height.replace(/px/g,"pt");const t=e.getAttribute("data-main-rotation")||"0";M[t]&&(e.style.transform=M[t],e.style.transformOrigin="top left"),e.querySelectorAll("span").forEach((t=>{t.style.fontSize&&(t.style.fontSize=t.style.fontSize.replace(/px/g,"pt"))})),o.appendChild(e)})).catch(n)}))})).catch(n),o},I=(t,e)=>{if(!t)return;const n=t.closest(".k-text-char"),i=n?n.closest('span[role="presentation"]'):null;if(!i)return;const r=i.closest(".k-page");if(!r)return;const o=r.offsetLeft+-1*e.scroller.element.offsetLeft+i.offsetLeft+0,s=r.offsetTop+-1*e.scroller.element.offsetTop+i.offsetTop+-64;e.scroller.scrollTo(o,s,{trackScrollEvent:!1})},D=t=>{t.search.markNextMatch();const e=t.search.getActiveMatchElement();I(e,t)},F=t=>{t.search.markPreviousMatch();const e=t.search.getActiveMatchElement();I(e,t)},P=(t,e,n,i)=>{const r=i.closest(".k-pdf-viewer-canvas"),o=i.querySelector(".k-page"),s=o.offsetWidth,a=o.offsetHeight;let l=t;return"ActualWidth"===e?l=1:"FitToWidth"===e?l=r.offsetWidth/(s/n):"FitToPage"===e&&(l=r.offsetHeight/(a/n)),l},R=(t,e)=>{const n=t.querySelectorAll(".k-page"),i=n[0];if(i instanceof HTMLDivElement){const t=(i.offsetHeight+i.offsetTop)*Math.max(0,Math.min(e,n.length-1)),r=i.closest(".k-pdf-viewer-canvas");r&&r.scrollTo({top:t,behavior:"auto"})}},L=t=>{const e=t.querySelector(".k-pdf-viewer-canvas"),n=t.querySelector(".k-page");return e&&n?Math.floor(Math.round(e.scrollTop)/(n.offsetHeight+n.offsetTop)+.01):0},N=(t,e)=>{const{maxWidth:n,maxHeight:i,maxArea:r}=(t=>{const e=(0,f.s4)(t),n=(0,f.e9)(t);return e&&e.mozilla||n&&"firefox"===n.browser})(navigator.userAgent)?{maxWidth:32767,maxHeight:32767,maxArea:124992400}:(o=navigator.userAgent,(0,f.s4)(o).safari||(0,f.e9)(o)&&"mobilesafari"===(0,f.e9)(o).browser?{maxWidth:4194303,maxHeight:8388607,maxArea:m}:{maxWidth:65535,maxHeight:65535,maxArea:m});var o;let s=t,a=e;const l=t/e;if(t>n){s=n;a=e-(t-n)/l}if(a>i){const t=a-i;a=i,s-=t*l}const c=s*a;if(c>r){const t=Math.sqrt(r/c);s*=t,a*=t}const h=s/t;return{adjustedWidth:s!==t?Math.floor(s/2):t,adjustedHeight:a!==e?Math.floor(a/2):e,adjustRatio:1!==h?h/2:1}},B=(t,e=1,n="")=>{const i=v(),r=t.getViewport({scale:i}),{adjustedWidth:o,adjustedHeight:s,adjustRatio:a}=N(r.width,r.height),l={width:Math.floor(r.width/i)*e+"pt",height:Math.floor(r.height/i)*e+"pt"},c=T("div",n,l),h=T("canvas","",{width:"100%",height:"100%"});h.height=s,h.width=o;const u=h.getContext("2d");c.appendChild(h);const d=a*i;return r.width=o,r.height=s,r.scale=d,{canvasContext:u,viewport:r,scaleNum:i,canvas:h,pageElement:c,styles:l}}},9794:(t,e,n)=>{"use strict";n.r(e),n.d(e,{AlignPoint:()=>i,Collision:()=>C,addScroll:()=>o,align:()=>r,alignElement:()=>K,applyLocationOffset:()=>s,boundingOffset:()=>p,domUtils:()=>W,getDocumentElement:()=>c,getWindow:()=>l,getWindowViewPort:()=>d,isBodyOffset:()=>g,offset:()=>m,offsetParent:()=>f,parentScrollPosition:()=>w,parents:()=>y,position:()=>x,positionElement:()=>X,positionWithScroll:()=>_,removeScroll:()=>S,restrictToView:()=>E,scrollPosition:()=>v,siblingContainer:()=>M,siblings:()=>T,utils:()=>N,zIndex:()=>O});const i={bottom:"bottom",center:"center",middle:"middle",left:"left",right:"right",top:"top"};const r=function(t){var e=t.anchorRect,n=t.anchorAlign,r=t.elementRect,o=t.elementAlign,s=t.margin;void 0===s&&(s={});var a=n.horizontal,l=n.vertical,c=o.horizontal,h=o.vertical,u=s.horizontal||0,d=s.vertical||0,p=e.top,f=e.left;return l===i.bottom&&(p+=e.height),l!==i.center&&l!==i.middle||(p+=Math.round(e.height/2)),h===i.bottom&&(p-=r.height,d*=-1),h!==i.center&&h!==i.middle||(p-=Math.round(r.height/2),d*=-1),a===i.right&&(f+=e.width),a!==i.center&&a!==i.middle||(f+=Math.round(e.width/2)),c===i.right&&(f-=r.width,u*=-1),c!==i.center&&c!==i.middle||(f-=Math.round(r.width/2),u*=-1),{top:p+d,left:f+u}};function o(t,e){return{top:t.top+e.y,left:t.left+e.x,height:t.height,width:t.width}}function s(t,e,n){var i=t.top,r=t.left;return n&&(r=0,i=0),{top:i+e.top,left:r+e.left,height:t.height,width:t.width}}function a(t){return t.ownerDocument||t.document||t}const l=function(t){return a(t).defaultView};const c=function(t){return a(t).documentElement};var h=0;function u(){if(!h&&"undefined"!=typeof document){var t=document.createElement("div");t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",t.innerHTML="&nbsp;",document.body.appendChild(t),h=t.offsetWidth-t.scrollWidth,document.body.removeChild(t)}return h}function d(t){var e=l(t),n=c(t),i={height:e.innerHeight,width:e.innerWidth};return n.scrollHeight-n.clientHeight>0&&(i.width-=u()),i}const p=function(t){if(!t.getBoundingClientRect){var e=d(t);return{bottom:e.height,left:0,right:e.width,top:0}}var n=t.getBoundingClientRect();return{bottom:n.bottom,left:n.left,right:n.right,top:n.top}};const f=function(t){for(var e=t.offsetParent;e&&"static"===e.style.position;)e=e.offsetParent;return e||c(t)};const g=function(t){return f(t)===t.ownerDocument.body};const m=function(t){var e=t.getBoundingClientRect(),n=e.left,i=e.top;return e.height||e.width||(e=function(t){var e=t.style,n=e.display,i=e.left,r=e.position;t.style.display="",t.style.left="-10000px",t.style.position="absolute";var o=t.getBoundingClientRect();return t.style.display=n,t.style.left=i,t.style.position=r,o}(t)),{top:i,left:n,height:e.height,width:e.width}};function y(t,e){for(var n=[],i=t.parentNode;i&&(n.push(i),i!==e);)i=i.parentNode;return n}function v(t){var e=c(t),n=l(t);return{x:n.pageXOffset||e.scrollLeft||0,y:n.pageYOffset||e.scrollTop||0}}function b(t){return t===(t.ownerDocument||{}).body?v(t):{x:t.scrollLeft,y:t.scrollTop}}function w(t){var e=f(t);return e?b(e):{x:0,y:0}}const x=function(t,e){var n=l(t),i=n.getComputedStyle(t),r=m(t),o=e||f(t),s=t.ownerDocument,a=o!==s.body&&o!==s.documentElement,c={top:0,left:0};if("fixed"!==i.position&&a){var h=n.getComputedStyle(o);(c=m(o)).top+=parseFloat(h.borderTopWidth),c.left+=parseFloat(h.borderLeftWidth)}return{top:r.top-c.top,left:r.left-c.left,height:r.height,width:r.width}};function _(t,e,n){void 0===n&&(n=1);var i=e?f(e):null,r=x(t,i),o=r.top,s=r.left,a=r.height,l=r.width,c=function(t,e){return t?b(t):w(e)}(i,t),h=c.x,u=c.y,d=t.ownerDocument,p=i===d.body||i===d.documentElement?1:n;return{top:o+u*p,left:s+h*p,height:a,width:l}}function S(t,e){return{top:t.top-e.y,left:t.left-e.x,height:t.height,width:t.width}}const C={fit:"fit",flip:"flip",none:"none"};var k=function(t,e,n){var i=0;return t+e>n&&(i=n-(t+e)),t<0&&(i=-t),i},A=function(t){var e=t.offset,n=t.size,r=t.anchorSize,o=t.viewPortSize,s=t.anchorAlignPoint,a=t.elementAlignPoint,l=t.margin,c=0,h=a===i.center||a===i.middle,u=s===i.center||s===i.middle,d=2*l;if(a!==s&&!h&&!u){var p=s===i.top||s===i.left;e<0&&p?e+(c=n+r+d)+n>o&&(c=0):e>=0&&!p&&(e+n>o&&(c+=-(r+n+d)),e+c<0&&(c=0))}return c};const E=function(t){var e=t.anchorRect,n=t.anchorAlign,i=t.elementRect,r=t.elementAlign,o=t.collisions,s=t.viewPort,a=t.margin;void 0===a&&(a={});var l=i.top,c=i.left,h=i.height,u=i.width,d=s.height,p=s.width,f=a.horizontal||0,g=a.vertical||0,m=0,y=0,v=o.vertical===C.fit,b=o.horizontal===C.fit,w=o.vertical===C.flip,x=o.horizontal===C.flip;v&&(y+=k(l,h,d)),b&&(m+=k(c,u,p)),w&&(y+=A({margin:g,offset:l,size:h,anchorSize:e.height,viewPortSize:d,anchorAlignPoint:n.vertical,elementAlignPoint:r.vertical})),x&&(m+=A({margin:f,offset:c,size:u,anchorSize:e.width,viewPortSize:p,anchorAlignPoint:n.horizontal,elementAlignPoint:r.horizontal}));var _=w&&0!==y,S=x&&0!==m,E=v&&0!==y,T=b&&0!==m;return{flipped:S||_,fitted:E||T,flip:{horizontal:S,vertical:_},fit:{horizontal:T,vertical:E},offset:{left:m,top:y}}};function T(t){for(var e=[],n=t.parentNode.firstElementChild;n;)n!==t&&e.push(n),n=n.nextElementSibling;return e}function M(t,e){for(var n,i,r=y(t),o=e;o&&(n=T(o),!(i=r.reduce((function(t,e){return t.concat(n.filter((function(t){return t===e})))}),[])[0]));)o=o.parentElement;return i}function O(t,e){if(!t||!e)return null;var n=M(t,e);if(!n)return null;var i=[t].concat(y(t,n)).reduce((function(t,e){var n=e.style.zIndex||window.getComputedStyle(e).zIndex,i=parseInt(n,10);return i>t?i:t}),0);return i?i+1:null}var I,D,F,P=(I=function(t){if(!R())return!1;var e=t?t.ownerDocument:document;if(!e||!e.body)return!1;var n=e.createElement("div");n.style.transform="matrix(10, 0, 0, 10, 0, 0)",n.innerHTML='<div style="position: fixed; top: 10px;">child</div>',e.body.appendChild(n);var i=10!==n.children[0].getBoundingClientRect().top;return e.body.removeChild(n),i},F=!1,function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return F||(D=I.apply(void 0,t),F=!0),D}),R=function(){return Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)},L={eitherRect:function(t,e){return t||{height:0,left:e.left,top:e.top,width:0}},scaleRect:function(t,e){return t&&1!==e?{height:t.height/e,left:t.left/e,top:t.top/e,width:t.width/e}:t},removeStackingOffset:function(t,e){return e?{height:t.height,left:t.left-e.left,top:t.top-e.top,width:t.width}:t},hasRelativeStackingContext:P,canUseDOM:R};const N=L;var B=["font-size","font-family","font-stretch","font-style","font-weight","line-height"],j=function(){return N.canUseDOM()?window:null},z=/auto|scroll/,$=function(t){return function(t){return""+t.style.overflow+t.style.overflowX+t.style.overflowY}(t)||function(t){var e=window.getComputedStyle(t);return""+e.overflow+e.overflowX+e.overflowY}(t)},H=function(t){if(!t||!N.hasRelativeStackingContext())return null;for(var e=t.parentElement;e;){if("none"!==window.getComputedStyle(e).transform)return e;e=e.parentElement}return null},U=function(){return N.canUseDOM()&&parseFloat((document.documentElement.clientWidth/window.innerWidth).toFixed(2))||1},V={addOffset:function(t,e){return{left:t.left+e.left,top:t.top+e.top}},addScroll:o,align:r,boundingOffset:p,getFontStyles:function(t){var e=j();if(!e||!t)return[];var n=e.getComputedStyle(t);return B.map((function(t){return{key:t,value:n[t]}}))},getWindow:j,hasOffsetParent:function(t){return!!t&&Boolean(t.offsetParent)},offset:function(t){return t?m(t):null},offsetAtPoint:function(t,e){if(!t)return null;var n=t.style,i=n.left,r=n.top,o=n.transition;t.style.transition="none",t.style.left=e.left+"px",t.style.top=e.top+"px";var s=m(t);return t.style.left=i,t.style.top=r,t.offsetHeight,t.style.transition=o,s},position:function(t,e,n){return t&&e?_(t,e,n||1):null},removeScroll:S,restrictToView:E,scrollPosition:v,scrollableParents:function(t){var e=[];if(!N.canUseDOM())return e;for(var n=t.parentElement;n;)(z.test($(n))||n.hasAttribute("data-scrollable"))&&e.push(n),n=n.parentElement;return e.push(window),e},getRelativeContextElement:H,stackingElementOffset:function(t){var e=H(t);return e?m(e):null},stackingElementScroll:function(t){var e=H(t);return e?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}},stackingElementViewPort:function(t){var e=H(t);return e?{height:e.scrollHeight,width:e.scrollWidth}:null},useRelativePosition:function(t){return Boolean(H(t))},windowViewPort:d,zoomLevel:U,isZoomed:function(){return U()>1},zIndex:function(t,e){if(!t||!N.canUseDOM())return null;var n=M(t,e);if(!n)return null;var i=[t].concat(y(t,n)).reduce((function(t,e){var n=e.style.zIndex||window.getComputedStyle(e).zIndex,i=parseInt(n,10);return i>t?i:t}),0);return i?i+1:null}};const W=V;var q=function(t,e){return t?{x:0,y:0}:W.scrollPosition(e)};const K=function(t){var e=t.anchor,n=t.element,i=t.anchorAlign,r=t.elementAlign,o=t.margin,s=t.offset,a=t.positionMode,l=t.scale||1,c="fixed"===a||!W.hasOffsetParent(n)?function(t,e,n,i){var r=q(t,e),o=N.eitherRect(W.offset(t),n),s=2*i,a=W.stackingElementScroll(e);1!==i&&a&&(a.x/=s,a.y/=s);var l=W.stackingElementOffset(e);return 1!==i&&l&&(l.left/=s,l.top/=s),W.removeScroll(W.addScroll(N.removeStackingOffset(N.scaleRect(o,i),l),a),r)}(e,n,s,l):function(t,e,n,i){var r=N.eitherRect(W.position(t,e,i),n);return N.scaleRect(r,i)}(e,n,s,l),h=N.scaleRect(W.offset(n),l);return W.align({anchorAlign:i,anchorRect:c,elementAlign:r,elementRect:h,margin:o})};const X=function(t){var e=t.anchor,n=t.currentLocation,i=t.element,r=t.anchorAlign,o=t.elementAlign,s=t.collisions,a=t.margin,l=t.scale||1,c=W.offsetAtPoint(i,n),h=N.scaleRect(c,l),u=N.scaleRect(W.offset(e),l),d=N.eitherRect(u,n),p=t.viewPort||W.windowViewPort(i);p.width=p.width/l,p.height=p.height/l;var f=W.restrictToView({anchorAlign:r,anchorRect:d,collisions:s,elementAlign:o,elementRect:h,margin:a,viewPort:p}),g=W.addOffset(n,f.offset);return{flip:f.flip,flipped:f.flipped,fit:f.fit,fitted:f.fitted,offset:g}}},1743:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CalcError:()=>Bn,CellRef:()=>mn,Context:()=>ni,Matrix:()=>ii,NULLREF:()=>fn,NameRef:()=>gn,Range:()=>Ms,RangeRef:()=>yn,Ref:()=>pn,Sheet:()=>Aa,SpreadsheetWidget:()=>vh,UnionRef:()=>vn,View:()=>ul,Workbook:()=>gh,dateToSerial:()=>Ai,defineAlias:()=>Ei,defineFunction:()=>hi,packDate:()=>bi,packTime:()=>ki,serialToDate:()=>Ci,unpackDate:()=>vi,unpackTime:()=>Si});var i=n(9408),r=n(1474),o=n(6651),s=n(116),a=n(2226),l=n(6349),c=n(8623),h=n(1020),u=n(1112),d=n(9603),p=n(8599),f=function(t){function e(e,n){void 0===e&&(e=new a.A),void 0===n&&(n={}),t.call(this,n),this.geometry(e),(0,p.A)(this.options.stroke)||this.stroke("#000")}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={nodeType:{configurable:!0}};return n.nodeType.get=function(){return"Rect"},e.prototype._bbox=function(t){return this._geometry.bbox(t)},e.prototype.rawBBox=function(){return this._geometry.bbox()},e.prototype._containsPoint=function(t){return this._geometry.containsPoint(t)},e.prototype._isOnPath=function(t){return this.geometry()._isOnPath(t,this.options.stroke.width/2)},Object.defineProperties(e.prototype,n),e}((0,u.A)((0,d.A)((0,c.A)(h.A))));const g=f;var m,y=n(818),v=n(289),b=n(6428),w=n(3452),x="undefined"!=typeof Uint8Array&&w.A.browser&&(!w.A.browser.msie||w.A.browser.version>9),_=(m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",{decode:function(t){for(var e=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=0,i=e.length,r=[];n<i;){var o=m.indexOf(e.charAt(n++)),s=m.indexOf(e.charAt(n++)),a=m.indexOf(e.charAt(n++)),l=m.indexOf(e.charAt(n++)),c=o<<2|s>>>4,h=(15&s)<<4|a>>>2,u=(3&a)<<6|l;r.push(c),64!=a&&r.push(h),64!=l&&r.push(u)}return r},encode:function(t){for(var e=0,n=t.length,i="";e<n;){var r=t[e++],o=t[e++],s=t[e++],a=(3&r)<<4|o>>>4,l=(15&o)<<2|s>>>6,c=63&s;e-n==2?l=c=64:e-n==1&&(c=64),i+=m.charAt(r>>>2)+m.charAt(a)+m.charAt(l)+m.charAt(c)}return i}});function S(t){var e=0,n=0;null==t?t=x?new Uint8Array(256):[]:n=t.length;var i=x?function(e){if(e>=t.length){var n=new Uint8Array(Math.max(e+256,2*t.length));n.set(t,0),t=n}}:function(){},r=x?function(){return new Uint8Array(t.buffer,0,n)}:function(){return t},o=x?function(r){if("string"==typeof r)return m(r);var o=r.length;i(e+o),t.set(r,e),(e+=o)>n&&(n=e)}:function(t){if("string"==typeof t)return m(t);for(var e=0;e<t.length;++e)l(t[e])},s=x?function(e,n){if(t.buffer.slice)return new Uint8Array(t.buffer.slice(e,e+n));var i=new Uint8Array(n);return i.set(new Uint8Array(t.buffer,e,n)),i}:function(e,n){return t.slice(e,e+n)};function a(){return e<n?t[e++]:0}function l(r){i(e),t[e++]=255&r,e>n&&(n=e)}function c(){return a()<<8|a()}function h(t){l(t>>8),l(t)}function u(){return 65536*c()+c()}function d(t){h(t>>>16&65535),h(65535&t)}function p(){var t=u();return t>=2147483648?t-4294967296:t}function f(t){d(t<0?t+4294967296:t)}function g(t){return y(t,a)}function m(t){for(var e=0;e<t.length;++e)l(t.charCodeAt(e))}function y(t,e){for(var n=new Array(t),i=0;i<t;++i)n[i]=e();return n}var v={eof:function(){return e>=n},readByte:a,writeByte:l,readShort:c,writeShort:h,readLong:u,writeLong:d,readFixed:function(){return u()/65536},writeFixed:function(t){d(Math.round(65536*t))},readShort_:function(){var t=c();return t>=32768?t-65536:t},writeShort_:function(t){h(t<0?t+65536:t)},readLong_:p,writeLong_:f,readFixed_:function(){return p()/65536},writeFixed_:function(t){f(Math.round(65536*t))},read:g,write:o,readString:function(t){return String.fromCharCode.apply(String,g(t))},writeString:m,times:y,get:r,slice:s,offset:function(t){return null!=t?(e=t,v):e},skip:function(t){e+=t},toString:function(){throw new Error("FIX CALLER.  BinaryStream is no longer convertible to string!")},length:function(){return n},saveExcursion:function(t){var n=e;try{return t()}finally{e=n}},writeBase64:function(t){window.atob?m(window.atob(t)):o(_.decode(t))},base64:function(){return _.encode(r())}};return v}function C(t){return window.atob?function(t){for(var e=window.atob(t),n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(t):function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}(_.decode(t))}function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A(t){return Object.keys(t).sort((function(t,e){return t-e})).map(parseFloat)}var E=function(t){this.raw=t,this.scalerType=t.readLong(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort();for(var e=this.tables={},n=0;n<this.tableCount;++n){var i={tag:t.readString(4),checksum:t.readLong(),offset:t.readLong(),length:t.readLong()};e[i.tag]=i}};E.prototype.readTable=function(t,e){var n=this.tables[t];if(!n)throw new Error("Table "+t+" not found in directory");return this[t]=n.table=new e(this,n)},E.prototype.render=function(t){var e=Object.keys(t).length,n=Math.pow(2,Math.floor(Math.log(e)/Math.LN2)),i=16*n,r=Math.floor(Math.log(n)/Math.LN2),o=16*e-i,s=S();s.writeLong(this.scalerType),s.writeShort(e),s.writeShort(i),s.writeShort(r),s.writeShort(o);var a=16*e,l=s.offset()+a,c=null,h=S();for(var u in t)if(k(t,u)){var d=t[u];for(s.writeString(u),s.writeLong(this.checksum(d)),s.writeLong(l),s.writeLong(d.length),h.write(d),"head"==u&&(c=l),l+=d.length;l%4;)h.writeByte(0),l++}s.write(h.get());var p=2981146554-this.checksum(s.get());return s.offset(c+8),s.writeLong(p),s.get()},E.prototype.checksum=function(t){t=S(t);for(var e=0;!t.eof();)e+=t.readLong();return 4294967295&e};var T=function(t,e){this.definition=e,this.length=e.length,this.offset=e.offset,this.file=t,this.rawData=t.raw,this.parse(t.raw)};T.prototype.raw=function(){return this.rawData.slice(this.offset,this.length)},T.prototype.parse=function(){};var M,O,I,D=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset),this.version=t.readLong(),this.revision=t.readLong(),this.checkSumAdjustment=t.readLong(),this.magicNumber=t.readLong(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.read(8),this.modified=t.read(8),this.xMin=t.readShort_(),this.yMin=t.readShort_(),this.xMax=t.readShort_(),this.yMax=t.readShort_(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort_(),this.indexToLocFormat=t.readShort_(),this.glyphDataFormat=t.readShort_()},e.prototype.render=function(t){var e=S();return e.writeLong(this.version),e.writeLong(this.revision),e.writeLong(0),e.writeLong(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.write(this.created),e.write(this.modified),e.writeShort_(this.xMin),e.writeShort_(this.yMin),e.writeShort_(this.xMax),e.writeShort_(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort_(this.fontDirectionHint),e.writeShort_(t),e.writeShort_(this.glyphDataFormat),e.get()},e}(T),F=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset);var e=this.file.head.indexToLocFormat;this.offsets=0===e?t.times(this.length/2,(function(){return 2*t.readShort()})):t.times(this.length/4,t.readLong)},e.prototype.offsetOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.render=function(t){for(var e=S(),n=t[t.length-1]>65535,i=0;i<t.length;++i)n?e.writeLong(t[i]):e.writeShort(t[i]/2);return{format:n?1:0,table:e.get()}},e}(T),P=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset),this.version=t.readLong(),this.ascent=t.readShort_(),this.descent=t.readShort_(),this.lineGap=t.readShort_(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort_(),this.minRightSideBearing=t.readShort_(),this.xMaxExtent=t.readShort_(),this.caretSlopeRise=t.readShort_(),this.caretSlopeRun=t.readShort_(),this.caretOffset=t.readShort_(),t.skip(8),this.metricDataFormat=t.readShort_(),this.numOfLongHorMetrics=t.readShort()},e.prototype.render=function(t){var e=S();return e.writeLong(this.version),e.writeShort_(this.ascent),e.writeShort_(this.descent),e.writeShort_(this.lineGap),e.writeShort(this.advanceWidthMax),e.writeShort_(this.minLeftSideBearing),e.writeShort_(this.minRightSideBearing),e.writeShort_(this.xMaxExtent),e.writeShort_(this.caretSlopeRise),e.writeShort_(this.caretSlopeRun),e.writeShort_(this.caretOffset),e.write([0,0,0,0,0,0,0,0]),e.writeShort_(this.metricDataFormat),e.writeShort(t.length),e.get()},e}(T),R=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset),this.version=t.readLong(),this.numGlyphs=t.readShort(),this.maxPoints=t.readShort(),this.maxContours=t.readShort(),this.maxComponentPoints=t.readShort(),this.maxComponentContours=t.readShort(),this.maxZones=t.readShort(),this.maxTwilightPoints=t.readShort(),this.maxStorage=t.readShort(),this.maxFunctionDefs=t.readShort(),this.maxInstructionDefs=t.readShort(),this.maxStackElements=t.readShort(),this.maxSizeOfInstructions=t.readShort(),this.maxComponentElements=t.readShort(),this.maxComponentDepth=t.readShort()},e.prototype.render=function(t){var e=S();return e.writeLong(this.version),e.writeShort(t.length),e.writeShort(this.maxPoints),e.writeShort(this.maxContours),e.writeShort(this.maxComponentPoints),e.writeShort(this.maxComponentContours),e.writeShort(this.maxZones),e.writeShort(this.maxTwilightPoints),e.writeShort(this.maxStorage),e.writeShort(this.maxFunctionDefs),e.writeShort(this.maxInstructionDefs),e.writeShort(this.maxStackElements),e.writeShort(this.maxSizeOfInstructions),e.writeShort(this.maxComponentElements),e.writeShort(this.maxComponentDepth),e.get()},e}(T),L=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset);var e=this.file,n=e.hhea;this.metrics=t.times(n.numOfLongHorMetrics,(function(){return{advance:t.readShort(),lsb:t.readShort_()}}));var i=e.maxp.numGlyphs-e.hhea.numOfLongHorMetrics;this.leftSideBearings=t.times(i,t.readShort_)},e.prototype.forGlyph=function(t){var e=this.metrics,n=e.length;return t<n?e[t]:{advance:e[n-1].advance,lsb:this.leftSideBearings[t-n]}},e.prototype.render=function(t){for(var e=S(),n=0;n<t.length;++n){var i=this.forGlyph(t[n]);e.writeShort(i.advance),e.writeShort_(i.lsb)}return e.get()},e}(T),N=function(){var t=function(t){this.raw=t},e={compound:{configurable:!0}};e.compound.get=function(){return!1},t.prototype.render=function(){return this.raw.get()},Object.defineProperties(t.prototype,e);var n=function(t){this.raw=t;for(var e=this.glyphIds=[],n=this.idOffsets=[];;){var i=t.readShort();if(n.push(t.offset()),e.push(t.readShort()),!(32&i))break;t.skip(1&i?4:2),128&i?t.skip(8):64&i?t.skip(4):8&i&&t.skip(2)}},i={compound:{configurable:!0}};return i.compound.get=function(){return!0},n.prototype.render=function(t){for(var e=S(this.raw.get()),n=0;n<this.glyphIds.length;++n){var i=this.glyphIds[n];e.offset(this.idOffsets[n]),e.writeShort(t[i])}return e.get()},Object.defineProperties(n.prototype,i),function(e){function i(){e.apply(this,arguments)}return e&&(i.__proto__=e),i.prototype=Object.create(e&&e.prototype),i.prototype.constructor=i,i.prototype.parse=function(){this.cache={}},i.prototype.glyphFor=function(e){var i=this.cache;if(k(i,e))return i[e];var r=this.file.loca,o=r.lengthOf(e);if(0===o)return i[e]=null;var s=this.rawData,a=this.offset+r.offsetOf(e),l=S(s.slice(a,o)),c=l.readShort_(),h=l.readShort_(),u=l.readShort_(),d=l.readShort_(),p=l.readShort_(),f=i[e]=c<0?new n(l):new t(l);return f.numberOfContours=c,f.xMin=h,f.yMin=u,f.xMax=d,f.yMax=p,f},i.prototype.render=function(t,e,n){for(var i=S(),r=[],o=0;o<e.length;++o){var s=t[e[o]];i.offset()%2&&i.writeByte(0),r.push(i.offset()),s&&i.write(s.render(n))}return i.offset()%2&&i.writeByte(0),r.push(i.offset()),{table:i.get(),offsets:r}},i}(T)}(),B=(M=function(t,e){this.text=t,this.length=t.length,this.platformID=e.platformID,this.platformSpecificID=e.platformSpecificID,this.languageID=e.languageID,this.nameID=e.nameID},function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset),t.readShort();for(var e=t.readShort(),n=this.offset+t.readShort(),i=t.times(e,(function(){return{platformID:t.readShort(),platformSpecificID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:t.readShort()+n}})),r=this.strings={},o=0;o<i.length;++o){var s=i[o];t.offset(s.offset);var a=t.readString(s.length);r[s.nameID]||(r[s.nameID]=[]),r[s.nameID].push(new M(a,s))}this.postscriptEntry=r[6][0],this.postscriptName=this.postscriptEntry.text.replace(/[^\x20-\x7F]/g,"")},e.prototype.render=function(t){var e=this.strings,n=0;for(var i in e)k(e,i)&&(n+=e[i].length);var r=S(),o=S();for(i in r.writeShort(0),r.writeShort(n),r.writeShort(6+12*n),e)if(k(e,i))for(var s=6==i?[new M(t,this.postscriptEntry)]:e[i],a=0;a<s.length;++a){var l=s[a];r.writeShort(l.platformID),r.writeShort(l.platformSpecificID),r.writeShort(l.languageID),r.writeShort(l.nameID),r.writeShort(l.length),r.writeShort(o.offset()),o.writeString(l.text)}return r.write(o.get()),r.get()},e}(T)),j=(O=".notdef .null nonmarkingreturn space exclam quotedbl numbersign dollar percent ampersand quotesingle parenleft parenright asterisk plus comma hyphen period slash zero one two three four five six seven eight nine colon semicolon less equal greater question at A B C D E F G H I J K L M N O P Q R S T U V W X Y Z bracketleft backslash bracketright asciicircum underscore grave a b c d e f g h i j k l m n o p q r s t u v w x y z braceleft bar braceright asciitilde Adieresis Aring Ccedilla Eacute Ntilde Odieresis Udieresis aacute agrave acircumflex adieresis atilde aring ccedilla eacute egrave ecircumflex edieresis iacute igrave icircumflex idieresis ntilde oacute ograve ocircumflex odieresis otilde uacute ugrave ucircumflex udieresis dagger degree cent sterling section bullet paragraph germandbls registered copyright trademark acute dieresis notequal AE Oslash infinity plusminus lessequal greaterequal yen mu partialdiff summation product pi integral ordfeminine ordmasculine Omega ae oslash questiondown exclamdown logicalnot radical florin approxequal Delta guillemotleft guillemotright ellipsis nonbreakingspace Agrave Atilde Otilde OE oe endash emdash quotedblleft quotedblright quoteleft quoteright divide lozenge ydieresis Ydieresis fraction currency guilsinglleft guilsinglright fi fl daggerdbl periodcentered quotesinglbase quotedblbase perthousand Acircumflex Ecircumflex Aacute Edieresis Egrave Iacute Icircumflex Idieresis Igrave Oacute Ocircumflex apple Ograve Uacute Ucircumflex Ugrave dotlessi circumflex tilde macron breve dotaccent ring cedilla hungarumlaut ogonek caron Lslash lslash Scaron scaron Zcaron zcaron brokenbar Eth eth Yacute yacute Thorn thorn minus multiply onesuperior twosuperior threesuperior onehalf onequarter threequarters franc Gbreve gbreve Idotaccent Scedilla scedilla Cacute cacute Ccaron ccaron dcroat".split(/\s+/g),function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e;switch(t.offset(this.offset),this.format=t.readLong(),this.italicAngle=t.readFixed_(),this.underlinePosition=t.readShort_(),this.underlineThickness=t.readShort_(),this.isFixedPitch=t.readLong(),this.minMemType42=t.readLong(),this.maxMemType42=t.readLong(),this.minMemType1=t.readLong(),this.maxMemType1=t.readLong(),this.format){case 65536:case 196608:break;case 131072:e=t.readShort(),this.glyphNameIndex=t.times(e,t.readShort),this.names=[];for(var n=this.offset+this.length;t.offset()<n;)this.names.push(t.readString(t.readByte()));break;case 151552:e=t.readShort(),this.offsets=t.read(e);break;case 262144:this.map=t.times(this.file.maxp.numGlyphs,t.readShort)}},e.prototype.glyphFor=function(t){switch(this.format){case 65536:return O[t]||".notdef";case 131072:var e=this.glyphNameIndex[t];return e<O.length?O[e]:this.names[e-O.length]||".notdef";case 151552:case 196608:return".notdef";case 262144:return this.map[t]||65535}},e.prototype.render=function(t){if(196608==this.format)return this.raw();var e=S(this.rawData.slice(this.offset,32));e.writeLong(131072),e.offset(32);for(var n=[],i=[],r=0;r<t.length;++r){var o=t[r],s=this.glyphFor(o),a=O.indexOf(s);a>=0?n.push(a):(n.push(O.length+i.length),i.push(s))}for(e.writeShort(t.length),r=0;r<n.length;++r)e.writeShort(n[r]);for(r=0;r<i.length;++r)e.writeByte(i[r].length),e.writeString(i[r]);return e.get()},e}(T)),z=(I=function(t,e,n){var i=this;i.platformID=t.readShort(),i.platformSpecificID=t.readShort(),i.offset=e+t.readLong(),t.saveExcursion((function(){var e;switch(t.offset(i.offset),i.format=t.readShort(),i.format){case 0:i.length=t.readShort(),i.language=t.readShort();for(var r=0;r<256;++r)n[r]=t.readByte();break;case 4:i.length=t.readShort(),i.language=t.readShort();var o=t.readShort()/2;t.skip(6);var s=t.times(o,t.readShort);t.skip(2);var a=t.times(o,t.readShort),l=t.times(o,t.readShort_),c=t.times(o,t.readShort),h=(i.length+i.offset-t.offset())/2,u=t.times(h,t.readShort);for(r=0;r<o;++r){var d=a[r],p=s[r];for(e=d;e<=p;++e){var f;0===c[r]?f=e+l[r]:0!==(f=u[c[r]/2-(o-r)+(e-d)]||0)&&(f+=l[r]),n[e]=65535&f}}break;case 6:i.length=t.readShort(),i.language=t.readShort(),e=t.readShort();for(var g=t.readShort();g-- >0;)n[e++]=t.readShort();break;case 12:t.readShort(),i.length=t.readLong(),i.language=t.readLong();for(var m=t.readLong();m-- >0;){e=t.readLong();for(var y=t.readLong(),v=t.readLong();e<=y;)n[e++]=v++}break;default:window.console&&window.console.error("Unhandled CMAP format: "+i.format)}}))},function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){var e=this,n=e.offset;t.offset(n),e.codeMap={},e.version=t.readShort();var i=t.readShort();e.tables=t.times(i,(function(){return new I(t,n,e.codeMap)}))},e.render=function(t,e){var n=S();return n.writeShort(0),n.writeShort(1),n.write(function(t,e){var n=A(t),i=[],r=[],o=null,s=null;function a(n){return e[t[n]]}for(var l=0;l<n.length;++l){var c=n[l],h=a(c)-c;null!=o&&h===s||(o&&r.push(o),i.push(c),s=h),o=c}o&&r.push(o),r.push(65535),i.push(65535);var u=i.length,d=2*u,p=2*Math.pow(2,Math.floor(Math.log(u)/Math.LN2)),f=Math.log(p/2)/Math.LN2,g=d-p,m=[],y=[],v=[];for(l=0;l<u;++l){var b=i[l],w=r[l];if(65535==b){m.push(0),y.push(0);break}var x=a(b);if(b-x>=32768){m.push(0),y.push(2*(v.length+u-l));for(var _=b;_<=w;++_)v.push(a(_))}else m.push(x-b),y.push(0)}var C=S();return C.writeShort(3),C.writeShort(1),C.writeLong(12),C.writeShort(4),C.writeShort(16+8*u+2*v.length),C.writeShort(0),C.writeShort(d),C.writeShort(p),C.writeShort(f),C.writeShort(g),r.forEach(C.writeShort),C.writeShort(0),i.forEach(C.writeShort),m.forEach(C.writeShort_),y.forEach(C.writeShort),v.forEach(C.writeShort),C.get()}(t,e)),n.get()},e}(T)),$=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parse=function(t){t.offset(this.offset),this.version=t.readShort(),this.averageCharWidth=t.readShort_(),this.weightClass=t.readShort(),this.widthClass=t.readShort(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort_(),this.ySubscriptYSize=t.readShort_(),this.ySubscriptXOffset=t.readShort_(),this.ySubscriptYOffset=t.readShort_(),this.ySuperscriptXSize=t.readShort_(),this.ySuperscriptYSize=t.readShort_(),this.ySuperscriptXOffset=t.readShort_(),this.ySuperscriptYOffset=t.readShort_(),this.yStrikeoutSize=t.readShort_(),this.yStrikeoutPosition=t.readShort_(),this.familyClass=t.readShort_(),this.panose=t.times(10,t.readByte),this.charRange=t.times(4,t.readLong),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort_(),this.descent=t.readShort_(),this.lineGap=t.readShort_(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=t.times(2,t.readLong),this.version>1&&(this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()))},e.prototype.render=function(){return this.raw()},e}(T),H=1e5;var U=function(t){this.font=t,this.subset={},this.unicodes={},this.ogid2ngid={0:0},this.ngid2ogid={0:0},this.ncid2ogid={},this.next=this.firstChar=1,this.nextGid=1,this.psName=function(){for(var t="",e=String(H),n=0;n<e.length;++n)t+=String.fromCharCode(e.charCodeAt(n)-48+65);return++H,t}()+"+"+this.font.psName};U.prototype.use=function(t){var e=this;if("string"==typeof t)return function(t){for(var e,n,i=[],r=0,o=t.length;r<o;)(e=t.charCodeAt(r++))>=55296&&e<=56319&&r<o?56320==(64512&(n=t.charCodeAt(r++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),r--):i.push(e);return i}(t).reduce((function(t,n){return t+String.fromCharCode(e.use(n))}),"");var n=e.unicodes[t];if(!n){n=e.next++,e.subset[n]=t,e.unicodes[t]=n;var i=e.font.cmap.codeMap[t];if(i&&(e.ncid2ogid[n]=i,null==e.ogid2ngid[i])){var r=e.nextGid++;e.ogid2ngid[i]=r,e.ngid2ogid[r]=i}}return n},U.prototype.encodeText=function(t){return this.use(t)},U.prototype.glyphIds=function(){return A(this.ogid2ngid)},U.prototype.glyphsFor=function(t,e){e||(e={});for(var n=0;n<t.length;++n){var i=t[n];if(!e[i]){var r=e[i]=this.font.glyf.glyphFor(i);r&&r.compound&&this.glyphsFor(r.glyphIds,e)}}return e},U.prototype.render=function(){var t=this,e=this.glyphsFor(this.glyphIds());for(var n in e)if(k(e,n)&&(n=parseInt(n,10),null==t.ogid2ngid[n])){var i=t.nextGid++;t.ogid2ngid[n]=i,t.ngid2ogid[i]=n}var r=A(this.ngid2ogid).map((function(t){return this.ngid2ogid[t]}),this),o=this.font,s=o.glyf.render(e,r,this.ogid2ngid),a=o.loca.render(s.offsets);this.lastChar=this.next-1;var l={cmap:z.render(this.ncid2ogid,this.ogid2ngid),glyf:s.table,loca:a.table,hmtx:o.hmtx.render(r),hhea:o.hhea.render(r),maxp:o.maxp.render(r),post:o.post.render(r),name:o.name.render(this.psName),head:o.head.render(a.format),"OS/2":o.os2.render()};return this.font.directory.render(l)},U.prototype.cidToGidMap=function(){for(var t=S(),e=0,n=this.firstChar;n<this.next;++n){for(;e<n;)t.writeShort(0),e++;var i=this.ncid2ogid[n];if(i){var r=this.ogid2ngid[i];t.writeShort(r)}else t.writeShort(0);e++}return t.get()};var V=function(t,e){var n=this,i=n.contents=S(t);if("ttcf"==i.readString(4)){var r,o=function(){i.offset(r),n.parse()};if(!e)throw new Error("Must specify a name for TTC files");i.readLong();for(var s=i.readLong(),a=0;a<s;++a)if(r=i.readLong(),i.saveExcursion(o),n.psName==e)return;throw new Error("Font "+e+" not found in collection")}i.offset(0),n.parse()};V.prototype.parse=function(){var t=this.directory=new E(this.contents);this.head=t.readTable("head",D),this.loca=t.readTable("loca",F),this.hhea=t.readTable("hhea",P),this.maxp=t.readTable("maxp",R),this.hmtx=t.readTable("hmtx",L),this.glyf=t.readTable("glyf",N),this.name=t.readTable("name",B),this.post=t.readTable("post",j),this.cmap=t.readTable("cmap",z),this.os2=t.readTable("OS/2",$),this.psName=this.name.postscriptName,this.ascent=this.os2.ascent||this.hhea.ascent,this.descent=this.os2.descent||this.hhea.descent,this.lineGap=this.os2.lineGap||this.hhea.lineGap,this.scale=1e3/this.head.unitsPerEm},V.prototype.widthOfGlyph=function(t){return this.hmtx.forGlyph(t).advance*this.scale},V.prototype.makeSubset=function(){return new U(this)};var W=n(461).Kc;var q=n(4542),K=n(5844),X=w.A.browser,G="\n",Y=0,J={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]};function Z(){var t=0,e=S();function n(){for(var t=arguments,i=0;i<arguments.length;++i){var r=t[i];if(void 0===r)throw new Error("Cannot output undefined to PDF");if(r instanceof mt)r.beforeRender(n),r.render(n);else if(ct(r))ht(r,n);else if(r instanceof Date)ut(r,n);else if("number"==typeof r){if(isNaN(r))throw new Error("Cannot output NaN to PDF");var o=r.toFixed(7);o.indexOf(".")>=0&&(o=o.replace(/\.?0+$/,"")),"-0"==o&&(o="0"),e.writeString(o)}else/string|boolean/.test(typeof r)?e.writeString(String(r)):"function"==typeof r.get?e.write(r.get()):"object"==typeof r&&(r?n(new xt(r)):e.writeString("null"))}}return n.writeData=function(t){e.write(t)},n.withIndent=function(e){++t,e(n),--t},n.indent=function(){n(G,st("",2*t,"  ")),n.apply(null,arguments)},n.offset=function(){return e.offset()},n.toString=function(){throw new Error("FIX CALLER")},n.get=function(){return e.get()},n.stream=function(){return e},n}function Q(t){if("function"!=typeof t){var e=t;t=function(t,n){return t in e?e[t]:n}}var n=t("paperSize",J.a4);if(!n)return{};if("string"==typeof n&&null==(n=J[n.toLowerCase()]))throw new Error("Unknown paper size");n[0]=gt(n[0]),n[1]=gt(n[1]),t("landscape",!1)&&(n=[Math.max(n[0],n[1]),Math.min(n[0],n[1])]);var i=t("margin");return i&&(i="string"==typeof i||"number"==typeof i?{left:i=gt(i,0),top:i,right:i,bottom:i}:{left:gt(i.left,0),top:gt(i.top,0),right:gt(i.right,0),bottom:gt(i.bottom,0)},t("addMargin")&&(n[0]+=i.left+i.right,n[1]+=i.top+i.bottom)),{paperSize:n,margin:i}}var tt={"Times-Roman":!0,"Times-Bold":!0,"Times-Italic":!0,"Times-BoldItalic":!0,Helvetica:!0,"Helvetica-Bold":!0,"Helvetica-Oblique":!0,"Helvetica-BoldOblique":!0,Courier:!0,"Courier-Bold":!0,"Courier-Oblique":!0,"Courier-BoldOblique":!0,Symbol:!0,ZapfDingbats:!0};var et={};var nt,it=(nt=function(t,e){var n=tt[t];n?e(n):function(t,e){var n;if(X.msie&&(n=/^data:.*?;base64,/i.exec(t)))e(C(t.substr(n[0].length)));else{var i=new XMLHttpRequest;i.open("GET",t,!0),x&&(i.responseType="arraybuffer"),i.onload=function(){200==i.status||304==i.status?e(x?new Uint8Array(i.response):new window.VBArray(i.responseBody).toArray()):r()},i.onerror=r,i.send(null)}function r(){window.console&&(window.console.error?window.console.error("Cannot load URL: %s",t):window.console.log("Cannot load URL: %s",t)),e(null)}}(t,(function(n){if(null==n)throw new Error("Cannot load font from "+t);var i=new V(n);tt[t]=i,e(i)}))},function(t,e){var n=t.length,i=n;if(0===n)return e();function r(){0==--n&&e()}for(;i-- >0;)nt(t[i],r)}),rt=function(t,e,n){n=Object.assign({jpegQuality:.92,keepPNG:!1},n);var i=Object.keys(t),r=i.length;if(0===r)return e();function o(){0==--r&&e()}i.forEach((function(e){!function(t,e,n,i){var r,o,s=et[t];if(s)n(s);else if(s=new Image,/^data:/i.test(t)||(s.crossOrigin="Anonymous"),x&&!/^data:/i.test(t)){var a=new XMLHttpRequest;a.onload=function(){if(o=a.response,X.mozilla&&"image/svg+xml"==o.type){var t=new FileReader;t.onload=function(){var t=(new window.DOMParser).parseFromString(this.result,"image/svg+xml").documentElement;if(t.getAttribute("width")&&t.getAttribute("height"))l(r=URL.createObjectURL(o));else{t.setAttribute("width",e.width),t.setAttribute("height",e.height);var n=(new window.XMLSerializer).serializeToString(t);l("data:image/svg+xml;base64,"+(0,K.A)(n))}},t.readAsText(o)}else l(r=URL.createObjectURL(o))},a.onerror=h,a.open("GET",t,!0),a.responseType="blob",a.send()}else l(t);function l(t){s.src=t,s.complete&&!X.msie?u.call(s):(s.onload=u,s.onerror=h)}function c(){e||(e={width:s.width,height:s.height});var o=document.createElement("canvas");o.width=e.width,o.height=e.height;var a,l=o.getContext("2d");l.drawImage(s,0,0,e.width,e.height);try{a=l.getImageData(0,0,e.width,e.height)}catch(t){return void h()}finally{r&&URL.revokeObjectURL(r)}for(var c=!1,u=S(),d=S(),p=a.data,f=0;f<p.length;){u.writeByte(p[f++]),u.writeByte(p[f++]),u.writeByte(p[f++]);var g=p[f++];g<255&&(c=!0),d.writeByte(g)}if(c||i.keepPNG)s=new Et(e.width,e.height,u,d);else{var m=o.toDataURL("image/jpeg",i.jpegQuality);m=m.substr(m.indexOf(";base64,")+8);var y=S();y.writeBase64(m),s=new At(y)}n(et[t]=s)}function h(){n(et[t]="ERROR")}function u(){if(e){var i=o&&"image/svg+xml"===o.type||/^data:image\/svg\+xml;/i.test(this.src.substring(0,19)),a=e.width>=s.width||e.height>=s.height;!i&&a&&(e=null)}if(!e&&o&&/^image\/jpe?g$/i.test(o.type)){var l=new FileReader;l.onload=function(){try{var e=new At(S(new Uint8Array(this.result)));URL.revokeObjectURL(r),n(et[t]=e)}catch(t){c()}},l.readAsArrayBuffer(o)}else c()}}(e,t[e],o,n)}))},ot=function(t){var e=this,n=Z(),i=0,r=[];function o(e,n){return t&&null!=t[e]?t[e]:n}e.getOption=o,e.attach=function(t){return r.indexOf(t)<0&&(!function(t,e){var n=t.beforeRender,i=t.render;t.beforeRender=function(){},t.render=function(t){t(e," 0 R")},t.renderFull=function(r){t._offset=r.offset(),r(e," 0 obj "),n.call(t,r),i.call(t,r),r(" endobj")}}(t,++i),r.push(t)),t},e.pages=[],e.FONTS={},e.IMAGES={},e.GRAD_COL_FUNCTIONS={},e.GRAD_OPC_FUNCTIONS={},e.GRAD_COL={},e.GRAD_OPC={};var s=e.attach(new St),a=e.attach(new Ct);if(o("autoPrint")){var l={};l.JavaScript=new xt({Names:[new yt("JS"),e.attach(new xt({S:wt("JavaScript"),JS:new yt("print(true);")}))]}),s.props.Names=new xt(l)}s.setPages(a);var c=e.attach(new xt({Producer:new yt(o("producer","Kendo UI PDF Generator"),!0),Title:new yt(o("title",""),!0),Author:new yt(o("author",""),!0),Subject:new yt(o("subject",""),!0),Keywords:new yt(o("keywords",""),!0),Creator:new yt(o("creator","Kendo UI PDF Generator"),!0),CreationDate:o("date",new Date)}));e.addPage=function(t){var n=Q((function(e,n){return t&&null!=t[e]?t[e]:n})),i=n.paperSize,r=n.margin,o=i[0],s=i[1];r&&(o-=r.left+r.right,s-=r.top+r.bottom);var l=new _t(Z(),null,!0),c={Contents:e.attach(l),Parent:a,MediaBox:[0,0,i[0],i[1]]},h=new Rt(e,c);return h._content=l,a.addPage(e.attach(h)),h.transform(1,0,0,-1,0,i[1]),r&&(h.translate(r.left,r.top),h.rect(0,0,o,s),h.clip()),e.pages.push(h),h},e.render=function(){var t;for(n("%PDF-1.4",G,"%ÂÁÚÏÎ",G,G),t=0;t<r.length;++t)r[t].renderFull(n),n(G,G);var e=n.offset();for(n("xref",G,0," ",r.length+1,G),n("0000000000 65535 f ",G),t=0;t<r.length;++t)n(at(r[t]._offset,10)," 00000 n ",G);return n(G),n("trailer",G),n(new xt({Size:r.length+1,Root:s,Info:c}),G,G),n("startxref",G,e,G),n("%%EOF",G),n.stream().offset(0)},e.loadFonts=it,e.loadImages=rt};function st(t,e,n){for(;t.length<e;)t=n+t;return t}function at(t,e){return st(String(t),e,"0")}function lt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}ot.prototype.getFont=function(t){var e=this.FONTS[t];if(!e){if(!(e=tt[t]))throw new Error("Font "+t+" has not been loaded");e=!0===e?this.attach(new Tt(t)):this.attach(new Mt(this,e)),this.FONTS[t]=e}return e},ot.prototype.getImage=function(t){var e=this.IMAGES[t];if(!e){if(!(e=et[t]))throw new Error("Image "+t+" has not been loaded");if("ERROR"===e)return null;e=this.IMAGES[t]=this.attach(e.asStream(this))}return e},ot.prototype.getOpacityGS=function(t,e){var n=parseFloat(t).toFixed(3);t=parseFloat(n),n+=e?"S":"F";var i=this._opacityGSCache||(this._opacityGSCache={}),r=i[n];if(!r){var o={Type:wt("ExtGState")};e?o.CA=t:o.ca=t,(r=this.attach(new xt(o)))._resourceName=wt("GS"+ ++Y),i[n]=r}return r},ot.prototype.dict=function(t){return new xt(t)},ot.prototype.name=function(t){return wt(t)},ot.prototype.stream=function(t,e){return new _t(e,t)};var ct=Array.isArray||function(t){return t instanceof Array};function ht(t,e){e("["),t.length>0&&e.withIndent((function(){for(var n=0;n<t.length;++n)n>0&&n%8==0?e.indent(t[n]):e(" ",t[n])})),e(" ]")}function ut(t,e){e("(D:",at(t.getUTCFullYear(),4),at(t.getUTCMonth()+1,2),at(t.getUTCDate(),2),at(t.getUTCHours(),2),at(t.getUTCMinutes(),2),at(t.getUTCSeconds(),2),"Z)")}function dt(t){return t*(72/25.4)}function pt(t){return dt(10*t)}function ft(t){return 72*t}function gt(t,e){if("number"==typeof t)return t;var n;if("string"==typeof t&&(n=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(t))){var i=parseFloat(n[1]);if(!isNaN(i))return"pt"==n[2]?i:{mm:dt,cm:pt,in:ft}[n[2]](i)}if(null!=e)return e;throw new Error("Can't parse unit: "+t)}var mt=function(){};mt.prototype.beforeRender=function(){};var yt=function(t){function e(e,n){t.call(this),this.value=e,this.utf16be=Boolean(n)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.value;if(this.utf16be)t("(",e=(e=q.bh+(0,q.CH)(e)).replace(/([\(\)\\])/g,"\\$1"),")");else{for(var n=[40],i=0;i<e.length;++i){var r=255&e.charCodeAt(i);40!=r&&41!=r&&92!=r||n.push(92),n.push(r)}n.push(41),t.writeData(n)}},e.prototype.toString=function(){return this.value},e}(mt),vt=function(t){function e(e){t.call(this,e),this.value=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){t("<");for(var e=0;e<this.value.length;++e)t(at(this.value.charCodeAt(e).toString(16),4));t(">")},e}(yt),bt=function(t){function e(e){t.call(this),this.name=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.get=function(t){return wt(t)},e.prototype.render=function(t){t("/"+this.escape())},e.prototype.escape=function(){return this.name.replace(/[^\x21-\x7E]/g,(function(t){return"#"+at(t.charCodeAt(0).toString(16),2)}))},e.prototype.toString=function(){return this.name},e}(mt);function wt(t){return new bt(t)}var xt=function(t){function e(e){t.call(this),this.props=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.props,n=!0;t("<<"),t.withIndent((function(){for(var i in e)lt(e,i)&&!/^_/.test(i)&&(n=!1,t.indent(wt(i)," ",e[i]))})),n||t.indent(),t(">>")},e}(mt),_t=function(t){function e(e,n,i){if(t.call(this),"string"==typeof e){var r=S();r.write(e),e=r}this.data=e,this.props=n||{},this.compress=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){var e=this.data.get(),n=this.props;this.compress&&(n.Filter?n.Filter instanceof Array||(n.Filter=[n.Filter]):n.Filter=[],n.Filter.unshift(wt("FlateDecode")),e=W(e)),n.Length=e.length,t(new xt(n)," stream",G),t.writeData(e),t(G,"endstream")},e}(mt),St=function(t){function e(){t.call(this,{Type:wt("Catalog")})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setPages=function(t){this.props.Pages=t},e}(xt),Ct=function(t){function e(){t.call(this,{Type:wt("Pages"),Kids:[],Count:0})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.addPage=function(t){this.props.Kids.push(t),this.props.Count++},e}(xt),kt=[192,193,194,195,197,198,199,201,202,203,205,206,207],At=function(t){var e,n,i,r;if(t.offset(0),65496!=t.readShort())throw new Error("Invalid JPEG image");for(;!t.eof();){if(255!=t.readByte())throw new Error("Invalid JPEG image");var o=t.readByte(),s=t.readShort();if(kt.indexOf(o)>=0){r=t.readByte(),n=t.readShort(),e=t.readShort(),i=t.readByte();break}t.skip(s-2)}if(null==i)throw new Error("Invalid JPEG image");var a={Type:wt("XObject"),Subtype:wt("Image"),Width:e,Height:n,BitsPerComponent:r,Filter:wt("DCTDecode")};switch(i){case 1:a.ColorSpace=wt("DeviceGray");break;case 3:a.ColorSpace=wt("DeviceRGB");break;case 4:a.ColorSpace=wt("DeviceCMYK"),a.Decode=[1,0,1,0,1,0,1,0]}this.asStream=function(){t.offset(0);var e=new _t(t,a);return e._resourceName=wt("I"+ ++Y),e}},Et=function(t,e,n,i){this.asStream=function(r){var o=new _t(i,{Type:wt("XObject"),Subtype:wt("Image"),Width:t,Height:e,BitsPerComponent:8,ColorSpace:wt("DeviceGray")},!0),s=new _t(n,{Type:wt("XObject"),Subtype:wt("Image"),Width:t,Height:e,BitsPerComponent:8,ColorSpace:wt("DeviceRGB"),SMask:r.attach(o)},!0);return s._resourceName=wt("I"+ ++Y),s}},Tt=function(t){function e(e){t.call(this,{Type:wt("Font"),Subtype:wt("Type1"),BaseFont:wt(e)}),this._resourceName=wt("F"+ ++Y)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.encodeText=function(t){return new yt(String(t))},e}(xt),Mt=function(t){function e(e,n,i){t.call(this,{}),(i=this.props).Type=wt("Font"),i.Subtype=wt("Type0"),i.Encoding=wt("Identity-H"),this._pdf=e,this._font=n,this._sub=n.makeSubset(),this._resourceName=wt("F"+ ++Y);var r=n.head;this.name=n.psName;var o=this.scale=n.scale;this.bbox=[r.xMin*o,r.yMin*o,r.xMax*o,r.yMax*o],this.italicAngle=n.post.italicAngle,this.ascent=n.ascent*o,this.descent=n.descent*o,this.lineGap=n.lineGap*o,this.capHeight=n.os2.capHeight||this.ascent,this.xHeight=n.os2.xHeight||0,this.stemV=0,this.familyClass=(n.os2.familyClass||0)>>8,this.isSerif=this.familyClass>=1&&this.familyClass<=7,this.isScript=10==this.familyClass,this.flags=(n.post.isFixedPitch?1:0)|(this.isSerif?2:0)|(this.isScript?8:0)|(0!==this.italicAngle?64:0)|32}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.encodeText=function(t){return new vt(this._sub.encodeText(String(t)))},e.prototype.getTextWidth=function(t,e){for(var n=0,i=this._font.cmap.codeMap,r=0;r<e.length;++r){var o=i[e.charCodeAt(r)];n+=this._font.widthOfGlyph(o||0)}return n*t/1e3},e.prototype.beforeRender=function(){var e=this,n=e._sub,i=n.render(),r=new _t(S(i),{Length1:i.length},!0),o=e._pdf.attach(new t({Type:wt("FontDescriptor"),FontName:wt(e._sub.psName),FontBBox:e.bbox,Flags:e.flags,StemV:e.stemV,ItalicAngle:e.italicAngle,Ascent:e.ascent,Descent:e.descent,CapHeight:e.capHeight,XHeight:e.xHeight,FontFile2:e._pdf.attach(r)})),s=n.ncid2ogid,a=n.firstChar,l=n.lastChar,c=[];!function t(n,i){if(n<=l){var r=s[n];null==r?t(n+1):(i||c.push(n,i=[]),i.push(e._font.widthOfGlyph(r)),t(n+1,i))}}(a);var h=new t({Type:wt("Font"),Subtype:wt("CIDFontType2"),BaseFont:wt(e._sub.psName),CIDSystemInfo:new t({Registry:new yt("Adobe"),Ordering:new yt("Identity"),Supplement:0}),FontDescriptor:o,FirstChar:a,LastChar:l,DW:Math.round(e._font.widthOfGlyph(0)),W:c,CIDToGIDMap:e._pdf.attach(e._makeCidToGidMap())}),u=e.props;u.BaseFont=wt(e._sub.psName),u.DescendantFonts=[e._pdf.attach(h)];var d=new Ot(a,l,n.subset),p=new _t(Z(),null,!0);p.data(d),u.ToUnicode=e._pdf.attach(p)},e.prototype._makeCidToGidMap=function(){return new _t(S(this._sub.cidToGidMap()),null,!0)},e}(xt),Ot=function(t){function e(e,n,i){t.call(this),this.firstChar=e,this.lastChar=n,this.map=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(t){t.indent("/CIDInit /ProcSet findresource begin"),t.indent("12 dict begin"),t.indent("begincmap"),t.indent("/CIDSystemInfo <<"),t.indent("  /Registry (Adobe)"),t.indent("  /Ordering (UCS)"),t.indent("  /Supplement 0"),t.indent(">> def"),t.indent("/CMapName /Adobe-Identity-UCS def"),t.indent("/CMapType 2 def"),t.indent("1 begincodespacerange"),t.indent("  <0000><ffff>"),t.indent("endcodespacerange");var e=this;t.indent(e.lastChar-e.firstChar+1," beginbfchar"),t.withIndent((function(){for(var n=e.firstChar;n<=e.lastChar;++n){var i=e.map[n],r=[i].map((function(t){var e="";return t>65535&&(t-=65536,e+=String.fromCharCode(t>>>10&1023|55296),t=56320|1023&t),e+=String.fromCharCode(t)})).join("");t.indent("<",at(n.toString(16),4),">","<");for(var o=0;o<r.length;++o)t(at(r.charCodeAt(o).toString(16),4));t(">")}})),t.indent("endbfchar"),t.indent("endcmap"),t.indent("CMapName currentdict /CMap defineresource pop"),t.indent("end"),t.indent("end")},e}(mt);function It(t){return t.map((function(t){return ct(t)?It(t):"number"==typeof t?(Math.round(1e3*t)/1e3).toFixed(3):t})).join(" ")}function Dt(t,e,n,i,r,o,s){var a=It([e,n,i,r,o,s]),l=t.GRAD_COL_FUNCTIONS[a];return l||(l=t.GRAD_COL_FUNCTIONS[a]=t.attach(new xt({FunctionType:2,Domain:[0,1],Range:[0,1,0,1,0,1],N:1,C0:[e,n,i],C1:[r,o,s]}))),l}function Ft(t,e,n){var i=It([e,n]),r=t.GRAD_OPC_FUNCTIONS[i];return r||(r=t.GRAD_OPC_FUNCTIONS[i]=t.attach(new xt({FunctionType:2,Domain:[0,1],Range:[0,1],N:1,C0:[e],C1:[n]}))),r}function Pt(t,e,n){var i="radial"==e.type,r=function(t,e){var n,i,r,o,s,a=!1,l=[],c=[],h=[],u=[];for(n=1;n<e.length;++n)i=e[n-1],r=e[n],o=i.color,s=r.color,c.push(Dt(t,o.r,o.g,o.b,s.r,s.g,s.b)),(o.a<1||s.a<1)&&(a=!0),h.push(r.offset),u.push(0,1);if(a)for(n=1;n<e.length;++n)i=e[n-1],r=e[n],o=i.color,s=r.color,l.push(Ft(t,o.a,s.a));return h.pop(),{hasAlpha:a,colors:d(c),opacities:a?d(l):null};function d(t){return 1==t.length?t[0]:{FunctionType:3,Functions:t,Domain:[0,1],Bounds:h,Encode:u}}}(t,e.stops),o=i?[e.start.x,e.start.y,e.start.r,e.end.x,e.end.y,e.end.r]:[e.start.x,e.start.y,e.end.x,e.end.y],s=function(t,e,n,i,r,o){var s,a;if(!o){var l=[e].concat(i);n.forEach((function(t){l.push(t.offset,t.color.r,t.color.g,t.color.b)})),a=It(l),s=t.GRAD_COL[a]}return s||(s=new xt({Type:wt("Shading"),ShadingType:e?3:2,ColorSpace:wt("DeviceRGB"),Coords:i,Domain:[0,1],Function:r,Extend:[!0,!0]}),t.attach(s),s._resourceName="S"+ ++Y,a&&(t.GRAD_COL[a]=s)),s}(t,i,e.stops,o,r.colors,e.userSpace&&n),a=r.hasAlpha?function(t,e,n,i,r,o){var s,a;if(!o){var l=[e].concat(i);n.forEach((function(t){l.push(t.offset,t.color.a)})),a=It(l),s=t.GRAD_OPC[a]}return s||(s=new xt({Type:wt("ExtGState"),AIS:!1,CA:1,ca:1,SMask:{Type:wt("Mask"),S:wt("Luminosity"),G:t.attach(new _t("/a0 gs /s0 sh",{Type:wt("XObject"),Subtype:wt("Form"),FormType:1,BBox:o?[o.left,o.top+o.height,o.left+o.width,o.top]:[0,1,1,0],Group:{Type:wt("Group"),S:wt("Transparency"),CS:wt("DeviceGray"),I:!0},Resources:{ExtGState:{a0:{CA:1,ca:1}},Shading:{s0:{ColorSpace:wt("DeviceGray"),Coords:i,Domain:[0,1],ShadingType:e?3:2,Function:r,Extend:[!0,!0]}}}}))}}),t.attach(s),s._resourceName="O"+ ++Y,a&&(t.GRAD_OPC[a]=s)),s}(t,i,e.stops,o,r.opacities,e.userSpace&&n):null;return{hasAlpha:r.hasAlpha,shading:s,opacity:a}}var Rt=function(t){function e(e,n){t.call(this,n),this._pdf=e,this._rcount=0,this._textMode=!1,this._fontResources={},this._gsResources={},this._xResources={},this._patResources={},this._shResources={},this._opacity=1,this._matrix=[1,0,0,1,0,0],this._annotations=[],this._font=null,this._fontSize=null,this._contextStack=[],(n=this.props).Type=wt("Page"),n.ProcSet=[wt("PDF"),wt("Text"),wt("ImageB"),wt("ImageC"),wt("ImageI")],n.Resources=new t({Font:new t(this._fontResources),ExtGState:new t(this._gsResources),XObject:new t(this._xResources),Pattern:new t(this._patResources),Shading:new t(this._shResources)}),n.Annots=this._annotations}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype._out=function(){this._content.data.apply(null,arguments)},e.prototype.transform=function(t,e,n,i,r,o){var s;(1!==(s=arguments)[0]||0!==s[1]||0!==s[2]||1!==s[3]||0!==s[4]||0!==s[5])&&(this._matrix=function(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],c=e[1],h=e[2],u=e[3],d=e[4],p=e[5];return[n*l+i*h,n*c+i*u,r*l+o*h,r*c+o*u,s*l+a*h+d,s*c+a*u+p]}(arguments,this._matrix),this._out(t," ",e," ",n," ",i," ",r," ",o," cm"),this._out(G))},e.prototype.translate=function(t,e){this.transform(1,0,0,1,t,e)},e.prototype.scale=function(t,e){this.transform(t,0,0,e,0,0)},e.prototype.rotate=function(t){var e=Math.cos(t),n=Math.sin(t);this.transform(e,n,-n,e,0,0)},e.prototype.beginText=function(){this._textMode=!0,this._out("BT",G)},e.prototype.endText=function(){this._textMode=!1,this._out("ET",G)},e.prototype._requireTextMode=function(){if(!this._textMode)throw new Error("Text mode required; call page.beginText() first")},e.prototype._requireFont=function(){if(!this._font)throw new Error("No font selected; call page.setFont() first")},e.prototype.setFont=function(t,e){this._requireTextMode(),null==t?t=this._font:t instanceof Mt||(t=this._pdf.getFont(t)),null==e&&(e=this._fontSize),this._fontResources[t._resourceName]=t,this._font=t,this._fontSize=e,this._out(t._resourceName," ",e," Tf",G)},e.prototype.setTextLeading=function(t){this._requireTextMode(),this._out(t," TL",G)},e.prototype.setTextRenderingMode=function(t){this._requireTextMode(),this._out(t," Tr",G)},e.prototype.showText=function(t,e){if(this._requireFont(),t.length>1&&e&&this._font instanceof Mt){var n=e/this._font.getTextWidth(this._fontSize,t)*100;this._out(n," Tz ")}this._out(this._font.encodeText(t)," Tj",G)},e.prototype.showTextNL=function(t){this._requireFont(),this._out(this._font.encodeText(t)," '",G)},e.prototype.addLink=function(e,n){var i=this._toPage({x:n.left,y:n.bottom}),r=this._toPage({x:n.right,y:n.top});this._annotations.push(new t({Type:wt("Annot"),Subtype:wt("Link"),Rect:[i.x,i.y,r.x,r.y],Border:[0,0,0],A:new t({Type:wt("Action"),S:wt("URI"),URI:new yt(e)})}))},e.prototype.setStrokeColor=function(t,e,n){this._out(t," ",e," ",n," RG",G)},e.prototype.setOpacity=function(t){this.setFillOpacity(t),this.setStrokeOpacity(t),this._opacity*=t},e.prototype.setStrokeOpacity=function(t){if(t<1){var e=this._pdf.getOpacityGS(this._opacity*t,!0);this._gsResources[e._resourceName]=e,this._out(e._resourceName," gs",G)}},e.prototype.setFillColor=function(t,e,n){this._out(t," ",e," ",n," rg",G)},e.prototype.setFillOpacity=function(t){if(t<1){var e=this._pdf.getOpacityGS(this._opacity*t,!1);this._gsResources[e._resourceName]=e,this._out(e._resourceName," gs",G)}},e.prototype.gradient=function(t,e){this.save(),this.rect(e.left,e.top,e.width,e.height),this.clip(),t.userSpace||this.transform(e.width,0,0,e.height,e.left,e.top);var n,i=Pt(this._pdf,t,e),r=i.shading._resourceName;this._shResources[r]=i.shading,i.hasAlpha&&(n=i.opacity._resourceName,this._gsResources[n]=i.opacity,this._out("/"+n+" gs ")),this._out("/"+r+" sh",G),this.restore()},e.prototype.setDashPattern=function(t,e){this._out(t," ",e," d",G)},e.prototype.setLineWidth=function(t){this._out(t," w",G)},e.prototype.setLineCap=function(t){this._out(t," J",G)},e.prototype.setLineJoin=function(t){this._out(t," j",G)},e.prototype.setMitterLimit=function(t){this._out(t," M",G)},e.prototype.save=function(){this._contextStack.push(this._context()),this._out("q",G)},e.prototype.restore=function(){this._out("Q",G),this._context(this._contextStack.pop())},e.prototype.moveTo=function(t,e){this._out(t," ",e," m",G)},e.prototype.lineTo=function(t,e){this._out(t," ",e," l",G)},e.prototype.bezier=function(t,e,n,i,r,o){this._out(t," ",e," ",n," ",i," ",r," ",o," c",G)},e.prototype.bezier1=function(t,e,n,i){this._out(t," ",e," ",n," ",i," y",G)},e.prototype.bezier2=function(t,e,n,i){this._out(t," ",e," ",n," ",i," v",G)},e.prototype.close=function(){this._out("h",G)},e.prototype.rect=function(t,e,n,i){this._out(t," ",e," ",n," ",i," re",G)},e.prototype.ellipse=function(t,e,n,i){function r(e){return t+e}function o(t){return e+t}var s=.5522847498307936;this.moveTo(r(0),o(i)),this.bezier(r(n*s),o(i),r(n),o(i*s),r(n),o(0)),this.bezier(r(n),o(-i*s),r(n*s),o(-i),r(0),o(-i)),this.bezier(r(-n*s),o(-i),r(-n),o(-i*s),r(-n),o(0)),this.bezier(r(-n),o(i*s),r(-n*s),o(i),r(0),o(i))},e.prototype.circle=function(t,e,n){this.ellipse(t,e,n,n)},e.prototype.stroke=function(){this._out("S",G)},e.prototype.nop=function(){this._out("n",G)},e.prototype.clip=function(){this._out("W n",G)},e.prototype.clipStroke=function(){this._out("W S",G)},e.prototype.closeStroke=function(){this._out("s",G)},e.prototype.fill=function(){this._out("f",G)},e.prototype.fillStroke=function(){this._out("B",G)},e.prototype.drawImage=function(t){var e=this._pdf.getImage(t);e&&(this._xResources[e._resourceName]=e,this._out(e._resourceName," Do",G))},e.prototype.comment=function(t){var e=this;t.split(/\r?\n/g).forEach((function(t){e._out("% ",t,G)}))},e.prototype._context=function(t){if(null==t)return{opacity:this._opacity,matrix:this._matrix};this._opacity=t.opacity,this._matrix=t.matrix},e.prototype._toPage=function(t){var e=this._matrix,n=e[0],i=e[1],r=e[2],o=e[3],s=e[4],a=e[5];return{x:n*t.x+r*t.y+s,y:i*t.x+o*t.y+a}},e}(xt);var Lt={serif:"Times-Roman","serif|bold":"Times-Bold","serif|italic":"Times-Italic","serif|bold|italic":"Times-BoldItalic","sans-serif":"Helvetica","sans-serif|bold":"Helvetica-Bold","sans-serif|italic":"Helvetica-Oblique","sans-serif|bold|italic":"Helvetica-BoldOblique",monospace:"Courier","monospace|bold":"Courier-Bold","monospace|italic":"Courier-Oblique","monospace|bold|italic":"Courier-BoldOblique",zapfdingbats:"ZapfDingbats","zapfdingbats|bold":"ZapfDingbats","zapfdingbats|italic":"ZapfDingbats","zapfdingbats|bold|italic":"ZapfDingbats"};function Nt(t,e){t=t.toLowerCase(),Lt[t]=function(){return Lt[e]},Lt[t+"|bold"]=function(){return Lt[e+"|bold"]},Lt[t+"|italic"]=function(){return Lt[e+"|italic"]},Lt[t+"|bold|italic"]=function(){return Lt[e+"|bold|italic"]}}function Bt(t,e){if(1==arguments.length)for(var n in t)lt(t,n)&&Bt(n,t[n]);else switch(t=t.toLowerCase(),Lt[t]=e,t){case"dejavu sans":Lt["sans-serif"]=e;break;case"dejavu sans|bold":Lt["sans-serif|bold"]=e;break;case"dejavu sans|italic":Lt["sans-serif|italic"]=e;break;case"dejavu sans|bold|italic":Lt["sans-serif|bold|italic"]=e;break;case"dejavu serif":Lt.serif=e;break;case"dejavu serif|bold":Lt["serif|bold"]=e;break;case"dejavu serif|italic":Lt["serif|italic"]=e;break;case"dejavu serif|bold|italic":Lt["serif|bold|italic"]=e;break;case"dejavu mono":Lt.monospace=e;break;case"dejavu mono|bold":Lt["monospace|bold"]=e;break;case"dejavu mono|italic":Lt["monospace|italic"]=e;break;case"dejavu mono|bold|italic":Lt["monospace|bold|italic"]=e}}Nt("Times New Roman","serif"),Nt("Courier New","monospace"),Nt("Arial","sans-serif"),Nt("Helvetica","sans-serif"),Nt("Verdana","sans-serif"),Nt("Tahoma","sans-serif"),Nt("Georgia","sans-serif"),Nt("Monaco","monospace"),Nt("Andale Mono","monospace");var jt=n(5532),zt=n(5753),$t=n(2876),Ht=n(1867);var Ut=n(3657),Vt=n(677),Wt=n(8703),qt=n(3018),Kt=w.A.browser||{};function Xt(t){return Array.prototype.slice.call(t)}var Gt="KENDO-PSEUDO-ELEMENT",Yt="data-kendo-bullet-type",Jt={},Zt={};Zt._root=Zt;var Qt=!!("undefined"!=typeof window)&&(Kt.msie||Kt.edge),te=function(t){function e(e,n,i){t.call(this,e,n.getOrigin(),i),this._pdfRect=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.rect=function(){return this._pdfRect},e.prototype.rawBBox=function(){return this._pdfRect},e}(Ut.A);function ee(t,e){Object.keys(e).forEach((function(n){t.style[n]=e[n]}))}var ne,ie="undefined"!=typeof Element&&Element.prototype&&((ne=Element.prototype).matches?function(t,e){return t.matches(e)}:ne.webkitMatchesSelector?function(t,e){return t.webkitMatchesSelector(e)}:ne.mozMatchesSelector?function(t,e){return t.mozMatchesSelector(e)}:ne.msMatchesSelector?function(t,e){return t.msMatchesSelector(e)}:function(t){return-1!==[].indexOf.call(document.querySelectorAll(t),this)});function re(t,e){if(t.closest)return t.closest(e);for(;t&&!/^\[object (?:HTML)?Document\]$/.test(String(t));){if(1==t.nodeType&&ie(t,e))return t;t=t.parentNode}}var oe,se=(oe="undefined"!=typeof window&&window.kendo&&window.kendo.jQuery)?function t(e){var n=e.cloneNode(!1);if(1==e.nodeType){var i,r=oe(e),o=oe(n),s=r.data();for(i in s)o.data(i,s[i]);for(/^canvas$/i.test(e.tagName)?n.getContext("2d").drawImage(e,0,0):/^(?:input|select|textarea|option)$/i.test(e.tagName)&&(n.removeAttribute("id"),n.removeAttribute("name"),/^textarea$/i.test(e.tagName)||(n.value=e.value),n.checked=e.checked,n.selected=e.selected),i=e.firstChild;i;i=i.nextSibling)n.appendChild(t(i))}return n}:function(t){var e=function t(e){var n=e.cloneNode(!1);e._kendoExportVisual&&(n._kendoExportVisual=e._kendoExportVisual);for(var i=e.firstChild;i;i=i.nextSibling)n.appendChild(t(i));return n}(t),n=t.querySelectorAll("canvas");n.length&&Xt(e.querySelectorAll("canvas")).forEach((function(t,e){t.getContext("2d").drawImage(n[e],0,0)}));var i=t.querySelectorAll("input, select, textarea, option");return Xt(e.querySelectorAll("input, select, textarea, option")).forEach((function(t,e){t.removeAttribute("id"),t.removeAttribute("name"),/^textarea$/i.test(t.tagName)||(t.value=i[e].value),t.checked=i[e].checked,t.selected=i[e].selected})),e};function ae(t,e){e||(e={});var n=(0,jt.A)();if(!t)return n.reject("No element to export");if("function"!=typeof window.getComputedStyle)throw new Error("window.getComputedStyle is missing.  You are using an unsupported browser, or running in IE8 compatibility mode.  Drawing HTML is supported in Chrome, Firefox, Safari and IE9+.");Bt(function(t){null==t&&(t=document);for(var e={},n=0;n<t.styleSheets.length;++n)i(t.styleSheets[n]);return e;function i(t){if(t){var e=null;try{e=t.cssRules}catch(t){}e&&o(t,e)}}function r(t){var e=Ae(t.style,"src");if(e)return he(e).reduce((function(t,e){var n=ue(e);return n&&t.push(n),t}),[]);var n=ue(t.cssText);return n?[n]:[]}function o(t,e){for(var n=0;n<e.length;++n){var o=e[n];switch(o.type){case 3:i(o.styleSheet);break;case 5:var a=o.style,l=he(Ae(a,"font-family")),c=/^([56789]00|bold)$/i.test(Ae(a,"font-weight")),h="italic"==Ae(a,"font-style"),u=r(o);u.length>0&&s(t,l,c,h,u[0])}}}function s(t,n,i,r,o){/^data:/i.test(o)||/^[^\/:]+:\/\//.test(o)||/^\//.test(o)||(o=String(t.href).replace(/[^\/]*$/,"")+o),n.forEach((function(t){t=t.replace(/^(['"]?)(.*?)\1$/,"$2"),i&&(t+="|bold"),r&&(t+="|italic"),e[t]=o}))}}(t.ownerDocument));var i,r="number"==typeof(i=e.scale||1)?{x:i,y:i}:Array.isArray(i)?{x:i[0],y:i[1]}:{x:i.x,y:i.y};function s(t){var n,i,s=new o.A,a=t.getBoundingClientRect();return Pe(s,[r.x,0,0,r.y,-a.left*r.x,-a.top*r.y]),Zt._clipbox=!1,Zt._matrix=l.A.unit(),Zt._stackingContext={element:t,group:s},!0===e.avoidLinks?Zt._avoidLinks="a":Zt._avoidLinks=e.avoidLinks,i="k-pdf-export",(n=t).classList?n.classList.add(i):n.className+=" "+i,Je(t,s),function(t,e){t.classList?t.classList.remove(e):t.className=t.className.split(/\s+/).reduce((function(t,n){return n!=e&&t.push(n),t}),[]).join(" ")}(t,"k-pdf-export"),s}return we([t],(function(){var i=e&&e.forcePageBreak,a=e&&e.paperSize&&"auto"!=e.paperSize,l=Q((function(t,n){return"paperSize"==t?a?e[t]:"A4":t in e?e[t]:n})),c=a&&l.paperSize[0],h=a&&l.paperSize[1],u=e.margin&&l.margin,d=Boolean(u);if(i||h){u||(u={left:0,top:0,right:0,bottom:0}),c&&(c/=r.x),h&&(h/=r.y),u.left/=r.x,u.right/=r.x,u.top/=r.y,u.bottom/=r.y;var p=new o.A({pdf:{multiPage:!0,paperSize:a?l.paperSize:"auto",_ignoreMargin:d}});!function(t,e,n,i,r,o,s){var a=function(t){if(null!=t)return"string"==typeof t&&(t=function(){throw new Error("Template implementation missing.")}(t.replace(/^\s+|\s+$/g,""))),"function"==typeof t?function(e){var n=t(e);if(n&&"string"==typeof n){var i=document.createElement("div");i.innerHTML=n,n=i.firstElementChild}return n}:function(){return t.cloneNode(!0)}}(s.template),l=e.ownerDocument,c=[],h=s._destructive?e:se(e),u=l.createElement("KENDO-PDF-DOCUMENT"),d=0;Xt(h.querySelectorAll("tfoot")).forEach((function(t){t.parentNode.appendChild(t)})),Xt(h.querySelectorAll("ol")).forEach((function(t){Xt(t.children).forEach((function(t,e){t.setAttribute("kendo-split-index",e)}))})),ee(u,{display:"block",position:"absolute",boxSizing:"content-box",left:"-10000px",top:"-10000px"}),i&&(ee(u,{width:i+"px",paddingLeft:o.left+"px",paddingRight:o.right+"px"}),ee(h,{overflow:"hidden"}));e.parentNode.insertBefore(u,e),u.appendChild(h),s.beforePageBreak?be([u],(function(){s.beforePageBreak(u,p)})):be([u],p);function p(){("-"!=n||r)&&g(h);var e=v();h.parentNode.insertBefore(e,h),e.appendChild(h),a&&c.forEach((function(t,e){var n=a({element:t,pageNum:e+1,totalPages:c.length});n&&t.appendChild(n)})),we(c,t.bind(null,{pages:c,container:u}))}function f(t){if(s.keepTogether&&ie(t,s.keepTogether)&&t.offsetHeight<=r-d)return!0;var e=t.tagName;return!(/^h[1-6]$/i.test(e)&&t.offsetHeight>=r-d)&&(t.getAttribute("data-kendo-chart")||/^(?:img|tr|thead|th|tfoot|iframe|svg|object|canvas|input|textarea|select|video|h[1-6])/i.test(t.tagName))}function g(t){if("TABLE"==t.tagName&&ee(t,{tableLayout:"fixed"}),!f(t)){var e=ke(t),i=parseFloat(Ae(e,"padding-bottom")),o=parseFloat(Ae(e,"border-bottom-width")),s=d;d+=i+o;for(var a=!0,l=t.firstChild;l;l=l.nextSibling)if(1==l.nodeType){if(a=!1,ie(l,n)){y(l);continue}if(!r){g(l);continue}if(!/^(?:static|relative)$/.test(Ae(ke(l),"position")))continue;var c=b(l);1==c||c&&f(l)?y(l):g(l)}else 3==l.nodeType&&r&&(w(l,a),a=!1);d=s}}function m(t){var e=t.parentNode,n=e.firstChild;if(t===n)return!0;if(t===e.children[0]){if(7==n.nodeType||8==n.nodeType)return!0;if(3==n.nodeType)return!/\S/.test(n.data)}return!1}function y(t){if(1==t.nodeType&&t!==h&&m(t))return y(t.parentNode);var e,n,i,r,o;n=(e=re(t,"table"))&&e.querySelector("colgroup"),s.repeatHeaders&&(i=e&&e.querySelector("thead"),(r=re(t,".k-grid"))&&r.querySelector(".k-auto-scrollable")&&(o=r.querySelector(".k-grid-header")));var a=v(),c=l.createRange();c.setStartBefore(h),c.setEndBefore(t),a.appendChild(c.extractContents()),h.parentNode.insertBefore(a,h),x(t.parentNode),e&&(e=re(t,"table"),s.repeatHeaders&&i&&e.insertBefore(i.cloneNode(!0),e.firstChild),n&&e.insertBefore(n.cloneNode(!0),e.firstChild)),s.repeatHeaders&&o&&(r=re(t,".k-grid")).insertBefore(o.cloneNode(!0),r.firstChild)}function v(){var t=l.createElement("KENDO-PDF-PAGE");return ee(t,{display:"block",boxSizing:"content-box",width:i?i+"px":"auto",padding:o.top+"px "+o.right+"px "+o.bottom+"px "+o.left+"px",position:"relative",height:r?r+"px":"auto",overflow:r||i?"hidden":"visible",clear:"both"}),s&&s.pageClassName&&(t.className=s.pageClassName),c.push(t),t}function b(t){var e=t.getBoundingClientRect();if(0===e.width||0===e.height)return 0;var n=h.getBoundingClientRect().top,i=r-d;return e.height>i?3:e.top-n>i?1:e.bottom-n>i?2:0}function w(t,e){if(/\S/.test(t.data)){var n=t.data.length,i=l.createRange();i.selectNodeContents(t);var r=b(i);if(r){var o=t;if(1==r)y(e?t.parentNode:t);else if(function e(n,r,o){return i.setEnd(t,r),n==r||r==o?r:b(i)?e(n,n+r>>1,r):e(r,r+o>>1,o)}(0,n>>1,n),!/\S/.test(i.toString())&&e)y(t.parentNode);else{o=t.splitText(i.endOffset);var s=v();i.setStartBefore(h),s.appendChild(i.extractContents()),h.parentNode.insertBefore(s,h),x(o.parentNode)}w(o)}}}function x(t){var e=re(t,"li");e&&(e.setAttribute("kendo-no-bullet","1"),x(e.parentNode))}}((function(t){if(e.progress){var i=!1,r=0;!function o(){if(r<t.pages.length){var a=s(t.pages[r]);p.append(a),e.progress({page:a,pageNum:++r,totalPages:t.pages.length,cancel:function(){i=!0}}),i?t.container.parentNode.removeChild(t.container):setTimeout(o)}else t.container.parentNode.removeChild(t.container),n.resolve(p)}()}else t.pages.forEach((function(t){p.append(s(t))})),t.container.parentNode.removeChild(t.container),n.resolve(p)}),t,i,c?c-u.left-u.right:null,h?h-u.top-u.bottom:null,u,e)}else n.resolve(s(t))})),n}var le,ce=function(){var t=/^((-webkit-|-moz-|-o-|-ms-)?linear-gradient\s*)\(/,e=/^([-0-9.]+%)/,n=/^([-0-9.]+px)/,i=/^(left|right|top|bottom|to|center)\W/,o=/^([-0-9.]+(deg|grad|rad|turn)|0)/,s=/^(\s+)/,a=/^(\()/,l=/^(\))/,c=/^(,)/,h=/^(url)\(/,u=/^(.*?)\)/,d={},p={};function f(p){var f,g=p;if(pe(d,g))return d[g];function m(t){!function(){var t=s.exec(p);t&&(p=p.substr(t[1].length))}();var e=t.exec(p);if(e)return p=p.substr(e[1].length),e[1]}function y(){var t,i,o=(0,r.Ay)(p,!0);if(o){var s=/^#[0-9a-f]+/i.exec(p)||/^rgba?\(.*?\)/i.exec(p)||/^..*?\b/.exec(p);return p=p.substr(s[0].length),o=o.toRGB(),(t=m(n))||(i=m(e)),{color:o,length:t,percent:i}}}return(f=m(t))?f=function(t){var n,r,s,h=[],u=!1;if(m(a)){if("0"==(n=m(o))&&(n="0deg"),n?(n=function(t){var e=parseFloat(t);return/grad$/.test(t)?Math.PI*e/200:/rad$/.test(t)?e:/turn$/.test(t)?Math.PI*e*2:/deg$/.test(t)?Math.PI*e/180:void 0}(n),m(c)):("to"==(r=m(i))?r=m(i):r&&/^-/.test(t)&&(u=!0),s=m(i),m(c)),/-moz-/.test(t)&&null==n&&null==r){var d=m(e),f=m(e);u=!0,"0%"==d?r="left":"100%"==d&&(r="right"),"0%"==f?s="top":"100%"==f&&(s="bottom"),m(c)}for(;p&&!m(l);){var g=y();if(!g)break;h.push(g),m(c)}return{type:"linear",angle:n,to:r&&s?r+" "+s:r||s||null,stops:h,reverse:u}}}(f):(f=m(h))&&(f=function(){if(m(a)){var t=m(u);return t=t.replace(/^['"]+|["']+$/g,""),m(l),{type:"url",url:t}}}()),d[g]=f||{type:"none"}}return function(t){return pe(p,t)?p[t]:p[t]=he(t).map(f)}}(),he=(le={},function(t,e){e||(e=/^\s*,\s*/);var n=t+e;if(pe(le,n))return le[n];var i,r=[],o=0,s=0,a=0,l=!1;function c(e){return i=e.exec(t.substr(s))}function h(t){return t.replace(/^\s+|\s+$/g,"")}for(;s<t.length;)!l&&c(/^[\(\[\{]/)?(a++,s++):!l&&c(/^[\)\]\}]/)?(a--,s++):!l&&c(/^[\"\']/)?(l=i[0],s++):"'"==l&&c(/^\\\'/)||'"'==l&&c(/^\\\"/)?s+=2:"'"==l&&c(/^\'/)||'"'==l&&c(/^\"/)?(l=!1,s++):c(e)?(!l&&!a&&s>o&&(r.push(h(t.substring(o,s))),o=s+i[0].length),s+=i[0].length):s++;return o<s&&r.push(h(t.substring(o,s))),le[n]=r}),ue=function(t){return function(e){var n,i=t[e];i||((n=/url\((['"]?)([^'")]*?)\1\)\s+format\((['"]?)truetype\3\)/.exec(e))||(n=/url\((['"]?)([^'")]*?\.ttf)\1\)/.exec(e)))&&(i=t[e]=n[2]);return i}}(Object.create(null)),de=function(t){return function(e){var n=t[e];return null==n&&(n=t[e]=(0,zt.A)("Mapq",{font:e}).height),n}}(Object.create(null));function pe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function fe(t,e){var n=Zt;for(t="_counter_"+t;n&&!pe(n,t);)n=Object.getPrototypeOf(n);n||(n=Zt._root),n[t]=(n[t]||0)+(null==e?1:e)}function ge(t,e){Zt[t="_counter_"+t]=null==e?0:e}function me(t,e,n){for(var i=0;i<t.length;){var r=t[i++],o=parseFloat(t[i]);isNaN(o)?e(r,n):(e(r,o),++i)}}function ye(t){var e=Ae(t,"counter-reset");e&&me(he(e,/^\s+/),ge,0);var n=Ae(t,"counter-increment");n&&me(he(n,/^\s+/),fe,1)}function ve(t,e){var n=(0,r.Ay)(t,!0);return n&&(n=n.toRGB(),e?n=n.toCssRgba():0===n.a&&(n=null)),n}function be(t,e){var n=0,i=!1;function r(){!i&&--n<=0&&(e(),i=!0)}t.forEach((function(t){for(var e=t.querySelectorAll("img"),i=0;i<e.length;++i){var o=e[i];o.complete||(n++,o.onload=o.onerror=r)}})),n||r()}function we(t,e){var n=[];function i(t){Jt[t]||(Jt[t]=!0,n.push(t))}t.forEach((function t(e){/^img$/i.test(e.tagName)&&i(e.src),ce(Ae(ke(e),"background-image")).forEach((function(t){"url"==t.type&&i(t.url)})),e.children&&Xt(e.children).forEach(t)}));var r=n.length;function o(){--r<=0&&be(t,e)}0===r&&o(),n.forEach((function(t){var e=Jt[t]=new window.Image;/^data:/i.test(t)||(e.crossOrigin="Anonymous"),e.src=t,e.complete?o():(e.onload=o,e.onerror=function(){Jt[t]=null,o()})}))}function xe(t){var e="";do{var n=t%26;e=String.fromCharCode(97+n)+e,t=Math.floor(t/26)}while(t>0);return e}function _e(t,e,n){(Zt=Object.create(Zt))[t.tagName.toLowerCase()]={element:t,style:e};var i=Ae(e,"text-decoration");if(i&&"none"!=i){var r=Ae(e,"text-decoration-color");i.split(/\s+/g).forEach((function(t){if(!Zt[t]&&(Zt[t]=r,"underline"==t)){var n=Ae(e,"text-underline-offset");"auto"!=n&&(Zt["underline-offset"]=parseFloat(n))}}))}(function(t){function e(e){return Ae(t,e)}if("none"!=e("transform")||"static"!=e("position")||"auto"!=e("z-index")||e("opacity")<1)return!0})(e)&&(Zt._stackingContext={element:t,group:n})}function Se(){Zt=Object.getPrototypeOf(Zt)}function Ce(t){if(null!=Zt._clipbox){var e=t.bbox(Zt._matrix);Zt._clipbox?Zt._clipbox=a.A.intersect(Zt._clipbox,e):Zt._clipbox=e}}function ke(t,e){return window.getComputedStyle(t,e||null)}function Ae(t,e,n){var i=t.getPropertyValue(e);return null!=i&&""!==i||(Kt.webkit?i=t.getPropertyValue("-webkit-"+e):Kt.mozilla?i=t.getPropertyValue("-moz-"+e):Kt.opera?i=t.getPropertyValue("-o-"+e):Qt&&(i=t.getPropertyValue("-ms-"+e))),arguments.length>2&&(null==i||""===i)?n:i}function Ee(t,e,n,i){t.setProperty(e,n,i),Kt.webkit?t.setProperty("-webkit-"+e,n,i):Kt.mozilla?t.setProperty("-moz-"+e,n,i):Kt.opera?t.setProperty("-o-"+e,n,i):Qt&&(t.setProperty("-ms-"+e,n,i),t[e="ms"+e.replace(/(^|-)([a-z])/g,(function(t,e,n){return e+n.toUpperCase()}))]=n)}function Te(t,e){return e="border-"+e,{width:parseFloat(Ae(t,e+"-width")),style:Ae(t,e+"-style"),color:ve(Ae(t,e+"-color"),!0)}}function Me(t,e){var n=t.style.cssText,i=e();return t.style.cssText=n,i}function Oe(t,e){var n=Ae(t,"border-"+e+"-radius").split(/\s+/g).map(parseFloat);return 1==n.length&&n.push(n[0]),Ne({x:n[0],y:n[1]})}function Ie(t){var e=t.getBoundingClientRect();return e=De(e,"border-*-width",t),e=De(e,"padding-*",t)}function De(t,e,n){var i,r,o,s,a;return"string"==typeof e?(i=ke(n),r=parseFloat(Ae(i,e.replace("*","top"))),o=parseFloat(Ae(i,e.replace("*","right"))),s=parseFloat(Ae(i,e.replace("*","bottom"))),a=parseFloat(Ae(i,e.replace("*","left")))):"number"==typeof e&&(r=o=s=a=e),{top:t.top+r,right:t.right-o,bottom:t.bottom-s,left:t.left+a,width:t.right-t.left-o-a,height:t.bottom-t.top-s-r}}function Fe(t){return 180*t/Math.PI%360}function Pe(t,e){return e=new l.A(e[0],e[1],e[2],e[3],e[4],e[5]),t.transform(e),e}function Re(t,e){t.clip(e)}function Le(t,e,n,i){for(var r=new y.A([e,n],i).curvePoints(),o=1;o<r.length;)t.curveTo(r[o++],r[o++],r[o++])}function Ne(t){return(t.x<=0||t.y<=0)&&(t.x=t.y=0),t}function Be(t,e,n,i,r){var o=Math.max(0,e.x),s=Math.max(0,e.y),a=Math.max(0,n.x),l=Math.max(0,n.y),c=Math.max(0,i.x),h=Math.max(0,i.y),u=Math.max(0,r.x),d=Math.max(0,r.y),p=Math.min(t.width/(o+a),t.height/(l+h),t.width/(c+u),t.height/(d+s));return p<1&&(o*=p,s*=p,a*=p,l*=p,c*=p,h*=p,u*=p,d*=p),{tl:{x:o,y:s},tr:{x:a,y:l},br:{x:c,y:h},bl:{x:u,y:d}}}function je(t,e,n){var i=ke(t),r=Oe(i,"top-left"),o=Oe(i,"top-right"),s=Oe(i,"bottom-left"),a=Oe(i,"bottom-right");if("padding"==n||"content"==n){var l=Te(i,"top"),c=Te(i,"right"),h=Te(i,"bottom"),u=Te(i,"left");if(r.x-=u.width,r.y-=l.width,o.x-=c.width,o.y-=l.width,a.x-=c.width,a.y-=h.width,s.x-=u.width,s.y-=h.width,"content"==n){var d=parseFloat(Ae(i,"padding-top")),p=parseFloat(Ae(i,"padding-right")),f=parseFloat(Ae(i,"padding-bottom")),g=parseFloat(Ae(i,"padding-left"));r.x-=g,r.y-=d,o.x-=p,o.y-=d,a.x-=p,a.y-=f,s.x-=g,s.y-=f}}return"number"==typeof n&&(r.x-=n,r.y-=n,o.x-=n,o.y-=n,a.x-=n,a.y-=n,s.x-=n,s.y-=n),ze(e,r,o,a,s)}function ze(t,e,n,i,r){var o=Be(t,e,n,i,r),a=o.tl,l=o.tr,c=o.br,h=o.bl,u=new s.w({fill:null,stroke:null});return u.moveTo(t.left,t.top+a.y),a.x&&Le(u,t.left+a.x,t.top+a.y,{startAngle:-180,endAngle:-90,radiusX:a.x,radiusY:a.y}),u.lineTo(t.right-l.x,t.top),l.x&&Le(u,t.right-l.x,t.top+l.y,{startAngle:-90,endAngle:0,radiusX:l.x,radiusY:l.y}),u.lineTo(t.right,t.bottom-c.y),c.x&&Le(u,t.right-c.x,t.bottom-c.y,{startAngle:0,endAngle:90,radiusX:c.x,radiusY:c.y}),u.lineTo(t.left+h.x,t.bottom),h.x&&Le(u,t.left+h.x,t.bottom-h.y,{startAngle:90,endAngle:180,radiusX:h.x,radiusY:h.y}),u.close()}function $e(t,e){var n=String(parseFloat(t));switch(e){case"decimal-leading-zero":return n.length<2&&(n="0"+n),n;case"lower-roman":return(0,$t.A)(t).toLowerCase();case"upper-roman":return(0,$t.A)(t).toUpperCase();case"lower-latin":case"lower-alpha":return xe(t-1);case"upper-latin":case"upper-alpha":return xe(t-1).toUpperCase();default:return n}}function He(t,e){function n(t,e,n){return n?(n=n.replace(/^\s*(["'])(.*)\1\s*$/,"$2"),function(t){var e=[],n=Zt;for(t="_counter_"+t;n;)pe(n,t)&&e.push(n[t]),n=Object.getPrototypeOf(n);return e.reverse()}(t).map((function(t){return $e(t,e)})).join(n)):$e(function(t){return Zt[t="_counter_"+t]}(t)||0,e)}var i,r=he(e,/^\s+/),o=[];return r.forEach((function(e){var r;(i=/^\s*(["'])(.*)\1\s*$/.exec(e))?o.push(i[2].replace(/\\([0-9a-f]{4})/gi,(function(t,e){return String.fromCharCode(parseInt(e,16))}))):(i=/^\s*counter\((.*?)\)\s*$/.exec(e))?(r=he(i[1]),o.push(n(r[0],r[1]))):(i=/^\s*counters\((.*?)\)\s*$/.exec(e))?(r=he(i[1]),o.push(n(r[0],r[2],r[1]))):(i=/^\s*attr\((.*?)\)\s*$/.exec(e))?o.push(t.getAttribute(i[1])||""):o.push(e)})),o.join("")}function Ue(t){if(t.cssText)return t.cssText;for(var e=[],n=0;n<t.length;++n)e.push(t[n]+": "+Ae(t,t[n]));return e.join(";\n")}function Ve(t,e){if(t.tagName!=Gt){var n=[];if(r(":before",t.firstChild),r(":after",null),n.length>0){var i=t.className;t.className+=" kendo-pdf-hide-pseudo-elements",We(t,e),t.className=i,n.forEach((function(e){t.removeChild(e)}))}else We(t,e)}else We(t,e);function r(e,i){var r=ke(t,e),o=r.content;if(ye(r),o&&"normal"!=o&&"none"!=o&&"0px"!=r.width){var s=t.ownerDocument.createElement(Gt);s.style.cssText=Ue(r),s.textContent=He(t,o),t.insertBefore(s,i),n.push(s)}}}function We(t,e){var n=ke(t),i=Te(n,"top"),r=Te(n,"right"),l=Te(n,"bottom"),c=Te(n,"left"),h=Oe(n,"top-left"),u=Oe(n,"top-right"),d=Oe(n,"bottom-left"),p=Oe(n,"bottom-right"),f=Ae(n,"direction"),m=Ae(n,"background-color");m=ve(m);var y,w,x=ce(Ae(n,"background-image")),_=he(Ae(n,"background-repeat")),S=he(Ae(n,"background-position")),C=he(Ae(n,"background-origin")),k=he(Ae(n,"background-size"));Qt&&"ellipsis"==(y=n.textOverflow)&&(w=t.style.textOverflow,t.style.textOverflow="clip"),Kt.msie&&Kt.version<10&&(S=he(t.currentStyle.backgroundPosition));var A,E,T,M=De(t.getBoundingClientRect(),"border-*-width",t);!function(){var t=Ae(n,"clip"),i=/^\s*rect\((.*)\)\s*$/.exec(t);if(i){var r=i[1].split(/[ ,]+/g),a="auto"==r[0]?M.top:parseFloat(r[0])+M.top,l="auto"==r[1]?M.right:parseFloat(r[1])+M.left,c="auto"==r[2]?M.bottom:parseFloat(r[2])+M.top,h="auto"==r[3]?M.left:parseFloat(r[3])+M.left,u=new o.A,d=(new s.w).moveTo(h,a).lineTo(l,a).lineTo(l,c).lineTo(h,c).close();Re(u,d),e.append(u),e=u,Ce(d)}}();var O=Ae(n,"display");if("table-row"==O)for(A=[],E=0,T=t.children;E<T.length;++E)A.push(T[E].getBoundingClientRect());else 1==(A=t.getClientRects()).length&&(A=[t.getBoundingClientRect()]);for(A=function(e){if(/^td$/i.test(t.tagName)){var n=Zt.table;if(n&&"collapse"==Ae(n.style,"border-collapse")){var i=Te(n.style,"left").width,r=Te(n.style,"top").width;if(0===i&&0===r)return e;var o=n.element.getBoundingClientRect(),s=n.element.rows[0].cells[0].getBoundingClientRect();if(s.top==o.top||s.left==o.left)return Xt(e).map((function(t){return{left:t.left+i,top:t.top+r,right:t.right+i,bottom:t.bottom+r,height:t.height,width:t.width}}))}}return e}(A),E=0;E<A.length;++E)P(A[E],0===E,E==A.length-1);if("A"==t.tagName&&t.href&&!/^#?$/.test(t.getAttribute("href"))&&(!Zt._avoidLinks||!ie(t,Zt._avoidLinks))){var I=document.createRange();I.selectNodeContents(t),Xt(I.getClientRects()).forEach((function(n){var i=new o.A;i._pdfLink={url:t.href,top:n.top,right:n.right,bottom:n.bottom,left:n.left},e.append(i)}))}return A.length>0&&"list-item"==O&&!t.getAttribute("kendo-no-bullet")&&function(){var i=Ae(n,"list-style-type");if("none"==i)return;var r=Ae(n,"list-style-position");function o(n){Me(t,(function(){t.style.position="relative";var i=t.ownerDocument.createElement(Gt);i.style.position="absolute",i.style.boxSizing="border-box","outside"==r?(i.style.width="6em",i.style.left="-6.8em",i.style.textAlign="right"):i.style.left="0px",n(i),t.insertBefore(i,t.firstChild),Je(i,e),t.removeChild(i)}))}function s(e){var n=t.parentNode.children,i=t.getAttribute("kendo-split-index");if(null!=i)return e(0|i,n.length);for(var r=0;r<n.length;++r)if(n[r]===t)return e(r,n.length)}switch(i){case"circle":case"disc":case"square":o((function(t){t.innerHTML="&nbsp;",t.setAttribute(Yt,i)}));break;case"decimal":case"decimal-leading-zero":o((function(t){s((function(e){++e,"decimal-leading-zero"==i&&e<10&&(e="0"+e),t.innerHTML=e+"."}))}));break;case"lower-roman":case"upper-roman":o((function(t){s((function(e){e=(0,$t.A)(e+1),"upper-roman"==i&&(e=e.toUpperCase()),t.innerHTML=e+"."}))}));break;case"lower-latin":case"lower-alpha":case"upper-latin":case"upper-alpha":o((function(t){s((function(e){e=xe(e),/^upper/i.test(i)&&(e=e.toUpperCase()),t.innerHTML=e+"."}))}))}}(A[0]),function(){function i(){var n=je(t,M,"padding"),i=new o.A;Re(i,n),e.append(i),e=i,Ce(n)}!function(t){return/^(?:textarea|select|input)$/i.test(t.tagName)}(t)?(/^(hidden|auto|scroll)/.test(Ae(n,"overflow"))||/^(hidden|auto|scroll)/.test(Ae(n,"overflow-x"))||/^(hidden|auto|scroll)/.test(Ae(n,"overflow-y")))&&i():i()}(),function(t,e){var n;if(t._kendoExportVisual)n=t._kendoExportVisual();else if(window.kendo&&window.kendo.jQuery&&t.getAttribute(window.kendo.attr("role"))){var i=window.kendo.widgetInstance(window.kendo.jQuery(t));i&&(i.exportDOMVisual||i.exportVisual)&&(n=i.exportDOMVisual?i.exportDOMVisual():i.exportVisual())}if(!n)return!1;var r=new o.A;r.children.push(n);var s=t.getBoundingClientRect();return r.transform(v.A().translate(s.left,s.top)),e.append(r),!0}(t,e)||function(t,e){var n=t.getAttribute(Yt);if(!n)return!1;var i=t.getBoundingClientRect(),r=ke(t).color;if("square"===n){var o=i.height/5;e.append(new g(new a.A([i.right-o,i.top+i.height/2.1],[o,o])).fill(r).stroke(r))}else{var s=i.height/7,l=[i.right-s,i.top+(i.height+s)/2],c=new qt.A(new b.A(l,s));"circle"===n?c.stroke(r,.5):c.fill(r).stroke(null),e.append(c)}return!0}(t,e)||Ge(t,e),Qt&&"ellipsis"==y&&(t.style.textOverflow=w),e;function D(t,n,i,r,a,l,c,h){if(!(i<=0)){var u,d=new o.A;Pe(d,h),e.append(d),Ne(l),Ne(c),u=new s.w({fill:{color:t},stroke:null}),d.append(u),u.moveTo(l.x?Math.max(l.x,r):0,0).lineTo(n-(c.x?Math.max(c.x,a):0),0).lineTo(n-Math.max(c.x,a),i).lineTo(Math.max(l.x,r),i).close(),l.x&&p(r,l,[-1,0,0,1,l.x,0]),c.x&&p(a,c,[1,0,0,1,n-c.x,0])}function p(e,n,r){var o=Math.PI/2*e/(e+i),a={x:n.x-e,y:n.y-i},l=new s.w({fill:{color:t},stroke:null}).moveTo(0,0);Pe(l,r),Le(l,0,n.y,{startAngle:-90,endAngle:-Fe(o),radiusX:n.x,radiusY:n.y}),a.x>0&&a.y>0?(l.lineTo(a.x*Math.cos(o),n.y-a.y*Math.sin(o)),Le(l,0,n.y,{startAngle:-Fe(o),endAngle:-90,radiusX:a.x,radiusY:a.y,anticlockwise:!0})):a.x>0?l.lineTo(a.x,i).lineTo(0,i):l.lineTo(a.x,i).lineTo(a.x,0),d.append(l.close())}}function F(e,n,i,r,o,l,c){var h;if(i&&"none"!=i)if("url"==i.type){var u=Jt[i.url];u&&u.width>0&&u.height>0&&d(e,n,u.width,u.height,(function(t,e){t.append(new Vt.A(i.url,e))}))}else{if("linear"!=i.type)return;d(e,n,n.width,n.height,(h=i,function(t,e){var n=e.width(),i=e.height();switch(h.type){case"linear":var r=null!=h.angle?h.angle:Math.PI;switch(h.to){case"top":r=0;break;case"left":r=-Math.PI/2;break;case"bottom":r=Math.PI;break;case"right":r=Math.PI/2;break;case"top left":case"left top":r=-Math.atan2(i,n);break;case"top right":case"right top":r=Math.atan2(i,n);break;case"bottom left":case"left bottom":r=Math.PI+Math.atan2(i,n);break;case"bottom right":case"right bottom":r=Math.PI-Math.atan2(i,n)}h.reverse&&(r-=Math.PI),(r%=2*Math.PI)<0&&(r+=2*Math.PI);var o=Math.abs(n*Math.sin(r))+Math.abs(i*Math.cos(r)),a=Math.atan(n*Math.tan(r)/i),l=Math.sin(a),c=Math.cos(a),u=Math.abs(l)+Math.abs(c),d=u/2*l,p=u/2*c;r>Math.PI/2&&r<=3*Math.PI/2&&(d=-d,p=-p);var f=[],g=0,m=h.stops.map((function(t,e){var n=t.percent;n?n=parseFloat(n)/100:t.length?n=parseFloat(t.length)/o:0===e?n=0:e==h.stops.length-1&&(n=1);var i={color:t.color.toCssRgba(),offset:n};return null!=n?(g=n,f.forEach((function(t,e){t.stop.offset=t.left+(g-t.left)*(e+1)/(f.length+1)})),f=[]):f.push({left:g,stop:i}),i})),y=[.5-d,.5+p],v=[.5+d,.5-p];t.append(s.w.fromRect(e).stroke(null).fill(new Wt.A({start:y,end:v,stops:m,userSpace:!1})));break;case"radial":window.console&&window.console.log&&window.console.log("Radial gradients are not yet supported in HTML renderer")}}))}function d(e,n,i,s,h){var u,d=i/s,p=n;if("content-box"==l?(p=De(p,"border-*-width",t),p=De(p,"padding-*",t)):"padding-box"==l&&(p=De(p,"border-*-width",t)),!/^\s*auto(\s+auto)?\s*$/.test(c))if("contain"==c)u=Math.min(p.width/i,p.height/s),i*=u,s*=u;else if("cover"==c)u=Math.max(p.width/i,p.height/s),i*=u,s*=u;else{var f=c.split(/\s+/g);i=/%$/.test(f[0])?p.width*parseFloat(f[0])/100:parseFloat(f[0]),s=1==f.length||"auto"==f[1]?i/d:/%$/.test(f[1])?p.height*parseFloat(f[1])/100:parseFloat(f[1])}var g=String(o);switch(g){case"bottom":g="50% 100%";break;case"top":g="50% 0";break;case"left":g="0 50%";break;case"right":g="100% 50%";break;case"center":g="50% 50%"}1==(g=g.split(/\s+/)).length&&(g[1]="50%"),/%$/.test(g[0])?g[0]=parseFloat(g[0])/100*(p.width-i):g[0]=parseFloat(g[0]),/%$/.test(g[1])?g[1]=parseFloat(g[1])/100*(p.height-s):g[1]=parseFloat(g[1]);var m=new a.A([p.left+g[0],p.top+g[1]],[i,s]);function y(){for(;m.origin.x>n.left;)m.origin.x-=i}function v(){for(;m.origin.y>n.top;)m.origin.y-=s}function b(){for(;m.origin.x<n.right;)h(e,m.clone()),m.origin.x+=i}if("no-repeat"==r)h(e,m);else if("repeat-x"==r)y(),b();else if("repeat-y"==r)for(v();m.origin.y<n.bottom;)h(e,m.clone()),m.origin.y+=s;else if("repeat"==r){y(),v();for(var w=m.origin.clone();m.origin.y<n.bottom;)m.origin.x=w.x,b(),m.origin.y+=s}}}function P(n,a,g){if(0!==n.width&&0!==n.height){!function(t){var n=new o.A;if(Re(n,ze(t,h,u,p,d)),e.append(n),m){var i=new s.w({fill:{color:m.toCssRgba()},stroke:null});i.moveTo(t.left,t.top).lineTo(t.right,t.top).lineTo(t.right,t.bottom).lineTo(t.left,t.bottom).close(),n.append(i)}for(var r=x.length;--r>=0;)F(n,t,x[r],_[r%_.length],S[r%S.length],C[r%C.length],k[r%k.length])}(n);var y=c.width>0&&(a&&"ltr"==f||g&&"rtl"==f),v=r.width>0&&(g&&"ltr"==f||a&&"rtl"==f);if(0!==i.width||0!==c.width||0!==r.width||0!==l.width){if(i.color==r.color&&i.color==l.color&&i.color==c.color&&i.width==r.width&&i.width==l.width&&i.width==c.width&&y&&v){n=De(n,i.width/2);var b=je(t,n,i.width/2);return b.options.stroke={color:i.color,width:i.width},void e.append(b)}if(0===h.x&&0===u.x&&0===p.x&&0===d.x&&i.width<2&&c.width<2&&r.width<2&&l.width<2)return i.width>0&&e.append(new s.w({stroke:{width:i.width,color:i.color}}).moveTo(n.left,n.top+i.width/2).lineTo(n.right,n.top+i.width/2)),l.width>0&&e.append(new s.w({stroke:{width:l.width,color:l.color}}).moveTo(n.left,n.bottom-l.width/2).lineTo(n.right,n.bottom-l.width/2)),y&&e.append(new s.w({stroke:{width:c.width,color:c.color}}).moveTo(n.left+c.width/2,n.top).lineTo(n.left+c.width/2,n.bottom)),void(v&&e.append(new s.w({stroke:{width:r.width,color:r.color}}).moveTo(n.right-r.width/2,n.top).lineTo(n.right-r.width/2,n.bottom)));var w=Be(n,h,u,p,d),A=w.tl,E=w.tr,T=w.br,M=w.bl;D(i.color,n.width,i.width,c.width,r.width,A,E,[1,0,0,1,n.left,n.top]),D(l.color,n.width,l.width,r.width,c.width,T,M,[-1,0,0,-1,n.right,n.bottom]),D(c.color,n.height,c.width,l.width,i.width,O(M),O(A),[0,-1,1,0,n.left,n.bottom]),D(r.color,n.height,r.width,i.width,l.width,O(E),O(T),[0,1,-1,0,n.right,n.top])}}function O(t){return{x:t.y,y:t.x}}}}function qe(t,e,n){var i=Ie(t),r=new a.A([i.left,i.top],[i.width,i.height]),o=new Vt.A(e,r);Re(o,je(t,i,"content")),n.append(o)}function Ke(t,e){var n=ke(t),i=ke(e),r=parseFloat(Ae(n,"z-index")),o=parseFloat(Ae(i,"z-index")),s=Ae(n,"position"),a=Ae(i,"position");return isNaN(r)&&isNaN(o)?/static|absolute/.test(s)&&/static|absolute/.test(a)?0:"static"==s?-1:"static"==a?1:0:isNaN(r)?0===o?0:o>0?-1:1:isNaN(o)?0===r?0:r>0?1:-1:parseFloat(r)-parseFloat(o)}function Xe(t,e){var n=t.tagName.toLowerCase();if("input"==n&&("checkbox"==t.type||"radio"==t.type))return function(t,e){var n=Ae(ke(t),"color"),i=t.getBoundingClientRect();"checkbox"==t.type?(e.append(s.w.fromRect(new a.A([i.left+1,i.top+1],[i.width-2,i.height-2])).stroke(n,1)),t.checked&&e.append((new s.w).stroke(n,1.2).moveTo(i.left+.22*i.width,i.top+.55*i.height).lineTo(i.left+.45*i.width,i.top+.75*i.height).lineTo(i.left+.78*i.width,i.top+.22*i.width))):(e.append(new qt.A(new b.A([(i.left+i.right)/2,(i.top+i.bottom)/2],Math.min(i.width-2,i.height-2)/2)).stroke(n,1)),t.checked&&e.append(new qt.A(new b.A([(i.left+i.right)/2,(i.top+i.bottom)/2],Math.min(i.width-8,i.height-8)/2)).fill(n).stroke(null)))}(t,e);var i,r=t.parentNode,o=t.ownerDocument,l=o.createElement(Gt);if(l.style.cssText=Ue(ke(t)),"input"==n&&(l.style.whiteSpace="pre"),"select"!=n&&"textarea"!=n||(l.style.overflow="auto"),"select"==n)if(t.multiple)for(var c=0;c<t.options.length;++c)(i=o.createElement(Gt)).style.cssText=Ue(ke(t.options[c])),i.style.display="block",i.textContent=t.options[c].textContent,l.appendChild(i);else i=function(t){return t.selectedOptions&&t.selectedOptions.length>0?t.selectedOptions[0]:t.options[t.selectedIndex]}(t),i&&(l.textContent=i.textContent);else l.textContent=t.value;r.insertBefore(l,t),l.scrollLeft=t.scrollLeft,l.scrollTop=t.scrollTop,t.style.display="none",Ge(l,e),t.style.display="",r.removeChild(l)}function Ge(t,e){switch(Zt._stackingContext.element===t&&(Zt._stackingContext.group=e),t.tagName.toLowerCase()){case"img":qe(t,t.src,e);break;case"svg":var n=function(t){var e=new window.XMLSerializer,n=e.serializeToString(t);if(Kt.mozilla&&(!t.getAttribute("width")||!t.getAttribute("height"))){var i=(new window.DOMParser).parseFromString(n,"image/svg+xml").documentElement,r=Ie(t);i.setAttribute("width",r.width),i.setAttribute("height",r.height),n=e.serializeToString(i)}return n}(t);qe(t,"data:image/svg+xml;base64,"+(0,K.A)(n),e);break;case"canvas":try{qe(t,t.toDataURL("image/png"),e)}catch(t){}break;case"textarea":case"input":case"select":Xe(t,e);break;default:for(var i=[],r=[],o=[],s=t.firstChild;s;s=s.nextSibling)switch(s.nodeType){case 3:/\S/.test(s.data)&&Ye(t,s,e);break;case 1:var a=ke(s),l=Ae(a,"float");"static"!=Ae(a,"position")?o.push(s):"none"!=l?r.push(s):i.push(s)}(0,Ht.A)(i,Ke).forEach((function(t){Je(t,e)})),(0,Ht.A)(r,Ke).forEach((function(t){Je(t,e)})),(0,Ht.A)(o,Ke).forEach((function(t){Je(t,e)}))}}function Ye(t,e,n){if(null!=(i=Zt._clipbox)&&!(i?0===i.width()||0===i.height():void 0)){var i,r=ke(t);if(!(parseFloat(Ae(r,"text-indent"))<-500)){var o=e.data,l=0,c=o.search(/\S\s*$/)+1;if(c){var h=Ae(r,"font-size"),u=Ae(r,"line-height"),d=[Ae(r,"font-style"),Ae(r,"font-variant"),Ae(r,"font-weight"),h,Ae(r,"font-family")].join(" ");if(h=parseFloat(h),u=parseFloat(u),0!==h&&!isNaN(h)){var p=Ae(r,"color"),f=t.ownerDocument.createRange(),g="justify"==Ae(r,"text-align"),m=Ae(r,"column-count",1),y=Ae(r,"white-space"),v=Ae(r,"text-transform"),b=t.getBoundingClientRect().width/h*5;0===b&&(b=500);var w=null,x=Zt.underline,_=Zt["line-through"],S=Zt.overline,C=Zt["underline-offset"];for(x&&k((function(t){var e=h/12,n=t.bottom;n+=null!=C?C:e;T(e,t,x,n)}));!E(););return void((_||S)&&k((function(t){var e=h/12;T(e,t,_,t.bottom-t.height/2.7),T(e,t,S,t.top)})))}}}}function k(t){f.selectNode(e);var n=Xt(f.getClientRects());k=function(t){return n.forEach(t)},k(t)}function A(t){if(Qt||Kt.chrome||Kt.safari){for(var e=t.getClientRects(),n={top:1/0,right:-1/0,bottom:-1/0,left:1/0},i=!1,r=0;r<e.length;++r){var o=e[r];o.width<=1||o.bottom===w||(n.left=Math.min(o.left,n.left),n.top=Math.min(o.top,n.top),n.right=Math.max(o.right,n.right),n.bottom=Math.max(o.bottom,n.bottom),i=!0)}return i?(n.width=n.right-n.left,n.height=n.bottom-n.top,n):t.getBoundingClientRect()}return t.getBoundingClientRect()}function E(){var t,i=l,r=o.substr(l).search(/\S/);if(l+=r,r<0||l>=c)return!0;f.setStart(e,l),f.setEnd(e,l+1),t=A(f);var s=!1;if((g||m>1)&&(r=o.substr(l).search(/\s/))>=0){f.setEnd(e,l+r);var h=A(f);h.bottom==t.bottom&&(t=h,s=!0,l+=r)}if(!s){if(r=function n(i,r,o){f.setEnd(e,r);var s=A(f);return s.bottom!=t.bottom&&i<r?n(i,i+r>>1,r):s.right!=t.right?(t=s,r<o?n(r,r+o>>1,o):r):r}(l,Math.min(c,l+b),c),r==l)return!0;if(l=r,0===(r=f.toString().search(/\s+$/)))return!1;r>0&&(f.setEnd(e,f.startOffset+r),t=A(f))}Qt&&(t=f.getClientRects()[0]);var x=f.toString();if(/^(?:pre|pre-wrap)$/i.test(y)){if(/\t/.test(x)){var _=0;for(r=i;r<f.startOffset;++r){var S=o.charCodeAt(r);9==S?_+=8-_%8:10==S||13==S?_=0:_++}for(;(r=x.search("\t"))>=0;){var C="        ".substr(0,8-(_+r)%8);x=x.substr(0,r)+C+x.substr(r+1)}}}else x=x.replace(/\s+/g," ");s||(w=t.bottom),function(t,e){if(Qt&&!isNaN(u)){var i=de(d),r=(e.top+e.bottom-i)/2;e={top:r,right:e.right,bottom:r+i,left:e.left,height:i,width:e.right-e.left}}switch(v){case"uppercase":t=t.toUpperCase();break;case"lowercase":t=t.toLowerCase();break;case"capitalize":t=t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()}))}var o=new te(t,new a.A([e.left,e.top],[e.width,e.height]),{font:d,fill:{color:p}});n.append(o)}(x,t)}function T(t,e,i,r){if(i){var o=new s.w({stroke:{width:t,color:i}});r-=t,o.moveTo(e.left,r).lineTo(e.right,r),n.append(o)}}}function Je(t,e){var n=ke(t);if(ye(n),!/^(style|script|link|meta|iframe|col|colgroup)$/i.test(t.tagName)&&null!=Zt._clipbox){var i=parseFloat(Ae(n,"opacity")),r=Ae(n,"visibility"),a=Ae(n,"display");if(0!==i&&"hidden"!=r&&"none"!=a){var l,c=function(t){var e=Ae(t,"transform");if("none"==e)return null;var n=/^\s*matrix\(\s*(.*?)\s*\)\s*$/.exec(e);if(n){var i=Ae(t,"transform-origin");return{matrix:n=n[1].split(/\s*,\s*/g).map(parseFloat),origin:i=i.split(/\s+/g).map(parseFloat)}}}(n),h=Ae(n,"z-index");(c||i<1)&&"auto"==h&&(h=0),l=function(t,e,n){var i;"auto"!=n?(i=Zt._stackingContext.group,n=parseFloat(n)):(i=e,n=0);for(var r=i.children,a=0;a<r.length&&!(null!=r[a]._dom_zIndex&&r[a]._dom_zIndex>n);++a);var l=new o.A;if(i.insert(a,l),l._dom_zIndex=n,i!==e&&Zt._clipbox){var c=Zt._matrix.invert(),h=Zt._clipbox.transformCopy(c);Re(l,s.w.fromRect(h))}return l}(0,e,h),i<1&&l.opacity(i*l.opacity()),_e(t,n,l),c?Me(t,(function(){Ee(t.style,"transform","none","important"),Ee(t.style,"transition","none","important"),"static"==Ae(n,"position")&&Ee(t.style,"position","relative","important");var e=t.getBoundingClientRect(),i=e.left+c.origin[0],r=e.top+c.origin[1],o=[1,0,0,1,-i,-r];o=Ze(o,c.matrix),o=Ze(o,[1,0,0,1,i,r]),o=Pe(l,o),Zt._matrix=Zt._matrix.multiplyCopy(o),Ve(t,l)})):Ve(t,l),Se()}}}function Ze(t,e){var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],c=e[1],h=e[2],u=e[3];return[n*l+i*h,n*c+i*u,r*l+o*h,r*c+o*u,s*l+a*h+e[4],s*c+a*u+e[5]]}var Qe,tn=n(1775);!function(t){t[t.Forward=1]="Forward",t[t.Backward=-1]="Backward"}(Qe||(Qe={}));var en=n(2089),nn=n(6916),rn=function(t,e,n){void 0===n&&(n=Qe.Forward);var i=(0,nn.a)(t),r=(e-i.getDay()+7*n)%7;return i.setDate(i.getDate()+r),(0,en.t)(i,t.getHours())},on=n(6813),sn=n(749),an=function(t){return(0,sn.J)(t.getFullYear(),t.getMonth(),1,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())},ln=n(6764),cn=n(5713);function hn(t){const e=Math.floor(t/26)-1;return(e>=0?hn(e):"")+String.fromCharCode(65+t%26)}function un(t){return/^[a-z_][a-z0-9_]*$/i.test(t)?t:"'"+t.replace(/\x27/g,"\\'")+"'"}function dn(t,e,n,i){let r="";return++e,isFinite(e)?null==i||2&i||(e="$"+e):e="",isFinite(n)?(r=hn(n),null==i||1&i||(r="$"+r)):n="",t?un(t)+"!"+r+e:r+e}class pn{constructor(){this.type="ref",this.sheet=""}clone(){return this}hasSheet(){return this._hasSheet}simplify(){return this}setSheet(t,e){return this.sheet=t,null!=e&&(this._hasSheet=e),this}absolute(t,e){return this}relative(...t){return this}adjust(t,e,n,i,r,o,s){return this}toString(){return this.relative(0,0,3,3).print(0,0)}forEach(t,e){t.call(e,this)}map(t,e){return t.call(e,this)}intersect(t){return this}intersects(t){return this.intersect(t)!==fn}isCell(){return!1}toRow(t){return this}toColumn(t){return this}first(){return this}lastRange(){return this}size(){return 1}rangeAt(t){return this}nextRangeIndex(t){return 0}previousRangeIndex(t){return 0}eq(t){let e=this,n=t;if(e===fn||n===fn)return e===n;if((n instanceof mn||n instanceof yn&&!(e instanceof mn))&&(e=t,n=this),e instanceof mn)return n=n.simplify(),n instanceof mn&&e.row==n.row&&e.col==n.col&&e.sheet==n.sheet;if(e instanceof yn){if(n instanceof yn)return n.topLeft.eq(e.topLeft)&&n.bottomRight.eq(e.bottomRight);if(n instanceof vn)return n.single()&&e.eq(n.refs[0])}else if(e instanceof vn&&n instanceof vn){const t=e.refs,i=n.refs;if(t.length!=i.length)return!1;for(let e=0,n=t.length;e<n;e++)if(!t[e].eq(i[e]))return!1;return!0}return e===n}concat(t){return new vn([this,t])}replaceAt(t,e){return e}forEachColumnIndex(t){this.forEachAxisIndex("col",t)}forEachRowIndex(t){this.forEachAxisIndex("row",t)}forEachRow(t){}forEachColumn(t){}forEachAxisIndex(t,e){let n=[];this["row"===t?"forEachRow":"forEachColumn"]((function(e){let i=e.first()[t];-1===n.indexOf(i)&&n.push(i)})),n.sort((function(t,e){return t>e?1:t<e?-1:0})).forEach(e)}valid(){return!1}renameSheet(t,e){if(this.sheet&&this.sheet.toLowerCase()==t.toLowerCase())return this.sheet=e,!0}}pn.display=dn;const fn=new class extends pn{print(){return"#NULL!"}eq(t){return t===this}forEach(){}};class gn extends pn{constructor(t){super(),this.name=t,this.ref="name"}clone(){return new gn(this.name).setSheet(this.sheet,this.hasSheet())}print(){let t=un(this.name);return this.hasSheet()&&(t=un(this.sheet)+"!"+t),t}}class mn extends pn{constructor(t,e,n){super(),this.row=t,this.col=e,this.rel=n||0,this.ref="cell"}clone(){return new mn(this.row,this.col,this.rel).setSheet(this.sheet,this.hasSheet())}intersect(t){return t instanceof mn?this.eq(t)?this:fn:t.intersect(this)}print(t,e,n){let i,r=this.col,o=this.row,s=this.rel;if(null==t&&s){let t=this.hasSheet()?un(this.sheet)+"!":"";return r=isFinite(r)?1&s?"C["+r+"]":"C"+(r+1):"",o=isFinite(o)?2&s?"R["+o+"]":"R"+(o+1):"",t+o+r}return i=this.absolute(t,e),n?(o=i.row%1048576,r=i.col%16384,o<0&&(o+=1048576),r<0&&(r+=16384),dn(this._hasSheet&&this.sheet,o,r,s)):i.valid()?dn(this._hasSheet&&this.sheet,i.row,i.col,s):"#REF!"}absolute(t,e){let n=this.clone();return 0==(3&n.rel)||(1&n.rel&&(n.col=(n.col+e)%16384),2&n.rel&&(n.row=(n.row+t)%1048576),n.rel=0),n}toRangeRef(){return new yn(this,this)}relative(t,e,n){null==n&&(n=this.rel);let i=2&n?this.row-t:this.row,r=1&n?this.col-e:this.col;return new mn(i,r,n).setSheet(this.sheet,this.hasSheet())}height(){return 1}width(){return 1}toString(){return dn(null,this.row,this.col,3)}isCell(){return!0}leftColumn(){return this}rightColumn(){return this}topRow(){return this}bottomRow(){return this}forEachRow(t){t(this.toRangeRef())}forEachColumn(t){t(this.toRangeRef())}adjust(t,e,n,i,r,o,s){let a=this.absolute(t,e);if(r){if(a.row>=o){if(s<0&&a.row<o-s)return fn;a.row+=s}}else if(a.col>=o){if(s<0&&a.col<o-s)return fn;a.col+=s}return null!=n&&null!=i&&(a=a.relative(n,i,this.rel)),a}valid(){if(this.rel)throw new Error("valid() called on relative reference");let t=this.col,e=this.row;return!(isFinite(t)&&t<0||isFinite(e)&&e<0)}}class yn extends pn{constructor(t,e){super(),this.ref="range",t._hasSheet&&e._hasSheet&&t.sheet.toLowerCase()!=e.sheet.toLowerCase()&&(this.endSheet=e.sheet),this.topLeft=new mn(t.row,t.col,t.rel),this.bottomRight=new mn(e.row,e.col,e.rel),this.normalize()}clone(){return new yn(this.topLeft.clone(),this.bottomRight.clone()).setSheet(this.sheet,this.hasSheet())}_containsRange(t){return this._containsCell(t.topLeft)&&this._containsCell(t.bottomRight)}_containsCell(t){return t.sheet==this.sheet&&t.row>=this.topLeft.row&&t.col>=this.topLeft.col&&t.row<=this.bottomRight.row&&t.col<=this.bottomRight.col}contains(t){if(t instanceof Array){let e=this;return t.some((function(t){return Boolean(e.contains(t))}))}return t instanceof mn?this._containsCell(t):t instanceof yn&&this._containsRange(t)}_intersectRange(t){if(this.sheet!=t.sheet)return fn;let e=this.topLeft.col,n=this.topLeft.row,i=this.bottomRight.col,r=this.bottomRight.row,o=t.topLeft.col,s=t.topLeft.row,a=t.bottomRight.col,l=t.bottomRight.row;return e<=a&&o<=i&&n<=l&&s<=r?new yn(new mn(Math.max(n,s),Math.max(e,o)),new mn(Math.min(r,l),Math.min(i,a))).setSheet(this.sheet,this.hasSheet()):fn}intersect(t){return t instanceof mn?this._containsCell(t)?t:fn:t instanceof yn?this._intersectRange(t).simplify():t instanceof vn?t.intersect(this):fn}simplify(){return this.isCell()?new mn(this.topLeft.row,this.topLeft.col,this.topLeft.rel).setSheet(this.sheet,this.hasSheet()):this}normalize(){let t,e=this.topLeft,n=this.bottomRight,i=e.row,r=e.col,o=n.row,s=n.col,a=2&e.rel,l=1&e.rel,c=2&n.rel,h=1&n.rel,u=!1;return a===c&&l===h&&(i>o&&(u=!0,t=i,i=o,o=t,t=a,a=c,c=t),r>s&&(u=!0,t=r,r=s,s=t,t=l,l=h,h=t),u&&(this.topLeft=new mn(i,r,l|a),this.bottomRight=new mn(o,s,h|c))),this}print(t,e,n){if(n||this.absolute(t,e).valid()){let i=this.topLeft.print(t,e,n)+":"+this.bottomRight.print(t,e,n);return this.hasSheet()&&(i=un(this.sheet)+(this.endSheet?":"+un(this.endSheet):"")+"!"+i),i}return"#REF!"}absolute(t,e){return new yn(this.topLeft.absolute(t,e),this.bottomRight.absolute(t,e)).setSheet(this.sheet,this.hasSheet())}relative(t,e,n,i){return null==i&&(i=n),new yn(this.topLeft.relative(t,e,n),this.bottomRight.relative(t,e,i)).setSheet(this.sheet,this.hasSheet())}height(){if(this.topLeft.rel!=this.bottomRight.rel)throw new Error("Mixed relative/absolute references");return this.bottomRight.row-this.topLeft.row+1}width(){if(this.topLeft.rel!=this.bottomRight.rel)throw new Error("Mixed relative/absolute references");return this.bottomRight.col-this.topLeft.col+1}collapse(){return this.topLeft.toRangeRef()}leftColumn(){return new yn(this.topLeft,new mn(this.bottomRight.row,this.topLeft.col))}rightColumn(){return new yn(new mn(this.topLeft.row,this.bottomRight.col),this.bottomRight)}topRow(){return new yn(this.topLeft,new mn(this.topLeft.row,this.bottomRight.col))}bottomRow(){return new yn(new mn(this.bottomRight.row,this.topLeft.col),this.bottomRight)}toRangeRef(){return this}toRow(t){return t+=Math.max(0,this.topLeft.row),new yn(new mn(t,this.topLeft.col),new mn(t,this.bottomRight.col)).setSheet(this.sheet,this.hasSheet())}toColumn(t){return t+=Math.max(0,this.topLeft.col),new yn(new mn(this.topLeft.row,t),new mn(this.bottomRight.row,t)).setSheet(this.sheet,this.hasSheet())}toCell(t,e){return t+=Math.max(0,this.topLeft.row),e+=Math.max(0,this.topLeft.col),new mn(t,e,0).setSheet(this.sheet,this.hasSheet())}forEachRow(t){let e=this.topLeft.row,n=this.bottomRight.row,i=this.topLeft.col,r=this.bottomRight.col;for(let o=e;o<=n;o++)t(new yn(new mn(o,i),new mn(o,r)))}forEachColumn(t){let e=this.topLeft.row,n=this.bottomRight.row,i=this.topLeft.col,r=this.bottomRight.col;for(let o=i;o<=r;o++)t(new yn(new mn(e,o),new mn(n,o)))}intersecting(t){return t.filter((t=>t.toRangeRef().intersects(this)))}union(t,e){let n=this.intersecting(t),i=this.topLeft.row,r=this.topLeft.col,o=this.bottomRight.row,s=this.bottomRight.col,a=!1;n.forEach((function(t){(t=t.toRangeRef()).topLeft.row<i&&(a=!0,i=t.topLeft.row),t.topLeft.col<r&&(a=!0,r=t.topLeft.col),t.bottomRight.row>o&&(a=!0,o=t.bottomRight.row),t.bottomRight.col>s&&(a=!0,s=t.bottomRight.col),e&&e(t)}));let l=new yn(new mn(i,r),new mn(o,s));return a?l.union(t,e):l}resize(t){let e=Math.max.bind(Math,0);function n(t){return t||0}let i=this.topLeft.row+n(t.top),r=this.topLeft.col+n(t.left),o=this.bottomRight.row+n(t.bottom),s=this.bottomRight.col+n(t.right);return r<0&&s<0||i<0&&o<0?fn:i<=o&&r<=s?new yn(new mn(e(i),e(r)),new mn(e(o),e(s))):fn}move(t,e){return new yn(new mn(this.topLeft.row+t,this.topLeft.col+e),new mn(this.bottomRight.row+t,this.bottomRight.col+e))}first(){return this.topLeft.clone().setSheet(this.sheet,this.hasSheet())}isCell(){return!this.endSheet&&this.topLeft.eq(this.bottomRight)}toString(){return this.topLeft+":"+this.bottomRight}adjust(t,e,n,i,r,o,s){let a=this.topLeft.adjust(t,e,n,i,r,o,s),l=this.bottomRight.adjust(t,e,n,i,r,o,s);return a===fn&&l===fn?fn:(a===fn?(a=this.topLeft.absolute(t,e),r?a.row=o:a.col=o,null!=n&&null!=i&&(a=a.relative(n,i,this.topLeft.rel))):l===fn&&(l=this.bottomRight.absolute(t,e),r?l.row=o-1:l.col=o-1,null!=n&&null!=i&&(l=l.relative(n,i,this.bottomRight.rel))),new yn(a,l).setSheet(this.sheet,this.hasSheet()).simplify())}valid(){return this.topLeft.valid()&&this.bottomRight.valid()}}class vn extends pn{constructor(t){super(),this.refs=t,this.length=t.length}clone(){return new vn(this.refs.slice())}intersect(t){let e=[];for(let n=0;n<this.length;++n){let i=t.intersect(this.refs[n]);i!==fn&&e.push(i)}return e.length>0?new vn(e).simplify():fn}simplify(){let t=new vn(this.refs.reduce((function(t,e){return(e=e.simplify())!==fn&&t.push(e),t}),[]));return t.empty()?fn:t.single()?t.refs[0]:t}absolute(t,e){return new vn(this.refs.map((function(n){return n.absolute(t,e)})))}forEach(t,e){this.refs.forEach((function(n){n instanceof vn?n.forEach(t,e):t.call(e,n)}),e)}toRangeRef(){return this.refs[0].toRangeRef()}contains(t){return this.refs.some((function(e){return e.contains(t)}))}map(t,e){let n=[];return this.forEach((function(i){n.push(t.call(e,i))})),new vn(n)}first(){return this.refs[0].first()}lastRange(){return this.refs[this.length-1]}size(){return this.length}single(){return 1==this.length}empty(){return 0===this.length}isCell(){return this.single()&&this.refs[0].isCell()}rangeAt(t){return this.refs[t]}nextRangeIndex(t){return t===this.length-1?0:t+1}previousRangeIndex(t){return 0===t?this.length-1:t-1}concat(t){return new vn(this.refs.concat([t]))}print(t,e,n){return this.refs.map((function(i){return i.print(t,e,n)})).join(",")}replaceAt(t,e){let n=this.refs.slice();return n.splice(t,1,e),new vn(n)}leftColumn(){return this.map((function(t){return t.leftColumn()}))}rightColumn(){return this.map((function(t){return t.rightColumn()}))}topRow(){return this.map((function(t){return t.topRow()}))}bottomRow(){return this.map((function(t){return t.bottomRow()}))}forEachRow(t){this.forEach((function(e){e.forEachRow(t)}))}forEachColumn(t){this.forEach((function(e){e.forEachColumn(t)}))}adjust(t,e,n,i,r,o,s){return this.map((function(a){return a.adjust(t,e,n,i,r,o,s)})).simplify()}toString(){return this.refs.map((function(t){return t.toString()})).join(", ")}valid(){for(let t=this.refs.length;--t>=0;)if(this.refs[t].valid())return!1;return!0}renameSheet(t,e){this.refs.forEach((function(n){n.renameSheet(t,e)}))}}const bn=new mn(0,0),wn=new yn(new mn(0,0),new mn(1/0,1/0));wn.print=function(){return"#SHEET"};const xn={view:{nameBox:"Name Box",errors:{modifyMerged:"Cannot change part of a merged cell.",openUnsupported:"Unsupported format. Please select an .xlsx file.",shiftingNonblankCells:"Cannot insert cells due to data loss possibility. Select another insert location or delete the data from the end of your worksheet.",insertColumnWhenRowIsSelected:"Cannot insert column when all columns are selected.",insertRowWhenColumnIsSelected:"Cannot insert row when all rows are selected.",filterRangeContainingMerges:"Cannot create a filter within a range containing merges",sortRangeContainingMerges:"Cannot sort a range containing merges",cantSortMultipleSelection:"Cannot sort multiple selection",cantSortNullRef:"Cannot sort empty selection",cantSortMixedCells:"Cannot sort range containing cells of mixed shapes",validationError:"The value that you entered violates the validation rules set on the cell.",cannotModifyDisabled:"Cannot modify disabled cells.",insertRowBelowLastRow:"Cannot insert row below the last row.",insertColAfterLastCol:"Cannot insert column to the right of the last column."},tabs:{home:"Home",insert:"Insert",data:"Data"}},menus:{cut:"Cut",copy:"Copy",paste:"Paste",merge:"Merge",unmerge:"Unmerge",delete:"Delete",hide:"Hide",unhide:"Unhide",bringToFront:"Bring to front",sendToBack:"Send to back"},workbook:{defaultSheetName:"Sheet"}},_n={name:"Spreadsheet",toolbar:!0,sheetsbar:!0,rows:200,columns:50,rowHeight:20,columnWidth:64,headerHeight:20,headerWidth:32,excel:{fileName:"Workbook.xlsx",forceProxy:!1,proxyURL:""},messages:xn,pdf:{area:"workbook",fileName:"Workbook.pdf",proxyURL:"",paperSize:"a4",landscape:!0,margin:null,title:null,author:null,subject:null,keywords:null,creator:"Kendo UI PDF Generator",date:null},defaultCellStyle:{fontFamily:"Arial",fontSize:12},useCultureDecimals:!1,locale:"en"},Sn={recalc:!0,selection:!0,activeCell:!0,layout:!0,sheetSelection:!0,resize:!0,editorChange:!1,editorClose:!1},Cn={INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123,NUMPAD_PLUS:107,NUMPAD_MINUS:109,NUMPAD_DOT:110,B:66,I:73,U:85},kn=new RegExp("[\\u0041-\\u005A\\u0061-\\u007A\\u00AA\\u00B5\\u00BA\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function An(t){let e=Object.create(null);return function(){let n="";for(let t=arguments.length;--t>=0;)n+=":"+arguments[t];return n in e?e[n]:e[n]=t.apply(this,arguments)}}function En(t,e){try{return t.call(e,(function(t){throw new n(t)}))}catch(t){if(t instanceof n)return t.value;throw t}function n(t){this.value=t}}const Tn=function(t,e){let n,i,r,o,s=e||"d",a=1;for(i=0,r=t.length;i<r;i++)o=t[i],""!==o&&(n=o.indexOf("["),0!==n&&(-1===n?o="."+o:(a++,o="."+o.substring(0,n)+" || {})"+o.substring(n))),a++,s+=o+(i<r-1?" || {})":")"));return new Array(a).join("(")+s},Mn={};function On(t,e,n){return"string"==typeof e&&(n=e,e=!1),n=n||"d",(t=t||"")&&"["!==t.charAt(0)&&(t="."+t),e?(t=(t=t.replace(/"([^.]*)\.([^"]*)"/g,'"$1_$DOT$_$2"')).replace(/'([^.]*)\.([^']*)'/g,"'$1_$DOT$_$2'"),t=(t=Tn(t.split("."),n)).replace(/_\$DOT\$_/g,".")):t=n+t,t}function In(t){let e=1,n=arguments.length;for(e=1;e<n;e++)Fn(t,arguments[e]);return t}function Dn(t){return"function"==typeof t}function Fn(t,e){let n,i,r,o,s;for(n in e)"__proto__"!==n&&"constructor"!==n&&(i=e[n],r=typeof i,o="object"===r&&null!==i?i.constructor:null,!o||o===Array||o===RegExp||Dn(window.ArrayBuffer)&&o===ArrayBuffer||i instanceof HTMLElement?"undefined"!==r&&(t[n]=i):i instanceof Date?t[n]=new Date(i.getTime()):Dn(i.clone)?t[n]=i.clone():(s=t[n],t[n]="object"==typeof s&&s||{},Fn(t[n],i)));return t}const Pn={},Rn=function(t){if(!isNaN(Pn._scrollbar)&&!t)return Pn._scrollbar;let e,n=document.createElement("div");return n.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both;display:block",n.innerHTML="&nbsp;",document.body.appendChild(n),Pn._scrollbar=e=n.offsetWidth-n.scrollWidth,document.body.removeChild(n),e},Ln=function(t){const e=document.createElement("template");return e.innerHTML=t,e.content};const Nn=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)};class Bn{constructor(t){if(t instanceof Bn)return t;this.code=t}toString(){return"#"+this.code+("NAME"===this.code?"?":"!")}}let jn={};const zn=t=>{if(!t)return jn;jn=t},$n=()=>zn().localeInfo();function Hn(){this.node=null}function Un(){}Hn.prototype={remove:function(){this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.attr={}},attr:{},text:function(){return""}},Un.prototype={nodeName:"#null",attr:{style:{}},children:[],remove:function(){}};let Vn=new Un;function Wn(t,e,n){this.nodeName=t,this.attr=e||{},this.children=n||[]}function qn(t){this.nodeValue=String(t)}function Kn(t){this.html=t}function Xn(t){return new Kn(t)}function Gn(t,e,n){return new Wn(t,e,n)}function Yn(t){return new qn(t)}function Jn(t){this.root=t,this.children=[]}Wn.prototype=new Hn,Wn.prototype.appendTo=function(t){let e=document.createElement(this.nodeName),n=this.children;for(let t=0;t<n.length;t++)n[t].render(e,Vn);return t.appendChild(e),e},Wn.prototype.render=function(t,e){let n;if(e.nodeName!==this.nodeName)e.remove(),n=this.appendTo(t);else{let i;n=e.node;let r=this.children,o=r.length,s=e.children,a=s.length;if(Math.abs(a-o)>2)return void this.render({appendChild:function(n){t.replaceChild(n,e.node)}},Vn);for(i=0;i<o;i++)r[i].render(n,s[i]||Vn);for(i=o;i<a;i++)s[i].remove()}this.node=n,this.syncAttributes(e.attr),this.removeAttributes(e.attr)},Wn.prototype.syncAttributes=function(t){let e=this.attr;for(let n in e){let i=e[n],r=t[n];"style"===n?this.setStyle(i,r):i!==r&&this.setAttribute(n,i,r)}},Wn.prototype.setStyle=function(t,e){let n,i=this.node;if(e)for(n in t)t[n]!==e[n]&&(i.style[n]=t[n]);else for(n in t)i.style[n]=t[n]},Wn.prototype.removeStyle=function(t){let e=this.attr.style||{},n=this.node;for(let i in t)void 0===e[i]&&(n.style[i]="")},Wn.prototype.removeAttributes=function(t){let e=this.attr;for(let n in t)"style"===n?this.removeStyle(t.style):void 0===e[n]&&this.removeAttribute(n)},Wn.prototype.removeAttribute=function(t){let e=this.node;"style"===t?e.style.cssText="":"className"===t?e.className="":e.removeAttribute(t)},Wn.prototype.setAttribute=function(t,e){let n=this.node;void 0!==n[t]?n[t]=e:n.setAttribute(t,e)},Wn.prototype.text=function(){let t="";for(let e=0;e<this.children.length;++e)t+=this.children[e].text();return t},qn.prototype=new Hn,qn.prototype.nodeName="#text",qn.prototype.render=function(t,e){let n;e.nodeName!==this.nodeName?(e.remove(),n=document.createTextNode(this.nodeValue),t.appendChild(n)):(n=e.node,this.nodeValue!==e.nodeValue&&n.parentNode&&(n.nodeValue=this.nodeValue)),this.node=n},qn.prototype.text=function(){return this.nodeValue},Kn.prototype={nodeName:"#html",attr:{},remove:function(){for(let t=0;t<this.nodes.length;t++){let e=this.nodes[t];e.parentNode&&e.parentNode.removeChild(e)}},render:function(t,e){if(e.nodeName!==this.nodeName||e.html!==this.html){e.remove();let n=t.lastChild;!function(t,e){const n=document.createElement("div");n.innerHTML=e;for(;n.firstChild;)t.appendChild(n.firstChild)}(t,this.html),this.nodes=[];for(let e=n?n.nextSibling:t.firstChild;e;e=e.nextSibling)this.nodes.push(e)}else this.nodes=e.nodes.slice(0)}},Jn.prototype={html:Xn,element:Gn,text:Yn,render:function(t){let e,n,i=this.children;for(e=0,n=t.length;e<n;e++){let n=i[e];n?n.node&&n.node.parentNode||(n.remove(),n=Vn):n=Vn,t[e].render(this.root,n)}for(e=n;e<i.length;e++)i[e].remove();this.children=t}};const Zn={html:Xn,text:Yn,element:Gn,Tree:Jn,Node:Hn};var Qn={runtime:{}},ti=Object.create(null);Qn.runtime.FUNCS=ti;const ei=function(t,e,n,i,r){const o={};return o.spreadsheet={calc:t,CalcError:e,Ref:n,CellRef:i,RangeRef:r},o.culture=()=>$n(),o}(Qn,Bn,pn,mn,yn);class ni{constructor(t,e,n,i){this.callback=t,this.formula=e,this.ss=n,this.parent=i}resolve(t){var e=this;t instanceof pn?e.resolveCells([t],(function(){e._resolve(t)})):e._resolve(t)}error(t){return new Bn(t)}_resolve(t){var e;t=void 0===t?null:Array.isArray(t)?this.asMatrix(t):"number"==typeof(e=t)?li(e):e;var n=this.formula;n.arrayFormulaRange?t=this.asMatrix(t)||this.asMatrix([[t]]):t instanceof yn&&(t=this._arrayArg(t)),n.value=t,this.ss.onFormula(n)&&this.callback&&this.callback.call(n,t)}resolveCells(t,e){var n=this,i=[];if(function t(e){for(var i=0;i<e.length;++i){var r=e[i];r instanceof pn&&s(n.getRefCells(r)),Array.isArray(r)&&t(r)}}(t),!i.length)return e.call(n);for(var r=i.length,o=0;o<i.length;++o)i[o].exec(n.ss,(function(){--r||e.call(n)}),n);function s(t){for(var e=0;e<t.length;++e){var n=t[e];n.formula&&i.push(n.formula)}return!0}}cellValues(t,e){for(var n=[],i=0;i<t.length;++i){var r=t[i];r instanceof pn?(r=this.getRefData(r,e),n=n.concat(r)):Array.isArray(r)?n=n.concat(this.cellValues(r,e)):r instanceof ii?n=n.concat(this.cellValues(r.data,e)):n.push(r)}return n}fetchName(t,e){var n=this.formula,i=this.ss.nameValue(t,n.sheet,n.row,n.col);if(i instanceof oi){i=i.clone(n.sheet,n.row,n.col,!0);var r=new Mo(this.ss.workbook);i.exec(r,e,this)}else i instanceof pn&&((i=i.absolute(n.row,n.col))instanceof yn&&this.ss.isMerged(i)&&(i=i.topLeft),i.sheet||(i.sheet=n.sheet)),e(null==i?new Bn("NAME"):i)}force(t){return t instanceof pn?this.getRefData(t):t}func(t,e,n){t=t.toLowerCase();var i=ti[t];if(i)return i.call(this,e,n);e(new Bn("NAME"))}bool(t){return t instanceof pn&&(t=this.getRefData(t)),"string"==typeof t?"true"==t.toLowerCase():"number"==typeof t?0!==t:"boolean"==typeof t?t:null!=t}_arrayArg(t){var e=this.formula;return!e.arrayFormulaRange&&t instanceof yn?1==t.height()&&e.col>=t.topLeft.col&&e.col<=t.bottomRight.col?this.getRefData(new mn(t.topLeft.row,e.col).setSheet(t.sheet)):1==t.width()&&e.row>=t.topLeft.row&&e.row<=t.bottomRight.row?this.getRefData(new mn(e.row,t.topLeft.col).setSheet(t.sheet)):new Bn("VALUE"):this.asMatrix(t)}asMatrix(t){if(t instanceof ii)return t;var e=this;if(t instanceof yn){var n=t.topLeft,i=n.row,r=n.col,o=e.getRefCells(t),s=new ii(e);return isFinite(t.width())&&(s.width=t.width()),isFinite(t.height())&&(s.height=t.height()),isFinite(i)||(i=0),isFinite(r)||(r=0),o.forEach((function(t){s.set(t.row-i,t.col-r,t.value)})),s}if(Array.isArray(t)&&t.length>0){s=new ii(e);var a=0;return t.forEach((function(t){var n=0,i=1;t.forEach((function(t){var r=t instanceof yn;t instanceof pn&&!r&&(t=e.getRefData(t)),(r||Array.isArray(t))&&(t=e.asMatrix(t)),t instanceof ii?(t.each((function(t,e,i){s.set(a+e,n+i,t)})),i=Math.max(i,t.height),n+=t.width):("string"==typeof t&&t.length&&!isNaN(t)&&(t=Number(t)),s.set(a,n++,t))})),a+=i})),s}}getRefCells(t,e,n){var i=this.formula;return this.ss.getRefCells(t,e,i.sheet,i.row,i.col,n)}getRefData(t,e){var n=this.formula;return this.ss.getData(t,n.sheet,n.row,n.col,e)}workbook(){return this.ss.workbook}}class ii{constructor(t){this.context=t,this.height=0,this.width=0,this.data=[]}clone(){var t=new ii(this.context);return t.height=this.height,t.width=this.width,t.data=this.data.map((function(t){return t.slice()})),t}get(t,e){var n=this.data[t],i=n?n[e]:null;return i instanceof pn?this.context.getRefData(i):i}getNA(t,e){return t<this.height&&e<this.width?this.get(t,e):new Bn("N/A")}set(t,e,n){var i=this.data[t];null==i&&(i=this.data[t]=[]),i[e]=n,t>=this.height&&(this.height=t+1),e>=this.width&&(this.width=e+1)}each(t,e){for(var n=0;n<this.height;++n)for(var i=0;i<this.width;++i){var r=this.get(n,i);if((e||null!=r)&&void 0!==(r=t.call(this.context,r,n,i)))return r}}map(t,e){var n=new ii(this.context);return this.each((function(e,i,r){n.set(i,r,t.call(this,e,i,r))}),e),n}eachRow(t){for(var e=0;e<this.height;++e){var n=t.call(this.context,e);if(void 0!==n)return n}}eachCol(t){for(var e=0;e<this.width;++e){var n=t.call(this.context,e);if(void 0!==n)return n}}mapRow(t){var e=new ii(this.context);return this.eachRow((function(n){e.set(n,0,t.call(this.context,n))})),e}mapCol(t){var e=new ii(this.context);return this.eachCol((function(n){e.set(0,n,t.call(this.context,n))})),e}toString(){return JSON.stringify(this.data)}transpose(){var t=new ii(this.context);return this.each((function(e,n,i){t.set(i,n,e)})),t}unit(t){this.width=this.height=t;for(var e=this.data=new Array(t),n=t;--n>=0;)for(var i=e[n]=new Array(t),r=t;--r>=0;)i[r]=n==r?1:0;return this}multiply(t){for(var e=this,n=new ii(e.context),i=0;i<e.height;++i)for(var r=0;r<t.width;++r){for(var o=0,s=0;s<e.width;++s){var a=e.get(i,s),l=t.get(s,r);if("number"!=typeof a||"number"!=typeof l)throw new Bn("VALUE");o+=a*l}n.set(i,r,o)}return n}adds(t,e){for(var n=this,i=new ii(n.context),r=e?-1:1,o=0;o<n.height;++o)for(var s=0;s<n.width;++s){var a=n.get(o,s),l=t.get(o,s);i.set(o,s,a+r*l)}return i}determinant(){var t,e,n,i,r=this.clone().data,o=r.length,s=1;for(t=0;t<o;t++){for(e=t;e<o&&!r[e][t];e++);if(e==o)return 0;if(e!=t)for(s=-s,i=t;i<o;i++){var a=r[t][i];r[t][i]=r[e][i],r[e][i]=a}for(n=t+1;n<o;n++)for(i=t+1;i<o;i++)r[n][i]-=r[t][i]*r[n][t]/r[t][t];s*=r[t][t]}return s}inverse(){for(var t,e=this.width,n=this.augment(new ii(this.context).unit(e)),i=n.data,r=0;r<e;++r){var o=ri(r,e,(function(t){return i[t][r]}));if(!i[o][r])return null;r!=o&&(t=i[r],i[r]=i[o],i[o]=t);for(var s=r+1;s<e;++s){for(var a=r+1;a<2*e;++a)i[s][a]-=i[r][a]*i[s][r]/i[r][r];i[s][r]=0}}for(s=0;s<e;++s){var l=i[s][s];for(a=0;a<2*e;++a)i[s][a]/=l}for(r=e;--r>=0;)for(s=r;--s>=0;)if(i[s][r])for(a=2*e;--a>=e;)i[s][a]-=i[r][a]*i[s][r];return n.slice(0,e,e,e)}augment(t){var e=this.clone(),n=e.width;return t.each((function(t,i,r){e.set(i,r+n,t)})),e}slice(t,e,n,i){for(var r=new ii(this.context),o=0;o<n;++o)for(var s=0;s<i;++s)r.set(o,s,this.get(t+o,e+s));return r}}function ri(t,e,n){for(var i=n(t),r=t;++t<e;){var o=n(t);o>i&&(i=o,r=t)}return r}let oi=class t{constructor(t,e,n,i,r,o,s){this.refs=t,this.handler=e,this.print=n,this.absrefs=null,this.sheet=i,this.row=r,this.col=o,this.onReady=[],this.pending=!1,this.arrayFormulaRange=s}setArrayFormulaRange(t){this.arrayFormulaRange=t.clone().setSheet(this.sheet)}clone(e,n,i,r){var o=e.toLowerCase(),s=this.refs,a=this.arrayFormulaRange;return(r||o!=this.sheet.toLowerCase())&&(s=s.map((function(t){return t.hasSheet()||t.sheet&&t.sheet.toLowerCase()==o||(t=t.clone().setSheet(e)),t})),a&&(a=a.clone().setSheet(e))),new t(s,this.handler,this.print,e,n,i,a)}deepClone(){var e=this.refs.map((function(t){return t.clone()}));return new t(e,this.handler,this.print,this.sheet,this.row,this.col,this.arrayFormulaRange)}resolve(t){this.pending=!1,this.onReady.forEach((function(e){e(t)}))}exec(t,e,n){if("value"in this)e&&e(this.value);else{e&&this.onReady.push(e);for(var i=new ni(this.resolve,this,t,n),r=0;n;){if(n.formula===this)return this.pending=!1,void i.resolve(new Bn("CIRCULAR"));n=n.parent,++r}if(this.pending)return;this.pending=!0;var o=function(){this.absrefs||(this.absrefs=this.refs.map((function(t){return t.absolute(this.row,this.col)}),this)),this.handler.call(i)}.bind(this);r<20?o():setTimeout(o,0)}}reset(){this.onReady=[],this.pending=!1,delete this.value}renameSheet(t,e){t=t.toLowerCase(),this.absrefs=null,this.sheet.toLowerCase()==t&&(this.sheet=e),this.refs.forEach((function(n){n.renameSheet(t,e)}))}adjust(e,n,i,r){e=e.toLowerCase();var o=this.row,s=this.col,a=this.sheet.toLowerCase(),l=!1;a==e&&("row"==n&&o>=i&&(this.row+=r,l=!0),"col"==n&&s>=i&&(this.col+=r,l=!0));var c=this.row,h=this.col;this.absrefs=null;var u=this.refs,d=l;this.refs=u.map((function(t){var e=f(t);return d||si(e,t)||(d=!0),e}));var p=this.arrayFormulaRange;if(p&&(this.arrayFormulaRange=f(p),d||si(p,this.arrayFormulaRange)||(d=!0)),d)return new t(u,this.handler,this.print,this.sheet,o,s,p);function f(t){return t===fn?t:t.sheet.toLowerCase()!=e?(l&&("row"==n&&o>=i&&(t=t.relative(r,0)),"col"==n&&s>=i&&(t=t.relative(0,r))),t):t.adjust(o,s,c,h,"row"==n,i,r)}}toString(){return this.print(this.row,this.col)}};function si(t,e){if(t.constructor!==e.constructor)return!1;if(t instanceof mn)return t.sheet==e.sheet&&t.row==e.row&&t.col==e.col&&t.rel==e.rel;if(t instanceof yn)return si(t.topLeft,e.topLeft)&&si(t.bottomRight,e.bottomRight)&&t.endSheet==e.endSheet;if(t instanceof vn){var n=t.refs.length;if(n!=e.refs.length)return!1;for(;--n>=0;)if(!si(t.refs[n],e.refs[n]))return!1}return!0}function ai(t,e){var n,i,r,o="function arrayArgs(args) { var xargs = [], width = 0, height = 0, arrays = [], i = 0; ",s="function resolve(args, callback) { var toResolve = [], i = 0; ",a="'use strict'; function check(args) { var stack = [], tmp, xargs = [], i = 0, m, err = 'VALUE'; ",l=!1,c=!1,h=!1;return a+=e.map((function t(e){n=e[0];var r="{ ";if(Array.isArray(n))o+="while (i < args.length) { ",s+="while (i < args.length) { ",r+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ",r+="while (i < args.length) { ",r+=e.map(t).join(""),r+="} ",r+="xargs = stack.pop(); ",s+="} ",o+="} ";else if("+"==n)o+="while (i < args.length) { ",s+="while (i < args.length) { ",r+="if (i >= args.length) return new CalcError('N/A'); ",r+="xargs.push(tmp = []); stack.push(xargs); xargs = tmp; ",r+="do { ",r+=e.slice(1).map(t).join(""),r+="} while (i < args.length); ",r+="xargs = stack.pop(); ",s+="} ",o+="} ";else if("?"==n)r+="if (!("+p(e[1])+")) return new CalcError(err); ";else{var a=e[1];if(Array.isArray(a)&&/^#?collect/.test(a[0])){var l=/!$/.test(a[0]),d=a[2];u(),r+="try {var $"+n+" = this.cellValues(args.slice(i",d&&(r+=", i + "+d),r+=")"+(l?",true":"")+").reduce(function(ret, $"+n+"){ ","#"!=a[0].charAt(0)&&(r+="if ($"+n+" instanceof CalcError) throw $"+n+"; "),r+="if ("+p(a[1])+") ret.push($"+n+"); ",r+="return ret; ",r+="}.bind(this), []); ",r+=d?"i += "+d+"; ":"i = args.length; ",r+="xargs.push($"+n+")} catch(ex) { if (ex instanceof CalcError) return ex; throw ex; } ",s+="toResolve.push(args.slice(i)); "}else if("rest"==a)r+="xargs.push(args.slice(i)); i = args.length; ";else{(c=/^\*/.test(n))&&(h=!0,n=n.substr(1)),r+="var $"+n+" = args[i++]; ";var f=!1;/!$/.test(a)?(a=a.substr(0,a.length-1),f=!0):r+="if ($"+n+" instanceof CalcError) return $"+n+"; ",r+=function(t,e){i=!1;var r="if (!("+p(t)+")) { ";i&&!e&&(r+=" if ($"+n+" instanceof CalcError) return $"+n+"; ");i||(s+="i++; ");o+=c?"var $"+n+" = this._arrayArg(args[i]); if ($"+n+") { xargs.push($"+n+"); width = Math.max(width, $"+n+".width); height = Math.max(height, $"+n+".height); arrays.push(true) } else { xargs.push(args[i]); arrays.push(false); } i++; ":"xargs.push(args[i++]); arrays.push(false); ";return r+="return new CalcError(err); } "}(a,f)+"xargs.push($"+n+"); "}}return r+="} "})).join(""),a+="if (i < args.length) return new CalcError('N/A'); ",a+="return xargs; } ",o+="return { args: xargs, width: width, height: height, arrays: arrays }; } ",l?(s+="this.resolveCells(toResolve, callback); } ",r=new Function("kendo","CalcError","round",a+s+o+" return { resolve: resolve, check: check, arrayArgs: arrayArgs };")):r=new Function("kendo","CalcError","round",a+" return { check: check };"),r=r(ei,Bn,li),h||delete r.arrayArgs,r;function u(){return i?"$"+n:(l=!0,i=!0,s+="toResolve.push(args[i++]); ","($"+n+" = this.force($"+n+"))")}function d(t){return"("+(t?"(typeof "+u()+" == 'number' ? ($"+n+" = round($"+n+"), true) : false) || ":"(typeof "+u()+" == 'number') || ")+"(typeof $"+n+" == 'boolean' ? ($"+n+" = +$"+n+", true) : false) || (typeof $"+n+" == 'string' && !/^(?:=|true|false)/i.test($"+n+") ? (tmp = kendo.spreadsheet.calc.parse(0, 0, 0, $"+n+"), /^date|number|percent$/.test(tmp.type) ? ($"+n+" = +tmp.value, true) : false) : false))"}function p(t){if(Array.isArray(t)){if("or"==t[0])return"("+t.slice(1).map(p).join(") || (")+")";if("and"==t[0])return"("+t.slice(1).map(p).join(") && (")+")";if("values"==t[0])return"("+t.slice(1).map((function(t){return u()+" === "+t})).join(") || (")+")";if("null"==t[0])return"("+p("null")+" ? (($"+n+" = "+t[1]+"), true) : false)";if("between"==t[0]||"[between]"==t[0])return"("+u()+" >= "+t[1]+" && $"+n+" <= "+t[2]+" ? true : ((err = 'NUM'), false))";if("(between)"==t[0])return"("+u()+" > "+t[1]+" && $"+n+" < "+t[2]+" ? true : ((err = 'NUM'), false))";if("(between]"==t[0])return"("+u()+" > "+t[1]+" && $"+n+" <= "+t[2]+" ? true : ((err = 'NUM'), false))";if("[between)"==t[0])return"("+u()+" >= "+t[1]+" && $"+n+" < "+t[2]+" ? true : ((err = 'NUM'), false))";if("assert"==t[0]){var e=t[2]||"N/A";return"(("+t[1]+") ? true : (err = "+JSON.stringify(e)+", false))"}if("not"==t[0])return"!("+p(t[1])+")";throw new Error("Unknown array type condition: "+t[0])}if("number"==t||"datetime"==t)return d(!0);if("number!"==t)return"(typeof "+u()+" == 'number' ? ($"+n+" = round($"+n+"), true) : false)";if("integer"==t||"date"==t)return"("+d()+" && (($"+n+" |= 0), true))";if("divisor"==t)return"("+d(!0)+" && ($"+n+" == 0 ? ((err = 'DIV/0'), false) : true))";if("number+"==t)return"("+d(!0)+" && ($"+n+" >= 0 ? true : ((err = 'NUM'), false)))";if("integer+"==t)return"("+d()+" && (($"+n+" |= 0) >= 0 ? true : ((err = 'NUM'), false)))";if("number++"==t)return"("+d(!0)+" && ($"+n+" > 0 ? true : ((err = 'NUM'), false)))";if("integer++"==t)return"("+d()+" && (($"+n+" |= 0) > 0 ? true : ((err = 'NUM'), false)))";if("string"==t)return"((typeof "+u()+" == 'string' || typeof $"+n+" == 'boolean' || typeof $"+n+" == 'number') ? ($"+n+" += '', true) : ($"+n+" === undefined ? (($"+n+" = ''), true) : false))";if("boolean"==t)return"(typeof "+u()+" == 'boolean')";if("logical"==t)return"(typeof "+u()+" == 'boolean' || (typeof $"+n+" == 'number' ? ($"+n+" = !!$"+n+", true) : false))";if("matrix"==t)return u(),"((m = this.asMatrix($"+n+")) ? ($"+n+" = m) : false)";if("#matrix"==t)return"((m = this.asMatrix($"+n+")) ? ($"+n+" = m) : false)";if("ref"==t)return"($"+n+" instanceof kendo.spreadsheet.Ref)";if("area"==t)return"($"+n+" instanceof kendo.spreadsheet.CellRef || $"+n+" instanceof kendo.spreadsheet.RangeRef)";if("cell"==t)return"($"+n+" instanceof kendo.spreadsheet.CellRef)";if("null"==t)return"("+u()+" == null)";if("anyvalue"==t)return"("+u()+" != null && i <= args.length)";if("forced"==t)return"("+u()+", i <= args.length)";if("anything"==t)return"(i <= args.length)";if("blank"==t)return"("+u()+" == null || $"+n+" === '')";throw new Error("Can't check for type: "+t)}}function li(t){return t===parseInt(t,10)?t:+t.toPrecision(16)}function ci(t,e,n){if(n instanceof Bn)return n;try{return e.apply(t,n)}catch(t){if(t instanceof Bn)return t;throw t}}function hi(t,e){return t=t.toLowerCase(),ti[t]=e,{args:function(n,i){var r=ai(0,n);i&&(r.arrayArgs&&window.console.log(r.arrayArgs.toString()),r.resolve&&window.console.log(r.resolve.toString()),r.check&&window.console.log(r.check.toString()));var o,s,a,l,c=ti[t]=(o=e,s=r.resolve,a=r.check,l=r.arrayArgs,function(t,e){function n(){if(l){var n=l.call(this,e);if(e=n.args,n.width>0&&n.height>0){for(var i=new ii(this),r=0;r<n.height;++r)for(var s=0;s<n.width;++s){for(var c=[],h=0;h<e.length;++h)n.arrays[h]?c[h]=e[h].getNA(r,s):c[h]=e[h];c=a.call(this,c),i.set(r,s,ci(this,o,c))}return t(i)}}c=a.call(this,e),t(ci(this,o,c))}s?s.call(this,e,n):n.call(this)});return c.kendoSpreadsheetArgs=n,this},argsAsync:function(n,i){var r=ai(0,n);i&&(r.arrayArgs&&window.console.log(r.arrayArgs.toString()),r.resolve&&window.console.log(r.resolve.toString()),r.check&&window.console.log(r.check.toString()));var o,s,a,l,c=ti[t]=(o=e,s=r.resolve,a=r.check,l=r.arrayArgs,function(t,e){function n(){if(l){var n=l.call(this,e);if(e=n.args,n.width>0&&n.height>0){for(var i=new ii(this),r=n.width*n.height,s=function(e,n){return function(o){if(i.set(e,n,o),0==--r)return t(i)}},c=0;c<n.height&&r>0;++c)for(var h=0;h<n.width&&r>0;++h){for(var u=[],d=0;d<e.length;++d)n.arrays[d]?u[d]=e[d].getNA(c,h):u[d]=e[d];if((u=a.call(this,u))instanceof Bn){if(i.set(c,h,u),0==--r)return t(i)}else u.unshift(s(c,h)),o.apply(this,u)}return}}(n=a.call(this,e))instanceof Bn?t(n):(n.unshift(t),o.apply(this,n))}s?s.call(this,e,n):n.call(this)});return c.kendoSpreadsheetArgs=n,this}}}function ui(t,e,n){return(1461*(t+4800+((++e-14)/12|0))/4|0)+(367*(e-2-12*((e-14)/12|0))/12|0)-(3*((t+4900+((e-14)/12|0))/100|0)/4|0)+n-32075}ti.if=function(t,e){var n=this,i=e[0],r=e[1],o=e[2];this.resolveCells([i],(function(){var e=n.asMatrix(i);e?r((function(i){o((function(r){var o=n.asMatrix(i),s=n.asMatrix(r);t(e.map((function(t,e,a){return t instanceof Bn?t:n.bool(t)?o?o.get(e,a):i:s?s.get(e,a):r})))}))})):(i=this.force(i))instanceof Bn?t(i):n.bool(i)?r(t):o(t)}))},ti["φ"]=function(t){t((1+Math.sqrt(5))/2)};var di=ui(1900,0,-1),pi=[31,28,31,30,31,30,31,31,30,31,30,31],fi=[[0,31,59,90,120,151,181,212,243,273,304,334],[0,31,60,91,121,152,182,213,244,274,305,335]];function gi(t){return t%4?0:t%100?1:t%400?0:1}function mi(t){return gi(t)?366:365}function yi(t,e){return gi(t)&&1==e?29:pi[e]}function vi(t){return n=(e=(0|t)+di)+68569,a=(n=(n-=(146097*(i=4*n/146097|0)+3)/4|0)-(1461*(o=4e3*(n+1)/1461001|0)/4|0)+31)-(2447*(r=80*n/2447|0)/80|0),s=r+2-12*(n=r/11|0),{year:l=100*(i-49)+o+n,month:--s,date:a,day:(e+1)%7,ord:fi[gi(l)][s]+a};var e,n,i,r,o,s,a,l}function bi(t,e,n){return ui(t,e,n)-di}var wi=6e4,xi=60*wi,_i=24*xi;function Si(t){var e=t-(0|t);e<0&&e++;var n=Math.round(_i*e),i=Math.floor(n/xi);n-=i*xi;var r=Math.floor(n/wi);n-=r*wi;var o=Math.floor(n/1e3);return{hours:i,minutes:r,seconds:o,milliseconds:n-=1e3*o}}function Ci(t){var e=vi(t),n=Si(t);return new Date(e.year,e.month,e.date,n.hours,n.minutes,n.seconds,n.milliseconds)}function ki(t,e,n,i){return(t+(e+(n+i/1e3)/60)/60)/24}function Ai(t){var e=ki(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());return(t=bi(t.getFullYear(),t.getMonth(),t.getDate()))<0?t-1+e:t+e}function Ei(t,e){var n=ti[e];if(!n)throw new Error("Function "+e+" is not yet defined");n.kendoSpreadsheetAliases||(n.kendoSpreadsheetAliases=[e]),n.kendoSpreadsheetAliases.push(t),ti[t]=n}Qn.runtime.CalcError=Bn,Qn.runtime.Formula=oi,Qn.runtime.Matrix=ii,Qn.runtime.packDate=bi,Qn.runtime.unpackDate=vi,Qn.runtime.packTime=ki,Qn.runtime.unpackTime=Si,Qn.runtime.serialToDate=Ci,Qn.runtime.dateToSerial=Ai,Qn.runtime.daysInMonth=yi,Qn.runtime.validDate=function(t,e,n){return e>=1&&e<=12&&n>=1&&n<=yi(t,e-1)},Qn.runtime.isLeapYear=gi,Qn.runtime.daysInYear=mi,Qn.runtime.parseDate=function(t,e){e&&(e=zo.makeDateFormat(e));const n=zn().parseDate;return n(t,e)||n(t)||n(t,["MMMM dd yyyy","MMMM dd yy","MMM dd yyyy","MMM dd yy","dd MMMM yyyy","dd MMMM yy","dd MMM yyyy","dd MMM yy","MMMM dd, yyyy","MMMM dd, yy","MMM dd, yyyy","MMM dd, yy","MMMM dd","MMM dd","MMMM yyyy","MMM yyyy","dd MMMM","dd MMM"])},Qn.runtime.limitPrecision=li,Qn.runtime.defineFunction=hi,Qn.runtime.defineAlias=Ei;var Ti=["or","number",["null",0]],Mi=[["*a",Ti],["*b",Ti]],Oi=[["*a","forced"],["*b","forced"]];function Ii(t,e){return t="string"==typeof t?t.toLowerCase():t,e="string"==typeof e?e.toLowerCase():e,!1===t&&null==e||(!1===e&&null==t||(0===t&&null==e||(0===e&&null==t||(""===t&&null==e||(""===e&&null==t||t===e)))))}function Di(t){return function(e,n){return"string"==typeof e&&"string"!=typeof n&&(n=null==n?"":n+""),"string"!=typeof e&&"string"==typeof n&&(e=null==e?"":e+""),"number"==typeof e&&null==n&&(n=0),"number"==typeof n&&null==e&&(e=0),"string"==typeof e&&"string"==typeof n&&(e=e.toLowerCase(),n=n.toLowerCase()),typeof n==typeof e?t(e,n):new Bn("VALUE")}}hi("binary+",(function(t,e){return t+e})).args(Mi),hi("binary-",(function(t,e){return t-e})).args(Mi),hi("binary*",(function(t,e){return t*e})).args(Mi),hi("binary/",(function(t,e){return t/e})).args([["*a",Ti],["*b","divisor"]]),hi("binary^",(function(t,e){return Math.pow(t,e)})).args(Mi),hi("binary&",(function(t,e){return null==t&&(t=""),null==e&&(e=""),""+t+e})).args([["*a",["or","number","string","boolean","null"]],["*b",["or","number","string","boolean","null"]]]),hi("binary=",Ii).args(Oi),hi("binary<>",(function(t,e){return!Ii(t,e)})).args(Oi),hi("binary<",Di((function(t,e){return t<e}))).args(Oi),hi("binary<=",Di((function(t,e){return t<=e}))).args(Oi),hi("binary>",Di((function(t,e){return t>e}))).args(Oi),hi("binary>=",Di((function(t,e){return t>=e}))).args(Oi),hi("unary+",(function(t){return t})).args([["*a",Ti]]),hi("unary-",(function(t){return-t})).args([["*a",Ti]]),hi("unary%",(function(t){return t/100})).args([["*a",Ti]]),hi("binary:",(function(t,e){return new yn(t,e).setSheet(t.sheet||this.formula.sheet,t.hasSheet())})).args([["a","cell"],["b","cell"]]),hi("binary,",(function(t,e){return new vn([t,e])})).args([["a","ref"],["b","ref"]]),hi("binary ",(function(t,e){return t.intersect(e)})).args([["a","ref"],["b","ref"]]),hi("not",(function(t){return!this.bool(t)})).args([["*a",["or","anyvalue",["null",0]]]]),hi("isblank",(function(t){return t instanceof mn&&null==(t=this.getRefData(t))})).args([["*value","anything!"]]),hi("iserror",(function(t){return t instanceof Bn})).args([["*value","forced!"]]),hi("iserr",(function(t){return t instanceof Bn&&"N/A"!=t.code})).args([["*value","forced!"]]),hi("isna",(function(t){return t instanceof Bn&&"N/A"==t.code})).args([["*value","forced!"]]),hi("islogical",(function(t){return"boolean"==typeof t})).args([["*value","forced!"]]),hi("isnontext",(function(t){return"string"!=typeof t})).args([["*value","forced!"]]),hi("istext",(function(t){return"string"==typeof t})).args([["*value","forced!"]]),hi("isnumber",(function(t){return"number"==typeof t})).args([["*value","forced!"]]),hi("isref",(function(t){return t instanceof mn||t instanceof yn})).args([["*value","anything!"]]),hi("_matrix",(function(t){return"string"==typeof t&&(t=this.asMatrix([t.split(/\s*,\s*/)])),t})).args([["m",["or","matrix","string"]]]),ti[",getname"]=function(t,e){this.fetchName(e[0],t)};let Fi=Object.create(null),Pi=Object.create(null);var Ri;(Ri=[[":"],[" "],[","],["%"],["^"],["*","/"],["+","-"],["&"],["=","<",">","<=",">=","<>"]]).forEach((function(t,e){t.forEach((function(t){Fi[t]=Ri.length-e,Pi[","===t?";":t]=Ri.length-e}))}));let Li=Fi,Ni={DEC:".",ARG:",",COL:","};function Bi(t){Ni.DEC=t,Ni.ARG=","===t?";":",",Ni.COL=","===t?"\\":",",Li=","===t?Pi:Fi}Qn.withDecimalSeparator=function(t,e){if(Ni.DEC===t)return e();let n=Ni.DEC;Bi(t);try{return e()}finally{Bi(n)}},Qn._separators=Ni;class ji{constructor(t,e){this.message=t,this.pos=e}toString(){return this.message}}let zi={type:"bool",value:!0},$i={type:"bool",value:!1};function Hi(t){t=t.toUpperCase();let e=0;for(let n=0;n<t.length;++n)e=26*e+t.charCodeAt(n)-64;return e-1}function Ui(t){return parseInt(t,10)-1}function Vi(t,e,n,i){let r=[],o=(i=Yi(i,{row:e,col:n})).is;return{type:"exp",ast:l(!0),refs:r,sheet:t,row:e,col:n};function s(t){return t.index=r.length,r.push(t),t}function a(t,e,n){if(o(t,e))return i.next();{let r=i.peek();r?i.croak("Expected "+t+" «"+e+"» but found "+r.type+" «"+r.value+"»"):n||i.croak("Expected "+t+" «"+e+"»")}}function l(t){return u((e=c(),o("punc","(")||o("ref")||o("num")||o("func")?{type:"binary",op:" ",left:e,right:l(!1)}:e),0,t);var e}function c(){let e;var n,r;return o("ref")?((r=i.next()).hasSheet()||r.setSheet(t),e=s(r)):o("func")?e=function(){let t=i.next();t=t.value,a("punc","(");let e=[];for(;!o("punc",")");)if(o("op",Ni.ARG))e.push({type:"null"}),i.next();else{if(e.push(l(!1)),i.eof()||o("punc",")"))break;a("op",Ni.ARG)}return a("punc",")",!0),{type:"func",func:t,args:e}}():o("punc","(")?(i.next(),e=l(!0),a("punc",")",!0)):o("punc","{")?(i.next(),e=function(){let t=[],e=[t],n=!0;for(;!i.eof()&&!o("punc","}");)n?n=!1:o(null,";")?(e.push(t=[]),i.next()):a(null,Ni.COL),t.push(l(!1));return{type:"matrix",value:e}}(),a("punc","}",!0)):o("num")||o("str")||o("error")?e=i.next():o("sym")?e="TRUE"===(n=i.next()).upper||"FALSE"===n.upper?"TRUE"===n.upper?zi:$i:s(new gn(n.value)):o("op","+")||o("op","-")?e={type:"prefix",op:i.next().value,exp:c()}:i.peek()?o("punc","[")?i.croak("External reference not supported"):i.croak("Parse error"):i.croak("Incomplete expression"),h(e)}function h(t){return o("op","%")?(i.next(),h({type:"postfix",op:"%",exp:t})):t}function u(t,e,n){let r=o("op");if(r&&(n||r.value!==Ni.ARG)){let o=Li[r.value];if(o>e){i.next();let s=u(c(),o,n);return u({type:"binary",op:";"===r.value?",":r.value,left:t,right:s},e,n)}}return t}}let Wi=function(t){return function(e){let n=t[e];return n||(n=t[e]=new Function("kendo","'use strict';return("+e+")")(ei)),n}}(Object.create(null));function qi(t,e){let n=0;return i(t,e);function i(t,e){switch(t.type){case"ref":return function(t,e){return"name"===t.ref?function(t,e){return{type:"func",func:",getname",args:[s(e),t]}}(t,e):r(t,e)}(t,e);case"num":case"str":case"null":case"error":case"bool":return r(t,e);case"prefix":case"postfix":return function(t,e){return i({type:"func",func:"unary"+t.op,args:[t.exp]},e)}(t,e);case"binary":return function(t,e){return i({type:"func",func:"binary"+t.op,args:[t.left,t.right]},e)}(t,e);case"func":return function(t,e){switch(t.func.toLowerCase()){case"if":return function(t,e,n,r){return i(t,(function(t){let o=s(r),l=a("T"),c=a("E");return{type:"func",func:"if",args:[o,t,{type:"lambda",vars:[l],body:i(e||zi,(function(t){return{type:"call",func:{type:"var",name:l},args:[t]}}))},{type:"lambda",vars:[c],body:i(n||$i,(function(t){return{type:"call",func:{type:"var",name:c},args:[t]}}))}]}}))}(t.args[0],t.args[1],t.args[2],e);case"and":return function(t,e){if(0===t.length)return r(zi,e);return i({type:"func",func:"IF",args:[t[0],{type:"func",func:"AND",args:t.slice(1)},$i]},e)}(t.args,e);case"or":return function(t,e){if(0===t.length)return r($i,e);return i({type:"func",func:"IF",args:[t[0],zi,{type:"func",func:"OR",args:t.slice(1)}]},e)}(t.args,e);case"true":return e(zi);case"false":return e($i)}return function e(n,r){return r===t.args.length?{type:"func",func:t.func,args:n}:i(t.args[r],(function(t){return e(n.concat([t]),r+1)}))}([s(e)],0)}(t,e);case"lambda":return function(t,e){let n=a("K"),r=i(t.body,(function(t){return{type:"call",func:{type:"var",value:n},args:[t]}}));return e({type:"lambda",vars:[n].concat(t.vars),body:r})}(t,e);case"matrix":return o(t.value,e,!0)}throw new Error("Cannot CPS "+t.type)}function r(t,e){return e(t)}function o(t,e,n){let r=[];return function s(a){return a===t.length?e({type:"matrix",value:r}):(n?o:i)(t[a],(function(t){return r[a]=t,s(a+1)}))}(0)}function s(t){let e=a("R");return{type:"lambda",vars:[e],body:t({type:"var",name:e})}}function a(t){return t||(t=""),(t="_"+t)+ ++n}}let Ki=Object.create(null);function Xi(t){let e=function(t){return Wi("function(row, col, mod){return("+function t(n,i,r){switch(n.type){case"num":return"(kendo.spreadsheet.calc._separators.DEC == '.' ? "+JSON.stringify(JSON.stringify(n.value))+" : "+JSON.stringify(JSON.stringify(n.value))+".replace('.' , kendo.spreadsheet.calc._separators.DEC))";case"bool":return JSON.stringify(n.value);case"error":return JSON.stringify("#"+n.value);case"str":return JSON.stringify(JSON.stringify(n.value));case"ref":return"this.refs["+n.index+"].print(row, col, mod)";case"prefix":return o((function(){return JSON.stringify(n.op)+" + "+t(n.exp,n,Li[n.op])}));case"postfix":return o((function(){return t(n.exp,n,Li[n.op])+" + "+JSON.stringify(n.op)}));case"binary":return o((function(){let i=e(t(n.left,n,Li[n.op]),n.left instanceof gn&&":"===n.op),r=e(t(n.right,n,Li[n.op]),n.right instanceof gn&&":"===n.op);return/^[,;]/.test(n.op)?i+" + kendo.spreadsheet.calc._separators.ARG + "+r:i+" + "+JSON.stringify(n.op)+" + "+r}));case"func":return JSON.stringify(n.func+"(")+" + "+(n.args.length>0?n.args.map((function(e){return t(e,n,0)})).join(" + kendo.spreadsheet.calc._separators.ARG + ' ' + "):"''")+" + ')'";case"matrix":return"'{ ' + "+n.value.map((function(e){return e.map((function(e){return t(e,n,0)})).join(" + kendo.spreadsheet.calc._separators.COL + ' ' + ")})).join(" + '; ' + ")+"+ ' }'";case"null":return"''"}throw new Error("Cannot make printer for node "+n.type);function o(t){let o=n.op,s=Li[o]<r||!r&&","===o||"prefix"===i.type&&r===Li[o]&&"-"===i.op||"binary"===i.type&&r===Li[o]&&n===i.right;return e(t(),s)}}(t.ast,t,0)+")}");function e(t,e){return e?"'(' + "+t+" + ')'":t}}(t),n=e.call(t),i=Ki[n];if(i)return i.clone(t.sheet,t.row,t.col);let r=o(qi(t.ast,(function(t){return{type:"return",value:t}})));return r=["function(){","let context = this, refs = context.formula.absrefs",r,"}"].join(";\n"),i=new Qn.runtime.Formula(t.refs,Wi(r),e,t.sheet,t.row,t.col),Ki[n]=i.clone(t.sheet,t.row,t.col),i;function o(t){let e=t.type;if("num"===e)return t.value+"";if("str"===e)return JSON.stringify(t.value);if("error"===e)return"context.error("+JSON.stringify(t.value)+")";if("return"===e)return"context.resolve("+o(t.value)+")";if("func"===e)return"context.func("+JSON.stringify(t.func)+", "+o(t.args[0])+", "+s(t.args.slice(1))+")";if("call"===e)return o(t.func)+"("+t.args.map(o).join(", ")+")";if("ref"===e)return"refs["+t.index+"]";if("bool"===e)return""+t.value;if("if"===e)return"(context.bool("+o(t.co)+") ? "+o(t.th)+" : "+o(t.el)+")";if("lambda"===e)return"(function("+t.vars.join(", ")+"){ return("+o(t.body)+") })";if("var"===e)return t.name;if("matrix"===e)return s(t.value);if("null"===e)return"null";throw new Error("Cannot compile expression "+e)}function s(t){return"[ "+t.map(o).join(", ")+" ]"}}function Gi(t){return t}function Yi(t,e){t=function(t,e){let n=[],i=0,r=t.readWhile;return{next:w,peek:b,eof:S,croak:t.croak,ahead:x,skip:_};function o(t){return/[0-9]/i.test(t)}function s(t){return/[a-z$_]/i.test(t)||function(t){return kn.test(t)}(t)}function a(t){return s(t)||o(t)||"."===t}function l(t){return t in Li}function c(t){return"\\!;(){}[]".indexOf(t)>=0}function h(){let t=!1,e=r((function(e){return e===Ni.DEC?!t&&(t=!0,!0):o(e)}));return e===Ni.DEC?{type:"punc",value:Ni.DEC}:{type:"num",value:parseFloat(e.replace(Ni.DEC,"."))}}function u(e,n){return{type:"sym",value:e,upper:e.toUpperCase(),space:Ji(t.peek()),quote:n}}function d(t,e,n){if(!t&&!e&&!n)return null;if(!t&&!n||t&&n){let n=e?parseInt(e,10):0;return t?n:n-1}}function p(){let e=t.lookingAt(/^R(\[)?(-?[0-9]+)?(\])?C(\[)?(-?[0-9]+)?(\])?/i);if(e){let n=d(e[1],e[2],e[3]),i=d(e[4],e[5],e[6]);if(null!=n&&null!=i)return t.skip(e),{type:"rc",row:n,col:i,rel:(e[4]||!(e[4]||e[5]||e[6])?1:0)|(e[1]||!(e[1]||e[2]||e[3])?2:0)}}return u(r(a))}function f(){return t.next(),{type:"str",value:t.readEscaped('"')}}function g(){return t.next(),u(t.readEscaped("'"),!0)}function m(){return{type:"op",value:r((function(t,e){return e+t in Li}))}}function y(){return{type:"punc",value:t.next()}}function v(){if(t.eof())return null;let n,i=t.peek();return'"'===i?f():"'"===i?g():o(i)||i===Ni.DEC?h():s(i)?p():l(i)?m():c(i)?y():(n=t.lookingAt(/^#([a-z\/]+)[?!]?/i))?(t.skip(n),{type:"error",value:n[1]}):(e.forEditor||t.croak("Can't handle character with code: "+i.charCodeAt(0)),{type:"error",value:t.next()})}function b(){for(;n.length<=i;){r(Ji);let i=t.pos(),o=v();e.forEditor&&o&&(o.begin=i,o.end=t.pos()),n.push(o)}return n[i]}function w(){let t=b();return t&&i++,t}function x(t,e){let n=i,r=[];for(;t-- >0;)r.push(w()||Zi);return i=n,e.apply(r,r)}function _(t){i+=t}function S(){return null==b()}}(Qi(t),e);let n=t.ahead,i=t.skip,r=null,o=null!=e.row&&null!=e.col?function(t){return 1&t.rel&&(t.col-=e.col),2&t.rel&&(t.row-=e.row),t}:Gi,s=e.forEditor?function(t,e,n){return t.begin=e.begin,t.end=n.end,t}:Gi;return{peek:a,next:function(){if(null!=r){let t=r;return r=null,t}return l()},croak:t.croak,eof:t.eof,is:function(t,e){let n=a();return null==n||null!=t&&n.type!==t||null!=e&&n.value!==e?null:n}};function a(){return null==r&&(r=l()),r}function l(){let e,i=t.peek();return i&&("sym"!==i.type&&"rc"!==i.type&&"num"!==i.type||(e=n(8,h)||n(6,u)||n(6,d)||n(4,p)||n(4,f)||n(2,g)||n(2,m)),e||(e=t.next())),e}function c(n,i){if("rc"===n.type)return!n.rel||e.forEditor||null!=e.row&&null!=e.col||t.croak("Cannot read relative cell in RC notation"),new mn(n.row,n.col,n.rel);if("num"===n.type)return n.value<=1048577?o(new mn(Ui(n.value),i?-1/0:1/0,2)):null;let r=n.value,s=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(r);if(s){let t=Ui(s[4]),e=Hi(s[2]);return t<=1048576&&e<=16383?o(new mn(Ui(s[4]),Hi(s[2]),(s[1]?0:1)|(s[3]?0:2))):null}let a="$"===r.charAt(0);if(a&&(r=r.substr(1)),/^\d+$/.test(r)){if(Ui(r)<=1048576)return o(new mn(Ui(r),i?-1/0:1/0,a?0:2))}else{if(Hi(r)<=16383)return o(new mn(i?-1/0:1/0,Hi(r),a?0:1))}}function h(t,e,n,r,o,a,l,h){if("sym"===t.type&&"op"===e.type&&":"===e.value&&"sym"===n.type&&"punc"===r.type&&"!"===r.value&&("sym"===o.type||"rc"===o.type||"num"===o.type&&o.value==o.value|0)&&"op"===a.type&&":"===a.value&&("sym"===l.type||"rc"===l.type||"num"===l.type&&l.value==l.value|0)&&l.type===o.type&&("punc"!==h.type||"("!==h.value||l.space)){let e=c(o,!0),r=c(l,!1);if(e&&r)return i(7),s(new yn(e.setSheet(t.value,!0),r.setSheet(n.value,!0)).setSheet(t.value,!0),t,l)}}function u(t,e,n,r,o,a){if("sym"===t.type&&"op"===e.type&&":"===e.value&&"sym"===n.type&&"punc"===r.type&&"!"===r.value&&("sym"===o.type||"rc"===o.type||"num"===o.type&&o.value==o.value|0)&&("punc"!==a.type||"("!==a.value||o.space)){let e=c(o);if(e){i(5);let r=e.clone();return s(new yn(e.setSheet(t.value,!0),r.setSheet(n.value,!0)).setSheet(t.value,!0),t,o)}}}function d(t,e,n,r,o,a){if("sym"===t.type&&"punc"===e.type&&"!"===e.value&&("sym"===n.type||"rc"===n.type||"num"===n.type&&n.value==n.value|0)&&"op"===r.type&&":"===r.value&&("sym"===o.type||"rc"===o.type||"num"===o.type&&o.value==o.value|0)&&("punc"!==a.type||"("!==a.value||o.space)){let e=c(n,!0),r=c(o,!1);if(e&&r)return i(5),s(new yn(e,r).setSheet(t.value,!0),t,o)}}function p(t,e,n,r){if("sym"===t.type&&"punc"===e.type&&"!"===e.value&&("sym"===n.type||"rc"===n.type||"num"===n.type&&n.value==n.value|0)&&("punc"!==r.type||"("!==r.value||n.space)){i(3);let e=c(n);return e&&isFinite(e.row)||(e=new gn(n.value)),s(e.setSheet(t.value,!0),t,n)}}function f(t,e,n,r){if(("sym"===t.type||"rc"===t.type||"num"===t.type&&t.value==t.value|0)&&"op"===e.type&&":"===e.value&&("sym"===n.type||"rc"===n.type||"num"===n.type&&n.value==n.value|0)&&("punc"!==r.type||"("!==r.value||n.space)){let e=c(t,!0),r=c(n,!1);if(e&&r)return i(3),s(new yn(e,r),t,n)}}function g(t,e){if(("sym"===t.type||"rc"===t.type)&&("punc"!==e.type||"("!==e.value||t.space)){let e=c(t);if(e&&isFinite(e.row)&&isFinite(e.col))return i(1),s(e,t,t)}}function m(t,e){if("sym"===t.type&&"punc"===e.type&&"("===e.value&&!t.space)return t.type="func",i(1),t}}function Ji(t){return" \t\r\n ​".indexOf(t)>=0}let Zi={type:"eof"};function Qi(t){let e=0;return{next:n,peek:i,eof:r,croak:o,readWhile:function(t){let e="";for(;!r()&&t(i(),e);)e+=n();return e},readEscaped:function(t){let e=!1,i="";for(;!r();){let r=n();if(e)i+=r,e=!1;else if("\\"===r)e=!0;else{if(r===t)break;i+=r}}return i},lookingAt:function(n){return n.exec(t.substr(e))},skip:function(n){if("string"==typeof n)t.substr(e,n.length)!==n&&o("Expected "+n),s(n.length);else if(n instanceof RegExp){let i=n.exec(t.substr(e));if(i)return s(i[0].length),i}else s(n[0].length)},forward:s,pos:function(){return e}};function n(){return t.charAt(e++)}function i(){return t.charAt(e)}function r(){return""===i()}function o(n){throw new ji(n+" (input: "+t+")",e)}function s(t){for(;t-- >0;)n()}}let tr=[],er=Qn.registerFormatParser=function(t){tr.push(t)};Qn.parse=function(t,e,n,i,r){if(i instanceof Date)return{type:"date",value:Qn.runtime.dateToSerial(i)};if("number"==typeof i)return{type:"number",value:i};if("boolean"==typeof i)return{type:"boolean",value:i};if(/^'/.test(i+=""))return{type:"string",value:i.substr(1)};if(/^-?[0-9]+%$/.test(i)){let t=i.substr(0,i.length-1),e=parseFloat(t);if(!isNaN(e)&&e===t)return{type:"percent",value:e/100}}if(/^=/.test(i))return i=i.substr(1),/\S/.test(i)?Vi(t,e,n,i):{type:"string",value:"="+i};for(let t=0;t<tr.length;++t){let e=tr[t](i,r);if(e)return e}if("true"===i.toLowerCase())return{type:"boolean",value:!0};if("false"===i.toLowerCase())return{type:"boolean",value:!1};let o=Qn.runtime.parseDate(i,r);if(o)return{type:"date",value:Qn.runtime.dateToSerial(o)};let s=parseFloat(i);return!isNaN(s)&&i.length>0&&s===i?(r=null,s!==Math.floor(s)&&(r="0."+String(s).split(".")[1].replace(/\d/g,"0")),{type:"number",value:s,format:r}):{type:"string",value:i}},Qn.parseNameDefinition=function(t,e){let n=Vi(null,0,0,t);if(!(n.ast instanceof gn))throw new ji("Invalid name: "+t);if(n=n.ast,!(e instanceof pn)){let t=Vi(n.sheet,0,0,e);e=t.ast instanceof pn?t.ast:/^(?:str|num|bool|error)$/.test(t.ast.type)?t.ast.value:Xi(t)}return{name:n,value:e}},Qn.parseFormula=Vi,Qn.parseReference=function(t,e){if("#sheet"===t.toLowerCase())return wn;t:{let e;if(e=/^(\$)?([a-z]+)(\$)?(\d+)$/i.exec(t)){let t=Ui(e[4]),n=Hi(e[2]);if(t<1048576&&n<16384)return new mn(Ui(e[4]),Hi(e[2]));break t}let n=Yi(t,{}),i=[];for(;;){let t=n.next();if(t instanceof mn)t.rel=0;else{if(!(t instanceof yn))break t;t.topLeft.rel=0,t.bottomRight.rel=0}if(i.push(t),n.eof())break;if(!n.is("op",Ni.ARG))break t;n.next()}return 1===i.length?i[0]:new vn(i)}if(!e)throw new Error("Cannot parse reference: "+t)},Qn.compile=Xi,Qn.parseSqref=function(t,e,n){t=Yi(t,{row:e=e||0,col:n=n||0});let i=[];for(;!t.eof();){let r=t.next();if("ref"!==r.type)throw new ji("Expecting a reference but got: "+JSON.stringify(r));i.push(r.absolute(e,n))}return i},Qn.InputStream=Qi,Qn.ParseError=ji,Qn.tokenize=function(t,e,n){let i=[];for(t=Yi(t,{forEditor:!0,row:e,col:n});!t.eof();)i.push(o());let r=i[0];return"op"===r.type&&"="===r.value&&(r.type="startexp"),i;function o(){let i=t.next();return"sym"===i.type?"TRUE"===i.upper?(i.type="bool",i.value=!0):"FALSE"===i.upper&&(i.type="bool",i.value=!1):"ref"===i.type&&(i={type:"ref",ref:null!=e&&null!=n?i.absolute(e,n):i,begin:i.begin,end:i.end}),i}},er((function(t,e){let n,i=0,r="";if(e||(e=$n().calendar.patterns.d),n=/^(\d+)([-/.])(\d+)\2(\d{2}(?:\d{2})?)(\s*)/.exec(t)){let o=parseInt(n[1],10),s=n[2],a=parseInt(n[3],10),l=parseInt(n[4],10);l<30?l+=2e3:l<100&&(l+=1900);let c=!e||e.indexOf("M")<e.indexOf("d");if(o>12||!c){let t=o;o=a,a=t,c=!1}if(!Qn.runtime.validDate(l,o,a))return null;i=Qn.runtime.packDate(l,o-1,a),i<0&&i--,r=c?["mm","dd","yyyy"].join(s):["dd","mm","yyyy"].join(s),r+=n[5],t=t.substr(n[0].length)}if(n=/^(\d+):(\d+)$/.exec(t)){let t=parseInt(n[1],10),e=parseInt(n[2],10);return{type:"date",format:r+"hh:mm",value:i+Qn.runtime.packTime(t,e,0,0)}}if(n=/^(\d+):(\d+)(\.\d+)$/.exec(t)){let t=parseInt(n[1],10),e=parseInt(n[2],10),o=1e3*parseFloat(n[3]);return{type:"date",format:r+"mm:ss.00",value:i+Qn.runtime.packTime(0,t,e,o)}}if(n=/^(\d+):(\d+):(\d+)$/.exec(t)){let t=parseInt(n[1],10),e=parseInt(n[2],10),o=parseInt(n[3],10);return{type:"date",format:r+"hh:mm:ss",value:i+Qn.runtime.packTime(t,e,o,0)}}if(n=/^(\d+):(\d+):(\d+)(\.\d+)$/.exec(t)){let t=parseInt(n[1],10),e=parseInt(n[2],10),o=parseInt(n[3],10),s=1e3*parseFloat(n[4]);return{type:"date",format:r+"hh:mm:ss.00",value:i+Qn.runtime.packTime(t,e,o,s)}}})),er((function(t){let e,n;const i=zn();var r=i.localeInfo().numbers;let o=r.symbols.group,s=r.symbols.decimal,a=r.localeCurrency;!a&&i.localeCurrency&&(a=i.localeCurrency());let l=r.currencies[a].symbol,c=function(t,e){let n=t+e,i=nr[n];i||(i="^(\\d+(COM\\d{3})*(DOT\\d+)?)",i=i.replace(/DOT/g,"\\"+e).replace(/COM/g,"\\"+t),i=new RegExp(i),nr[n]=i);return i}(o,s),h=new RegExp("^\\s*\\"+l+"\\s*"),u=1,d="",p="",f=!1,g=!1;if((t=Qi(t.replace(/^\s+|\s+$/g,""))).skip(/^-\s*/)&&(u=-1),(e=t.skip(h))&&(f=!0,d+='"'+e[0]+'"'),t.skip(/^-\s*/)){if(u<0)return null;u=-1}if(!(n=t.skip(c)))return null;if(d+="0",e=t.skip(h)){if(f)return null;f=!0,p='"'+e[0]+'"'}if(!f&&(e=t.skip(/^\s*%\s*/))&&(g=!0,p=e[0]),!t.eof())return null;(n[2]||f)&&(d=d.replace("0","#"),d+=",0"),n[3]&&(d+="."+ir("0",n[3].length-1));let m=n[0].replace(new RegExp("\\"+o,"g"),"").replace(new RegExp("\\"+s,"g"),".");return m=parseFloat(m),g&&(m/=100),d+=p,f&&(d+=";-"+d),{type:"number",currency:f,format:d,value:u*m}})),er((function(t){let e;if(e=/^([0-9]*)\.([0-9]+)(\s*%)$/.exec(t))return{type:"number",value:parseFloat(t)/100,format:"0."+ir("0",e[2].length)+e[3]}}));let nr={};function ir(t,e){let n="";for(;e-- >0;)n+=t;return n}function rr(t){return(Math.exp(t)+Math.exp(-t))/2}function or(t){return(Math.exp(t)-Math.exp(-t))/2}function sr(t){return or(t)/rr(t)}function ar(t,e){for(;e;){var n=t%e;t=e,e=n}return t}function lr(t,e){return Math.abs(t*e)/ar(t,e)}function cr(t,e){for(var n=[],i=0,r=t[0];i<t.length;)n.push({matrix:t[i++],pred:Fr(t[i++])});for(var o=0;o<r.height;++o)t:for(var s=0;s<r.width;++s){for(i=0;i<n.length;++i){var a=n[i].matrix.get(o,s);if(!n[i].pred(null==a||""===a?0:a))continue t}e(o,s)}}["abs","cos","sin","acos","asin","tan","atan","exp","sqrt"].forEach((function(t){hi(t,Math[t]).args([["*n","number"]])})),hi("ln",Math.log).args([["*n","number"]]),hi("log",(function(t,e){return Math.log(t)/Math.log(e)})).args([["*num","number++"],["*base",["or","number++",["null",10]]],["?",["assert","$base != 1","DIV/0"]]]),hi("log10",(function(t){return Math.log(t)/Math.log(10)})).args([["*num","number++"]]),hi("pi",(function(){return Math.PI})).args([]),hi("sqrtpi",(function(t){return Math.sqrt(t*Math.PI)})).args([["*num","number+"]]),hi("degrees",(function(t){return 180*t/Math.PI%360})).args([["*radians","number"]]),hi("radians",(function(t){return Math.PI*t/180})).args([["*degrees","number"]]),hi("cosh",rr).args([["*num","number"]]),hi("acosh",(function(t){return Math.log(t+Math.sqrt(t-1)*Math.sqrt(t+1))})).args([["*num","number"],["?",["assert","$num >= 1"]]]),hi("sinh",or).args([["*num","number"]]),hi("asinh",(function(t){return Math.log(t+Math.sqrt(t*t+1))})).args([["*num","number"]]),hi("sec",(function(t){return 1/Math.cos(t)})).args([["*num","number"]]),hi("sech",(function(t){return 1/rr(t)})).args([["*num","number"]]),hi("csc",(function(t){return 1/Math.sin(t)})).args([["*num","number"]]),hi("csch",(function(t){return 1/or(t)})).args([["*num","number"]]),hi("atan2",(function(t,e){return Math.atan(e/t)})).args([["*x","divisor"],["*y","number"]]),hi("tanh",sr).args([["*num","number"]]),hi("atanh",(function(t){return Math.log(Math.sqrt(1-t*t)/(1-t))})).args([["*num",["and","number",["(between)",-1,1]]]]),hi("cot",(function(t){return 1/Math.tan(t)})).args([["*num","divisor"]]),hi("coth",(function(t){return 1/sr(t)})).args([["*num","divisor"]]),hi("acot",(function(t){return Math.PI/2-Math.atan(t)})).args([["*num","number"]]),hi("acoth",(function(t){return Math.log((t+1)/(t-1))/2})).args([["*num","number"],["?",["or",["assert","$num < -1"],["assert","$num > 1"]]]]),hi("power",(function(t,e){return Math.pow(t,e)})).args([["*a","number"],["*b","number"]]),hi("mod",(function(t,e){return t%e})).args([["*a","number"],["*b","divisor"]]),hi("quotient",(function(t,e){return Math.floor(t/e)})).args([["*a","number"],["*b","divisor"]]),hi("ceiling",(function(t,e){return e?e*Math.ceil(t/e):0})).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]),hi("ceiling.precise",(function(t,e){return(e=Math.abs(e))?e*Math.ceil(t/e):0})).args([["*number","number"],["*significance",["or","number",["null",1]]]]),Qn.runtime.defineAlias("iso.ceiling","ceiling.precise"),hi("ceiling.math",(function(t,e,n){return e&&t?(t<0&&(!n&&e<0||n&&e>0)&&(e=-e),e?e*Math.ceil(t/e):0):0})).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]),hi("floor",(function(t,e){return e?e*Math.floor(t/e):0})).args([["*number","number"],["*significance","number"],["?",["assert","$significance >= 0 || $number < 0"]]]),hi("floor.precise",(function(t,e){return(e=Math.abs(e))?e*Math.floor(t/e):0})).args([["*number","number"],["*significance",["or","number",["null",1]]]]),hi("floor.math",(function(t,e,n){return e&&t?(t<0&&(!n&&e<0||n&&e>0)&&(e=-e),e?e*Math.floor(t/e):0):0})).args([["*number","number"],["*significance",["or","number",["null","$number < 0 ? -1 : 1"]]],["*mode",["or","logical",["null",0]]]]),hi("int",Math.floor).args([["*number","number"]]),hi("mround",(function(t,e){return e?e*Math.round(t/e):0})).args([["*number","number"],["*multiple","number"]]),hi("round",(function(t,e){var n=t<0?-1:1;return n<0&&(t=-t),t=li(t*(e=Math.pow(10,e))),n*(t=Math.round(t))/e})).args([["*number","number"],["*digits","number"]]),hi("roundup",(function(t,e){return(t=(t=li(t*(e=Math.pow(10,e))))<0?Math.floor(t):Math.ceil(t))/e})).args([["*number","number"],["*digits","number"]]),hi("rounddown",(function(t,e){return(t=(t=li(t*(e=Math.pow(10,e))))<0?Math.ceil(t):Math.floor(t))/e})).args([["*number","number"],["*digits","number"]]),hi("even",(function(t){var e=t<0?Math.floor(t):Math.ceil(t);return e%2?e+(e<0?-1:1):e})).args([["*number","number"]]),hi("odd",(function(t){var e=t<0?Math.floor(t):Math.ceil(t);return e%2?e:e+(e<0?-1:1)})).args([["*number","number"]]),hi("sign",(function(t){return t<0?-1:t>0?1:0})).args([["*number","number"]]),hi("gcd",(function(t){for(var e=t[0],n=1;n<t.length;++n)e=ar(e,t[n]);return e})).args([["numbers",["collect","number"]]]),hi("lcm",(function(t){for(var e=t[0],n=1;n<t.length;++n)e=lr(e,t[n]);return e})).args([["numbers",["collect","number"]]]),hi("sum",(function(t){return t.reduce((function(t,e){return t+e}),0)})).args([["numbers",["collect","number"]]]),hi("product",(function(t){return t.reduce((function(t,e){return t*e}),1)})).args([["numbers",["collect","number"]]]),hi("sumproduct",(function(t,e){var n=0;return t.each((function(t,i,r){if("number"==typeof t){for(var o=0;o<e.length;++o){var s=e[o].get(i,r);if("number"!=typeof s)return;t*=s}n+=t}})),n})).args([["a1","matrix"],["+",["a2",["and","matrix",["assert","$a2.width == $a1.width"],["assert","$a2.height == $a1.height"]]]]]),hi("sumsq",(function(t){return t.reduce((function(t,e){return t+e*e}),0)})).args([["numbers",["collect","number"]]]),hi("sumx2my2",(function(t,e){var n=0;return t.each((function(t,i,r){var o=e.get(i,r);"number"==typeof t&&"number"==typeof o&&(n+=t*t-o*o)})),n})).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),hi("sumx2py2",(function(t,e){var n=0;return t.each((function(t,i,r){var o=e.get(i,r);"number"==typeof t&&"number"==typeof o&&(n+=t*t+o*o)})),n})).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),hi("sumxmy2",(function(t,e){var n=0;return t.each((function(t,i,r){var o=e.get(i,r);"number"==typeof t&&"number"==typeof o&&(n+=(t-o)*(t-o))})),n})).args([["a","matrix"],["b",["and","matrix",["assert","$b.width == $a.width"],["assert","$b.height == $a.height"]]]]),hi("seriessum",(function(t,e,n,i){var r=0;return i.each((function(i){if("number"!=typeof i)throw new Bn("VALUE");r+=i*Math.pow(t,e),e+=n})),r})).args([["x","number"],["y","number"],["m","number"],["a","matrix"]]),hi("min",(function(t){return t.length?Math.min.apply(Math,t):0})).args([["numbers",["collect","number!"]]]),hi("max",(function(t){return t.length?Math.max.apply(Math,t):0})).args([["numbers",["collect","number!"]]]),hi("counta",(function(t){return t.length})).args([["values",["#collect","anyvalue"]]]),hi("count",(function(t){return t.length})).args([["numbers",["#collect","number"]]]),hi("countunique",(function(t){var e=0,n=[];return t.forEach((function(t){n.indexOf(t)<0&&(e++,n.push(t))})),e})).args([["values",["#collect","anyvalue"]]]),hi("countblank",(function(t){var e=0;function n(t){null!=t&&""!==t||e++}return function(t){for(var e=0;e<t.length;++e){var i=t[e];i instanceof ii?i.each(n,!0):n(i)}}(t),e})).args([["+",["args",["or","matrix","anyvalue"]]]]),hi("iseven",(function(t){return t%2==0})).args([["*number","number"]]),hi("isodd",(function(t){return t%2!=0})).args([["*number","number"]]),hi("n",(function(t){return"boolean"==typeof t?t?1:0:"number"==typeof t?t:0})).args([["*value","anyvalue"]]),hi("na",(function(){return new Bn("N/A")})).args([]);var hr=[["m1","matrix"],["c1","anyvalue"],[["m2","matrix"],["c2","anyvalue"]]];hi("countifs",(function(t,e,n){var i=0;return n.unshift(t,e),cr(n,(function(){i++})),i})).args(hr);var ur=[["range","matrix"]].concat(hr);hi("sumifs",(function(t,e,n,i){i.unshift(t,Pr,e,n);var r=0;return cr(i,(function(e,n){var i=t.get(e,n);i&&(r+=i)})),r})).args(ur),hi("averageifs",(function(t,e,n,i){i.unshift(t,Pr,e,n);var r=0,o=0;return cr(i,(function(e,n){var i=t.get(e,n);null!=i&&""!==i||(i=0),r+=i,o++})),o?r/o:new Bn("DIV/0")})).args(ur),hi("countif",(function(t,e){e=Fr(e);var n=0;return t.each((function(t){e(t)&&n++})),n})).args([["range","matrix"],["*criteria","anyvalue"]]);var dr,pr=[["range","matrix"],["*criteria","anyvalue"],["sumRange",["or","area","#matrix",["null","$range"]]]];function fr(t){return function(e,n,i,r){var o=this;if(r instanceof pn){var s=r.clone().toRangeRef();if(s.width()!=n.width||s.height()!=n.height)return isFinite(s.topLeft.row)||(s.topLeft.row=0),isFinite(s.topLeft.col)||(s.topLeft.col=0),s.bottomRight.row=s.topLeft.row+n.height-1,s.bottomRight.col=s.topLeft.col+n.width-1,o.resolveCells([s],(function(){e(t(n,i,o.asMatrix(s)))}))}e(t(n,i,o.asMatrix(r)))}}function gr(t){return t.reduce((function(t,e){return t+e}),0)/t.length}function mr(t,e,n){return null==n&&(n=gr(t)),t.reduce((function(t,e){return t+Math.pow(e-n,2)}),0)/e}function yr(t,e){return Math.sqrt(mr(t,e))}function vr(t,e,n){var i=0,r=0,o=null,s=null,a=!1;return t.forEach((function(t){t<e?(i++,o=null==o?t:Math.max(o,t)):t>e?(r++,s=null==s?t:Math.min(s,t)):a=!0})),i||r?a?n?(i+1)/(t.length+1):i/(i+r):((s-e)*vr(t,o,n)+(e-o)*vr(t,s,n))/(s-o):new Bn("N/A")}hi("sumif",fr((function(t,e,n){var i=0;return e=Fr(e),t.each((function(t,r,o){if(e(t)){var s=n.get(r,o);Pr(s)&&(i+=s||0)}})),i}))).argsAsync(pr),hi("averageif",fr((function(t,e,n){var i=0,r=0;return e=Fr(e),t.each((function(t,o,s){if(e(t)){var a=n.get(o,s);Pr(a)&&(i+=a||0,r++)}})),r?i/r:new Bn("DIV/0")}))).argsAsync(pr),(dr=function(t,e){hi(t,(function(t,n){var i=[],r=t.each((function(t){if(t instanceof Bn)return t;"number"==typeof t&&i.push(t)}));return r||(n>i.length?new Bn("NUM"):e(i,n-1))})).args([["array","matrix"],["*nth","number++"]])})("large",(function(t,e){return t.sort(Lr)[e]})),dr("small",(function(t,e){return t.sort(Rr)[e]})),hi("stdev.s",(function(t){return yr(t,t.length-1)})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),hi("stdev.p",(function(t){return yr(t,t.length)})).args([["numbers",["collect","number!"]],["?",["assert","$numbers.length >= 1","NUM"]]]),hi("var.s",(function(t){return mr(t,t.length-1)})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),hi("var.p",(function(t){return mr(t,t.length)})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),hi("median",(function(t){var e=t.length;return t.sort(Rr),e%2?t[e>>1]:(t[e>>=1]+t[e-1])/2})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","N/A"]]]),hi("mode.sngl",(function(t){t.sort(Rr);for(var e=null,n=0,i=1,r=null,o=0;o<t.length;++o){var s=t[o];s!=e?(n=1,e=s):n++,n>i&&(i=n,r=s)}return null==r?new Bn("N/A"):r})).args([["numbers",["collect","number"]]]),hi("mode.mult",(function(t){var e=Object.create(null),n=2,i=[];t.forEach((function(t){var r=e[t]||0;e[t]=++r,r==n?i.push(t):r>n&&(n=r,i=[t])}));var r=new ii(this);return i.forEach((function(t,e){r.set(e,0,t)})),r})).args([["numbers",["collect","number"]]]),hi("geomean",(function(t){var e=t.length,n=t.reduce((function(t,e){if(e<0)throw new Bn("NUM");return t*e}),1);return Math.pow(n,1/e)})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]),hi("harmean",(function(t){return t.length/t.reduce((function(t,e){if(!e)throw new Bn("DIV/0");return t+1/e}),0)})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length > 0","NUM"]]]),hi("trimmean",(function(t,e){var n=t.length;t.sort(Rr);var i=Math.floor(n*e);i%2&&--i;for(var r=0,o=i/=2;o<n-i;++o)r+=t[o];return r/(n-2*i)})).args([["numbers",["collect","number",1]],["percent",["and","number",["[between)",0,1]]],["?",["assert","$numbers.length > 0","NUM"]]]),hi("frequency",(function(t,e){t.sort(Rr),e.sort(Rr);var n=-1/0,i=0;function r(e){for(var r=0;i<t.length&&t[i]>n&&t[i]<=e;)++r,++i;return r}var o=new ii(this);return e.forEach((function(t,e){var i=r(t);n=t,o.set(e,0,i)})),o.set(o.height,0,t.length-i),o})).args([["data",["collect","number",1]],["bins",["collect","number",1]]]),hi("rank.eq",(function(t,e,n){e.sort(n?Rr:Lr);var i=e.indexOf(t);return i<0?new Bn("N/A"):i+1})).args([["value","number"],["numbers",["collect","number",1]],["order",["or","logical",["null",!1]]]]),Qn.runtime.defineAlias("rank","rank.eq"),hi("rank.avg",(function(t,e,n){e.sort(n?Rr:Lr);var i=e.indexOf(t);if(i<0)return new Bn("N/A");for(var r=i;e[r]==t;++r);return(i+r+1)/2})).args([["value","number"],["numbers",["collect","number"]],["order",["or","logical",["null",!1]]]]),hi("kurt",(function(t){var e=t.length,n=gr(t),i=mr(t,e-1,n),r=Math.sqrt(i);return e*(e+1)/((e-1)*(e-2)*(e-3))*t.reduce((function(t,e){return t+Math.pow((e-n)/r,4)}),0)-3*Math.pow(e-1,2)/((e-2)*(e-3))})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 4","NUM"]]]);var br=[["array",["collect","number",1]],["x","number"],["significance",["or",["null",3],"integer++"]],["?",["assert","$array.length > 0","NUM"]]];function wr(t,e,n){for(var i=0,r=gr(t),o=gr(e),s=t.length,a=0;a<s;++a)i+=(t[a]-r)*(e[a]-o);return i/n}hi("percentrank.inc",(function(t,e,n){var i=vr(t,e,0);return i=i.toFixed(n+1),parseFloat(i.substr(0,i.length-1))})).args(br),hi("percentrank.exc",(function(t,e,n){var i=vr(t,e,1);return i=i.toFixed(n+1),parseFloat(i.substr(0,i.length-1))})).args(br),Qn.runtime.defineAlias("percentrank","percentrank.inc"),hi("covariance.p",(function(t,e){return wr(t,e,t.length)})).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 0","DIV/0"]]]),hi("covariance.s",(function(t,e){return wr(t,e,t.length-1)})).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length == $array2.length","N/A"]],["?",["assert","$array1.length > 1","DIV/0"]]]),Qn.runtime.defineAlias("covar","covariance.p");var xr=An((function(t){for(var e=2,n=1;e<=t;++e)n*=e;return n}));hi("fact",xr).args([["*n","integer+"]]),hi("factdouble",(function(t){for(var e=2+(1&t),n=1;e<=t;e+=2)n*=e;return n})).args([["*n","integer+"]]),hi("multinomial",(function(t){var e=1,n=0;return t.forEach((function(t){if(t<0)throw new Bn("NUM");n+=t,e*=xr(t)})),xr(n)/e})).args([["numbers",["collect","number"]]]);var _r=An((function(t,e){for(var n=e+1,i=1,r=1,o=1;i<=t-e;++n,++i)r*=n,o*=i;return r/o}));function Sr(t,e){t.sort(Rr);var n=t.length,i=0|e,r=e-i;return 0===i?t[0]:i>=n?t[n-1]:t[--i]+r*(t[i+1]-t[i])}function Cr(t,e){return Sr(t,e*(t.length-1)+1)}function kr(t,e){return Sr(t,e*(t.length+1))}hi("combin",_r).args([["*n","integer++"],["*k",["and","integer",["[between]",0,"$n"]]]]),hi("combina",(function(t,e){return _r(t+e-1,t-1)})).args([["*n","integer++"],["*k",["and","integer",["[between]",1,"$n"]]]]),hi("average",(function(t){return t.reduce((function(t,e){return t+e}),0)/t.length})).args([["numbers",["collect","number!"]],["?",["assert","$numbers.length > 0","DIV/0"]]]),hi("averagea",(function(t){var e=0,n=0;return t.forEach((function(t){"string"!=typeof t&&(e+=t),++n})),n?e/n:new Bn("DIV/0")})).args([["values",["collect","anyvalue"]]]),hi("percentile.inc",Cr).args([["numbers",["collect","number",1]],["p",["and","number",["[between]",0,1]]]]),hi("percentile.exc",kr).args([["numbers",["collect","number",1]],["p",["and","number",["(between)",0,1]]]]),hi("quartile.inc",(function(t,e){return Cr(t,e/4)})).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]),hi("quartile.exc",(function(t,e){return kr(t,e/4)})).args([["numbers",["collect","number",1]],["quarter",["values",0,1,2,3,4]]]),Qn.runtime.defineAlias("quartile","quartile.inc"),Qn.runtime.defineAlias("percentile","percentile.inc");var Ar=["AVERAGE","COUNT","COUNTA","MAX","MIN","PRODUCT","STDEV.S","STDEV.P","SUM","VAR.S","VAR.P","MEDIAN","MODE.SNGL","LARGE","SMALL","PERCENTILE.INC","QUARTILE.INC","PERCENTILE.EXC","QUARTILE.EXC"];function Er(t,e,n){var i=[];return function e(r){if(r instanceof pn)t.getRefCells(r,!0).forEach((function(t){var e=t.value;if(!(1&n&&t.hidden)){if(t.formula){var r=t.formula.print(t.row,t.col);if(/^\s*(?:aggregate|subtotal)\s*\(/i.test(r)&&!(4&n))return}2&n&&e instanceof Bn||("number"==typeof e||e instanceof Bn)&&i.push(e)}}));else if(Array.isArray(r))for(var o=0;o<r.length;++o)e(r[o]);else r instanceof ii?r.each(e):("number"==typeof r||r instanceof Bn&&!(2&n))&&i.push(r)}(e),i}function Tr(t,e,n,i){if(i){for(var r=0,o=0;o<=t;++o)r+=_r(e,o)*Math.pow(n,o)*Math.pow(1-n,e-o);return r}return _r(e,t)*Math.pow(n,t)*Math.pow(1-n,e-t)}function Mr(t){var e=vi(bi(t,0,1));return 4==e.day||3==e.day&&Qn.runtime.isLeapYear(t)?53:52}function Or(t,e,n){var i=vi(t),r=vi(e);return n?(31==i.date&&(i.date=30),31==r.date&&(r.date=30)):(1==i.month&&1==r.month&&i.date==yi(i.year,1)&&r.date==yi(r.year,1)&&(r.date=30),i.date==yi(i.year,i.month)?(i.date=30,31==r.date&&(r.date=30)):30==i.date&&31==r.date&&(r.date=30)),360*(r.year-i.year)+30*(r.month-i.month)+(r.date-i.date)}hi("aggregate",(function(t,e,n,i){var r=this;r.resolveCells(i,(function(){var o;if(e>12){o=Er(r,i[0],n);var s=i[1];if(s instanceof mn&&(s=r.getRefData(s)),"number"!=typeof s)return t(new Bn("VALUE"))}else o=Er(r,i,n);r.func(Ar[e-1],t,o)}))})).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19]],["options",["or",["null",0],["values",0,1,2,3,4,5,6,7]]],["args","rest"]]),hi("subtotal",(function(t,e){var n=this,i=e>100;i&&(e-=100);for(var r=[],o=2;o<arguments.length;++o)r.push(arguments[o]);n.resolveCells(r,(function(){var o=Er(n,r,i?1:0);n.func(Ar[e-1],t,o)}))})).argsAsync([["funcId",["values",1,2,3,4,5,6,7,8,9,10,11,101,102,103,104,105,106,107,108,109,110,111]],["+",["ref",["or","ref","#matrix"]]]]),hi("avedev",(function(t){var e=t.reduce((function(t,e){return t+e}),0)/t.length;return t.reduce((function(t,n){return t+Math.abs(n-e)}),0)/t.length})).args([["numbers",["collect","number"]],["?",["assert","$numbers.length >= 2","NUM"]]]),hi("binom.dist",Tr).args([["successes","integer+"],["trials",["and","integer",["assert","$trials >= $successes"]]],["probability",["and","number",["[between]",0,1]]],["cumulative","logical"]]),Qn.runtime.defineAlias("binomdist","binom.dist"),hi("binom.inv",(function(t,e,n){for(var i=0;i<=t;++i)if(Tr(i,t,e,!0)>=n)return i;return new Bn("N/A")})).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["alpha",["and","number",["[between]",0,1]]]]),Qn.runtime.defineAlias("critbinom","binom.inv"),hi("binom.dist.range",(function(t,e,n,i){for(var r=0,o=n;o<=i;++o)r+=_r(t,o)*Math.pow(e,o)*Math.pow(1-e,t-o);return r})).args([["trials","integer+"],["probability",["and","number",["[between]",0,1]]],["successes_min",["and","integer",["[between]",0,"$trials"]]],["successes_max",["or",["and","integer",["[between]","$successes_min","$trials"]],["null","$successes_min"]]]]),hi("negbinom.dist",(function(t,e,n,i){if(i){for(var r=0;t>=0;)r+=_r(t+e-1,t)*Math.pow(n,e)*Math.pow(1-n,t),t--;return r}return _r(t+e-1,t)*Math.pow(n,e)*Math.pow(1-n,t)})).args([["number_f","integer+"],["number_s","integer+"],["probability_s",["and","number",["[between]",0,1]]],["cumulative","logical"]]),Qn.runtime.defineAlias("negbinomdist","negbinom.dist"),hi("address",(function(t,e,n,i,r){var o=new mn(t-1,e-1,n-1);return r&&o.setSheet(r,!0),i?o.print(0,0):o.print()})).args([["row","integer++"],["col","integer++"],["abs",["or",["null",1],["values",1,2,3,4]]],["a1",["or",["null",!0],"logical"]],["sheet",["or","null","string"]]]),hi("areas",(function(t){var e=0;return function t(n){n instanceof mn||n instanceof yn?e++:n instanceof vn&&n.refs.forEach(t)}(t),e})).args([["ref","ref"]]),hi("choose",(function(t,e){return t>e.length?new Bn("N/A"):e[t-1]})).args([["*index","integer"],["+",["value","anything"]]]),hi("column",(function(t){return t?t instanceof mn?t.col+1:this.asMatrix(t).mapCol((function(e){return e+t.topLeft.col+1})):this.formula.col+1})).args([["ref",["or","area","null"]]]),hi("columns",(function(t){return t instanceof pn?t.width():t.width})).args([["ref",["or","area","#matrix"]]]),hi("formulatext",(function(t){var e=this.getRefCells(t)[0];return e.formula?e.formula.print(e.row,e.col):new Bn("N/A")})).args([["ref","ref"]]),hi("hlookup",(function(t,e,n,i){var r=null;return e.eachCol((function(n){var o=e.get(0,n);if(i){if(o>t)return!0;r=n}else if(o===t)return r=n,!0})),null==r?new Bn("N/A"):e.get(n-1,r)})).args([["value","anyvalue"],["range","matrix"],["row","integer++"],["approx",["or","logical",["null",!0]]]]),hi("index",(function(t,e,n,i,r){var o=this;if(e instanceof vn&&(e=e.refs[r-1]),!n&&!i||!e)return t(new Bn("N/A"));if(e instanceof mn&&(e=e.toRangeRef()),e instanceof yn){if(n&&i){if(i>e.width()||n>e.height())return t(new Bn("REF"));var s=e.toCell(n-1,i-1);return void o.resolveCells([s],(function(){t(o.getRefData(s))}))}if(!n){var a=e.toColumn(i-1);return void o.resolveCells([a],(function(){t(o.asMatrix(a))}))}if(!i){var l=e.toRow(n-1);return void o.resolveCells([l],(function(){t(o.asMatrix(l))}))}}else if(e instanceof ii){if(e.width>1&&e.height>1){if(n&&i)return t(e.get(n-1,i-1));if(!n)return t(e.mapRow((function(t){return e.get(t,i-1)})));if(!i)return t(e.mapCol((function(t){return e.get(n-1,t)})))}if(1==e.width)return t(e.get(n-1,0));if(1==e.height)return t(e.get(0,i-1))}else t(new Bn("REF"))})).argsAsync([["range",["or","ref","matrix"]],["row",["or","integer+","null"]],["col",["or","integer+","null"]],["areanum",["or","integer++",["null",1]]]]),hi("indirect",(function(t){try{var e=this.formula,n=Qn.parseFormula(e.sheet,e.row,e.col,t).ast;if(n instanceof gn&&(n=this.ss.nameValue(n,e.sheet,e.row,e.col)),!(n instanceof pn))throw 1;return n.absolute(e.row,e.col)}catch(t){return new Bn("REF")}})).args([["thing","string"]]),hi("match",(function(t,e,n){var i,r=1;return 0===n?i=Fr(t):-1===n?i=Fr("<="+t):1===n&&(i=Fr(">="+t)),e.each((function(e){if(null!=e&&i(e))return 0!==n&&t!=e&&--r,!0;r++}),!0)&&r>0?r:new Bn("N/A")})).args([["value","anyvalue"],["range","matrix"],["type",["or",["values",-1,0,1],["null",1]]]]),hi("offset",(function(t,e,n,i,r){var o=(t instanceof mn?t:t.topLeft).clone();return o.row+=e,o.col+=n,o.row<0||o.col<0?new Bn("VALUE"):i>1||r>1?new yn(o,new mn(o.row+i-1,o.col+r-1)).setSheet(t.sheet,t.hasSheet()):o})).args([["ref","area"],["*rows","integer"],["*cols","integer"],["*height",["or","integer++",["null","$ref.height()"]]],["*width",["or","integer++",["null","$ref.width()"]]]]),hi("row",(function(t){return t?t instanceof mn?t.row+1:this.asMatrix(t).mapRow((function(e){return e+t.topLeft.row+1})):this.formula.row+1})).args([["ref",["or","area","null"]]]),hi("rows",(function(t){return t instanceof pn?t.height():t.height})).args([["ref",["or","area","#matrix"]]]),hi("vlookup",(function(t,e,n,i){var r=null;return"number"!=typeof t&&(i=!1),"string"==typeof t&&(t=t.toLowerCase()),e.eachRow((function(n){var o=e.get(n,0);if(i){if(o>t)return!0;r=n}else if("string"==typeof o&&(o=o.toLowerCase()),o===t)return r=n,!0})),null==r?new Bn("N/A"):e.get(r,n-1)})).args([["value","anyvalue"],["range","matrix"],["col","integer++"],["approx",["or","logical",["null",!0]]]]),hi("date",(function(t,e,n){return bi(t,e-1,n)})).args([["*year","integer"],["*month","integer"],["*date","integer"]]),hi("day",(function(t){return vi(t).date})).args([["*date","date"]]),hi("month",(function(t){return vi(t).month+1})).args([["*date","date"]]),hi("year",(function(t){return vi(t).year})).args([["*date","date"]]),hi("weekday",(function(t){return vi(t).day+1})).args([["*date","date"]]),hi("weeknum",(function(t,e){var n,i=bi(vi(t).year,0,1),r=vi(i);return 21==e?((n=3-(r.day+6)%7)<0&&(n+=7),i+=n,r.date+=n,r.day=4,e=1):e=1==e?0:2==e?1:(e-10)%7,(n=r.day-e)<0&&(n+=7),i-=n,Math.ceil((t+1-i)/7)})).args([["*date","date"],["*type",["or",["null",1],["values",1,2,11,12,13,14,15,16,17,21]]]]),hi("isoweeknum",(function(t){var e=vi(t),n=e.day||7,i=Math.floor((e.ord-n+10)/7);return i<1?Mr(e.year-1):53==i&&i>Mr(e.year)?1:i})).args([["*date","date"]]),hi("now",(function(){return Qn.runtime.dateToSerial(new Date)})).args([]),hi("today",(function(){return 0|Qn.runtime.dateToSerial(new Date)})).args([]),hi("time",(function(t,e,n){return Qn.runtime.packTime(t,e,n,0)})).args([["*hours","integer"],["*minutes","integer"],["*seconds","integer"]]),hi("hour",(function(t){return Qn.runtime.unpackTime(t).hours})).args([["*time","datetime"]]),hi("minute",(function(t){return Qn.runtime.unpackTime(t).minutes})).args([["*time","datetime"]]),hi("second",(function(t){return Qn.runtime.unpackTime(t).seconds})).args([["*time","datetime"]]),hi("edate",(function(t,e){var n=vi(t),i=n.month+e,r=n.year+Math.floor(i/12);return(i%=12)<0&&(i+=12),bi(r,i,n=Math.min(n.date,yi(r,i)))})).args([["*start_date","date"],["*months","integer"]]),hi("eomonth",(function(t,e){var n=vi(t),i=n.month+e,r=n.year+Math.floor(i/12);return(i%=12)<0&&(i+=12),bi(r,i,n=yi(r,i))})).args([["*start_date","date"],["*months","integer"]]),hi("workday",(function(t,e,n){var i=e>0?1:-1;e=Math.abs(e);for(var r=vi(t).day;e>0;)t+=i,(r=(r+i)%7)>0&&r<6&&n.indexOf(t)<0&&--e;return t})).args([["start_date","date"],["days","integer"],["holidays",["collect","date"]]]),hi("networkdays",(function(t,e,n){if(t>e){var i=t;t=e,e=i}for(var r=0,o=vi(t).day;t<=e;)o>0&&o<6&&n.indexOf(t)<0&&r++,t++,o=(o+1)%7;return r})).args([["start_date","date"],["end_date","date"],["holidays",["collect","date"]]]),hi("days",(function(t,e){return t-e})).args([["*start_date","date"],["*end_date","date"]]),Qn.runtime._days_360=Or,hi("days360",Or).args([["*start_date","date"],["*end_date","date"],["*method",["or","logical",["null",!1]]]]),hi("yearfrac",(function(t,e,n){switch(n){case 0:return Or(t,e,!1)/360;case 1:return(e-t)/mi(vi(t).year);case 2:return(e-t)/360;case 3:return(e-t)/365;case 4:return Or(t,e,!0)/360}})).args([["*start_date","date"],["*end_date","date"],["*method",["or",["null",0],["values",0,1,2,3,4]]]]),hi("datevalue",(function(t){var e=Qn.runtime.parseDate(t);return e?Qn.runtime.dateToSerial(e):new Bn("VALUE")})).args([["*text","string"]]),hi("timevalue",(function(t){var e=t.toLowerCase().match(/(\d+):(\d+)(:(\d+)(\.(\d+))?)?\s*(am?|pm?)?/);if(e){var n=parseFloat(e[1]),i=parseFloat(e[2]),r=e[3]?parseFloat(e[4]):0,o=e[7];return o&&(n>12||n<1)?new Bn("VALUE"):(/^p/.test(o)&&(n+=12),Qn.runtime.packTime(n,i,r,0))}return new Bn("VALUE")})).args([["*text","string"]]),hi("mdeterm",(function(t){return t.each((function(t){if("number"!=typeof t)return new Bn("VALUE")}),!0)||t.determinant()})).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]),hi("transpose",(function(t){return t.transpose()})).args([["range","matrix"]]),hi("mmult",(function(t,e){return t.multiply(e)})).args([["a","matrix"],["b",["and","matrix",["assert","$b.height == $a.width"]]]]),hi("munit",(function(t){return new ii(this).unit(t)})).args([["n","integer+"]]),hi("minverse",(function(t){return t.each((function(t){if("number"!=typeof t)return new Bn("VALUE")}),!0)||t.inverse()||new Bn("VALUE")})).args([["m",["and","matrix",["assert","$m.width == $m.height"]]]]),hi("rand",(function(){return Math.random()})).args([]),hi("randbetween",(function(t,e){return t+Math.floor((e-t+1)*Math.random())})).args([["min","integer"],["max",["and","integer",["assert","$max >= $min"]]]]),hi("true",(function(){return!0})).args([]),hi("false",(function(){return!0})).args([]),hi("roman",(function(t){return function(t){let e={1:"i",10:"x",100:"c",2:"ii",20:"xx",200:"cc",3:"iii",30:"xxx",300:"ccc",4:"iv",40:"xl",400:"cd",5:"v",50:"l",500:"d",6:"vi",60:"lx",600:"dc",7:"vii",70:"lxx",700:"dcc",8:"viii",80:"lxxx",800:"dccc",9:"ix",90:"xc",900:"cm",1e3:"m"},n=[1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],i="";for(;t>0;)t<n[0]?n.shift():(i+=e[n[0]],t-=n[0]);return i}(t).toUpperCase()})).args([["*number","integer"]]),hi("arabic",(function(t){var e=function(t){t=t.toLowerCase();let e={i:1,v:5,x:10,l:50,c:100,d:500,m:1e3},n=0,i=0;for(let r=0;r<t.length;++r){let o=e[t.charAt(r)];if(!o)return null;n+=o,o>i&&(n-=2*i),i=o}return n}(t);return null==e?new Bn("VALUE"):e})).args([["*roman","string"]]),hi("base",(function(t,e,n){for(var i=t.toString(e).toUpperCase();i.length<n;)i="0"+i;return i})).args([["*number","integer"],["*radix",["and","integer",["[between]",2,36]]],["*minLen",["or","integer+",["null",0]]]]),hi("decimal",(function(t,e){t=t.toUpperCase();for(var n=0,i=0;i<t.length;++i){var r=t.charCodeAt(i);if(r>=48&&r<=57)r-=48;else{if(!(r>=65&&r<55+e))return new Bn("VALUE");r-=55}n=n*e+r}return n})).args([["*text","string"],["*radix",["and","integer",["[between]",2,36]]]]),hi("char",(function(t){return String.fromCharCode(t)})).args([["*code","integer+"]]);var Ir=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function Dr(t,e){this.link=t,this.text=e}hi("clean",(function(t){return t.replace(Ir,"")})).args([["*text","string"]]),hi("code",(function(t){return t.charAt(0)})).args([["*text","string"]]),Qn.runtime.defineAlias("unichar","char"),Qn.runtime.defineAlias("unicode","code"),hi("concatenate",(function(t){for(var e="",n=0;n<t.length;++n)e+=t[n];return e})).args([["+",["*text","string"]]]),hi("dollar",(function(t,e){for(var n="$#,##0DECIMALS;($#,##0DECIMALS)",i="",r=1;e-- >0;)i+="0";for(;++e<0;)r*=10;return""!==i?i="."+i:1!==r&&(t=Math.round(t/r)*r),n=n.replace(/DECIMALS/g,i),zo.text(t,n)})).args([["*number","number"],["*decimals",["or","integer",["null",2]]]]),hi("exact",(function(t,e){return t===e})).args([["*text1","string"],["*text2","string"]]),hi("find",(function(t,e,n){var i=e.indexOf(t,n-1);return i<0?new Bn("VALUE"):i+1})).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]),hi("fixed",(function(t,e,n){var i=Math.pow(10,e);t=Math.round(t*i)/i;var r=n?"0":"#,##0";if(e>0)for(r+=".";e-- >0;)r+="0";return zo.text(t,r)})).args([["*number","number"],["*decimals",["or","integer",["null",2]]],["*noCommas",["or","boolean",["null",!1]]]]),hi("left",(function(t,e){return t.substr(0,e)})).args([["*text","string"],["*length",["or","integer+",["null",1]]]]),hi("right",(function(t,e){return t.substr(-e)})).args([["*text","string"],["*length",["or","integer+",["null",1]]]]),hi("len",(function(t){return t.length})).args([["*text","string"]]),hi("lower",(function(t){return t.toLowerCase()})).args([["*text","string"]]),hi("upper",(function(t){return t.toUpperCase()})).args([["*text","string"]]),hi("ltrim",(function(t){return t.replace(/^\s+/,"")})).args([["*text","string"]]),hi("rtrim",(function(t){return t.replace(/\s+$/,"")})).args([["*text","string"]]),hi("trim",(function(t){return t.replace(/^\s+|\s+$/,"")})).args([["*text","string"]]),hi("mid",(function(t,e,n){return t.substr(e-1,n)})).args([["*text","string"],["*start","integer++"],["*length","integer+"]]),hi("proper",(function(t){return t.toLowerCase().replace(/\b./g,(function(t){return t.toUpperCase()}))})).args([["*text","string"]]),hi("replace",(function(t,e,n,i){return t.substr(0,--e)+i+t.substr(e+n)})).args([["*text","string"],["*start","integer++"],["*length","integer+"],["*newText","string"]]),hi("rept",(function(t,e){for(var n="";e-- >0;)n+=t;return n})).args([["*text","string"],["*number","integer+"]]),hi("search",(function(t,e,n){var i=e.toLowerCase().indexOf(t.toLowerCase(),n-1);return i<0?new Bn("VALUE"):i+1})).args([["*substring","string"],["*string","string"],["*start",["or","integer++",["null",1]]]]),hi("substitute",(function(t,e,n,i){if(e===n)return t;var r=t.split(e);if(null==i)return r.join(n);t="",i--;for(var o=0;o<r.length;++o)t+=r[o],o<r.length-1&&(t+=o===i?n:e);return t})).args([["*text","string"],["*oldText","string"],["*newText","string"],["*nth",["or","integer++","null"]]]),hi("t",(function(t){return"string"==typeof t?t:""})).args([["*value","anyvalue"]]),hi("text",(function(t,e){return zo.text(t,e)})).args([["*value","anyvalue"],["*format","string"]]),hi("value",(function(t){return"number"==typeof t?t:"boolean"==typeof t?+t:(t=(t+"").replace(/[$€,]/g,""),t=parseFloat(t),isNaN(t)?new Bn("VALUE"):t)})).args([["*value","anyvalue"]]),Dr.prototype.toString=function(){return this.text},hi("hyperlink",(function(t,e){return new Dr(t,e)})).args([["*link","string"],["*text",["or","string",["null","$link"]]]]),hi("iferror",(function(t,e){return t instanceof Bn?e:t})).args([["*value","forced!"],["*value_if_error","anyvalue!"]]);var Fr=function(){var t=Object.create(null);function e(t,e){if("string"==typeof e){var n=parseFloat(e);isNaN(n)||n!=e||(e=n)}return function(n){var i=e;return"string"==typeof n&&"string"==typeof i&&(n=n.toLowerCase(),i=i.toLowerCase()),t(n,i)}}function n(t){var e,n;return"string"==typeof t&&(t=t.toLowerCase()),/^[0-9.]+%$/.test(t)?(n=t.substr(0,t.length-1),e=parseFloat(n),isNaN(e)||e!=n||(t=e/100)):/^[0-9.]+$/.test(t)&&(e=parseFloat(t),isNaN(e)||e!=t||(t=e)),t}function i(t,e){return n(t)<n(e)}function r(t,e){return n(t)<=n(e)}function o(t,e){return n(t)>n(e)}function s(t,e){return n(t)>=n(e)}function a(t,e){return!l(t,e)}function l(t,e){return e instanceof RegExp?e.test(t):("string"!=typeof t&&"string"!=typeof e||(t=String(t),e=String(e)),n(t)==n(e))}return function(n){if("function"==typeof n)return n;var c;if(c=/^=(.*)$/.exec(n))return e(l,c[1]);if(c=/^<>(.*)$/.exec(n))return e(a,c[1]);if(c=/^<=(.*)$/.exec(n))return e(r,c[1]);if(c=/^<(.*)$/.exec(n))return e(i,c[1]);if(c=/^>=(.*)$/.exec(n))return e(s,c[1]);if(c=/^>(.*)$/.exec(n))return e(o,c[1]);if(/[?*]/.exec(n)){var h=t[n];return h||(h=n.replace(/(~\?|~\*|[\]({\+\.\|\^\$\\})\[]|[?*])/g,(function(t){switch(t){case"~?":return"\\?";case"~*":return"\\*";case"?":return".";case"*":return".*";default:return"\\"+t}})),h=t[n]=new RegExp("^"+h+"$","i")),e(l,h)}return e(l,n)}}();function Pr(t){return"number"==typeof t||"boolean"==typeof t||null==t||""===t}function Rr(t,e){return t===e?0:t<e?-1:1}function Lr(t,e){return t===e?0:t<e?1:-1}hi("ERF",(function(t,e){return null==e?Hr(t):Hr(e)-Hr(t)})).args([["lower_limit","number"],["upper_limit",["or","number","null"]]]),hi("ERFC",Ur).args([["x","number"]]),hi("GAMMALN",Vr).args([["x","number++"]]),hi("GAMMA",Wr).args([["x","number"]]),hi("GAMMA.DIST",Gr).args([["x","number+"],["alpha","number++"],["beta","number++"],["cumulative","logical"]]),hi("GAMMA.INV",Yr).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"]]),hi("NORM.S.DIST",Jr).args([["z","number"],["cumulative","logical"]]),hi("NORM.S.INV",Zr).args([["p",["and","number",["[between]",0,1]]]]),hi("NORM.DIST",(function(t,e,n,i){if(!i)return Math.exp(-(t-e)*(t-e)/(2*n*n))/(n*Math.sqrt(2*Math.PI));return Jr((t-e)/n,!0)})).args([["x","number"],["mean","number"],["stddev","number++"],["cumulative","logical"]]),hi("NORM.INV",Qr).args([["p",["and","number",["[between]",0,1]]],["mean","number"],["stddev","number++"]]),hi("BETADIST",(function(t,e,n,i,r){return to((t-i)/(r-i),e,n)})).args([["x","number"],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]),hi("BETA.DIST",(function(t,e,n,i,r,o){if(i)return to((t-r)/(o-r),e,n);return function(t,e,n){return Math.exp((e-1)*Math.log(t)+(n-1)*Math.log(1-t)-qr(e,n))}((t-r)/(o-r),e,n)/(o-r)})).args([["x","number"],["alpha","number++"],["beta","number++"],["cumulative","logical"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]],["?",["assert","$x >= $A","NUM"]],["?",["assert","$x <= $B","NUM"]],["?",["assert","$A < $B","NUM"]]]),hi("BETA.INV",io).args([["p",["and","number",["[between]",0,1]]],["alpha","number++"],["beta","number++"],["A",["or","number",["null",0]]],["B",["or","number",["null",1]]]]),hi("CHISQ.DIST",ro).args([["x","number+"],["deg_freedom","integer++"],["cumulative","logical"]]),hi("CHISQ.DIST.RT",oo).args([["x","number+"],["deg_freedom","integer++"]]),hi("CHISQ.INV",so).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]),hi("CHISQ.INV.RT",(function(t,e){return so(1-t,e)})).args([["p",["and","number",["[between]",0,1]]],["deg_freedom","integer++"]]),hi("CHISQ.TEST",(function(t,e){return function(t,e){var n,i,r=t.length,o=t[0].length,s=0;for(n=0;n<r;n++)for(i=0;i<o;i++){var a=e[n][i],l=t[n][i]-a;s+=(l*=l)/a}return oo(s,(r-1)*(o-1))}(t.data,e.data)})).args([["actual_range","matrix"],["expected_range","matrix"],["?",["assert","$actual_range.width == $expected_range.width"]],["?",["assert","$actual_range.height == $expected_range.height"]]]),hi("EXPON.DIST",(function(t,e,n){if(n)return 1-Math.exp(-e*t);return e*Math.exp(-e*t)})).args([["x","number+"],["lambda","number++"],["cumulative","logical"]]),hi("POISSON.DIST",(function(t,e,n){if(n)return 1-ro(2*e,2*(t+1),!0);for(var i=0,r=2;r<=t;r++)i+=Math.log(r);return Math.exp(t*Math.log(e)-e-i)})).args([["x","integer+"],["mean","number+"],["cumulative","logical"]]),hi("F.DIST",ao).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"],["cumulative","logical"]]),hi("F.DIST.RT",(function(t,e,n){return 1-ao(t,e,n,!0)})).args([["x","number+"],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),hi("F.INV",(function(t,e,n){return n/e*(1/io(1-t,n/2,e/2,0,1)-1)})).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),hi("F.INV.RT",(function(t,e,n){return n/e*(1/io(t,n/2,e/2,0,1)-1)})).args([["p",["and","number",["[between]",0,1]]],["deg_freedom1","integer++"],["deg_freedom2","integer++"]]),hi("F.TEST",(function(t,e){var n=t.length-1,i=e.length-1,r=co(t,lo(t)),o=co(e,lo(e));if(!r||!o)throw new Bn("DIV/0");return 2*ao(r/o,n,i,!0)})).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]),hi("FISHER",(function(t){return.5*Math.log((1+t)/(1-t))})).args([["x",["and","number",["(between)",-1,1]]]]),hi("FISHERINV",(function(t){var e=Math.exp(2*t);return(e-1)/(e+1)})).args([["y","number"]]),hi("T.DIST",ho).args([["x","number"],["deg_freedom","integer++"],["cumulative","logical"]]),hi("T.DIST.RT",uo).args([["x","number"],["deg_freedom","integer++"]]),hi("T.DIST.2T",po).args([["x","number+"],["deg_freedom","integer++"]]),hi("T.INV",fo).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]),hi("T.INV.2T",(function(t,e){return fo(1-t/2,e)})).args([["p",["and","number",["(between]",0,1]]],["deg_freedom","integer++"]]),hi("T.TEST",(function(t,e,n,i){var r,o,s=t.length,a=e.length;if(1==i){for(var l=0,c=0,h=0;h<s;h++){var u=t[h]-e[h];l+=u,c+=u*u}var d=l/s;return r=d/Math.sqrt((c-l*d)/(s*(s-1))),1==n?uo(r,s-1):po(r,s-1)}var p=lo(t),f=lo(e),g=co(t,p),m=co(e,f);if(3==i){var y=g/s,v=m/a,b=y+v,w=y/b,x=v/b;return o=1/(w*w/(s-1)+x*x/(a-1)),r=$r(p-f)/Math.sqrt(b),1==n?uo(r,o):po(r,o)}return o=s+a-2,r=$r(p-f)*Math.sqrt(o*s*a/((s+a)*((s-1)*g+(a-1)*m))),1==n?uo(r,o):po(r,o)})).args([["array1",["collect","number",1]],["array2",["collect","number",1]],["tails",["and","integer",["values",1,2]]],["type",["and","integer",["values",1,2,3]]],["?",["assert","$type != 1 || $array1.length == $array2.length","N/A"]],["?",["assert","$array1.length >= 2","DIV/0"]],["?",["assert","$array2.length >= 2","DIV/0"]]]),hi("CONFIDENCE.T",(function(t,e,n){return-fo(t/2,n-1)*e/Math.sqrt(n)})).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++",["assert","$size != 1","DIV/0"]]]]),hi("CONFIDENCE.NORM",(function(t,e,n){return-Zr(t/2)*e/Math.sqrt(n)})).args([["alpha",["and","number",["(between)",0,1]]],["standard_dev","number++"],["size",["and","integer++"]]]),hi("GAUSS",(function(t){return Jr(t,!0)-.5})).args([["z","number"]]),hi("PHI",(function(t){return Jr(t)})).args([["x","number"]]),hi("LOGNORM.DIST",(function(t,e,n,i){if(i)return.5+.5*Hr((Math.log(t)-e)/(n*Math.sqrt(2)));var r=Math.log(t)-e;return Math.exp(-r*r/(2*n*n))/(t*n*Math.sqrt(2*Math.PI))})).args([["x","number++"],["mean","number"],["standard_dev","number++"],["cumulative","logical"]]),hi("LOGNORM.INV",(function(t,e,n){return Math.exp(Qr(t,e,n))})).args([["probability",["and","number",["(between)",0,1]]],["mean","number"],["standard_dev","number++"]]),hi("PROB",(function(t,e,n,i){var r,o=t.length,s=0;for(r=0;r<o;r++){if(e[r]<=0||e[r]>1)throw new Bn("NUM");s+=e[r]}if(1!=s)throw new Bn("NUM");var a=0;for(r=0;r<o;r++){var l=t[r];l>=n&&l<=i&&(a+=e[r])}return a})).args([["x_range",["collect","number",1]],["prob_range",["collect","number",1]],["lower_limit","number"],["upper_limit",["or","number",["null","$lower_limit"]]],["?",["assert","$prob_range.length == $x_range.length","N/A"]]]),hi("SLOPE",(function(t,e){for(var n=lo(e),i=lo(t),r=0,o=0,s=0,a=t.length;s<a;s++){var l=e[s]-n;r+=l*(t[s]-i),o+=l*l}return r/o})).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),hi("INTERCEPT",(function(t,e){for(var n=lo(e),i=lo(t),r=0,o=0,s=0,a=t.length;s<a;s++){var l=e[s]-n;r+=l*(t[s]-i),o+=l*l}return i-r*n/o})).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),hi("PEARSON",go).args([["array1",["collect!","anything",1]],["array2",["collect!","anything",1]],["?",["assert","$array2.length == $array1.length","N/A"]],["?",["assert","$array2.length > 0 && $array1.length > 0","N/A"]]]),hi("RSQ",(function(t,e){var n=go(t,e);return n*n})).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]],["?",["assert","$known_x.length != 1 && $known_y.length != 1","N/A"]]]),hi("STEYX",(function(t,e){for(var n=e.length,i=lo(e),r=lo(t),o=0,s=0,a=0,l=0;l<n;l++){var c=e[l]-i,h=t[l]-r;o+=h*h,s+=c*h,a+=c*c}return Math.sqrt((o-s*s/a)/(n-2))})).args([["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length >= 3 && $known_y.length >= 3","DIV/0"]]]),hi("FORECAST",(function(t,e,n){for(var i=lo(n),r=lo(e),o=0,s=0,a=0,l=n.length;a<l;a++){var c=n[a]-i;o+=c*(e[a]-r),s+=c*c}if(0===s)throw new Bn("N/A");var h=o/s;return r-h*i+h*t})).args([["x","number"],["known_y",["collect","number",1]],["known_x",["collect","number",1]],["?",["assert","$known_x.length == $known_y.length","N/A"]],["?",["assert","$known_x.length > 0 && $known_y.length > 0","N/A"]]]),hi("LINEST",vo).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]],["stats",["or","logical",["null",!1]]]]),hi("LOGEST",(function(t,e,n,i){return vo.call(this,t.map(Math.log),e,n,i).map(Math.exp)})).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]],["stats",["or","logical",["null",!1]]]]),hi("TREND",bo).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]]]),hi("GROWTH",(function(t,e,n,i){return bo.call(this,t.map(Math.log),e,n,i).map(Math.exp)})).args([["known_y","matrix"],["known_x",["or","matrix","null"]],["new_x",["or","matrix","null"]],["const",["or","logical",["null",!0]]]]),hi("FV",xo).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["pv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$pmt || $pv"]]]),hi("PV",(function(t,e,n,i,r){if(!t)return-i-n*e;var o=Math.pow(1+t,e);return-(i+n*(o-1)/t*(1+t*r))/o})).args([["rate","number"],["nper","number"],["pmt",["or","number",["null",0]]],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]),hi("PMT",_o).args([["rate","number"],["nper","number"],["pmt","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]),hi("NPER",(function(t,e,n,i,r){if(!t)return-(i+n)/e;var o=e*(1+t*r);return Math.log((o-i*t)/(o+n*t))/Math.log(1+t)})).args([["rate","number"],["pmt","number"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]]]),hi("RATE",(function(t,e,n,i,r,o){return wo((function(o){var s=Math.pow(1+o,t-1),a=s*(1+o);return[n*a+e*(1/o+r)*(a-1)+i,t*n*s+e*(-(a-1)/(o*o)+(1/o+r)*t*s)]}),o)})).args([["nper","number"],["pmt",["or","number",["null",0]]],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["guess",["or","number++",["null",.01]]],["?",["assert","$pmt || $fv"]]]),hi("IPMT",So).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]),hi("PPMT",(function(t,e,n,i,r,o){return _o(t,n,i,r,o)-So(t,e,n,i,r,o)})).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["fv",["or","number",["null",0]]],["type",["or",["values",0,1],["null",0]]],["?",["assert","$per >= 1 && $per <= $nper"]]]),hi("CUMPRINC",(function(t,e,n,i,r,o){1==o&&(i--,r--);var s=Math.pow(1+t,e),a=Math.pow(1+t,i-1),l=Math.pow(1+t,r),c=t*n*s/(s-1);return l*n-(l-1)/t*c-(a*n-(a-1)/t*c)})).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]),hi("CUMIPMT",(function(t,e,n,i,r,o){for(var s=0,a=i;a<=r;a++)s+=So(t,a,e,n,0,o);return s})).args([["rate","number++"],["nper","number++"],["pv","number++"],["start_period","number++"],["end_period","number++"],["type",["or",["values",0,1],["null",0]]],["?",["assert","$end_period >= $start_period","NUM"]]]),hi("NPV",(function(t,e){for(var n=0,i=0,r=e.length;i<r;i++)n+=e[i]*Math.pow(1+t,-i-1);return n})).args([["rate","number"],["values",["collect","number"]],["?",["assert","$values.length > 0","N/A"]]]),hi("IRR",(function(t,e){return wo((function(e){for(var n=0,i=0,r=0,o=t.length;r<o;r++)n+=t[r]*Math.pow(1+e,-r-1),i+=-r*t[r]*Math.pow(1+e,-r-2);return[n,i]}),e)})).args([["values",["collect","number",1]],["guess",["or","number",["null",.1]]]]),hi("EFFECT",(function(t,e){return Math.pow(1+t/e,e)-1})).args([["nominal_rate","number++"],["npery","integer++"]]),hi("NOMINAL",(function(t,e){return e*(Math.pow(t+1,1/e)-1)})).args([["effect_rate","number++"],["npery","integer++"]]),hi("XNPV",(function(t,e,n){for(var i=0,r=0,o=e.length;r<o;r++)i+=e[r]*Math.pow(1+t,(n[0]-n[r])/365);return i})).args([["rate","number"],["values",["collect","number",1]],["dates",["collect","date",1]],["?",["assert","$values.length == $dates.length","NUM"]]]),hi("XIRR",(function(t,e,n){return wo((function(n){for(var i=t[0],r=0,o=1,s=t.length;o<s;o++){var a=(e[0]-e[o])/365;i+=t[o]*Math.pow(1+n,a),r+=a*t[o]*Math.pow(1+n,a-1)}return[i,r]}),n)})).args([["values",["collect","number",1]],["dates",["collect","date",1]],["guess",["or","number",["null",.1]]],["?",["assert","$values.length == $dates.length","NUM"]]]),hi("ISPMT",(function(t,e,n,i){return-i*t*(1-e/n)})).args([["rate","number"],["per","number++"],["nper","number++"],["pv","number"],["?",["assert","$per >= 1 && $per <= $nper"]]]),hi("DB",(function(t,e,n,i,r){var o=1-Math.pow(e/t,1/n);o=Math.floor(1e3*o+.5)/1e3;var s=t*o*r/12;if(1==i)return s;for(var a=1;a<n;a++){if(a==i-1)return(t-s)*o;s+=(t-s)*o}return(t-s)*o*(12-r)/12})).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["month",["or","number",["null",12]]]]),hi("DDB",(function(t,e,n,i,r){var o=r/n,s=-t*(Math.pow(1-o,i-1)-1),a=(t-s)*o;return a=Math.min(a,Math.max(0,t-s-e))})).args([["cost","number"],["salvage","number"],["life","number++"],["period","number++"],["factor",["or","number",["null",2]]]]),hi("SLN",(function(t,e,n){return(t-e)/n})).args([["cost","number"],["salvage","number"],["life","number++"]]),hi("SYD",(function(t,e,n,i){return(t-e)*(n-i+1)*2/(n*(n+1))})).args([["cost","number"],["salvage","number"],["life","number++"],["per","number++"]]),hi("VDB",(function(t,e,n,i,r,o,s){var a=o>=n?1:o/n;function l(t,n){var i,r,o;return r=1==a?1==n?t:0:t*Math.pow(1-a,n-1),(i=(o=t*Math.pow(1-a,n))<e?r-e:r-o)<0?0:i}function c(t,n,i){for(var r,o=t-e,s=Math.ceil(i),a=0,c=0,h=!1,u=1;u<=s;u++){if(h)r=a;else{var d=l(t,u);(a=o/(n-u+1))>d?(r=a,h=!0):(r=d,o-=d)}u==s&&(r*=i+1-s),c+=r}return c}var h=Math.floor(i),u=Math.ceil(r),d=0;if(s)for(var p=h+1;p<=u;p++){var f=l(t,p);p==h+1?f*=Math.min(r,h+1)-i:p==u&&(f*=r+1-u),d+=f}else{var g=n;if(i!=Math.floor(i)&&o>1&&i>=n/2){var m=i-n/2;i=n/2,r-=m,g+=1}t-=c(t,g,i),d=c(t,n-i,r-i)}return d})).args([["cost","number+"],["salvage","number+"],["life","number++"],["start_period","number+"],["end_period","number+"],["factor",["or","number+",["null",2]]],["no_switch",["or","logical",["null",!1]]],["?",["assert","$end_period >= $start_period","NUM"]]]);var Nr=[["settlement","date"],["maturity","date"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]];hi("COUPDAYBS",(function(t,e,n,i){return ko(Ao(t,e,n)[0],t,i)})).args(Nr),hi("COUPDAYS",(function(t,e,n,i){if(1==i){var r=Ao(t,e,n);return ko(r[0],r[1],1)}if(3==i)return 365/n;return 360/n})).args(Nr),hi("COUPDAYSNC",(function(t,e,n,i){var r=Ao(t,e,n)[1];return ko(t,r,i)})).args(Nr),hi("COUPPCD",(function(t,e,n){return Ao(t,e,n)[0]})).args(Nr),hi("COUPNCD",(function(t,e,n){return Ao(t,e,n)[1]})).args(Nr),hi("COUPNUM",(function(t,e,n){var i=vi(t),r=vi(e);return 1+((12*(r.year-i.year)+r.month-i.month)*n/12|0)})).args(Nr),hi("ACCRINTM",(function(t,e,n,i,r){var o=Eo(vi(e).year,r);return n*i*ko(t,e,r)/o})).args([["issue","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$issue < $settlement","NUM"]]]),hi("ACCRINT",(function(t,e,n,i,r,o,s,a){var l,c,h,u,d,p,f=0,g=r*i/o,m=s%2==0?360:365;function y(t,e){return(e-t)*o/m|0}return n<=e?(c=(l=Ao(n,e,o))[0],h=l[1],c<=t?g*ko(t,n,s)/ko(c,h,s):(u=(l=Ao(t,c,o))[0],g*((p=y(d=l[1],n))+ko(t,d,s)/ko(u,d,s)+(n<h?ko(c,n,s)/ko(c,h,s):0)))):(l=function(t,e,n){var i=vi(e),r=vi(t),o=i.year-r.year;o>0&&(o=(o-1)*n);var s,a=t,l=12/n;for(;e>a;)s=a,a=Co(t,++o*l);return[s,a]}(e,n,o),c=l[0],h=l[1],p=y(e,n),f=h==n?g*p:g*(p+ko(c,n,s)/ko(c,h,s)),a?(c=(l=Ao(t,e,o))[0],h=l[1],f+=g*((p=y(t,e))+ko(t,h,s)/ko(c,h,s))):f)})).args([["issue","date"],["first_interest","date"],["settlement","date"],["rate","number++"],["par",["or",["null",1e3],"number++"]],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["calc_method",["or","logical",["null",!0]]],["?",["assert","$issue < $settlement","NUM"]]]),hi("DISC",(function(t,e,n,i,r){var o=r%2==0?360:gi(vi(t).year)?366:365;return(i-n)/i*o/ko(t,e,r)})).args([["settlement","date"],["maturity","date"],["pr","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),hi("INTRATE",(function(t,e,n,i,r){var o=r%2==0?360:gi(vi(t).year)?366:365;return(i-n)/n*o/ko(t,e,r)})).args([["settlement","date"],["maturity","date"],["investment","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),hi("RECEIVED",(function(t,e,n,i,r){var o=r%2==0?360:gi(vi(t).year)?366:365;return n/(1-i*ko(t,e,r)/o)})).args([["settlement","date"],["maturity","date"],["investment","number++"],["discount","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),hi("PRICE",(function(t,e,n,i,r,o,s){var a=1+((e-t)*o/(s%2==0?360:365)|0),l=Ao(t,e,o),c=l[0],h=l[1],u=ko(c,t,s),d=ko(t,h,s),p=ko(c,h,s),f=100*n/o,g=i/o,m=d/p;if(1==a)return(r+f)/(1+m*g)-u/p*f;return r/Math.pow(1+g,a-1+m)+f*Math.pow(1+g,1-a-m)*(Math.pow(1+g,a)-1)/g-u/p*f})).args([["settlement","date"],["maturity","date"],["rate","number++"],["yld","number++"],["redemption","number++"],["frequency",["and","integer",["values",1,2,4]]],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]),hi("PRICEDISC",(function(t,e,n,i,r){var o=ko(t,e,r),s=Eo(vi(e).year,r);return i-n*i*o/s})).args([["settlement","date"],["maturity","date"],["discount","number++"],["redemption","number++"],["basis",["or",["null",0],["and","integer",["values",0,1,2,3,4]]]],["?",["assert","$settlement < $maturity","NUM"]]]);var Br=300,jr=22204e-20,zr=1e-30,$r=Math.abs;function Hr(t){if($r(t)>=3.3)return 1-Ur(t);var e=t>0?1:-1;-1==e&&(t=-t);for(var n=0,i=1,r=1;r<100;r++)n+=i,i*=2*t*t/(2*r+1);return 2*e/Math.sqrt(Math.PI)*t*Math.exp(-t*t)*n}function Ur(t){if($r(t)<3.3)return 1-Hr(t);var e=1;t<0&&(e=-1,t=-t);for(var n=t,i=8;i>=1;i-=.5)n=t+i/n;return n=1/(t+n),1==e?Math.exp(-t*t)/Math.sqrt(Math.PI)*n:2-Math.exp(-t*t)/Math.sqrt(Math.PI)*n}function Vr(t){var e=[1.000000000190015,76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=t,i=t+5.5,r=e[0];i-=(t+.5)*Math.log(i);for(var o=1;o<=6;o++)r+=e[o]/(n+=1);return-i+Math.log(Math.sqrt(2*Math.PI)*r/t)}function Wr(t){if(t>0)return Math.exp(Vr(t));var e=Math.PI,n=-t;return-e/(n*Wr(n)*Math.sin(e*n))}function qr(t,e){return Vr(t)+Vr(e)-Vr(t+e)}function Kr(t,e){return Math.exp(qr(t,e))}function Xr(t,e){return e<t+1?function(t,e){var n,i=1/t,r=i,o=t,s=Vr(t);for(n=1;n<=Br&&(i+=r*=e/++o,!($r(r)<$r(i)*jr));n++);return i*Math.exp(-e+t*Math.log(e)-s)}(t,e):1-function(t,e){for(var n=zr,i=n,r=0,o=1,s=e+1-t,a=Vr(t),l=1;l<=Br;l++){$r(r=s+o*r)<zr&&(r=zr),$r(i=s+o/i)<zr&&(i=zr);var c=i*(r=1/r);if(n*=c,$r(c-1)<jr)break;s+=2,o=-l*(l-t)}return n*Math.exp(-e-a+t*Math.log(e))}(t,e)}function Gr(t,e,n,i){return i?Xr(e,t/n):Math.pow(t/n,e-1)*Math.exp(-t/n)/(n*Wr(e))}function Yr(t,e,n){if(0===t)return 0;if(1==t)return 1/0;var i=0,r=10,o=0,s=e*n;s>1&&(r*=s);for(var a=0;a<Br;a++){var l=Gr(o=.5*(i+r),e,n,!0);if($r(t-l)<1e-16)break;l>t?r=o:i=o}return o}function Jr(t,e){return e?.5+.5*Hr(t/Math.sqrt(2)):Math.exp(-t*t/2)/Math.sqrt(2*Math.PI)}function Zr(t){var e,n,i=[-39.69683028665376,220.9460984245205,-275.9285104469687,138.357751867269,-30.66479806614716,2.506628277459239],r=[-54.47609879822406,161.5858368580409,-155.6989798598866,66.80131188771972,-13.28068155288572],o=[-.007784894002430293,-.3223964580411365,-2.400758277161838,-2.549732539343734,4.374664141464968,2.938163982698783],s=[.007784695709041462,.3224671290700398,2.445134137142996,3.754408661907416],a=.02425;return t<a?(e=Math.sqrt(-2*Math.log(t)),(((((o[0]*e+o[1])*e+o[2])*e+o[3])*e+o[4])*e+o[5])/((((s[0]*e+s[1])*e+s[2])*e+s[3])*e+1)):.97575<t?(e=Math.sqrt(-2*Math.log(1-t)),-(((((o[0]*e+o[1])*e+o[2])*e+o[3])*e+o[4])*e+o[5])/((((s[0]*e+s[1])*e+s[2])*e+s[3])*e+1)):(((((i[0]*(n=(e=t-.5)*e)+i[1])*n+i[2])*n+i[3])*n+i[4])*n+i[5])*e/(((((r[0]*n+r[1])*n+r[2])*n+r[3])*n+r[4])*n+1)}function Qr(t,e,n){return e+n*Zr(t)}function to(t,e,n){var i=Math.exp(e*Math.log(t)+n*Math.log(1-t)-qr(e,n));return t<(e+1)/(e+n+2)?i*eo(e,n,t)/e:1-i*eo(n,e,1-t)/n}function eo(t,e,n){var i,r,o,s,a,l,c,h,u,d;for(u=t-1,s=1,$r(a=1-(h=t+e)*n/(d=t+1))<zr&&(a=zr),c=a=1/a,i=1;i<=Br&&($r(a=1+(o=i*(e-i)*n/((u+(r=2*i))*(t+r)))*a)<zr&&(a=zr),$r(s=1+o/s)<zr&&(s=zr),c*=(a=1/a)*s,$r(a=1+(o=-(t+i)*(h+i)*n/((t+r)*(d+r)))*a)<zr&&(a=zr),$r(s=1+o/s)<zr&&(s=zr),c*=l=(a=1/a)*s,!($r(l-1)<jr));i++);return c}function no(t,e,n){for(var i=0,r=1,o=0,s=0;s<Br;s++){var a=to(o=.5*(i+r),e,n);if($r(t-a)<jr)break;a>t?r=o:i=o}return o}function io(t,e,n,i,r){return i+(r-i)*no(t,e,n)}function ro(t,e,n){return Gr(t,e/2,2,n)}function oo(t,e){return 1-ro(t,e,!0)}function so(t,e){return Yr(t,e/2,2)}function ao(t,e,n,i){if(i)return to(e*t/(n+e*t),e/2,n/2);var r=e/n;return r/Kr(e/=2,n/=2)*Math.pow(r*t,e-1)/Math.pow(1+r*t,e+n)}function lo(t){for(var e=0,n=t.length,i=0;i<n;i++)e+=t[i];return e/n}function co(t,e){for(var n=0,i=t.length,r=0;r<i;r++){var o=t[r]-e;n+=o*o}return n/(i-1)}function ho(t,e,n){return n?1-.5*to(e/(t*t+e),e/2,.5):1/(Math.sqrt(e)*Kr(.5,e/2))*Math.pow(1+t*t/e,-(e+1)/2)}function uo(t,e){return 1-ho(t,e,!0)}function po(t,e){return t<0&&(t=-t),2*uo(t,e)}function fo(t,e){var n=no(2*Math.min(t,1-t),e/2,.5);return n=Math.sqrt(e*(1-n)/n),t>.5?n:-n}function go(t,e){!function(t,e){for(var n=t.length;--n>=0;)"number"==typeof t[n]&&"number"==typeof e[n]||(t.splice(n,1),e.splice(n,1))}(t,e);for(var n=lo(t),i=lo(e),r=0,o=0,s=0,a=0,l=t.length;a<l;a++){var c=t[a]-n,h=e[a]-i;r+=c*h,o+=c*c,s+=h*h}return r/Math.sqrt(o*s)}function mo(t){for(var e=t.height,n=0,i=0;i<e;i++)n+=t.data[i][0];return n/e}function yo(t,e){for(var n=t.height,i=0,r=0;r<n;r++){var o=t.data[r][0]-e;i+=o*o}return i}function vo(t,e,n,i){var r=0;e||(e=t.map((function(){return++r}))),n&&((e=e.clone()).eachRow((function(t){e.data[t].unshift(1)})),++e.width);var o=e.transpose(),s=o.multiply(e).inverse().multiply(o).multiply(t),a=[];for(r=s.height-1;r>=0;r--)a.push(s.data[r][0]);if(n||a.push(0),!i)return this.asMatrix([a]);var l=e.multiply(s),c=t.adds(l,!0),h=yo(l,n?mo(l):0),u=yo(c,n?mo(c):0),d=[];d.push(h,u);var p=h/(h+u),f=t.height-e.width,g=Math.sqrt(u/f),m=[];m.push(p,g);var y=n?h/(e.width-1)/(u/f):p/e.width/((1-p)/f),v=[];v.push(y,f);var b=o.multiply(e).inverse(),w=[];for(r=b.height-1;r>=0;r--)w.push(Math.sqrt(b.data[r][r]*u/f));return this.asMatrix([a,w,m,v,d])}function bo(t,e,n,i){var r=0;e||(e=t.map((function(){return++r}))),i&&((e=e.clone()).eachRow((function(t){e.data[t].unshift(1)})),++e.width);var o=e.transpose(),s=o.multiply(e).inverse().multiply(o).multiply(t);return n?i&&((n=n.clone()).eachRow((function(t){n.data[t].unshift(1)})),++n.width):n=e,n.multiply(s)}function wo(t,e,n,i){for(var r=n||20,o=i||1e-7,s=e,a=1;a<=r;a++){var l=t(s),c=l[0]/l[1];if(s-=c,Math.abs(c)<o)return s}return new Bn("NUM")}function xo(t,e,n,i,r){var o=Math.pow(1+t,e);return-(i*o+n*(t?(o-1)/t:e)*(1+t*r))}function _o(t,e,n,i,r){if(!t)return-(i+n)/e;var o=Math.pow(1+t,e);return-t*(i+n*o)/((1+t*r)*(o-1))}function So(t,e,n,i,r,o){if(1==o&&1==e)return 0;var s=xo(t,e-1,_o(t,n,i,r,o),i,o)*t;return o?s/(1+t):s}function Co(t,e){var n=vi(t),i=n.month+e,r=n.year+Math.floor(i/12);return(i%=12)<0&&(i+=12),bi(r,i,n=Math.min(n.date,yi(r,i)))}function ko(t,e,n){return 1==n||2==n||3==n?e-t:Or(t,e,n)}function Ao(t,e,n){var i=vi(t),r=vi(e).year-i.year;r>0&&(r=(r-1)*n);var o,s=12/n;do{o=Co(e,-++r*s)}while(t<o);return[o,Co(e,- --r*s)]}function Eo(t,e){return 3==e?365:1==e?gi(t)?366:365:360}class To{constructor(t){this.workbook=t}getRefCells(t,e,n,i,r,o){let s,a,l,c;if(t instanceof mn)return s=this.workbook.sheetByName(t.sheet),s&&t.valid()?(a=s.formula(t),l=s.range(t.row,t.col).value(),o||null!=a||null!=l?[{formula:a,value:l,row:t.row,col:t.col,sheet:t.sheet,hidden:!!e&&(0===s.columnWidth(t.col)||0===s.rowHeight(t.row))}]:[]):[{value:new Bn("REF")}];if(t instanceof yn){c=this.workbook.sheetIndex(t.sheet);let n=[],i=c;if(t.endSheet&&(i=this.workbook.sheetIndex(t.endSheet),c>i)){let t=c;c=i,i=t}if(c<0||i<0||!t.valid())return[{value:new Bn("REF")}];for(;c<=i;){s=this.workbook.sheetByIndex(c++);let i=s._grid.normalize(t.topLeft),r=s._grid.normalize(t.bottomRight),h=s._grid.cellRefIndex(i),u=s._grid.cellRefIndex(r),d=s._properties.iterator("value",h,u);for(let t=i.col;t<=r.col;++t)for(let c=i.row;c<=r.row;++c){let i=s._grid.index(c,t);a=s._properties.get("formula",i),l=d.at(i),(o||null!=a||null!=l)&&n.push({formula:a,value:l,row:c,col:t,sheet:s.name(),hidden:!!e&&(0===s.columnWidth(t)||0===s.rowHeight(c))})}}return n}if(t instanceof vn){let o=[];for(c=0;c<t.refs.length;++c)o=o.concat(this.getRefCells(t.refs[c],e,n,i,r));return o}if(t instanceof gn){let o=this.nameValue(t,n,i,r);return o instanceof pn?this.getRefCells(o,e,n,i,r):[{value:null==o?new Bn("NAME"):o}]}return[]}isMerged(t){return this.workbook.sheetByName(t.sheet).isMerged(t)}nameValue(t,e,n,i){let r;return t.hasSheet()?r=this.workbook.nameValue(this._displayString(t.print())):(t=t.clone().setSheet(e,!0),r=this.workbook.nameValue(this._displayString(t.print())),null==r&&(r=this.workbook.nameValue(this._displayString(t.name)))),r instanceof pn&&(r=r.absolute(n,i)),r}getData(t,e,n,i,r){let o=t instanceof mn;t instanceof gn&&(o=this.workbook.nameValue(t.name)instanceof mn);let s=this.getRefCells(t,!1,e,n,i,r).map((function(t){let e=t.value;return e instanceof Qn.runtime.Formula&&(e=e.value),e}));return o?s[0]:s}onFormula(t){let e=this.workbook.sheetByName(t.sheet),n=t.row,i=t.col,r=t.value;if(e.formula({row:n,col:i})!==t)return!1;let o=t.arrayFormulaRange;if(o){let t,n,i=r.width,s=r.height;e.forEach(o,(function(o,a){void 0===t&&(t=o,n=a);let l,c=o-t,h=a-n;l=c<s&&h<i?r.get(c,h):new Bn("N/A"),e._value(o,a,l)}))}else r instanceof pn&&(r=this.getData(r,t.sheet,n,i),Array.isArray(r)&&(r=r[0]),void 0===r&&(r=null)),r instanceof Qn.runtime.Matrix&&(r=r.get(0,0)),e._value(n,i,r);return clearTimeout(e._formulaContextRefresh),e._formulaContextRefresh=setTimeout((function(){e.batch((function(){}),{layout:!0})}),50),!0}_displayString(t){return/^[a-z_][a-z0-9_]*$/i.test(t)?t:"'"+t.replace(/\x27/g,"\\'")+"'"}}class Mo extends To{onFormula(){return!0}}let Oo=/^\[(black|green|white|blue|magenta|yellow|cyan|red)\]/i,Io=/^\[(<=|>=|<>|<|>|=)(-?[0-9.]+)\]/;function Do(t){t=Qn.InputStream(t);let e,n=[],i=!1;for(;!t.eof();){let t=l();n.push(t),t.cond&&(i=!0)}return i||(1===n.length?n[0].cond="num":2===n.length?(n[0].cond={op:">=",value:0},n[1].cond={op:"<",value:0}):n.length>=3&&(n[0].cond={op:">",value:0},n[1].cond={op:"<",value:0},n[2].cond={op:"=",value:0},n.length>3&&(n[3].cond="text",n=n.slice(0,4)))),n;function r(){let e=t.skip(Oo);if(e)return e[1].toLowerCase()}function o(){let e,n=[],i=null;for(;!t.eof()&&(e=a());)"date"===e.type?i&&/^(el)?time$/.test(i.type)&&"h"===i.part&&"m"===e.part&&e.format<3&&(e.type="time"):/^(el)?time$/.test(e.type)&&"s"===e.part&&i&&"date"===i.type&&"m"===i.part&&i.format<3&&(i.type="time"),/^(?:str|space|fill)$/.test(e.type)||(i=e),n.push(e);return n}function s(e){if("date"!==e.type||"m"===e.part&&e.format<3){let n=t.skip(/^\.(0+)/);n&&(e.fraction=n[1].length,"date"===e.type&&(e.type="time"))}return e}function a(){let n,i;if(i=t.skip(/^([#0?]+)(?:,([#0?]+))+/))return{type:"digit",sep:!0,format:i[1]+i[2],decimal:e};if(i=t.skip(/^[#0?]+/))return{type:"digit",sep:!1,format:i[0],decimal:e};if(i=t.skip(/^(e)([+-])/i))return{type:"exp",ch:i[1],sign:i[2]};if(i=t.skip(/^(d{1,4}|m{1,5}|yyyy|yy|y)/i))return i=i[1].toLowerCase(),s({type:"date",part:i.charAt(0),format:i.length});if(i=t.skip(/^(hh?|ss?)/i))return i=i[1].toLowerCase(),s({type:"time",part:i.charAt(0),format:i.length});if(i=t.skip(/^\[(hh?|mm?|ss?)\]/i))return i=i[1].toLowerCase(),s({type:"eltime",part:i.charAt(0),format:i.length});if(i=t.skip(/^(a[.]?m[.]?\/p[.]?m[.]?|a\/p)/i))return i=i[1].split("/"),{type:"ampm",am:i[0],pm:i[1]};switch(n=t.next()){case";":return null;case"\\":return{type:"str",value:t.next()};case'"':return{type:"str",value:t.readEscaped(n)};case"@":return{type:"text"};case"_":return{type:"space",value:t.next()};case"*":return{type:"fill",value:t.next()};case".":return t.lookingAt(/^\s*[#0?]/)?(e=!0,{type:"dec"}):{type:"str",value:"."};case"%":return{type:"percent"};case",":return{type:"comma"}}return{type:"str",value:n}}function l(){e=!1;let n=r(),i=function(){let e=t.skip(Io);if(e){let t=parseFloat(e[2]);if(!isNaN(t))return{op:e[1],value:t,custom:!0}}}();return!n&&i&&(n=r()),{color:n,cond:i,body:o()}}}function Fo(t){let e=function(t){let e=0;return{next:function(){return t[e++]},eof:function(){return e>=t.length},ahead:function(n,i){if(e+n<=t.length){let r=i.apply(null,t.slice(e,e+n));return r&&(e+=n),r}},restart:function(){e=0}}}(t.body),n=!1,i=!1,r=!1,o=0,s=/[\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]/,a=0,l="let intPart, decPart, isNegative, date, time; ",c=!1,h=0,u=[],d=[],p=t.cond,f="";if("text"===p)f="if (typeof value == 'string' || value instanceof kendo.spreadsheet.CalcError) { ";else if("num"===p)f="if (typeof value == 'number') { ";else if(p){f="if (typeof value == 'number' && value "+("="===p.op?"==":p.op)+" "+p.value+") { ",p.custom||(l+="value = Math.abs(value); ")}function g(t,e){("digit"===t.type&&"comma"===e.type||"comma"===t.type&&t.hidden&&"comma"===e.type)&&(e.hidden=!0,a++)}for(t.color&&(l+="result.color = "+JSON.stringify(t.color)+"; ");!e.eof();){e.ahead(2,g);let t=e.next();"percent"===t.type?o++:"digit"===t.type?t.decimal?(h+=t.format.length,d.push(t.format)):(u.push(t.format),t.sep&&(c=!0)):"time"===t.type?i=!0:"date"===t.type?n=!0:"ampm"===t.type&&(r=i=!0)}for(o>0&&(l+="value *= "+Math.pow(100,o)+"; "),a>0&&(l+="value /= "+Math.pow(1e3,a)+"; "),u.length&&(l+="intPart = runtime.formatInt(culture, value, "+JSON.stringify(u)+", "+h+", "+c+"); ",l+="isNegative = parseInt(intPart[0]) < 0;"),d.length&&(l+="decPart = runtime.formatDec(value, "+JSON.stringify(d)+", "+h+"); "),(u.length||d.length)&&(l+="type = 'number'; "),n&&(l+="date = runtime.unpackDate(value); "),i&&(l+="time = runtime.unpackTime(value); "),(n||i)&&(l+="type = 'date'; "),(o>0||a>0||u.length||d.length||n||i)&&(f||(f="if (typeof value == 'number') { ")),e.restart(),l+="let matchedCurrency = false;";!e.eof();){let t=e.next();"dec"===t.type?l+="output += culture.numbers.symbols.decimal; ":"comma"!==t.type||t.hidden?"percent"===t.type?(l+="type = 'percent'; ",l+="output += culture.numbers.symbols.percentSign; "):"str"===t.type?(s.test(t.value)&&(l+="type = 'currency'; ",l+="if (isNegative) { output += '-'; matchedCurrency = true; }"),l+="output += "+JSON.stringify(t.value)+"; "):"text"===t.type?(l+="type = 'text'; ",l+="output += value; "):"space"===t.type?(l+="if (output) result.body.push(output); ",l+="output = ''; ",l+="result.body.push({ type: 'space', value: "+JSON.stringify(t.value)+" }); "):"fill"===t.type?l+="output += runtime.fill("+JSON.stringify(t.value)+"); ":"digit"===t.type?(l+="if (isNegative && intPart[0] && matchedCurrency) {intPart[0] = intPart[0].replace('-', '');}",l+="output += "+(t.decimal?"decPart":"intPart")+".shift(); "):"date"===t.type?l+="output += runtime.date(culture, date, "+JSON.stringify(t.part)+", "+t.format+"); ":"time"===t.type?l+="output += runtime.time(time, "+JSON.stringify(t.part)+", "+t.format+", "+r+", "+t.fraction+"); ":"eltime"===t.type?l+="output += runtime.eltime(value, "+JSON.stringify(t.part)+", "+t.format+", "+t.fraction+"); ":"ampm"===t.type&&(l+="output += time.hours < 12 ? "+JSON.stringify(t.am)+" : "+JSON.stringify(t.pm)+"; "):l+="output += ','; "}return l+="if (output) result.body.push(output); ",l+="result.type = type; ",l+="return result; ",f&&(l=f+l+"}"),l}let Po=Fo({cond:"text",body:[{type:"text"}]}),Ro=An((function(t){let e=Do(t).map(Fo);return e.push(Po),e=e.join("\n"),e="'use strict'; return function(value, culture){ if (!culture) culture = kendo.culture();let output = '', type = null, result = { body: [] }; "+e+"; return result; };",new Function("kendo","runtime",e)(ei,No)})),Lo=An((function(t){let e,n=Do(t),i=!1,r=!1;for(let t=0;t<n.length;++t){e=n[t];for(let t=0;t<e.body.length;++t)/^(?:date|time|ampm)$/.test(e.body[t].type)&&(i=!0,"ampm"===e.body[t].type&&(r=!0));if(i)break}return i?e.body.map((function(t){if("digit"===t.type)return t.sep?t.format.charAt(0)+","+t.format.substr(1):t.format;if("exp"===t.type)return t.ch+t.sign;if("date"===t.type||"time"===t.type){let e=t.part;return"date"===t.type&&/^m/.test(e)?e="M":"time"===t.type&&/^h/.test(e)&&(r||(e=e.toUpperCase())),function(t,e){e.fraction&&(t+=Bo("",Math.max(e.fraction,3),"f"));return t}(Bo("",t.format,e),t)}return"ampm"===t.type?"tt":"str"===t.type?t.value:"space"===t.type?" ":"dec"===t.type?".":"percent"===t.type?"%":"comma"===t.type?",":""})).join(""):null})),No={unpackDate:vi,unpackTime:Si,date:function(t,e,n,i){switch(n){case"d":switch(i){case 1:return e.date;case 2:return Bo(e.date,2,"0");case 3:return t.calendar.days.format.abbreviated[e.day];case 4:return t.calendar.days.format.wide[e.day]}break;case"m":switch(i){case 1:return e.month+1;case 2:return Bo(e.month+1,2,"0");case 3:return t.calendar.months.format.abbreviated[e.month];case 4:return t.calendar.months.format.wide[e.month];case 5:return t.calendar.months.format.narrow[e.month]}break;case"y":switch(i){case 1:case 4:return e.year;case 2:return e.year%100}}return"##"},time:function(t,e,n,i,r){let o,s;switch(e){case"h":o=Bo(i?t.hours%12||12:t.hours,n,"0"),r&&(s=(t.minutes+(t.seconds+t.milliseconds/1e3)/60)/60);break;case"m":o=Bo(t.minutes,n,"0"),r&&(s=(t.seconds+t.milliseconds/1e3)/60);break;case"s":o=Bo(t.seconds,n,"0"),r&&(s=t.milliseconds/1e3)}return s&&(o+=No.toFixed(s,r).replace(/^0+/,"")),o},eltime:function(t,e,n,i){let r,o;switch(e){case"h":r=24*t;break;case"m":r=24*t*60;break;case"s":r=24*t*60*60}return i&&(o=r-(0|r)),r=Bo(0|r,n,"0"),o&&(r+=No.toFixed(o,i).replace(/^0+/,"")),r},fill:function(t){return t},formatInt:function(t,e,n,i,r){e=No.toFixed(e,i).replace(/\..*$/,"");let o=n[n.length-1];i>0&&"0"!=o[n.length-1]&&("0"===e?e="":"-0"===e&&(e="-"));let s,a=!1,l=e.length-1,c=[],h=0;function u(e,n){r&&h&&h%3==0&&/^[0-9]$/.test(e)&&(s=t.numbers.symbols.group+s),n&&"-"===e&&(a=!0,e="0"),s=e+s,h++}for(let t=n.length;--t>=0;){let i=n[t];s="";for(let t=i.length;--t>=0;){let n=i.charAt(t);l<0?"0"==n?u("0"):"?"==n&&u(" "):("0"==e&&"?"==n?u(" "):"0"==n?u(e.charAt(l),!0):u(e.charAt(l)),l--)}if(0===t)for(;l>=0;)u(e.charAt(l--));c.unshift(s)}return a&&(c[0]="-"+c[0]),c},formatDec:function(t,e,n){let i=(t=No.toFixed(t,n)).indexOf(".");t=i>=0?t.substr(i+1).replace(/0+$/,""):"";let r=0,o=[];for(let n=0;n<e.length;++n){let i=e[n],s="";for(let e=0;e<i.length;++e){let n=i.charAt(e);r<t.length?s+=t.charAt(r++):"0"==n?s+="0":"?"==n&&(s+=" ")}o.push(s)}return o},toFixed:function(t,e){return function t(n,i){if(!isFinite(n))return"#NUM!";if(n<0)return"-"+t(-n);if(0===e)return String(Math.round(n));if(n===Math.round(n)&&!/e/i.test(String(n)))return n.toFixed(e);let r=function(t){let e,n,i,r=String(t).toLowerCase(),o=r.indexOf(".");o<0?(o=r.indexOf("e"),o<0?(e=r,n=""):(e=r.substr(0,o),n=r.substr(o))):(e=r.substr(0,o),n=r.substr(o+1));if(i=/(\d*)e([-+]?\d+)/.exec(n)){let t=parseInt(i[2],10);t>=0?(n=function(t,e,n){t+="";for(;t.length<e;)t+=n;return t}(i[1],t,"0"),e+=n.substr(0,t),n=n.substr(t)):(e=Bo(e,-t,"0"),n=e.substr(t)+i[1],e=e.substr(0,e.length+t))}return{intpart:e||"0",decpart:n}}(n),o=r.intpart,s=r.decpart;if(s.length<=e){for(;s.length<e;)s+="0";return o+"."+s}if(i)return o+"."+s.substr(0,e);let a=Math.pow(10,e);return t(Math.round(n*a)/a,!0)}(Number(t.toFixed(14)))}};function Bo(t,e,n){for(t+="";t.length<e;)t=n+t;return t}function jo(t){let e=t.body,n="";for(let t=0;t<e.length;++t){let i=e[t];"string"==typeof i?n+=i:"space"===i.type&&(n+=" ")}return n}const zo={compile:Ro,parse:Do,format:function(t,e,n){let i=Ro(e)(t,n),r=Zn.element("span");r.__dataType=i.type;let o=i.body;i.color&&(r.attr.style={color:i.color});for(let t=0;t<o.length;++t){let e=o[t];"string"==typeof e?r.children.push(Zn.text(e)):"space"===e.type&&r.children.push(Zn.element("span",{style:{visibility:"hidden"}},[Zn.text(e.value)]))}return r},text:function(t,e,n){return jo(Ro(e)(t,n))},textAndColor:function(t,e,n){let i=Ro(e)(t,n);return{text:jo(i),color:i.color,type:i.type}},type:function(t,e){return Ro(e)(t).type},adjustDecimals:function(t,e){let n=Do(t);var i;return i=e,n.forEach((function(t){let e=i;if("text"===t.cond)return;let n=t.body,r=!1,o=n.length;for(;0!==e&&--o>=0;){let t=n[o];if("digit"===t.type){if(t.decimal){if(r=!0,e>0)t.format+=Bo("",e,"0");else if(e<0){let n=t.format.length;t.format=t.format.substr(0,n+e),e+=n-t.format.length}if(0===t.format.length)for(n.splice(o,1);--o>=0;){if(t=n[o],"digit"===t.type&&t.decimal){++o;break}if("dec"===t.type){n.splice(o,1);break}}}if(e>0)break}}!r&&e>0&&n.splice(o+1,0,{type:"dec"},{type:"digit",sep:!1,decimal:!0,format:Bo("",e,"0")})})),function(t){return t.map((function(t){let e="";return t.color&&(e+="["+t.color+"]"),t.cond&&"text"!==t.cond&&"num"!==t.cond&&(e+="["+t.cond.op+t.cond.value+"]"),e+=t.body.map(n).join(""),e})).join(";");function e(t,e){return e.fraction&&(t+="."+Bo("",e.fraction,"0")),t}function n(t){return"digit"===t.type?t.sep?t.format.charAt(0)+","+t.format.substr(1):t.format:"exp"===t.type?t.ch+t.sign:"date"===t.type||"time"===t.type?e(Bo("",t.format,t.part),t):"eltime"===t.type?e("["+Bo("",t.format,t.part)+"]",t):"ampm"===t.type?t.am+"/"+t.pm:"str"===t.type?JSON.stringify(t.value):"text"===t.type?"@":"space"===t.type?"_"+t.value:"fill"===t.type?"*"+t.value:"dec"===t.type?".":"percent"===t.type?"%":"comma"===t.type?",":void 0}}(n)},makeDateFormat:Lo};let $o={8:"backspace",9:"tab",13:"enter",27:"esc",37:"left",38:"up",39:"right",40:"down",35:"end",36:"home",32:"spacebar",33:"pageup",34:"pagedown",46:"delete",113:":edit"};class Ho{constructor(t,e,n){if(this._handlers={},this.target=t,this._observer=e||window,this.keyDownProxy=this.keyDown.bind(this),this.mouseProxy=this.mouse.bind(this),this.touchProxy=this.touch.bind(this),this.threshold=5,this._pressLocation=null,this._attachEvent(t,"keydown",this.keyDownProxy),this._attachEvent(t,"contextmenu mousedown cut copy paste scroll wheel click dblclick focus",this.mouseProxy),this._attachEvent(t,"touchmove touchend",this.touchProxy),this._attachEvent(document.documentElement,"mousemove mouseup",this.mouseProxy),this._attachEvent(document.documentElement,"touchmove touchend",this.touchProxy),n)for(let t in n)this.on(t,n[t])}_attachEvent(t,e,n){e.split(" ").forEach((e=>{t.addEventListener(e,n)}))}_removeEvent(t,e,n){e.split(" ").forEach((e=>{t.removeEventListener(e,n)}))}keyDown(t){(!t.altKey||"n"!==t.key&&"h"!==t.key&&"a"!==t.key)&&this.handleEvent(t,function(t){let e=t.keyCode,n=$o[e];return!n&&function(t){return t>47&&t<58||t>64&&t<91||t>95&&t<112||t>185&&t<193||t>218&&t<223||229===t}(e)&&(n=":alphanum"),!n&&t.key&&1===t.key.length&&(n=":alphanum"),n}(t))}touch(t){this.handleEvent(t,t.type)}mouse(t){let e;t.which?e=3===t.which:t.button&&(e=2===t.button);let n=t.type;if("mousedown"===n&&(e?n="rightmousedown":this._pressLocation={x:t.pageX,y:t.pageY}),"mouseup"===n&&(e||(this._pressLocation=null)),"mousemove"===n&&this._pressLocation){let e=this._pressLocation.x-t.pageX,i=this._pressLocation.y-t.pageY;Math.sqrt(e*e+i*i)>this.threshold&&(n="mousedrag")}this.handleEvent(t,n)}handleEvent(t,e){let n="";t.mod=navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey&&!t.altKey,t.altKey&&(n+="alt+"),t.shiftKey&&(n+="shift+"),t.ctrlKey&&(n+="ctrl+"),n+=e;let i=this._handlers["*+"+e];i&&i.call(this._observer,t,n);let r=this._handlers[n];r&&r.call(this._observer,t,n)}on(t,e){let n=this._handlers;"string"==typeof e&&(e=this._observer[e]),"string"==typeof t&&(t=t.split(",")),t.forEach((function(t){n[t]=e}))}destroy(){this._removeEvent(this.target,"keydown",this.keyDownProxy),this._removeEvent(this.target,"contextmenu mousedown cut copy paste scroll wheel click dblclick focus",this.mouseProxy),this._removeEvent(this.target,"touchmove touchend",this.touchProxy),this._removeEvent(document.documentElement,"mousemove mouseup",this.mouseProxy),this._removeEvent(document.documentElement,"touchmove touchend",this.touchProxy)}}let Uo=/:alphanum$/,Vo={up:"up",down:"down",left:"left",right:"right",home:"first-col",end:"last-col","ctrl+left":"word-left","ctrl+right":"word-right","ctrl+up":"word-up","ctrl+down":"word-down","ctrl+home":"first","ctrl+end":"last",pageup:"prev-page",pagedown:"next-page"},Wo={tab:"next","shift+tab":"previous",enter:"lower","shift+enter":"upper",delete:"clearContents",backspace:"clearContents","shift+:alphanum":"edit","alt+:alphanum":"edit",":alphanum":"edit","ctrl+:alphanum":"ctrl","alt+ctrl+:alphanum":"edit",":edit":"edit"},qo={wheel:"onWheel","*+mousedown":"onMouseDown",contextmenu:"onContextMenu","*+mousedrag":"onMouseDrag","*+mouseup":"onMouseUp","*+dblclick":"onDblClick",mousemove:"onMouseMove"},Ko={pageup:"onPageUp",pagedown:"onPageDown",mouseup:"onMouseUp","*+cut":"onCut","*+paste":"onPaste","*+copy":"onCopy"},Xo={esc:"onEditorEsc",enter:"onEditorBlur","alt+enter":"insertNewline","shift+enter":"onEditorBlur",tab:"onEditorBlur","shift+tab":"onEditorBlur","shift+ctrl+enter":"onEditorArrayFormula"},Go=Object.assign({focus:"onEditorBarFocus"},Xo),Yo=Object.assign({focus:"onEditorCellFocus"},Xo),Jo={cell:"range",rowheader:"row",columnheader:"column",topcorner:"sheet",autofill:"autofill"},Zo=[],Qo=[],ts=[];for(let t in Vo)Zo.push(t),Qo.push("shift+"+t);for(let t in Wo)ts.push(t);Ko[Zo]="onAction",Ko[Qo]="onShiftAction",Ko[ts]="onEntryAction",Yo[Zo]="onEditorAction",Yo[Qo]="onEditorShiftAction";class es{constructor(t,e){this.view=t,this.workbook(e),this.container=t.container,this.clipboardElement=t.clipboard,this.scroller=t.scroller,this.tabstrip=t.tabstrip,this.sheetsbar=t.sheetsbar,t.nameEditor.bind("enter",this.onNameEditorEnter.bind(this)),t.nameEditor.bind("cancel",this.onNameEditorCancel.bind(this)),t.nameEditor.bind("select",this.onNameEditorSelect.bind(this)),t.nameEditor.bind("delete",this.onNameEditorDelete.bind(this)),this.editor=t.editor,this.editor.bind("change",this.onEditorChange.bind(this)),this.editor.bind("activate",this.onEditorActivate.bind(this)),this.editor.bind("deactivate",this.onEditorDeactivate.bind(this)),this.editor.bind("update",this.onEditorUpdate.bind(this)),this.listener=new Ho(this.container,this,qo),this.scrollHandler=this.onScroll.bind(this),this.mouseDownHandler=this.onMouseDown.bind(this),t.scroller.addEventListener("scroll",this.scrollHandler),t.scroller.addEventListener("mousedown",this.mouseDownHandler),this._enableEditorEvents(),this.sheetsbar&&(this.sheetsbar.bind("select",this.onSheetBarSelect.bind(this)),this.sheetsbar.bind("reorder",this.onSheetBarReorder.bind(this)),this.sheetsbar.bind("rename",this.onSheetBarRename.bind(this)),this.sheetsbar.bind("remove",this.onSheetBarRemove.bind(this)))}executeCommand(t){return this._execute(t)}_enableEditorEvents(t){void 0===t||t?(this.keyListener=new Ho(this.clipboardElement,this,Ko),this.barKeyListener=new Ho(this.editor.barElement(),this,Go),this.inputKeyListener=new Ho(this.editor.cellElement(),this,Yo)):(this.keyListener.destroy(),this.barKeyListener.destroy(),this.inputKeyListener.destroy())}_execute(t){let e=this._workbook.execute(t);return"EditCommand"!==t.command||e||this._workbook.trigger("change",{editorClose:!0}),e&&(this._preventNavigation=!0,"error"===e.reason?(this.editor.deactivate(!0),this.view.showError(e,function(){}.bind(this))):this.view.openDialog(e.reason)),e}_activeTooltip(){return this._workbook.activeSheet().activeCell().simplify().toString()}onContextMenuSelect(t){let e;switch(t.item.getAttribute("data-action")){case"cut":e={command:"ToolbarCutCommand",options:{workbook:this._workbook}};break;case"copy":e={command:"ToolbarCopyCommand",options:{workbook:this._workbook}};break;case"paste":e={command:"ToolbarPasteCommand",options:{workbook:this._workbook}};break;case"delete-drawing":e={command:"DeleteDrawingCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"bring-to-front":e={command:"BringToFrontCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"send-to-back":e={command:"SendToBackCommand",options:{drawing:this.navigator._sheet._activeDrawing}};break;case"unmerge":e={command:"MergeCellCommand",options:{value:"unmerge"}};break;case"merge":this.view.openDialog("merge");break;case"hide-row":e={command:"HideLineCommand",options:{axis:"row"}};break;case"hide-column":e={command:"HideLineCommand",options:{axis:"column"}};break;case"unhide-row":e={command:"UnHideLineCommand",options:{axis:"row"}};break;case"unhide-column":e={command:"UnHideLineCommand",options:{axis:"column"}};break;case"delete-row":e={command:"DeleteRowCommand"};break;case"delete-column":e={command:"DeleteColumnCommand"}}e&&this._execute(e)}onSheetBarRemove(t){let e=this._workbook.sheetByName(t.name);e&&this._workbook.removeSheet(e)}destroy(){this.view.scroller.removeEventListener("scroll",this.scrollHandler),this.view.scroller.removeEventListener("mousedown",this.mouseDownHandler),this.listener.destroy(),this._enableEditorEvents(!1),this.keyListener.destroy(),this.inputKeyListener.destroy()}onSheetBarSelect(t){let e,n=this._workbook;if(t.isAddButton){if(this._workbook.trigger("insertSheet"))return;e=n.insertSheet()}else e=n.sheetByName(t.name);if(n.activeSheet().name()!==e.name()){if(this._workbook.trigger("selectSheet",{sheet:e}))return;this.editor.canInsertRef(!1)||this.editor.deactivate(),n.activeSheet(e)}}onSheetBarReorder(t){let e=this._workbook,n=e.sheetByIndex(t.oldIndex),i=e.activeSheet(),r=i.name();if(e.moveSheetToIndex(n,t.newIndex),r!==n.name()){if(e.trigger("selectSheet",{sheet:n}))return void e.activeSheet(i);this.editor.canInsertRef(!1)||this.editor.deactivate(),e.activeSheet(n)}}onSheetBarRename(t){let e=this._workbook.sheetByIndex(t.sheetIndex);this._workbook.sheetByName(t.name)?this.view.showError({reason:"error",type:"duplicateSheetName"}):(this._workbook.renameSheet(e,t.name),this.clipboardElement.focus())}sheet(t){this.navigator=t.navigator(),this.axisManager=t.axisManager()}workbook(t){this._workbook=t,this.clipboard=t.clipboard(),t.bind("commandRequest",this.onCommandRequest.bind(this))}refresh(){let t=this.editor,e=this._workbook.activeSheet();this._viewPortHeight=this.view.scroller.clientHeight,this.navigator.height(this._viewPortHeight),t.isActive()||this.isEditorDisabled||(t.enable(!1!==e.selection().enable()),this.resetEditorValue());let n=e.selection()._ref.simplify(),i=this._workbook.nameForRef(n,e.name());this.view.nameEditor.value(i.name)}onScroll(){this.view.render({scroll:!0})}onWheel(t){let e=t.deltaX,n=t.deltaY;1===t.deltaMode&&(e*=10,n*=10),this.scrollWith(e,n),t.preventDefault()}onAction(t,e){this._workbook.activeSheet()._activeDrawing=null,this.navigator.moveActiveCell(Vo[e]),t.preventDefault()}onPageUp(){this.scrollDown(-this._viewPortHeight)}onPageDown(){this.scrollDown(this._viewPortHeight)}onEntryAction(t,e){let n=this._workbook.activeSheet();if(t.mod){let e=!0;switch(String.fromCharCode(t.keyCode)){case"A":n._activeDrawing=null,this.navigator.selectAll();break;case"Y":this._workbook.undoRedoStack.redo();break;case"Z":this._workbook.undoRedoStack.undo();break;default:e=!1}e&&t.preventDefault()}else{let i=!1===n.selection().enable(),r=":edit"!==e;if("delete"==e||"backspace"==e)n._activeDrawing?this._execute({command:"DeleteDrawingCommand",options:{drawing:n._activeDrawing}}):i||this._execute({command:"ClearContentCommand"}),t.preventDefault();else if(Uo.test(e)||!r){if(n._activeDrawing=null,i)return void t.preventDefault();r&&this.editor.value(""),this.activateEditor(r)}else this.navigator.navigateInSelection(Wo[e]),t.preventDefault()}}onShiftAction(t,e){this.navigator.modifySelection(Vo[e.replace("shift+","")],this.appendSelection),t.preventDefault()}onMouseMove(t){let e=this._workbook.activeSheet();if(e.resizingInProgress()||e.selectionInProgress())return;let n=this.objectAt(t);"columnresizehandle"===n.type||"rowresizehandle"===n.type?e.positionResizeHandle(n.ref):e.removeResizeHandle(),e._renderComment("cell"==n.type?n.ref:null)}onMouseDown(t){let e=this.objectAt(t);if(e.pane&&(this.originFrame=e.pane),this._startResizingDrawing(t,e))return void t.stopPropagation();let n=this._workbook.activeSheet();if(n._activeDrawing=null,"drawing"===e.type)return n._activeDrawing=e.drawing,e.copy=e.drawing.clone(),e.startBox=n.drawingBoundingBox(e.copy),n.startDragging(e),n.triggerChange({dragging:!0}),void t.preventDefault();if("outside"===e.type)return t.preventDefault(),void t.stopPropagation();if("editor"===e.type)return this.onEditorEsc(),this.openCustomEditor(),void t.preventDefault();if(this.editor.canInsertRef(!1)&&e.ref)return this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs()),this.navigator.startSelection(e.ref,this._selectionMode,this.appendSelection,t.shiftKey,this.view),void t.preventDefault();if(this._preventNavigation=!1,this.editor.deactivate(),!this._preventNavigation){if("columnresizehandle"===e.type||"rowresizehandle"===e.type)return n.startResizing({x:e.x,y:e.y}),void t.preventDefault();if("filtericon"===e.type)return this.openFilterMenu(t),void t.preventDefault();this._selectionMode=Jo[e.type],this.appendSelection=t.mod,this.navigator.startSelection(e.ref,this._selectionMode,this.appendSelection,t.shiftKey,this.view)}}_startResizingDrawing(t){let e=t.target.closest(".k-spreadsheet-drawing-handle");if(e){let n=this.translateCoords(t),i=e.getAttribute("data-direction"),r=this._workbook.activeSheet(),o=r._activeDrawing;return r.startDragging({pane:this.originFrame,drawing:o,copy:o.clone(),startBox:r.drawingBoundingBox(o),resize:i,startX:n.x,startY:n.y}),!0}}onContextMenu(t){let e=this._workbook.activeSheet();if(t.preventDefault(),e.resizingInProgress()||e.draggingInProgress())return;let n=this.objectAt(t);if("columnresizehandle"===n.type||"rowresizehandle"===n.type)return;n.ref?this.navigator.selectForContextMenu(n.ref,Jo[n.type]):"drawing"==n.type&&this.navigator.selectDrawingForContextMenu(n.drawing);let i=this.navigator._sheet.select()instanceof vn,r=!1,o=!1;"columnheader"==n.type?r=!i&&this.axisManager.selectionIncludesHiddenColumns():"rowheader"==n.type?r=!i&&this.axisManager.selectionIncludesHiddenRows():"drawing"==n.type||(o=this.navigator.selectionIncludesMergedCells()),this._workbook.trigger("contextmenu",{objectRef:n.ref,targetType:n.type,showUnhide:r,showUnmerge:o,originalEvent:t})}prevent(t){t.preventDefault()}constrainResize(t,e){let n=this._workbook.activeSheet().resizeHandlePosition();return!n||"outside"===t||"topcorner"===t||e.col<n.col||e.row<n.row}_dragDrawing(t){let e=this._workbook.activeSheet(),n=e.draggingInProgress();if(!n)return!1;let i=this.translateCoords(t),r=n.drawing,o=i.x-n.startX,s=i.y-n.startY;return"SE"==n.resize?n.aspect?Math.abs(o)>Math.abs(s)?(r.width=Math.max(n.copy.width+o,20),r.height=r.width/n.aspect):(r.height=Math.max(n.copy.height+s,20),r.width=r.height*n.aspect):(r.width=Math.max(n.copy.width+o,20),r.height=Math.max(n.copy.height+s,20)):"E"==n.resize?r.width=Math.max(n.copy.width+o,20):"S"==n.resize?r.height=Math.max(n.copy.height+s,20):"N"==n.resize?n.copy.height-s>20&&(r.height=n.copy.height-s,r.offsetY=n.copy.offsetY+s):"W"==n.resize?n.copy.width-o>20&&(r.width=n.copy.width-o,r.offsetX=n.copy.offsetX+o):"NE"==n.resize?(r.width=Math.max(n.copy.width+o,20),n.copy.height-s>20&&(r.height=n.copy.height-s,r.offsetY=n.copy.offsetY+s)):"SW"==n.resize?(r.height=Math.max(n.copy.height+s,20),n.copy.width-o>20&&(r.width=n.copy.width-o,r.offsetX=n.copy.offsetX+o)):"NW"==n.resize?(n.copy.height-s>20&&(r.height=n.copy.height-s,r.offsetY=n.copy.offsetY+s),n.copy.width-o>20&&(r.width=n.copy.width-o,r.offsetX=n.copy.offsetX+o)):(r.offsetX=n.copy.offsetX+o,r.offsetY=n.copy.offsetY+s),e.triggerChange({dragging:!0}),!0}onMouseDrag(t){if("sheet"===this._selectionMode)return;let e={clientX:t.clientX,clientY:t.clientY},n=this._workbook.activeSheet();if(this._dragDrawing(t))return;let i=this.objectAt(e);if(n.resizingInProgress())this.constrainResize(i.type,i.ref)||n.resizeHintPosition({x:i.x,y:i.y});else if("outside"!==i.type){if(this.originFrame===i.pane)this.selectToLocation(e);else{let t=this.originFrame._grid;i.x,t.right,i.y>t.bottom&&this.scrollTop(),i.y<t.top||i.x<t.left?this.startAutoScroll(i,e):this.selectToLocation(e)}t.preventDefault()}else this.startAutoScroll(i)}onMouseUp(t){let e=this._workbook.activeSheet();e.completeResizing(),e.completeDragging(),this.navigator.completeSelection(),this.stopAutoScroll();let n=this.editor.activeEditor();if(!n)return;let i=t.target;for(;i;){if(i===n.element)return;i=i.parentNode}let r=this.objectAt(t);r&&r.ref&&n.canInsertRef(!1)&&(n.refAtPoint(e),e._setFormulaSelections(n.highlightedRefs()))}onDblClick(t){let e=this.objectAt(t),n=!1===this._workbook.activeSheet().selection().enable();if("cell"!==e.type||n)return;let i=this._workbook.activeSheet().selection();this.activateEditor(!i.value()&&!i.formula()),this.onEditorUpdate()}onCut(t){let e=this;setTimeout((function(){e.clipboard.menuInvoked=void 0===t,e._execute({command:"CutCommand",options:{workbook:e.view._workbook,event:t}})}))}clipBoardValue(){return this.clipboardElement.html()}_pasteImage(t){let e=this,n=new window.Image;n.src=window.URL.createObjectURL(t),n.onload=function(){e._execute({command:"InsertImageCommand",options:{blob:t,width:n.width,height:n.height}})},setTimeout((function(){window.URL.revokeObjectURL(n.src)}),10)}onPaste(t){let e=this,n="",i="";if(e.clipboard.menuInvoked=void 0===t,t){let r=t.clipboardData;if(!r||!r.getData){if(window.clipboardData.files&&window.clipboardData.files.length){let t=window.clipboardData.files[0];if(/^image\/(?:png|jpe?g|gif)$/i.test(t.type))return e._pasteImage(t)}return i=window.clipboardData.getData("Text"),i&&(i=i.trim()),e.clipboardElement.empty(),void setTimeout((function(){n=e.clipboardElement.html(),(n||i)&&(e.clipboard.external({html:n,plain:i}),e._execute({command:"PasteCommand",options:{workbook:e.view._workbook,event:t}}))}))}{t.preventDefault();let o=!1,s=!1;if(window.DOMStringList&&r.types instanceof window.DOMStringList?(o=r.types.contains("text/html"),s=r.types.contains("text/plain")):Array.isArray(r.types)?(o=r.types.indexOf("text/html")>=0,s=r.types.indexOf("text/plain")>=0):(o=/text\/html/.test(r.types),s=/text\/plain/.test(r.types)),o&&(n=r.getData("text/html").trim()),s&&(i=r.getData("text/plain").trim()),!n&&!i&&r.items&&r.items.length)for(let t=0;t<r.items.length;++t){let n=r.items[t];if("file"===n.kind&&/^image\/(?:png|jpe?g|gif)$/i.test(n.type))return e._pasteImage(n.getAsFile())}}}else e.clipboard.menuInvoked=!0;(n||i)&&(e.clipboard.external({html:n,plain:i}),e._execute({command:"PasteCommand",options:{workbook:e.view._workbook,event:t}}))}onCopy(t){this.clipboard.menuInvoked=void 0===t,this._execute({command:"CopyCommand",options:{workbook:this.view._workbook,event:t}})}scrollTop(){this.scroller.scrollTop=0}scrollLeft(){this.scroller.scrollLeft=0}scrollDown(t){this.scroller.scrollTop+=t}scrollRight(t){this.scroller.scrollLeft+=t}scrollWith(t,e){this.scroller.scrollTop+=e,this.scroller.scrollLeft+=t}translateCoords(t){let e=this.container.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}objectAt(t,e){if(!t)return;const n=this.translateCoords(t);return this.view.objectAt(n.x,n.y,e)}selectToLocation(t){let e=this.objectAt(t,!0);e.pane&&e.ref&&(this.extendSelection(e),this.lastKnownCellLocation=t,this.originFrame=e.pane),this.stopAutoScroll()}extendSelection(t){this.navigator.extendSelection(t.ref,this._selectionMode)}autoScroll(){let t=this._autoScrollTarget.x,e=this._autoScrollTarget.y,n=this.originFrame._grid,i=this.view.scroller,r=i.scrollLeft,o=i.scrollTop;t<n.left&&this.scrollRight(-8),t>n.right&&this.scrollRight(8),e<n.top&&this.scrollDown(-8),e>n.bottom&&this.scrollDown(8),o===i.scrollTop&&r===i.scrollLeft?this.selectToLocation(this.finalLocation):this.extendSelection(this.objectAt(this.lastKnownCellLocation))}startAutoScroll(t,e){this._scrollInterval||(this._scrollInterval=setInterval(this.autoScroll.bind(this),50)),this.finalLocation=e||this.lastKnownCellLocation,this._autoScrollTarget=t}stopAutoScroll(){clearInterval(this._scrollInterval),this._scrollInterval=null}openCustomEditor(){this.view.openCustomEditor()}openFilterMenu(t){let e=this.objectAt(t),n=this._workbook.activeSheet().filterColumn(e.ref),i=this.view.createFilterMenu(n);i.bind("action",this.onCommandRequest.bind(this)),i.bind("action",i.close.bind(i)),i.openFor(t.target,t)}_saveEditorValue(t){let e=this.editor._range.sheet(),n=this.editor.value();this._workbook.activeSheet()!==e&&(this._workbook.activeSheet()._setFormulaSelections(),this._workbook.activeSheet(e)),e.isInEditMode(!1),this._lastEditorValue=n,this._execute({command:"EditCommand",options:{value:n,arrayFormula:t}})}onEditorChange(){this._saveEditorValue(!1)}onEditorArrayFormula(){this._saveEditorValue(!0),this.editor.deactivate(!0)}onEditorActivate(){let t=this._workbook.activeSheet();t._setFormulaSelections(this.editor.highlightedRefs()),t.isInEditMode(!0)}onEditorDeactivate(){let t=this._workbook.activeSheet();t.isInEditMode(!1),t._setFormulaSelections([])}onEditorUpdate(){this._workbook.activeSheet()._setFormulaSelections(this.editor.highlightedRefs())}onEditorBarFocus(){!1===this._workbook.activeSheet().selection().enable()||this.editor.activate({range:this._workbook.activeSheet().selection(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()})}onEditorCellFocus(){this.editor.scale()}onEditorEsc(){this.resetEditorValue(),this.editor.deactivate(),this.clipboardElement.focus()}insertNewline(t){t.preventDefault(),this.editor.insertNewline()}onEditorBlur(t,e){t.defaultPrevented||this.editor.isFiltered()||(this._preventNavigation=!1,this.editor.deactivate(),this._preventNavigation||(this.clipboardElement.focus(),this.navigator.navigateInSelection(Wo[e])),"tab"===e&&t.preventDefault())}onEditorAction(t,e){if(t.defaultPrevented)return;let n=this.editor,i=this._workbook.activeSheet();this._casualEditing&&/^(?:up|right|down|left)$/.test(e)?(this.deactivateEditor(),this.navigator.moveActiveCell(Vo[e]),t.preventDefault()):n.canInsertRef(!0)&&(this.navigator.moveActiveCell(Vo[e]),n.activeEditor().refAtPoint(i),i._setFormulaSelections(n.highlightedRefs()),t.preventDefault())}onEditorShiftAction(t,e){let n=this.editor,i=this._workbook.activeSheet();n.canInsertRef(!0)&&(this.navigator.modifySelection(Vo[e.replace("shift+","")],this.appendSelection),n.activeEditor().refAtPoint(i),i._setFormulaSelections(n.highlightedRefs()),t.preventDefault())}resetEditorValue(){let t=this._workbook.activeSheet(),e=t.activeCell(),n=this._workbook._inputForRef(e),i=t.range(e).intersectingArrayFormula();i&&(n="="+i.formula),this.editor.value(n,Boolean(i))}activateEditor(t){this._casualEditing=t,this.editor.activate({range:this._workbook.activeSheet().selection(),rect:this.view.activeCellRectangle(),tooltip:this._activeTooltip()}).focus()}deactivateEditor(){this.view.editor.deactivate()}onCommandRequest(t){t.command?this._execute(t):this._workbook.undoRedoStack[t.action]()}onDialogRequest(t){let e={pdfExport:this._workbook.options.pdf,excelExport:this._workbook.options.excel};t.options?In(t.options,e):t.options=e,this.view.openDialog(t.name,t.options)}onNameEditorEnter({value:t}){let e,n=this._workbook,i=n.activeSheet(),r=void 0!==t?t:this.view.nameEditor.value();if(e=Qn.parseReference(r,!0)||n.nameValue(r),e instanceof pn){if(e.sheet&&e.sheet.toLowerCase()!==i.name().toLowerCase()){let t=n.sheetByName(e.sheet);t&&(n.activeSheet(t),i=t)}i.range(e).select()}else e=i.selection()._ref.clone().simplify().setSheet(i.name(),!0),this._execute({command:"DefineNameCommand",options:{name:r,value:e}}),this.clipboardElement.focus()}onNameEditorCancel(){this.clipboardElement.focus()}onNameEditorSelect(t){let e=t.name,n=this._workbook,i=n.activeSheet(),r=n.nameValue(e);if(r instanceof pn){if(r.sheet&&r.sheet.toLowerCase()!==i.name().toLowerCase()){let t=n.sheetByName(r.sheet);t&&(n.activeSheet(t),i=t)}i.range(r).select()}else this.clipboardElement.focus()}onNameEditorDelete(t){this._execute({command:"DeleteNameCommand",options:{name:t.name}}),this.clipboardElement.focus()}}class ns{constructor(t,e,n,i){this.level=t,this.value=e,this.left=n,this.right=i}}const is={left:void 0,right:void 0,level:0};function rs(t){let e=t;if(e.left.level===e.level){let t=e;e=e.left,t.left=e.right,e.right=t}return e}function os(t){let e=t;if(e.right.right.level===e.level){let t=e;e=e.right,t.right=e.left,e.left=t,e.level+=1}return e}function ss(t,e){return t===is?new ns(1,e,is,is):(t.value.start>e.start?t.left=ss(t.left,e):t.right=ss(t.right,e),os(rs(t)))}function as(t,e){let n=t;if(n===is)return n;let i=n.value.start-e.start;if(0===i)if(n.left!==is&&n.right!==is){let t=n.left;for(;t.right!==is;)t=t.right;n.value=t.value,n.left=as(n.left,n.value)}else n=n.left===is?n.right:n.left;else i>0?n.left=as(n.left,e):n.right=as(n.right,e);return(n.left.level<n.level-1||n.right.level<n.level-1)&&(n.level-=1,n.right.level>n.level&&(n.right.level=n.level),n=rs(n),n.right=rs(n.right),n.right.right=rs(n.right.right),n=os(n),n.right=os(n.right)),n}is.left=is,is.right=is;class ls{constructor(t,e,n){this.start=t,this.end=e,this.value=n}intersects(t){return t.start<=this.end&&t.end>=this.start}clone(){return new ls(this.start,this.end,this.value)}}class cs{constructor(){this.root=is}insert(t){this.root=ss(this.root,t)}remove(t){this.root=as(this.root,t)}findrange(t){let e=this.root;for(;e!==is;)if(t<e.value.start)e=e.left;else{if(!(t>e.value.end))return e.value;e=e.right}return null}values(){let t=[];return hs(this.root,t),t}intersecting(t,e){let n=[];return us(this.root,new ls(t,e),n),n}map(t){let e=new cs;return ds(e,this.root,t),e}forEach(t){ps(this.root,t)}clone(){return this.map((function(t){return t.clone()}))}first(){let t=this.root;for(;t.left!==is;)t=t.left;return t}last(){let t=this.root;for(;t.right!==is;)t=t.right;return t}}function hs(t,e){t!==is&&(hs(t.left,e),e.push(t.value),hs(t.right,e))}function us(t,e,n){if(t===is)return;let i=t.value;e.start<i.start&&us(t.left,e,n),i.intersects(e)&&n.push(i),e.end>i.end&&us(t.right,e,n)}function ds(t,e,n){e!==is&&(ds(t,e.left,n),t.insert(n(e.value)),ds(t,e.right,n))}function ps(t,e){t!==is&&(ps(t.left,e),e(t.value),ps(t.right,e))}class fs{constructor(t,e,n){void 0===e?this.tree=t:(this.tree=new cs,this.tree.insert(new ls(t,e,n)))}values(){return this.tree.values()}map(t){return new fs(this.tree.map(t))}forEach(t){this.tree.forEach(t)}intersecting(t,e){return this.tree.intersecting(t,e)}first(){return this.tree.first().value}last(){return this.tree.last().value}insert(t,e,n){return this.tree.insert(new ls(t,e,n))}value(t,e,n){let i=t,r=e;if(void 0===n)return void 0===r&&(r=i),this.intersecting(i,r)[0].value;let o=this.tree.intersecting(i-1,r+1);if(o.length){let t=o[0],e=o[o.length-1];t.end<i&&(t.value===n?i=t.start:o.shift()),e.start>r&&(e.value===n?r=e.end:o.pop());for(let t=0,e=o.length;t<e;t++){let e=o[t],s=e.value,a=e.start,l=e.end;this.tree.remove(e),a<i&&(s!==n?this.insert(a,i-1,s):i=a),l>r&&(s!==n?this.insert(r+1,l,s):r=l)}}this.insert(i,r,n)}expandedValues(t,e){let n=this.intersecting(t,e),i=[],r=0;for(let o=t;o<=e;o++)n[r].end<o&&r++,i.push({index:o-t,value:n[r].value});return i}sortedIndices(t,e,n,i){let r=this.expandedValues(t,e),o=function(t,e){return t.value===e.value?t.index-e.index:n(t.value,e.value)};return i&&(o=function(t,e){let r=i[t.index],o=i[e.index];return r.value===o.value?n(t.value,e.value):t.index-e.index}),r.sort(o),r}sort(t,e,n){if(1===this.intersecting(t,e).length)return;let i=this.expandedValues(t,e);for(let e=0,r=n.length;e<r;e++)this.value(e+t,e+t,i[n[e].index].value)}copy(t,e,n){let i,r=this.intersecting(t,e),o=n;for(let n=0,s=r.length;n<s;n++){let s=r[n].start;s<t&&(s=t);let a=r[n].end;a>e&&(a=e),i=o+(a-s),this.value(o,i,r[n].value),o=++i}}iterator(t,e){return new gs(t,e,this.intersecting(t,e))}getState(){return this.tree.clone()}setState(t){this.tree=t.clone()}toJSON(){return this.values()}fromJSON(t){t.forEach((t=>{this.value(t.start,t.end,t.value)}))}}class gs{constructor(t,e,n){this.start=t,this.end=e,this.index=0,this.ranges=n}unique(){return this.ranges.map((function(t){return t.value}))}at(t){for(;this.ranges[this.index]&&this.ranges[this.index].end<t;)this.index++;return this.ranges[this.index]&&this.ranges[this.index].value}forEach(t){for(let e=this.start;e<=this.end;e++)t(this.at(e),e);this.index=0}}class ms extends fs{constructor(t,e,n){super(t,e,n),this._defaultValue=n,this.tree=new cs,this.range=new ls(t,e,n)}intersecting(t,e){let n,i=t,r=this.tree.intersecting(i,e),o=[];if(!r.length)return[this.range];for(let t=0,e=r.length;t<e;t++)n=r[t],n.start>i&&o.push(new ls(i,n.start-1,this.range.value)),o.push(n),i=n.end+1;return n.end<e&&o.push(new ls(n.end+1,e,this.range.value)),o}insert(t,e,n){let i=n;null==i&&(i=this._defaultValue),i!==this.range.value&&this.tree.insert(new ls(t,e,i))}lastRangeStart(){let t=this.tree.root;if(t===is)return this.range.start;for(;t.right!==is;)t=t.right;return t.value.end+1}}class ys{constructor(t){this.list=t}get(t){return this.parse(this.list.value(t,t))}set(t,e,n){void 0===n&&(n=e,e=t),this.list.value(t,e,n)}parse(t){return t}copy(t,e,n){this.list.copy(t,e,n)}iterator(t,e){return this.list.iterator(t,e)}}class vs extends ys{set(t,e,n){this.list.value(t,e,JSON.stringify(n))}parse(t){return JSON.parse(t)}}const bs=[{property:ys,name:"format",value:null,sortable:!0,serializable:!0},{property:class extends ys{constructor(t,e){super(t),this.formats=e}set(t,e,n){n instanceof Date?(n=Ai(n),this.formats.value(t,e)||this.formats.value(t,e,$n().calendar.patterns.d.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm"))):"number"==typeof n&&(n=Qn.runtime.limitPrecision(n)),this.list.value(t,e,n)}},name:"value",value:null,sortable:!0,serializable:!0,depends:"format"},{property:ys,name:"formula",value:null,sortable:!0,serializable:!0},{property:ys,name:"background",value:null,sortable:!0,serializable:!0},{property:vs,name:"vBorders",value:null,sortable:!1,serializable:!1},{property:vs,name:"hBorders",value:null,sortable:!1,serializable:!1},{property:vs,name:"dBorders",value:null,sortable:!1,serializable:!0},{property:ys,name:"color",value:null,sortable:!0,serializable:!0},{property:ys,name:"fontFamily",value:null,sortable:!0,serializable:!0},{property:ys,name:"underline",value:null,sortable:!0,serializable:!0},{property:ys,name:"fontSize",value:null,sortable:!0,serializable:!0},{property:ys,name:"italic",value:null,sortable:!0,serializable:!0},{property:ys,name:"bold",value:null,sortable:!0,serializable:!0},{property:ys,name:"textAlign",value:null,sortable:!0,serializable:!0},{property:ys,name:"indent",value:null,sortable:!0,serializable:!0},{property:ys,name:"verticalAlign",value:null,sortable:!0,serializable:!0},{property:ys,name:"wrap",value:null,sortable:!0,serializable:!0},{property:ys,name:"validation",value:null,sortable:!1,serializable:!0},{property:ys,name:"enable",value:null,sortable:!1,serializable:!0},{property:ys,name:"link",value:null,sortable:!0,serializable:!0},{property:ys,name:"editor",value:null,sortable:!0,serializable:!0},{property:ys,name:"comment",value:null,sortable:!0,serializable:!0},{property:ys,name:"html",value:null,sortable:!0,serializable:!0}];class ws{constructor(t,e,n){n=n||{};let i=t*e-1;this.specs=bs,this.rowCount=t,this.columnCount=e,this.cellCount=i,this.properties={},this.lists={},this.specs.forEach((function(t){let e=t.name,r=n[e];void 0===r&&(r=t.value),this.lists[e]=new ms(0,i,r),(this.properties[e]=new t.property(this.lists[e],this.lists[t.depends])).spec=t}),this),this.lists.formula.tree.clone=_s,this.lists.validation.tree.clone=_s}_resize(t,e){let n=this,i=n.rowCount,r=t*e-1;function o(e){return(e/i|0)*t+e%i}function s(t){t.start=o(t.start),t.end=o(t.end)}Object.keys(n.lists).forEach((function(e){let o=n.lists[e];t!==i&&o.forEach(s),o.range.end=r})),n.rowCount=t,n.columnCount=e,n.cellCount=r}getState(){let t={};return this.specs.forEach((function(e){t[e.name]=this.lists[e.name].getState()}),this),t}setState(t){this.specs.forEach((function(e){this.lists[e.name].setState(t[e.name])}),this)}get(t,e){if(void 0===e)return this.lists[t];switch(t){case"borderRight":e+=this.rowCount;case"borderLeft":t="vBorders";break;case"borderBottom":e++;case"borderTop":t="hBorders"}return e>this.cellCount?null:this.properties[t].get(e)}set(t,e,n,i){switch(t){case"borderRight":e+=this.rowCount,n+=this.rowCount;case"borderLeft":t="vBorders";break;case"borderBottom":e++,n++;case"borderTop":t="hBorders"}e<=n&&n<=this.cellCount&&this.properties[t].set(e,n,i)}fromJSON(t,e){for(let n=0;n<this.specs.length;n++){let i=this.specs[n];i.serializable&&void 0!==e[i.name]&&this.set(i.name,t,t,e[i.name],!1)}["borderLeft","borderRight","borderTop","borderBottom"].forEach((function(n){void 0!==e[n]&&this.set(n,t,t,e[n])}),this)}copy(t,e,n){this.specs.forEach((function(i){this.properties[i.name].copy(t,e,n)}),this)}iterator(t,e,n){let i=this.properties[t],r=i.iterator(e,n),o=r.at,s=this.cellCount;return r.at=function(t){return t>s?null:i.parse(o.call(r,t))},r.name=t,r.value=i.spec.value,r}sortable(){return this.specs.filter((function(t){return t.sortable})).map((function(t){return this.lists[t.name]}),this)}iterators(t,e){return this.specs.reduce(function(n,i){return i.serializable&&n.push(this.iterator(i.name,t,e)),n}.bind(this),[])}forEach(t,e,n){let i,r,o=this.iterators(t,e),s=this.iterator("hBorders",t,e+1),a=this.iterator("vBorders",t,e),l=this.iterator("vBorders",t+this.rowCount,e+this.rowCount);function c(t,e,n){let r=e.at(n);r!==e.value&&(i[t]=r)}for(r=t;r<=e;r++){i={};for(let t=0;t<o.length;t++){let e=o[t],n=e.at(r);n!==e.value&&(i[e.name]=n)}c("borderLeft",a,r),c("borderRight",l,r+this.rowCount),c("borderTop",s,r),(r+1)%this.rowCount&&c("borderBottom",s,r+1),n(i)}}forEachProperty(t){for(let e in this.properties)t(this.properties[e])}}function xs(t){return(t=t.clone()).value=t.value.deepClone(),t}function _s(){let t=this.map(xs);return t.clone=_s,t}const Ss=bs.reduce((function(t,e){return e.serializable&&t.push(e.name),t}),["borderTop","borderRight","borderBottom","borderLeft"]);let Cs='DATEVALUE("{0}")';class ks{constructor(t){this.handler=t.handler,this.from=t.from,this.to=t.to,this.dataType=t.dataType,this.comparerType=t.comparerType,this.type=t.type?t.type:"warning",this.allowNulls=!!t.allowNulls,this.fromIsDateValue=!!t.fromIsDateValue,this.toIsDateValue=!!t.toIsDateValue,this.showButton=t.showButton,this.fromIsListValue=!!t.fromIsListValue,this.sheet=t.sheet,this.row=t.row,this.col=t.col,t.tooltipMessageTemplate&&(this.tooltipMessageTemplate=t.tooltipMessageTemplate),t.tooltipTitleTemplate&&(this.tooltipTitleTemplate=t.tooltipTitleTemplate),t.messageTemplate&&(this.messageTemplate=t.messageTemplate),t.titleTemplate&&(this.titleTemplate=t.titleTemplate)}_formatMessages(t){let e=this.from?this.from_value:"",n=this.to?this.to_value:"",i=this.from?this.from.toString():"",r=this.to?this.to.toString():"",o=this.dataType,s=this.type,a=this.comparerType;return zn().format(t,e,n,i,r,o,s,a)}_setMessages(){this.title="",this.message="",this.tooltipTitleTemplate&&(this.tooltipTitle=this._formatMessages(this.tooltipTitleTemplate)),this.tooltipMessageTemplate&&(this.tooltipMessage=this._formatMessages(this.tooltipMessageTemplate)),this.titleTemplate&&(this.title=this._formatMessages(this.titleTemplate)),this.messageTemplate&&(this.message=this._formatMessages(this.messageTemplate))}_getListData(){if(!this.from_value||!this.from_value.data)return[];let t,e,n=this.from_value.data,i=[];for(t=0;t<n.length;t++){let r=n[t];if(r)for(e=0;e<r.length;e++)i.push(r[e])}return i}clone(t,e,n){let i=this._getOptions();i.from&&(i.from=i.from.clone(t,e,n)),i.to&&(i.to=i.to.clone(t,e,n));const r=Object.assign({},i);return r.handler=this.handler,r.sheet=t,r.row=e,r.col=n,new ks(r)}deepClone(){let t=new ks(this);return t.from=t.from.deepClone(),t.to&&(t.to=t.to.deepClone()),t}exec(t,e,n,i){let r=this;function o(e){return e instanceof pn&&(e=t.getData(e),Array.isArray(e)&&(e=e[0])),e}let s=function(t){r.from_value=o(t),r.value=r.handler.call(r,e,n),r._setMessages(),i&&i(r.value)};r.to?r.to.exec(t,(function(e){r.to_value=o(e),r.from.exec(t,s)})):r.from.exec(t,s)}reset(){this.from&&this.from.reset(),this.to&&this.to.reset(),delete this.value}adjust(t,e,n,i){let r,o,s,a=this.row,l=this.col;if(this.from&&(r=this.from.adjust(t,e,n,i)),this.to&&(o=this.to.adjust(t,e,n,i)),this.sheet.toLowerCase()===t.toLowerCase())switch(e){case"row":a>=n&&(s=!0,this.row+=i);break;case"col":l>=n&&(s=!0,this.col+=i)}if(s||r||o){let t=new ks(this);return t.from=r,t.to=o,t.row=a,t.col=l,t}}toJSON(){let t=this._getOptions();return t.from&&(t.from=t.from.toString(),"list"===t.dataType&&(t.from=t.from.replace(/^_matrix\((.*)\)$/i,"$1"),delete t.fromIsListValue),"date"===t.dataType&&this.fromIsDateValue&&(t.from=t.from.replace(/^DATEVALUE\("(.*)"\)$/i,"$1"),delete t.fromIsDateValue)),t.to&&(t.to=t.to.toString(),"date"===t.dataType&&this.toIsDateValue&&(t.to=t.to.replace(/^DATEVALUE\("(.*)"\)$/i,"$1"),delete t.toIsDateValue)),t}_getOptions(){return{from:this.from,to:this.to,dataType:this.dataType,type:this.type,comparerType:this.comparerType,row:this.row,col:this.col,sheet:this.sheet,allowNulls:this.allowNulls,fromIsListValue:this.fromIsListValue,fromIsDateValue:this.fromIsDateValue,toIsDateValue:this.toIsDateValue,tooltipMessageTemplate:this.tooltipMessageTemplate,tooltipTitleTemplate:this.tooltipTitleTemplate,messageTemplate:this.messageTemplate,titleTemplate:this.titleTemplate,showButton:this.showButton}}}const As={compile:function(t,e,n,i){let r,o,s,a;if("string"==typeof i&&(i=JSON.parse(i)),i.from&&("list"!==i.dataType||i.fromIsListValue||(i.from.indexOf("{")>-1&&(i.from=i.from.replace(/\"/g,"").replace("{",'"').replace("}",'"')),i.from=zn().format("_matrix({0})",i.from),i.fromIsListValue=!0),"date"===i.dataType&&(s=Qn.runtime.parseDate(i.from),s&&(i.from=zn().format(Cs,i.from),i.fromIsDateValue=!0)),i.from=Qn.compile(Qn.parseFormula(t,e,n,i.from))),i.to&&("date"===i.dataType&&(a=Qn.runtime.parseDate(i.to),a&&(i.to=zn().format(Cs,i.to),i.toIsDateValue=!0)),i.to=Qn.compile(Qn.parseFormula(t,e,n,i.to))),o="custom"===i.dataType?As.validationComparers.custom:"list"===i.dataType?As.validationComparers.list:As.validationComparers[i.comparerType],!o)throw zn().format("'{0}' comparer is not implemented.",i.comparerType);r=function(t){let e=this.to&&(this.to_value||0===this.to_value)?this.to_value:void 0;if(null===t||""===t)this.allowNulls?this.value=!0:this.value=!1;else if("custom"===this.dataType)this.value=o(t,this.from_value,e);else if("list"===this.dataType){let n=this._getListData();this.value=o(t,n,e)}else this.value=o(t,this.from_value,e);return this.value};const l=Object.assign({},i);return l.handler=r,l.sheet=t,l.row=e,l.col=n,new ks(l)},validationComparers:{greaterThan:function(t,e){return t>e},lessThan:function(t,e){return t<e},between:function(t,e,n){return t>=e&&t<=n},equalTo:function(t,e){return t===e},notEqualTo:function(t,e){return t!==e},greaterThanOrEqualTo:function(t,e){return t>=e},lessThanOrEqualTo:function(t,e){return t<=e},notBetween:function(t,e,n){return t<e||t>n},custom:function(t,e){return e},list:function(t,e){return e.indexOf(t)>-1}}};As.Validation=ks;const{measureText:Es}=i;let Ts=["color","fontFamily","underline","italic","bold","textAlign","indent","verticalAlign","background","format","link","editor","borderTop","borderRight","borderBottom","borderLeft","comment","html"],Ms=class t{constructor(t,e){this._sheet=e,this._ref=t}clone(){return new t(this._ref.clone(),this._sheet)}skipHiddenCells(){let t=[],e=this,n=e._sheet,i=n.isHiddenRow.bind(n),r=n.isHiddenColumn.bind(n);return e._ref.forEach((function(n){let o=(n=e._normalize(n.toRangeRef())).topLeft,s=n.bottomRight,a=Os(o.row,s.row,i),l=Os(o.col,s.col,r);for(let e=0;e<a.length;++e)for(let n=0;n<l.length;++n)t.push(new yn(new mn(a[e].begin,l[n].begin),new mn(a[e].end,l[n].end)))})),n.range(t.length>1?new vn(t):t[0])}_normalize(t){return this._sheet._grid.normalize(t)}_set(t,e,n){let i=this,r=i._sheet;return i._ref.forEach((function(n){let i=n;if(("value"===t||"formula"===t||"link"===t)&&n.topLeft){let t=new mn(n.topLeft.row,n.topLeft.col);r.forEachMergedCell((function(e){e.intersects(t)&&(i=t)}))}r._set(i.toRangeRef(),t,e)})),n||r.triggerChange({recalc:"formula"===t||"value"===t||"validation"===t,value:e,range:i,ref:i._ref,isValue:"value"===t}),i}_get(t){return this._sheet._get(this._ref.toRangeRef(),t)}_property(t,e){return void 0===e?this._get(t):this._set(t,e)}value(t){return void 0!==t&&this._set("formula",null,!0),this._property("value",t)}html(t){return this._property("html",t)}resize(e){let n=this._resizedRef(e);return new t(n,this._sheet)}_resizedRef(t){return this._ref.map((function(e){return e.toRangeRef().resize(t)}))}input(t,e){e=Object.assign({},e,{arrayFormula:!1});let n,i=this._get("format");if(void 0!==t){let r=this._ref.toRangeRef().topLeft;return n=Qn.parse(this._sheet.name(),r.row,r.col,t,i),this._sheet.batch(function(){let r=null;if("exp"===n.type)r=Qn.compile(n);else if("@"!==i){let t=i&&zo.type(n.value,i);"date"===n.type&&"date"!==t?this.format(n.format||$n().calendar.patterns.d.replace(/M/g,"m").replace(/'/g,'"').replace(/tt/,"am/pm")):"percent"===n.type&&"percent"!==t?this.format(100*n.value==(100*n.value|0)?"0%":"0.00%"):n.format&&(!i||n.currency||"number"===t&&"number"===n.type&&n.format.length>i.length)&&this.format(n.format)}else"string"!==n.type&&(n.value=t);this.formula(r,e.arrayFormula),r||this.value(n.value)}.bind(this),{recalc:!0,value:t,ref:this._ref,editorChange:this._sheet.isInEditMode(),isValue:!0}),this}{t=this._get("value");let e=this._get("formula"),o=i&&!e&&zo.type(t,i);if(e)t="="+e;else t:{if(i&&"date"===o){let e=zo.text(t,i);if(n=Qn.parse(null,null,null,e,i),e===zo.text(n.value,i)){t=e;break t}}if("date"===o){const e=zn();t=e.toString(Ci(t),$n().calendar.patterns.d,e.locale)}else"percent"===o?t=Qn.runtime.limitPrecision(100*t)+"%":"string"==typeof t&&(/^[=']/.test(t)||/^(?:true|false)$/i.test(t)||!/^=/.test(r=t)&&/number|percent/.test(Qn.parse(null,0,0,r).type))?t="'"+t:this._sheet._useCultureDecimals()&&"number"==typeof t&&t!==Math.floor(t)&&(t=String(t).replace(".",$n().numbers.symbols.decimal))}return t}var r}enable(t){return void 0===t?!En((function(t){this._sheet.forEach(this._ref,(function(e,n,i){!1===i.enable&&t(!0)}))}),this):this._property("enable",t)}formula(t,e){let n=this;if(void 0===t){let t=n._get("formula");return t?""+t:null}if(e){let e=this._ref.toRangeRef();(t=n._sheet.range(e.topLeft)._set("formula",t)._get("formula"))&&t.setArrayFormulaRange(e)}else n._set("formula",t);return n}intersectingArrayFormula(){let t=this._ref.clone().simplify().setSheet(this._sheet.name());return En((function(e){this._sheet._forFormulas((function(n){let i=n.arrayFormulaRange;i&&(i=t.intersect(i))!==fn&&e({formula:n,intersection:i})}))}),this)}canEditArrayFormula(){let t=this.intersectingArrayFormula();return!t||t.formula.arrayFormulaRange.eq(t.intersection)}validation(t){if(void 0===t){let t=this._get("validation");return t?t.toJSON():null}return this._property("validation",t)}_getValidationState(){let t,e,n=this._ref.toRangeRef(),i=n.topLeft.row,r=n.topLeft.col,o=n.bottomRight.row,s=n.bottomRight.col;for(t=r;t<=s;t++)for(e=i;e<=o;e++){let n=this._sheet._validation(e,t);if(n&&"reject"===n.type&&!1===n.value)return n}return!1}merge(){return this._ref=this._sheet._merge(this._ref),this}unmerge(){let t=this._sheet._mergedCells;return this._ref.forEach((function(e){e.toRangeRef().intersecting(t).forEach((function(e){t.splice(t.indexOf(e),1)}))})),this._sheet.triggerChange({}),this}select(){return this._sheet.select(this._ref),this}values(t){if(this._ref instanceof vn)throw new Error("Unsupported for multiple ranges.");if(this._ref===fn){if(void 0!==t)throw new Error("Unsupported for NULLREF.");return[]}let e,n,i=this._ref.toRangeRef(),r=i.topLeft.row,o=i.topLeft.col,s=i.bottomRight.row,a=i.bottomRight.col;if(void 0===t){t=new Array(i.height());for(let e=0;e<t.length;e++)t[e]=new Array(i.width());for(e=o;e<=a;e++)for(n=r;n<=s;n++)t[n-r][e-o]=this._sheet._value(n,e);return t}for(this._sheet._set(i,"formula",null),e=o;e<=a;e++)for(n=r;n<=s;n++){let i=t[n-r];if(i){let t=i[e-o];void 0!==t&&this._sheet._value(n,e,t)}}return this._sheet.triggerChange({recalc:!0,ref:i}),this}_properties(t,e){if(this._ref instanceof vn)throw new Error("Unsupported for multiple ranges.");if(this._ref===fn){if(void 0!==t)throw new Error("Unsupported for NULLREF.");return[]}let n,i,r=this._ref.toRangeRef(),o=r.topLeft.row,s=r.topLeft.col,a=r.bottomRight.row,l=r.bottomRight.col,c=this._sheet;if(void 0===t)return t=new Array(r.height()),c.forEach(r,(function(e,n,i){n-=s,(t[e-=o]||(t[e]=[]))[n]=i})),t;{let h;r=r.clone();let u=function(t){let e=h[t];r.topLeft.row=r.bottomRight.row=i,r.topLeft.col=r.bottomRight.col=n,"value"===t&&c._set(r,"formula",null),c._set(r,t,e)};for(n=s;n<=l;n++)if(e||!c.isHiddenColumn(n))for(i=o;i<=a;i++){if(!e&&c.isHiddenRow(i))continue;if(e&&c.isFilteredRow(i))continue;let r=t[i-o];r&&(h=r[n-s],h&&Object.keys(h).forEach(u))}return c.triggerChange({recalc:!0,ref:this._ref}),this}}clear(t){let e=(t=t||{}).clearAll||!Object.keys(t).length,n=this._sheet,i={recalc:e||t.contentsOnly,ref:this._ref};return n.batch(function(){i.recalc&&this.formula(null),e&&this.validation(null),(e||t.formatOnly)&&(Ts.forEach(function(e){t.keepBorders&&/^border/i.test(e)||this[e](null)}.bind(this)),this.fontSize(null),this.wrap(null),this.unmerge())}.bind(this),i),this}clearContent(){return this.clear({contentsOnly:!0})}clearFormat(){return this.clear({formatOnly:!0})}isSortable(){return!this.cantSort()}cantSort(){if(this._ref instanceof vn)return{code:"cantSortMultipleSelection",message:"Unsupported for multiple ranges."};if(this._ref===fn)return{code:"cantSortNullRef",message:"Unsupported for NULLREF."};let t=this._sheet._getMergedCells(this._ref.toRangeRef()),e=t.primary,n=t.secondary,i=null,r=null,o={};try{this._sheet.forEach(this,(function(s,a){let l=new mn(s,a).print(),c=e[l];if(c){if(null===i)i=c.width(),r=c.height();else if(i!==c.width()||r!==c.height())throw o}else if(!n[l]&&t.hasMerged)throw o}))}catch(t){if(t!==o)throw t;return{code:"cantSortMixedCells",message:"Unsupported for range containing cells of different shapes."}}return!1}sort(t){let e=this.cantSort();if(e)throw new Error(e.message);return void 0===t&&(t={column:0}),t=t instanceof Array?t:[t],this._sheet._sortBy(this._ref.toRangeRef(),t.map((function(t,e){return"number"==typeof t&&(t={column:t}),{index:void 0===t.column?e:t.column,ascending:void 0===t.ascending||t.ascending}}))),this}isFilterable(){return!(this._ref instanceof vn)}filter(t){if(this._ref instanceof vn)throw new Error("Unsupported for multiple ranges.");return!1===t?this.clearFilters():(t=!0===t?[]:t instanceof Array?t:[t],this._sheet._filterBy(this._ref.toRangeRef(),t.map((function(t,e){return{index:void 0===t.column?void 0===t.index?e:t.index:t.column,filter:t.filter}})))),this}clearFilter(t){this._sheet.clearFilter(t)}clearFilters(){let t=this._sheet.filter(),e=[];if(t){for(let n=0;n<t.columns.length;n++)e.push(t.columns[n].index);this._sheet.batch((function(){this.clearFilter(e),this._filter=null}),{layout:!0,filter:!0})}}hasFilter(){let t=this._sheet.filter();return Boolean(t)}leftColumn(){return new t(this._ref.leftColumn(),this._sheet)}rightColumn(){return new t(this._ref.rightColumn(),this._sheet)}topRow(){return new t(this._ref.topRow(),this._sheet)}bottomRow(){return new t(this._ref.bottomRow(),this._sheet)}column(e){return new t(this._ref.toColumn(e),this._sheet)}row(e){return new t(this._ref.toRow(e),this._sheet)}forEachRow(e){this._ref.forEachRow(function(n){e(new t(n,this._sheet))}.bind(this))}forEachColumn(e){this._ref.forEachColumn(function(n){e(new t(n,this._sheet))}.bind(this))}sheet(){return this._sheet}topLeft(){return this._ref.toRangeRef().topLeft}intersectingMerged(){let t=this._sheet,e=[];return t._mergedCells.forEach(function(t){t.intersects(this._ref)&&e.push(t.toString())}.bind(this)),e}getState(t){let e,n=this._ref.first(),i={ref:n,data:[],origRef:this._ref,rows:this._sheet._rows.getState()};t?e="input"===t?["value","formula"]:"border"===t?["borderLeft","borderTop","borderRight","borderBottom"]:[t]:(e=Ss,i.mergedCells=this.intersectingMerged());let r=i.data;return this.forEachCell((function(t,i,o){let s={},a=t-n.row,l=i-n.col;r[a]||(r[a]=[]),r[a][l]=s,e.forEach((function(t){let e=void 0===o[t]?null:o[t];(e instanceof Qn.runtime.Formula||e instanceof As.Validation)&&(e=e.deepClone()),s[t]=e}))})),i}setState(t,e){let n=this._sheet,i=this._ref.first(),r=t.ref.row-i.row,o=t.ref.col-i.col,s=e&&!e.isExternal(),a=e&&!s;n.batch(function(){t.mergedCells&&this.unmerge(),e||this._sheet._rows.setState(t.rows);let l=i.row,c=this.hasFilter();t.data.forEach((function(r,o){if(c&&s&&n.isHiddenRow(t.ref.row+o))return;let h=i.col;r.forEach((function(r,u){if(c&&s&&n.isHiddenColumn(t.ref.col+u))return;let d=e?n.range(l,h):n.range(i.row+o,i.col+u);if(d.enable()){for(let t in r)"value"!==t&&(e&&"enable"===t||d._set(t,r[t]));if(!r.formula)if(a)try{null==r.value?d._set("value",null):d.input(r.value)}catch(t){d._set("value",r.value)}else d._set("value",r.value)}h++})),l++})),t.mergedCells&&t.mergedCells.forEach((function(t){t=n._ref(t).relative(r,o,3),n.range(t).merge()}),this)}.bind(this),{recalc:!0,ref:this._ref})}_adjustRowHeight(){let t=this,e=t._sheet,n=e._getMergedCells(t._ref.toRangeRef()),i=n.primary,r=n.secondary;e.batch((function(){t.forEachRow((function(t){let n=t._ref.topLeft.row,o=e.rowHeight(n);o&&(t.forEachCell((function(t,n,s){let a=new mn(t,n).print();if(r[a])return;let l,c=i[a];l=c?e._columns.sum(c.topLeft.col,c.bottomRight.col):e.columnWidth(n);let h=s.value;s.format&&null!=h&&(h=zo.format(h,s.format));let u=function(t,e,n,i,r){const o=document.createElement("div");o.setAttribute("style","position: absolute !important; top: -4000px !important; height: auto !important;padding: 1px 3px !important; box-sizing: border-box; margin: 0 !important; border: 1px solid black !important;line-height: normal !important; visibility: hidden !important;white-space: pre-wrap;");let s={baselineMarkerSize:0,width:!0===r?e+"px":"auto","font-size":(i||12)+"px","font-family":n||"Arial","white-space":!0===r?"pre-wrap":"pre","overflow-wrap":!0===r?"break-word":"normal","word-wrap":!0===r?"break-word":"normal"};return Es(t,s,{box:o,normalizeText:!1}).height}(h,l,s.fontFamily,s.fontSize,s.wrap);o=Math.max(o,u)})),e.rowHeight(n,o))}))}),{layout:!0})}forEachCell(t){this._ref.forEach(function(e){this._sheet.forEach(e.toRangeRef(),t.bind(this))}.bind(this))}hasValue(){let t=this._sheet._defaultCellStyle;return En((function(e){this.forEachCell((function(n,i,r){for(let n in r){let i=r[n];null!=i&&i!==t[n]&&e(!0)}}))}),this)}wrap(t){return void 0===t?Boolean(this._property("wrap")):(this._property("wrap",t),null!==t&&this._adjustRowHeight(),this)}fontSize(t){return void 0===t?this._property("fontSize"):(this._property("fontSize",t),null!==t&&this._adjustRowHeight(),this)}draw(t,e){this._sheet.draw(this,t,e)}insideBorders(t){return this.insideVerticalBorders(t).insideHorizontalBorders(t)}insideVerticalBorders(t){return this._ref.forEach((function(e){e instanceof yn&&e.width()>1&&((e=e.clone()).topLeft.col++,this._sheet.range(e)._set("vBorders",t))}),this),this}insideHorizontalBorders(t){return this._ref.forEach((function(e){e instanceof yn&&e.height()>1&&((e=e.clone()).topLeft.row++,this._sheet.range(e)._set("hBorders",t))}),this),this}};function Os(t,e,n){for(;t<=e&&n(t);)t++;if(t>e)return[];for(let i=t+1;i<=e;++i)if(n(i))return[{begin:t,end:i-1}].concat(Os(i+1,e,n));return[{begin:t,end:e}]}Ts.forEach((function(t){Ms.prototype[t]=function(e){return this._property(t,e)}}));var Is=Qn.runtime.Formula,Ds="incompatibleRanges",Fs=Ms.FillError=function(t){this.code=t};function Ps(t){for(var e=t.length,n=(e+1)/2,i=t.reduce((function(t,e){return t+e}),0)/e,r=0,o=0,s=0;s<e;s++){var a=s+1-n;r+=a*(t[s]-i),o+=a*a}if(!o)return function(e){return t[e%t.length]};var l=r/o,c=i-l*n;return function(t){return c+l*(t+1)}}function Rs(t){function e(t){return t.map((function(t){return t.number}))}var n=[],i=t.map((function(t){return t.formula||t.value}));return function(t,e){for(var n,i=null,r=0,o=[],s=0;s<t.length;++s)n=Ls(t[s]),o.push(n),null!=i&&n.type!==i.type&&(e(r,s,i.type,o.slice(r,s)),r=s),i=n;e(r,s,i.type,o.slice(r,s))}(i,(function(t,r,o,s){var a,l;if("number"==o)a=Ps(l=e(s));else if("string"==o||"formula"==o||"boolean"==o)a=function(t,e){return i[e]};else if(Array.isArray(o))if(1==s.length)a=function(t){return o[(s[0].number+t)%o.length]};else{var c=function(t){for(var e=t[1]-t[0],n=2;n<t.length;++n)if(t[n]-t[n-1]!=e)return null;return e}(e(s));a=null==c?function(t){return s[t%s.length].value}:function(t){var e=s[0].number+c*t;return o[e%o.length]}}else"null"!=o?(1==(l=e(s)).length&&l.push(l[0]+1),l=Ps(l),a=function(t,e){return i[e].replace(/^(.*[\D0]+)\d+/,"$1"+l(t,e))}):a=function(){return null};for(var h={f:a,begin:t,end:r,len:r-t},u=t;u<r;++u)n[u]=h})),function(e,r){var o,s,a=n[r],l=e/i.length|0,c=e%i.length,h=l*a.len+c-a.begin,u=a.f(h,r),d=(o=t[r],s={},Object.keys(o||{}).forEach((function(t){s[t]=o[t]})),s);return delete d.enable,u instanceof Is?d.formula=u:d.value=u,d}}function Ls(t){if("number"==typeof t)return{type:"number",number:t};if("string"==typeof t){var e=function(t){for(var e=t.toLowerCase(),n=function(){const t=$n().calendar;return[t.days.format.abbreviated,t.days.format.wide,t.months.format.abbreviated,t.months.format.wide]}(),i=0;i<n.length;++i)for(var r=n[i],o=r.length;--o>=0;){if(r[o].toLowerCase()==e)return{type:r,number:o,value:t}}}(t);if(e)return e;var n=/^(.*\D)(\d+)/.exec(t);return n?{type:t=t.replace(/^(.*\D)\d+/,"$1-######"),match:n,number:parseFloat(n[2])}:{type:"string"}}if("boolean"==typeof t)return{type:"boolean"};if(null==t)return{type:"null"};if(t instanceof Is)return{type:"formula"};throw window.console.error(t),new Error("Cannot fill data")}function Ns(t){for(var e=t.length,n=t[0].length,i=[],r=0;r<n;++r){i[r]=[];for(var o=0;o<e;++o)i[r][o]=t[o][r]}return i}Ms.prototype._previewFillFrom=function(t,e){var n=this,i=n._sheet;"string"==typeof t&&(t=i.range(t));var r=t._ref.toRangeRef().clone().setSheet(i.name()),o=n._ref.toRangeRef().clone().setSheet(i.name());if(r.intersects(o)){if(r.eq(o))return null;if(o=o.clone(),r.topLeft.eq(o.topLeft))if(r.width()==o.width())o.topLeft.row+=r.height(),e=0;else{if(r.height()!=o.height())throw new Fs(Ds);o.topLeft.col+=r.width(),e=1}else{if(!r.bottomRight.eq(o.bottomRight))throw new Fs(Ds);if(r.width()==o.width())o.bottomRight.row-=r.height(),e=2;else{if(r.height()!=o.height())throw new Fs(Ds);o.bottomRight.col-=r.width(),e=3}}return i.range(o)._previewFillFrom(t,e)}if(null==e)if(r.topLeft.col==o.topLeft.col)e=r.topLeft.row<o.topLeft.row?0:2;else{if(r.topLeft.row!=o.topLeft.row)throw new Fs("noFillDirection");e=r.topLeft.col<o.topLeft.col?1:3}var s=1&e,a=2&e;if(s&&r.height()!=o.height()||!s&&r.width()!=o.width())throw new Fs(Ds);var l,c=t._properties();s?l=o.width():(c=Ns(c),l=o.height());for(var h=new Array(c.length),u=null,d=0;d<c.length;++d)for(var p=c[d],f=Rs(p),g=h[d]=new Array(l),m=0;m<l;++m){var y=a?-m-1:p.length+m,v=a?p.length-m%p.length-1:m%p.length,b=g[a?l-m-1:m]=f(y,v);null!=b.value&&(u=b.value)}return s||(h=Ns(h)),{props:h,direction:e,dest:n,hint:u}},Ms.prototype.fillFrom=function(t,e){var n=this._previewFillFrom(t,e);return n.dest._properties(n.props,!0),n.dest};const Bs="string",js="function";let zs=function(){this._defaultPrevented=!0},$s=function(){return!0===this._defaultPrevented};class Hs{constructor(){this._events={}}bind(t,e,n){let i,r,o,s,a,l=this,c=typeof t===Bs?[t]:t,h=typeof e===js;if(void 0===e){for(i in t)l.bind(i,t[i]);return l}for(i=0,r=c.length;i<r;i++)t=c[i],s=h?e:e[t],s&&(n&&(o=s,s=function(){l.unbind(t,s),o.apply(l,arguments)},s.original=o),a=l._events[t]=l._events[t]||[],a.push(s));return l}one(t,e){return this.bind(t,e,!0)}first(t,e){let n,i,r,o,s=this,a=typeof t===Bs?[t]:t,l=typeof e===js;for(n=0,i=a.length;n<i;n++)t=a[n],r=l?e:e[t],r&&(o=s._events[t]=s._events[t]||[],o.unshift(r));return s}trigger(t,e){let n,i,r=this,o=r._events[t];if(o){for((e=e||{}).sender=r,e._defaultPrevented=!1,e.preventDefault=zs,e.isDefaultPrevented=$s,o=o.slice(),n=0,i=o.length;n<i;n++)o[n].call(r,e);return!0===e._defaultPrevented}return!1}unbind(t,e){let n,i=this,r=i._events[t];if(void 0===t)i._events={};else if(r)if(e)for(n=r.length-1;n>=0;n--)r[n]!==e&&r[n].original!==e||r.splice(n,1);else i._events[t]=[];return i}}class Us extends Hs{constructor(t,e){super(),this.element=t,this.events=[],this.options=e}setOptions(t){this._setEvents(t),In({},this.options,t)}_setEvents(t){let e,n=this,i=0,r=n.events.length;for(;i<r;i++)e=n.events[i],n.options[e]&&t[e]&&(n.unbind(e,n.options[e]),n._events&&n._events[e]&&delete n._events[e]);n.bind(n.events,t)}resize(t){const e=this.getSize(),n=this._size;(t||(e.width>0||e.height>0)&&(!n||e.width!==n.width||e.height!==n.height))&&(this._size=e,this._resize(e,t),this.trigger("resize",e))}getSize(){return{width:this.element.offsetWidth,height:this.element.offsetHeight}}destroy(){this.unbind()}}class Vs extends Hs{constructor(t){super(),this.events=["activate","deactivate","change","update"],this.view=t,this.formulaBar=t.formulaBar,this._active=!1,this.barInput=t.formulaBar.formulaInput,this.cellInput=t.formulaInput,this.barInput.syncWith(this.cellInput),this.cellInput.syncWith(this.barInput),this.barInput.bind("keyup",this._triggerUpdate.bind(this)),this.cellInput.bind("keyup",this._triggerUpdate.bind(this)),this.barInput.bind("blur",this._blur.bind(this)),this.cellInput.bind("blur",this._blur.bind(this))}_blur(){this.deactivate()}_triggerUpdate(){this.trigger("update",{value:this.value()})}activeEditor(){let t=null,e=function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}}();return this.barElement()===e?t=this.barInput:this.cellElement()===e&&(t=this.cellInput),t}activate(t){let e,n,i,r=this.view.element;return this._active=!0,this._rect=t.rect,this._range=t.range,this.cellInput.position(t.rect),this.cellInput.resize(t.rect),this.cellInput.tooltip(t.tooltip),this.cellInput.activeCell=this.barInput.activeCell=this._range.topLeft(),this.cellInput.activeSheet=this.barInput.activeSheet=this._range._sheet,r&&(e=r.offsetWidth,n=r.querySelector(".k-spreadsheet-scroller"),i=n.offsetWidth-n.clientWidth,this.cellInput.element.style.maxWidth=e-i-parseFloat(this.cellInput.element.style.left)+"px"),this.trigger("activate"),this}deactivate(t){let e=this.cellInput;this._active&&(this._active=!1,t||e.value()===this._value||this.trigger("change",{value:e.value(),range:this._range}),this._rect=null,e.hide(),this.trigger("deactivate"))}enable(t){this.barInput.enable(t),this.cellInput.enable(t)}barElement(){return this.barInput.element}cellElement(){return this.cellInput.element}focus(t){"cell"===(t=t||"cell")?(this.cellInput.element.focus(),this.cellInput.end()):this.barInput.focus()}isActive(){return this._active}isFiltered(){return this.barInput.popup.visible()||this.cellInput.popup.visible()}canInsertRef(t){let e=this.activeEditor();return e&&e.canInsertRef(t)}highlightedRefs(){let t=this.activeEditor(),e=[];return t&&(e=t.highlightedRefs()),e}scale(){this.cellInput.scale()}toggleTooltip(t){var e,n;this.cellInput.toggleTooltip((e=this._rect,n=t,e&&(e.top!==n.top||e.left!==n.left)))}value(t,e){if(void 0===t)return this.barInput.value();null===t&&(t=""),this._value=t,this.barInput.value(t),this.cellInput.value(t),this.barInput.element.classList.toggle("k-spreadsheet-array-formula",Boolean(e))}insertNewline(){this.activeEditor().insertNewline(),this.scale()}select(){this.activeEditor().select()}}const Ws=/&/g,qs=/</g,Ks=/"/g,Xs=/'/g,Gs=/>/g;class Ys{constructor(t,e){this._value=e,this._count=t,this.values=new fs(0,t-1,e),this._hidden=new fs(0,t-1,0),this.scrollBarSize=Rn(),this._refresh()}_resize(t){t>this._count?(this.values.value(this._count,t-1,this._value),this._hidden.value(this._count,t-1,0)):t<this._count&&(this.values.value(t,this._count-1,0),this._hidden.value(t,this._count-1,0)),this._count=t,this._refresh()}adjust(t,e){e<0?(this.values.copy(t-e,this._count-1,t),this._hidden.copy(t-e,this._count-1,t)):(this.values.copy(t,this._count,t+e),this._hidden.copy(t,this._count,t+e),this.values.value(t,t+e-1,this._value),this._hidden.value(t,t+e-1,0)),this._refresh()}toJSON(t,e){let n=[],i=this.values.iterator(0,this._count-1);for(let r=0;r<this._count;r++){let o=i.at(r),s=this._hidden.value(r,r);if(o===this._value&&!s)continue;let a=e[r];if(void 0===a){a=n.length;let i={index:r};i[t]=o,s&&(i.hidden=s),n.push(i),e[r]=a}}return n}fromJSON(t,e){for(let n=0;n<e.length;n++){let i=e[n],r=i.index;void 0===r&&(r=n);let o=i[t];0===o?(this._hidden.value(r,r,i.hidden||this._value),this.value(r,r,0)):this.value(r,r,o)}}hide(t){if(!this.hidden(t)){let e=this.value(t,t);this._hidden.value(t,t,e),this.value(t,t,0)}}hidden(t){return 0!==this._hidden.value(t,t)}includesHidden(t,e){return this._hidden.intersecting(t,e).length>1}nextVisible(t){let e=this._count-1,n=t;for(;++n<=e;)if(!this.hidden(n))return n;return t}nextUntil(t,e){let n=this._count-1,i=t,r=!1;for(;++i<=n;){let t=e(i,r,this.hidden(i));if("number"==typeof t)return t;if(t)break;r=!0}return i-1}nextPage(t,e){return this.index(this.sum(0,t-1)+e)}prevPage(t,e){return this.index(this.sum(0,t)-e)}firstVisible(){let t=this._hidden.first();return 0===t.value?0:t.end+1}lastVisible(){let t=this._hidden.last();return 0===t.value?this._count-1:t.start-1}prevVisible(t){let e=t;for(;--e>=0;)if(!this.hidden(e))return e;return t}prevUntil(t,e){let n=t,i=!1;for(;--n>=0;){let t=e(n,i,this.hidden(n));if("number"==typeof t)return t;if(t)break;i=!0}return n+1}unhide(t){if(this.hidden(t)){let e=this._hidden.value(t,t);this._hidden.value(t,t,0),this.value(t,t,e)}}value(t,e,n){if(void 0===n)return this.values.iterator(t,e).at(0);this.values.value(t,e,n),this._refresh()}sum(t,e){let n=this.values.iterator(t,e),i=0;for(let r=t;r<=e;r++)i+=n.at(r);return i}locate(t,e,n){let i=this.values.iterator(t,e),r=0;for(let o=t;o<=e;o++){if(r+=i.at(o),n(r))return o}return null}visible(t,e){let n=null,i=null,r=!1;e>=this.total+this.scrollBarSize&&(r=!0);let o=this._pixelValues.intersecting(t,e);if(n=o[0],i=o[o.length-1],!n)return{values:this.values.iterator(0,0),offset:0};let s=t-n.start,a=(s/n.value.value>>0)+n.value.start,l=s-(a-n.value.start)*n.value.value,c=e-i.start,h=(c/i.value.value>>0)+i.value.start;return h>i.value.end&&(h=i.value.end),r&&(l+=i.value.value-(c-(h-i.value.start)*i.value.value)),l=Math.min(-l,0),{values:this.values.iterator(a,h),offset:l}}index(t){let e=0,n=this.values.iterator(0,this._count-1),i=n.at(0);for(;i<t&&e<this._count-1;)i+=n.at(++e);return e}indexVisible(t){let e=this.index(t);return this.hidden(e)&&(e=this.prevVisible(e)),e}_refresh(){let t=0;this._pixelValues=this.values.map((function(e){let n=t;return t+=(e.end-e.start+1)*e.value,new ls(n,t-1,e)})),this.total=t}getState(){return{values:this.values.getState(),hidden:this._hidden.getState(),count:this._count}}setState(t){this.values.setState(t.values),this._hidden.setState(t.hidden);let e=this._count;e>t.count?(this._count=t.count,this._resize(e)):this._refresh()}}class Js{constructor(t,e,n,i){this._axis=t,this._start=e,this._count=n,this.hasHeader=0===e,this.headerSize=i,this.defaultValue=t._value,this.frozen=n>0}viewSize(t){this._viewSize=t}sum(t,e){return this._axis.sum(t,e-1)}start(){return this.sum(0,this._start)}size(){return this.sum(this._start,this._start+this._count)}index(t,e){return this._axis.index(t+(this.frozen?0:e)-this.headerSize)}indexVisible(t,e){return this._axis.indexVisible(t+(this.frozen?0:e)-this.headerSize)}paneSegment(){let t,e=this.start();return this.hasHeader||(e+=this.headerSize),this.frozen?(t=this.size(),this.hasHeader?t+=this.headerSize:t-=this.headerSize):t=this._viewSize-e,{offset:e,length:t}}visible(t){let e,n=this.start();this.frozen?(e=this.size(),this.hasHeader||(e-=this.headerSize)):(e=this._viewSize-n-this.headerSize,n+=t);let i=this._axis.visible(n,n+e-1);return this.frozen&&(i.offset=0),i.start=n,this.hasHeader&&(i.offset+=this.headerSize,i.start-=this.headerSize),i}contains(t,e){return this.frozen?!(t>this._start+this._count)&&!(e<this._start):e>=this._start}}class Zs{constructor(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i,this.right=this.left+this.width,this.bottom=this.top+this.height}offset(t,e){return new Zs(this.left+t,this.top+e,this.width,this.height)}resize(t,e){return new Zs(this.left,this.top,this.width+t,this.height+e)}intersects(t,e){return t instanceof Zs?this.intersectsRect(t):this.left<t&&t<this.left+this.width&&this.top<e&&e<this.top+this.height}intersectsRect(t){let e=this;return e.left<=t.right&&t.left<=e.right&&e.top<=t.bottom&&t.top<=e.bottom}toDiv(t){return Zn.element("div",{className:t,style:{width:this.width+"px",height:this.height+"px",top:this.top+"px",left:this.left+"px"}})}}class Qs{constructor(t,e,n,i,r,o){this.rowCount=n,this.columnCount=i,this._columns=e,this._rows=t,this._headerHeight=r,this._headerWidth=o}_resize(t,e){this.rowCount=t,this.columnCount=e}isAxis(t){let e=(t=t.toRangeRef()).topLeft,n=t.bottomRight;return 0===e.row&&n.row===this.rowCount-1||0===e.col&&n.col===this.columnCount-1}width(t,e){return this._columns.sum(t,e)}height(t,e){return this._rows.sum(t,e)}totalHeight(){return this._rows.total+this._headerHeight}totalWidth(){return this._columns.total+this._headerWidth}index(t,e){return e*this.rowCount+t}cellRef(t){return new mn(t%this.rowCount,t/this.rowCount>>0)}rowRef(t){return new yn(new mn(t,0),new mn(t,this.columnCount-1))}colRef(t){return new yn(new mn(0,t),new mn(this.rowCount-1,t))}cellRefIndex(t){return this.index(t.row,t.col)}normalize(t){return t instanceof yn?new yn(this.normalize(t.topLeft),this.normalize(t.bottomRight)).setSheet(t.sheet,t.hasSheet()):t instanceof vn?t.map((function(t){return this.normalize(t)}),this):(t instanceof mn&&((t=t.clone()).col=Math.max(0,Math.min(this.columnCount-1,t.col)),t.row=Math.max(0,Math.min(this.rowCount-1,t.row))),t)}rectangle(t){let e=this.normalize(t.topLeft),n=this.normalize(t.bottomRight);return new Zs(this.width(0,e.col-1),this.height(0,e.row-1),this.width(e.col,n.col),this.height(e.row,n.row))}pane(t){return new ta(new Js(this._rows,t.row,t.rowCount,this._headerHeight),new Js(this._columns,t.column,t.columnCount,this._headerWidth),this)}rangeDimensions(t){return{rows:this._rows.values.iterator(t.topLeft.row,t.bottomRight.row),columns:this._columns.values.iterator(t.topLeft.col,t.bottomRight.col)}}forEach(t,e){let n=this.normalize(t.topLeft),i=this.normalize(t.bottomRight);for(let t=n.col;t<=i.col;t++)for(let r=n.row;r<=i.row;r++)e(new mn(r,t))}trim(t,e){let n=this.normalize(t.topLeft),i=this.normalize(t.bottomRight),r=n.row,o=n.col;for(let t=n.col;t<=i.col;t++){let s=this.index(n.row,t),a=this.index(i.row,t),l=e.tree.intersecting(s,a);if(l.length){let e=this.cellRef(l[l.length-1].end);r=Math.max(r,e.row),o=t}}return new yn(t.topLeft,new mn(Math.min(r,t.bottomRight.row),o))}}class ta{constructor(t,e,n){this.rows=t,this.columns=e,this._grid=n,this.headerHeight=t.headerSize,this.headerWidth=e.headerSize,this.hasRowHeader=e.hasHeader,this.hasColumnHeader=t.hasHeader}refresh(t,e){this.columns.viewSize(t),this.rows.viewSize(e);let n=this.columns.paneSegment(),i=this.rows.paneSegment();this.left=n.offset,this.top=i.offset,this.right=n.offset+n.length,this.bottom=i.offset+i.length,this.style={top:i.offset+"px",left:n.offset+"px",height:i.length+"px",width:n.length+"px"}}view(t,e){let n=this.rows.visible(e),i=this.columns.visible(t);return{rows:n,columns:i,rowOffset:n.offset,columnOffset:i.offset,mergedCellLeft:i.start,mergedCellTop:n.start,ref:new yn(new mn(n.values.start,i.values.start),new mn(n.values.end,i.values.end))}}contains(t){return this.rows.contains(t.topLeft.row,t.bottomRight.row)&&this.columns.contains(t.topLeft.col,t.bottomRight.col)}index(t,e){return this._grid.index(t,e)}boundingRectangle(t){return this._grid.rectangle(t)}cellRefIndex(t){return this._grid.cellRefIndex(t)}scrollBoundaries(t){let e=this.boundingRectangle(t),n={top:Math.max(0,e.top-this.top+(this.hasColumnHeader?0:this.headerHeight)),left:Math.max(0,e.left-this.left+(this.hasRowHeader?0:this.headerWidth)),right:e.right-this.columns._viewSize+this.headerWidth,bottom:e.bottom-this.rows._viewSize+this.headerHeight},i=this.columns.defaultValue/2,r=this.rows.defaultValue/2;return n.scrollTop=n.top-r,n.scrollBottom=n.bottom+r,n.scrollLeft=n.left-i,n.scrollRight=n.right+i,n}}class ea{constructor(t,e){this._grid=t,this._lists=e}indices(t,e,n,i){let r=ea.ascendingComparer;return!1===n&&(r=ea.descendingComparer),e.sortedIndices(this._grid.cellRefIndex(t.topLeft),this._grid.cellRefIndex(t.bottomRight),r,i)}sortBy(t,e,n,i,r){let o=this.indices(t.toColumn(e),n,i,r);for(let e=t.topLeft.col;e<=t.bottomRight.col;e++){let n=this._grid.index(t.topLeft.row,e),i=this._grid.index(t.bottomRight.row,e);for(let t=0;t<this._lists.length;t++)n<this._lists[t].lastRangeStart()&&this._lists[t].sort(n,i,o)}return o}}ea.ascendingComparer=function(t,e){if(null===t&&null===e)return 0;if(null===t)return 1;if(null===e)return-1;let n=typeof t,i=typeof e;if("number"===n)return"number"===i?t-e:-1;if("string"===n)switch(i){case"number":return 1;case"string":return t.localeCompare(e);default:return-1}if("boolean"===n)switch(i){case"number":case"string":return 1;case"boolean":return t-e;default:return-1}if(t instanceof Bn)return e instanceof Bn?0:1;throw new Error("Cannot compare "+t+" and "+e)},ea.descendingComparer=function(t,e){return null===t&&null===e?0:null===t?1:null===e?-1:ea.ascendingComparer(e,t)};class na{constructor(t){this._sheet=t}forEachSelectedColumn(t){let e=this._sheet;e.batch((function(){e.select().forEachColumnIndex((function(n,i){t(e,n,i)}))}),{layout:!0,recalc:!0})}forEachSelectedRow(t){let e=this._sheet;e.batch((function(){e.select().forEachRowIndex((function(n,i){t(e,n,i)}))}),{layout:!0,recalc:!0})}includesHiddenColumns(t){return this._sheet._grid._columns.includesHidden(t.topLeft.col,t.bottomRight.col)}includesHiddenRows(t){return this._sheet._grid._rows.includesHidden(t.topLeft.row,t.bottomRight.row)}selectionIncludesHiddenColumns(){return this.includesHiddenColumns(this._sheet.select())}selectionIncludesHiddenRows(){return this.includesHiddenRows(this._sheet.select())}deleteSelectedColumns(){let t=[],e=0;return this.forEachSelectedColumn((function(n,i){if(i-=e,n.isHiddenColumn(i))return;e++;let r=[];t.unshift({index:i,formulas:r,width:n.columnWidth(i)}),n._saveModifiedFormulas(r,(function(){n.deleteColumn(i)}))})),t}deleteSelectedRows(){let t=[],e=0;return this.forEachSelectedRow((function(n,i){if(i-=e,n.isHiddenRow(i))return;e++;let r=[];t.unshift({index:i,formulas:r,height:n.rowHeight(i)}),n._saveModifiedFormulas(r,(function(){n.deleteRow(i)}))})),t}hideSelectedColumns(){this.forEachSelectedColumn((function(t,e){t.hideColumn(e)}));let t=this._sheet,e=t.select().toRangeRef(),n=e.topLeft.col,i=e.bottomRight.col,r=null;for(;;){let e=i<t._columns._count,o=n>=0;if(!o&&!e)break;if(e&&!t.isHiddenColumn(i)){r=i;break}if(o&&!t.isHiddenColumn(n)){r=n;break}n--,i++}null!==r&&(e=new yn(new mn(0,r),new mn(t._rows._count-1,r)),t.range(e).select())}hideSelectedRows(){this.forEachSelectedRow((function(t,e){t.hideRow(e)}));let t=this._sheet,e=t.select().toRangeRef(),n=e.topLeft.row,i=e.bottomRight.row,r=null;for(;;){let e=i<t._rows._count,o=n>=0;if(!o&&!e)break;if(e&&!t.isHiddenRow(i)){r=i;break}if(o&&!t.isHiddenRow(n)){r=n;break}n--,i++}null!==r&&(e=new yn(new mn(r,0),new mn(r,t._columns._count-1)),t.range(e).select())}unhideSelectedColumns(){this.forEachSelectedColumn((function(t,e){t.unhideColumn(e)}))}unhideSelectedRows(){this.forEachSelectedRow((function(t,e){t.unhideRow(e)}))}addColumnLeft(){let t,e=this._sheet,n=0;return e.batch((function(){e.select().forEachColumnIndex((function(i){t||(t=i),e.insertColumn(t),++n}))}),{recalc:!0,layout:!0}),{base:t,count:n}}addColumnRight(){let t,e=this._sheet,n=0;return e.batch((function(){e.select().forEachColumnIndex((function(e){t=e+1,++n}));for(let i=0;i<n;++i)e.insertColumn(t)}),{recalc:!0,layout:!0}),{base:t,count:n}}addRowAbove(){let t,e=this._sheet,n=0,i=e.select();return e.batch((function(){i.forEachRowIndex((function(i){t||(t=i),e.insertRow(t),++n}))}),{recalc:!0,layout:!0}),{base:t,count:n}}addRowBelow(){let t,e=this._sheet,n=0;return e.batch((function(){e.select().forEachRowIndex((function(e){t=e+1,++n}));for(let i=0;i<n;++i)e.insertRow(t)}),{recalc:!0,layout:!0}),{base:t,count:n}}}class ia{constructor(t){this._grid=t}rectIsVertical(t,e,n,i){let r=this._grid.rectangle(t.toRangeRef()),o=this._grid.rectangle(e.toRangeRef());return Math.abs(o[i]-r[i])>Math.abs(r[n]-o[n])}autoFillDest(t,e){let n,i,r,o,s,a=t.topLeft,l=t.bottomRight,c=e.row>=a.row,h=e.col>=a.col;if(n=c?h?4:3:h?2:1,4===n)i=a,r=l,s=e.row>r.row||e.col>r.col,s&&(e=new mn(Math.max(e.row,r.row),Math.max(e.col,r.col))),o=this.rectIsVertical(r,e,"right","bottom")?new mn(e.row,r.col):new mn(r.row,e.col);else if(3===n){let t=new mn(a.col,l.row);e.row>l.row&&this.rectIsVertical(t,e,"left","bottom")?(i=a,o=new mn(e.row,l.col)):(i=l,o=new mn(a.row,e.col))}else if(2===n){let t=new mn(a.row,l.col);e.col>l.col&&!this.rectIsVertical(t,e,"right","top")?(i=a,o=new mn(l.row,e.col)):(i=l,o=new mn(e.row,a.col))}else i=l,o=this.rectIsVertical(a,e,"left","top")?new mn(e.row,a.col):new mn(a.row,e.col);return this._grid.normalize(new yn(i,o))}}class ra{constructor(t,e,n,i){this.rangeGetter=n,this.prevLeft=function(n){var r=i(this.range(n)),o=this.range(e.prevVisible(r.topLeft[t]));return i(o).topLeft[t]},this.nextRight=function(n){var r=i(this.range(n)),o=this.range(e.nextVisible(r.bottomRight[t]));return i(o).bottomRight[t]},this.nextLeft=function(n){var r=i(this.range(n));return e.nextVisible(r.bottomRight[t])},this.prevRight=function(n){var r=i(this.range(n));return e.prevVisible(r.topLeft[t])}}boundary(t,e){this.top=t,this.bottom=e}range(t){return this.rangeGetter(t,this.top,this.bottom)}}class oa{constructor(t){this._sheet=t,this.autoFillCalculator=new ia(t._grid),this.colEdge=new ra("col",this._sheet._grid._columns,this.columnRange.bind(this),this.union.bind(this)),this.rowEdge=new ra("row",this._sheet._grid._rows,this.rowRange.bind(this),this.union.bind(this))}height(t){this._viewPortHeight=t}union(t){return this._sheet.unionWithMerged(t)}columnRange(t,e,n){return this._sheet._ref(e,t,n-e,1)}rowRange(t,e,n){return this._sheet._ref(t,e,1,n-e)}selectionIncludesMergedCells(){return this._sheet.select().contains(this._sheet._mergedCells)}setSelectionValue(t){var e=this._sheet.selection();setTimeout((function(){e.value(t())}))}selectAll(){this._sheet.select(this._sheet._sheetRef)}select(t,e,n){t=this.refForMode(t,e),n&&(t=this._sheet.select().concat(t)),this._sheet.select(t)}refForMode(t,e){var n=this._sheet._grid;switch(e){case"range":t=n.normalize(t);break;case"row":t=n.rowRef(t.row);break;case"column":t=n.colRef(t.col);break;case"sheet":t=this._sheet._sheetRef}return t}startSelection(t,e,n,i,r){if("autofill"===e)this._sheet.startAutoFill();else if(i&&"range"===e){var o=new yn(this._sheet.activeCell().first(),t);this._sheet.select(o,!1,!1),this._sheet.startSelection(r)}else this._sheet.startSelection(r),this.select(t,e,n)}completeSelection(){this._sheet.completeSelection()}selectForContextMenu(t,e){var n=this._sheet;n._activeDrawing=null,n.select().contains(this.refForMode(t,e))||this.select(t,e)}selectDrawingForContextMenu(t){var e=this._sheet;e._activeDrawing=t,e.triggerChange({selection:!0})}modifySelection(t){var e,n=this.determineDirection(t),i=this._sheet,r=this._viewPortHeight,o=i._grid._rows,s=i._grid._columns,a=i.currentOriginalSelectionRange(),l=i.select().toRangeRef(),c=i.activeCell(),h=a.topLeft.clone(),u=a.bottomRight.clone(),d=new mn(u.row,h.col);switch(this.colEdge.boundary(l.topLeft.row,l.bottomRight.row),this.rowEdge.boundary(l.topLeft.col,l.bottomRight.col),n){case"expand-left":h.col=this.colEdge.prevLeft(h.col),e=h;break;case"shrink-right":h.col=this.colEdge.nextLeft(h.col),e=h;break;case"expand-right":u.col=this.colEdge.nextRight(u.col),e=u;break;case"shrink-left":u.col=this.colEdge.prevRight(u.col),e=u;break;case"expand-up":h.row=this.rowEdge.prevLeft(h.row),e=h;break;case"shrink-down":h.row=this.rowEdge.nextLeft(h.row),e=h;break;case"expand-down":u.row=this.rowEdge.nextRight(u.row),e=u;break;case"shrink-up":u.row=this.rowEdge.prevRight(u.row),e=u;break;case"expand-page-up":h.row=o.prevPage(h.row,r);break;case"shrink-page-up":u.row=o.prevPage(u.row,r);break;case"expand-page-down":u.row=o.nextPage(u.row,r);break;case"shrink-page-down":h.row=o.nextPage(h.row,r);break;case"first-col":h.col=s.firstVisible(),u.col=c.bottomRight.col,e=h;break;case"last-col":u.col=s.lastVisible(),h.col=c.topLeft.col,e=u;break;case"first-row":h.row=o.firstVisible(),u.row=c.bottomRight.row,e=h;break;case"last-row":u.row=o.lastVisible(),h.row=c.topLeft.row,e=u;break;case"last":u.row=o.lastVisible(),u.col=s.lastVisible(),h=c.topLeft,e=u;break;case"first":h.row=o.firstVisible(),h.col=s.firstVisible(),u=c.bottomRight,e=h;break;case"expand-word-right":u.col=s.nextUntil(u.col,sa(i,u,!0)),e=u;break;case"shrink-word-right":h.col=s.nextUntil(d.col,sa(i,d,!0)),e=h;break;case"expand-word-left":h.col=s.prevUntil(d.col,sa(i,d,!0)),e=h;break;case"shrink-word-left":u.col=s.prevUntil(u.col,sa(i,u,!0)),e=u;break;case"expand-word-up":h.row=o.prevUntil(h.row,sa(i,h,!1)),e=h;break;case"shrink-word-up":u.row=o.prevUntil(u.row,sa(i,u,!1)),e=u;break;case"expand-word-down":u.row=o.nextUntil(u.row,sa(i,u,!1)),e=u;break;case"shrink-word-down":h.row=o.nextUntil(h.row,sa(i,h,!1)),e=h}var p=new yn(h,u);this.union(p).intersects(c)?(e&&i.focus(e),this.updateCurrentSelectionRange(p)):this.modifySelection(n.replace("shrink","expand"))}moveActiveCell(t){var e=this._sheet,n=e.activeCell(),i=n.topLeft,r=n.bottomRight,o=e.originalActiveCell(),s=e._grid._rows,a=e._grid._columns,l=o.row,c=o.col;switch(t){case"left":c=a.prevVisible(i.col);break;case"up":l=s.prevVisible(i.row);break;case"right":c=a.nextVisible(r.col);break;case"down":l=s.nextVisible(r.row);break;case"first-col":c=a.firstVisible();break;case"last-col":c=a.lastVisible();break;case"first-row":l=s.firstVisible();break;case"last-row":l=s.lastVisible();break;case"last":l=s.lastVisible(),c=a.lastVisible();break;case"first":l=s.firstVisible(),c=a.firstVisible();break;case"next-page":l=s.nextPage(r.row,this._viewPortHeight);break;case"prev-page":l=s.prevPage(r.row,this._viewPortHeight);break;case"word-right":c=a.nextUntil(c,sa(e,r,!0));break;case"word-left":c=a.prevUntil(c,sa(e,r,!0));break;case"word-up":l=s.prevUntil(l,sa(e,r,!1));break;case"word-down":l=s.nextUntil(l,sa(e,r,!1))}e.select(new mn(l,c))}navigateInSelection(t){var e,n,i,r=this._sheet,o=r.activeCell().topLeft,s=r.originalActiveCell(),a=r._grid._rows,l=r._grid._columns,c=s.row,h=s.col,u=!1,d=!1,p=o.col,f=o.row;function g(t){e=t.topLeft,n=t.bottomRight}g(r.currentNavigationRange());for(var m=!1,y=!1;!m&&!y;){var v=new mn(c,h);switch(r.singleCellSelection()&&(u=e.eq(v)&&r._sheetRef.topLeft.eq(v),d=n.eq(v)&&r._sheetRef.bottomRight.eq(v),u||(u=l.firstVisible()===h&&a.firstVisible()===c),d||(d=l.lastVisible()===h&&a.lastVisible()===c)),t){case"next":d?y=!0:n.eq(v)?(g(r.nextNavigationRange()),c=e.row,h=e.col):((h=l.nextVisible(p))===p||h>n.col)&&(h=e.col,c=(i=a.nextVisible(c))===c||i>n.row?e.row:i);break;case"previous":u?(y=!0,this._sheet._workbook._view.element.querySelector(".k-spreadsheet-name-editor .k-input-inner").focus()):e.eq(v)?(g(r.previousNavigationRange()),c=n.row,h=n.col):((h=l.prevVisible(p))===p||h<e.col)&&(h=n.col,c=(i=a.prevVisible(c))===c||i<e.row?n.row:i);break;case"lower":n.eq(v)?(g(r.nextNavigationRange()),c=e.row,h=e.col):((c=a.nextVisible(f))===f||c>n.row)&&(c=e.row,h=(i=l.nextVisible(h))===h||i>n.col?e.col:i);break;case"upper":e.eq(v)?(g(r.previousNavigationRange()),c=n.row,h=n.col):((c=a.prevVisible(f))===f||c<e.row)&&(c=n.row,h=(i=l.prevVisible(h))===h||i<e.col?n.col:i);break;default:throw new Error("Unknown entry navigation: "+t)}m=!this.shouldSkip(c,h),p=h,f=c}m&&(r.singleCellSelection()?r.select(new mn(c,h)):r.activeCell(new mn(c,h)))}extendSelection(t,e){var n=this._sheet,i=n._grid;if("autofill"!==e){"range"===e?t=i.normalize(t):"row"===e?t=i.rowRef(t.row).bottomRight:"column"===e&&(t=i.colRef(t.col).bottomRight);var r=n.originalActiveCell().toRangeRef();this.updateCurrentSelectionRange(new yn(r.topLeft,t))}else this.resizeAutoFill(t)}shouldSkip(t,e){if(this._sheet.isHiddenRow(t)||this._sheet.isHiddenColumn(e))return!0;var n=new mn(t,e),i=!1;return this._sheet.forEachMergedCell((function(t){t.intersects(n)&&!t.collapse().eq(n)&&(i=!0)})),i}resizeAutoFill(t){var e,n,i=this._sheet,r=i.select(),o=i._autoFillOrigin,s=this.autoFillCalculator.autoFillDest(r,t),a=this.punch(r,s);if(!a){var l=i.range(s)._previewFillFrom(i.range(o));l&&(n=l.direction,e=l.hint)}i.updateAutoFill(s,a,e,n)}determineDirection(t){var e=this._sheet.currentSelectionRange(),n=this._sheet.activeCell(),i=n.topLeft.col===e.topLeft.col,r=n.bottomRight.col===e.bottomRight.col,o=n.topLeft.row===e.topLeft.row,s=n.bottomRight.row===e.bottomRight.row;switch(t){case"left":t=r?"expand-left":"shrink-left";break;case"right":t=i?"expand-right":"shrink-right";break;case"up":t=s?"expand-up":"shrink-up";break;case"down":t=o?"expand-down":"shrink-down";break;case"prev-page":t=s?"expand-page-up":"shrink-page-up";break;case"next-page":t=o?"expand-page-down":"shrink-page-down";break;case"word-left":t=r?"expand-word-left":"shrink-word-left";break;case"word-right":t=i?"expand-word-right":"shrink-word-right";break;case"word-up":t=s?"expand-word-up":"shrink-word-up";break;case"word-down":t=o?"expand-word-down":"shrink-word-down"}return t}updateCurrentSelectionRange(t){var e=this._sheet;e.select(e.originalSelect().replaceAt(e.selectionRangeIndex(),t),!1)}punch(t,e){var n;if(e.topLeft.eq(t.topLeft))if(e.bottomRight.row<t.bottomRight.row){var i=this.rowEdge.nextRight(e.bottomRight.row);n=new yn(new mn(i,t.topLeft.col),t.bottomRight)}else if(e.bottomRight.col<t.bottomRight.col){var r=this.colEdge.nextRight(e.bottomRight.col);n=new yn(new mn(t.topLeft.row,r),t.bottomRight)}return n}}function sa(t,e,n){var i=t.range(e).value();return function(r,o,s){if(s)return!0;var a=(n?t.range(e.row,r):t.range(r,e.col)).value();return null===i?null!==a&&r:o||null!==a?null===a:(i=null,!1)}}function aa(t){return null==t?null:Ci(t)}var la=function(t){return t};class ca{constructor(t){this.options=Object.assign({columns:[]},this.options,t),this.columns=this._normalizeColumns(this.options.columns),this._sheet(),this._dataSource(),this._header(),this._boundRowsCount=0,this.dataSource.fetch()}_sheet(){this.sheet=this.options.sheet,this._sheetChangeHandler=this._sheetChange.bind(this),this._sheetDeleteRowHandler=this._sheetDeleteRow.bind(this),this._sheetInsertRowHandler=this._sheetInsertRow.bind(this),this.sheet.bind("change",this._sheetChangeHandler).bind("afterDeleteRow",this._sheetDeleteRowHandler).bind("afterInsertRow",this._sheetInsertRowHandler)}_sheetInsertRow(t){void 0!==t.index&&this.dataSource.insert(Math.max(t.index-1,0),{})}_sheetDeleteRow(t){if(void 0!==t.index){var e=this.dataSource,n=e.view()[t.index-1];n&&e.remove(n)}}_header(){this.sheet.batch(function(){this.columns.forEach(function(t,e){this.sheet.range(0,e).value(t.title)}.bind(this))}.bind(this))}_sheetChange(t){if(!t.insertRow&&!t.deleteRow&&t.recalc&&t.ref&&t.isValue){var e,n,i,r,o,s=this.dataSource,a=s.view(),l=this.columns,c=[],h=this.sheet,u=function(t){for(var e,i=0,o=(t=t.toRangeRef()).topLeft.row;o<=t.bottomRight.row;o++){(e=a[o-1])||(e=s.insert(o-1,{}),a=s.view());for(var h=0,u=t.topLeft.col;u<=t.bottomRight.col&&u<l.length;u++){var d=c[r][i][h++];e.set(l[u].field,n[u](d))}i++}};for(s.reader.model&&(e=s.reader.model.fields),!l.length&&a.length&&(l=Object.keys(a[0].toJSON())),n=l.map((function(t){var n=t.field;return n&&e&&e[n]&&"date"===e[n].type?aa:la})),this._skipRebind=!0,(i=h._grid.normalize(t.ref))instanceof vn||(i=new vn([i])),(o=i.refs).forEach((function(t){c.push(h.range(t).values())})),r=0;r<o.length;r++)o[r].forEach(u);this._boundRowsCount=s.view().length,this._skipRebind=!1}}_normalizeColumns(t){return t.map((function(t){var e=t.field||t;return{field:e,title:t.title||e}}))}_dataSource(){var t=this.options.dataSource;this.dataSource={data:t}}_error(){this._progress(!1)}_requestStart(){this._progress(!0)}_progress(t){this.sheet.trigger("progress",{toggle:t})}_change(){if(!this._skipRebind&&!this.sheet.trigger("dataBinding")){var t=this.dataSource.view(),e=this.columns;!e.length&&t.length&&(this.columns=e=this._normalizeColumns(Object.keys(t[0].toJSON())),this._header());var n=e.map((function(t){return function(t,e){let n=t+e;return Mn[n]=Mn[n]||new Function("d","return "+On(t,e)),Mn[n]}(t.field)}));this.sheet.batch(function(){for(var e=Math.max(t.length,this._boundRowsCount,this.sheet._grid.rowCount-1),i=0;i<e;i++)for(var r=0;r<n.length;r++){var o=t[i]?n[r](t[i]):null;this.sheet.range(i+1,r).value(o)}}.bind(this)),this._boundRowsCount=t.length,this._progress(!1),this.sheet.trigger("dataBound")}}destroy(){this.dataSource.unbind("change",this._changeHandler).unbind("progress",this._progressHandler).unbind("error",this._errorHandler),this.sheet.unbind("change",this._sheetChangeHandler).unbind("deleteRow",this._sheetDeleteRowHandler).unbind("insertRow",this._sheetInsertRowHandler)}}const ha=function(){function t(){return(0,tn.p)(new Date)}return{dayOfWeek:rn,getDate:tn.p,isToday:function(e){return(0,tn.p)(e).getTime()===t().getTime()},addDays:on.f,today:t,firstDayOfMonth:an}}(),ua=/^\/Date\((.*?)\)\/$/;var da=function(){function t(t){return"string"==typeof t&&(t=t.replace(/[\r\n]+/g,"")),JSON.stringify(t)}function e(e){return function(n,i,r,o){return i+="",r&&(n="("+n+" + '').toString()"+(o?".toLocaleLowerCase('"+o+"')":".toLowerCase()"),i=o?i.toLocaleLowerCase(o):i.toLowerCase()),e(n,t(i),r)}}function n(e,n,i,r,o){if(null!=i){if("string"==typeof i){var s=ua.exec(i);s?i=new Date(+s[1]):r?(i=t(o?i.toLocaleLowerCase(o):i.toLowerCase()),n="(("+n+" || '')+'')"+(o?".toLocaleLowerCase('"+o+"')":".toLowerCase()")):i=t(i)}i.getTime&&(n="("+n+"&&"+n+".getTime?"+n+".getTime():"+n+")",i=i.getTime())}return n+" "+e+" "+i}function i(t){for(var e="/^",n=!1,i=0;i<t.length;++i){var r=t.charAt(i);if(n)e+="\\"+r;else{if("~"===r){n=!0;continue}"*"===r?e+=".*":"?"===r?e+=".":".+^$()[]{}|\\/\n\r\u2028\u2029 ".indexOf(r)>=0?e+="\\"+r:e+=r}n=!1}return e+"$/"}return{quote:function(e){return e&&e.getTime?"new Date("+e.getTime()+")":t(e)},eq:function(t,e,i,r){return n("==",t,e,i,r)},neq:function(t,e,i,r){return n("!=",t,e,i,r)},gt:function(t,e,i){return n(">",t,e,i)},gte:function(t,e,i){return n(">=",t,e,i)},lt:function(t,e,i){return n("<",t,e,i)},lte:function(t,e,i){return n("<=",t,e,i)},startswith:e((function(t,e){return t+".lastIndexOf("+e+", 0) == 0"})),doesnotstartwith:e((function(t,e){return t+".lastIndexOf("+e+", 0) == -1"})),endswith:e((function(t,e){return t+".indexOf("+e+", "+t+".length - "+(e?e.length-2:0)+") >= 0"})),doesnotendwith:e((function(t,e){return t+".indexOf("+e+", "+t+".length - "+(e?e.length-2:0)+") < 0"})),contains:e((function(t,e){return t+".indexOf("+e+") >= 0"})),doesnotcontain:e((function(t,e){return t+".indexOf("+e+") == -1"})),matches:e((function(t,e){return i(e=e.substring(1,e.length-1))+".test("+t+")"})),doesnotmatch:e((function(t,e){return"!"+i(e=e.substring(1,e.length-1))+".test("+t+")"})),isempty:function(t){return t+" === ''"},isnotempty:function(t){return t+" !== ''"},isnull:function(t){return"("+t+" == null)"},isnotnull:function(t){return"("+t+" != null)"},isnullorempty:function(t){return"("+t+" === null) || ("+t+" === '')"},isnotnullorempty:function(t){return"("+t+" !== null) && ("+t+" !== '')"}}}();const pa=function(t){var e,n,i,r,o,s,a=[],l=[],c=[],h=t.filters;for(e=0,n=h.length;e<n;e++)o=(i=h[e]).field,s=i.operator,i.filters?(i=(r=pa(i)).expression.replace(/__o\[(\d+)\]/g,(function(t,e){return e=+e,"__o["+(c.length+e)+"]"})).replace(/__f\[(\d+)\]/g,(function(t,e){return e=+e,"__f["+(l.length+e)+"]"})),c.push.apply(c,r.operators),l.push.apply(l,r.fields)):("function"==typeof o?(r="__f["+l.length+"](d)",l.push(o)):r=On(o),"function"==typeof s?(i="__o["+c.length+"]("+r+", "+da.quote(i.value)+")",c.push(s)):i=da[(s||"eq").toLowerCase()](r,i.value,void 0===i.ignoreCase||i.ignoreCase,t.accentFoldingFiltering)),a.push(i);return{expression:"("+a.join({and:" && ",or:" || "}[t.logic])+")",fields:l,operators:c}};let fa={};class ga{prepare(){}value(t){return t.value}matches(){throw new Error("The 'matches' method is not implemented.")}toJSON(){throw new Error("The 'toJSON' method is not implemented.")}}ga.create=function(t){var e=t.filter;if(!e)throw new Error("Filter type not specified.");var n=fa[e.charAt(0).toUpperCase()+e.substring(1)+"Filter"];if(!n)throw new Error("Filter type not recognized.");return new n(t)};class ma extends ga{constructor(t){super(t),this._values=[],this._dates=[],this._blanks=!1,void 0!==t.values&&(this._values=t.values),void 0!==t.blanks&&(this._blanks=t.blanks),void 0!==t.dates&&(this._dates=t.dates)}value(t){var e=t.value;this._dates.length>0&&t.format&&"number"==typeof e&&("date"===zo.type(e,t.format)&&(e=Ci(e)));return e}matches(t){return null==t?this._blanks:t instanceof Date?this._dates.some((function(e){return!(e.year!==t.getFullYear()||void 0!==e.month&&e.month!==t.getMonth()||void 0!==e.day&&e.day!==t.getDate()||void 0!==e.hours&&e.hours!==t.getHours()||void 0!==e.minutes&&e.minutes!==t.getMinutes()||void 0!==e.seconds&&e.seconds!==t.getSeconds())})):this._values.indexOf(t)>=0}toJSON(){return{filter:"value",blanks:this._blanks,values:this._values.slice(0)}}}class ya extends ga{constructor(t){if(super(t),this._logic="and",void 0!==t.logic&&(this._logic=t.logic),void 0===t.criteria)throw new Error("Must specify criteria.");this._criteria=t.criteria;var e=pa({logic:this._logic,filters:this._criteria,accentFoldingFiltering:$n().name}).expression;this._matches=new Function("d","return "+e)}matches(t){return null!==t&&this._matches(t)}value(t){var e=t.value,n=this._criteria[0].value,i=n instanceof Date?"date":typeof n,r=typeof e;return t.format&&(r=zo.type(e,t.format)),r!=i?"string"==i&&(t.format&&(e=zo.text(e,t.format)),e+=""):"date"==r&&(e=Ci(e)),e}toJSON(){return{filter:"custom",logic:this._logic,criteria:this._criteria}}}class va extends ga{constructor(t){super(t),this._type=t.type,this._value=t.value,this._values=[]}prepare(t){var e=t.map(this.value).sort().filter((function(t,e,n){return 0===e||t!==n[e-1]}));"topNumber"===this._type||"topPercent"==this._type?e.sort((function(t,e){return e-t})):e.sort((function(t,e){return t-e}));var n=this._value;"topPercent"!==this._type&&"bottomPercent"!==this._type||(n=e.length*n/100>>0),this._values=e.slice(0,n)}matches(t){return this._values.indexOf(t)>=0}toJSON(){return{filter:"top",type:this._type,value:this._value}}}class ba extends ga{constructor(t){if(super(t),this._type=t.type,this._predicate=this[t.type],"function"!=typeof this._predicate)throw new Error("DynamicFilter type '"+t.type+"' not recognized.")}value(t){var e=t.value;t.format&&("date"===zo.type(e,t.format)&&(e=Ci(e)));return e}prepare(t){for(var e=0,n=0,i=0;i<t.length;i++){var r=this.value(t[i]);"number"==typeof r&&(e+=r,n++)}this._average=n>0?e/n:0}matches(t){return this._predicate(t)}aboveAverage(t){return t instanceof Date&&(t=Ai(t)),"number"==typeof t&&t>this._average}belowAverage(t){return t instanceof Date&&(t=Ai(t)),"number"==typeof t&&t<this._average}tomorrow(t){if(t instanceof Date){var e=ha.addDays(ha.today(),1);return ha.getDate(t).getTime()===e.getTime()}return!1}today(t){return t instanceof Date&&ha.isToday(t)}yesterday(t){if(t instanceof Date){var e=ha.addDays(ha.today(),-1);return ha.getDate(t).getTime()===e.getTime()}return!1}nextWeek(t){return Sa(ha.addDays(ha.today(),7),t)}thisWeek(t){return Sa(ha.today(),t)}lastWeek(t){return Sa(ha.addDays(ha.today(),-7),t)}nextMonth(t){return _a(t,1)}thisMonth(t){return _a(t,0)}lastMonth(t){return _a(t,-1)}nextQuarter(t){if(t instanceof Date){var e=ha.today(),n=wa(t)-wa(e);return 1===n&&e.getFullYear()===t.getFullYear()||-3==n&&e.getFullYear()+1===t.getFullYear()}return!1}thisQuarter(t){if(t instanceof Date){var e=ha.today();return 0===wa(t)-wa(e)&&e.getFullYear()===t.getFullYear()}return!1}lastQuarter(t){if(t instanceof Date){var e=ha.today(),n=wa(e)-wa(t);return 1===n&&e.getFullYear()===t.getFullYear()||-3==n&&e.getFullYear()-1===t.getFullYear()}return!1}nextYear(t){return xa(t,1)}thisYear(t){return xa(t,0)}lastYear(t){return xa(t,-1)}yearToDate(t){if(t instanceof Date){var e=ha.today();return t.getFullYear()===e.getFullYear()&&t<=e}return!1}toJSON(){return{filter:"dynamic",type:this._type}}}fa={Filter:ga,ValueFilter:ma,CustomFilter:ya,TopFilter:va},[1,2,3,4].forEach((function(t){ba.prototype["quarter"+t]=function(e){return e instanceof Date&&wa(e)===t}}));function wa(t){var e=t.getMonth()+1;return e>=1&&e<=3?1:e>=4&&e<=6?2:e>=7&&e<=9?3:4}function xa(t,e){if(t instanceof Date){var n=ha.today();return n.setFullYear(n.getFullYear()+e),n.getFullYear()===t.getFullYear()}return!1}function _a(t,e){if(t instanceof Date){var n=ha.firstDayOfMonth(ha.today());return n.setMonth(n.getMonth()+e,1),n.getTime()===ha.firstDayOfMonth(t).getTime()}return!1}function Sa(t,e){if(e instanceof Date){var n=ha.dayOfWeek(ha.getDate(t),1),i=ha.dayOfWeek(ha.getDate(e),1);return n.getTime()===i.getTime()}return!1}var Ca;class ka{constructor(t){this._sheet=t,this.selection=bn.toRangeRef(),this.originalSelection=bn.toRangeRef(),this._activeCell=bn.toRangeRef(),this.originalActiveCell=bn}currentSelectionRange(){return this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()}currentOriginalNavigationRange(){return this.originalSelection.rangeAt(this.selectionRangeIndex).toRangeRef()}currentNavigationRange(){return this.singleCellSelection()?this._sheet._sheetRef:this.selection.rangeAt(this.selectionRangeIndex).toRangeRef()}nextNavigationRange(){return this.singleCellSelection()||(this.selectionRangeIndex=this.selection.nextRangeIndex(this.selectionRangeIndex)),this.currentNavigationRange()}previousNavigationRange(){return this.singleCellSelection()||(this.selectionRangeIndex=this.selection.previousRangeIndex(this.selectionRangeIndex)),this.currentNavigationRange()}activeCell(t){return t&&(this.originalActiveCell=t.first(),this._activeCell=this._sheet.unionWithMerged(t.toRangeRef()),this._sheet.focus(t),this._sheet.triggerChange({activeCell:!0,selection:!0})),this._activeCell}select(t,e,n,i){if(t){if(t.eq(this.originalSelection))return;if(this._sheet.triggerSelect(new Ms(t,this._sheet)),this.originalSelection=t,this.selection=e,!1!==n){if(t.isCell())this._sheet.forEachMergedCell(t,(function(e){t=e.topLeft})),this.activeCell(t);else{if(t=this.selection.lastRange(),i&&i._sheet===this._sheet&&i.panes[0]){var r,o,s,a,l,c,h=i.panes;for(r=0;r<h.length&&(!(o=h[r])._currentView||(s=o._currentView.rows.values,a=o._currentView.columns.values,l=new yn(new mn(s.start,a.start),new mn(s.end,a.end)),(c=t.intersect(l))===fn));r++);c&&c!==fn&&(t=c)}this.activeCell(t.first())}this.selectionRangeIndex=this.selection.size()-1}else this._sheet.triggerChange({selection:!0})}return this.selection}singleCellSelection(){return this._activeCell.eq(this.selection)}}class Aa extends Hs{constructor(){super(),this.events=["changing","commandRequest","afterInsertRow","afterDeleteRow","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","dataBinding","dataBound","progress"],this._reinit.apply(this,arguments)}activeCellCustomEditor(){}_reinit(t,e,n,i,r,o,s){s=s||{},this._defaultCellStyle={background:s.background,color:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,italic:s.italic,bold:s.bold,underline:s.underline,wrap:s.wrap,verticalAlign:s.verticalAlign,textAlign:s.textAlign},this._rows=new Ys(t,n),this._columns=new Ys(e,i),this._filteredRows=new fs(0,t-1,!1),this._mergedCells=[],this._frozenRows=0,this._frozenColumns=0,this._suspendChanges=!1,this._filter=null,this._showGridLines=!0,this._gridLinesColor=null,this._grid=new Qs(this._rows,this._columns,t,e,r,o),this._sheetRef=this._grid.normalize(wn),this._properties=new ws(t,e,this._defaultCellStyle),this._sorter=new ea(this._grid,this._properties.sortable()),this._viewSelection=new ka(this),this._editSelection=new ka(this),this._formulaSelections=[],this._drawings=[]}resize(t,e){t=Math.max(t,1),e=Math.max(e,1);var n=this._rows._count,i=this._columns._count;t<n&&this.range(t,0,n-t,i).clear(),e<i&&this.range(0,e,n,i-e).clear(),this._rows._resize(t),this._columns._resize(e),this._grid._resize(t,e),this._properties._resize(t,e),this._sheetRef=this._grid.normalize(wn),t>n&&(this.range(n,0,t-n,e).clear(),this._filteredRows.value(n,t-1,!1)),e>i&&this.range(0,i,t,e-i).clear(),this.triggerChange({layout:!0})}_resizeAddRow(t){this.resize(this._rows._count+(t||1),this._columns._count)}_resizeAddColumn(t){this.resize(this._rows._count,this._columns._count+(t||1))}_resizeDeleteRow(t){this._resizeAddRow(-(t||1))}_resizeDeleteColumn(t){this._resizeAddColumn(-(t||1))}_resizeForJSON(t){for(var e=t.length,n=0,i=0;i<t.length;++i){var r=t[i];if(null!=r.index&&(e=Math.max(e,r.index+1)),r.cells){n=Math.max(n,r.cells.length);for(var o=0;o<r.cells.length;++o){var s=r.cells[o];null!=s.index&&(n=Math.max(n,s.index+1))}}}this.resize(Math.max(e,this._rows._count),Math.max(n,this._columns._count))}_selectionState(){return this._inEdit?this._editSelection:this._viewSelection}navigator(){return this._navigator||(this._navigator=new oa(this)),this._navigator}axisManager(){return this._axisManager||(this._axisManager=new na(this)),this._axisManager}_name(t){return t?(this._sheetName=t,this):this._sheetName}name(){return this._name()}_state(t){return t?(this._sheetState=t,this):this._sheetState||"visible"}state(){return this._state()}_property(t,e,n){return void 0===e?t():(t(e),this.triggerChange(n))}_field(t,e,n){return void 0===e?this[t]:(this[t]=e,this.triggerChange(n))}suspendChanges(t){return void 0===t?this._suspendChanges:(this._suspendChanges=t,this)}triggerChange(t){return this._suspendChanges?t&&t.isValue&&(this._valueChanged=!0):this.trigger("change",t),this}triggerSelect(t){this.trigger("select",{range:t})}setDataSource(t,e){this.dataSourceBinder&&this.dataSourceBinder.destroy(),this.dataSourceBinder=new ca({dataSource:t,sheet:this,columns:e}),this.dataSource=this.dataSourceBinder.dataSource}hideColumn(t){if(!this.trigger("hideColumn",{index:t}))return this._property(this._columns.hide.bind(this._columns),t,{layout:!0})}unhideColumn(t){if(!this.trigger("unhideColumn",{index:t}))return this._property(this._columns.unhide.bind(this._columns),t,{layout:!0})}isHiddenColumn(t){return this._grid._columns.hidden(t)}_copyRange(t,e){var n=this._grid,i=n.rowCount,r=n.normalize(t.topLeft),o=n.normalize(t.bottomRight),s=r.col*i+r.row,a=o.col*i+o.row,l=e.col*i+e.row;this._properties.copy(s,a,l)}_saveModifiedFormulas(t,e){var n=Ca;Ca=t;var i=e();return Ca=n,i}_restoreModifiedFormulas(t){var e=this._workbook;t.forEach((function(t){var n,i=e.sheetByName(t.sheet);t instanceof Qn.runtime.Formula&&(n=i._grid.cellRefIndex(t),i._properties.set("formula",n,n,t)),t instanceof As.Validation&&(n=i._grid.cellRefIndex(t),i._properties.set("validation",n,n,t))}))}_adjustReferences(t,e,n,i){if(this._mergedCells=i.reduce((function(i,r){return(r=r.adjust(null,null,null,null,"row"===t,e,n))instanceof yn&&i.push(r),i}),[]),this._workbook){var r=this._name();this._workbook._sheets.forEach((function(i){i._forFormulas((function(i){var o=i.adjust(r,t,e,n);o&&Ca&&Ca.push(o)})),i._forValidations((function(i){var o=i.adjust(r,t,e,n);o&&Ca&&Ca.push(o)}))})),this._workbook.adjustNames(r,"row"===t,e,n)}var o=this.select();(o=o.adjust(null,null,null,null,"row"===t,e,n))!==fn&&this.select(o),("col"===t?this._columns:this._rows).adjust(e,n),"row"===t&&(n<0?this._filteredRows.copy(e-n,this._rows._count-1,e):(this._filteredRows.copy(e,this._rows._count,e+n),this._filteredRows.value(e,e+n-1,!1))),this._drawings.forEach((function(i){i.topLeftCell&&(i.topLeftCell=i.topLeftCell.adjust(null,null,null,null,"row"===t,e,n))}))}_forFormulas(t){var e=this._properties.get("formula").values(),n=e.length;e.forEach((function(e,i){t.call(this,e.value,i,n)}),this)}_forValidations(t){this._properties.get("validation").values().forEach((function(e){t.call(this,e.value)}),this)}insertRow(t,e){if(!this.trigger("insertRow",{index:t}))return this.batch((function(){this._resizeAddRow();var e=this._grid,n=e.columnCount,i=e.rowCount;if(t+1!==i){var r=this.frozenRows();t<r&&this.frozenRows(r+1);for(var o=this._mergedCells.slice(),s=0;s<n;s++){var a=new yn(new mn(t,s),new mn(t,s)),l=e.normalize(a.topLeft),c=e.normalize(a.bottomRight),h=new yn(new mn(l.row,l.col),new mn(i-2,c.col));this._copyRange(h,new mn(l.row+1,l.col)),new Ms(a,this).clear({clearAll:!0,keepBorders:!0})}this._adjustReferences("row",t,1,o)}}),{recalc:!0,layout:!0,insertRow:{index:t},ref:new yn(new mn(t,0),new mn(1/0,1/0))}),e||this.trigger("afterInsertRow",{index:t}),this}isEnabledRow(t){var e=new yn(new mn(t,0),new mn(t,this._grid.columnCount));return new Ms(e,this).enable()}deleteRow(t,e){return this.isEnabledRow(t)?this.trigger("deleteRow",{index:t})?void 0:(this.batch((function(){var e=this._grid,n=e.columnCount,i=this.frozenRows();t<i&&this.frozenRows(i-1);for(var r=this._mergedCells.slice(),o=0;o<n;o++){var s=new yn(new mn(t,o),new mn(t,o));new Ms(s,this).clear({clearAll:!0,keepBorders:!0});var a=e.normalize(s.topLeft),l=e.normalize(s.bottomRight),c=new yn(new mn(a.row+1,a.col),new mn(1/0,l.col));this._copyRange(c,a);var h=e.normalize(c.bottomRight);new Ms(new yn(h,h),this).clear()}this._adjustReferences("row",t,-1,r),this._resizeDeleteRow()}),{recalc:!0,layout:!0,deleteRow:{index:t},ref:new yn(new mn(t,0),new mn(1/0,1/0))}),e||this.trigger("afterDeleteRow",{index:t}),this):this}insertColumn(t){if(!this.trigger("insertColumn",{index:t}))return this.batch((function(){this._resizeAddColumn();var e=this._grid,n=e.columnCount;if(t+1!==n){var i=this.frozenColumns();t<i&&this.frozenColumns(i+1);for(var r=this._mergedCells.slice(),o=n;o>=t;o--){var s=new yn(new mn(0,o),new mn(1/0,o));if(new Ms(s,this).clear({clearAll:!0,keepBorders:!0}),o===t)break;var a=e.normalize(s.topLeft),l=e.normalize(s.bottomRight),c=new yn(new mn(a.row,a.col-1),new mn(l.row,l.col-1));this._copyRange(c,a)}this._adjustReferences("col",t,1,r)}}),{recalc:!0,layout:!0,insertColumn:{index:t},ref:new yn(new mn(0,t),new mn(1/0,1/0))}),this}isEnabledColumn(t){var e=new yn(new mn(0,t),new mn(1/0,t));return new Ms(e,this).enable()}deleteColumn(t){return this.isEnabledColumn(t)?this.trigger("deleteColumn",{index:t})?void 0:(this.batch((function(){var e=this._grid,n=e.columnCount,i=this.frozenColumns();t<i&&this.frozenColumns(i-1);for(var r=this._mergedCells.slice(),o=t;o<n;o++){var s=new yn(new mn(0,o),new mn(1/0,o));if(new Ms(s,this).clear({clearAll:!0,keepBorders:!0}),o===n-1)break;var a=e.normalize(s.topLeft),l=e.normalize(s.bottomRight),c=new yn(new mn(a.row,a.col+1),new mn(l.row,l.col+1));this._copyRange(c,a)}this._adjustReferences("col",t,-1,r),this._resizeDeleteColumn()}),{recalc:!0,layout:!0,deleteColumn:{index:t},ref:new yn(new mn(0,t),new mn(1/0,1/0))}),this):this}_filterRow(t){this._rows.hide(t),this._filteredRows.value(t,t,!0),this.triggerChange({layout:!0})}hideRow(t){if(!this.trigger("hideRow",{index:t}))return this._property(this._rows.hide.bind(this._rows),t,{layout:!0})}unhideRow(t){if(!this.trigger("unhideRow",{index:t}))return this._property(this._rows.unhide.bind(this._rows),t,{layout:!0})}isHiddenRow(t){return this._grid._rows.hidden(t)}isFilteredRow(t){return this._filteredRows.value(t)}columnWidth(t,e){return this._property(this._columns.value.bind(this._columns,t,t),e,{layout:!0})}rowHeight(t,e){return this._property(this._rows.value.bind(this._rows,t,t),e,{layout:!0})}frozenRows(t){return this._field("_frozenRows",t,{layout:!0})}frozenColumns(t){return this._field("_frozenColumns",t,{layout:!0})}showGridLines(t){return this._field("_showGridLines",t,{layout:!0})}gridLinesColor(t){return this._field("_gridLinesColor",t,{layout:!0})}_ref(t,e,n,i){var r=null;return t instanceof pn?t:t instanceof Ms?t._ref.toRangeRef():("string"==typeof t?r=Qn.parseReference(t):(n||(n=1),i||(i=1),r=new yn(new mn(t,e),new mn(t+n-1,e+i-1))),r)}range(t,e,n,i){return new Ms(this._ref(t,e,n,i),this)}_getMergedCells(t){var e=this._grid,n={},i={},r=!1;return this.forEachMergedCell(t,(function(o){var s=o.topLeft;e.forEach(o,(function(e){s.eq(e)?(n[e.print()]=o,r=!0):t.contains(e)&&(i[e.print()]=s,r=!0)}))})),{primary:n,secondary:i,hasMerged:r}}forEachMergedCell(t,e){var n=!1;void 0===e&&(e=t,n=!0),this._mergedCells.forEach((function(i){(n||i.intersects(t))&&e(i)}))}forEachFilterHeader(t,e){var n=!1;if(void 0===e&&(e=t,n=!0),this._filter){var i=[];this._filter.ref.forEachColumn((function(e){(n||e.intersects(t))&&i.push(e.topLeft)})),this._mergedCells.forEach((function(t){i=i.map((function(e){return t.intersects(e)?t:e}))})),i.reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]).forEach(e)}}forEach(t,e){var n=this;function i(t){t instanceof yn||(t=t.toRangeRef());var i,r,o=n._grid.normalize(t.topLeft),s=n._grid.normalize(t.bottomRight);function a(t){e(r++,i,t)}for(i=o.col;i<=s.col;i++){r=o.row;var l=n._grid.index(r,i),c=n._grid.index(s.row,i);n._properties.forEach(l,c,a)}}t instanceof yn||(t=n._ref(t)),t instanceof vn?t.forEach(i):i(t)}startResizing(t){this._initialPosition=t,this._resizeInProgress=!0}startAutoFill(){this._autoFillInProgress=!0;var t=this.select();this._autoFillOrigin=t,this._autoFillDest=t,this.triggerChange({selection:!0})}updateAutoFill(t,e,n,i){this._autoFillDest=t,this._autoFillPunch=e,this._autoFillHint=n,this._autoFillDirection=i,this.triggerChange({selection:!0})}autoFillRef(){return this._autoFillDest}autoFillPunch(){return this._autoFillPunch}autoFillInProgress(){return this._autoFillInProgress}resizingInProgress(){return this._resizeInProgress}draggingInProgress(){return this._draggingInProgress}completeResizing(){if(this._resizeInProgress){this._resizeInProgress=!1;var t=this.resizeHintPosition();if(this._initialPosition&&t){var e=this.resizeHandlePosition();e.col!==-1/0?this.trigger("commandRequest",{command:"ColumnWidthCommand",options:{target:e.col,value:this.columnWidth(e.col)-(this._initialPosition.x-t.x)}}):this.trigger("commandRequest",{command:"RowHeightCommand",options:{target:e.row,value:this.rowHeight(e.row)-(this._initialPosition.y-t.y)}})}else this.trigger("change",{resize:!0})}}_visualRange(t){for(var e=this._mergedCells,n=e.length;--n>=0;)if(e[n].intersects(t))return this.range(e[n]);return this.range(t)}_renderComment(t){var e=null;if(t){var n=this._visualRange(t);e=n.comment(),t=n._ref.toRangeRef().topLeft}e?this._commentRef&&t.eq(this._commentRef)||(this._commentRef=t,this.trigger("change",{comment:!0})):this._commentRef&&(this._commentRef=null,this.trigger("change",{comment:!0}))}resizeHandlePosition(){return this._resizeHandlePosition}resizeHintPosition(t){return void 0!==t&&(this._resizeHintPosition=t,this.trigger("change",{resize:!0})),this._resizeHintPosition}removeResizeHandle(){this._resizeHandlePosition&&(this._resizeHintPosition=void 0,this._resizeHandlePosition=void 0,this._initialPosition=void 0,this.trigger("change",{resize:!0}))}positionResizeHandle(t){this._resizeHandlePosition=t,this.trigger("change",{resize:!0})}startDragging(t){this._draggingInProgress=t}completeDragging(){var t=this._draggingInProgress;if(t){this._draggingInProgress=null;var e=t.drawing;if(e.eq(t.copy))return;if(e.topLeftCell){var n=this.drawingBoundingBox(e),i=this._rows.indexVisible(n.top),r=this._columns.indexVisible(n.left),o=new mn(i,r),s=this.refBoundingBox(o);e.offsetX=n.left-s.left,e.offsetY=n.top-s.top,e.topLeftCell=o,this.triggerChange({dragging:!0})}this.trigger("commandRequest",{command:"DrawingUpdateCommand",options:{sheet:this,drawing:e,previous:t.copy}})}}startSelection(t){this.frozenRows()||this.frozenColumns()?this._currentView=null:t&&t._sheet===this&&(this._currentView=t),this._selectionInProgress=!0}completeSelection(){if(this._selectionInProgress&&(this._selectionInProgress=!1,this._resizeHintPosition=void 0,this.trigger("change",{selection:!0})),this._autoFillInProgress){this._autoFillInProgress=!1;var t=this._autoFillDest,e=this._autoFillOrigin;this._autoFillPunch?this.trigger("commandRequest",{command:"ClearContentCommand",options:{operatingRange:this.range(this._autoFillPunch)}}):t.eq(e)?this.triggerChange({selection:!0}):this.trigger("commandRequest",{command:"AutoFillCommand",options:{operatingRange:this.range(t),origin:this.range(e)}}),this._autoFillDest=null,this._autoFillPunch=null,this._autoFillOrigin=null,this.select(t)}}selectionInProgress(){return this._selectionInProgress}select(t,e){var n,i=this._selectionState();return t&&(t=this._ref(t),t=this._grid.normalize(t),n=this._grid.isAxis(t)?t:this.unionWithMerged(t)),i.select(t,n,e,this._currentView)}originalSelect(){return this._selectionState().originalSelection}currentSelectionRange(){return this._selectionState().currentSelectionRange()}currentOriginalSelectionRange(){return this._selectionState().currentOriginalNavigationRange()}currentNavigationRange(){return this._selectionState().currentNavigationRange()}nextNavigationRange(){return this._selectionState().nextNavigationRange()}previousNavigationRange(){return this._selectionState().previousNavigationRange()}selectionRangeIndex(){return this._selectionState().selectionRangeIndex}activeCell(t){return this._selectionState().activeCell(t)}originalActiveCell(){return this._selectionState().originalActiveCell}singleCellSelection(){return this._selectionState().singleCellSelection()}unionWithMerged(t){var e=this._mergedCells;return t.map((function(t){return t.toRangeRef().union(e)}))}trim(t){var e=[],n=this._grid;return this._properties.forEachProperty((function(i){e.push(n.trim(t,i.list))})),this.unionWithMerged(t.topLeft.toRangeRef().union(e))}focus(t){if(!t){var e=this._focus;return this._focus=null,e}this._focus=t.toRangeRef()}activeCellSelection(){return new Ms(this._grid.normalize(this.activeCell()),this)}selection(){return new Ms(this._grid.normalize(this._selectionState().selection),this)}selectedHeaders(){var t=this.select(),e={},n={},i=!1,r=!1,o=this._grid.rowCount-1,s=this._grid.columnCount-1;return t.forEach((function(t){var a,l="partial",c="partial",h=(t=t.toRangeRef()).bottomRight,u=t.topLeft,d=u.col<=0&&h.col>=s,p=u.row<=0&&h.row>=o;if(p&&(r=!0,c="full"),d&&(i=!0,l="full"),!p)for(a=u.row;a<=h.row;a++)"full"!==e[a]&&(e[a]=l);if(!d)for(a=u.col;a<=h.col;a++)"full"!==n[a]&&(n[a]=c)})),{rows:e,cols:n,allRows:r,allCols:i,all:r&&i}}isInEditMode(t){if(void 0===t)return this._inEdit;this._inEdit=t,t&&(this._editSelection.selection=this._viewSelection.selection.clone(),this._editSelection.originalSelection=this._viewSelection.originalSelection.clone(),this._editSelection._activeCell=this._viewSelection._activeCell.clone(),this._editSelection.originalActiveCell=this._viewSelection.originalActiveCell.clone())}_setFormulaSelections(t){this._formulaSelections=(t||[]).slice(),this.triggerChange({selection:!0})}_viewActiveCell(){return this._viewSelection._activeCell.toRangeRef()}toJSON(){var t={},e=this._rows.toJSON("height",t),n=this._columns.toJSON("width",{}),i=this._viewSelection,o=[],s=this._defaultCellStyle||{};this.forEach(wn,(function(n,i,a){if(function(t){Object.keys(s).forEach((function(e){t[e]===s[e]&&delete t[e]}))}(a),0!==Object.keys(a).length){a.link&&o.push({ref:pn.display(null,n,i),target:a.link});var l=t[n];void 0===l&&(l=e.length,e.push({index:n}),t[n]=l),n=e[l],a.index=i,void 0===n.cells&&(n.cells=[]),a.formula&&(a.formula.arrayFormulaRange?a.formula={src:a.formula.toString(),ref:a.formula.arrayFormulaRange.toString()}:a.formula=a.formula.toString()),a.validation&&(a.validation=a.validation.toJSON()),a.color&&(a.color=(0,r.Ay)(a.color).toCss()),a.background&&(a.background=(0,r.Ay)(a.background).toCss()),a.borderTop&&a.borderTop.color&&(a.borderTop.color=(0,r.Ay)(a.borderTop.color).toCss()),a.borderBottom&&a.borderBottom.color&&(a.borderBottom.color=(0,r.Ay)(a.borderBottom.color).toCss()),a.borderRight&&a.borderRight.color&&(a.borderRight.color=(0,r.Ay)(a.borderRight.color).toCss()),a.borderLeft&&a.borderLeft.color&&(a.borderLeft.color=(0,r.Ay)(a.borderLeft.color).toCss()),n.cells.push(a)}}));var a={name:this._name(),state:this._state(),rows:e,columns:n,selection:i.selection.toString(),activeCell:i.activeCell().toString(),frozenRows:this.frozenRows(),frozenColumns:this.frozenColumns(),showGridLines:this.showGridLines(),gridLinesColor:this.gridLinesColor(),mergedCells:this._mergedCells.map((function(t){return t.toString()})),hyperlinks:o,defaultCellStyle:s,drawings:this._drawings.map((function(t){return t.toJSON()}))};return this._sort&&(a.sort={ref:this._sort.ref.toString(),columns:this._sort.columns.map((function(t){return{index:t.index,ascending:t.ascending}}))}),this._filter&&(a.filter={ref:this._filter.ref.toString(),columns:this._filter.columns.map((function(t){var e=t.filter.toJSON();return e.index=t.index,e}))}),a}fromJSON(t){this.batch((function(){if(void 0!==t.name&&this._name(t.name),void 0!==t.frozenColumns&&this.frozenColumns(t.frozenColumns),void 0!==t.frozenRows&&this.frozenRows(t.frozenRows),void 0!==t.columns&&this._columns.fromJSON("width",t.columns),void 0!==t.rows){this._resizeForJSON(t.rows),this._rows.fromJSON("height",t.rows);for(var e=0;e<t.rows.length;e++){var n=t.rows[e],i=n.index;if(void 0===i&&(i=e),n.cells)for(var r=0;r<n.cells.length;r++){var o=n.cells[r],s=o.index;if(void 0===s&&(s=r),o.formula){var a="string"!=typeof o.formula,l=a?o.formula.src:o.formula,c=this._compileFormula(i,s,l);a&&c.setArrayFormulaRange(Qn.parseReference(o.formula.ref)),o.formula=c}o.validation&&(o.validation=this._compileValidation(i,s,o.validation)),this._properties.fromJSON(this._grid.index(i,s),o)}}}if(t.drawings&&(this._drawings=t.drawings.map(Ea.fromJSON)),t.selection&&(this._viewSelection.selection=this._viewSelection.originalSelection=this._ref(t.selection)),t.activeCell){var h=this._ref(t.activeCell);this._viewSelection._activeCell=h.toRangeRef(),this._viewSelection.originalActiveCell=h.first()}if(t.mergedCells&&t.mergedCells.forEach((function(t){this.range(t).merge()}),this),t.filter){var u=t.filter.ref,d=void 0===t.filter.columns?[]:t.filter.columns;u&&(this._filter={ref:this._ref(u),columns:d.map((function(t){return{index:t.index,filter:ga.create(t)}}))},this._refreshFilter())}void 0!==t.showGridLines&&(this._showGridLines=t.showGridLines),this._gridLinesColor=t.gridLinesColor,t.sort&&this._sortBy(this._ref(t.sort.ref),t.sort.columns.slice(0))})),this._rows._refresh(),this._columns._refresh()}formula(t){return this._properties.get("formula",this._grid.cellRefIndex(t))}validation(t){return this._properties.get("validation",this._grid.cellRefIndex(t))}resetFormulas(){this._forFormulas((function(t){t.reset()}))}resetValidations(){this._forValidations((function(t){t.reset()}))}recalc(t,e){var n=this._properties.get("formula").values(),i=n.length,r=0,o=0;if(!i&&e)return e();function s(){r--,o!==i||r||e()}for(;o<i;)r++,n[o++].value.exec(t,e?s:null)}revalidate(t){var e=this;this._forValidations((function(n){var i=new mn(n.row,n.col),r=new yn(i,i);n.exec(t,e._get(r,"value"),e._get(r,"format"))}))}_value(t,e,n){var i=this._grid.index(t,e);if(void 0===n)return this._properties.get("value",i);this._properties.set("value",i,i,n)}_validation(t,e){var n=this._grid.index(t,e);return this._properties.get("validation",n)}_compileValidation(t,e,n){return n instanceof As.Validation?n.clone(this._name(),t,e):(null!=n.from&&(n.from=(n.from+"").replace(/^=/,"")),null!=n.to&&(n.to=(n.to+"").replace(/^=/,"")),As.compile(this._name(),t,e,n))}_compileFormula(t,e,n){return n=n.replace(/^=/,""),n=Qn.parseFormula(this._name(),t,e,n),Qn.compile(n)}_copyValuesInRange(t,e,n,i){var r,o,s;for(r=t.col;r<=e.col;r++){o=this._grid.index(t.row,r),s=this._grid.index(e.row,r);for(var a=o,l=t.row;a<=s;++a,++l)n=n.clone(this._name(),l,r),this._properties.set(i,a,a,n)}return n}_set(t,e,n){var i,r,o,s=this._grid.normalize(t.topLeft),a=this._grid.normalize(t.bottomRight);if("number"==typeof n&&(n=Qn.runtime.limitPrecision(n)),n&&"formula"===e)"string"==typeof n&&(n=this._compileFormula(s.row,s.col,n)),n=this._copyValuesInRange(s,a,n,"formula");else if(n&&"validation"===e)n=this._compileValidation(s.row,s.col,n),n=this._copyValuesInRange(s,a,n,"validation");else for(i=s.col;i<=a.col;i++)r=this._grid.index(s.row,i),o=this._grid.index(a.row,i),this._properties.set(e,r,o,n),"formula"===e&&this._properties.set("value",r,o,null)}_get(t,e){var n=this._grid.normalize(t.topLeft),i=this._grid.index(n.row,n.col);return this._properties.get(e,i)}batch(t,e){var n=this.suspendChanges();return this.suspendChanges(!0),this._valueChanged=!1,t.call(this),e||(e={recalc:!0}),this._valueChanged&&(e.isValue=!0),this.suspendChanges(n).triggerChange(e)}_sortBy(t,e){var n=null;e.forEach((function(e){n=this._sorter.sortBy(t,e.index,this._properties.get("value"),e.ascending,n)}),this),this._sort={ref:t,columns:e},this._refreshFilter(),this.forEach(t,function(t,e,n){var i=n.formula;if(i){var r=t-i.row;if(0!==r){var o=r>0?i.row:i.row+r;i.adjust(this.name(),"row",o,r)}}}.bind(this)),this.triggerChange({recalc:!0})}_refreshFilter(){this._filter&&this._filterBy(this._filter.ref,this._filter.columns)}_filterBy(t,e){this.batch((function(){for(var n=t.topLeft.row;n<=t.bottomRight.row;n++)this.isFilteredRow(n)&&(this._filteredRows.value(n,n,!1),this._rows.unhide(n));e.forEach((function(e){var n=t.resize({top:1}).toColumn(e.index),i=[];if(n!==fn){this.forEach(n,(function(t,e,n){n.row=t,i.push(n)})),e.filter.prepare(i);for(var r=0;r<i.length;r++){var o=i[r],s=e.filter.value(o);!1===e.filter.matches(s)&&this._filterRow(o.row)}}}),this),this._filter={ref:t,columns:e}}),{recalc:!0,layout:!0,filter:!0})}filterColumn(t){var e=this.filter().ref;return t.toRangeRef().topLeft.col-e.topLeft.col}filter(){return this._filter}clearFilter(t){this._clearFilter(t instanceof Array?t:[t])}_clearFilter(t){this._filter&&this.batch((function(){this._filter.columns=this._filter.columns.filter((function(e){return t.indexOf(e.index)<0})),this._refreshFilter()}),{recalc:!0,layout:!0,filter:!0})}getAxisState(){return{rows:this._rows.getState(),columns:this._columns.getState()}}setAxisState(t){this._rows.setState(t.rows),this._columns.setState(t.columns),this.triggerChange({layout:!0})}getState(){return{rows:this._rows.getState(),columns:this._columns.getState(),mergedCells:this._mergedCells.map((function(t){return t.clone()})),properties:this._properties.getState()}}setState(t){this._rows.setState(t.rows),this._columns.setState(t.columns),this._mergedCells=t.mergedCells,this._properties.setState(t.properties),this.triggerChange(Sn)}_merge(t){var e,n=this._mergedCells,i=this;return this.batch((function(){e=t.map((function(t){if(t instanceof mn)return t;var e=t.toRangeRef().union(n,(function(t){n.splice(n.indexOf(t),1)})),r=new Ms(e,i),o=r._get("formula"),s=r.value(),a=r.format(),l=r.background();r.value(null),r.format(null),r.background(null);var c=new Ms(e.collapse(),i);return o?c._set("formula",o):c.value(s),c.format(a),c.background(l),n.push(e),e}));var r=i._viewSelection;r.selection=i.unionWithMerged(r.originalSelection),r._activeCell=i.unionWithMerged(r.originalActiveCell)}),{activeCell:!0,selection:!0}),e}_useCultureDecimals(){return this._workbook&&this._workbook.options.useCultureDecimals}withCultureDecimals(t){var e=".";return this._useCultureDecimals()&&(e=$n().numbers.symbols.decimal),Qn.withDecimalSeparator(e,t)}drawingBoundingBox(t){var e=t.offsetX,n=t.offsetY;return t.topLeftCell&&(e+=this._columns.sum(0,t.topLeftCell.col-1),n+=this._rows.sum(0,t.topLeftCell.row-1)),new Zs(e,n,t.width,t.height)}refBoundingBox(t){return this._grid.rectangle(t.toRangeRef())}addDrawing(t,e){return t instanceof Ea||(t=new Ea(t)),this._drawings.push(t),e&&(this._activeDrawing=t),this.triggerChange({layout:!0}),t}removeDrawing(t){var e=this._drawings.indexOf(t);e>=0&&(this._drawings.splice(e,1),this.triggerChange({layout:!0}))}usesImage(t){for(var e=this._drawings.length;--e>=0;)if(this._drawings[e].image===t)return!0;return!1}isMerged(t){for(var e=this._mergedCells,n=e.length;--n>=0;)if(e[n].eq(t))return!0;return!1}}class Ea{constructor(t){this.reset(t)}toJSON(){return{topLeftCell:this.topLeftCell.toString(),offsetX:this.offsetX,offsetY:this.offsetY,width:this.width,height:this.height,image:this.image,opacity:this.opacity}}clone(){return new Ea(this)}reset(t){var e=t.topLeftCell;"string"==typeof e&&(e=Qn.parseReference(e)),this.topLeftCell=e,this.offsetX=t.offsetX||0,this.offsetY=t.offsetY||0,this.width=t.width,this.height=t.height,this.image=t.image,this.opacity=null!=t.opacity?t.opacity:1}eq(t){return(!this.topLeftCell&&!t.topLeftCell||this.topLeftCell&&t.topLeftCell&&this.topLeftCell.eq(t.topLeftCell))&&this.offsetX===t.offsetX&&this.offsetY===t.offsetY&&this.width===t.width&&this.height===t.height&&this.image===t.image&&this.opacity===t.opacity}}Ea.fromJSON=function(t){return new Ea(t)};let Ta={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],executive:[521.86,756],folio:[612,936],legal:[612,1008],letter:[612,792],tabloid:[792,1224]};function Ma(t){return t*(72/25.4)}function Oa(t){return Ma(10*t)}function Ia(t){return 72*t}function Da(t,e){if("number"==typeof t)return t;if("string"==typeof t){let e;if(e=/^\s*([0-9.]+)\s*(mm|cm|in|pt)\s*$/.exec(t),e){let t=parseFloat(e[1]);if(!isNaN(t))return"pt"===e[2]?t:{mm:Ma,cm:Oa,in:Ia}[e[2]](t)}}if(null!=e)return e;throw new Error("Can't parse unit: "+t)}let Fa,Pa=.8;function Ra(t,e,n,i,r){let o=0,s=[],a=e,l=0;return e&&n&&(n*=e),t.forEach((function(t,c){null!=i&&c<i&&(l+=t),e&&o+t>a&&(a-o<n&&(o=e*Math.ceil(o/e)+l,l>0&&r.push(o-l)),a+=e*Math.ceil(t/e)),s.push(o),o+=t})),s.push(o),s}function La(t,e,n){let i=t._grid;e=i.normalize(e);let r=i.rectangle(e),o=[];t._drawings.forEach((function(e){let n=t.drawingBoundingBox(e);n.intersects(r)&&o.push({drawing:e,box:n.offset(-r.left,-r.top)})}));let s=[],a=[],l=[],c=t._getMergedCells(e),h=-1,u=-1;t.forEach(e,(function(i,r,d){let p=i-e.topLeft.row,f=r-e.topLeft.col,g=t.rowHeight(i),m=t.columnWidth(r);n.forScreen||(d.drawings=o.filter((function(e){let n=e.drawing.topLeftCell;if(n&&n.row==i&&n.col==r)return h=Math.max(h,t._rows.index(e.box.bottom)),u=Math.max(u,t._columns.index(e.box.right)),!0}))),f||a.push(g),p||l.push(m);let y=new mn(i,r).print();if(c.secondary[y])return;d.row=p,d.col=f;let v=c.primary[y];if(v?(delete c.primary[y],d.merged=!0,d.rowspan=v.height(),d.colspan=v.width(),n.forScreen&&(d.width=t._columns.sum(v.topLeft.col,v.bottomRight.col),d.height=t._rows.sum(v.topLeft.row,v.bottomRight.row))):(d.rowspan=1,d.colspan=1),!t._grid._columns.sum(r,r+d.colspan-1)||!t._grid._rows.sum(i,i+d.rowspan-1))return;let b=n.forScreen||function(t){return null!=t.value||t.merged||null!=t.background||null!=t.borderRight||null!=t.borderBottom||null!=t.dBorders||null!=t.validation&&!t.validation.value||t.drawings&&t.drawings.length}(d);(n.emptyCells||b)&&(b?(h=Math.max(h,p+d.rowspan-1),u=Math.max(u,f+d.colspan-1)):d.empty=!0,s.push(d))})),n.forScreen||(a=a.slice(0,h+1),l=l.slice(0,u+1));let d=n.pageWidth,p=n.pageHeight,f=n.scale||1;if(n.fitWidth){let t=l.reduce(Ba,0);t>d&&(f=d/t)}d=Math.ceil(d/f),p=Math.ceil(p/f);let g=[],m=Ra(a,p||0,n.maxEmpty,n.headerRows,g),y=Ra(l,d||0,n.maxEmpty),v=0,b=0,w=[];return s=s.filter((function(t){return(!t.empty||!(t.row>h||t.col>u))&&(n.headerRows&&t.row<n.headerRows&&w.push(t),t.left=y[t.col],t.top=m[t.row],t.merged?n.forScreen?(t.right=t.left+t.width,t.bottom=t.top+t.height):(t.right=ja(y,t.col+t.colspan),t.bottom=ja(m,t.row+t.rowspan),t.width=t.right-t.left,t.height=t.bottom-t.top):(t.width=l[t.col],t.height=a[t.row],t.bottom=t.top+t.height,t.right=t.left+t.width),n.forScreen||t.drawings.forEach((function(e){let n=e.box;n.left=t.left+e.drawing.offsetX,n.top=t.top+e.drawing.offsetY,n.right=n.left+n.width,n.bottom=n.top+n.height})),v=Math.max(v,t.right),b=Math.max(b,t.bottom),!0)})),Object.keys(c.primary).forEach((function(n){let i=c.primary[n];t.forEach(i.topLeft.toRangeRef(),(function(n,r,o){let a=n-e.topLeft.row,l=r-e.topLeft.col;o.merged=!0,o.colspan=i.width(),o.rowspan=i.height(),o.top=a<0?-t._rows.sum(n,n-a-1):m[a],o.left=l<0?-t._columns.sum(r,r-l-1):y[l],o.height=t._rows.sum(i.topLeft.row,i.bottomRight.row),o.width=t._columns.sum(i.topLeft.col,i.bottomRight.col),o.height>0&&o.width>0&&(o.right=o.left+o.width,o.bottom=o.top+o.height,o.row=a,o.col=l,s.push(o))}))})),n.headerRows&&(g.forEach((function(t){w.forEach((function(e){(e=function(t,e){e||(e={});if(Object.assign)return Object.assign(e,t);return Object.keys(t).reduce((function(e,n){return e[n]=t[n],e}),e)}(e)).top+=t,e.bottom=e.top+e.height,s.push(e)})),m.push(t)})),m.sort($a)),{width:v,height:b,cells:s.sort(za),scale:f,xCoords:y,yCoords:m,drawings:o}}function Na(t,e){return t.size===e.size&&t.color===e.color}function Ba(t,e){return t+e}function ja(t,e){return e<t.length?t[e]:t[t.length-1]}function za(t,e){return t.top<e.top?-1:t.top==e.top?t.left<e.left?-1:t.left==e.left?0:1:1}function $a(t,e){return t<e?-1:t>e?1:0}function Ha(t,e,n,i){let r=Math.ceil(e.width/i.pageWidth),c=Math.ceil(e.height/i.pageHeight),h=Math.ceil(i.pageWidth/e.scale),u=Math.ceil(i.pageHeight/e.scale);for(let t=0;t<c;++t)for(let e=0;e<r;++e)d(t,e);function d(r,c){let d=c*h,p=d+h,f=r*u,m=f+u,y=0,v=0;function b(t){return!(t.right<=d||t.left>=p||t.bottom<=f||t.top>=m)&&(y=Math.max(t.bottom,y),v=Math.max(t.right,v),!0)}let w=e.cells.filter(b),x=e.drawings.filter((function(t){return b(t.box)}));if(y=Math.min(y,m),v=Math.min(v,p),w.length||x.length){let r=new o.A;n.append(r);let c=new o.A;r.append(c),c.clip(s.w.fromRect(new a.A([d-1,f-1],[v+1,y+1])));let h=l.A.scale(e.scale,e.scale).multiplyCopy(l.A.translate(-d,-f));if((i.hCenter||i.vCenter)&&(h=h.multiplyCopy(l.A.translate(i.hCenter?(p-v)/2:0,i.vCenter?(m-y)/2:0))),c.transform(h),i.guidelines){let t=null;e.xCoords.forEach((function(e){(e=Math.min(e,v))!==t&&e>=d&&e<=p&&(t=e,c.append((new s.w).moveTo(e,f).lineTo(e,y).close().stroke(i.guideColor,Pa)))})),t=null,e.yCoords.forEach((function(e){(e=Math.min(e,y))!==t&&e>=f&&e<=m&&(t=e,c.append((new s.w).moveTo(d,e).lineTo(v,e).close().stroke(i.guideColor,Pa)))}))}let u=qa();w.forEach((function(e){!function(t,e,n){let i=new o.A;e.append(i);let r=new a.A([t.left,t.top],[t.width,t.height]);if(t.background||t.merged){let e=r;n.guidelines&&(e=r.clone(),e.origin.x+=Pa/2+.1,e.origin.y+=Pa/2+.1,e.size.width-=Pa+.2,e.size.height-=Pa+.2),i.append(new g(e).fill(t.background||"#fff").stroke(null))}t.dBorders&&(2&t.dBorders.type&&i.append((new s.w).moveTo(t.left,t.bottom).lineTo(t.right,t.top).stroke(t.dBorders.color,t.dBorders.size)),1&t.dBorders.type&&i.append((new s.w).moveTo(t.left,t.top).lineTo(t.right,t.bottom).stroke(t.dBorders.color,t.dBorders.size)));let c=t.value;if(null!=c){let e="number"==typeof c?"number":null,n=new o.A;n.clip(s.w.fromRect(r)),i.append(n);let a,h=t.format;if(h||"number"!=e||c==Math.floor(c)||(h="0.##############"),h?(a=zo.textAndColor(c,h),c=a.text,a.type&&(e=a.type)):c+="",!t.textAlign)switch(e){case"number":case"date":case"percent":case"currency":t.textAlign="right";break;case"boolean":t.textAlign="center"}!function(t,e,n,i){Fa||(Fa=document.createElement("div"),Fa.style.position="fixed",Fa.style.left="0px",Fa.style.top="0px",Fa.style.visibility="hidden",Fa.style.overflow="hidden",Fa.style.boxSizing="border-box",Fa.style.lineHeight="normal",document.body.appendChild(Fa));Fa.firstChild&&Fa.removeChild(Fa.firstChild);Fa.style.padding="2px 4px",Fa.style.color=e,Fa.style.font=function(t){let e=[];t.italic&&e.push("italic");t.bold&&e.push("bold");return e.push((t.fontSize||12)+"px"),e.push(t.fontFamily||"Arial"),e.join(" ")}(n),Fa.style.width=n.width+"px",Fa.style.textAlign=n.textAlign||"left",Fa.style.textDecoration=n.underline?"underline":"none",Ua(n,Fa.style),n.wrap?(Fa.style.whiteSpace="pre-wrap",Fa.style.overflowWrap=Fa.style.wordWrap="break-word"):(Fa.style.whiteSpace="pre",Fa.style.overflowWrap=Fa.style.wordWrap="normal");Fa.appendChild(document.createTextNode(t));let r=0;switch(n.verticalAlign){case"center":r=n.height-Fa.offsetHeight>>1;break;case void 0:case null:case"bottom":r=n.height-Fa.offsetHeight}r<0&&(r=0);let o=ae.drawText(Fa);o.transform(l.A.translate(n.left,n.top+r)),i.append(o)}(c,a&&a.color||t.color||"#000",t,n)}}(e,c,i),u.add(e,t)}));let b=new o.A;u.vert.forEach((function(t){t.forEach((function(t){t.rendered||(t.rendered=!0,b.append((new s.w).moveTo(t.x,t.top).lineTo(t.x,t.bottom).close().stroke(t.color,t.size)))}))})),u.horiz.forEach((function(t){t.forEach((function(t){t.rendered||(t.rendered=!0,b.append((new s.w).moveTo(t.left,t.y).lineTo(t.right,t.y).close().stroke(t.color,t.size)))}))})),c.append(b),x.forEach((function(e){let n=e.drawing,i=n.image;if(null!=i){let r=e.box,o=t._workbook.imageUrl(i);c.append(new n.Image(o,new a.A([r.left,r.top],[r.width,r.height])).opacity(n.opacity))}}))}}}function Ua(t,e){if(t.indent){let n=1.4*t.indent;switch(e.textAlign){case null:case"left":e.paddingLeft=n+"ch";break;case"right":e.paddingRight=n+"ch";break;case"center":e.paddingLeft=n/2+"ch",e.paddingRight=n/2+"ch"}}}function Va(t,e,n,i){null==n&&null==i&&(i=e,n={},e=wn),null==i&&(i=n,e instanceof Range||e instanceof pn||"string"==typeof e?n={}:(n=e,e=wn)),n=Object.assign({},{paperSize:"A4",landscape:!0,margin:"1cm",guidelines:!0,guideColor:"#aaa",emptyCells:!0,fitWidth:!1,center:!1,headerRows:null,maxEmpty:.2,scale:1},n);let r=new o.A,s=function(t){if("function"!=typeof t){let e=t;t=function(t,n){return t in e?e[t]:n}}let e=t("paperSize",Ta.a4);if(!e)return{};if("string"==typeof e&&(e=Ta[e.toLowerCase()],null==e))throw new Error("Unknown paper size");e[0]=Da(e[0]),e[1]=Da(e[1]),t("landscape",!1)&&(e=[Math.max(e[0],e[1]),Math.min(e[0],e[1])]);let n=t("margin");return n&&("string"==typeof n||"number"==typeof n?(n=Da(n,0),n={left:n,top:n,right:n,bottom:n}):n={left:Da(n.left,0),top:Da(n.top,0),right:Da(n.right,0),bottom:Da(n.bottom,0)},t("addMargin")&&(e[0]+=n.left+n.right,e[1]+=n.top+n.bottom)),{paperSize:e,margin:n}}(n);r.options.set("pdf",{author:n.author,creator:n.creator,date:n.date,keywords:n.keywords,margin:s.margin,multiPage:!0,paperSize:s.paperSize,subject:n.subject,title:n.title,autoPrint:n.autoPrint});let a=s.paperSize[0],l=s.paperSize[1];s.margin&&(a-=s.margin.left+s.margin.right+1,l-=s.margin.top+s.margin.bottom+1),n.pageWidth=a,n.pageHeight=l;let c=La(t,t._ref(e),n);Ha(t,c,r,n),i(r)}function Wa(){}function qa(){let t=new Wa,e=new Wa;function n(t,n,i,r,o,s){let a=e[n]||(e[n]=new Wa),l=t>0&&a[t-1];l&&Na(l,i)?(a[t]=l,l.bottom=s):a[t]={size:i.size,color:i.color||"#000",x:r,top:o,bottom:s}}function i(e,n,i,r,o,s){let a=t[e]||(t[e]=new Wa),l=n>0&&a[n-1];l&&Na(l,i)?(a[n]=l,l.right=s):a[n]={size:i.size,color:i.color||"#000",y:r,left:o,right:s}}return{add:function(t,e){if(e){let n=e._properties,i=e._grid;t.borderLeft=n.get("vBorders",i.index(t.row,t.col)),t.borderRight=n.get("vBorders",i.index(t.row,t.col+t.colspan)),t.borderTop=n.get("hBorders",i.index(t.row,t.col)),t.borderBottom=n.get("hBorders",i.index(t.row+t.rowspan,t.col))}t.borderLeft&&n(t.row,t.col,t.borderLeft,t.left,t.top,t.bottom),t.borderRight&&n(t.row,t.col+t.colspan,t.borderRight,t.right,t.top,t.bottom),t.borderTop&&i(t.row,t.col,t.borderTop,t.top,t.left,t.right),t.borderBottom&&i(t.row+t.rowspan,t.col,t.borderBottom,t.bottom,t.left,t.right)},horiz:t,vert:e}}Aa.prototype.draw=function(t,e,n){let i=this;i._workbook?i.recalc(i._workbook._context,(function(){Va(i,t,e,n)})):Va(i,t,e,n)},Wa.prototype={forEach:function(t){Object.keys(this).forEach((function(e){t(this[e],e,this)}),this)}};const Ka={Borders:qa,doLayout:La,applyIndent:Ua},Xa=".",Ga={view:"k-spreadsheet-view",fixedContainer:"k-spreadsheet-fixed-container",editContainer:"k-spreadsheet-edit-container",scroller:"k-spreadsheet-scroller",viewSize:"k-spreadsheet-view-size",clipboard:"k-spreadsheet-clipboard",cellEditor:"k-spreadsheet-cell-editor",barEditor:"k-spreadsheet-editor",topCorner:"k-spreadsheet-top-corner",filterHeadersWrapper:"k-filter-wrapper",filterRange:"k-filter-range",filterButton:"k-spreadsheet-filter",filterButtonSelected:"k-selected",horizontalResize:"k-horizontal-resize",verticalResize:"k-vertical-resize",icon:"k-icon",iconFilterDefault:"k-i-arrow-60-down",sheetsBar:"k-spreadsheet-sheets-bar",sheetsBarActive:"k-spreadsheet-sheets-bar-active",sheetsBarInactive:"k-spreadsheet-sheets-bar-inactive",cellContextMenu:"k-spreadsheet-cell-context-menu",rowHeaderContextMenu:"k-spreadsheet-row-header-context-menu",colHeaderContextMenu:"k-spreadsheet-col-header-context-menu",drawingContextMenu:"k-spreadsheet-drawing-context-menu"},Ya={cell:"k-spreadsheet-cell",vaxis:"k-spreadsheet-vaxis",haxis:"k-spreadsheet-haxis",vborder:"k-spreadsheet-vborder",hborder:"k-spreadsheet-hborder",rowHeader:"k-spreadsheet-row-header",columnHeader:"k-spreadsheet-column-header",pane:"k-spreadsheet-pane",data:"k-spreadsheet-data",mergedCell:"k-spreadsheet-merged-cell",mergedCellsWrapper:"k-merged-cells-wrapper",activeCell:"k-spreadsheet-active-cell",selection:"k-spreadsheet-selection",selectionWrapper:"k-selection-wrapper",autoFillWrapper:"k-auto-fill-wrapper",single:"k-single",top:"k-top",right:"k-right",bottom:"k-bottom",left:"k-left",resizeHandle:"k-resize-handle",columnResizeHandle:"k-column-resize-handle",rowResizeHandle:"k-row-resize-handle",resizeHint:"k-resize-hint",resizeHintHandle:"k-resize-hint-handle",resizeHintMarker:"k-resize-hint-marker",resizeHintVertical:"k-resize-hint-vertical",selectionHighlight:"k-spreadsheet-selection-highlight",series:["k-series-a","k-series-b","k-series-c","k-series-d","k-series-e","k-series-f"]};function Ja(t){return(t.size||1)+"px solid "+(t.color||"#000")}function Za(t){return/:\/\//.test(t)||(t="http://"+t),t}class Qa{constructor(t,e){this._sheet=t,this._grid=e}refresh(t,e){this._grid.refresh(t,e)}isVisible(t,e,n){return this._grid.view(t,e).ref.intersects(n)}render(t){let e=t.scroller,n=e.scrollLeft,i=e.scrollTop;i<0&&(i=0),n<0&&(n=0);let r=Qa.classNames,o=this._sheet,s=this._grid,a=s.view(n,i);this._currentView=a,this._currentRect=this._rectangle(a.ref),this._selectedHeaders=o.selectedHeaders();let l=[];if(l.push(this.renderData(t)),o._activeDrawing||l.push(this.renderSelection(e)),l.push(this.renderAutoFill()),l.push(this.renderEditorSelection()),l.push(this.renderFilterHeaders()),s.hasRowHeader){let t=Zn.element("div",{className:r.rowHeader,style:{width:s.headerWidth+"px",top:a.rowOffset+"px"}});l.push(t),o.forEach(a.ref.leftColumn(),function(e){if(!o.isHiddenRow(e)){let n=e+1,i=o.rowHeight(e);t.children.push(Zn.element("div",{className:this.headerClassName(e,"row"),style:{width:s.headerWidth+"px",height:i+"px"}},[Zn.element("div",{className:"k-vertical-align-center"},[Zn.text(n+"")])]))}}.bind(this))}if(s.hasColumnHeader){let t=Zn.element("div",{className:r.columnHeader,style:{top:"0px",left:a.columnOffset+"px",width:this._currentRect.width+"px",height:s.headerHeight+"px"}});l.push(t);let e=0;o.forEach(a.ref.topRow(),function(n,i){if(!o.isHiddenColumn(i)){let n=pn.display(null,1/0,i),r=o.columnWidth(i);t.children.push(Zn.element("div",{className:this.headerClassName(i,"col"),style:{position:"absolute",left:e+"px",width:r+"px",height:s.headerHeight+"px"}},[Zn.element("div",{className:"k-vertical-align-center"},[Zn.text(n+"")])])),e+=r}}.bind(this))}o.resizeHandlePosition()&&(s.hasColumnHeader||s.hasRowHeader)&&(o.resizeHintPosition()||this.renderResizeHandle(l));let c=[r.pane];return s.hasColumnHeader&&c.push(r.top),s.hasRowHeader&&c.push(r.left),Zn.element("div",{style:s.style,className:c.join(" ")},l)}headerClassName(t,e){let n,i,r=this._selectedHeaders;"row"===e?(n=r.rows[t],i=r.allRows):(n=r.cols[t],i=r.allCols);let o=n||(r.all?"full":i?"partial":"none");return o&&(o="k-selection-"+o),o}renderData(t){let e,n=this._sheet,i=this._currentView,o=Zn.element("div",{className:Qa.classNames.data,style:{position:"relative",left:i.columnOffset+"px",top:i.rowOffset+"px"}}),s=this._currentRect,a=Ka.doLayout(n,i.ref,{forScreen:!0}),l=this._grid,c=n._showGridLines;c&&(e=null,a.xCoords.forEach((function(t){t!==e&&(e=t,o.children.push(Zn.element("div",{className:Ya.vaxis,style:{left:t+"px",height:s.height+"px",borderColor:n.gridLinesColor()}})))})),e=null,a.yCoords.forEach((function(t){t!==e&&(e=t,o.children.push(Zn.element("div",{className:Ya.haxis,style:{top:t+"px",width:s.width+"px",borderColor:n.gridLinesColor()}})))})));let h=Ka.Borders(),u=n.activeCell().toRangeRef(),d=u.topLeft;return a.cells.forEach((function(e){let s=null,a=e.row+i.ref.topLeft.row,p=e.col+i.ref.topLeft.col;if(n._activeDrawing){let t=n._activeDrawing.topLeftCell;t&&t.row===a&&t.col===p&&(s="k-spreadsheet-drawing-anchor-cell")}else a===d.row&&p===d.col&&(s=[Qa.classNames.activeCell].concat(this._activeFormulaColor(),this._directionClasses(u)),n.singleCellSelection()&&s.push(Qa.classNames.single),s=s.join(" "));if(h.add(e),function(t,e,n,i){function o(t){let n=e.link;if(n||"object"==typeof e.value&&(n=e.value.link),n){let i={textDecoration:"none"};return e.color&&(i.color=e.color),e.underline&&(i.textDecoration="underline"),Zn.element("a",{href:Za(n),style:i,target:"_blank"},t?[t]:[])}return t}let s=null!=e.value||null!=e.validation&&!e.validation.value||e.background||e.merged||e.comment||e.dBorders;if(!n&&!s)return;let a={background:[]},l=e.background;if(l){let t=l;i&&(t=(0,r.Ay)(t).toHSV(),t.v*=.9,t=t.toCssRgba()),t=Ja({color:t}),a.outline=t}e.dBorders&&(2&e.dBorders.type&&a.background.push("linear-gradient(to top left, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) calc(50% - "+e.dBorders.size+"px), "+e.dBorders.color+" 50%, rgba(0, 0, 0, 0) calc(50% + "+e.dBorders.size+"px), rgba(0, 0, 0, 0) 100%)"),1&e.dBorders.type&&a.background.push("linear-gradient(to top right, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0) calc(50% - "+e.dBorders.size+"px), "+e.dBorders.color+" 50%, rgba(0, 0, 0, 0) calc(50% + "+e.dBorders.size+"px), rgba(0, 0, 0, 0) 100%)")),l&&a.background.push(l),e.color&&(a.color=e.color),e.fontFamily&&(a.fontFamily=e.fontFamily),e.underline&&(a.textDecoration="underline"),e.italic&&(a.fontStyle="italic"),e.textAlign&&(a.textAlign=e.textAlign),e.bold&&(a.fontWeight="bold"),e.fontSize&&(a.fontSize=e.fontSize+"px"),!0===e.wrap?(a.whiteSpace="pre-wrap",a.overflowWrap="break-word",a.wordWrap="break-word"):(a.whiteSpace="pre",a.overflowWrap="normal",a.wordWrap="normal"),a.left=e.left+1+"px",a.top=e.top+1+"px",a.width=e.width-1+"px",a.height=e.height-1+"px";let c=e.value,h=typeof c,u=e.format;if(u||"number"!==h||c===Math.floor(c)||(u="0.##############"),u&&null!=c?(c=zo.format(c,u),c.__dataType&&(h=c.__dataType)):null!=c&&(c=e.html?Zn.html(c):Zn.text(c)),!a.textAlign)switch(h){case"number":case"date":case"percent":case"currency":a.textAlign="right";break;case"boolean":a.textAlign="center"}Ka.applyIndent(e,a);let d=[Ya.cell];n&&d.push(n),!1===e.enable&&d.push("k-disabled"),e.merged&&d.push("k-spreadsheet-merged-cell"),e.comment&&d.push("k-spreadsheet-has-comment");let p=e.verticalAlign||"bottom";c=p&&c?Zn.element("div",{className:"k-vertical-align-"+p},[o(c)]):o(c),a.background.length?a.background=a.background.join(","):delete a.background;let f=c?[c]:[],g={style:a},m=e.validation;m&&!m.value&&(f.push(Zn.element("span",{className:"k-dirty"})),d.push("k-dirty-cell"),g.title=m.message),g.className=d.join(" ");let y=Zn.element("div",g,f);t.push(y)}(o.children,e,s,c),e.comment&&n._commentRef&&a===n._commentRef.row&&p===n._commentRef.col){let n=4,r=e.right+l.left+i.columnOffset+n,o={top:e.top+l.top+i.rowOffset+"px"};r+200>t.contentWidth?o.right=t.contentWidth-l.left-e.left-i.columnOffset+n+"px":o.left=r+"px";let s=Zn.element("div",{className:"k-tooltip k-spreadsheet-cell-comment",style:o},[Zn.text(e.comment)]);t.toplevelElements.push(s)}}),this),h.vert.forEach((function(t){t.forEach((function(t){if(!t.rendered){t.rendered=!0;let e={left:t.x+"px",top:t.top+"px",height:t.bottom-t.top+1+"px",borderWidth:t.size+"px",borderColor:t.color};1!==t.size&&(e.transform="translateX(-"+(t.size-1)/2+"px)"),o.children.push(Zn.element("div",{className:Ya.vborder,style:e}))}}))})),h.horiz.forEach((function(t){t.forEach((function(t){if(!t.rendered){t.rendered=!0;let e={top:t.y+"px",left:t.left+"px",width:t.right-t.left+"px",borderWidth:t.size+"px",borderColor:t.color};1!==t.size&&(e.transform="translateY(-"+(t.size-1)/2+"px)"),o.children.push(Zn.element("div",{className:Ya.hborder,style:e}))}}))})),this.renderDrawings(a,o.children),o}renderDrawings(t,e){let n=this._sheet,i=n._workbook;t.drawings.forEach((function(t){let r=t.drawing,o=t.box.toDiv("k-spreadsheet-drawing");r.image&&o.children.push(Zn.element("div",{className:"k-spreadsheet-drawing-image",style:{backgroundImage:"url('"+i.imageUrl(r.image)+"')",opacity:r.opacity}})),r===n._activeDrawing&&(o.attr.className+=" k-spreadsheet-active-drawing",function(t){["N","NE","E","SE","S","SW","W","NW"].forEach((function(e){t.push(Zn.element("div",{className:"k-spreadsheet-drawing-handle "+e,"data-direction":e}))}))}(o.children)),e.push(o)}))}renderResizeHandle(t){let e,n=this._sheet.resizeHandlePosition(),i=this._rectangle(n),r=[Qa.classNames.resizeHandle];if(n.col!==-1/0){if(this._grid.rows._start>0)return;e={height:this._grid.headerHeight+"px",width:"7px",left:i.right-3.5+"px",top:"0px"},r.push(Ga.horizontalResize)}else{if(this._grid.columns._start>0)return;e={height:"7px",width:this._grid.headerWidth+"px",top:i.bottom-3.5+"px",left:"0px"},r.push(Ga.verticalResize)}t.push(Zn.element("div",{className:r.join(" "),style:e}))}filterIconRect(t){return new Zs(t.right-16-3,t.top+3,16,16)}renderFilterHeaders(){let t=this._sheet,e=[],n=Ga,i=t.filter();function r(t){return Zn.element("span",{className:n.icon+" "+t})}return i&&this._addDiv(e,i.ref,n.filterRange),t.forEachFilterHeader(this._currentView.ref,function(t){let o=this._rectangle(t),s=this.filterIconRect(o),a=this._sheet.filterColumn(t),l=function(t,e,n){let o={left:e.left+"px",top:e.top+"px"},s=i&&i.columns.some((function(t){return t.index===n})),a=t.filterButton;return s&&(a+=" "+t.filterButtonSelected),Zn.element("span",{className:a,style:o},[r(t.iconFilterDefault)])}(n,s,a);e.push(l)}.bind(this)),Zn.element("div",{className:n.filterHeadersWrapper},e)}renderEditorSelection(){let t=Qa.classNames,e=this._sheet,n=[];return e._formulaSelections.forEach(function(e){let i=e.ref;i!==fn&&this._addDiv(n,i,t.selectionHighlight+" "+e.colorClass)}.bind(this)),Zn.element("div",{className:t.selectionWrapper},n)}renderSelection(t){let e=Qa.classNames,n=[],i=[e.selection],r=this._sheet,o=r.activeCell().toRangeRef(),s=r.select();return i=i.concat(this._activeFormulaColor()),1===s.size()&&i.push("k-single-selection"),this._sheet.autoFillPunch()&&i.push("k-dim-auto-fill-handle"),s.forEach(function(t){t!==fn&&this._addDiv(n,t,i.join(" "))}.bind(this)),this._renderCustomEditorButton(n,o,t),Zn.element("div",{className:e.selectionWrapper},n)}renderAutoFill(){let t=[];if(this._sheet.autoFillInProgress()){let e=this._sheet.autoFillRef(),n=this._sheet.autoFillPunch(),i=this._sheet._autoFillDirection;if(this._addDiv(t,e,"k-auto-fill"),n)this._addDiv(t,n,"k-auto-fill-punch");else if(void 0!==i){let n,r;switch(i){case 0:case 1:n=e.bottomRight,r="k-auto-fill-br-hint";break;case 2:n=new mn(e.topLeft.row,e.bottomRight.col),r="k-auto-fill-tr-hint";break;case 3:n=new mn(e.bottomRight.row,e.topLeft.col),r="k-auto-fill-bl-hint"}let o=this._addDiv(t,n,r);if(o){let t=Zn.element("span",{className:"k-tooltip"},[Zn.text(this._sheet._autoFillHint)]);o.children.push(t)}}}return Zn.element("div",{className:Qa.classNames.autoFillWrapper},t)}_addDiv(t,e,n){let i;return this._currentView.ref.intersects(e)&&(i=this._rectangle(e).resize(1,1).toDiv(n),t.push(i)),i}_renderCustomEditorButton(t,e,n){let i=this,r=i._sheet,o=i._currentView,s=i._grid.columns._axis._count,a=r.activeCellCustomEditor();if(a&&o.ref.intersects(e)){let o=i._rectangle(e);r.forEach(e.collapse(),(function(e,r,l){l.left=o.left,l.top=o.top,l.width=o.width,l.height=o.height;let c="k-button k-button-md k-rounded-md k-button-solid k-button-solid-base k-spreadsheet-editor-button",h=r===s-1||i._buttonOutOfVisiblePane(e,r,n);h&&(c+=" k-spreadsheet-last-column"),i._editorInLastColumn=h;let u=Zn.element("div",{className:c,style:{left:l.left+(h?0:l.width)+"px",top:l.top+"px",height:l.height+"px"}});a.icon&&u.children.push(Zn.element("span",{className:"k-icon "+a.icon})),t.push(u)}))}}_activeFormulaColor(){let t,e=[];return this._sheet.isInEditMode()&&(t=this._sheet._formulaSelections.filter((function(t){return t.active&&"ref"===t.type}))[0],t&&e.push(t.colorClass)),e}_directionClasses(t){let e=[],n=Qa.classNames,i=this._currentView.ref;return t.move(0,-1).intersects(i)||e.push(n.left),t.move(-1,0).intersects(i)||e.push(n.top),t.move(0,1).intersects(i)||e.push(n.right),t.move(1,0).intersects(i)||e.push(n.bottom),e}_rectangle(t){return this._grid.boundingRectangle(t.toRangeRef()).offset(-this._currentView.mergedCellLeft,-this._currentView.mergedCellTop)}_buttonOutOfVisiblePane(t,e,n){let i=this._grid,r=this._sheet,o=r.range(t,e)._ref,s=i.scrollBoundaries(o),a=i.columns.frozen?0:n.scrollLeft;if(s.right+20>a||e+1===r.frozenColumns())return!0}}Qa.classNames=Ya;let tl=["font-family","font-size","font-stretch","font-style","font-weight","letter-spacing","text-transform","line-height"],el={27:"esc",37:"left",39:"right",35:"end",36:"home",32:"spacebar"},nl=/(^_|[^a-z0-9]$)/i;class il extends Us{constructor(t,e){const n=Object.assign({},{name:"FormulaInput",autoScale:!1,filterOperator:"startswith",scalePadding:30,minLength:1,formulaBarWidth:null},e);super(t,n),this.events=["keyup","focus"],this.input=e.input,t&&(this.bind(this.events,this.options),t.classList.add(il.classNames.wrapper),n&&n.formulaBarWidth,this._highlightedRefs=[],this._formulaSource(),this._formulaList(),this._tooltip(),this._sync=this._sync.bind(this),this.scale=this.scale.bind(this),this._keydown=this._keydown.bind(this),this._keyup=this._keyup.bind(this),this._blur=this._blur.bind(this),this._input=this._input.bind(this),this._focus=this._focus.bind(this),this._paste=this._paste.bind(this),this.options.autoScale&&t.addEventListener("input",this.scale),t.addEventListener("keydown",this._keydown),t.addEventListener("keyup",this._keyup),t.addEventListener("blur",this._blur),t.addEventListener("input",this._input),t.addEventListener("click",this._input),t.addEventListener("focus",this._focus),t.addEventListener("paste",this._paste))}enable(t){if(void 0===t)return"true"===this.element.getAttribute("contenteditable");t?this.element.setAttribute("contenteditable",t):this.element.removeAttribute("contenteditable"),this.element.classList.toggle("k-disabled",!t)}getPos(){let t=this.element,e=window.getSelection(),n=r(e.focusNode,e.focusOffset),i=r(e.anchorNode,e.anchorOffset);if(null!=n&&null!=i){if(n>i){let t=n;n=i,i=t}return{begin:n,end:i,collapsed:n===i}}function r(e,n){try{!function t(i){if(i===e)throw n;if(1===i.nodeType)for(let e=i.firstChild;e;e=e.nextSibling)t(e);else 3===i.nodeType&&(n+=i.nodeValue.length)}(t)}catch(t){return t}}}setPos(t,e){let n=this.element;if(t=o(n,t),e=null!=e?o(n,e):t,t&&e){let n=document.createRange();n.setStart(t.node,t.pos),n.setEnd(e.node,e.pos);let o=window.getSelection(),s=o.getRangeAt(0);r=s,((i=n).startOffset!==r.startOffset||i.endOffset!==r.endOffset||i.startContainer!==r.endContainer||i.endContainer!==r.endContainer)&&(o.removeAllRanges(),o.addRange(n))}var i,r;function o(t,e){try{!function t(n){if(3===n.nodeType){let t=n.nodeValue.length;if(t>=e)throw n;e-=t}else if(1===n.nodeType)for(let e=n.firstChild;e;e=e.nextSibling)t(e)}(t)}catch(t){return{node:t,pos:e}}}}end(){this.setPos(this.length())}home(){this.setPos(0)}select(){this.setPos(0,this.length())}length(){return this.value().length}_formulaSource(){let t,e=[];for(let n in Qn.runtime.FUNCS)nl.test(n)||(t=n.toUpperCase(),e.push({value:t,text:t}));this.formulaSource=e}get list(){return this.input.current.list}get popup(){return this.input.current.popup}_formulaList(){this.list.data(this.formulaSource),this.list.itemClick((t=>{this._formulaListChange(t)}))}_formulaListChange(t){let e=this._tokenContext();if(!e||this._mute)return;let n=e.token,i=t,r={replace:!0,token:n,end:n.end};e.nextToken&&"("===e.nextToken.value||(i+="("),this._replaceAt(r,i),this.popup.close()}_blur(){this.popup.close(),clearTimeout(this._focusId),this.trigger("blur")}_isFormula(){return/^=/.test(this.value())}_keydown(t){let e=t.keyCode,n=this;el[e]?(n.popup.close(),n._navigated=!0):n._move(e)&&(n._navigated=!0,t.preventDefault()),n._keyDownTimeout=setTimeout(n._syntaxHighlight.bind(n))}_keyup(){let t,e=this.popup;if(this._isFormula()&&!this._navigated){t=((this._tokenContext()||{}).token||{}).value;const n=this.filter(t);t&&n.length?(e[e.visible()?"position":"open"](),setTimeout((()=>{this.list.focusFirst()}),0)):e.close()}this._navigated=!1,this._syntaxHighlight(),this.trigger("keyup")}_input(){this._syntaxHighlight()}_focus(){setTimeout(this._sync.bind(this)),this._focusTimeout=setTimeout(this._syntaxHighlight.bind(this)),this.trigger("focus")}_paste(t){t.preventDefault();let e,n=this.getPos();e=t.clipboardData.getData("text/plain");let i=this.value();i=i.substr(0,n.begin)+e+i.substr(n.end),this.value(i),this.setPos(n.begin+e.length),this.scale()}_move(t){let e=this.list,n=this.popup;if(n.visible()){if(t===Cn.DOWN)return e.focusNext(),!0;if(t===Cn.UP)return e.focusPrev(),!0;if(t===Cn.ENTER||t===Cn.TAB)return e.data()[e.focus()]&&this._formulaListChange(e.data()[e.focus()].value),n.close(),!0;if(t===Cn.PAGEUP)return e.focusFirst(),!0;if(t===Cn.PAGEDOWN)return e.focusLast(),!0}return!1}_tokenContext(){let t=this.getPos(),e=this.value();if(!e||!t||!t.collapsed)return null;let n,i=Qn.tokenize(e,this.row(),this.col());for(let e=0;e<i.length;++e)if(n=i[e],ol(n,t)&&/^(?:str|sym|func)$/.test(n.type))return{token:n,nextToken:i[e+1]};return null}_sync(){this._editorToSync&&this.isActive()&&this._editorToSync.value(this.value())}_textContainer(){let t=function(t,e){let n,i={};return document.defaultView&&document.defaultView.getComputedStyle?(n=document.defaultView.getComputedStyle(t,""),e&&e.forEach((function(t){i[t]=n.getPropertyValue(t)}))):(n=t.currentStyle,e&&e.forEach((function(t){var e;i[t]=n[(e=t,e.replace(/\-(\w)/g,(function(t,e){return e.toUpperCase()})))]}))),function(t){let e,n=0;for(e in t)t.hasOwnProperty(e)&&"toJSON"!==e&&n++;return n}(i)||(i=n),i}(this.element,tl);t.position="absolute",t.visibility="hidden",t.whiteSpace="pre",t.top=-3333,t.left=-3333,this._span=document.createElement("span"),this._span.style.whiteSpace="pre";for(const e in t)Object.hasOwnProperty.call(t,e)&&(this._span.style[e]=t[e]);Nn(this._span,this.element)}_tooltip(){this._cellTooltip=document.createElement("div"),this._cellTooltip.className="k-widget k-tooltip",this._cellTooltip.style.position="absolute",this._cellTooltip.style.display="none",this._cellTooltip.appendChild(document.createTextNode("A1")),Nn(this._cellTooltip,this.element)}tooltip(t){for(;this._cellTooltip.firstChild;)this._cellTooltip.removeChild(this._cellTooltip.firstChild);this._cellTooltip.appendChild(document.createTextNode(t))}toggleTooltip(t){this._cellTooltip.style.display=t?"":"none"}isActive(){return this.element===function(){try{return document.activeElement}catch(t){return document.documentElement.activeElement}}()}filter(t){if(!t||t.length<this.options.minLength)return;const e=this.formulaSource.filter((e=>String(e.value).toLowerCase().startsWith(t.toLowerCase())));return this.list.data(e),e}hide(){this.enable(!1),this.element.style.display="none",this._cellTooltip.style.display="none"}show(){this.enable(!0),this.element.style.display="block"}row(){if(this.activeCell)return this.activeCell.row}col(){if(this.activeCell)return this.activeCell.col}position(t){t&&(this.show(),this.element.style.top=t.top+1+"px",this.element.style.left=t.left+1+"px",this._cellTooltip.style.top=t.top-this._cellTooltip.offsetHeight-10+"px",this._cellTooltip.style.left=t.left+"px")}resize(t){t&&(this.element.style.width=t.width-1+"px",this.element.style.height=t.height-1+"px")}canInsertRef(t){return this._canInsertRef(t)}_canInsertRef(t){if(this.popup.visible())return null;let e,n,i,r=t,o=this.getPos();if(o&&this._isFormula()){if(0===o.begin)return null;for(e=Qn.tokenize(this.value(),this.row(),this.col()),i=0;i<e.length;++i){if(n=e[i],ol(n,o))return a(n);if(s(n))return l(e[i-1],n)}return l(n,null)}return null;function s(t){return t.begin>o.begin}function a(t){if(t){if(/^(?:num|str|bool|sym|ref)$/.test(t.type))return{replace:!0,token:t,end:t.end};if(/^(?:op|punc|startexp)$/.test(t.type))return t.end===o.end?l(t,e[i+1]):l(e[i-1],t)}}function l(t,e){if(null==t)return null;if(null==e)return/^(?:op|startexp)$/.test(t.type)||rl(t.value)?{token:t,end:o.end}:null;if(r){if("op"===t.type&&/^(?:punc|op)$/.test(e.type))return{token:t,end:o.end}}else{if("startexp"===t.type)return{token:t,end:o.end};if(/^(?:op|punc)$/.test(t.type)&&/^[,;({]$/.test(t.value))return{token:t,end:o.end};if(/^(?:ref|sym)/.test(t.type))return{token:t,replace:!0,end:t.end};if(/^(?:ref|sym)/.test(e.type))return{token:e,replace:!0,end:e.end}}return!1}}refAtPoint(t){let e=this._canInsertRef();if(e){let n=t.selection()._ref.simplify().clone().relative(0,0,3);t.isMerged(n)&&(n=n.topLeft),t!==this.activeSheet&&(n=n.setSheet(t.name(),!0)),this._replaceAt(e,n.print(0,0))}}_replaceAt(t,e){let n=this.value(),i=t.token,r=n.substr(t.end);n=n.substr(0,t.replace?i.begin:t.end)+e;let o=n.length;n+=r,this._value(n),this.setPos(o),this.scale(),this._syntaxHighlight()}syncWith(t){this._editorToSync=t,this.element&&(this.element.removeEventListener("input",this._sync),this.element.addEventListener("input",this._sync))}scale(){let t,e,n=this.element;this._span||this._textContainer(),this._span.innerHTML=n.innerHTML,t=this._span.offsetWidth+this.options.scalePadding,e=this._span.offsetHeight,t>n.offsetWidth&&(n.style.width=t+"px");e-1>n.offsetHeight&&(n.style.height=e-1+"px"),this._sync()}_value(t){if((this.element.innerText||this.element.textContent).replace(/\n$/,"")!==t){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.element.appendChild(document.createTextNode(t))}}value(t){let e=(this.element.innerText||this.element.textContent).replace(/\n$/,"");if(void 0===t)return e;e!==t&&(this._value(t),this._syntaxHighlight())}highlightedRefs(){return this._highlightedRefs.slice()}_syntaxHighlight(){let t=this.getPos(),e=this.value(),n=Qa.classNames.series,i=[],r=0,o=[],s=[];t&&!t.collapsed||(/^=/.test(e)?(s=Qn.tokenize(e,this.row(),this.col()),s.forEach((function(e){if(e.active=!1,e.cls=["k-syntax-"+e.type],"ref"===e.type&&(e.colorClass=n[r++%n.length],e.cls.push(e.colorClass),i.push(e)),t&&"punc"===e.type)if(rl(e.value))o.unshift(e);else if(")"===(s=e.value)||"]"===s||"}"===s){let n=o.shift();n?!function(t,e){return"("===e?")"===t:"["===e?"]"===t:"{"===e&&"}"===t}(e.value,n.value)?(e.cls.push("k-syntax-error"),n.cls.push("k-syntax-error")):(ol(e,t)||ol(n,t))&&(e.cls.push("k-syntax-paren-match"),n.cls.push("k-syntax-paren-match")):e.cls.push("k-syntax-error")}var s;t&&ol(e,t)&&(e.cls.push("k-syntax-at-point"),e.active=!0),"func"!==e.type||function(t){return Qn.runtime.FUNCS[t.toLowerCase()]}(e.value)||t&&ol(e,t)||e.cls.push("k-syntax-error")})),s.reverse().forEach((function(t){let n=t.begin,i=t.end,r=function(t){return String(t).replace(Ws,"&amp;").replace(qs,"&lt;").replace(Gs,"&gt;").replace(Ks,"&quot;").replace(Xs,"&#39;")}(e.substring(n,i));e=e.substr(0,n)+"<span class='"+t.cls.join(" ")+"'>"+r+"</span>"+e.substr(i)})),this.element.innerHTML=e,t&&this.setPos(t.begin,t.end),this._highlightedRefs=i):this._highlightedRefs.length&&(this._highlightedRefs=[],this._value(e)))}destroy(){this._editorToSync=null,this.element.removeEventListener("input",this.scale),this.element.removeEventListener("keydown",this._keydown),this.element.removeEventListener("keyup",this._keyup),this.element.removeEventListener("blur",this._blur),this.element.removeEventListener("input",this._input),this.element.removeEventListener("click",this._input),this.element.removeEventListener("focus",this._focus),this.element.removeEventListener("paste",this._paste),clearTimeout(this._focusTimeout),clearTimeout(this._keyDownTimeout),this._cellTooltip=null,this._span=null,super.destroy()}insertNewline(){let t=this.value(),e=this.getPos(),n=e.end===t.length;t=t.substr(0,e.begin)+(n?"\n\n":"\n"+t.substr(e.end)),this.value(t),this.setPos(e.begin+1)}}function rl(t){return"("===t||"["===t||"{"===t}function ol(t,e){return t.begin<=e.begin&&t.end>=e.end}il.classNames={wrapper:"k-spreadsheet-formula-input",listWrapper:"k-spreadsheet-formula-list"};class sl extends Us{constructor(t,e){super(t,e);const n=t&&t.querySelector(".k-spreadsheet-formula-input:not(.k-spreadsheet-cell-editor)");this.formulaInput=new il(n,this.options)}destroy(){this.formulaInput&&this.formulaInput.destroy(),this.formulaInput=null}}class al extends Us{readData(){const t=[];return this._workbook.forEachName((function(e){!e.hidden&&e.value instanceof pn&&t.push({name:e.name})})),t}value(t){if(this.options.combobox.current)return this.options.combobox.current.value(t)}}class ll extends Us{constructor(t,e){super(t,Object.assign({},{name:"SheetsBar"},e)),this.events=["select","reorder","rename"]}onSheetReorderEnd(t){this.trigger("reorder",{oldIndex:t.oldIndex,newIndex:t.newIndex})}onSheetRemove(t){this.trigger("remove",{name:t,confirmation:!0})}onSheetSelect(t){this.trigger("select",{name:t,isAddButton:!1})}onSheetRename(t,e){this.trigger("rename",{name:t,sheetIndex:e})}onAddSelect(){this.trigger("select",{isAddButton:!0})}destroy(){super.destroy()}}class cl{constructor(){this.cols=[],this.trs=[],this._height=0,this._width=0}addColumn(t){this._width+=t;let e=Zn.element("col",{style:{width:t+"px"}});e.visible=t>0,this.cols.push(e)}addRow(t){let e=null;e={style:{height:t+"px"}},this._height+=t;let n=Zn.element("tr",e);n.visible=t>0,this.trs.push(n)}addCell(t,e,n,i,r){null==e&&(e=""),e instanceof Zn.Node||(e=Zn.text(e));let o=[e],s={style:n};r&&!r.value&&(o.push(Zn.element("span",{className:"k-dirty"})),i=(i||"")+(i?" ":"")+"k-dirty-cell",s.title=r.message),i&&(s.className=i);let a=Zn.element("td",s,o);return this.trs[t].children.push(a),a}toDomTree(t,e,n){this.trs=this.trs.filter((function(t){return t.visible}));let i=0;return this.cols=this.cols.filter((function(t,e){return t.visible||(this.trs.forEach((function(t){t.children.splice(e-i,1)})),i++),t.visible}),this),Zn.element("table",{style:{left:t+"px",top:e+"px",height:this._height+"px",width:this._width+"px"},className:n,role:"presentation"},[Zn.element("colgroup",null,this.cols),Zn.element("tbody",null,this.trs)])}}function hl(t,e,n){return t>=e&&t<=n}class ul extends Hs{constructor(t,e){super();let n=ul.classNames;if(this.element=t,this.options=In({},{messages:xn.view},this.options,e),this.events=["update","message"],this._chrome(),this._dialogs=[],this._formulaInput(),this.wrapper=t.querySelector(Xa+n.view),this.container=t.querySelector(Xa+n.fixedContainer),this.scroller=t.querySelector(Xa+n.scroller),this.clipboard=t.querySelector(Xa+n.clipboard),this.viewSize=this.scroller?this.scroller.querySelector(".k-spreadsheet-view-size")||this.scroller.firstElementChild:null,!this.viewSize)throw new Error("The scroller element does not contain a view size element.");this.tree=new Zn.Tree(this.container),this.clipboardContents=new Zn.Tree(this.clipboard),this.editor=new Vs(this),this._sheetsbar()}enableClipboard(t){this.isClipboardDeactivated=!t,t?this.clipboard.setAttribute("contenteditable",t):this.clipboard.removeAttribute("contenteditable")}_resize(){}_chrome(){let t=this.element.querySelector(".k-spreadsheet-name-editor");this.nameEditor=new al(t,{combobox:this.options.nameBoxRef});let e=this.element.querySelector(".k-spreadsheet-formula-bar");this.formulaBar=new sl(e,{input:this.options.formulaBarInputRef})}_formulaInput(){let t=this.element.querySelector(Xa+ul.classNames.cellEditor);this.formulaInput=new il(t,{autoScale:!0,input:this.options.formulaCellInputRef})}_sheetsbar(){this.options.sheetsbar&&(this.sheetsbar=new ll(this.element.querySelector(Xa+ul.classNames.sheetsBar),this.options.sheetsbar))}_tabstrip(){}_executeCommand(t){this._sheet.trigger("commandRequest",t)}workbook(t){this._workbook=t,t._view=this,this.nameEditor._workbook=t}sheet(t){this._sheet=t}activeCellRectangle(){return this.cellRectangle(this._sheet._viewActiveCell())}_rectangle(t,e){return t._grid.boundingRectangle(e.toRangeRef())}isColumnResizer(t,e,n){return t-=this._sheet._grid._headerWidth,e._grid.columns.frozen||(t+=this.scroller.scrollLeft),null===(n=this._sheet._grid._columns.locate(0,n,(function(e){return Math.abs(t-e)<=3.5})))||this._sheet.isHiddenColumn(n)?null:n}isRowResizer(t,e,n){return t-=this._sheet._grid._headerHeight,e._grid.rows.frozen||(t+=this.scroller.scrollTop),null===(n=this._sheet._grid._rows.locate(0,n,(function(e){return Math.abs(t-e)<=3.5})))||this._sheet.isHiddenRow(n)?null:n}isFilterIcon(t,e,n,i){let r=this,o=n._grid,s=o.rows.frozen?0:r.scroller.scrollTop,a=o.columns.frozen?0:r.scroller.scrollLeft;return t-=r._sheet._grid._headerWidth-a,e-=r._sheet._grid._headerHeight-s,En((function(o){r._sheet.forEachFilterHeader(i,(function(i){let s=r._rectangle(n,i);n.filterIconRect(s).intersects(t,e)&&o(!0)}))}))}isAutoFill(t,e,n){let i=this._sheet.select();if(i.size>1)return!1;t-=this._sheet._grid._headerWidth,e-=this._sheet._grid._headerHeight,n._grid.columns.frozen||(t+=this.scroller.scrollLeft),n._grid.rows.frozen||(e+=this.scroller.scrollTop);let r=this._rectangle(n,i);return Math.abs(r.right-t)<8&&Math.abs(r.bottom-e)<8}isEditButton(t,e,n){if(this._sheet.activeCellCustomEditor()){let i=this.activeCellRectangle();if(e>=i.top&&e<=i.bottom)return n._editorInLastColumn?t<i.left&&t>=i.left-20:t>i.right&&t<=i.right+20}}drawingAt(t,e,n){t-=this._sheet._grid._headerWidth,e-=this._sheet._grid._headerHeight,n._grid.columns.frozen||(t+=this.scroller.scrollLeft),n._grid.rows.frozen||(e+=this.scroller.scrollTop);let i=this._sheet,r=this._sheet._drawings;for(let n=r.length;--n>=0;){let o=r[n],s=i.drawingBoundingBox(o);if(s.intersects(t,e))return{drawing:o,drx:s.left-t,dry:s.top-e}}}objectAt(t,e,n){let i,r,o=this._sheet._grid;if(t<0||e<0||t>this.scroller.clientWidth||e>this.scroller.clientHeight)i={type:"outside"};else if(t<o._headerWidth&&e<o._headerHeight)i={type:"topcorner"};else if(r=this.paneAt(t,e),r){if(!n){let n=this.drawingAt(t,e,r);if(n)return{type:"drawing",drawing:n.drawing,drx:n.drx,dry:n.dry,pane:r,startX:t,startY:e}}let s=r._grid.rows.indexVisible(e,this.scroller.scrollTop),a=r._grid.columns.indexVisible(t,this.scroller.scrollLeft),l="cell",c=new mn(s,a),h=this._sheet.selectionInProgress();this.isAutoFill(t,e,r)?l="autofill":this.isFilterIcon(t,e,r,c)?l="filtericon":!h&&t<o._headerWidth?(l="rowheader",null!==(s=this.isRowResizer(e,r,s))&&(c=new mn(s,-1/0),l="rowresizehandle")):!h&&e<o._headerHeight?(l="columnheader",null!==(a=this.isColumnResizer(t,r,a))&&(c=new mn(-1/0,a),l="columnresizehandle")):this.isEditButton(t,e,r)&&(l="editor"),i={type:l,ref:c}}else i={type:"outside"};return i.pane=r,i.x=t,i.y=e,i}paneAt(t,e){return this.panes.filter((function(n){let i=n._grid;return hl(e,i.top,i.bottom)&&hl(t,i.left,i.right)}))[0]}containingPane(t){return this.panes.filter((function(e){return!!e._grid.contains(t)}))[0]}cellRectangle(t){let e=this.containingPane(t)._grid;return this._sheet._grid.rectangle(t).offset(e.headerWidth-(e.columns.frozen?0:this.scroller.scrollLeft),e.headerHeight-(e.rows.frozen?0:this.scroller.scrollTop))}refresh(t){let e=this._sheet;if(this.trigger("update",{reason:t,range:e.range(e.activeCell())}),this._resize(),this.viewSize.style.height=e._grid.totalHeight()+"px",this.viewSize.style.width=e._grid.totalWidth()+"px",t.layout){let t=e.frozenColumns(),n=e.frozenRows();this.panes=[this._pane(n,t)],t>0&&this.panes.push(this._pane(n,0,null,t)),n>0&&this.panes.push(this._pane(0,t,n,null)),n>0&&t>0&&this.panes.push(this._pane(0,0,n,t))}t.filter&&this._destroyFilterMenu(),t.activeCell&&(this._focus=e.activeCell().toRangeRef())}createFilterMenu(){}selectClipboardContents(){this.isClipboardDeactivated||(this.clipboard.focus({preventScroll:!0}),function(t){let e=window.getSelection();e.removeAllRanges();let n=document.createRange();n.selectNodeContents(t),e.addRange(n)}(this.clipboard))}scrollIntoView(t){let e=!1,n=this.containingPane(t)._grid,i=n.scrollBoundaries(t),r=this.scroller,o=n.rows.frozen?0:r.scrollTop,s=n.columns.frozen?0:r.scrollLeft;return i.top<o&&(e=!0,r.scrollTop=i.scrollTop),i.bottom>o&&(e=!0,r.scrollTop=i.scrollBottom),i.left<s&&(e=!0,r.scrollLeft=i.scrollLeft),i.right>s&&(e=!0,r.scrollLeft=i.scrollRight),e}_destroyDialog(){this._dialogs.pop()}openCustomEditor(){let t=this,e=t._sheet.activeCell().first(),n=t._sheet.activeCellCustomEditor(),i=t._sheet.range(e);n.edit({range:i,rect:t.activeCellRectangle(),view:this,validation:this._sheet.validation(e),callback:function(e,n){t._executeCommand({command:"EditCommand",options:{operatingRange:i,editRange:i,property:n?"input":"value",value:e}})}})}openDialog(t,e){let n=this._sheet;return n.withCultureDecimals(function(){let i=n.activeCell(),r=new Ms(i,n);this.trigger("message",{...e,name:t,ref:i,range:r})}.bind(this))}showError(t,e){let n=this._dialogs,i=this.options.messages.errors;if(n.length>0)return;let r=function(){n.pop(),this.selectClipboardContents(),e&&e()}.bind(this);const o={title:t.title||"Error",text:t.body?t.body:i[t.type],close:r};n.push(o),this.openDialog(t.type||"message",o)}destroy(){this.unbind(),[this.tree,this.clipboardContents].forEach((t=>{for(;t&&t.root&&t.root.lastChild;)t.root.removeChild(t.root.lastChild)})),this.tree=this.clipboardContents=null}_destroyFilterMenu(){this._filterMenu&&(this._filterMenu.destroy(),this._filterMenu=void 0,this._filterMenuColumn=void 0)}render(t){let e=this._sheet,n=e.focus(),i=Rn(),r=this.wrapper.clientWidth-i,o=this.wrapper.clientHeight-i;if(n&&this.scrollIntoView(n))return;let s=e.resizingInProgress()?e.resizeHandlePosition().col===-1/0?"column":"row":"none";this.wrapper.classList.toggle(Ga.editContainer,this.editor.isActive()),this.wrapper.classList.toggle(Ga.horizontalResize,"row"===s),this.wrapper.classList.toggle(Ga.verticalResize,"column"===s);let a=e._grid,l=[],c={scroller:this.scroller,toplevelElements:l,contentWidth:r,contentHeight:o};this.panes.forEach((function(t){l.push(t.render(c))}));let h=Zn.element("div",{style:{width:a._headerWidth+"px",height:a._headerHeight+"px"},className:ul.classNames.topCorner});l.push(h),e.resizeHandlePosition()&&e.resizeHintPosition()&&l.push(this.renderResizeHint()),this.tree.render(l),this.container.style.width=r+"px",this.container.style.height=o+"px",this.editor.isActive()?this.editor.toggleTooltip(this.activeCellRectangle()):t.resize||t.comment||e.selectionInProgress()||e.resizingInProgress()||e.draggingInProgress()||e.isInEditMode()||this.renderClipboardContents()}renderResizeHint(){let t,e=this._sheet,n=e.resizeHandlePosition().col!==-1/0;t=n?{height:this.scroller.clientHeight+"px",width:"7px",left:e.resizeHintPosition().x+"px",top:"0px"}:{height:"7px",width:this.scroller.clientWidth+"px",top:e.resizeHintPosition().y+"px",left:"0px"};let i=Qa.classNames;return Zn.element("div",{className:i.resizeHint+(n?"":" "+i.resizeHintVertical),style:t},[Zn.element("div",{className:i.resizeHintHandle}),Zn.element("div",{className:i.resizeHintMarker})])}renderClipboardContents(){let t=this._sheet,e=t._grid,n=e.normalize(t.select().toRangeRef()),i=this._workbook.clipboard().canCopy();if(!1===i.canCopy&&i.multiSelection)return this.clipboardContents.render([]),void this.selectClipboardContents();n=t.trim(n);let r=new cl,o=e.rangeDimensions(n);o.rows.forEach((function(t){r.addRow(t)})),o.columns.forEach((function(t){r.addColumn(t)}));let s=t._getMergedCells(n),a=s.primary,l=s.secondary;t.forEach(n,(function(t,e,i){let o=new mn(t,e).print();if(!l[o]){let e=function(t,e,n){let i={};n.background&&(i.backgroundColor=n.background),n.color&&(i.color=n.color),n.fontFamily&&(i.fontFamily=n.fontFamily),n.underline&&(i.textDecoration="underline"),n.italic&&(i.fontStyle="italic"),n.textAlign&&(i.textAlign=n.textAlign),n.verticalAlign&&(i.verticalAlign="center"===n.verticalAlign?"middle":n.verticalAlign),n.bold&&(i.fontWeight="bold"),n.fontSize&&(i.fontSize=n.fontSize+"px"),!0===n.wrap&&(i.whiteSpace="pre-wrap"),n.borderRight?i.borderRight=Ja(n.borderRight):n.background&&(i.borderRightColor=n.background),n.borderBottom?i.borderBottom=Ja(n.borderBottom):n.background&&(i.borderBottomColor=n.background);let r=n.value,o=typeof r,s=n.format;if(s||"number"!==o||r===Math.floor(r)||(s="0.##############"),s&&null!=r&&(r=zo.format(r,s),r.__dataType&&(o=r.__dataType)),!i.textAlign)switch(o){case"number":case"date":case"percent":case"currency":i.textAlign="right";break;case"boolean":i.textAlign="center"}let a=null;!1===n.enable&&(a="k-disabled");let l,c,h=t.addCell(e,r,i,a,n.validation);return n.borderLeft?(c=function(t,e){let n=t.trs[e].children;return n[n.length-2]}(t,e),l=Ja(n.borderLeft),c&&l&&(c.attr.style.borderRight=l)):n.background&&(i.borderLeftColor=n.background),n.borderTop?(c=function(t,e){let n=t.trs[e-1],i=t.trs[e].children.length-1;if(n&&i>=0)return n.children[i]}(t,e),l=Ja(n.borderTop),c&&l&&(c.attr.style.borderBottom=l)):n.background&&(i.borderTopColor=n.background),h}(r,t-n.topLeft.row,i),s=a[o];s&&(e.attr.colspan=s.width(),e.attr.rowspan=s.height())}})),this.clipboardContents.render([r.toDomTree(0,0,"kendo-clipboard-"+this._workbook.clipboard()._uid)]),this.selectClipboardContents()}_pane(t,e,n,i){let r=new Qa(this._sheet,this._sheet._grid.pane({row:t,column:e,rowCount:n,columnCount:i}));return r.refresh(this.scroller.clientWidth,this.scroller.clientHeight),r}}ul.classNames=Ga;class dl{constructor(t){this._content={},this._externalContent={},this._internalContent={},this.workbook=t,this.origin=fn,this.iframe=document.createElement("iframe"),this.iframe.className="k-spreadsheet-clipboard-paste",this.iframe.setAttribute("title","Spreadsheet clipboard iframe"),this.menuInvoked=!1,this._uid=function(){let t,e,n="";for(n+="abcdef"[Math.floor(Math.random()*Math.floor(6))],t=1;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(n+="-"),n+=(12===t?4:16===t?3&e|8:e).toString(16);return n}(),document.body.appendChild(this.iframe)}destroy(){this.iframe&&this.iframe.parentNode&&this.iframe.parentNode.removeChild(this.iframe)}canCopy(){let t={canCopy:!0},e=this.workbook.activeSheet().select();return e===fn&&(t.canCopy=!1),e instanceof vn&&(t.canCopy=!1,t.multiSelection=!0),this.menuInvoked&&(t.canCopy=!1,t.menuInvoked=!0),t}canPaste(){let t=this.workbook.activeSheet(),e=this.pasteRef(),n={canPaste:!0,pasteOnMerged:!1,pasteOnDisabled:!1};return t.range(e).enable()||(n.canPaste=!1,n.pasteOnDisabled=!0),e.eq(t.unionWithMerged(e))||(n.canPaste=!1,n.pasteOnMerged=!0),this.menuInvoked&&(n.canPaste=!1,n.menuInvoked=!0),n}intersectsMerged(){let t=this.workbook.activeSheet();this.parse(),this.origin=this._content.origRef;let e=this.pasteRef();return!e.eq(t.unionWithMerged(e))}copy(){let t=this.workbook.activeSheet();this.origin=t.select(),this._internalContent=t.selection().getState(),delete this._externalContent.html,delete this._externalContent.plain}cut(){let t=this.workbook.activeSheet();this.copy(),t.range(t.select()).clear()}pasteRef(){let t=this.workbook.activeSheet();if(this.origin===fn)return t.select();let e=t.activeCell().first(),n=this.origin.first(),i=n.row-e.row,r=n.col-e.col;return this.origin.relative(i,r,3)}paste(){let t=this.workbook.activeSheet(),e=this.pasteRef();(e.bottomRight.row>=t._rows._count||e.bottomRight.col>=t._columns._count)&&t.resize(Math.max(e.bottomRight.row+1,t._rows._count),Math.max(e.bottomRight.col+1,t._columns._count)),t.range(e).setState(this._content,this),t.triggerChange({recalc:!0,ref:e})}external(t){if(!t||!t.html&&!t.plain)return this._externalContent;this._externalContent=t}isExternal(){return!this._isInternal()}parse(){let t;if(this._isInternal())t=this._internalContent;else{let e=this._externalContent;if(t=e.plain?function(t){let e=pl();if(-1===t.indexOf("\t")&&-1===t.indexOf("\n"))fl(e,0,0,{value:t});else{let n=t.split("\n");for(let t=0;t<n.length;t++){let i=n[t].split("\t");for(let n=0;n<i.length;n++)fl(e,t,n,{value:i[n]})}}return e}(e.plain):pl(),e.html){let n=this.iframe.contentWindow.document;n.open(),n.write(e.html),n.close();let i=n.querySelector("table");if(i){let e=function(t){let e=pl(),n=[],i=0,r=0;for(let e=0;e<t.rows.length;++e)n.push([]);let o=new Qn.runtime.Matrix,s=new Qn.runtime.Matrix;for(let a=0;a<t.rows.length;++a,++i){let l=t.rows[a];r=0;for(let t=0;t<l.cells.length;++t){let a=l.cells[t],c=a.rowSpan,h=a.colSpan;for(;n[i][r];)r++;let u=a.getAttribute("style"),d=/mso-ignore:colspan/.test(u);fl(e,i,r,ml(i,r,a,o,s)),(c>1||h>1&&!d)&&e.mergedCells.push(new yn(new mn(i,r),new mn(i+c-1,r+h-1)).toString());for(let t=i+c;--t>=i;)for(let o=r+h;--o>=r;)t<n.length&&(n[t][o]=!0,t===i&&o===r||fl(e,t,o,{}))}}return e}(i);e.data.forEach((function(e,n){e.forEach((function(e,i){/^\s*#+\s*$/.test(e.value)&&(e.value=t.data[n][i].value)}))})),t=e}}this.origin=t.origRef}this._content=t}_isInternal(){if(void 0===this._externalContent.html)return!0;let t=Boolean(Ln(this._externalContent.html).querySelector("table.kendo-clipboard-"+this._uid)),e=Boolean(Ln(this._externalContent.plain).querySelector("table.kendo-clipboard-"+this._uid));return t||e}}function pl(){let t=new mn(0,0,0);return{ref:t,mergedCells:[],data:[],foreign:!0,origRef:t.toRangeRef()}}function fl(t,e,n,i){let r=t.data||(t.data=[]);r[e]||(r[e]=[]),r[e][n]=i;let o=t.origRef.bottomRight;o.row=Math.max(o.row,e),o.col=Math.max(o.col,n)}function gl(t){return t.replace(/^-(?:ms|moz|webkit)-/,"")}function ml(t,e,n,i,r){let o=window.getComputedStyle(n),s=(n.innerText||n.textContent).replace(/\t$/,""),a=function(t){let e={};return["borderBottom","borderRight","borderLeft","borderTop"].forEach((function(n){e[n]="none"===t[n+"Style"]?null:{size:1,color:t[n+"Color"]}})),e}(o),l={value:""===s?null:s,borderTop:a.borderTop||i.get(t,e)||null,borderBottom:a.borderBottom||i.get(t+1,e)||null,borderLeft:a.borderLeft||r.get(t,e)||null,borderRight:a.borderRight||r.get(t,e+1)||null,fontSize:parseInt(o["font-size"],10)};return i.set(t,e,l.borderTop),i.set(t+1,e,l.borderBottom),r.set(t,e,l.borderLeft),r.set(t,e+1,l.borderRight),"rgb(0, 0, 0)"!==o["background-color"]&&"rgba(0, 0, 0, 0)"!==o["background-color"]&&(l.background=o["background-color"]),"rgb(0, 0, 0)"!==o.color&&"rgba(0, 0, 0, 0)"!==o.color&&(l.color=o.color),"underline"===o["text-decoration"]&&(l.underline=!0),"italic"===o["font-style"]&&(l.italic=!0),"bold"===o["font-weight"]&&(l.bold=!0),"right"!==gl(o["text-align"])&&(l.textAlign=gl(o["text-align"])),"middle"!==o["vertical-align"]&&(l.verticalAlign=o["vertical-align"]),"normal"!==o["word-wrap"]&&(l.wrap=!0),l}let yl="autoFill",vl="clear",bl="cut",wl="edit",xl="paste",_l="validation";const Sl=()=>{};class Cl{constructor(t){this.options=t,this._workbook=t.workbook,this._property=t&&t.property,this._state={}}range(t){return void 0!==t&&this._setRange(t),this._range}_setRange(t){this._range=t}redo(){this.range().select(),this.exec()}undo(){this.setState(this._state)}getState(){this._state=this.range().getState(this._property)}setState(t){this.range().setState(t)}rejectState(t){return this.undo(),{title:t.title,body:t.message,reason:"error",type:"validationError"}}_forEachCell(t){let e=this.range();e._ref.forEach(function(n){e.sheet().forEach(n.toRangeRef(),t.bind(this))}.bind(this))}usesImage(){return!1}}class kl extends Cl{constructor(t){super(t),this._drawing=t.drawing}usesImage(t){return this._drawing.image===t}}class Al extends kl{exec(){let t=this.range().sheet();this._origIndex=t._drawings.indexOf(this._drawing),t._drawings.splice(this._origIndex,1),this._newIndex=this._reorder(),t._drawings.splice(this._newIndex,0,this._drawing),t.triggerChange({drawings:!0})}undo(){let t=this.range().sheet();t._drawings.splice(this._newIndex,1),t._drawings.splice(this._origIndex,0,this._drawing),t.triggerChange({drawings:!0})}}class El extends Cl{constructor(t){super(t),this._target=t.target,this._value=t.value}exec(){this.getState(),this.setState(this._value)}}class Tl extends Cl{_setRange(t){Cl.prototype._setRange.call(this,t.skipHiddenCells())}constructor(t){super(t),this._value=t.value}exec(){let t=this.range();t.enable()&&(this.getState(),"format"===this.options.property&&this._workbook.trigger("changeFormat",{range:t}),t[this._property](this._value))}}class Ml extends Cl{constructor(t){super(t),this._eventType="cut",this._clipboard=t.workbook.clipboard(),this._event=t.event}exec(){let t,e,n=this._clipboard.canCopy(),i=[];if(!n.canCopy)return n.menuInvoked?{reason:"error",type:"useKeyboard"}:n.multiSelection?{reason:"error",type:"unsupportedSelection"}:void 0;let r=this._workbook.activeSheet().selection();if("cut"===this._eventType){if(!r.enable())return this._event.preventDefault(),{reason:"error",type:"cannotModifyDisabled"};this.getState()}if(this._workbook.trigger(this._eventType,{range:r}))this._event.preventDefault();else if("cut"===this._eventType){if(t=r.values(),t.forEach((function(t){e=[],t.forEach((function(){e.push({})})),i.push(e)})),r.sheet().trigger("changing",{data:i,range:r,changeType:bl}))return;this._clipboard.cut()}else this._clipboard.copy()}undo(){let t=this.range();t.sheet().trigger("changing",{data:this._state.data,range:t,changeType:bl})||this.setState(this._state)}}function Ol(){return{copy:!!document.queryCommandSupported&&document.queryCommandSupported("copy"),cut:!!document.queryCommandSupported&&document.queryCommandSupported("cut"),paste:!!document.queryCommandSupported&&document.queryCommandSupported("paste")}}class Il extends Cl{column(){return this.options.column||0}undo(){this.range().sheet().clearFilter(this.column()),this._state.length&&this.range().filter(this._state)}getState(){let t=this.range().sheet().filter();t&&(this._state=t.columns.filter(function(t){return t.index===this.column()}.bind(this)))}exec(){let t,e,n=this.range(),i=this.column(),r=n.sheet().filter(),o=!1;this.options.valueFilter?e={column:i,filter:new ma(this.options.valueFilter)}:this.options.customFilter&&(e={column:i,filter:new ya(this.options.customFilter)}),this.getState(),r&&r.ref.eq(n._ref)&&r.columns.length?(r.columns.forEach((function(t){t.index===i&&(o=!0)})),t=r.columns.map((function(t){return t.index===i?e:{column:t.index,filter:t.filter}})),o||t.push(e)):t=e,n.filter(t)}}class Dl extends Cl{constructor(t){super(t),this.axis=t.axis}undo(){this.range().sheet().setAxisState(this._state)}exec(){let t=this.range().sheet();this._state=t.getAxisState(),"row"===this.axis?t.axisManager().hideSelectedRows():t.axisManager().hideSelectedColumns()}}class Fl extends Cl{exec(){this._expandedRange=this._expand(this.range()),this._state=this._expandedRange.getState(),this._indexes=this._exec(this._expandedRange.sheet())}undo(){let t=this,e=t._expandedRange,n=e.sheet();n.batch((function(){t._indexes.forEach((function(e){t._undoOne(n,e),n._restoreModifiedFormulas(e.formulas)})),e.setState(t._state)}),{layout:!0,recalc:!0,ref:e._ref,isValue:!0})}}class Pl extends Cl{constructor(t){super(t),this._value=t.value}undo(){let t=this,e=t.range().sheet();e.batch((function(){for(let n=t._pos.count;--n>=0;)t._undoOne(e,t._pos.base)}),{layout:!0,recalc:!0})}}class Rl extends Cl{constructor(t){super(t),this._name=t.name,this._value=t.value}getState(){this._state=this._workbook.nameDefinition(this._name)}setState(){this._workbook.nameDefinition(this._name,this._state),this._workbook.trigger("change",{recalc:!0})}}var Ll=Object.freeze({__proto__:null,AddColumnCommand:class extends Pl{exec(){let t=this._value,e=this.range().sheet();this._pos="left"===t?e.axisManager().addColumnLeft():e.axisManager().addColumnRight()}_undoOne(t,e){t.deleteColumn(e)}},AddCommand:Pl,AddRowCommand:class extends Pl{exec(){let t=this._value,e=this.range().sheet();this._pos="above"===t?e.axisManager().addRowAbove():e.axisManager().addRowBelow()}_undoOne(t,e){t.deleteRow(e)}},AdjustDecimalsCommand:class extends Cl{constructor(t){t.property="format",super(t),this._delta=t.value}exec(){let t=this.range().sheet(),e=this._delta;this.getState(),t.batch(function(){this.range().forEachCell((function(n,i,r){let o=r.format;if(!o){let t=r.value;"number"==typeof t&&/\./.test(t)&&(o="0."+String(t).split(".")[1].replace(/\d/g,"0"))}(o||e>0)&&(o=zo.adjustDecimals(o||"0",e),t.range(n,i).format(o))}))}.bind(this))}},AdjustRowHeightCommand:class extends Cl{exec(){let t=this.options,e=this._workbook.activeSheet();(t.range||e.range(t.rowIndex))._adjustRowHeight()}},ApplyFilterCommand:Il,AutoFillCommand:class extends Cl{constructor(t){super(t)}origin(t){this._origin=t}exec(){let t,e=this.range();if(!e.enable())return{reason:"error",type:"rangeDisabled"};if(e.intersectingArrayFormula())return{reason:"error",type:"intersectsArray"};this.getState();try{if(t=e._previewFillFrom(this._origin),e.sheet().trigger("changing",{data:t.props,range:t.dest,changeType:yl}))return;t.dest._properties(t.props,!0)}catch(t){if(t instanceof Ms.FillError)return{reason:"error",type:t.code};throw t}}undo(){let t=this.range(),e=this._state;t.sheet().trigger("changing",{data:e.data,range:t,changeType:yl})||this.setState(this._state)}},BorderChangeCommand:class extends Cl{constructor(t){t.property="border",super(t),this._type=t.border,this._style=t.style}_batch(t){return this.range().sheet().batch(t,{})}exec(){let t=this;t.getState(),t._batch((function(){t[t._type](t._style)}))}noBorders(){this.range().insideBorders(null),this.outsideBorders(null)}allBorders(t){this.range().insideBorders(t),this.outsideBorders(t)}leftBorder(t){this.range().leftColumn().borderLeft(t)}rightBorder(t){this.range().rightColumn().borderRight(t)}topBorder(t){this.range().topRow().borderTop(t)}bottomBorder(t){this.range().bottomRow().borderBottom(t)}outsideBorders(t){let e=this.range();e.leftColumn().borderLeft(t),e.topRow().borderTop(t),e.rightColumn().borderRight(t),e.bottomRow().borderBottom(t)}insideBorders(t){this.range().insideBorders(t),this.outsideBorders(null)}insideHorizontalBorders(t){this.range().insideHorizontalBorders(t)}insideVerticalBorders(t){this.range().insideVerticalBorders(t)}},BringToFrontCommand:class extends Al{_reorder(){return this.range().sheet()._drawings.length}},ClearContentCommand:class extends Cl{exec(){let t,e,n,i,r,o=[];return this.range().enable()?this.range().canEditArrayFormula()?(this.getState(),t=this.range().skipHiddenCells(),t._ref.refs&&t._ref.refs.length>1?t._ref.refs.forEach((function(e){r=t.sheet().range(e),o=o.concat(r.values())})):o=t.values(),n=[],o.forEach((function(t){e=[],t.forEach((function(){e.push(null)})),n.push(e)})),t.sheet().trigger("changing",{data:n,range:t,changeType:vl})?void 0:(t.clearContent(),i=t._getValidationState(),i?this.rejectState(i):void 0)):{reason:"error",type:"intersectsArray"}:{reason:"error",type:"cannotModifyDisabled"}}undo(){let t,e=this.range().skipHiddenCells(),n=e.sheet(),i=this._state.data,r=[];i.forEach((function(e){t=[],e.forEach((function(e){t.push(e.value)})),r.push(t)})),n.trigger("changing",{data:r,range:e,changeType:vl})||this.setState(this._state)}},ClearFilterCommand:class extends Il{exec(){let t=this.range(),e=this.column();this.getState(),t.clearFilter(e)}},ColumnWidthCommand:class extends El{getState(){this._state=this.range().sheet().columnWidth(this._target)}setState(t){this.range().sheet().columnWidth(this._target,t)}},Command:Cl,CopyCommand:class extends Ml{constructor(t){super(t),this._eventType="copy",this.undo=Sl}},CutCommand:Ml,DefineNameCommand:class extends Rl{exec(){this.getState();try{this._workbook.defineName(this._name,this._value),this._workbook.trigger("change",{recalc:!0})}catch(t){return{title:"Error",body:t+"",reason:"error"}}}},DeleteColumnCommand:class extends Fl{_expand(t){return t.resize({top:-1/0,bottom:1/0})}_exec(t){return t.axisManager().deleteSelectedColumns()}_undoOne(t,e){t.insertColumn(e.index),t.columnWidth(e.index,e.width)}},DeleteCommand:Fl,DeleteDrawingCommand:class extends kl{exec(){let t=this.range().sheet();t._activeDrawing=null,t.removeDrawing(this._drawing)}undo(){let t=this.range().sheet();t._activeDrawing=this._drawing,t.addDrawing(this._drawing)}redo(){this.exec()}},DeleteNameCommand:class extends Rl{exec(){this.getState(),this._workbook.undefineName(this._name),this._workbook.trigger("change",{recalc:!0})}},DeleteRowCommand:class extends Fl{_expand(t){return t.resize({left:-1/0,right:1/0})}_exec(t){return t.axisManager().deleteSelectedRows()}_undoOne(t,e){t.insertRow(e.index),t.rowHeight(e.index,e.height)}},DrawingCommand:kl,DrawingUpdateCommand:class extends Cl{constructor(t){super(t),this._sheet=t.sheet,this._drawing=t.drawing,this._orig=this._drawing.clone(),this._previous=t.previous}exec(){}undo(){this._drawing.reset(this._previous),this._sheet._activeDrawing=this._drawing,this._sheet.triggerChange({layout:!0})}redo(){this._drawing.reset(this._orig),this._sheet._activeDrawing=this._drawing,this._sheet.triggerChange({layout:!0})}usesImage(t){return this._drawing.image===t||this._orig.image===t||this._previous.image===t}},EditCommand:class extends Tl{constructor(t){t.property=t.property||"input",super(t)}_setRange(t){Tl.prototype._setRange.apply(this,arguments),this._editRange=this.options.arrayFormula?t:t.sheet().activeCellSelection()}getState(){this._state=this.range().getState()}exec(){return this.range().sheet().withCultureDecimals(this._exec.bind(this))}undo(){let t=this._editRange,e=this._state;t.sheet().trigger("changing",{data:e.data[0][0].value,range:t,changeType:wl})||this.setState(this._state)}_exec(){let t=this.options.arrayFormula,e=this._editRange;if(!e.enable())return{reason:"error",type:"rangeDisabled"};if(!e.canEditArrayFormula())return{reason:"error",type:"intersectsArray"};let n=this._value;if(this.getState(),!this.range().sheet().trigger("changing",{data:n,range:this._editRange,changeType:wl}))if("value"!==this._property)try{e.link(null),""===n?e.value(null):(e.input(n,{arrayFormula:t}),/\n/.test(e.value())&&e.wrap(!0)),e._adjustRowHeight();let i=e._getValidationState();if(i)return this.rejectState(i)}catch(t){if(t instanceof Qn.ParseError)return{title:"Error in formula",body:t+"",reason:"error"};throw t}else e.value(n)}},EditValidationCommand:class extends Cl{constructor(t){super(t),this._value=t.value}exec(){let t=this,e=t.range().sheet();if(this.getState(),!e.trigger("changing",{data:t._value,range:t.range(),changeType:_l}))try{e.withCultureDecimals((function(){t.range().validation(t._value)}))}catch(t){if(t instanceof Qn.ParseError)return{title:"Error in formula",body:t+"",reason:"error"};throw t}}undo(){let t=this.range(),e=this._state;t.sheet().trigger("changing",{data:e.data[0][0].validation,range:t,changeType:_l})||this.setState(this._state)}},FilterCommand:class extends Cl{undo(){this.range().filter(this._state)}exec(){let t=this.range();this._state=t.hasFilter(),t.filter(!this._state)}},FreezePanesCommand:class extends Cl{constructor(t){super(t),this._type=t.value}exec(){this.getState(),this._topLeft=this.range().topLeft(),this[this._type]()}getState(){this._state=this.range().sheet().getState()}undo(){this.range().sheet().setState(this._state)}panes(){let t=this._topLeft;this.range().sheet().frozenColumns(t.col).frozenRows(t.row)}rows(){let t=this._topLeft;this.range().sheet().frozenRows(t.row)}columns(){let t=this._topLeft;this.range().sheet().frozenColumns(t.col)}unfreeze(){this.range().sheet().frozenRows(0).frozenColumns(0)}},GridLinesChangeCommand:class extends El{getState(){this._state=this._range.sheet().showGridLines()}setState(t){this._range.sheet().showGridLines(t)}},HideLineCommand:Dl,HyperlinkCommand:class extends Cl{constructor(t){super(t),this._link=t.link}exec(){let t=this.range();this._prevLink=t.link(),this._prevUnderline=t.underline(),t.link(this._link),t.underline(!0),null==t.value()&&(this._hasSetValue=!0,t.value(this._link))}undo(){let t=this.range();t.link(this._prevLink),t.underline(this._prevUnderline),this._hasSetValue&&t.value(null)}},InsertCommentCommand:class extends Tl{constructor(t){t.property="comment",super(t)}},InsertImageCommand:class extends kl{constructor(t){super(t),this._blob=t.blob,this._width=t.width,this._height=t.height}exec(){let t=this.range(),e=t.sheet(),n=this._width,i=this._height,r=n/i;n>i?(n=Math.min(n,300),i=n/r):(i=Math.min(i,300),n=i*r),this._drawing=e.addDrawing({topLeftCell:t.topLeft(),offsetX:5,offsetY:5,width:n,height:i,opacity:1,image:this._workbook.addImage(this._blob)},!0),this._blob=null}undo(){let t=this.range().sheet();t._activeDrawing=null,t.removeDrawing(this._drawing)}redo(){let t=this.range().sheet();t._activeDrawing=this._drawing,t.addDrawing(this._drawing)}},MergeCellCommand:class extends Cl{constructor(t){super(t),this._type=t.value}exec(){this.getState(),this[this._type](),this.range().sheet().triggerChange({recalc:!0})}activate(t){this.range().sheet().activeCell(t)}getState(){this._state=this.range().getState()}undo(){"unmerge"!==this._type&&(this.range().unmerge(),this.activate(this.range().topLeft())),this.range().setState(this._state)}cells(){let t=this.range(),e=t._ref;t.merge(),this.activate(e)}horizontally(){let t=this.range().topRow()._ref;this.range().forEachRow((function(t){t.merge()})),this.activate(t)}vertically(){let t=this.range().leftColumn()._ref;this.range().forEachColumn((function(t){t.merge()})),this.activate(t)}unmerge(){let t=this.range(),e=t._ref.topLeft;t.unmerge(),this.activate(e)}},NameCommand:Rl,OpenCommand:class extends Cl{constructor(t){super(t),this.cannotUndo=!0}exec(){if(null===this.options.file.name.match(/.xlsx$/i))return{reason:"error",type:"openUnsupported"};let t=this.options.workbook;t.fromFile(this.options.file);let e=t.excelImportErrors;e&&e.length&&t._view.openDialog("importError",{errors:e})}},PasteCommand:class extends Cl{constructor(t){super(t),this._clipboard=t.workbook.clipboard(),this._clipboard.parse(),this._event=t.event,this._clipboardContent=this._clipboard._content,this._sheet=this._workbook.activeSheet(),this._range=this._sheet.selection?this._sheet.selection():this._sheet.range(this._clipboard.pasteRef()),this._state=this._range.getState(),this._targetRangeRefs=(this._range._ref instanceof vn?this._range._ref.refs:[this._range._ref]).map((function(t){return t.toRangeRef()}))}exec(){return this.range().sheet().withCultureDecimals(this._exec.bind(this))}undo(){let t=this._sheet,e=this._range;t.trigger("changing",{data:this._state.data,range:e,changeType:xl})||this.setState(this._state)}_exec(){let t=this._clipboard.canPaste();if(!t.canPaste)return t.menuInvoked?{reason:"error",type:"useKeyboard"}:t.pasteOnMerged?{reason:"error",type:"modifyMerged"}:t.pasteOnDisabled?(this._event.preventDefault(),{reason:"error",type:"cannotModifyDisabled"}):{reason:"error"};let e=this._sheet,n=this._range;this._workbook.trigger("paste",{range:n,clipboardContent:this._clipboardContent})||e.trigger("changing",{data:this._clipboardContent.data,range:n,changeType:xl})?this._event.preventDefault():this._processPaste()}_adjustPasteTarget(t,e,n){let i,r,o,s,a,l,c,h=this,u=h._targetRangeRefs,d=h._sheet,p=[],f=function(t,e){let n=0,i=t.topLeft,r=e.topLeft;return i.row>r.row?n=1:i.row<r.row?n=-1:i.col>r.col?n=1:i.col<r.col&&(n=-1),n};for(l=0;l<u.length;l+=1)o=u[l],a=t[l],s=o.topLeft,c={row:a.rows*e+s.row-1,col:a.cols*n+s.col-1},i=new yn(s,c),p.push(i);1===p.length?r=d.range(i):(p.sort(f),r=d.range(new vn(p))),r.select(),h._range=r,h._state=h._range.getState()}_processPaste(){let t,e=this,n=e._sheet,i=e._clipboardContent,r=e._range,o=i.data,s=o.length,a=o[0].length,l=e._targetRangeRefs,c=e._targetRanges(s,a),h=this._clipboard.pasteRef();(h.bottomRight.row>=n._rows._count||h.bottomRight.col>=n._columns._count)&&n.resize(Math.max(h.bottomRight.row+1,n._rows._count),Math.max(h.bottomRight.col+1,n._columns._count)),e._adjustPasteTarget(c,s,a),n.batch((function(){for(t=0;t<l.length;t++)e._populateTargetRange(l[t],s,a,c[t])}),{recalc:!0,ref:e._range._ref}),r._adjustRowHeight()}_populateTargetRange(t,e,n,i){let r,o,s,a=t.topLeft;for(o=0;o<i.rows;o++)for(s=0;s<i.cols;s++)r=this._sheet.range(a.row+e*o,a.col+n*s),r.setState(this._clipboardContent,this._clipboard)}_targetRangeDimensions(t,e,n){let i=t.topLeft,r=t.bottomRight,o=r.row-i.row+1,s=r.col-i.col+1,a=1,l=1;return o%e==0&&s%n==0&&(a=o/e,l=s/n),{rows:a,cols:l}}_targetRanges(t,e){let n,i=this._targetRangeRefs,r=[];for(n=0;n<i.length;n++)r.push(this._targetRangeDimensions(i[n],t,e));return r}},PropertyChangeCommand:Tl,PropertyCleanCommand:class extends Tl{exec(){let t=this.range();t.enable()&&(this.getState(),t.clearFormat())}},ReorderDrawingsCommand:Al,RowHeightCommand:class extends El{getState(){this._state=this.range().sheet().rowHeight(this._target)}setState(t){this.range().sheet().rowHeight(this._target,t)}},SaveAsCommand:class extends Cl{constructor(t){super(t),this.cannotUndo=!0}exec(){let t=this.options.name+this.options.extension;if(".xlsx"===this.options.extension)return this.options.workbook.saveAsExcel({fileName:t});".pdf"===this.options.extension&&this.options.workbook.saveAsPDF(In(this.options.pdf,{workbook:this.options.workbook,fileName:t}))}},SendToBackCommand:class extends Al{_reorder(){return 0}},SortCommand:class extends Cl{undo(){this.range().sheet().setState(this._state)}exec(){let t=this.range(),e=t.sheet(),n=e.activeCell(),i=this.options.sheet?n.topLeft.col:this.options.column||0,r="asc"===this.options.value;this._state=e.getState(),this.options.sheet&&(t=this.expandRange());let o=t.cantSort();if(o)return{reason:"error",type:o.code};t.sort({column:i,ascending:r})}expandRange(){let t=this.range().sheet();return new Ms(t._sheetRef,t)}},TargetValueCommand:El,TextWrapCommand:class extends Tl{constructor(t){t.property="wrap",super(t),this._value=t.value}getState(){let t={};this.range().forEachRow((function(e){let n=e.topLeft().row;t[n]=e.sheet().rowHeight(n)})),this._state=this.range().getState(this._property),this._rowHeight=t}undo(){let t=this.range().sheet(),e=this._rowHeight;this.range().setState(this._state);for(let n in e)t.rowHeight(n,e[n])}},ToolbarCopyCommand:class extends Cl{constructor(t){super(t),this._clipboard=t.workbook.clipboard(),this.cannotUndo=!0}exec(){if(!Ol().copy)return{reason:"error",type:"useKeyboard"};document.execCommand("copy")}},ToolbarCutCommand:class extends Cl{constructor(t){super(t),this._clipboard=t.workbook.clipboard(),this.cannotUndo=!0}exec(){if(!Ol().copy)return{reason:"error",type:"useKeyboard"};document.execCommand("cut")}},ToolbarPasteCommand:class extends Cl{exec(){if(!Ol().paste)return{reason:"error",type:"useKeyboard"};this._workbook._view.clipboard.focus(),document.execCommand("paste")}},UnHideLineCommand:class extends Dl{exec(){let t=this.range().sheet();this._state=t.getAxisState(),"row"===this.axis?t.axisManager().unhideSelectedRows():t.axisManager().unhideSelectedColumns()}}});class Nl extends Hs{constructor(t){super(),this.options=t,this.events=["undo","redo"],this.clear()}push(t){this.stack=this.stack.slice(0,this.currentCommandIndex+1),this.currentCommandIndex=this.stack.push(t)-1}undo(){if(this.canUndo()){let t=this.stack[this.currentCommandIndex--];t.undo(),this.trigger("undo",{command:t})}}redo(){if(this.canRedo()){let t=this.stack[++this.currentCommandIndex];t.redo(),this.trigger("redo",{command:t})}}clear(){this.stack=[],this.currentCommandIndex=-1}canUndo(){return this.currentCommandIndex>=0}canRedo(){return this.currentCommandIndex!==this.stack.length-1}}let Bl=String.fromCharCode,jl={amp:38,lt:60,gt:62,quot:34,apos:39,nbsp:160};function zl(t){let e=[];for(let n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}function $l(t,e){e>65535?(e-=65536,t.push(e>>>10&1023|55296,56320|1023&e)):t.push(e)}let Hl=zl("<![CDATA["),Ul=zl("]]>"),Vl=zl("--\x3e"),Wl=zl("!--"),ql=zl("/>"),Kl=zl("</"),Xl=zl("?>"),Gl=zl("?"),Yl=zl("<"),Jl=zl(">"),Zl=zl(";"),Ql=zl("="),tc=zl("&"),ec=zl('"'),nc=zl("'"),ic=zl("#"),rc=zl("x"),oc=zl("X"),sc={};function ac(t,e){let n=0,i=[],r={is:function(t){let e=i.length,n=t.length;for(;--e>=0&&--n>=0;)if(i[e].$tag!==t[n]&&"*"!==t[n])return!1;return n<0?i[i.length-1]:null},exit:function(){throw sc},stack:i};function o(e){let i=t[n++];240&i^240?224&i^224?192&i^192?e.push(i):$l(e,(31&i)<<6|63&t[n++]):$l(e,(15&i)<<12|(63&t[n++])<<6|63&t[n++]):$l(e,(3&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])}function s(t){throw new Error(t+", at "+n)}function a(e){let i=[];for(;n<t.length&&e(t[n]);)i.push(t[n++]);return i}function l(t){return Bl.apply(0,a(t))}function c(){a(d)}function h(e){let i=n;for(let r=0;r<e.length;++r)if(t[n++]!==e[r])return n=i,!1;return e}function u(t){h(t)||s("Expecting "+t.join(", "))}function d(t){return 9===t||10===t||13===t||32===t}function p(t){return t>=48&&t<=57}function f(t){return t>=48&&t<=57||(t|=32)>=97&&t<=102}function g(t){return 58===t||95===t||(t|=32)>=97&&t<=122}function m(t){return 45===t||p(t)||g(t)}function y(){let e,r;h(Gl)?(_("decl",v(),x()),u(Xl)):h(Wl)?function(){let e=[];for(;n<t.length;){if(h(Vl))return _("comment",Bl.apply(0,e));o(e)}}():(e=v(),r=x(e),i.push(r),h(ql)?_("enter",e,r,!0):(u(Jl),_("enter",e,r),function(e){let i=[];for(;n<t.length;){if(h(Kl))return i.length&&_("text",Bl.apply(0,i));if(h(Hl))for(;n<t.length&&!h(Ul);)o(i);else h(Yl)?(i.length&&_("text",Bl.apply(0,i)),y(),i=[]):h(tc)?w(i):o(i)}s("Unclosed tag "+e)}(e),e!==v()&&s("Bad closing tag"),_("leave",e,r),c(),u(Jl)),i.pop())}function v(){return g(t[n])||s("Expecting XML name"),l(m)}function b(){let e=h(ec)||h(nc);e||s("Expecting string");let i=[];for(;n<t.length;){if(h(e))return Bl.apply(0,i);h(tc)?w(i):o(i)}s("Unfinished string")}function w(t){let e;if(h(ic))e=h(rc)||h(oc)?parseInt(l(f),16):parseInt(l(p),10),isNaN(e)&&s("Bad numeric entity");else{let t=v();e=jl[t],void 0===e&&s("Unknown entity "+t)}$l(t,e),u(Zl)}function x(e){let i={$tag:e};for(;n<t.length;){c();let e=t[n];if(63===e||62===e||47===e)break;i[v()]=(u(Ql),b())}return i}function _(t,n,i,o){let s=e&&e[t];s&&s.call(r,n,i,o)}let S=[];for(o(S),65279!==S[0]&&(n=0);n<t.length;)c(),u(Yl),y(),c()}const lc=function(){try{return ac.apply(this,arguments)}catch(t){if(t!==sc)throw t}};let cc={greaterThanOrEqual:"greaterThanOrEqualTo",lessThanOrEqual:"lessThanOrEqualTo"},hc=null;function uc(t,e){let n=new FileReader;n.onload=function(t){cn.A.loadAsync(t.target.result).then((t=>{!async function(t,e){hc=e.excelImportErrors=[];let n=await async function(t){let e=[],n=null;return await Jc(t,"xl/sharedStrings.xml",{leave:function(){this.is(Sc)&&(e.push(n),n=null)},text:function(t){this.is(_c)&&(null==n&&(n=""),n+=t)}}),e}(t),i=await Zc(t,"_rels/workbook.xml"),o=await async function(t,e){let n=[],i={colorScheme:n},r=Bc(e);t.files[r]&&(await Jc(t,r,{enter:function(t,e){this.is(ah)?n.push(hh("window"===e.val?"FFFFFFFF":"FF000000")):this.is(sh)&&n.push(hh("FF"+e.val))}}),n.length>3&&(o(n,0,1),o(n,2,3)));function o(t,e,n){let i=t[e];t[e]=t[n],t[n]=i}return i}(t,i.byType.theme[0]),s=await async function(t,e){let n={fonts:[],numFmts:{},fills:[],borders:[],namedStyles:[],inlineStyles:[]},i=null,o=null,s=null,a=null;function l(t){let e={borderId:lh(t.borderId),fillId:lh(t.fillId),fontId:lh(t.fontId),numFmtId:lh(t.numFmtId),pivotButton:ch(t.pivotButton),quotePrefix:ch(t.quotePrefix),xfId:lh(t.xfId)};function n(n){null!=t[n]&&(e[n]=ch(t[n]))}return n("applyAlignment"),n("applyBorder"),n("applyFill"),n("applyFont"),n("applyNumberFormat"),n("applyProtection"),e}function c(t,n){if(t.rgb)return hh(t.rgb);if(t.indexed)return oh[lh(t.indexed)];if(t.theme){let i=e.colorScheme[lh(t.theme)];if(!i)return n;let o=(0,r.Ay)(i);if(t.tint){o=o.toHSL();let e=parseFloat(t.tint);o.l=e<0?o.l*(1+e):o.l*(1-e)+(100-100*(1-e))}return o.toCssRgba()}}return await Jc(t,"xl/styles.xml",{enter:function(t,e,r){if(this.is(rh))n.numFmts[e.numFmtId]=e;else if(this.is(eh))n.fonts.push(i={}),r&&(i=null);else if(i)"sz"===t?i.size=parseFloat(e.val):"name"===t?i.name=e.val:"b"===t?i.bold=ch(e.val,!0):"i"===t?i.italic=ch(e.val,!0):"u"===t?i.underline=null==e.val||"single"===e.val:"color"===t&&(i.color=c(e,null));else if(this.is(th))n.fills.push(o={}),r&&(o=null);else if(o)"patternFill"===t?o.type=e.patternType:("fgColor"===t&&"solid"===o.type||"bgColor"===t&&"solid"!==o.type)&&(o.color=c(e,oh[0]));else if(this.is(Qc))n.borders.push(s={diagonalUp:+ch(e.diagonalUp,0),diagonalDown:+ch(e.diagonalDown,0)}),r&&(s=null);else if(s){if(/^(?:left|top|right|bottom|diagonal)$/.test(t)&&(s[t]={style:e.style||"none"},"diagonal"===t&&(s.diagonal.up=s.diagonalUp,s.diagonal.down=s.diagonalDown)),"color"===t){let t=this.stack[this.stack.length-2].$tag;s[t].color=c(e,oh[0])}}else this.is(ih)?(a=l(e),n.namedStyles.push(a),r&&(a=null)):this.is(nh)?(a=l(e),n.inlineStyles.push(a),r&&(a=null)):a&&"alignment"===t&&(/^(?:left|center|right|justify)$/.test(e.horizontal)&&(a.textAlign=e.horizontal),/^(?:top|center|bottom)$/.test(e.vertical)&&(a.verticalAlign=e.vertical),null!=e.wrapText&&(a.wrapText=ch(e.wrapText)),null!=e.indent&&(a.indent=lh(e.indent)))},leave:function(t){this.is(eh)?i=null:this.is(th)?o=null:this.is(Qc)?s=null:"xf"===t&&(a=null)}}),n}(t,o),a=[],l=0;await Jc(t,"xl/workbook.xml",{enter:function(r,o){if(this.is(wc)){let r=o["r:id"],l=i.byId[r],c=o.name,h=o.state;a.push({workbook:e,zip:t,strings:n,styles:s,file:l,options:{state:h,name:c}})}else this.is(kc)&&o.activeTab&&(l=lh(o.activeTab))},text:function(t){let n=this.is(fc);if(n&&!ch(n.function)&&!ch(n.vbProcedure)){let i=n.localSheetId,r=null;null!=i&&(r=a[i].options.name);let o=n.name;"_xlnm._FilterDatabase"!==o&&(r&&(o="'"+r.replace(/\'/g,"\\'")+"'!"+o),Kc(r,null,(function(){e.defineName(o,t,ch(n.hidden))}),"reading user-defined name: "+o))}}});for(let t=0;t<a.length;t++){const e=a[t],n=await jc(e.zip,e.file),{workbook:i}=e;i.options.columnWidth=n.columnWidth||i.options.columnWidth,i.options.rowHeight=n.rowHeight||i.options.rowHeight,e.options={...e.options,rows:Math.max(i.options.rows||0,n.rows),columns:Math.max(i.options.columns||0,n.cols),columnWidth:n.columnWidth,rowHeight:n.rowHeight}}await async function(t,e){for(let n=0;n<t.length;n++){const i=t[n];let r=e.insertSheet(i.options);r&&(r.suspendChanges(!0),await Hc(i.zip,i.file,r,i.strings,i.styles))}}(a,e);let c=e.sheets();(function(t){for(let e=0;e<t.length;e++)t[e].suspendChanges(!1).triggerChange({recalc:!0})})(c),e.activeSheet(c[l])}(t,e)}))},n.readAsArrayBuffer(t)}let dc=["sheetData","row","c"],pc=["cols","col"],fc=["definedNames","definedName"],gc=["sheetData","row","c","f"],mc=["mergeCells","mergeCell"],yc=["sheetViews","sheetView","pane"],vc=["sheetData","row"],bc=["sheetViews","sheetView","selection"],wc=["sheets","sheet"],xc=["sheetData","row","c","is"],_c=["t"],Sc=["si"],Cc=["sheetData","row","c","v"],kc=["bookViews","workbookView"],Ac=["sheetViews","sheetView"],Ec=["hyperlinks","hyperlink"],Tc=["dataValidations","dataValidation"],Mc=["dataValidations","dataValidation","formula1"],Oc=["dataValidations","dataValidation","formula2"],Ic=["x14:dataValidations","x14:dataValidation"],Dc=["x14:dataValidations","x14:dataValidation","xm:sqref"],Fc=["x14:dataValidations","x14:dataValidation","x14:formula1","xm:f"],Pc=["x14:dataValidations","x14:dataValidation","x14:formula2","xm:f"],Rc=["commentList","comment"],Lc=["authors","author"],Nc=["t"];function Bc(t){return/^\//.test(t)?t=t.substr(1):/^xl\//.test(t)||(t="xl/"+t),t}async function jc(t,e){let n,i={rows:0,cols:0};return await Jc(t,Bc(e),{enter:function(t,e){"dimension"===t?(n=Qn.parseReference(e.ref),n.bottomRight&&(i.cols=n.bottomRight.col+1,i.rows=n.bottomRight.row+1)):"sheetFormatPr"===t?(e.defaultColWidth&&(i.columnWidth=zc(parseFloat(e.defaultColWidth))),e.defaultRowHeight&&(i.rowHeight=$c(parseFloat(e.defaultRowHeight)))):this.is(vc)&&e.r?i.rows=Math.max(i.rows,+e.r):this.is(dc)&&e.r&&(n=Qn.parseReference(e.r),i.rows=Math.max(i.rows,n.row+1),i.cols=Math.max(i.cols,n.col+1))}}),i}function zc(t){return 7*((256*t+Math.floor(128/7))/256)}function $c(t){return t*(4/3)}async function Hc(t,e,n,i,r){let o,s,a,l,c,h,u,d,p,f,g,m,y,v,b={},w=n._columns._count,x=null,_=e.replace(/worksheets\//,"worksheets/_rels/"),S=await Zc(t,_),C=[];if(hc=n._workbook.excelImportErrors,e=Bc(e),await Jc(t,e,{enter:function(t,e,i){let h;if(this.is(gc))i&&"shared"===e.t&&null!=e.si&&(l=n.range(b[e.si])._get("formula"));else if(this.is(dc)){a=null,l=null,o=e.r,c=null,null==o&&(o=Qn.parseReference(x),o.col++,o=o.toString()),x=o,s=e.t;let t=e.s;null!=t&&Yc(n,o,r,t)}else if(this.is(mc))n.range(e.ref).merge();else if(this.is(pc)){let t,i=lh(e.min)-1,o=Math.min(w,lh(e.max))-1;if(e.width&&(t=zc(parseFloat(e.width)),0!==t&&n._columns.values.value(i,o,t)),"1"===e.hidden||0===t)for(let t=i;t<=o;t++)n.hideColumn(t);null!=e.style&&Yc(n,new yn(new mn(-1/0,i),new mn(1/0,o)),r,e.style)}else if(this.is(vc)){let t,i=lh(e.r)-1;e.ht&&(t=$c(parseFloat(e.ht)),0!==t&&n._rows.values.value(i,i,t)),"1"!==e.hidden&&0!==t||n.hideRow(i)}else if(this.is(bc)){if(e.activeCell){let t=Qn.parseReference(e.activeCell);n.select(t,!0)}}else if(this.is(yc))e.state&&e.state.indexOf("frozen")>-1&&(e.xSplit&&n.frozenColumns(lh(e.xSplit)),e.ySplit&&n.frozenRows(lh(e.ySplit)));else if(this.is(Ac))n.showGridLines(ch(e.showGridLines,!0));else if(this.is(Ec)){let t=e["r:id"],i=S.byId[t];i&&n.range(e.ref).link(i)}else this.is(["autoFilter"])?(p=e.ref,i&&k()):p&&(this.is(["filterColumn"])?f=parseInt(e.colId,10):this.is(["customFilters"])?(g=ch(e.and)?"and":"or",m=[]):this.is(["customFilter"])?(h=function(t,e){let n={equal:"eq",notEqual:"ne",greaterThan:"gt",greaterThanOrEqual:"gte",lessThan:"lt",lessThanOrEqual:"lte"}[t];if(e=qc(e),n&&"number"==typeof e)return{operator:n,value:e};if(("notEqual"===t||!t)&&"string"==typeof e)return{operator:t?"doesnotmatch":"matches",value:e}}(e.operator,e.val),h&&m.push({operator:h.operator,value:h.value})):this.is(["dynamicFilter"])?C.push({column:f,filter:new ba({type:Wc(e.type)})}):this.is(["top10"])?C.push({column:f,filter:new va({value:qc(e.val),type:(u=ch(e.percent),d=ch(e.top),u&&d?"topPercent":d?"topNumber":u?"bottomPercent":"bottomNumber")})}):this.is(["filters"])?(y=ch(e.blank),v=[]):this.is(["filter"])&&v.push(qc(e.val)));var u,d},leave:function(t,e){if(this.is(gc))l||"shared"!==e.t||null==e.si||(l=n.range(b[e.si])._get("formula"));else if(this.is(dc)){if(null!=l){Kc(n,c||o,(function(){n.range(c||o).formula(l,h)}),"parsing formula")&&n.range(c||o).value(l).background("#ffaaaa")}else if(null!=a){let t=n.range(o);t._get("formula")||(s&&"n"!==s?"s"===s?a=i[lh(a)]:"b"===s?a="1"===a:"d"===s&&(a=zn().parseDate(a)):a=parseFloat(a),null!=a&&t.value(a))}}else this.is(Tc)||this.is(Ic)?function(){let t=Qn.parseSqref(e.sqref),i=e.type.toLowerCase(),r=e.operator;/^(?:whole|decimal)$/.test(i)?i="number":"list"===i&&(r="list"),!r&&/^(?:number|date)$/.test(i)&&(r="between"),t.forEach((function(t){Kc(n,t,(function(){n.range(t).validation({type:ch(e.showErrorMessage,!0)?"reject":"warning",from:u,to:d,dataType:i,comparerType:cc[r]||r,allowNulls:ch(e.allowBlank),showButton:ch(e.showDropDown)||"date"===i||"list"===i,messageTemplate:e.error,titleTemplate:e.errorTitle})}),"parsing validation")}))}():"cols"===t?n._columns._refresh():"sheetData"===t?n._rows._refresh():"autoFilter"===t?k():p&&("customFilters"===t?C.push({column:f,filter:new ya({logic:g,criteria:m})}):"filters"===t&&C.push({column:f,filter:new ma({values:v,blanks:y})}))},text:function(t){let e;this.is(Cc)||this.is(xc)?a=t:(e=this.is(gc))?(l=t,h="array"===e.t,h?c=e.ref:"shared"===e.t&&(b[e.si]=o)):this.is(Mc)||this.is(Fc)?u=t:this.is(Oc)||this.is(Pc)?d=t:this.is(Dc)&&(this.stack[this.stack.length-2].sqref=t)}}),S.byType.comments){let i=uh(e,S.byType.comments[0]);await async function(t,e,n){let i,r,o=[];await Jc(t,e,{enter:function(t,e){this.is(Rc)?r={author:o[e.authorId],ref:e.ref,text:""}:this.is(Lc)&&(i="")},leave:function(){this.is(Rc)?n.range(r.ref).comment(r.text):this.is(Lc)&&o.push(i)},text:function(t){this.is(Nc)?r.text+=t:this.is(Lc)&&(i+=t)}})}(t,i,n)}if(S.byType.drawing){let i=uh(e,S.byType.drawing[0]);await async function(t,e,n){let i,r,o,s,a=["xdr:twoCellAnchor"],l=["xdr:ext"],c=["xdr:oneCellAnchor"],h=["xdr:from"],u=["xdr:to"],d=["xdr:row"],p=["xdr:col"],f=["xdr:rowOff"],g=["xdr:colOff"],m=["xdr:blipFill","a:blip"],y=e.replace(/drawings\//,"drawings/_rels/"),v=await Zc(t,y);if(v.byType.image)for(const i of Object.keys(v.byId)){let r=uh(e,v.byId[i]),o=Uc(r);if(o){let e=await t.files[r].async("arrayBuffer"),s=Vc(r),a=s&&!ln.T.edge?new window.File([e],s,{type:o}):new window.Blob([e],{type:o});v.byId[i]=n._workbook.addImage(a)}}await Jc(t,e,{enter:function(t,e){if(this.is(a)||this.is(c))i={};else if(this.is(h)||this.is(u))r={};else if(this.is(m)){let t=e["r:embed"];i.image=v.byId[t]}else this.is(l)&&(o=dh(parseFloat(e.cx)),s=dh(parseFloat(e.cy)))},leave:function(){if(this.is(h))i.topLeftCell=new mn(r.row,r.col),i.offsetX=dh(r.colOffset),i.offsetY=dh(r.rowOffset);else if(this.is(u))i.brCell=new mn(r.row,r.col),i.brX=dh(r.colOffset),i.brY=dh(r.rowOffset);else if(this.is(a)&&i.image){let t=n._columns.sum(0,i.topLeftCell.col-1)+i.offsetX,e=n._rows.sum(0,i.topLeftCell.row-1)+i.offsetY,r=n._columns.sum(0,i.brCell.col-1)+i.brX,a=n._rows.sum(0,i.brCell.row-1)+i.brY;n.addDrawing({topLeftCell:i.topLeftCell,offsetX:i.offsetX,offsetY:i.offsetY,width:null!=o?o:r-t,height:null!=s?s:a-e,image:i.image,opacity:1})}else this.is(c)&&i.image&&n.addDrawing({topLeftCell:i.topLeftCell,offsetX:i.offsetX,offsetY:i.offsetY,width:o,height:s,image:i.image,opacity:1})},text:function(t){this.is(d)?r.row=parseFloat(t):this.is(p)?r.col=parseFloat(t):this.is(f)?r.rowOffset=parseFloat(t):this.is(g)&&(r.colOffset=parseFloat(t))}})}(t,i,n)}function k(){n.range(p).filter(C),p=null}}function Uc(t){let e=/\.([^.]+)$/.exec(t);if(e&&e[1])return{jpg:"image/jpeg",jpeg:"image/jpeg",png:"image/png",gif:"image/gif",wmf:"image/wmf"}[e[1].toLowerCase()]}function Vc(t){let e=/[^/]+$/.exec(t);return e&&e[0]}function Wc(t){return{Q1:"quarter1",Q2:"quarter2",Q3:"quarter3",Q4:"quarter4",M1:"january",M2:"february",M3:"march",M4:"april",M5:"may",M6:"june",M7:"july",M8:"august",M9:"september",M10:"october",M11:"november",M12:"december"}[t.toUpperCase()]||t}function qc(t){let e=parseFloat(t);return isNaN(e)||e!==t?t:e}function Kc(t,e,n,i){try{return n(),!1}catch(n){let r={context:i,error:String(n)};return t&&t.name?r.sheet=t.name():t&&(r.sheet=t),e&&(r.location=String(e)),hc.push(r),!0}}let Xc={none:0,thin:1,medium:2,dashed:1,dotted:1,thick:3,double:3,hair:1,mediumDashed:2,dashDot:1,mediumDashDot:2,dashDotDot:1,mediumDashDotDot:2,slantDashDot:1},Gc={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"mm-dd-yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@"};function Yc(t,e,n,i){let r,o,s=t.range(e),a=n.inlineStyles[i];var l;function c(t,e){let n=a[t];if(null!=n&&!n)return!1;if(o=a[e],r&&null==o){if(n=r[t],null!=n&&!n)return!1;o=r[e]}return null!=o}a.xfId&&(r=n.namedStyles[a.xfId]),c("applyBorder","borderId")&&function(t){function e(e,n){let i=t[e];if(!i)return;let r=Xc[i.style];if(!r)return;let o=i.color;null==o&&(o="#000");let a={size:r,color:o};"diagonal"===e&&(a.type=i.up<<1|i.down),s._property(n,a)}e("left","borderLeft"),e("top","borderTop"),e("right","borderRight"),e("bottom","borderBottom"),e("diagonal","dBorders")}(n.borders[o]),c("applyFont","fontId")&&function(t){s.fontFamily(t.name),t.size&&s._property("fontSize",4*t.size/3);t.bold&&s.bold(!0);t.italic&&s.italic(!0);t.underline&&s.underline(!0);t.color&&s.color(t.color)}(n.fonts[o]),c("applyAlignment","textAlign")&&s.textAlign(o),c("applyAlignment","verticalAlign")&&s.verticalAlign(o),c("applyAlignment","indent")&&s.indent(o),c("applyAlignment","wrapText")&&s._property("wrap",o),c("applyFill","fillId")&&"solid"===(l=n.fills[o]).type&&s.background(l.color),c("applyNumberFormat","numFmtId")&&function(t){let e="string"==typeof t?t:t.formatCode;null==e||/^general$/i.test(e)||(e=e.replace(/^\[\$-[0-9]+\]/,""),s.format(e))}(n.numFmts[o]||Gc[o])}async function Jc(t,e,n){let i=t.files[e];i&&await lc(await i.async("uint8array"),n)}async function Zc(t,e){let n={byId:{},byType:{theme:[]}};return await Jc(t,Bc(e)+".rels",{enter:function(t,e){if("Relationship"===t){n.byId[e.Id]=e.Target;let t=e.Type.match(/\w+$/)[0],i=n.byType[t]||[];i.push(e.Target),n.byType[t]=i}}}),n}let Qc=["borders","border"],th=["fills","fill"],eh=["fonts","font"],nh=["cellXfs","xf"],ih=["cellStyleXfs","xf"],rh=["numFmts","numFmt"],oh=[hh("FF000000"),hh("FFFFFFFF"),hh("FFFF0000"),hh("FF00FF00"),hh("FF0000FF"),hh("FFFFFF00"),hh("FFFF00FF"),hh("FF00FFFF"),hh("FF000000"),hh("FFFFFFFF"),hh("FFFF0000"),hh("FF00FF00"),hh("FF0000FF"),hh("FFFFFF00"),hh("FFFF00FF"),hh("FF00FFFF"),hh("FF800000"),hh("FF008000"),hh("FF000080"),hh("FF808000"),hh("FF800080"),hh("FF008080"),hh("FFC0C0C0"),hh("FF808080"),hh("FF9999FF"),hh("FF993366"),hh("FFFFFFCC"),hh("FFCCFFFF"),hh("FF660066"),hh("FFFF8080"),hh("FF0066CC"),hh("FFCCCCFF"),hh("FF000080"),hh("FFFF00FF"),hh("FFFFFF00"),hh("FF00FFFF"),hh("FF800080"),hh("FF800000"),hh("FF008080"),hh("FF0000FF"),hh("FF00CCFF"),hh("FFCCFFFF"),hh("FFCCFFCC"),hh("FFFFFF99"),hh("FF99CCFF"),hh("FFFF99CC"),hh("FFCC99FF"),hh("FFFFCC99"),hh("FF3366FF"),hh("FF33CCCC"),hh("FF99CC00"),hh("FFFFCC00"),hh("FFFF9900"),hh("FFFF6600"),hh("FF666699"),hh("FF969696"),hh("FF003366"),hh("FF339966"),hh("FF003300"),hh("FF333300"),hh("FF993300"),hh("FF993366"),hh("FF333399"),hh("FF333333"),hh("FF000000"),hh("FFFFFFFF")];let sh=["a:clrScheme","*","a:srgbClr"],ah=["a:clrScheme","*","a:sysClr"];function lh(t){return null==t?null:parseInt(t,10)}function ch(t,e){return null==t?e:"true"===t||!0===t||1===t||"1"===t}function hh(t){let e=/^([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i.exec(t);return"rgba("+parseInt(e[2],16)+", "+parseInt(e[3],16)+", "+parseInt(e[4],16)+", "+parseInt(e[1],16)/255+")"}function uh(t,e){for(t=t.split(/\/+/),e=e.split(/\/+/),t.pop();e.length;){let n=e.shift();if(""===n)t=[];else{if("."===n)continue;".."===n?t.pop():t.push(n)}}return t.join("/")}function dh(t){return t/9525}const ph=["cut","copy","paste","changing","change","contextmenu","excelImport","excelExport","insertSheet","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat","dataBinding","dataBound","progress"];function fh(t,e){let n=new XMLHttpRequest;n.onload=function(){e(n.response,n.getResponseHeader("Content-Type"))},n.onerror=function(){e(null)},n.open("GET",t),n.responseType="arraybuffer",n.send()}class gh extends Hs{constructor(t,e){super(),this.events=ph,this.options=t,this._view=e,this._sheets=[],this._images={},this._imgID=0,this._sheetsSearchCache={},this._sheet=this.insertSheet({rows:this.options.rows,columns:this.options.columns,rowHeight:this.options.rowHeight,columnWidth:this.options.columnWidth,headerHeight:this.options.headerHeight,headerWidth:this.options.headerWidth,dataSource:this.options.dataSource}),this.undoRedoStack=new Nl,this.undoRedoStack.bind(["undo","redo"],this._onUndoRedo.bind(this)),this._context=new To(this),this._validationContext=new Mo(this),this._names=Object.create(null),this.fromJSON(this.options)}clipboard(){return this._clipboard||(this._clipboard=new dl(this)),this._clipboard}destroy(){this.unbind(),this._clipboard&&this._clipboard.destroy()}_sheetChanging(t){this.trigger("changing",t)&&t.preventDefault()}_sheetChange(t){this.trigger("change",t)}_sheetInsertRow(t){this.trigger("insertRow",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetInsertColumn(t){this.trigger("insertColumn",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetDeleteRow(t){this.trigger("deleteRow",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetDeleteColumn(t){this.trigger("deleteColumn",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetHideRow(t){this.trigger("hideRow",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetHideColumn(t){this.trigger("hideColumn",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetUnhideRow(t){this.trigger("unhideRow",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetUnhideColumn(t){this.trigger("unhideColumn",{sheet:t.sender,index:t.index})&&t.preventDefault()}_sheetSelect(t){this.trigger("select",t)}_sheetDataBinding(t){this.trigger("dataBinding",{sheet:t.sender})&&t.preventDefault()}_sheetDataBound(t){this.trigger("dataBound",{sheet:t.sender})}_sheetProgress(t){let e=this;setTimeout((function(){e.trigger("progress",{toggle:t.toggle})}))}_sheetCommandRequest(t){this.trigger("commandRequest",t)}_inputForRef(t){let e=this;return e._sheet.withCultureDecimals((function(){return new Ms(t,e._sheet).input()}))}_onUndoRedo(t){t.command.range().select()}execute(t){let e=Object.assign({},{workbook:this},t.options),n=new Ll[t.command](e),i=this.activeSheet();e.origin&&n.origin(e.origin),e.operatingRange?n.range(e.operatingRange):n.range(i.selection()),e.editRange&&(n._editRange=e.editRange);let r=n.exec();return r&&"error"===r.reason||n.cannotUndo||this.undoRedoStack.push(n),this.cleanupImages(),r}resetFormulas(){this._sheets.forEach((function(t){t.resetFormulas()}))}resetValidations(){this._sheets.forEach((function(t){t.resetValidations()}))}refresh(t){t.recalc&&(this.resetFormulas(),this.resetValidations(),this._sheet.recalc(this._context),this._sheet.revalidate(this._validationContext))}activeSheet(t){if(void 0===t)return this._sheet;this.sheetByName(t.name())&&(this._sheet=t,t.triggerChange(Sn))}moveSheetToIndex(t,e){let n=this.sheetIndex(t),i=this._sheets;-1!==n&&(this._sheetsSearchCache={},i.splice(e,0,i.splice(n,1)[0]),this.trigger("change",{sheetSelection:!0}))}insertSheet(t){let e,n=this,i="number"==typeof(t=t||{}).index?t.index:n._sheets.length,r=n._sheets;const o=this.options.messages;let s=function(t){t=t||1;let e=o.workbook.defaultSheetName+t;return n.sheetByName(e)?s(t+1):e};if(t.name&&n.sheetByName(t.name))return;this._sheetsSearchCache={},e=t.name||s();let a=new Aa(t.rows||this.options.rows,t.columns||this.options.columns,t.rowHeight||this.options.rowHeight,t.columnWidth||this.options.columnWidth,t.headerHeight||this.options.headerHeight,t.headerWidth||this.options.headerWidth,t.defaultCellStyle||this.options.defaultCellStyle);return a._workbook=this,a._name(e),a._state(t.state),this._bindSheetEvents(a),r.splice(i,0,a),t.data&&a.fromJSON(t.data),t.dataSource&&a.setDataSource(t.dataSource),this.trigger("change",{sheetSelection:!0}),a}_bindSheetEvents(t){t.bind("changing",this._sheetChanging.bind(this)),t.bind("change",this._sheetChange.bind(this)),t.bind("insertRow",this._sheetInsertRow.bind(this)),t.bind("insertColumn",this._sheetInsertColumn.bind(this)),t.bind("deleteRow",this._sheetDeleteRow.bind(this)),t.bind("deleteColumn",this._sheetDeleteColumn.bind(this)),t.bind("hideRow",this._sheetHideRow.bind(this)),t.bind("hideColumn",this._sheetHideColumn.bind(this)),t.bind("unhideRow",this._sheetUnhideRow.bind(this)),t.bind("unhideColumn",this._sheetUnhideColumn.bind(this)),t.bind("select",this._sheetSelect.bind(this)),t.bind("commandRequest",this._sheetCommandRequest.bind(this)),t.bind("dataBinding",this._sheetDataBinding.bind(this)),t.bind("dataBound",this._sheetDataBound.bind(this)),t.bind("progress",this._sheetProgress.bind(this))}sheets(){return this._sheets.slice()}sheetByName(t){return this._sheets[this.sheetIndex(t)]}sheetByIndex(t){return this._sheets[t]}sheetIndex(t){let e=this._sheets,n=("string"==typeof t?t:t.name()).toLowerCase(),i=this._sheetsSearchCache[n];if(i>=0)return i;for(i=0;i<e.length;i++){let t=e[i].name().toLowerCase();if(this._sheetsSearchCache[t]=i,t===n)return i}return-1}renameSheet(t,e){let n=t.name().toLowerCase();if(e&&n!==e.toLowerCase()&&!this.sheetByName(e)&&(t=this.sheetByName(n))&&(this._sheetsSearchCache={},!this.trigger("renameSheet",{sheet:t,newSheetName:e})))return this._sheets.forEach((function(t){t._forFormulas((function(t){t.renameSheet(n,e)}))})),this.forEachName(function(t,i){t.nameref.renameSheet(n,e)&&(this.undefineName(i),t.name=t.nameref.print(),this.nameDefinition(t.name,t)),(t.value instanceof pn||t.value instanceof Qn.runtime.Formula)&&t.value.renameSheet(n,e)}.bind(this)),t._name(e),this.trigger("change",{sheetSelection:!0}),t}removeSheet(t){let e=this,n=e._sheets,i=t.name(),r=e.sheetIndex(t);if(1!==n.length&&!this.trigger("removeSheet",{sheet:t})&&(this._sheetsSearchCache={},r>-1))if(t.unbind(),n.splice(r,1),e.activeSheet().name()===i){let t=n[r===n.length?r-1:r];e.activeSheet(t)}else this.trigger("change",{recalc:!0,sheetSelection:!0})}_clearSheets(){for(let t=0;t<this._sheets.length;t++)this._sheets[t]._activeDrawing=[],this._sheets[t]._drawings=[],this._sheets[t].unbind();this._sheets=[],this._sheetsSearchCache={},this._names={},this._images={},this._imgID=0}_loadImages(){let t=this,e=Object.keys(t._images),n=e.length;function i(){--n<=0&&t.activeSheet().triggerChange({layout:!0})}n?e.forEach((function(e){let n=t._images[e];n.blob||fh(n.url,(function(t,e){null!=t&&(n.blob=new Blob([t],{type:e}),delete n.url),i()}))})):i()}fromJSON(t){if(t.sheets){this._clearSheets(),t.images&&(this._imgID=0,this._images={},Object.keys(t.images).forEach((function(e){if(!isNaN(e)){let t=parseFloat(e);isFinite(t)&&(this._imgID=Math.max(this._imgID,t))}this._images[e]={url:t.images[e]}}),this),this._loadImages());for(let e=0;e<t.sheets.length;e++){let n=t.sheets[e],i=mh(n,this.options),r=this.insertSheet({rows:i.rowCount,columns:i.columnCount,rowHeight:i.rowHeight,columnWidth:i.columnWidth,headerHeight:i.headerHeight,headerWidth:i.headerWidth,data:n});n.dataSource&&r.setDataSource(n.dataSource)}}t.activeSheet?this.activeSheet(this.sheetByName(t.activeSheet)):this.activeSheet(this._sheets[0]),t.names&&t.names.forEach((function(t){this.defineName(t.name,t.value,t.hidden)}),this)}toJSON(){this.resetFormulas(),this.resetValidations();let t=Object.keys(this._names).map((function(t){let e=this._names[t],n=e.value;return n=n instanceof pn||n instanceof Qn.runtime.Formula?n.print(0,0,!0):n instanceof Bn?String(n):JSON.stringify(n),{value:n,hidden:e.hidden,name:e.name,sheet:e.nameref.sheet,localName:e.nameref.name}}),this);return{activeSheet:this.activeSheet().name(),sheets:this._sheets.map((function(t){return t.recalc(this._context),t.revalidate(this._validationContext),t.toJSON()}),this),names:t,images:{},columnWidth:this.options.columnWidth,rowHeight:this.options.rowHeight}}saveJSON(){let t=this,e=t.toJSON(),n=Object.keys(t._images).filter((function(e){return 1===t.usesImage(e)})),i=n.length;const r=[];return i&&n.forEach((function(n){let i=t._images[n];if(i.blob){const t=new Promise((t=>{let r=new FileReader;r.onload=function(){e.images[n]=r.result,t()},r.readAsDataURL(i.blob)}));r.push(t)}else e.images[n]=i.url})),Promise.all(r).then((()=>e))}fromFile(t){t&&!this.trigger("excelImport",{file:t})&&(this._clearSheets(),uc(t,this))}saveAsExcel(t){let e=this;t=In({},e.options.excel,t);let n=e.toJSON();if(e.trigger("excelExport",{workbook:n}))return;let i=Object.keys(e._images).filter((function(t){return 1===e.usesImage(t)})),r=i.length,o=r?{}:null;const s=[];return r?(i.forEach((function(t){let n=e._images[t];if(n.blob){const e=new Promise((e=>{let i=new FileReader;i.onload=function(){o[t]={type:n.blob.type,name:n.blob.name,data:i.result},r--,e()},i.readAsArrayBuffer(n.blob)}));s.push(e)}else{const e=new Promise((e=>{fh(n.url,(function(n,i){o[t]={type:i,data:n},r--,e()}))}));s.push(e)}})),Promise.all(s).then((()=>a()))):a();function a(){if(--r<=0){n.images=o;let e=new t.Workbook(n);const i=t.forceProxy?e.toDataURL():e.toBlob();return t.saveAs?i.then((e=>{t.saveAs(e,n.fileName||t.fileName,{proxyURL:t.proxyURL,forceProxy:t.forceProxy})})):i}return Promise.resolve()}}draw(t,e){"function"!=typeof t||e||(e=t,t={});let n=[],i=this._sheets;!function r(o){if(o<i.length)i[o].draw(wn,t,(function(t){n.push(t),r(o+1)}));else{let t=n[0];for(o=1;o<n.length;++o)t.children=t.children.concat(n[o].children);e(t)}}(0)}nameForRef(t,e){void 0===e&&(e=t.sheet),e=e.toLowerCase();let n=String(t);for(let t in this._names){let i=this._names[t],r=i.value;if(r instanceof pn&&(!r.sheet||r.sheet&&e===r.sheet.toLowerCase())&&String(r)===n)return i}return{name:n}}defineName(t,e,n){let i=Qn.parseNameDefinition(t,e);t=i.name.print(),this._names[t.toLowerCase()]={value:i.value,hidden:n,name:t,nameref:i.name}}undefineName(t){delete this._names[t.toLowerCase()]}nameValue(t){return(t=t.toLowerCase())in this._names?this._names[t].value:null}nameDefinition(t,e){return t=t.toLowerCase(),arguments.length>1&&(void 0===e?delete this._names[t]:this._names[t]=e),this._names[t]}forEachName(t){Object.keys(this._names).forEach((function(e){t(this._names[e],e)}),this)}adjustNames(t,e,n,i){t=t.toLowerCase(),Object.keys(this._names).forEach((function(r){let o=this._names[r],s=o.value;s instanceof pn&&s.sheet.toLowerCase()===t?o.value=s.adjust(null,null,null,null,e,n,i):s instanceof Qn.runtime.Formula&&s.adjust(t,e?"row":"col",n,i)}),this)}addImage(t){let e=String(++this._imgID);return this._images[e]="string"==typeof t?{url:t}:{blob:t},e}imageUrl(t){let e=this._images[t],n=e.url;return n||(n=e.url=window.URL.createObjectURL(e.blob)),n}cleanupImages(){Object.keys(this._images).forEach((function(t){if(!this.usesImage(t)){let e=this._images[t].url;e&&window.URL.revokeObjectURL(e),delete this._images[t]}}),this)}usesImage(t){let e,n=this._sheets;for(e=n.length;--e>=0;)if(n[e].usesImage(t))return 1;let i=this.undoRedoStack.stack;for(e=i.length;--e>=0;)if(i[e].usesImage(t))return 2;return!1}}function mh(t,e){function n(t,e,n){return void 0!==t?t:void 0!==e?e:n}let i=n(t.rowCount,e.rows,200),r=n(t.columnCount,e.columns,50),o=n(t.rowHeight,e.rowHeight,20),s=n(t.columnWidth,e.columnWidth,64),a=n(t.headerHeight,e.headerHeight,20),l=n(t.headerWidth,e.headerWidth,32);if(void 0!==t.rows)for(let e=0;e<t.rows.length;++e){let o=t.rows[e],s=n(o.index,e);if(s>=i&&(i=s+1),o.cells)for(let t=0;t<o.cells.length;++t){let e=n(o.cells[t].index,t);e>=r&&(r=e+1)}}return{rowCount:i,columnCount:r,rowHeight:o,columnWidth:s,headerHeight:a,headerWidth:l}}const yh=["cut","copy","paste","pdfExport","excelExport","excelImport","changing","change","render","removeSheet","selectSheet","renameSheet","insertRow","insertColumn","deleteRow","insertSheet","deleteColumn","hideRow","hideColumn","unhideRow","unhideColumn","select","changeFormat","dataBinding","dataBound"];class vh extends Us{constructor(t,e){super(t,In({},_n,e)),this.events=yh,this.bind(this.events,this.options),zn({locale:this.options.locale,...this.options.intl}),$n().calendar.months.format.wide.forEach((function(t,e){ba.prototype[t.toLowerCase()]=function(t){return t instanceof Date&&t.getMonth()===e}})),this._view=new ul(this.element,{messages:this.options.messages.view,toolbar:this.options.toolbar,sheetsbar:this.options.sheetsbar,formulaBarInputRef:this.options.formulaBarInputRef,formulaCellInputRef:this.options.formulaCellInputRef,nameBoxRef:this.options.nameBoxRef}),this._workbook=new gh(this.options,this._view),this._controller=new es(this._view,this._workbook),this._autoRefresh=!0,this._bindWorkbookEvents(),this._view.workbook(this._workbook),this._view.enableClipboard(!1),this.refresh(),this._view.enableClipboard(!0),this._resizeHandler=this.resize.bind(this),window.addEventListener("resize",this._resizeHandler),this._keyDownHandler=this._keyDown.bind(this),this.element.addEventListener("keydown",this._keyDownHandler)}get view(){return this._view}get workbook(){return this._workbook}_keyDown(t){let e=t.keyCode,n=t.ctrlKey||t.metaKey;if(this.trigger("keydown",t),e===Cn.F11&&t.shiftKey)return this._view.sheetsbar._onAddSelect(),void t.preventDefault();if(t.altKey&&e===Cn.PAGEDOWN)this._view.sheetsbar.trigger("select",{name:this._view.sheetsbar._sheets[this._view.sheetsbar._selectedIndex+1].name(),isAddButton:!1});else if(t.altKey&&e===Cn.PAGEUP)this._view.sheetsbar.trigger("select",{name:this._view.sheetsbar._sheets[this._view.sheetsbar._selectedIndex-1].name(),isAddButton:!1});else{if(t.altKey&&e===Cn.DELETE){let e=function(t){t.sender.isConfirmed()&&this._view.sheetsbar.trigger("remove",{name:this.activeSheet()._name(),confirmation:!0})}.bind(this);return this._view.sheetsbar._openDialog("confirmation",{close:e}),void t.preventDefault()}if(t.altKey&&e===Cn.R)return this._view.sheetsbar._createEditor(),void t.preventDefault();if(n&&e===Cn.B)this._handleTypographicalEmphasis("bold");else if(n&&e===Cn.I)this._handleTypographicalEmphasis("italic");else if(n&&e===Cn.U)this._handleTypographicalEmphasis("underline");else{if(t.altKey&&e===Cn.H)return this._view.tabstrip.select(0),void t.preventDefault();if(t.altKey&&e===Cn.N)return this._view.tabstrip.select(1),void t.preventDefault();if(t.altKey&&e===Cn.A)return this._view.tabstrip.select(2),void t.preventDefault()}}}_handleTypographicalEmphasis(t){const e=this.activeSheet();e&&this.executeCommand({command:"PropertyChangeCommand",options:{property:t,value:!e.range(e.activeCell())[t]()}})}_resize(){this.refresh({layout:!0})}_workbookChanging(t){this.trigger("changing",t)&&t.preventDefault()}_workbookChange(t){if(this._autoRefresh&&this.refresh(t),t.recalc&&t.ref){let e=t.range||new Ms(t.ref,this.activeSheet());this.trigger("change",{range:e})}}_workbookCut(t){this.trigger("cut",t)}_workbookCopy(t){this.trigger("copy",t)}_workbookPaste(t){this.trigger("paste",t)}activeSheet(t){return this._workbook.activeSheet(t)}moveSheetToIndex(t,e){return this._workbook.moveSheetToIndex(t,e)}insertSheet(t){return this._workbook.insertSheet(t)}sheets(){return this._workbook.sheets()}removeSheet(t){return this._workbook.removeSheet(t)}sheetByName(t){return this._workbook.sheetByName(t)}sheetIndex(t){return this._workbook.sheetIndex(t)}sheetByIndex(t){return this._workbook.sheetByIndex(t)}renameSheet(t,e){return this._workbook.renameSheet(t,e)}executeCommand(t){return this._controller.executeCommand(t)}refresh(t){return t||(t=Sn),t.editorClose||(this._view.sheet(this._workbook.activeSheet()),this._controller.sheet(this._workbook.activeSheet()),this._workbook.refresh(t)),t.editorChange||(this._view.refresh(t),this._controller.refresh(),this._view.render(t),this.trigger("render")),this}openDialog(t,e){return this._view.openDialog(t,e)}autoRefresh(t){return void 0!==t?(this._autoRefresh=t,!0===t&&this.refresh(),this):this._autoRefresh}toJSON(){return this._workbook.toJSON()}fromJSON(t){t.sheets?(this._workbook.destroy(),this._workbook=new gh(In({},this.options,t)),this._bindWorkbookEvents(),this._view.workbook(this._workbook),this._controller.workbook(this._workbook),this.activeSheet(this.activeSheet())):this.refresh()}saveJSON(){return this._workbook.saveJSON()}fromFile(t){return this._workbook.fromFile(t)}saveAsPDF(t){this._workbook.saveAsPDF(In({},this.options.pdf,t,{workbook:this._workbook}))}saveAsExcel(t){return this._workbook.saveAsExcel(t)}draw(t,e){this._workbook.draw(t,e)}_workbookExcelExport(t){this.trigger("excelExport",t)&&t.preventDefault()}_workbookExcelImport(t){this.trigger("excelImport",t)&&t.preventDefault()}_workbookPdfExport(t){this.trigger("pdfExport",t)&&t.preventDefault()}_workbookInsertSheet(t){this.trigger("insertSheet",t)&&t.preventDefault()}_workbookRemoveSheet(t){this.trigger("removeSheet",t)&&t.preventDefault()}_workbookSelectSheet(t){this.trigger("selectSheet",t)&&t.preventDefault()}_workbookRenameSheet(t){this.trigger("renameSheet",t)&&t.preventDefault()}_workbookInsertRow(t){this.trigger("insertRow",t)&&t.preventDefault()}_workbookInsertColumn(t){this.trigger("insertColumn",t)&&t.preventDefault()}_workbookDeleteRow(t){this.trigger("deleteRow",t)&&t.preventDefault()}_workbookDeleteColumn(t){this.trigger("deleteColumn",t)&&t.preventDefault()}_workbookHideRow(t){this.trigger("hideRow",t)&&t.preventDefault()}_workbookHideColumn(t){this.trigger("hideColumn",t)&&t.preventDefault()}_workbookUnhideRow(t){this.trigger("unhideRow",t)&&t.preventDefault()}_workbookUnhideColumn(t){this.trigger("unhideColumn",t)&&t.preventDefault()}_workbookSelect(t){this.trigger("select",t)}_workbookChangeFormat(t){this.trigger("changeFormat",t)}_workbookDataBinding(t){this.trigger("dataBinding",t)&&t.preventDefault()}_workbookDataBound(t){this.trigger("dataBound",t)}_workbookProgress(){}_onContextMenu(t){this.trigger("contextmenu",t)}_bindWorkbookEvents(){this._workbook.bind("cut",this._workbookCut.bind(this)),this._workbook.bind("copy",this._workbookCopy.bind(this)),this._workbook.bind("paste",this._workbookPaste.bind(this)),this._workbook.bind("changing",this._workbookChanging.bind(this)),this._workbook.bind("change",this._workbookChange.bind(this)),this._workbook.bind("excelExport",this._workbookExcelExport.bind(this)),this._workbook.bind("excelImport",this._workbookExcelImport.bind(this)),this._workbook.bind("pdfExport",this._workbookPdfExport.bind(this)),this._workbook.bind("insertSheet",this._workbookInsertSheet.bind(this)),this._workbook.bind("removeSheet",this._workbookRemoveSheet.bind(this)),this._workbook.bind("selectSheet",this._workbookSelectSheet.bind(this)),this._workbook.bind("renameSheet",this._workbookRenameSheet.bind(this)),this._workbook.bind("insertRow",this._workbookInsertRow.bind(this)),this._workbook.bind("insertColumn",this._workbookInsertColumn.bind(this)),this._workbook.bind("deleteRow",this._workbookDeleteRow.bind(this)),this._workbook.bind("deleteColumn",this._workbookDeleteColumn.bind(this)),this._workbook.bind("hideRow",this._workbookHideRow.bind(this)),this._workbook.bind("hideColumn",this._workbookHideColumn.bind(this)),this._workbook.bind("unhideRow",this._workbookUnhideRow.bind(this)),this._workbook.bind("unhideColumn",this._workbookUnhideColumn.bind(this)),this._workbook.bind("select",this._workbookSelect.bind(this)),this._workbook.bind("changeFormat",this._workbookChangeFormat.bind(this)),this._workbook.bind("dataBinding",this._workbookDataBinding.bind(this)),this._workbook.bind("dataBound",this._workbookDataBound.bind(this)),this._workbook.bind("progress",this._workbookProgress.bind(this)),this._workbook.bind("contextmenu",this._onContextMenu.bind(this))}destroy(){window.removeEventListener("resize",this._resizeHandler),this.element.removeEventListener("keydown",this._keyDownHandler),this.unbind(),this._workbook.destroy(),this._controller.destroy(),this._view.destroy()}defineName(t,e,n){return this._workbook.defineName(t,e,n)}undefineName(t){return this._workbook.undefineName(t)}nameValue(t){return this._workbook.nameValue(t)}forEachName(t){return this._workbook.forEachName(t)}cellContextMenu(){return this._view.cellContextMenu}rowHeaderContextMenu(){return this._view.rowHeaderContextMenu}colHeaderContextMenu(){return this._view.colHeaderContextMenu}addImage(t){return this._workbook.addImage(t)}cleanupImages(){return this._workbook.cleanupImages()}}},461:(t,e,n)=>{"use strict";n.d(e,{EL:()=>yt,Gy:()=>Qe,Kc:()=>tn});var i=0,r=4,o=0,s=-2,a=4,l=0,c=1,h=2,u=8;function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function p(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)d(n,i)&&(t[i]=n[i])}}return t}function f(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)}var g={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){var e,n,i,r,o,s;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(s=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)o=t[e],s.set(o,r),r+=o.length;return s},Buf8:function(t){return new Uint8Array(t)},Buf16:function(t){return new Uint16Array(t)},Buf32:function(t){return new Int32Array(t)}},m={arraySet:function(t,e,n,i,r){for(var o=0;o<i;o++)t[r+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)},Buf8:function(t){return new Array(t)},Buf16:function(t){return new Array(t)},Buf32:function(t){return new Array(t)}},y=function(){var t="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;return y=function(){return t},t},v=function(t,e,n,i,r){return(v=y()?g.arraySet:m.arraySet)(t,e,n,i,r)},b=function(t){return(b=y()?g.flattenChunks:m.flattenChunks)(t)},w=function(t){return(w=y()?g.Buf8:m.Buf8)(t)},x=function(t){return(x=y()?g.Buf16:m.Buf16)(t)},_=function(t){return(_=y()?g.Buf32:m.Buf32)(t)},S=function(){var t=!0;try{String.fromCharCode.apply(null,[0])}catch(e){t=!1}return S=function(){return t},t},C=function(){var t=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){t=!1}return C=function(){return t},t},k=function(t){for(var e=w(256),n=0;n<256;n++)e[n]=n>=252?6:n>=248?5:n>=240?4:n>=224?3:n>=192?2:1;return e[254]=e[254]=1,k=function(t){return e[t]},e[t]};function A(t){var e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),o=0,r=0;o<a;r++)55296==(64512&(n=t.charCodeAt(r)))&&r+1<s&&56320==(64512&(i=t.charCodeAt(r+1)))&&(n=65536+(n-55296<<10)+(i-56320),r++),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e}function E(t,e){if(e<65534&&(t.subarray&&C()||!t.subarray&&S()))return String.fromCharCode.apply(null,f(t,e));for(var n="",i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n}function T(t,e){var n,i,r,o,s=e||t.length,a=new Array(2*s);for(i=0,n=0;n<s;)if((r=t[n++])<128)a[i++]=r;else if((o=k(r))>4)a[i++]=65533,n+=o-1;else{for(r&=2===o?31:3===o?15:7;o>1&&n<s;)r=r<<6|63&t[n++],o--;o>1?a[i++]=65533:r<65536?a[i++]=r:(r-=65536,a[i++]=55296|r>>10&1023,a[i++]=56320|1023&r)}return E(a,i)}function M(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0||0===n?e:n+k(t[n])>e?n:e}function O(t,e,n,i){for(var r=65535&t|0,o=t>>>16&65535|0,s=0;0!==n;){n-=s=n>2e3?2e3:n;do{o=o+(r=r+e[i++]|0)|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}var I=function(){var t=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();return I=function(){return t},t};function D(t,e,n,i){var r=I(),o=i+n;t^=-1;for(var s=i;s<o;s++)t=t>>>8^r[255&(t^e[s])];return-1^t}var F=30,P=12;function R(t,e){var n,i,r,o,s,a,l,c,h,u,d,p,f,g,m,y,v,b,w,x,_,S,C,k,A;n=t.state,i=t.next_in,k=t.input,r=i+(t.avail_in-5),o=t.next_out,A=t.output,s=o-(e-t.avail_out),a=o+(t.avail_out-257),l=n.dmax,c=n.wsize,h=n.whave,u=n.wnext,d=n.window,p=n.hold,f=n.bits,g=n.lencode,m=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{f<15&&(p+=k[i++]<<f,f+=8,p+=k[i++]<<f,f+=8),b=g[p&y];e:for(;;){if(p>>>=w=b>>>24,f-=w,0===(w=b>>>16&255))A[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=g[(65535&b)+(p&(1<<w)-1)];continue e}if(32&w){n.mode=P;break t}t.msg="invalid literal/length code",n.mode=F;break t}x=65535&b,(w&=15)&&(f<w&&(p+=k[i++]<<f,f+=8),x+=p&(1<<w)-1,p>>>=w,f-=w),f<15&&(p+=k[i++]<<f,f+=8,p+=k[i++]<<f,f+=8),b=m[p&v];n:for(;;){if(p>>>=w=b>>>24,f-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue n}t.msg="invalid distance code",n.mode=F;break t}if(_=65535&b,f<(w&=15)&&(p+=k[i++]<<f,(f+=8)<w&&(p+=k[i++]<<f,f+=8)),(_+=p&(1<<w)-1)>l){t.msg="invalid distance too far back",n.mode=F;break t}if(p>>>=w,f-=w,_>(w=o-s)){if((w=_-w)>h&&n.sane){t.msg="invalid distance too far back",n.mode=F;break t}if(S=0,C=d,0===u){if(S+=c-w,w<x){x-=w;do{A[o++]=d[S++]}while(--w);S=o-_,C=A}}else if(u<w){if(S+=c+u-w,(w-=u)<x){x-=w;do{A[o++]=d[S++]}while(--w);if(S=0,u<x){x-=w=u;do{A[o++]=d[S++]}while(--w);S=o-_,C=A}}}else if(S+=u-w,w<x){x-=w;do{A[o++]=d[S++]}while(--w);S=o-_,C=A}for(;x>2;)A[o++]=C[S++],A[o++]=C[S++],A[o++]=C[S++],x-=3;x&&(A[o++]=C[S++],x>1&&(A[o++]=C[S++]))}else{S=o-_;do{A[o++]=A[S++],A[o++]=A[S++],A[o++]=A[S++],x-=3}while(x>2);x&&(A[o++]=A[S++],x>1&&(A[o++]=A[S++]))}break}}break}}while(i<r&&o<a);i-=x=f>>3,p&=(1<<(f-=x<<3))-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),n.hold=p,n.bits=f}var L=15,N=852,B=592,j=0,z=1,$=2,H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],U=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],V=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],W=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];function q(t,e,n,i,r,o,s,a){var l,c,h,u,d,p,f,g,m,y=a.bits,v=0,b=0,w=0,_=0,S=0,C=0,k=0,A=0,E=0,T=0,M=null,O=0,I=x(L+1),D=x(L+1),F=null,P=0;for(v=0;v<=L;v++)I[v]=0;for(b=0;b<i;b++)I[e[n+b]]++;for(S=y,_=L;_>=1&&0===I[_];_--);if(S>_&&(S=_),0===_)return r[o++]=20971520,r[o++]=20971520,a.bits=1,0;for(w=1;w<_&&0===I[w];w++);for(S<w&&(S=w),A=1,v=1;v<=L;v++)if(A<<=1,(A-=I[v])<0)return-1;if(A>0&&(t===j||1!==_))return-1;for(D[1]=0,v=1;v<L;v++)D[v+1]=D[v]+I[v];for(b=0;b<i;b++)0!==e[n+b]&&(s[D[e[n+b]]++]=b);if(t===j?(M=F=s,p=19):t===z?(M=H,O-=257,F=U,P-=257,p=256):(M=V,F=W,p=-1),T=0,b=0,v=w,d=o,C=S,k=0,h=-1,u=(E=1<<S)-1,t===z&&E>N||t===$&&E>B)return 1;for(;;){f=v-k,s[b]<p?(g=0,m=s[b]):s[b]>p?(g=F[P+s[b]],m=M[O+s[b]]):(g=96,m=0),l=1<<v-k,w=c=1<<C;do{r[d+(T>>k)+(c-=l)]=f<<24|g<<16|m|0}while(0!==c);for(l=1<<v-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,b++,0==--I[v]){if(v===_)break;v=e[n+s[b]]}if(v>S&&(T&u)!==h){for(0===k&&(k=S),d+=w,A=1<<(C=v-k);C+k<_&&!((A-=I[C+k])<=0);)C++,A<<=1;if(E+=1<<C,t===z&&E>N||t===$&&E>B)return 1;r[h=T&u]=S<<24|C<<16|d-o|0}}return 0!==T&&(r[d+T]=v-k<<24|64<<16|0),a.bits=S,0}var K=1,X=2,G=0,Y=-2,J=1,Z=12,Q=30,tt=852,et=592;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=x(320),this.work=x(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rt(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,function(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=J,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=_(tt),e.distcode=e.distdyn=_(et),e.sane=1,e.back=-1,G):Y}(t)):Y}function ot(t,e){var n,i;return t?(i=new it,t.state=i,i.window=null,n=function(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?Y:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,rt(t))):Y}(t,e),n!==G&&(t.state=null),n):Y}var st,at,lt=!0;function ct(t){if(lt){var e;for(st=_(512),at=_(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(q(K,t.lens,0,288,st,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;q(X,t.lens,0,32,at,0,t.work,{bits:5}),lt=!1}t.lencode=st,t.lenbits=9,t.distcode=at,t.distbits=5}function ht(t,e,n,i){var r,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=w(o.wsize)),i>=o.wsize?(v(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((r=o.wsize-o.wnext)>i&&(r=i),v(o.window,e,n-i,r,o.wnext),(i-=r)?(v(o.window,e,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0}function ut(t,e){var n,i,r,o,s,a,l,c,h,u,d,p,f,g,m,y,b,x,_,S,C,k,A,E,T=0,M=w(4),I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return Y;(n=t.state).mode===Z&&(n.mode=13),s=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,c=n.hold,h=n.bits,u=a,d=l,k=G;t:for(;;)switch(n.mode){case J:if(0===n.wrap){n.mode=13;break}for(;h<16;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(2&n.wrap&&35615===c){n.check=0,M[0]=255&c,M[1]=c>>>8&255,n.check=D(n.check,M,2,0),c=0,h=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){t.msg="incorrect header check",n.mode=Q;break}if(8!=(15&c)){t.msg="unknown compression method",n.mode=Q;break}if(h-=4,C=8+(15&(c>>>=4)),0===n.wbits)n.wbits=C;else if(C>n.wbits){t.msg="invalid window size",n.mode=Q;break}n.dmax=1<<C,t.adler=n.check=1,n.mode=512&c?10:Z,c=0,h=0;break;case 2:for(;h<16;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(n.flags=c,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=Q;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Q;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&(M[0]=255&c,M[1]=c>>>8&255,n.check=D(n.check,M,2,0)),c=0,h=0,n.mode=3;case 3:for(;h<32;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.head&&(n.head.time=c),512&n.flags&&(M[0]=255&c,M[1]=c>>>8&255,M[2]=c>>>16&255,M[3]=c>>>24&255,n.check=D(n.check,M,4,0)),c=0,h=0,n.mode=4;case 4:for(;h<16;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&(M[0]=255&c,M[1]=c>>>8&255,n.check=D(n.check,M,2,0)),c=0,h=0,n.mode=5;case 5:if(1024&n.flags){for(;h<16;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&(M[0]=255&c,M[1]=c>>>8&255,n.check=D(n.check,M,2,0)),c=0,h=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&((p=n.length)>a&&(p=a),p&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),v(n.head.extra,i,o,p,C)),512&n.flags&&(n.check=D(n.check,i,p,o)),a-=p,o+=p,n.length-=p),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===a)break t;p=0;do{C=i[o+p++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C))}while(C&&p<a);if(512&n.flags&&(n.check=D(n.check,i,p,o)),a-=p,o+=p,C)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===a)break t;p=0;do{C=i[o+p++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C))}while(C&&p<a);if(512&n.flags&&(n.check=D(n.check,i,p,o)),a-=p,o+=p,C)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;h<16;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(c!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Q;break}c=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=Z;break;case 10:for(;h<32;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}t.adler=n.check=nt(c),c=0,h=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=h,2;t.adler=n.check=1,n.mode=Z;case Z:if(5===e||6===e)break t;case 13:if(n.last){c>>>=7&h,h-=7&h,n.mode=27;break}for(;h<3;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}switch(n.last=1&c,h-=1,3&(c>>>=1)){case 0:n.mode=14;break;case 1:if(ct(n),n.mode=20,6===e){c>>>=2,h-=2;break t}break;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=Q}c>>>=2,h-=2;break;case 14:for(c>>>=7&h,h-=7&h;h<32;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if((65535&c)!=(c>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Q;break}if(n.length=65535&c,c=0,h=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(p=n.length){if(p>a&&(p=a),p>l&&(p=l),0===p)break t;v(r,i,o,p,s),a-=p,o+=p,l-=p,s+=p,n.length-=p;break}n.mode=Z;break;case 17:for(;h<14;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(n.nlen=257+(31&c),c>>>=5,h-=5,n.ndist=1+(31&c),c>>>=5,h-=5,n.ncode=4+(15&c),c>>>=4,h-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Q;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;h<3;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.lens[I[n.have++]]=7&c,c>>>=3,h-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},k=q(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,k){t.msg="invalid code lengths set",n.mode=Q;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;y=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=h);){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(b<16)c>>>=m,h-=m,n.lens[n.have++]=b;else{if(16===b){for(E=m+2;h<E;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(c>>>=m,h-=m,0===n.have){t.msg="invalid bit length repeat",n.mode=Q;break}C=n.lens[n.have-1],p=3+(3&c),c>>>=2,h-=2}else if(17===b){for(E=m+3;h<E;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}h-=m,C=0,p=3+(7&(c>>>=m)),c>>>=3,h-=3}else{for(E=m+7;h<E;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}h-=m,C=0,p=11+(127&(c>>>=m)),c>>>=7,h-=7}if(n.have+p>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Q;break}for(;p--;)n.lens[n.have++]=C}}if(n.mode===Q)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Q;break}if(n.lenbits=9,A={bits:n.lenbits},k=q(K,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,k){t.msg="invalid literal/lengths set",n.mode=Q;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},k=q(X,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,k){t.msg="invalid distances set",n.mode=Q;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(a>=6&&l>=258){t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=h,R(t,d),s=t.next_out,r=t.output,l=t.avail_out,o=t.next_in,i=t.input,a=t.avail_in,c=n.hold,h=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;y=(T=n.lencode[c&(1<<n.lenbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=h);){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(y&&0==(240&y)){for(x=m,_=y,S=b;y=(T=n.lencode[S+((c&(1<<x+_)-1)>>x)])>>>16&255,b=65535&T,!(x+(m=T>>>24)<=h);){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}c>>>=x,h-=x,n.back+=x}if(c>>>=m,h-=m,n.back+=m,n.length=b,0===y){n.mode=26;break}if(32&y){n.back=-1,n.mode=Z;break}if(64&y){t.msg="invalid literal/length code",n.mode=Q;break}n.extra=15&y,n.mode=22;case 22:if(n.extra){for(E=n.extra;h<E;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;y=(T=n.distcode[c&(1<<n.distbits)-1])>>>16&255,b=65535&T,!((m=T>>>24)<=h);){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(0==(240&y)){for(x=m,_=y,S=b;y=(T=n.distcode[S+((c&(1<<x+_)-1)>>x)])>>>16&255,b=65535&T,!(x+(m=T>>>24)<=h);){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}c>>>=x,h-=x,n.back+=x}if(c>>>=m,h-=m,n.back+=m,64&y){t.msg="invalid distance code",n.mode=Q;break}n.offset=b,n.extra=15&y,n.mode=24;case 24:if(n.extra){for(E=n.extra;h<E;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Q;break}n.mode=25;case 25:if(0===l)break t;if(p=d-l,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Q;break}p>n.wnext?(p-=n.wnext,f=n.wsize-p):f=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=r,f=s-n.offset,p=n.length;p>l&&(p=l),l-=p,n.length-=p;do{r[s++]=g[f++]}while(--p);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;r[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;h<32;){if(0===a)break t;a--,c|=i[o++]<<h,h+=8}if(d-=l,t.total_out+=d,n.total+=d,d&&(t.adler=n.check=n.flags?D(n.check,r,d,s-d):O(n.check,r,d,s-d)),d=l,(n.flags?c:nt(c))!==n.check){t.msg="incorrect data check",n.mode=Q;break}c=0,h=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;h<32;){if(0===a)break t;a--,c+=i[o++]<<h,h+=8}if(c!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Q;break}c=0,h=0}n.mode=29;case 29:k=1;break t;case Q:k=-3;break t;case 31:return-4;default:return Y}return t.next_out=s,t.avail_out=l,t.next_in=o,t.avail_in=a,n.hold=c,n.bits=h,(n.wsize||d!==t.avail_out&&n.mode<Q&&(n.mode<27||4!==e))&&ht(t,t.output,t.next_out,d-t.avail_out),u-=t.avail_in,d-=t.avail_out,t.total_in+=u,t.total_out+=d,n.total+=d,n.wrap&&d&&(t.adler=n.check=n.flags?D(n.check,r,d,t.next_out-d):O(n.check,r,d,t.next_out-d)),t.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===d||4===e)&&k===G&&(k=-5),k}function dt(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&11!==n.mode?Y:11===n.mode&&O(1,e,i,0)!==n.check?-3:ht(t,e,i,i)?(n.mode=31,-4):(n.havedict=1,G):Y}var pt={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"};function ft(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}function gt(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var mt=Object.prototype.toString,yt=function t(e){if(!(this instanceof t))return new t(e);this.options=p({chunkSize:16384,windowBits:0,to:""},e||{});var n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,0===n.windowBits&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&0==(15&n.windowBits)&&(n.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ft,this.strm.avail_out=0;var i,r,s,a=ot(this.strm,n.windowBits);if(a!==o)throw new Error(pt[a]);if(this.header=new gt,i=this.strm,r=this.header,i&&i.state&&(0==(2&(s=i.state).wrap)||(s.head=r,r.done=!1)),n.dictionary&&("string"==typeof n.dictionary?n.dictionary=A(n.dictionary):"[object ArrayBuffer]"===mt.call(n.dictionary)&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(a=dt(this.strm,n.dictionary))!==o))throw new Error(pt[a])};yt.prototype.push=function(t,e){var n,s,a,l,c,h,u=this.strm,d=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;s=e===~~e?e:!0===e?r:i,"string"==typeof t?u.input=function(t){for(var e=new Uint8Array(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e}(t):"[object ArrayBuffer]"===mt.call(t)?u.input=new Uint8Array(t):u.input=t,u.next_in=0,u.avail_in=u.input.length;do{if(0===u.avail_out&&(u.output=w(d),u.next_out=0,u.avail_out=d),2===(n=ut(u,i))&&p&&(h="string"==typeof p?A(p):"[object ArrayBuffer]"===mt.call(p)?new Uint8Array(p):p,n=dt(this.strm,h)),-5===n&&!0===g&&(n=o,g=!1),1!==n&&n!==o)return this.onEnd(n),this.ended=!0,!1;u.next_out&&(0!==u.avail_out&&1!==n&&(0!==u.avail_in||s!==r&&2!==s)||("string"===this.options.to?(a=M(u.output,u.next_out),l=u.next_out-a,c=T(u.output,a),u.next_out=l,u.avail_out=d-l,l&&v(u.output,u.output,a,l,0),this.onData(c)):this.onData(f(u.output,u.next_out)))),0===u.avail_in&&0===u.avail_out&&(g=!0)}while((u.avail_in>0||0===u.avail_out)&&1!==n);return 1===n&&(s=r),s===r?(n=function(t){if(!t||!t.state)return Y;var e=t.state;return e.window&&(e.window=null),t.state=null,G}(this.strm),this.onEnd(n),this.ended=!0,n===o):2!==s||(this.onEnd(o),u.avail_out=0,!0)},yt.prototype.onData=function(t){this.chunks.push(t)},yt.prototype.onEnd=function(t){t===o&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=b(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function vt(t){for(var e=t.length;--e>=0;)t[e]=0}var bt,wt,xt,_t,St,Ct,kt,At,Et,Tt=0,Mt=1,Ot=2,It=3,Dt=258,Ft=29,Pt=256,Rt=Pt+1+Ft,Lt=30,Nt=19,Bt=2*Rt+1,jt=15,zt=16,$t=7,Ht=256,Ut=16,Vt=17,Wt=18,qt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Kt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Xt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Yt=512;function Jt(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function Zt(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function Qt(t){return t<256?xt[t]:xt[256+(t>>>7)]}function te(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function ee(t,e,n){t.bi_valid>zt-n?(t.bi_buf|=e<<t.bi_valid&65535,te(t,t.bi_buf),t.bi_buf=e>>zt-t.bi_valid,t.bi_valid+=n-zt):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function ne(t,e,n){ee(t,n[2*e],n[2*e+1])}function ie(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function re(t,e,n){var i,r,o=new Array(jt+1),s=0;for(i=1;i<=jt;i++)o[i]=s=s+n[i-1]<<1;for(r=0;r<=e;r++){var a=t[2*r+1];0!==a&&(t[2*r]=ie(o[a]++,a))}}function oe(t){var e;for(e=0;e<Rt;e++)t.dyn_ltree[2*e]=0;for(e=0;e<Lt;e++)t.dyn_dtree[2*e]=0;for(e=0;e<Nt;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*Ht]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function se(t){t.bi_valid>8?te(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function ae(t,e,n,i){var r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]}function le(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&ae(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!ae(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function ce(t,e,n){var i,r,o,s,a=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*a]<<8|t.pending_buf[t.d_buf+2*a+1],r=t.pending_buf[t.l_buf+a],a++,0===i?ne(t,r,e):(ne(t,(o=_t[r])+Pt+1,e),0!==(s=qt[o])&&ee(t,r-=St[o],s),ne(t,o=Qt(--i),n),0!==(s=Kt[o])&&ee(t,i-=Ct[o],s))}while(a<t.last_lit);ne(t,Ht,e)}function he(t,e){var n,i,r,o=e.dyn_tree,s=e.stat_desc.static_tree,a=e.stat_desc.has_stree,l=e.stat_desc.elems,c=-1;for(t.heap_len=0,t.heap_max=Bt,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=c=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(r=t.heap[++t.heap_len]=c<2?++c:0)]=1,t.depth[r]=0,t.opt_len--,a&&(t.static_len-=s[2*r+1]);for(e.max_code=c,n=t.heap_len>>1;n>=1;n--)le(t,o,n);r=l;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],le(t,o,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,o[2*r]=o[2*n]+o[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,o[2*n+1]=o[2*i+1]=r,t.heap[1]=r++,le(t,o,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,o,s,a,l=e.dyn_tree,c=e.max_code,h=e.stat_desc.static_tree,u=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,p=e.stat_desc.extra_base,f=e.stat_desc.max_length,g=0;for(o=0;o<=jt;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<Bt;n++)(o=l[2*l[2*(i=t.heap[n])+1]+1]+1)>f&&(o=f,g++),l[2*i+1]=o,i>c||(t.bl_count[o]++,s=0,i>=p&&(s=d[i-p]),a=l[2*i],t.opt_len+=a*(o+s),u&&(t.static_len+=a*(h[2*i+1]+s)));if(0!==g){do{for(o=f-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[f]--,g-=2}while(g>0);for(o=f;0!==o;o--)for(i=t.bl_count[o];0!==i;)(r=t.heap[--n])>c||(l[2*r+1]!==o&&(t.opt_len+=(o-l[2*r+1])*l[2*r],l[2*r+1]=o),i--)}}(t,e),re(o,c,t.bl_count)}function ue(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<l&&r===s||(a<c?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[2*Ut]++):a<=10?t.bl_tree[2*Vt]++:t.bl_tree[2*Wt]++,a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4))}function de(t,e,n){var i,r,o=-1,s=e[1],a=0,l=7,c=4;for(0===s&&(l=138,c=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<l&&r===s)){if(a<c)do{ne(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(ne(t,r,t.bl_tree),a--),ne(t,Ut,t.bl_tree),ee(t,a-3,2)):a<=10?(ne(t,Vt,t.bl_tree),ee(t,a-3,3)):(ne(t,Wt,t.bl_tree),ee(t,a-11,7));a=0,o=r,0===s?(l=138,c=3):r===s?(l=6,c=3):(l=7,c=4)}}var pe=!1;function fe(t){pe||(!function(){var t,e,n,i,r,o=new Array(jt+1);for(vt(bt=new Array(2*(Rt+2))),vt(wt=new Array(2*Lt)),vt(xt=new Array(Yt)),vt(_t=new Array(Dt-It+1)),vt(St=new Array(Ft)),vt(Ct=new Array(Lt)),n=0,i=0;i<Ft-1;i++)for(St[i]=n,t=0;t<1<<qt[i];t++)_t[n++]=i;for(_t[n-1]=i,r=0,i=0;i<16;i++)for(Ct[i]=r,t=0;t<1<<Kt[i];t++)xt[r++]=i;for(r>>=7;i<Lt;i++)for(Ct[i]=r<<7,t=0;t<1<<Kt[i]-7;t++)xt[256+r++]=i;for(e=0;e<=jt;e++)o[e]=0;for(t=0;t<=143;)bt[2*t+1]=8,t++,o[8]++;for(;t<=255;)bt[2*t+1]=9,t++,o[9]++;for(;t<=279;)bt[2*t+1]=7,t++,o[7]++;for(;t<=287;)bt[2*t+1]=8,t++,o[8]++;for(re(bt,Rt+1,o),t=0;t<Lt;t++)wt[2*t+1]=5,wt[2*t]=ie(t,5);kt=new Jt(bt,qt,Pt+1,Rt,jt),At=new Jt(wt,Kt,0,Lt,jt),Et=new Jt(new Array(0),Xt,0,Nt,$t)}(),pe=!0),t.l_desc=new Zt(t.dyn_ltree,kt),t.d_desc=new Zt(t.dyn_dtree,At),t.bl_desc=new Zt(t.bl_tree,Et),t.bi_buf=0,t.bi_valid=0,oe(t)}function ge(t,e,n,i){ee(t,(Tt<<1)+(i?1:0),3),function(t,e,n,i){se(t),i&&(te(t,n),te(t,~n)),v(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}function me(t){ee(t,Mt<<1,3),ne(t,Ht,bt),function(t){16===t.bi_valid?(te(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}function ye(t,e,n,i){var r,o,s=0;t.level>0?(t.strm.data_type===h&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return l;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return c;for(e=32;e<Pt;e++)if(0!==t.dyn_ltree[2*e])return c;return l}(t)),he(t,t.l_desc),he(t,t.d_desc),s=function(t){var e;for(ue(t,t.dyn_ltree,t.l_desc.max_code),ue(t,t.dyn_dtree,t.d_desc.max_code),he(t,t.bl_desc),e=Nt-1;e>=3&&0===t.bl_tree[2*Gt[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),r=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=r&&(r=o)):r=o=n+5,n+4<=r&&-1!==e?ge(t,e,n,i):t.strategy===a||o===r?(ee(t,(Mt<<1)+(i?1:0),3),ce(t,bt,wt)):(ee(t,(Ot<<1)+(i?1:0),3),function(t,e,n,i){var r;for(ee(t,e-257,5),ee(t,n-1,5),ee(t,i-4,4),r=0;r<i;r++)ee(t,t.bl_tree[2*Gt[r]+1],3);de(t,t.dyn_ltree,e-1),de(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,s+1),ce(t,t.dyn_ltree,t.dyn_dtree)),oe(t),i&&se(t)}function ve(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(_t[n]+Pt+1)]++,t.dyn_dtree[2*Qt(e)]++),t.last_lit===t.lit_bufsize-1}var be=286,we=30,xe=19,_e=2*be+1,Se=15,Ce=3,ke=258,Ae=ke+Ce+1,Ee=42,Te=103,Me=113,Oe=666,Ie=1,De=2,Fe=3,Pe=4;function Re(t,e){return t.msg=pt[e],e}function Le(t){return(t<<1)-(t>4?9:0)}function Ne(t){for(var e=t.length;--e>=0;)t[e]=0}function Be(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(v(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function je(t,e){ye(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,Be(t.strm)}function ze(t,e){t.pending_buf[t.pending++]=e}function $e(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function He(t,e){var n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match,l=t.strstart>t.w_size-Ae?t.strstart-(t.w_size-Ae):0,c=t.window,h=t.w_mask,u=t.prev,d=t.strstart+ke,p=c[o+s-1],f=c[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(c[(n=e)+s]===f&&c[n+s-1]===p&&c[n]===c[o]&&c[++n]===c[o+1]){o+=2,n++;do{}while(c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&c[++o]===c[++n]&&o<d);if(i=ke-(d-o),o=d-ke,i>s){if(t.match_start=e,s=i,i>=a)break;p=c[o+s-1],f=c[o+s]}}}while((e=u[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead}function Ue(t){var e,n,i,r,o,s,a,l,c,h,u=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=u+(u-Ae)){v(t.window,t.window,u,u,0),t.match_start-=u,t.strstart-=u,t.block_start-=u,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=u?i-u:0}while(--n);e=n=u;do{i=t.prev[--e],t.prev[e]=i>=u?i-u:0}while(--n);r+=u}if(0===t.strm.avail_in)break;if(s=t.strm,a=t.window,l=t.strstart+t.lookahead,c=r,h=void 0,(h=s.avail_in)>c&&(h=c),n=0===h?0:(s.avail_in-=h,v(a,s.input,s.next_in,h,l),1===s.state.wrap?s.adler=O(s.adler,a,h,l):2===s.state.wrap&&(s.adler=D(s.adler,a,h,l)),s.next_in+=h,s.total_in+=h,h),t.lookahead+=n,t.lookahead+t.insert>=Ce)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+Ce-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<Ce)););}while(t.lookahead<Ae&&0!==t.strm.avail_in)}function Ve(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(Ue(t),0===t.lookahead&&e===i)return Ie;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var o=t.block_start+n;if((0===t.strstart||t.strstart>=o)&&(t.lookahead=t.strstart-o,t.strstart=o,je(t,!1),0===t.strm.avail_out))return Ie;if(t.strstart-t.block_start>=t.w_size-Ae&&(je(t,!1),0===t.strm.avail_out))return Ie}return t.insert=0,e===r?(je(t,!0),0===t.strm.avail_out?Fe:Pe):(t.strstart>t.block_start&&(je(t,!1),t.strm.avail_out),Ie)}function We(t,e){for(var n,o;;){if(t.lookahead<Ae){if(Ue(t),t.lookahead<Ae&&e===i)return Ie;if(0===t.lookahead)break}if(n=0,t.lookahead>=Ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-Ae&&(t.match_length=He(t,n)),t.match_length>=Ce)if(o=ve(t,t.strstart-t.match_start,t.match_length-Ce),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=Ce){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else o=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(o&&(je(t,!1),0===t.strm.avail_out))return Ie}return t.insert=t.strstart<Ce-1?t.strstart:Ce-1,e===r?(je(t,!0),0===t.strm.avail_out?Fe:Pe):t.last_lit&&(je(t,!1),0===t.strm.avail_out)?Ie:De}function qe(t,e){for(var n,o,s;;){if(t.lookahead<Ae){if(Ue(t),t.lookahead<Ae&&e===i)return Ie;if(0===t.lookahead)break}if(n=0,t.lookahead>=Ce&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=Ce-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-Ae&&(t.match_length=He(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===Ce&&t.strstart-t.match_start>4096)&&(t.match_length=Ce-1)),t.prev_length>=Ce&&t.match_length<=t.prev_length){s=t.strstart+t.lookahead-Ce,o=ve(t,t.strstart-1-t.prev_match,t.prev_length-Ce),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=s&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+Ce-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=Ce-1,t.strstart++,o&&(je(t,!1),0===t.strm.avail_out))return Ie}else if(t.match_available){if((o=ve(t,0,t.window[t.strstart-1]))&&je(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Ie}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(o=ve(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<Ce-1?t.strstart:Ce-1,e===r?(je(t,!0),0===t.strm.avail_out?Fe:Pe):t.last_lit&&(je(t,!1),0===t.strm.avail_out)?Ie:De}function Ke(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}var Xe=function(){var t=[new Ke(0,0,0,0,Ve),new Ke(4,4,8,4,We),new Ke(4,5,16,8,We),new Ke(4,6,32,32,We),new Ke(4,4,16,16,qe),new Ke(8,16,32,32,qe),new Ke(8,16,128,128,qe),new Ke(8,32,128,256,qe),new Ke(32,128,258,1024,qe),new Ke(32,258,258,4096,qe)];return Xe=function(){return t},t};function Ge(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=u,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=x(2*_e),this.dyn_dtree=x(2*(2*we+1)),this.bl_tree=x(2*(2*xe+1)),Ne(this.dyn_ltree),Ne(this.dyn_dtree),Ne(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=x(Se+1),this.heap=x(2*be+1),Ne(this.heap),this.heap_len=0,this.heap_max=0,this.depth=x(2*be+1),Ne(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ye(t){var e=function(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=h,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?Ee:Me,t.adler=2===e.wrap?0:1,e.last_flush=i,fe(e),o):Re(t,s)}(t);return e===o&&function(t){t.window_size=2*t.w_size,Ne(t.head);var e=Xe();t.max_lazy_match=e[t.level].max_lazy,t.good_match=e[t.level].good_length,t.nice_match=e[t.level].nice_length,t.max_chain_length=e[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=Ce-1,t.match_available=0,t.ins_h=0}(t.state),e}function Je(t,e){var n,a,l,c;if(!t||!t.state||e>5||e<0)return t?Re(t,s):s;if(a=t.state,!t.output||!t.input&&0!==t.avail_in||a.status===Oe&&e!==r)return Re(t,0===t.avail_out?-5:s);if(a.strm=t,n=a.last_flush,a.last_flush=e,a.status===Ee)if(2===a.wrap)t.adler=0,ze(a,31),ze(a,139),ze(a,8),a.gzhead?(ze(a,(a.gzhead.text?1:0)+(a.gzhead.hcrc?2:0)+(a.gzhead.extra?4:0)+(a.gzhead.name?8:0)+(a.gzhead.comment?16:0)),ze(a,255&a.gzhead.time),ze(a,a.gzhead.time>>8&255),ze(a,a.gzhead.time>>16&255),ze(a,a.gzhead.time>>24&255),ze(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),ze(a,255&a.gzhead.os),a.gzhead.extra&&a.gzhead.extra.length&&(ze(a,255&a.gzhead.extra.length),ze(a,a.gzhead.extra.length>>8&255)),a.gzhead.hcrc&&(t.adler=D(t.adler,a.pending_buf,a.pending,0)),a.gzindex=0,a.status=69):(ze(a,0),ze(a,0),ze(a,0),ze(a,0),ze(a,0),ze(a,9===a.level?2:a.strategy>=2||a.level<2?4:0),ze(a,3),a.status=Me);else{var h=u+(a.w_bits-8<<4)<<8;h|=(a.strategy>=2||a.level<2?0:a.level<6?1:6===a.level?2:3)<<6,0!==a.strstart&&(h|=32),h+=31-h%31,a.status=Me,$e(a,h),0!==a.strstart&&($e(a,t.adler>>>16),$e(a,65535&t.adler)),t.adler=1}if(69===a.status)if(a.gzhead.extra){for(l=a.pending;a.gzindex<(65535&a.gzhead.extra.length)&&(a.pending!==a.pending_buf_size||(a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),Be(t),l=a.pending,a.pending!==a.pending_buf_size));)ze(a,255&a.gzhead.extra[a.gzindex]),a.gzindex++;a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),a.gzindex===a.gzhead.extra.length&&(a.gzindex=0,a.status=73)}else a.status=73;if(73===a.status)if(a.gzhead.name){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),Be(t),l=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.name.length?255&a.gzhead.name.charCodeAt(a.gzindex++):0,ze(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),0===c&&(a.gzindex=0,a.status=91)}else a.status=91;if(91===a.status)if(a.gzhead.comment){l=a.pending;do{if(a.pending===a.pending_buf_size&&(a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),Be(t),l=a.pending,a.pending===a.pending_buf_size)){c=1;break}c=a.gzindex<a.gzhead.comment.length?255&a.gzhead.comment.charCodeAt(a.gzindex++):0,ze(a,c)}while(0!==c);a.gzhead.hcrc&&a.pending>l&&(t.adler=D(t.adler,a.pending_buf,a.pending-l,l)),0===c&&(a.status=Te)}else a.status=Te;if(a.status===Te&&(a.gzhead.hcrc?(a.pending+2>a.pending_buf_size&&Be(t),a.pending+2<=a.pending_buf_size&&(ze(a,255&t.adler),ze(a,t.adler>>8&255),t.adler=0,a.status=Me)):a.status=Me),0!==a.pending){if(Be(t),0===t.avail_out)return a.last_flush=-1,o}else if(0===t.avail_in&&Le(e)<=Le(n)&&e!==r)return Re(t,-5);if(a.status===Oe&&0!==t.avail_in)return Re(t,-5);if(0!==t.avail_in||0!==a.lookahead||e!==i&&a.status!==Oe){var d=2===a.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(Ue(t),0===t.lookahead)){if(e===i)return Ie;break}if(t.match_length=0,n=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(je(t,!1),0===t.strm.avail_out))return Ie}return t.insert=0,e===r?(je(t,!0),0===t.strm.avail_out?Fe:Pe):t.last_lit&&(je(t,!1),0===t.strm.avail_out)?Ie:De}(a,e):3===a.strategy?function(t,e){for(var n,o,s,a,l=t.window;;){if(t.lookahead<=ke){if(Ue(t),t.lookahead<=ke&&e===i)return Ie;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=Ce&&t.strstart>0&&(o=l[s=t.strstart-1])===l[++s]&&o===l[++s]&&o===l[++s]){a=t.strstart+ke;do{}while(o===l[++s]&&o===l[++s]&&o===l[++s]&&o===l[++s]&&o===l[++s]&&o===l[++s]&&o===l[++s]&&o===l[++s]&&s<a);t.match_length=ke-(a-s),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=Ce?(n=ve(t,1,t.match_length-Ce),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=ve(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(je(t,!1),0===t.strm.avail_out))return Ie}return t.insert=0,e===r?(je(t,!0),0===t.strm.avail_out?Fe:Pe):t.last_lit&&(je(t,!1),0===t.strm.avail_out)?Ie:De}(a,e):Xe()[a.level].func(a,e);if(d!==Fe&&d!==Pe||(a.status=Oe),d===Ie||d===Fe)return 0===t.avail_out&&(a.last_flush=-1),o;if(d===De&&(1===e?me(a):5!==e&&(ge(a,0,0,!1),3===e&&(Ne(a.head),0===a.lookahead&&(a.strstart=0,a.block_start=0,a.insert=0))),Be(t),0===t.avail_out))return a.last_flush=-1,o}return e!==r?o:a.wrap<=0?1:(2===a.wrap?(ze(a,255&t.adler),ze(a,t.adler>>8&255),ze(a,t.adler>>16&255),ze(a,t.adler>>24&255),ze(a,255&t.total_in),ze(a,t.total_in>>8&255),ze(a,t.total_in>>16&255),ze(a,t.total_in>>24&255)):($e(a,t.adler>>>16),$e(a,65535&t.adler)),Be(t),a.wrap>0&&(a.wrap=-a.wrap),0!==a.pending?o:1)}var Ze=Object.prototype.toString,Qe=function(t){this.options=p({level:-1,method:u,chunkSize:16384,windowBits:15,memLevel:8,strategy:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ft,this.strm.avail_out=0;var n,i,r=function(t,e,n,i,r,o){if(!t)return s;var l=1;if(-1===e&&(e=6),i<0?(l=0,i=-i):i>15&&(l=2,i-=16),r<1||r>9||n!==u||i<8||i>15||e<0||e>9||o<0||o>a)return Re(t,s);8===i&&(i=9);var c=new Ge;return t.state=c,c.strm=t,c.wrap=l,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=r+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+Ce-1)/Ce),c.window=w(2*c.w_size),c.head=x(c.hash_size),c.prev=x(c.w_size),c.lit_bufsize=1<<r+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=w(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=e,c.strategy=o,c.method=n,Ye(t)}(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(r!==o)throw new Error(pt[r]);if(e.header&&(n=this.strm,i=e.header,n&&n.state&&(2!==n.state.wrap||(n.state.gzhead=i))),e.dictionary){var l;if(l="string"==typeof e.dictionary?A(e.dictionary):"[object ArrayBuffer]"===Ze.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,r=function(t,e){var n,i,r,a,l,c,h,u,d=e.length;if(!t||!t.state)return s;if(2===(a=(n=t.state).wrap)||1===a&&n.status!==Ee||n.lookahead)return s;for(1===a&&(t.adler=O(t.adler,e,d,0)),n.wrap=0,d>=n.w_size&&(0===a&&(Ne(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=w(n.w_size),v(u,e,d-n.w_size,n.w_size,0),e=u,d=n.w_size),l=t.avail_in,c=t.next_in,h=t.input,t.avail_in=d,t.next_in=0,t.input=e,Ue(n);n.lookahead>=Ce;){i=n.strstart,r=n.lookahead-(Ce-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+Ce-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--r);n.strstart=i,n.lookahead=Ce-1,Ue(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=Ce-1,n.match_available=0,t.next_in=c,t.input=h,t.avail_in=l,n.wrap=a,o}(this.strm,l),r!==o)throw new Error(pt[r]);this._dict_set=!0}};function tn(t,e){var n=new Qe(e);if(n.push(t,!0),n.err)throw n.msg||pt[n.err];return n.result}Qe.prototype.push=function(t,e){var n,a,l,c=this.strm,h=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?r:i,"string"==typeof t?c.input=A(t):"[object ArrayBuffer]"===Ze.call(t)?c.input=new Uint8Array(t):c.input=t,c.next_in=0,c.avail_in=c.input.length;do{if(0===c.avail_out&&(c.output=w(h),c.next_out=0,c.avail_out=h),1!==(n=Je(c,a))&&n!==o)return this.onEnd(n),this.ended=!0,!1;0!==c.avail_out&&(0!==c.avail_in||a!==r&&2!==a)||("string"===this.options.to?this.onData(E(l=f(c.output,c.next_out),l.length)):this.onData(f(c.output,c.next_out)))}while((c.avail_in>0||0===c.avail_out)&&1!==n);return a===r?(n=function(t){var e;return t&&t.state?(e=t.state.status)!==Ee&&69!==e&&73!==e&&91!==e&&e!==Te&&e!==Me&&e!==Oe?Re(t,s):(t.state=null,e===Me?Re(t,-3):o):s}(this.strm),this.onEnd(n),this.ended=!0,n===o):2!==a||(this.onEnd(o),c.avail_out=0,!0)},Qe.prototype.onData=function(t){this.chunks.push(t)},Qe.prototype.onEnd=function(t){t===o&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=b(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg}},7168:(t,e,n)=>{var i;
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */!function(r,o,s,a){"use strict";var l,c=["","webkit","Moz","MS","ms","o"],h=o.createElement("div"),u="function",d=Math.round,p=Math.abs,f=Date.now;function g(t,e,n){return setTimeout(_(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(y(t,n[e],n),!0)}function y(t,e,n){var i;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==a)for(i=0;i<t.length;)e.call(n,t[i],i,t),i++;else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t)}function v(t,e,n){var i="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=r.console&&(r.console.warn||r.console.log);return o&&o.call(r.console,i,n),t.apply(this,arguments)}}l="function"!=typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(i!==a&&null!==i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e}:Object.assign;var b=v((function(t,e,n){for(var i=Object.keys(e),r=0;r<i.length;)(!n||n&&t[i[r]]===a)&&(t[i[r]]=e[i[r]]),r++;return t}),"extend","Use `assign`."),w=v((function(t,e){return b(t,e,!0)}),"merge","Use `assign`.");function x(t,e,n){var i,r=e.prototype;(i=t.prototype=Object.create(r)).constructor=t,i._super=r,n&&l(i,n)}function _(t,e){return function(){return t.apply(e,arguments)}}function S(t,e){return typeof t==u?t.apply(e&&e[0]||a,e):t}function C(t,e){return t===a?e:t}function k(t,e,n){y(M(e),(function(e){t.addEventListener(e,n,!1)}))}function A(t,e,n){y(M(e),(function(e){t.removeEventListener(e,n,!1)}))}function E(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function T(t,e){return t.indexOf(e)>-1}function M(t){return t.trim().split(/\s+/g)}function O(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function I(t){return Array.prototype.slice.call(t,0)}function D(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var s=e?t[o][e]:t[o];O(r,s)<0&&i.push(t[o]),r[o]=s,o++}return n&&(i=e?i.sort((function(t,n){return t[e]>n[e]})):i.sort()),i}function F(t,e){for(var n,i,r=e[0].toUpperCase()+e.slice(1),o=0;o<c.length;){if((i=(n=c[o])?n+r:e)in t)return i;o++}return a}var P=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||r}var L="ontouchstart"in r,N=F(r,"PointerEvent")!==a,B=L&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",z="mouse",$=25,H=1,U=4,V=8,W=1,q=2,K=4,X=8,G=16,Y=q|K,J=X|G,Z=Y|J,Q=["x","y"],tt=["clientX","clientY"];function et(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){S(t.options.enable,[t])&&n.handler(e)},this.init()}function nt(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&H&&i-r==0,s=e&(U|V)&&i-r==0;n.isFirst=!!o,n.isFinal=!!s,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=it(e));r>1&&!n.firstMultiple?n.firstMultiple=it(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,s=n.firstMultiple,l=s?s.center:o.center,c=e.center=rt(i);e.timeStamp=f(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=lt(l,c),e.distance=at(l,c),function(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};e.eventType!==H&&o.eventType!==U||(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y});e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}(n,e),e.offsetDirection=st(e.deltaX,e.deltaY);var h=ot(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=h.x,e.overallVelocityY=h.y,e.overallVelocity=p(h.x)>p(h.y)?h.x:h.y,e.scale=s?(u=s.pointers,d=i,at(d[0],d[1],tt)/at(u[0],u[1],tt)):1,e.rotation=s?function(t,e){return lt(e[1],e[0],tt)+lt(t[1],t[0],tt)}(s.pointers,i):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,i,r,o,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=V&&(l>$||s.velocity===a)){var c=e.deltaX-s.deltaX,h=e.deltaY-s.deltaY,u=ot(l,c,h);i=u.x,r=u.y,n=p(u.x)>p(u.y)?u.x:u.y,o=st(c,h),t.lastInterval=e}else n=s.velocity,i=s.velocityX,r=s.velocityY,o=s.direction;e.velocity=n,e.velocityX=i,e.velocityY=r,e.direction=o}(n,e);var u,d;var g=t.element;E(e.srcEvent.target,g)&&(g=e.srcEvent.target);e.target=g}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function it(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:d(t.pointers[n].clientX),clientY:d(t.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:e,center:rt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function rt(t){var e=t.length;if(1===e)return{x:d(t[0].clientX),y:d(t[0].clientY)};for(var n=0,i=0,r=0;r<e;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:d(n/e),y:d(i/e)}}function ot(t,e,n){return{x:e/t||0,y:n/t||0}}function st(t,e){return t===e?W:p(t)>=p(e)?t<0?q:K:e<0?X:G}function at(t,e,n){n||(n=Q);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function lt(t,e,n){n||(n=Q);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}et.prototype={handler:function(){},init:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(R(this.element),this.evWin,this.domHandler)}};var ct={mousedown:H,mousemove:2,mouseup:U},ht="mousedown",ut="mousemove mouseup";function dt(){this.evEl=ht,this.evWin=ut,this.pressed=!1,et.apply(this,arguments)}x(dt,et,{handler:function(t){var e=ct[t.type];e&H&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=U),this.pressed&&(e&U&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:z,srcEvent:t}))}});var pt={pointerdown:H,pointermove:2,pointerup:U,pointercancel:V,pointerout:V},ft={2:j,3:"pen",4:z,5:"kinect"},gt="pointerdown",mt="pointermove pointerup pointercancel";function yt(){this.evEl=gt,this.evWin=mt,et.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}r.MSPointerEvent&&!r.PointerEvent&&(gt="MSPointerDown",mt="MSPointerMove MSPointerUp MSPointerCancel"),x(yt,et,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=pt[i],o=ft[t.pointerType]||t.pointerType,s=o==j,a=O(e,t.pointerId,"pointerId");r&H&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):r&(U|V)&&(n=!0),a<0||(e[a]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(a,1))}});var vt={touchstart:H,touchmove:2,touchend:U,touchcancel:V};function bt(){this.evTarget="touchstart",this.evWin="touchstart touchmove touchend touchcancel",this.started=!1,et.apply(this,arguments)}function wt(t,e){var n=I(t.touches),i=I(t.changedTouches);return e&(U|V)&&(n=D(n.concat(i),"identifier",!0)),[n,i]}x(bt,et,{handler:function(t){var e=vt[t.type];if(e===H&&(this.started=!0),this.started){var n=wt.call(this,t,e);e&(U|V)&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var xt={touchstart:H,touchmove:2,touchend:U,touchcancel:V},_t="touchstart touchmove touchend touchcancel";function St(){this.evTarget=_t,this.targetIds={},et.apply(this,arguments)}function Ct(t,e){var n=I(t.touches),i=this.targetIds;if(e&(2|H)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,s=I(t.changedTouches),a=[],l=this.target;if(o=n.filter((function(t){return E(t.target,l)})),e===H)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<s.length;)i[s[r].identifier]&&a.push(s[r]),e&(U|V)&&delete i[s[r].identifier],r++;return a.length?[D(o.concat(a),"identifier",!0),a]:void 0}x(St,et,{handler:function(t){var e=xt[t.type],n=Ct.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}});var kt=2500;function At(){et.apply(this,arguments);var t=_(this.handler,this);this.touch=new St(this.manager,t),this.mouse=new dt(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Et(t,e){t&H?(this.primaryTouch=e.changedPointers[0].identifier,Tt.call(this,e)):t&(U|V)&&Tt.call(this,e)}function Tt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var i=this.lastTouches;setTimeout((function(){var t=i.indexOf(n);t>-1&&i.splice(t,1)}),kt)}}function Mt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,i=0;i<this.lastTouches.length;i++){var r=this.lastTouches[i],o=Math.abs(e-r.x),s=Math.abs(n-r.y);if(o<=25&&s<=25)return!0}return!1}x(At,et,{handler:function(t,e,n){var i=n.pointerType==j,r=n.pointerType==z;if(!(r&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(i)Et.call(this,e,n);else if(r&&Mt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ot=F(h.style,"touchAction"),It=Ot!==a,Dt="compute",Ft="auto",Pt="manipulation",Rt="none",Lt="pan-x",Nt="pan-y",Bt=function(){if(!It)return!1;var t={},e=r.CSS&&r.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||r.CSS.supports("touch-action",n)})),t}();function jt(t,e){this.manager=t,this.set(e)}jt.prototype={set:function(t){t==Dt&&(t=this.compute()),It&&this.manager.element.style&&Bt[t]&&(this.manager.element.style[Ot]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return y(this.manager.recognizers,(function(e){S(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(T(t,Rt))return Rt;var e=T(t,Lt),n=T(t,Nt);if(e&&n)return Rt;if(e||n)return e?Lt:Nt;if(T(t,Pt))return Pt;return Ft}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var i=this.actions,r=T(i,Rt)&&!Bt[Rt],o=T(i,Nt)&&!Bt[Nt],s=T(i,Lt)&&!Bt[Lt];if(r){var a=1===t.pointers.length,l=t.distance<2,c=t.deltaTime<250;if(a&&l&&c)return}if(!s||!o)return r||o&&n&Y||s&&n&J?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var zt=1,$t=32;function Ht(t){this.options=l({},this.defaults,t||{}),this.id=P++,this.manager=null,this.options.enable=C(this.options.enable,!0),this.state=zt,this.simultaneous={},this.requireFail=[]}function Ut(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function Vt(t){return t==G?"down":t==X?"up":t==q?"left":t==K?"right":""}function Wt(t,e){var n=e.manager;return n?n.get(t):t}function qt(){Ht.apply(this,arguments)}function Kt(){qt.apply(this,arguments),this.pX=null,this.pY=null}function Xt(){qt.apply(this,arguments)}function Gt(){Ht.apply(this,arguments),this._timer=null,this._input=null}function Yt(){qt.apply(this,arguments)}function Jt(){qt.apply(this,arguments)}function Zt(){Ht.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function Qt(t,e){return(e=e||{}).recognizers=C(e.recognizers,Qt.defaults.preset),new te(t,e)}Ht.prototype={defaults:{},set:function(t){return l(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=Wt(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=Wt(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===O(e,t=Wt(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=Wt(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function i(n){e.manager.emit(n,t)}n<8&&i(e.options.event+Ut(n)),i(e.options.event),t.additionalEvent&&i(t.additionalEvent),n>=8&&i(e.options.event+Ut(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=$t},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&($t|zt)))return!1;t++}return!0},recognize:function(t){var e=l({},t);if(!S(this.options.enable,[this,e]))return this.reset(),void(this.state=$t);56&this.state&&(this.state=zt),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},x(qt,Ht,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=6&e,r=this.attrTest(t);return i&&(n&V||!r)?16|e:i||r?n&U?8|e:2&e?4|e:2:$t}}),x(Kt,qt,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var t=this.options.direction,e=[];return t&Y&&e.push(Nt),t&J&&e.push(Lt),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,s=t.deltaY;return r&e.direction||(e.direction&Y?(r=0===o?W:o<0?q:K,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===s?W:s<0?X:G,n=s!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return qt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=Vt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),x(Xt,qt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),x(Gt,Ht,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ft]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(U|V)&&!r)this.reset();else if(t.eventType&H)this.reset(),this._timer=g((function(){this.state=8,this.tryEmit()}),e.time,this);else if(t.eventType&U)return 8;return $t},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&t.eventType&U?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}}),x(Yt,qt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),x(Jt,qt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Y|J,pointers:1},getTouchAction:function(){return Kt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(Y|J)?e=t.overallVelocity:n&Y?e=t.overallVelocityX:n&J&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&p(e)>this.options.velocity&&t.eventType&U},emit:function(t){var e=Vt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),x(Zt,Ht,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[Pt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,r=t.deltaTime<e.time;if(this.reset(),t.eventType&H&&0===this.count)return this.failTimeout();if(i&&r&&n){if(t.eventType!=U)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,s=!this.pCenter||at(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,s&&o?this.count+=1:this.count=1,this._input=t,0===this.count%e.taps)return this.hasRequireFailures()?(this._timer=g((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return $t},failTimeout:function(){return this._timer=g((function(){this.state=$t}),this.options.interval,this),$t},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),Qt.VERSION="2.0.7",Qt.defaults={domEvents:!1,touchAction:Dt,enable:!0,inputTarget:null,inputClass:null,preset:[[Yt,{enable:!1}],[Xt,{enable:!1},["rotate"]],[Jt,{direction:Y}],[Kt,{direction:Y},["swipe"]],[Zt],[Zt,{event:"doubletap",taps:2},["tap"]],[Gt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};function te(t,e){var n;this.options=l({},Qt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((n=this).options.inputClass||(N?yt:B?St:L?At:dt))(n,nt),this.touchAction=new jt(this,this.options.touchAction),ee(this,!0),y(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function ee(t,e){var n,i=t.element;i.style&&(y(t.options.cssProps,(function(r,o){n=F(i.style,o),e?(t.oldCssProps[n]=i.style[n],i.style[n]=r):i.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}te.prototype={set:function(t){return l(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var i=this.recognizers,r=e.curRecognizer;(!r||r&&8&r.state)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],2===e.stopped||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&14&n.state&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Ht)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=O(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var n=this.handlers;return y(M(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==a){var n=this.handlers;return y(M(t),(function(t){e?n[t]&&n[t].splice(O(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&ee(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},l(Qt,{INPUT_START:H,INPUT_MOVE:2,INPUT_END:U,INPUT_CANCEL:V,STATE_POSSIBLE:zt,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:$t,DIRECTION_NONE:W,DIRECTION_LEFT:q,DIRECTION_RIGHT:K,DIRECTION_UP:X,DIRECTION_DOWN:G,DIRECTION_HORIZONTAL:Y,DIRECTION_VERTICAL:J,DIRECTION_ALL:Z,Manager:te,Input:et,TouchAction:jt,TouchInput:St,MouseInput:dt,PointerEventInput:yt,TouchMouseInput:At,SingleTouchInput:bt,Recognizer:Ht,AttrRecognizer:qt,Tap:Zt,Pan:Kt,Swipe:Jt,Pinch:Xt,Rotate:Yt,Press:Gt,on:k,off:A,each:y,merge:w,extend:b,assign:l,inherit:x,bindFn:_,prefixed:F}),(void 0!==r?r:"undefined"!=typeof self?self:{}).Hammer=Qt,(i=function(){return Qt}.call(e,n,e,t))===a||(t.exports=i)}(window,document)},748:(module,__unused_webpack_exports,__webpack_require__)=>{
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var root,factory;root=globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=function(t,e){t||s(e)},e.bytesToString=c,e.createValidAbsoluteUrl=function(t,e=null,n=null){if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=p(t)}catch{}}const i=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getUuid=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return c(t)},e.getVerbosityLevel=function(){return r},e.info=function(t){r>=i.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&void 0!==t?.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0},e.isNodeJS=void 0,e.normalizeUnicode=function(t){return f||(f=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,g=new Map([["ﬅ","ſt"]])),t.replaceAll(f,((t,e,n)=>e?e.normalize("NFKC"):g.get(n)))},e.objectFromMap=function(t){const e=Object.create(null);for(const[n,i]of t)e[n]=i;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(r=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=h,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const n=new TextDecoder(e,{fatal:!0}),i=h(t);return n.decode(i)}catch(t){o(`stringToPDFString: "${t}".`)}}const e=[];for(let n=0,i=t.length;n<i;n++){const i=d[t.charCodeAt(n)];e.push(i?String.fromCharCode(i):t.charAt(n))}return e.join("")},e.stringToUTF8String=p,e.unreachable=s,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=o;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=n,e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.MAX_IMAGE_SIZE_TO_CACHE=1e7,e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.BASELINE_FACTOR=.25925925925925924,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},e.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"};const i={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=i,e.CMapCompressionType={NONE:0,BINARY:1},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=i.WARNINGS;function o(t){r>=i.WARNINGS&&console.log(`Warning: ${t}`)}function s(t){throw new Error(t)}function a(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const l=function(){function t(e,n){this.constructor===t&&s("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();function c(t){"object"==typeof t&&void 0!==t?.length||s("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const o=Math.min(r+n,e),s=t.subarray(r,o);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function h(t){"string"!=typeof t&&s("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?a(this,"platform",{isWin:!1,isMac:!1}):a(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return a(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));e.Util=class{static makeHexColor(t,e,n){return`#${u[t]}${u[e]}${u[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[2],e[2]=n,n=e[1],e[1]=e[3],e[3]=n,t[1]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],s=(n+o)/2,a=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,l=s+a||1,c=s-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(t,e,n,i,r,o,s,a){const l=[],c=[[],[]];let h,u,d,p,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*s,d=3*n-3*t):(u=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*a,d=3*i-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;p=-d/u,0<p&&p<1&&l.push(p)}else m=u*u-4*d*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)p=l[b],v=1-p,c[0][b]=v*v*v*t+3*v*v*p*n+3*v*p*p*r+p*p*p*s,c[1][b]=v*v*v*e+3*v*v*p*i+3*v*p*p*o+p*p*p*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=s,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function p(t){return decodeURIComponent(escape(t))}e.PromiseCapability=class{#t=!1;constructor(){this.promise=new Promise(((t,e)=>{this.resolve=e=>{this.#t=!0,t(e)},this.reject=t=>{this.#t=!0,e(t)}}))}get settled(){return this.#t}};let f=null,g=null;e.AnnotationPrefix="pdfjs_internal_id_"},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(t){if("string"==typeof t||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t}),"object"!=typeof t)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:n}=e,i=t.url?getUrlProp(t.url):null,r=t.data?getDataProp(t.data):null,o=t.httpHeaders||null,s=!0===t.withCredentials,a=t.password??null,l=t.range instanceof PDFDataRangeTransport?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let h=t.worker instanceof PDFWorker?t.worker:null;const u=t.verbosity,d="string"!=typeof t.docBaseUrl||(0,_display_utils.isDataScheme)(t.docBaseUrl)?null:t.docBaseUrl,p="string"==typeof t.cMapUrl?t.cMapUrl:null,f=!1!==t.cMapPacked,g=t.CMapReaderFactory||DefaultCMapReaderFactory,m="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,y=t.StandardFontDataFactory||DefaultStandardFontDataFactory,v=!0!==t.stopAtErrors,b=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,w=!1!==t.isEvalSupported,x="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!_util.isNodeJS,_=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,S="boolean"==typeof t.disableFontFace?t.disableFontFace:_util.isNodeJS,C=!0===t.fontExtraProperties,k=!0===t.enableXfa,A=t.ownerDocument||globalThis.document,E=!0===t.disableRange,T=!0===t.disableStream,M=!0===t.disableAutoFetch,O=!0===t.pdfBug,I=l?l.length:t.length??NaN,D="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!_util.isNodeJS&&!S,F="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:g===_display_utils.DOMCMapReaderFactory&&y===_display_utils.DOMStandardFontDataFactory&&p&&m&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(m,document.baseURI),P=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:A}),R=t.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:A});(0,_util.setVerbosityLevel)(u);const L={canvasFactory:P,filterFactory:R};if(F||(L.cMapReaderFactory=new g({baseUrl:p,isCompressed:f}),L.standardFontDataFactory=new y({baseUrl:m})),!h){const t={verbosity:u,port:_worker_options.GlobalWorkerOptions.workerPort};h=t.port?PDFWorker.fromPort(t):new PDFWorker(t),e._worker=h}const N={docId:n,apiVersion:"3.11.174",data:r,password:a,disableAutoFetch:M,rangeChunkSize:c,length:I,docBaseUrl:d,enableXfa:k,evaluatorOptions:{maxImageSize:b,disableFontFace:S,ignoreErrors:v,isEvalSupported:w,isOffscreenCanvasSupported:x,canvasMaxAreaInBytes:_,fontExtraProperties:C,useSystemFonts:D,cMapUrl:F?p:null,standardFontDataUrl:F?m:null}},B={ignoreErrors:v,isEvalSupported:w,disableFontFace:S,fontExtraProperties:C,enableXfa:k,ownerDocument:A,disableAutoFetch:M,pdfBug:O,styleElement:null};return h.promise.then((function(){if(e.destroyed)throw new Error("Loading aborted");const t=_fetchDocument(h,N),a=new Promise((function(t){let e;var n;l?e=new _transport_stream.PDFDataTransportStream({length:I,initialData:l.initialData,progressiveDone:l.progressiveDone,contentDispositionFilename:l.contentDispositionFilename,disableRange:E,disableStream:T},l):r||(n={url:i,length:I,httpHeaders:o,withCredentials:s,rangeChunkSize:c,disableRange:E,disableStream:T},e=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(n):(0,_display_utils.isValidFetchUrl)(n.url)?new _displayFetch_stream.PDFFetchStream(n):new _displayNetwork.PDFNetworkStream(n)),t(e)}));return Promise.all([t,a]).then((function([t,i]){if(e.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(n,t,h.port),o=new WorkerTransport(r,e,i,B,L);e._transport=o,r.send("Ready",null)}))})).catch(e._capability.reject),e}async function _fetchDocument(t,e){if(t.destroyed)throw new Error("Worker was destroyed");const n=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(t.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(_util.isNodeJS&&"string"==typeof t)return t}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_util.isNodeJS&&"undefined"!=typeof Buffer&&t instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return(0,_util.stringToBytes)(t);if("object"==typeof t&&!isNaN(t?.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e,n=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=n,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const n of this._rangeListeners)n(t,e)}onDataProgress(t,e){this._readyCapability.promise.then((()=>{for(const n of this._progressListeners)n(t,e)}))}onDataProgressiveRead(t){this._readyCapability.promise.then((()=>{for(const e of this._progressiveReadListeners)e(t)}))}onDataProgressiveDone(){this._readyCapability.promise.then((()=>{for(const t of this._progressiveDoneListeners)t()}))}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then((t=>{if(!t)return t;const e=[];for(const n in t)e.push(...t[n]);return e})))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#n=null;#i=!1;constructor(t,e,n,i=!1){this._pageIndex=t,this._pageInfo=e,this._transport=n,this._stats=i?new _display_utils.StatTimer:null,this._pdfBug=i,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:n=0,offsetY:i=0,dontFlip:r=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const e=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,viewport:e,intent:n="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:s=null,annotationCanvasMap:a=null,pageColors:l=null,printAnnotationStorage:c=null}){this._stats?.time("Overall");const h=this._transport.getRenderingIntent(n,i,c);this.#i=!1,this.#r(),s||(s=this._transport.getOptionalContentConfig());let u=this._intentStates.get(h.cacheKey);u||(u=Object.create(null),this._intentStates.set(h.cacheKey,u)),u.streamReaderCancelTimeout&&(clearTimeout(u.streamReaderCancelTimeout),u.streamReaderCancelTimeout=null);const d=!!(h.renderingIntent&_util.RenderingIntentFlag.PRINT);u.displayReadyCapability||(u.displayReadyCapability=new _util.PromiseCapability,u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(h));const p=t=>{u.renderTasks.delete(f),(this._maybeCleanupAfterRender||d)&&(this.#i=!0),this.#o(!d),t?(f.capability.reject(t),this._abortOperatorList({intentState:u,reason:t instanceof Error?t:new Error(t)})):f.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},f=new InternalRenderTask({callback:p,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:a,operatorList:u.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!d,pdfBug:this._pdfBug,pageColors:l});(u.renderTasks||=new Set).add(f);const g=f.task;return Promise.all([u.displayReadyCapability.promise,s]).then((([t,e])=>{this.destroyed?p():(this._stats?.time("Rendering"),f.initializeGraphics({transparency:t,optionalContentConfig:e}),f.operatorListChanged())})).catch(p),g}getOperatorList({intent:t="display",annotationMode:e=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}={}){const i=this._transport.getRenderingIntent(t,e,n,!0);let r,o=this._intentStates.get(i.cacheKey);return o||(o=Object.create(null),this._intentStates.set(i.cacheKey,o)),o.opListReadCapability||(r=Object.create(null),r.operatorListChanged=function(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(r))},o.opListReadCapability=new _util.PromiseCapability,(o.renderTasks||=new Set).add(r),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(i)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===t,disableNormalization:!0===e},{highWaterMark:100,size:t=>t.items.length})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then((t=>_xfa_text.XfaText.textContent(t)));const e=this.streamTextContent(t);return new Promise((function(t,n){const i=e.getReader(),r={items:[],styles:Object.create(null)};!function e(){i.read().then((function({value:n,done:i}){i?t(r):(Object.assign(r.styles,n.styles),r.items.push(...n.items),e())}),n)}()}))}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const n of e.renderTasks)t.push(n.completed),n.cancel();return this.objs.clear(),this.#i=!1,this.#r(),Promise.all(t)}cleanup(t=!1){this.#i=!0;const e=this.#o(!1);return t&&e&&(this._stats&&=new _display_utils.StatTimer),e}#o(t=!1){if(this.#r(),!this.#i||this.destroyed)return!1;if(t)return this.#n=setTimeout((()=>{this.#n=null,this.#o(!1)}),DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#i=!1,!0}#r(){this.#n&&(clearTimeout(this.#n),this.#n=null)}_startRenderPage(t,e){const n=this._intentStates.get(e);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(t))}_renderPageChunk(t,e){for(let n=0,i=t.length;n<i;n++)e.operatorList.fnArray.push(t.fnArray[n]),e.operatorList.argsArray.push(t.argsArray[n]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const t of e.renderTasks)t.operatorListChanged();t.lastChunk&&this.#o(!0)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:n}){const{map:i,transfers:r}=n,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:i},r).getReader(),s=this._intentStates.get(e);s.streamReader=o;const a=()=>{o.read().then((({value:t,done:e})=>{e?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,s),a())}),(t=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const t of s.renderTasks)t.operatorListChanged();this.#o(!0)}if(s.displayReadyCapability)s.displayReadyCapability.reject(t);else{if(!s.opListReadCapability)throw t;s.opListReadCapability.reject(t)}}}))};a()}_abortOperatorList({intentState:t,reason:e,force:n=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!n){if(t.renderTasks.size>0)return;if(e instanceof _display_utils.RenderingCancelledException){let n=RENDERING_CANCELLED_TIMEOUT;return e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),void(t.streamReaderCancelTimeout=setTimeout((()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})}),n))}}if(t.streamReader.cancel(new _util.AbortException(e.message)).catch((()=>{})),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#s=new Set;#a=Promise.resolve();postMessage(t,e){const n={data:structuredClone(t,e?{transfer:e}:null)};this.#a.then((()=>{for(const t of this.#s)t.call(this,n)}))}addEventListener(t,e){this.#s.add(e)}removeEventListener(t,e){this.#s.delete(e)}terminate(){this.#s.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const t=document?.currentScript?.src;t&&(PDFWorkerUtil.fallbackWorkerSrc=t.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let n;try{if(n=new URL(t),!n.origin||"null"===n.origin)return!1}catch{return!1}const i=new URL(e,n);return n.origin===i.origin},PDFWorkerUtil.createCDNWrapper=function(t){const e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};class PDFWorker{static#l;constructor({name:t=null,port:e=null,verbosity:n=(0,_util.getVerbosityLevel)()}={}){if(this.name=t,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#l?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");return(PDFWorker.#l||=new WeakMap).set(e,this),void this._initializeFromPort(e)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",(function(){})),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t),n=new _message_handler.MessageHandler("main","worker",e),i=()=>{e.removeEventListener("error",r),n.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=()=>{this._webWorker||i()};e.addEventListener("error",r),n.on("test",(t=>{e.removeEventListener("error",r),this.destroyed?i():t?(this._messageHandler=n,this._port=e,this._webWorker=e,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),e.terminate())})),n.on("ready",(t=>{if(e.removeEventListener("error",r),this.destroyed)i();else try{o()}catch{this._setupFakeWorker()}}));const o=()=>{const t=new Uint8Array;n.send("test",t,[t.buffer])};return void o()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then((t=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const e=new LoopbackPort;this._port=e;const n="fake"+PDFWorkerUtil.fakeWorkerId++,i=new _message_handler.MessageHandler(n+"_worker",n,e);t.setup(i,e);const r=new _message_handler.MessageHandler(n,n+"_worker",e);this._messageHandler=r,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})})).catch((t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))}))}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#l?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#l?.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#c=new Map;#h=new Map;#u=new Map;#d=null;constructor(t,e,n,i,r){this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#p(t,e=null){const n=this.#c.get(t);if(n)return n;const i=this.messageHandler.sendWithPromise(t,e);return this.#c.set(t,i),i}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t,e=_util.AnnotationMode.ENABLE,n=null,i=!1){let r=_util.RenderingIntentFlag.DISPLAY,o=_annotation_storage.SerializableEmpty;switch(t){case"any":r=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":r=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:r+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:r+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:r+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,o=(r&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return i&&(r+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:r,cacheKey:`${r}_${o.hash}`,annotationStorageSerializable:o}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#d?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const e of this.#h.values())t.push(e._destroy());this.#h.clear(),this.#u.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then((()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#c.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()}),this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)(t instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}})),t.on("ReaderHeadersReady",(t=>{const n=new _util.PromiseCapability,i=this._fullReader;return i.headersReady.then((()=>{i.isStreamingSupported&&i.isRangeSupported||(this._lastProgress&&e.onProgress?.(this._lastProgress),i.onProgress=t=>{e.onProgress?.({loaded:t.loaded,total:t.total})}),n.resolve({isStreamingSupported:i.isStreamingSupported,isRangeSupported:i.isRangeSupported,contentLength:i.contentLength})}),n.reject),n.promise})),t.on("GetRangeReader",((t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(t.begin,t.end);n?(e.onPull=()=>{n.read().then((function({value:t,done:n}){n?e.close():((0,_util.assert)(t instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(t),1,[t]))})).catch((t=>{e.error(t)}))},e.onCancel=t=>{n.cancel(t),e.ready.catch((t=>{if(!this.destroyed)throw t}))}):e.close()})),t.on("GetDoc",(({pdfInfo:t})=>{this._numPages=t.numPages,this._htmlForXfa=t.htmlForXfa,delete t.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(t,this))})),t.on("DocException",(function(t){let n;switch(t.name){case"PasswordException":n=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":n=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(n)})),t.on("PasswordRequest",(t=>{if(this.#d=new _util.PromiseCapability,e.onPassword){const n=t=>{t instanceof Error?this.#d.reject(t):this.#d.resolve({password:t})};try{e.onPassword(n,t.code)}catch(t){this.#d.reject(t)}}else this.#d.reject(new _util.PasswordException(t.message,t.code));return this.#d.promise})),t.on("DataLoaded",(t=>{e.onProgress?.({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)})),t.on("StartRenderPage",(t=>{this.destroyed||this.#h.get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)})),t.on("commonobj",(([e,n,i])=>{if(!this.destroyed&&!this.commonObjs.has(e))switch(n){case"Font":const r=this._params;if("error"in i){const t=i.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(e,t);break}const o=r.pdfBug&&globalThis.FontInspector?.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,s=new _font_loader.FontFaceObject(i,{isEvalSupported:r.isEvalSupported,disableFontFace:r.disableFontFace,ignoreErrors:r.ignoreErrors,inspectFont:o});this.fontLoader.bind(s).catch((n=>t.sendWithPromise("FontFallback",{id:e}))).finally((()=>{!r.fontExtraProperties&&s.data&&(s.data=null),this.commonObjs.resolve(e,s)}));break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(e,i);break;default:throw new Error(`Got unknown common object type ${n}`)}})),t.on("obj",(([t,e,n,i])=>{if(this.destroyed)return;const r=this.#h.get(e);if(!r.objs.has(t))switch(n){case"Image":if(r.objs.resolve(t,i),i){let t;if(i.bitmap){const{width:e,height:n}=i;t=e*n*4}else t=i.data?.length||0;t>_util.MAX_IMAGE_SIZE_TO_CACHE&&(r._maybeCleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(t,i);break;default:throw new Error(`Got unknown object type ${n}`)}})),t.on("DocProgress",(t=>{this.destroyed||e.onProgress?.({loaded:t.loaded,total:t.total})})),t.on("FetchBuiltInCMap",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.")))),t.on("FetchStandardFontData",(t=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter."))))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfers:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},e).finally((()=>{this.annotationStorage.resetModified()}))}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,n=this.#u.get(e);if(n)return n;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then((t=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(e,t,this,this._params.pdfBug);return this.#h.set(e,n),n}));return this.#u.set(e,i),i}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return this.#p("GetFieldObjects")}hasJSActions(){return this.#p("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#p("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then((t=>new _optional_content_config.OptionalContentConfig(t)))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=this.#c.get(t);if(e)return e;const n=this.messageHandler.sendWithPromise(t,null).then((t=>({info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null})));return this.#c.set(t,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#h.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#c.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:t,enableXfa:e}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:e})}}class PDFObjects{#f=Object.create(null);#g(t){return this.#f[t]||={capability:new _util.PromiseCapability,data:null}}get(t,e=null){if(e){const n=this.#g(t);return n.capability.promise.then((()=>e(n.data))),null}const n=this.#f[t];if(!n?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return n.data}has(t){const e=this.#f[t];return e?.capability.settled||!1}resolve(t,e=null){const n=this.#g(t);n.data=e,n.capability.resolve()}clear(){for(const t in this.#f){const{data:e}=this.#f[t];e?.bitmap?.close()}this.#f=Object.create(null)}}class RenderTask{#m=null;constructor(t){this.#m=t,this.onContinue=null}get promise(){return this.#m.capability.promise}cancel(t=0){this.#m.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#m.operatorList;if(!t)return!1;const{annotationCanvasMap:e}=this.#m;return t.form||t.canvas&&e?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#y=new WeakSet;constructor({callback:t,params:e,objs:n,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:s,canvasFactory:a,filterFactory:l,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:u=null}){this.callback=t,this.params=e,this.objs=n,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=a,this.filterFactory=l,this._pdfBug=h,this.pageColors=u,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===c&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch((function(){}))}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#y.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#y.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:i,transform:r,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,e=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#y.delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,e))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame((()=>{this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#y.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var i=n(1),r=n(4),o=n(8);const s=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=s;class a{#v=!1;#b=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const n=this.#b.get(t);return void 0===n?e:Object.assign(e,n)}getRawValue(t){return this.#b.get(t)}remove(t){if(this.#b.delete(t),0===this.#b.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const t of this.#b.values())if(t instanceof r.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){const n=this.#b.get(t);let i=!1;if(void 0!==n)for(const[t,r]of Object.entries(e))n[t]!==r&&(i=!0,n[t]=r);else i=!0,this.#b.set(t,e);i&&this.#w(),e instanceof r.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return this.#b.has(t)}getAll(){return this.#b.size>0?(0,i.objectFromMap)(this.#b):null}setAll(t){for(const[e,n]of Object.entries(t))this.setValue(e,n)}get size(){return this.#b.size}#w(){this.#v||(this.#v=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#v&&(this.#v=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new l(this)}get serializable(){if(0===this.#b.size)return s;const t=new Map,e=new o.MurmurHash3_64,n=[],i=Object.create(null);let a=!1;for(const[n,o]of this.#b){const s=o instanceof r.AnnotationEditor?o.serialize(!1,i):o;s&&(t.set(n,s),e.update(`${n}:${JSON.stringify(s)}`),a||=!!s.bitmap)}if(a)for(const e of t.values())e.bitmap&&n.push(e.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfers:n}:s}}e.AnnotationStorage=a;class l extends a{#x;constructor(t){super();const{map:e,hash:n,transfers:i}=t.serializable,r=structuredClone(e,i?{transfer:i}:null);this.#x={map:r,hash:n,transfers:i}}get print(){(0,i.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#x}}e.PrintAnnotationStorage=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var i=n(5),r=n(1),o=n(6);class s{#_="";#S=!1;#C=null;#k=null;#A=null;#E=!1;#T=null;#M=this.focusin.bind(this);#O=this.focusout.bind(this);#I=!1;#D=!1;#F=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#P=!1;#R=s._zIndex++;static _borderLineWidth=-1;static _colorManager=new i.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(t){this.constructor===s&&(0,r.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:n,pageHeight:i,pageX:o,pageY:a}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,i],this.pageTranslation=[o,a];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,r.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new a({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e=null){if(s._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map((e=>[e,t.get(e)]))),e?.strings)for(const n of e.strings)s._l10nPromise.set(n,t.get(n));if(-1!==s._borderLineWidth)return;const n=getComputedStyle(document.documentElement);s._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){(0,r.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#P}set _isDraggable(t){this.#P=t,this.div?.classList.toggle("draggable",t)}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(2*t),this.y+=this.width*t/(2*e);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(2*t),this.y-=this.width*t/(2*e);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#R}setParent(t){null!==t&&(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#I?this.#I=!1:this.parent.setSelected(this))}focusout(t){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const e=t.relatedTarget;e?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,n,i){const[r,o]=this.parentDimensions;[n,i]=this.screenToPageTranslation(n,i),this.x=(t+n)/r,this.y=(e+i)/o,this.fixAndSetPosition()}#L([t,e],n,i){[n,i]=this.screenToPageTranslation(n,i),this.x+=n/t,this.y+=i/e,this.fixAndSetPosition()}translate(t,e){this.#L(this.parentDimensions,t,e)}translateInPage(t,e){this.#L(this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}drag(t,e){const[n,i]=this.parentDimensions;if(this.x+=t/n,this.y+=e/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:t,y:e}=this.div.getBoundingClientRect();this.parent.findNewParent(this,t,e)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:r,y:o}=this;const[s,a]=this.#N();r+=s,o+=a,this.div.style.left=`${(100*r).toFixed(2)}%`,this.div.style.top=`${(100*o).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#N(){const[t,e]=this.parentDimensions,{_borderLineWidth:n}=s,i=n/t,r=n/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}fixAndSetPosition(){const[t,e]=this.pageDimensions;let{x:n,y:i,width:r,height:o}=this;switch(r*=t,o*=e,n*=t,i*=e,this.rotation){case 0:n=Math.max(0,Math.min(t-r,n)),i=Math.max(0,Math.min(e-o,i));break;case 90:n=Math.max(0,Math.min(t-o,n)),i=Math.min(e,Math.max(r,i));break;case 180:n=Math.min(t,Math.max(r,n)),i=Math.min(e,Math.max(o,i));break;case 270:n=Math.min(t,Math.max(o,n)),i=Math.max(0,Math.min(e-r,i))}this.x=n/=t,this.y=i/=e;const[s,a]=this.#N();n+=s,i+=a;const{style:l}=this.div;l.left=`${(100*n).toFixed(2)}%`,l.top=`${(100*i).toFixed(2)}%`,this.moveInDOM()}static#B(t,e,n){switch(n){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}screenToPageTranslation(t,e){return s.#B(t,e,this.parentRotation)}pageTranslationToScreen(t,e){return s.#B(t,e,360-this.parentRotation)}#j(t){switch(t){case 90:{const[t,e]=this.pageDimensions;return[0,-t/e,e/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,e]=this.pageDimensions;return[0,t/e,-e/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,n]}=this,i=e*t,o=n*t;return r.FeatureTest.isCSSRoundSupported?[Math.round(i),Math.round(o)]:[i,o]}setDims(t,e){const[n,i]=this.parentDimensions;this.div.style.width=`${(100*t/n).toFixed(2)}%`,this.#E||(this.div.style.height=`${(100*e/i).toFixed(2)}%`),this.#C?.classList.toggle("small",t<s.SMALL_EDITOR_SIZE||e<s.SMALL_EDITOR_SIZE)}fixDims(){const{style:t}=this.div,{height:e,width:n}=t,i=n.endsWith("%"),r=!this.#E&&e.endsWith("%");if(i&&r)return;const[o,s]=this.parentDimensions;i||(t.width=`${(100*parseFloat(n)/o).toFixed(2)}%`),this.#E||r||(t.height=`${(100*parseFloat(e)/s).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#z(){if(this.#T)return;this.#T=document.createElement("div"),this.#T.classList.add("resizers");const t=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||t.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const e of t){const t=document.createElement("div");this.#T.append(t),t.classList.add("resizer",e),t.addEventListener("pointerdown",this.#$.bind(this,e)),t.addEventListener("contextmenu",o.noContextMenu)}this.div.prepend(this.#T)}#$(t,e){e.preventDefault();const{isMac:n}=r.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&n)return;const i=this.#H.bind(this,t),o=this._isDraggable;this._isDraggable=!1;const s={passive:!0,capture:!0};window.addEventListener("pointermove",i,s);const a=this.x,l=this.y,c=this.width,h=this.height,u=this.parent.div.style.cursor,d=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const p=()=>{this._isDraggable=o,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",i,s),this.parent.div.style.cursor=u,this.div.style.cursor=d;const t=this.x,e=this.y,n=this.width,r=this.height;t===a&&e===l&&n===c&&r===h||this.addCommands({cmd:()=>{this.width=n,this.height=r,this.x=t,this.y=e;const[i,o]=this.parentDimensions;this.setDims(i*n,o*r),this.fixAndSetPosition()},undo:()=>{this.width=c,this.height=h,this.x=a,this.y=l;const[t,e]=this.parentDimensions;this.setDims(t*c,e*h),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}#H(t,e){const[n,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,l=this.height,c=s.MIN_SIZE/n,h=s.MIN_SIZE/i,u=t=>Math.round(1e4*t)/1e4,d=this.#j(this.rotation),p=(t,e)=>[d[0]*t+d[2]*e,d[1]*t+d[3]*e],f=this.#j(360-this.rotation);let g,m,y=!1,v=!1;switch(t){case"topLeft":y=!0,g=(t,e)=>[0,0],m=(t,e)=>[t,e];break;case"topMiddle":g=(t,e)=>[t/2,0],m=(t,e)=>[t/2,e];break;case"topRight":y=!0,g=(t,e)=>[t,0],m=(t,e)=>[0,e];break;case"middleRight":v=!0,g=(t,e)=>[t,e/2],m=(t,e)=>[0,e/2];break;case"bottomRight":y=!0,g=(t,e)=>[t,e],m=(t,e)=>[0,0];break;case"bottomMiddle":g=(t,e)=>[t/2,e],m=(t,e)=>[t/2,0];break;case"bottomLeft":y=!0,g=(t,e)=>[0,e],m=(t,e)=>[t,0];break;case"middleLeft":v=!0,g=(t,e)=>[0,e/2],m=(t,e)=>[t,e/2]}const b=g(a,l),w=m(a,l);let x=p(...w);const _=u(r+x[0]),S=u(o+x[1]);let C=1,k=1,[A,E]=this.screenToPageTranslation(e.movementX,e.movementY);var T,M;if([A,E]=(T=A/n,M=E/i,[f[0]*T+f[2]*M,f[1]*T+f[3]*M]),y){const t=Math.hypot(a,l);C=k=Math.max(Math.min(Math.hypot(w[0]-b[0]-A,w[1]-b[1]-E)/t,1/a,1/l),c/a,h/l)}else v?C=Math.max(c,Math.min(1,Math.abs(w[0]-b[0]-A)))/a:k=Math.max(h,Math.min(1,Math.abs(w[1]-b[1]-E)))/l;const O=u(a*C),I=u(l*k);x=p(...m(O,I));const D=_-x[0],F=S-x[1];this.width=O,this.height=I,this.x=D,this.y=F,this.setDims(n*O,i*I),this.fixAndSetPosition()}async addAltTextButton(){if(this.#C)return;const t=this.#C=document.createElement("button");t.className="altText";const e=await s._l10nPromise.get("editor_alt_text_button_label");if(t.textContent=e,t.setAttribute("aria-label",e),t.tabIndex="0",t.addEventListener("contextmenu",o.noContextMenu),t.addEventListener("pointerdown",(t=>t.stopPropagation())),t.addEventListener("click",(t=>{t.preventDefault(),this._uiManager.editAltText(this)}),{capture:!0}),t.addEventListener("keydown",(e=>{e.target===t&&"Enter"===e.key&&(e.preventDefault(),this._uiManager.editAltText(this))})),this.#U(),this.div.append(t),!s.SMALL_EDITOR_SIZE){const e=40;s.SMALL_EDITOR_SIZE=Math.min(128,Math.round(t.getBoundingClientRect().width*(1+e/100)))}}async#U(){const t=this.#C;if(!t)return;if(!this.#_&&!this.#S)return t.classList.remove("done"),void this.#k?.remove();s._l10nPromise.get("editor_alt_text_edit_button_label").then((e=>{t.setAttribute("aria-label",e)}));let e=this.#k;if(!e){this.#k=e=document.createElement("span"),e.className="tooltip",e.setAttribute("role","tooltip");const n=e.id=`alt-text-tooltip-${this.id}`;t.setAttribute("aria-describedby",n);const i=100;t.addEventListener("mouseenter",(()=>{this.#A=setTimeout((()=>{this.#A=null,this.#k.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})}),i)})),t.addEventListener("mouseleave",(()=>{clearTimeout(this.#A),this.#A=null,this.#k?.classList.remove("show")}))}t.classList.add("done"),e.innerText=this.#S?await s._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#_,e.parentNode||t.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#_,decorative:this.#S}}set altTextData({altText:t,decorative:e}){this.#_===t&&this.#S===e||(this.#_=t,this.#S=e,this.#U())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#M),this.div.addEventListener("focusout",this.#O);const[t,e]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*e/t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*t/e).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),(0,i.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(t){const{isMac:e}=r.FeatureTest.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(this.#I=!0,this.#V(t))}#V(t){if(!this._isDraggable)return;const e=this._uiManager.isSelected(this);let n,i;this._uiManager.setUpDragSession(),e&&(n={passive:!0,capture:!0},i=t=>{const[e,n]=this.screenToPageTranslation(t.movementX,t.movementY);this._uiManager.dragSelectedEditors(e,n)},window.addEventListener("pointermove",i,n));const o=()=>{if(window.removeEventListener("pointerup",o),window.removeEventListener("blur",o),e&&window.removeEventListener("pointermove",i,n),this.#I=!1,!this._uiManager.endDragSession()){const{isMac:e}=r.FeatureTest.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",o),window.addEventListener("blur",o)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(t,e,n){t.changeParent(this),this.x=e,this.y=n,this.fixAndSetPosition()}getRect(t,e){const n=this.parentScale,[i,r]=this.pageDimensions,[o,s]=this.pageTranslation,a=t/n,l=e/n,c=this.x*i,h=this.y*r,u=this.width*i,d=this.height*r;switch(this.rotation){case 0:return[c+a+o,r-h-l-d+s,c+a+u+o,r-h-l+s];case 90:return[c+l+o,r-h+a+s,c+l+d+o,r-h+a+u+s];case 180:return[c-a-u+o,r-h+l+s,c-a+o,r-h+l+d+s];case 270:return[c-l-d+o,r-h-a-u+s,c-l+o,r-h-a+s];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[n,i,r,o]=t,s=r-n,a=o-i;switch(this.rotation){case 0:return[n,e-o,s,a];case 90:return[n,e-i,a,s];case 180:return[r,e-i,s,a];case 270:return[r,e-o,a,s];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#F=!0}disableEditMode(){this.#F=!1}isInEditMode(){return this.#F}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#M),this.div?.addEventListener("focusout",this.#O)}serialize(t=!1,e=null){(0,r.unreachable)("An editor must be serializable")}static deserialize(t,e,n){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:n});i.rotation=t.rotation;const[r,o]=i.pageDimensions,[s,a,l,c]=i.getRectInCurrentCoords(t.rect,o);return i.x=s/r,i.y=a/o,i.width=l/r,i.height=c/o,i}remove(){this.div.removeEventListener("focusin",this.#M),this.div.removeEventListener("focusout",this.#O),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#C?.remove(),this.#C=null,this.#k=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#z(),this.#T.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#T?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(t,e){}disableEditing(){this.#C&&(this.#C.hidden=!0)}enableEditing(){this.#C&&(this.#C.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#D}set isEditing(t){this.#D=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){this.#E=!0;const n=t/e,{style:i}=this.div;i.aspectRatio=n,i.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=s;class a extends s{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function(t,e,n){for(const i of n)e.addEventListener(i,t[i].bind(t))},e.opacityToHex=function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var i=n(1),r=n(6);class o{#W=0;getId(){return`${i.AnnotationEditorPrefix}${this.#W++}`}}class s{#q=(0,i.getUuid)();#W=0;#K=null;static get _isSVGFittingCanvas(){const t=new OffscreenCanvas(1,3).getContext("2d"),e=new Image;e.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const n=e.decode().then((()=>(t.drawImage(e,0,0,1,1,0,0,1,3),0===new Uint32Array(t.getImageData(0,0,1,1).data.buffer)[0])));return(0,i.shadow)(this,"_isSVGFittingCanvas",n)}async#X(t,e){this.#K||=new Map;let n=this.#K.get(t);if(null===n)return null;if(n?.bitmap)return n.refCounter+=1,n;try{let t;if(n||={bitmap:null,id:`image_${this.#q}_${this.#W++}`,refCounter:0,isSvg:!1},"string"==typeof e){n.url=e;const i=await fetch(e);if(!i.ok)throw new Error(i.statusText);t=await i.blob()}else t=n.file=e;if("image/svg+xml"===t.type){const e=s._isSVGFittingCanvas,i=new FileReader,r=new Image,o=new Promise(((t,o)=>{r.onload=()=>{n.bitmap=r,n.isSvg=!0,t()},i.onload=async()=>{const t=n.svgUrl=i.result;r.src=await e?`${t}#svgView(preserveAspectRatio(none))`:t},r.onerror=i.onerror=o}));i.readAsDataURL(t),await o}else n.bitmap=await createImageBitmap(t);n.refCounter=1}catch(t){console.error(t),n=null}return this.#K.set(t,n),n&&this.#K.set(n.id,n),n}async getFromFile(t){const{lastModified:e,name:n,size:i,type:r}=t;return this.#X(`${e}_${n}_${i}_${r}`,t)}async getFromUrl(t){return this.#X(t,t)}async getFromId(t){this.#K||=new Map;const e=this.#K.get(t);return e?e.bitmap?(e.refCounter+=1,e):e.file?this.getFromFile(e.file):this.getFromUrl(e.url):null}getSvgUrl(t){const e=this.#K.get(t);return e?.isSvg?e.svgUrl:null}deleteId(t){this.#K||=new Map;const e=this.#K.get(t);e&&(e.refCounter-=1,0===e.refCounter&&(e.bitmap=null))}isValidId(t){return t.startsWith(`image_${this.#q}_`)}}class a{#G=[];#Y=!1;#J;#Z=-1;constructor(t=128){this.#J=t}add({cmd:t,undo:e,mustExec:n,type:i=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}){if(n&&t(),this.#Y)return;const s={cmd:t,undo:e,type:i};if(-1===this.#Z)return this.#G.length>0&&(this.#G.length=0),this.#Z=0,void this.#G.push(s);if(r&&this.#G[this.#Z].type===i)return o&&(s.undo=this.#G[this.#Z].undo),void(this.#G[this.#Z]=s);const a=this.#Z+1;a===this.#J?this.#G.splice(0,1):(this.#Z=a,a<this.#G.length&&this.#G.splice(a)),this.#G.push(s)}undo(){-1!==this.#Z&&(this.#Y=!0,this.#G[this.#Z].undo(),this.#Y=!1,this.#Z-=1)}redo(){this.#Z<this.#G.length-1&&(this.#Z+=1,this.#Y=!0,this.#G[this.#Z].cmd(),this.#Y=!1)}hasSomethingToUndo(){return-1!==this.#Z}hasSomethingToRedo(){return this.#Z<this.#G.length-1}destroy(){this.#G=null}}e.CommandManager=a;class l{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=i.FeatureTest.platform;for(const[n,i,r={}]of t)for(const t of n){const n=t.startsWith("mac+");e&&n?(this.callbacks.set(t.slice(4),{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1))):e||n||(this.callbacks.set(t,{callback:i,options:r}),this.allKeys.add(t.split("+").at(-1)))}}#Q(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e}exec(t,e){if(!this.allKeys.has(e.key))return;const n=this.callbacks.get(this.#Q(e));if(!n)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:s=null}}=n;s&&!s(t,e)||(i.bind(t,...o)(),r||(e.stopPropagation(),e.preventDefault()))}}e.KeyboardManager=l;class c{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return(0,r.getColorValues)(t),(0,i.shadow)(this,"_colors",t)}convert(t){const e=(0,r.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[t,n]of this._colors)if(n.every(((t,n)=>t===e[n])))return c._colorsMapping.get(t);return e}getHexCode(t){const e=this._colors.get(t);return e?i.Util.makeHexColor(...e):t}}e.ColorManager=c;class h{#tt=null;#et=new Map;#nt=new Map;#it=null;#rt=null;#ot=new a;#st=0;#at=new Set;#lt=null;#ct=null;#ht=new Set;#ut=null;#dt=new o;#pt=!1;#ft=!1;#gt=null;#mt=i.AnnotationEditorType.NONE;#yt=new Set;#vt=null;#bt=this.blur.bind(this);#wt=this.focus.bind(this);#xt=this.copy.bind(this);#_t=this.cut.bind(this);#St=this.paste.bind(this);#Ct=this.keydown.bind(this);#kt=this.onEditingAction.bind(this);#At=this.onPageChanging.bind(this);#Et=this.onScaleChanging.bind(this);#Tt=this.onRotationChanging.bind(this);#Mt={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#Ot=[0,0];#It=null;#Dt=null;#Ft=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=h.prototype,e=t=>{const{activeElement:e}=document;return e&&t.#Dt.contains(e)&&t.hasSomethingToControl()},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new l([[["ctrl+a","mac+meta+a"],t.selectAll],[["ctrl+z","mac+meta+z"],t.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}constructor(t,e,n,i,o,s){this.#Dt=t,this.#Ft=e,this.#it=n,this._eventBus=i,this._eventBus._on("editingaction",this.#kt),this._eventBus._on("pagechanging",this.#At),this._eventBus._on("scalechanging",this.#Et),this._eventBus._on("rotationchanging",this.#Tt),this.#rt=o.annotationStorage,this.#ut=o.filterFactory,this.#vt=s,this.viewParameters={realScale:r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#Pt(),this.#Rt(),this._eventBus._off("editingaction",this.#kt),this._eventBus._off("pagechanging",this.#At),this._eventBus._off("scalechanging",this.#Et),this._eventBus._off("rotationchanging",this.#Tt);for(const t of this.#nt.values())t.destroy();this.#nt.clear(),this.#et.clear(),this.#ht.clear(),this.#tt=null,this.#yt.clear(),this.#ot.destroy(),this.#it.destroy()}get hcmFilter(){return(0,i.shadow)(this,"hcmFilter",this.#vt?this.#ut.addHCMFilter(this.#vt.foreground,this.#vt.background):"none")}get direction(){return(0,i.shadow)(this,"direction",getComputedStyle(this.#Dt).direction)}editAltText(t){this.#it?.editAltText(this,t)}onPageChanging({pageNumber:t}){this.#st=t-1}focusMainContainer(){this.#Dt.focus()}findParent(t,e){for(const n of this.#nt.values()){const{x:i,y:r,width:o,height:s}=n.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+s)return n}return null}disableUserSelect(t=!1){this.#Ft.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#ht.add(t)}removeShouldRescale(t){this.#ht.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*r.PixelsPerInch.PDF_TO_CSS_UNITS;for(const t of this.#ht)t.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(t){t.isEmpty()||!this.#rt||this.#rt.has(t.id)||this.#rt.setValue(t.id,t)}#Lt(){window.addEventListener("focus",this.#wt),window.addEventListener("blur",this.#bt)}#Rt(){window.removeEventListener("focus",this.#wt),window.removeEventListener("blur",this.#bt)}blur(){if(!this.hasSelection)return;const{activeElement:t}=document;for(const e of this.#yt)if(e.div.contains(t)){this.#gt=[e,t],e._focusEventsAllowed=!1;break}}focus(){if(!this.#gt)return;const[t,e]=this.#gt;this.#gt=null,e.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus()}#Nt(){window.addEventListener("keydown",this.#Ct,{capture:!0})}#Pt(){window.removeEventListener("keydown",this.#Ct,{capture:!0})}#Bt(){document.addEventListener("copy",this.#xt),document.addEventListener("cut",this.#_t),document.addEventListener("paste",this.#St)}#jt(){document.removeEventListener("copy",this.#xt),document.removeEventListener("cut",this.#_t),document.removeEventListener("paste",this.#St)}addEditListeners(){this.#Nt(),this.#Bt()}removeEditListeners(){this.#Pt(),this.#jt()}copy(t){if(t.preventDefault(),this.#tt?.commitOrRemove(),!this.hasSelection)return;const e=[];for(const t of this.#yt){const n=t.serialize(!0);n&&e.push(n)}0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();const{clipboardData:e}=t;for(const t of e.items)for(const e of this.#ct)if(e.isHandlingMimeForPasting(t.type))return void e.paste(t,this.currentLayer);let n=e.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(t){return void(0,i.warn)(`paste: "${t.message}".`)}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const t=[];for(const e of n){const n=r.deserialize(e);if(!n)return;t.push(n)}const e=()=>{for(const e of t)this.#zt(e);this.#$t(t)},i=()=>{for(const e of t)e.remove()};this.addCommands({cmd:e,undo:i,mustExec:!0})}catch(t){(0,i.warn)(`paste: "${t.message}".`)}}keydown(t){this.getActive()?.shouldGetKeyboardEvents()||h._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","delete","selectAll"].includes(t.name)&&this[t.name]()}#Ht(t){Object.entries(t).some((([t,e])=>this.#Mt[t]!==e))&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Mt,t)})}#Ut(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#Lt(),this.#Nt(),this.#Bt(),this.#Ht({isEditing:this.#mt!==i.AnnotationEditorType.NONE,isEmpty:this.#Vt(),hasSomethingToUndo:this.#ot.hasSomethingToUndo(),hasSomethingToRedo:this.#ot.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Rt(),this.#Pt(),this.#jt(),this.#Ht({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#ct){this.#ct=t;for(const t of this.#ct)this.#Ut(t.defaultPropertiesToUpdate)}}getId(){return this.#dt.getId()}get currentLayer(){return this.#nt.get(this.#st)}getLayer(t){return this.#nt.get(t)}get currentPageIndex(){return this.#st}addLayer(t){this.#nt.set(t.pageIndex,t),this.#pt?t.enable():t.disable()}removeLayer(t){this.#nt.delete(t.pageIndex)}updateMode(t,e=null){if(this.#mt!==t){if(this.#mt=t,t===i.AnnotationEditorType.NONE)return this.setEditingState(!1),void this.#Wt();this.setEditingState(!0),this.#qt(),this.unselectAll();for(const e of this.#nt.values())e.updateMode(t);if(e)for(const t of this.#et.values())if(t.annotationElementId===e){this.setSelected(t),t.enterInEditMode();break}}}updateToolbar(t){t!==this.#mt&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(this.#ct)if(t!==i.AnnotationEditorParamsType.CREATE){for(const n of this.#yt)n.updateParams(t,e);for(const n of this.#ct)n.updateDefaultParams(t,e)}else this.currentLayer.addNewEditor(t)}enableWaiting(t=!1){if(this.#ft!==t){this.#ft=t;for(const e of this.#nt.values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}#qt(){if(!this.#pt){this.#pt=!0;for(const t of this.#nt.values())t.enable()}}#Wt(){if(this.unselectAll(),this.#pt){this.#pt=!1;for(const t of this.#nt.values())t.disable()}}getEditors(t){const e=[];for(const n of this.#et.values())n.pageIndex===t&&e.push(n);return e}getEditor(t){return this.#et.get(t)}addEditor(t){this.#et.set(t.id,t)}removeEditor(t){this.#et.delete(t.id),this.unselect(t),t.annotationElementId&&this.#at.has(t.annotationElementId)||this.#rt?.remove(t.id)}addDeletedAnnotationElement(t){this.#at.add(t.annotationElementId),t.deleted=!0}isDeletedAnnotationElement(t){return this.#at.has(t)}removeDeletedAnnotationElement(t){this.#at.delete(t.annotationElementId),t.deleted=!1}#zt(t){const e=this.#nt.get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)}setActiveEditor(t){this.#tt!==t&&(this.#tt=t,t&&this.#Ut(t.propertiesToUpdate))}toggleSelected(t){if(this.#yt.has(t))return this.#yt.delete(t),t.unselect(),void this.#Ht({hasSelectedEditor:this.hasSelection});this.#yt.add(t),t.select(),this.#Ut(t.propertiesToUpdate),this.#Ht({hasSelectedEditor:!0})}setSelected(t){for(const e of this.#yt)e!==t&&e.unselect();this.#yt.clear(),this.#yt.add(t),t.select(),this.#Ut(t.propertiesToUpdate),this.#Ht({hasSelectedEditor:!0})}isSelected(t){return this.#yt.has(t)}unselect(t){t.unselect(),this.#yt.delete(t),this.#Ht({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#yt.size}undo(){this.#ot.undo(),this.#Ht({hasSomethingToUndo:this.#ot.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Vt()})}redo(){this.#ot.redo(),this.#Ht({hasSomethingToUndo:!0,hasSomethingToRedo:this.#ot.hasSomethingToRedo(),isEmpty:this.#Vt()})}addCommands(t){this.#ot.add(t),this.#Ht({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Vt()})}#Vt(){if(0===this.#et.size)return!0;if(1===this.#et.size)for(const t of this.#et.values())return t.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const t=[...this.#yt];this.addCommands({cmd:()=>{for(const e of t)e.remove()},undo:()=>{for(const e of t)this.#zt(e)},mustExec:!0})}commitOrRemove(){this.#tt?.commitOrRemove()}hasSomethingToControl(){return this.#tt||this.hasSelection}#$t(t){this.#yt.clear();for(const e of t)e.isEmpty()||(this.#yt.add(e),e.select());this.#Ht({hasSelectedEditor:!0})}selectAll(){for(const t of this.#yt)t.commit();this.#$t(this.#et.values())}unselectAll(){if(this.#tt)this.#tt.commitOrRemove();else if(this.hasSelection){for(const t of this.#yt)t.unselect();this.#yt.clear(),this.#Ht({hasSelectedEditor:!1})}}translateSelectedEditors(t,e,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;this.#Ot[0]+=t,this.#Ot[1]+=e;const[i,r]=this.#Ot,o=[...this.#yt];this.#It&&clearTimeout(this.#It),this.#It=setTimeout((()=>{this.#It=null,this.#Ot[0]=this.#Ot[1]=0,this.addCommands({cmd:()=>{for(const t of o)this.#et.has(t.id)&&t.translateInPage(i,r)},undo:()=>{for(const t of o)this.#et.has(t.id)&&t.translateInPage(-i,-r)},mustExec:!1})}),1e3);for(const n of o)n.translateInPage(t,e)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#lt=new Map;for(const t of this.#yt)this.#lt.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#lt)return!1;this.disableUserSelect(!1);const t=this.#lt;this.#lt=null;let e=!1;for(const[{x:n,y:i,pageIndex:r},o]of t)o.newX=n,o.newY=i,o.newPageIndex=r,e||=n!==o.savedX||i!==o.savedY||r!==o.savedPageIndex;if(!e)return!1;const n=(t,e,n,i)=>{if(this.#et.has(t.id)){const r=this.#nt.get(i);r?t._setParentAndPosition(r,e,n):(t.pageIndex=i,t.x=e,t.y=n)}};return this.addCommands({cmd:()=>{for(const[e,{newX:i,newY:r,newPageIndex:o}]of t)n(e,i,r,o)},undo:()=>{for(const[e,{savedX:i,savedY:r,savedPageIndex:o}]of t)n(e,i,r,o)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(this.#lt)for(const n of this.#lt.keys())n.drag(t,e)}rebuild(t){if(null===t.parent){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}isActive(t){return this.#tt===t}getActive(){return this.#tt}getMode(){return this.#mt}get imageManager(){return(0,i.shadow)(this,"imageManager",new s)}}e.AnnotationEditorUIManager=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=function(t){console.log("Deprecated API usage: "+t)},e.getColorValues=function(t){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const n of t.keys()){e.style.color=n;const i=window.getComputedStyle(e).color;t.set(n,v(i))}e.remove()},e.getCurrentTransform=function(t){const{a:e,b:n,c:i,d:r,e:o,f:s}=t.getTransform();return[e,n,i,r,o,s]},e.getCurrentTransformInverse=function(t){const{a:e,b:n,c:i,d:r,e:o,f:s}=t.getTransform().invertSelf();return[e,n,i,r,o,s]},e.getFilenameFromUrl=function(t,e=!1){return e||([t]=t.split(/[#?]/,1)),t.substring(t.lastIndexOf("/")+1)},e.getPdfFilenameFromUrl=function(t,e="document.pdf"){if("string"!=typeof t)return e;if(g(t))return(0,r.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t);let o=n.exec(i[1])||n.exec(i[2])||n.exec(i[3]);if(o&&(o=o[0],o.includes("%")))try{o=n.exec(decodeURIComponent(o))[0]}catch{}return o||e},e.getRGB=v,e.getXfaPageViewport=function(t,{scale:e=1,rotation:n=0}){const{width:i,height:r}=t.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new p({viewBox:o,scale:e,rotation:n})},e.isDataScheme=g,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=m,e.loadScript=function(t,e=!1){return new Promise(((n,i)=>{const r=document.createElement("script");r.src=t,r.onload=function(t){e&&r.remove(),n(t)},r.onerror=function(){i(new Error(`Cannot load script at: ${r.src}`))},(document.head||document.documentElement).append(r)}))},e.noContextMenu=function(t){t.preventDefault()},e.setLayerDimensions=function(t,e,n=!1,i=!0){if(e instanceof p){const{pageWidth:i,pageHeight:o}=e.rawDims,{style:s}=t,a=r.FeatureTest.isCSSRoundSupported,l=`var(--scale-factor) * ${i}px`,c=`var(--scale-factor) * ${o}px`,h=a?`round(${l}, 1px)`:`calc(${l})`,u=a?`round(${c}, 1px)`:`calc(${c})`;n&&e.rotation%180!=0?(s.width=u,s.height=h):(s.width=h,s.height=u)}i&&t.setAttribute("data-main-rotation",e.rotation)};var i=n(7),r=n(1);const o="http://www.w3.org/2000/svg";class s{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=s;class a extends i.BaseFilterFactory{#Kt;#Xt;#e;#Gt;#Yt;#Jt;#Zt;#Qt;#te;#ee;#W=0;constructor({docId:t,ownerDocument:e=globalThis.document}={}){super(),this.#e=t,this.#Gt=e}get#K(){return this.#Kt||=new Map}get#ne(){if(!this.#Xt){const t=this.#Gt.createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;const n=this.#Gt.createElementNS(o,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#Xt=this.#Gt.createElementNS(o,"defs"),t.append(n),n.append(this.#Xt),this.#Gt.body.append(t)}return this.#Xt}addFilter(t){if(!t)return"none";let e,n,i,r,o=this.#K.get(t);if(o)return o;if(1===t.length){const o=t[0],s=new Array(256);for(let t=0;t<256;t++)s[t]=o[t]/255;r=e=n=i=s.join(",")}else{const[o,s,a]=t,l=new Array(256),c=new Array(256),h=new Array(256);for(let t=0;t<256;t++)l[t]=o[t]/255,c[t]=s[t]/255,h[t]=a[t]/255;e=l.join(","),n=c.join(","),i=h.join(","),r=`${e}${n}${i}`}if(o=this.#K.get(r),o)return this.#K.set(t,o),o;const s=`g_${this.#e}_transfer_map_${this.#W++}`,a=`url(#${s})`;this.#K.set(t,a),this.#K.set(r,a);const l=this.#ie(s);return this.#re(e,n,i,l),a}addHCMFilter(t,e){const n=`${t}-${e}`;if(this.#Jt===n)return this.#Zt;if(this.#Jt=n,this.#Zt="none",this.#Yt?.remove(),!t||!e)return this.#Zt;const i=this.#oe(t);t=r.Util.makeHexColor(...i);const o=this.#oe(e);if(e=r.Util.makeHexColor(...o),this.#ne.style.color="","#000000"===t&&"#ffffff"===e||t===e)return this.#Zt;const s=new Array(256);for(let t=0;t<=255;t++){const e=t/255;s[t]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const a=s.join(","),l=`g_${this.#e}_hcm_filter`,c=this.#Qt=this.#ie(l);this.#re(a,a,a,c),this.#se(c);const h=(t,e)=>{const n=i[t]/255,r=o[t]/255,s=new Array(e+1);for(let t=0;t<=e;t++)s[t]=n+t/e*(r-n);return s.join(",")};return this.#re(h(0,5),h(1,5),h(2,5),c),this.#Zt=`url(#${l})`,this.#Zt}addHighlightHCMFilter(t,e,n,i){const r=`${t}-${e}-${n}-${i}`;if(this.#te===r)return this.#ee;if(this.#te=r,this.#ee="none",this.#Qt?.remove(),!t||!e)return this.#ee;const[o,s]=[t,e].map(this.#oe.bind(this));let a=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),l=Math.round(.2126*s[0]+.7152*s[1]+.0722*s[2]),[c,h]=[n,i].map(this.#oe.bind(this));l<a&&([a,l,c,h]=[l,a,h,c]),this.#ne.style.color="";const u=(t,e,n)=>{const i=new Array(256),r=(l-a)/n,o=t/255,s=(e-t)/(255*n);let c=0;for(let t=0;t<=n;t++){const e=Math.round(a+t*r),n=o+t*s;for(let t=c;t<=e;t++)i[t]=n;c=e+1}for(let t=c;t<256;t++)i[t]=i[c-1];return i.join(",")},d=`g_${this.#e}_hcm_highlight_filter`,p=this.#Qt=this.#ie(d);return this.#se(p),this.#re(u(c[0],h[0],5),u(c[1],h[1],5),u(c[2],h[2],5),p),this.#ee=`url(#${d})`,this.#ee}destroy(t=!1){t&&(this.#Zt||this.#ee)||(this.#Xt&&(this.#Xt.parentNode.parentNode.remove(),this.#Xt=null),this.#Kt&&(this.#Kt.clear(),this.#Kt=null),this.#W=0)}#se(t){const e=this.#Gt.createElementNS(o,"feColorMatrix");e.setAttribute("type","matrix"),e.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(e)}#ie(t){const e=this.#Gt.createElementNS(o,"filter");return e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("id",t),this.#ne.append(e),e}#ae(t,e,n){const i=this.#Gt.createElementNS(o,e);i.setAttribute("type","discrete"),i.setAttribute("tableValues",n),t.append(i)}#re(t,e,n,i){const r=this.#Gt.createElementNS(o,"feComponentTransfer");i.append(r),this.#ae(r,"feFuncR",t),this.#ae(r,"feFuncG",e),this.#ae(r,"feFuncB",n)}#oe(t){return this.#ne.style.color=t,v(getComputedStyle(this.#ne).getPropertyValue("color"))}}e.DOMFilterFactory=a;class l extends i.BaseCanvasFactory{constructor({ownerDocument:t=globalThis.document}={}){super(),this._document=t}_createCanvas(t,e){const n=this._document.createElement("canvas");return n.width=t,n.height=e,n}}async function c(t,e=!1){if(m(t,document.baseURI)){const n=await fetch(t);if(!n.ok)throw new Error(n.statusText);return e?new Uint8Array(await n.arrayBuffer()):(0,r.stringToBytes)(await n.text())}return new Promise(((n,i)=>{const o=new XMLHttpRequest;o.open("GET",t,!0),e&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(200===o.status||0===o.status){let t;if(e&&o.response?t=new Uint8Array(o.response):!e&&o.responseText&&(t=(0,r.stringToBytes)(o.responseText)),t)return void n(t)}i(new Error(o.statusText))}},o.send(null)}))}e.DOMCanvasFactory=l;class h extends i.BaseCMapReaderFactory{_fetchData(t,e){return c(t,this.isCompressed).then((t=>({cMapData:t,compressionType:e})))}}e.DOMCMapReaderFactory=h;class u extends i.BaseStandardFontDataFactory{_fetchData(t){return c(t,!0)}}e.DOMStandardFontDataFactory=u;class d extends i.BaseSVGFactory{_createSVG(t){return document.createElementNS(o,t)}}e.DOMSVGFactory=d;class p{constructor({viewBox:t,scale:e,rotation:n,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}){this.viewBox=t,this.scale=e,this.rotation=n,this.offsetX=i,this.offsetY=r;const s=(t[2]+t[0])/2,a=(t[3]+t[1])/2;let l,c,h,u,d,p,f,g;switch((n%=360)<0&&(n+=360),n){case 180:l=-1,c=0,h=0,u=1;break;case 90:l=0,c=1,h=1,u=0;break;case 270:l=0,c=-1,h=-1,u=0;break;case 0:l=1,c=0,h=0,u=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,u=-u),0===l?(d=Math.abs(a-t[1])*e+i,p=Math.abs(s-t[0])*e+r,f=(t[3]-t[1])*e,g=(t[2]-t[0])*e):(d=Math.abs(s-t[0])*e+i,p=Math.abs(a-t[1])*e+r,f=(t[2]-t[0])*e,g=(t[3]-t[1])*e),this.transform=[l*e,c*e,h*e,u*e,d-l*e*s-h*e*a,p-c*e*s-u*e*a],this.width=f,this.height=g}get rawDims(){const{viewBox:t}=this;return(0,r.shadow)(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:n=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new p({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:n,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){return r.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){const e=r.Util.applyTransform([t[0],t[1]],this.transform),n=r.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],n[0],n[1]]}convertToPdfPoint(t,e){return r.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=p;class f extends r.BaseException{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function g(t){const e=t.length;let n=0;for(;n<e&&""===t[n].trim();)n++;return"data:"===t.substring(n,n+5).toLowerCase()}function m(t,e){try{const{protocol:n}=e?new URL(t,e):new URL(t);return"http:"===n||"https:"===n}catch{return!1}}let y;function v(t){if(t.startsWith("#")){const e=parseInt(t.slice(1),16);return[(16711680&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map((t=>parseInt(t))):t.startsWith("rgba(")?t.slice(5,-1).split(",").map((t=>parseInt(t))).slice(0,3):((0,r.warn)(`Not a valid color format: "${t}"`),[0,0,0])}e.RenderingCancelledException=f,e.StatTimer=class{started=Object.create(null);times=[];time(t){t in this.started&&(0,r.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,r.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:t}of this.times)e=Math.max(t.length,e);for(const{name:n,start:i,end:r}of this.times)t.push(`${n.padEnd(e)} ${r-i}ms\n`);return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||"string"!=typeof t)return null;y||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const e=y.exec(t);if(!e)return null;const n=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let s=parseInt(e[5],10);s=s>=0&&s<=59?s:0;let a=parseInt(e[6],10);a=a>=0&&a<=59?a:0;const l=e[7]||"Z";let c=parseInt(e[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(e[9],10)||0;return h=h>=0&&h<=59?h:0,"-"===l?(o+=c,s+=h):"+"===l&&(o-=c,s-=h),new Date(Date.UTC(n,i,r,o,s,a))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var i=n(1);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addHighlightHCMFilter(t,e,n,i){return"none"}destroy(t=!1){}}e.BaseFilterFactory=r;class o{constructor(){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(t,e);return{canvas:n,context:n.getContext("2d")}}reset(t,e,n){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||n<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=n}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,i.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=o;class s{constructor({baseUrl:t=null,isCompressed:e=!0}){this.constructor===s&&(0,i.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":""),n=this.isCompressed?i.CMapCompressionType.BINARY:i.CMapCompressionType.NONE;return this._fetchData(e,n).catch((t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)}))}_fetchData(t,e){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=s;class a{constructor({baseUrl:t=null}){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetchData(e).catch((t=>{throw new Error(`Unable to load font data at: ${e}`)}))}_fetchData(t){(0,i.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=a;class l{constructor(){this.constructor===l&&(0,i.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e,n=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),n||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if("string"!=typeof t)throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,i.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=n(1);const r=3285377520,o=4294901760,s=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:r,this.h2=t?4294967295&t:r}update(t){let e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!(0,i.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),n=e.byteLength}const r=n>>2,a=n-4*r,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,u=this.h1,d=this.h2;const p=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<r;t++)1&t?(c=l[t],c=c*p&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*p&o|h*g&s,h=h<<15|h>>>17,h=h*f&o|h*m&s,d^=h,d=d<<13|d>>>19,d=5*d+3864292196);switch(c=0,a){case 3:c^=e[4*r+2]<<16;case 2:c^=e[4*r+1]<<8;case 1:c^=e[4*r],c=c*p&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,1&r?u^=c:d^=c}this.h1=u,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&o|36045*t&s,e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,t=444984403*t&o|60499*t&s,e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var i=n(1);e.FontLoader=class{#le=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#le.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){if(t&&!this.#le.has(t.loadedName))if((0,i.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:r}=t,o=new FontFace(e,n,r);this.addNativeFontFace(o);try{await o.load(),this.#le.add(e)}catch{(0,i.warn)(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}}else(0,i.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t.systemFontInfo);if(this.isFontLoadingAPISupported){const e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(n){throw(0,i.warn)(`Failed to load font '${e.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise((e=>{const n=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,n)}))}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return(0,i.shadow)(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){let t=!1;return(i.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),(0,i.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){const{loadingRequests:e}=this,n={done:!1,complete:function(){for((0,i.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;e.length>0&&e[0].done;){const t=e.shift();setTimeout(t.callback,0)}},callback:t};return e.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,i.shadow)(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function r(t,e,n,i){return t.substring(0,e)+i+t.substring(e+n)}let o,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const l=a.getContext("2d");let c=0;const h=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=r(u,976,h.length,h);const d=1482184792;let p=n(u,16);for(o=0,s=h.length-3;o<s;o+=4)p=p-d+n(h,o)|0;o<h.length&&(p=p-d+n(h+"XXX",o)|0),u=r(u,16,4,(0,i.string32)(p));const f=`@font-face {font-family:"${h}";src:url(data:font/opentype;base64,${btoa(u)});}`;this.insertRule(f);const g=this._document.createElement("div");g.style.visibility="hidden",g.style.width=g.style.height="10px",g.style.position="absolute",g.style.top=g.style.left="0px";for(const e of[t.loadedName,h]){const t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=e,g.append(t)}this._document.body.append(g),function t(e,n){if(++c>30)return(0,i.warn)("Load test font never loaded."),void n();l.font="30px "+e,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0?n():setTimeout(t.bind(null,e,n))}(h,(()=>{g.remove(),e.complete()}))}},e.FontFaceObject=class{constructor(t,{isEvalSupported:e=!0,disableFontFace:n=!1,ignoreErrors:i=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const e in t)this[e]=t[e];this.isEvalSupported=!1!==e,this.disableFontFace=!0===n,this.ignoreErrors=!0===i,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=(0,i.bytesToString)(this.data),e=`url(data:${this.mimetype};base64,${btoa(t)});`;let n;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${e}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${e}}`;return this._inspectFont?.(this,e),n}getPathGenerator(t,e){if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];let n;try{n=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return(0,i.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&i.FeatureTest.isEvalSupported){const t=[];for(const e of n){const n=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",n,");\n")}return this.compiledGlyphs[e]=new Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(const i of n)"scale"===i.cmd&&(i.args=[e,-e]),t[i.cmd].apply(t,i.args)}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var i=n(7);n(1);const r=function(t){return new Promise(((e,n)=>{__webpack_require__(3237).readFile(t,((t,i)=>{!t&&i?e(new Uint8Array(i)):n(new Error(t))}))}))};class o extends i.BaseFilterFactory{}e.NodeFilterFactory=o;class s extends i.BaseCanvasFactory{_createCanvas(t,e){return __webpack_require__(7640).createCanvas(t,e)}}e.NodeCanvasFactory=s;class a extends i.BaseCMapReaderFactory{_fetchData(t,e){return r(t).then((t=>({cMapData:t,compressionType:e})))}}e.NodeCMapReaderFactory=a;class l extends i.BaseStandardFontDataFactory{_fetchData(t){return r(t)}}e.NodeStandardFontDataFactory=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var i=n(1),r=n(6),o=n(12),s=n(13);const a=4096,l=16;class c{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,n){let i;return void 0!==this.cache[t]?(i=this.cache[t],this.canvasFactory.reset(i,e,n)):(i=this.canvasFactory.create(e,n),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function h(t,e,n,i,o,s,a,l,c,h){const[u,d,p,f,g,m]=(0,r.getCurrentTransform)(t);if(0===d&&0===p){const r=a*u+g,y=Math.round(r),v=l*f+m,b=Math.round(v),w=(a+c)*u+g,x=Math.abs(Math.round(w)-y)||1,_=(l+h)*f+m,S=Math.abs(Math.round(_)-b)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(f),y,b),t.drawImage(e,n,i,o,s,0,0,x,S),t.setTransform(u,d,p,f,g,m),[x,S]}if(0===u&&0===f){const r=l*p+g,y=Math.round(r),v=a*d+m,b=Math.round(v),w=(l+h)*p+g,x=Math.abs(Math.round(w)-y)||1,_=(a+c)*d+m,S=Math.abs(Math.round(_)-b)||1;return t.setTransform(0,Math.sign(d),Math.sign(p),0,y,b),t.drawImage(e,n,i,o,s,0,0,S,x),t.setTransform(u,d,p,f,g,m),[S,x]}return t.drawImage(e,n,i,o,s,a,l,c,h),[Math.hypot(u,d)*c,Math.hypot(p,f)*h]}class u{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=i.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=i.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,n){[e,n]=i.Util.applyTransform([e,n],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(t,e){const n=i.Util.applyTransform(e,t),r=i.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,n[0],r[0]),this.minY=Math.min(this.minY,n[1],r[1]),this.maxX=Math.max(this.maxX,n[0],r[0]),this.maxY=Math.max(this.maxY,n[1],r[1])}updateScalingPathMinMax(t,e){i.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,n,r,o,s,a,l,c,h){const u=i.Util.bezierBoundingBox(e,n,r,o,s,a,l,c);if(h)return h[0]=Math.min(h[0],u[0],u[2]),h[1]=Math.max(h[1],u[0],u[2]),h[2]=Math.min(h[2],u[1],u[3]),void(h[3]=Math.max(h[3],u[1],u[3]));this.updateRectMinMax(t,u)}getPathBoundingBox(t=o.PathType.FILL,e=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(t===o.PathType.STROKE){e||(0,i.unreachable)("Stroke bounding box must include transform.");const t=i.Util.singularValueDecompose2dScale(e),r=t[0]*this.lineWidth/2,o=t[1]*this.lineWidth/2;n[0]-=r,n[1]-=o,n[2]+=r,n[3]+=o}return n}updateClipFromPath(){const t=i.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(t=o.PathType.FILL,e=null){return i.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function d(t,e){if("undefined"!=typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);const n=e.height,r=e.width,o=n%l,s=(n-o)/l,a=0===o?s:s+1,c=t.createImageData(r,l);let h,u=0;const d=e.data,p=c.data;let f,g,m,y;if(e.kind===i.ImageKind.GRAYSCALE_1BPP){const e=d.byteLength,n=new Uint32Array(p.buffer,0,p.byteLength>>2),y=n.length,v=r+7>>3,b=4294967295,w=i.FeatureTest.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(m=f<s?l:o,h=0,g=0;g<m;g++){const t=e-u;let i=0;const o=t>v?r:8*t-7,s=-8&o;let a=0,l=0;for(;i<s;i+=8)l=d[u++],n[h++]=128&l?b:w,n[h++]=64&l?b:w,n[h++]=32&l?b:w,n[h++]=16&l?b:w,n[h++]=8&l?b:w,n[h++]=4&l?b:w,n[h++]=2&l?b:w,n[h++]=1&l?b:w;for(;i<o;i++)0===a&&(l=d[u++],a=128),n[h++]=l&a?b:w,a>>=1}for(;h<y;)n[h++]=0;t.putImageData(c,0,f*l)}}else if(e.kind===i.ImageKind.RGBA_32BPP){for(g=0,y=r*l*4,f=0;f<s;f++)p.set(d.subarray(u,u+y)),u+=y,t.putImageData(c,0,g),g+=l;f<a&&(y=r*o*4,p.set(d.subarray(u,u+y)),t.putImageData(c,0,g))}else{if(e.kind!==i.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${e.kind}`);for(m=l,y=r*m,f=0;f<a;f++){for(f>=s&&(m=o,y=r*m),h=0,g=y;g--;)p[h++]=d[u++],p[h++]=d[u++],p[h++]=d[u++],p[h++]=255;t.putImageData(c,0,f*l)}}}function p(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);const n=e.height,i=e.width,r=n%l,o=(n-r)/l,a=0===r?o:o+1,c=t.createImageData(i,l);let h=0;const u=e.data,d=c.data;for(let e=0;e<a;e++){const n=e<o?l:r;({srcPos:h}=(0,s.convertBlackAndWhiteToRGBA)({src:u,srcPos:h,dest:d,width:i,height:n,nonBlackColor:0})),t.putImageData(c,0,e*l)}}function f(t,e){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of n)void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function g(t){if(t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),!i.isNodeJS){const{filter:e}=t;"none"!==e&&""!==e&&(t.filter="none")}}function m(t,e,n,i){const r=t.length;for(let o=3;o<r;o+=4){const r=t[o];if(0===r)t[o-3]=e,t[o-2]=n,t[o-1]=i;else if(r<255){const s=255-r;t[o-3]=t[o-3]*r+e*s>>8,t[o-2]=t[o-2]*r+n*s>>8,t[o-1]=t[o-1]*r+i*s>>8}}}function y(t,e,n){const i=t.length;for(let r=3;r<i;r+=4){const i=n?n[t[r]]:t[r];e[r]=e[r]*i*.00392156862745098|0}}function v(t,e,n){const i=t.length;for(let r=3;r<i;r+=4){const i=77*t[r-3]+152*t[r-2]+28*t[r-1];e[r]=n?e[r]*n[i>>8]>>8:e[r]*i>>16}}function b(t,e,n,i){const r=i[0],o=i[1],s=i[2]-r,a=i[3]-o;0!==s&&0!==a&&(function(t,e,n,i,r,o,s,a,l,c,h){const u=!!o,d=u?o[0]:0,p=u?o[1]:0,f=u?o[2]:0,g="Luminosity"===r?v:y,b=Math.min(i,Math.ceil(1048576/n));for(let r=0;r<i;r+=b){const o=Math.min(b,i-r),y=t.getImageData(a-c,r+(l-h),n,o),v=e.getImageData(a,r+l,n,o);u&&m(y.data,d,p,f),g(y.data,v.data,s),e.putImageData(v,a,r+l)}}(e.context,n,s,a,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(n.canvas,0,0),t.restore())}function w(t,e){const n=i.Util.singularValueDecompose2dScale(t);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const o=Math.fround((globalThis.devicePixelRatio||1)*r.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:n[0]<=o||n[1]<=o}const x=["butt","round","square"],_=["miter","round","bevel"],S={},C={};class k{constructor(t,e,n,i,r,{optionalContentConfig:o,markedContentStack:s=null},a,l){this.ctx=t,this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=n,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=s||[],this.optionalContentConfig=o,this.cachedCanvases=new c(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=l,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:n=!1,background:i=null}){const o=this.ctx.canvas.width,s=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=a,n){const t=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...(0,r.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),g(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=(0,r.getCurrentTransform)(this.ctx)}executeOperatorList(t,e,n,r){const o=t.argsArray,s=t.fnArray;let a=e||0;const l=o.length;if(l===a)return a;const c=l-a>10&&"function"==typeof n,h=c?Date.now()+15:0;let u=0;const d=this.commonObjs,p=this.objs;let f;for(;;){if(void 0!==r&&a===r.nextBreakPoint)return r.breakIt(a,n),a;if(f=s[a],f!==i.OPS.dependency)this[f].apply(this,o[a]);else for(const t of o[a]){const e=t.startsWith("g_")?d:p;if(!e.has(t))return e.get(t,n),a}if(a++,a===l)return a;if(c&&++u>10){if(Date.now()>h)return n(),a;u=0}}}#ce(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#ce(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#he()}#he(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}}_scaleImage(t,e){const n=t.width,i=t.height;let r,o,s=Math.max(Math.hypot(e[0],e[1]),1),a=Math.max(Math.hypot(e[2],e[3]),1),l=n,c=i,h="prescale1";for(;s>2&&l>1||a>2&&c>1;){let e=l,n=c;s>2&&l>1&&(e=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),s/=l/e),a>2&&c>1&&(n=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,a/=c/n),r=this.cachedCanvases.getCanvas(h,e,n),o=r.context,o.clearRect(0,0,e,n),o.drawImage(t,0,0,l,c,0,0,e,n),t=r.canvas,l=e,c=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:n,height:s}=t,a=this.current.fillColor,l=this.current.patternFill,c=(0,r.getCurrentTransform)(e);let u,d,f,g;if((t.bitmap||t.data)&&t.count>1){const e=t.bitmap||t.data.buffer;d=JSON.stringify(l?c:[c.slice(0,4),a]),u=this._cachedBitmapsMap.get(e),u||(u=new Map,this._cachedBitmapsMap.set(e,u));const n=u.get(d);if(n&&!l)return{canvas:n,offsetX:Math.round(Math.min(c[0],c[2])+c[4]),offsetY:Math.round(Math.min(c[1],c[3])+c[5])};f=n}f||(g=this.cachedCanvases.getCanvas("maskCanvas",n,s),p(g.context,t));let m=i.Util.transform(c,[1/n,0,0,-1/s,0,0]);m=i.Util.transform(m,[1,0,0,1,0,-s]);const y=i.Util.applyTransform([0,0],m),v=i.Util.applyTransform([n,s],m),b=i.Util.normalizeRect([y[0],y[1],v[0],v[1]]),x=Math.round(b[2]-b[0])||1,_=Math.round(b[3]-b[1])||1,S=this.cachedCanvases.getCanvas("fillCanvas",x,_),C=S.context,k=Math.min(y[0],v[0]),A=Math.min(y[1],v[1]);C.translate(-k,-A),C.transform(...m),f||(f=this._scaleImage(g.canvas,(0,r.getCurrentTransformInverse)(C)),f=f.img,u&&l&&u.set(d,f)),C.imageSmoothingEnabled=w((0,r.getCurrentTransform)(C),t.interpolate),h(C,f,0,0,f.width,f.height,0,0,n,s),C.globalCompositeOperation="source-in";const E=i.Util.transform((0,r.getCurrentTransformInverse)(C),[1,0,0,1,-k,-A]);return C.fillStyle=l?a.getPattern(e,this,E,o.PathType.FILL):a,C.fillRect(0,0,n,s),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(d,S.canvas)),{canvas:S.canvas,offsetX:Math.round(k),offsetY:Math.round(A)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=x[t]}setLineJoin(t){this.ctx.lineJoin=_[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(t),n.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(n,t,e);this.suspendedCtx=this.ctx,this.ctx=i.context;const o=this.ctx;o.setTransform(...(0,r.getCurrentTransform)(this.suspendedCtx)),f(this.suspendedCtx,o),function(t,e){if(t._removeMirroring)throw new Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},t.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},t.transform=function(t,n,i,r,o,s){e.transform(t,n,i,r,o,s),this.__originalTransform(t,n,i,r,o,s)},t.setTransform=function(t,n,i,r,o,s){e.setTransform(t,n,i,r,o,s),this.__originalSetTransform(t,n,i,r,o,s)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},t.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},t.bezierCurveTo=function(t,n,i,r,o,s){e.bezierCurveTo(t,n,i,r,o,s),this.__originalBezierCurveTo(t,n,i,r,o,s)},t.rect=function(t,n,i,r){e.rect(t,n,i,r),this.__originalRect(t,n,i,r)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(o,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),f(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask;b(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(f(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),f(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,n,i,r,o){this.ctx.transform(t,e,n,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,n){const o=this.ctx,s=this.current;let a,l,c=s.x,h=s.y;const u=(0,r.getCurrentTransform)(o),d=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],p=d?n.slice(0):null;for(let n=0,r=0,f=t.length;n<f;n++)switch(0|t[n]){case i.OPS.rectangle:c=e[r++],h=e[r++];const t=e[r++],n=e[r++],f=c+t,g=h+n;o.moveTo(c,h),0===t||0===n?o.lineTo(f,g):(o.lineTo(f,h),o.lineTo(f,g),o.lineTo(c,g)),d||s.updateRectMinMax(u,[c,h,f,g]),o.closePath();break;case i.OPS.moveTo:c=e[r++],h=e[r++],o.moveTo(c,h),d||s.updatePathMinMax(u,c,h);break;case i.OPS.lineTo:c=e[r++],h=e[r++],o.lineTo(c,h),d||s.updatePathMinMax(u,c,h);break;case i.OPS.curveTo:a=c,l=h,c=e[r+4],h=e[r+5],o.bezierCurveTo(e[r],e[r+1],e[r+2],e[r+3],c,h),s.updateCurvePathMinMax(u,a,l,e[r],e[r+1],e[r+2],e[r+3],c,h,p),r+=6;break;case i.OPS.curveTo2:a=c,l=h,o.bezierCurveTo(c,h,e[r],e[r+1],e[r+2],e[r+3]),s.updateCurvePathMinMax(u,a,l,c,h,e[r],e[r+1],e[r+2],e[r+3],p),c=e[r+2],h=e[r+3],r+=4;break;case i.OPS.curveTo3:a=c,l=h,c=e[r+2],h=e[r+3],o.bezierCurveTo(e[r],e[r+1],c,h,c,h),s.updateCurvePathMinMax(u,a,l,e[r],e[r+1],c,h,c,h,p),r+=4;break;case i.OPS.closePath:o.closePath()}d&&s.updateScalingPathMinMax(u,p),s.setCurrentPoint(c,h)}closePath(){this.ctx.closePath()}stroke(t=!0){const e=this.ctx,n=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&n?.getPattern?(e.save(),e.strokeStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),o.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(t=!0){const e=this.ctx,n=this.current.fillColor;let i=!1;this.current.patternFill&&(e.save(),e.fillStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),o.PathType.FILL),i=!0);const s=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==s&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),i&&e.restore(),t&&this.consumePath(s)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=S}eoClip(){this.pendingClip=C}beginText(){this.current.textMatrix=i.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){e.save(),e.beginPath();for(const n of t)e.setTransform(...n.transform),e.translate(n.x,n.y),n.addToPath(e,n.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){const n=this.commonObjs.get(t),r=this.current;if(!n)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX,0!==r.fontMatrix[0]&&0!==r.fontMatrix[3]||(0,i.warn)("Invalid font matrix for font "+t),e<0?(e=-e,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=e,n.isType3Font)return;const o=n.loadedName||"sans-serif",s=n.systemFontInfo?.css||`"${o}", ${n.fallbackName}`;let a="normal";n.black?a="900":n.bold&&(a="bold");const l=n.italic?"italic":"normal";let c=e;e<16?c=16:e>100&&(c=100),this.current.fontSizeScale=e/c,this.ctx.font=`${l} ${a} ${c}px ${s}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,n,i,r,o){this.current.textMatrix=[t,e,n,i,r,o],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,n,o){const s=this.ctx,a=this.current,l=a.font,c=a.textRenderingMode,h=a.fontSize/a.fontSizeScale,u=c&i.TextRenderingMode.FILL_STROKE_MASK,d=!!(c&i.TextRenderingMode.ADD_TO_PATH_FLAG),p=a.patternFill&&!l.missingFile;let f;(l.disableFontFace||d||p)&&(f=l.getPathGenerator(this.commonObjs,t)),l.disableFontFace||p?(s.save(),s.translate(e,n),s.beginPath(),f(s,h),o&&s.setTransform(...o),u!==i.TextRenderingMode.FILL&&u!==i.TextRenderingMode.FILL_STROKE||s.fill(),u!==i.TextRenderingMode.STROKE&&u!==i.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(u!==i.TextRenderingMode.FILL&&u!==i.TextRenderingMode.FILL_STROKE||s.fillText(t,e,n),u!==i.TextRenderingMode.STROKE&&u!==i.TextRenderingMode.FILL_STROKE||s.strokeText(t,e,n)),d&&(this.pendingTextPaths||=[]).push({transform:(0,r.getCurrentTransform)(s),x:e,y:n,fontSize:h,addToPath:f})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let n=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){n=!0;break}return(0,i.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(t){const e=this.current,n=e.font;if(n.isType3Font)return this.showType3Text(t);const s=e.fontSize;if(0===s)return;const a=this.ctx,l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,u=e.fontDirection,d=e.textHScale*u,p=t.length,f=n.vertical,g=f?1:-1,m=n.defaultVMetrics,y=s*e.fontMatrix[0],v=e.textRenderingMode===i.TextRenderingMode.FILL&&!n.disableFontFace&&!e.patternFill;let b;if(a.save(),a.transform(...e.textMatrix),a.translate(e.x,e.y+e.textRise),u>0?a.scale(d,-1):a.scale(d,1),e.patternFill){a.save();const t=e.fillColor.getPattern(a,this,(0,r.getCurrentTransformInverse)(a),o.PathType.FILL);b=(0,r.getCurrentTransform)(a),a.restore(),a.fillStyle=t}let w=e.lineWidth;const x=e.textMatrixScale;if(0===x||0===w){const t=e.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;t!==i.TextRenderingMode.STROKE&&t!==i.TextRenderingMode.FILL_STROKE||(w=this.getSinglePixelWidth())}else w/=x;if(1!==l&&(a.scale(l,l),w/=l),a.lineWidth=w,n.isInvalidPDFjsFont){const n=[];let i=0;for(const e of t)n.push(e.unicode),i+=e.width;return a.fillText(n.join(""),0,0),e.x+=i*y*d,a.restore(),void this.compose()}let _,S=0;for(_=0;_<p;++_){const e=t[_];if("number"==typeof e){S+=g*e*s/1e3;continue}let i=!1;const r=(e.isSpace?h:0)+c,o=e.fontChar,d=e.accent;let p,w,x=e.width;if(f){const t=e.vmetric||m,n=-(e.vmetric?t[1]:.5*x)*y,i=t[2]*y;x=t?-t[0]:x,p=n/l,w=(S+i)/l}else p=S/l,w=0;if(n.remeasure&&x>0){const t=1e3*a.measureText(o).width/s*l;if(x<t&&this.isFontSubpixelAAEnabled){const e=x/t;i=!0,a.save(),a.scale(e,1),p/=e}else x!==t&&(p+=(x-t)/2e3*s/l)}if(this.contentVisible&&(e.isInFont||n.missingFile))if(v&&!d)a.fillText(o,p,w);else if(this.paintChar(o,p,w,b),d){const t=p+s*d.offset.x/l,e=w-s*d.offset.y/l;this.paintChar(d.fontChar,t,e,b)}S+=f?x*y-r*u:x*y+r*u,i&&a.restore()}f?e.y-=S:e.x+=S*d,a.restore(),this.compose()}showType3Text(t){const e=this.ctx,n=this.current,r=n.font,o=n.fontSize,s=n.fontDirection,a=r.vertical?1:-1,l=n.charSpacing,c=n.wordSpacing,h=n.textHScale*s,u=n.fontMatrix||i.FONT_IDENTITY_MATRIX,d=t.length;let p,f,g,m;if(n.textRenderingMode!==i.TextRenderingMode.INVISIBLE&&0!==o){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),e.transform(...n.textMatrix),e.translate(n.x,n.y),e.scale(h,s),p=0;p<d;++p){if(f=t[p],"number"==typeof f){m=a*f*o/1e3,this.ctx.translate(m,0),n.x+=m*h;continue}const s=(f.isSpace?c:0)+l,d=r.charProcOperatorList[f.operatorListId];d?(this.contentVisible&&(this.processingType3=f,this.save(),e.scale(o,o),e.transform(...u),this.executeOperatorList(d),this.restore()),g=i.Util.applyTransform([f.width,0],u)[0]*o+s,e.translate(g,0),n.x+=g*h):(0,i.warn)(`Type3 character "${f.operatorListId}" is not available.`)}e.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,n,i,r,o){this.ctx.rect(n,i,r-n,o-i),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){const n=t[1],i=this.baseTransform||(0,r.getCurrentTransform)(this.ctx),s={createCanvasGraphics:t=>new k(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new o.TilingPattern(t,n,this.ctx,s,i)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,n){const r=i.Util.makeHexColor(t,e,n);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(t,e,n){const r=i.Util.makeHexColor(t,e,n);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(t,e=null){let n;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=(0,o.getShadingPattern)(this.getObject(t)),this.cachedPatterns.set(t,n)),e&&(n.matrix=e),n}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const n=this._getPattern(t);e.fillStyle=n.getPattern(e,this,(0,r.getCurrentTransformInverse)(e),o.PathType.SHADING);const s=(0,r.getCurrentTransformInverse)(e);if(s){const{width:t,height:n}=e.canvas,[r,o,a,l]=i.Util.getAxialAlignedBoundingBox([0,0,t,n],s);this.ctx.fillRect(r,o,a-r,l-o)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,i.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,i.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform(...t),this.baseTransform=(0,r.getCurrentTransform)(this.ctx),e)){const t=e[2]-e[0],n=e[3]-e[1];this.ctx.rect(e[0],e[1],t,n),this.current.updateRectMinMax((0,r.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||(0,i.info)("TODO: Support non-isolated groups."),t.knockout&&(0,i.warn)("Knockout groups not supported.");const n=(0,r.getCurrentTransform)(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=i.Util.getAxialAlignedBoundingBox(t.bbox,(0,r.getCurrentTransform)(e));const s=[0,0,e.canvas.width,e.canvas.height];o=i.Util.intersect(o,s)||[0,0,0,0];const l=Math.floor(o[0]),c=Math.floor(o[1]);let h=Math.max(Math.ceil(o[2])-l,1),u=Math.max(Math.ceil(o[3])-c,1),d=1,p=1;h>a&&(d=h/a,h=a),u>a&&(p=u/a,u=a),this.current.startNewPathAndClipBox([0,0,h,u]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const m=this.cachedCanvases.getCanvas(g,h,u),y=m.context;y.scale(1/d,1/p),y.translate(-l,-c),y.transform(...n),t.smask?this.smaskStack.push({canvas:m.canvas,context:y,offsetX:l,offsetY:c,scaleX:d,scaleY:p,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(l,c),e.scale(d,p),e.save()),f(e,y),this.ctx=y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const t=(0,r.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);const n=i.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(t,e,n,o,s){if(this.#ce(),g(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&4===e.length){const o=e[2]-e[0],a=e[3]-e[1];if(s&&this.annotationCanvasMap){(n=n.slice())[4]-=e[0],n[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=o,e[3]=a;const[s,l]=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:d,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(s,0,0,-l,0,a*l),g(this.ctx)}else g(this.ctx),this.ctx.rect(e[0],e[1],o,a),this.ctx.clip(),this.endPath()}this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...o)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#he(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;(t=this.getObject(t.data,t)).count=e;const n=this.ctx,i=this.processingType3;if(i&&(void 0===i.compiled&&(i.compiled=function(t){const{width:e,height:n}=t;if(e>1e3||n>1e3)return null;const i=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),r=e+1;let o,s,a,l=new Uint8Array(r*(n+1));const c=e+7&-8;let h=new Uint8Array(c*n),u=0;for(const e of t.data){let t=128;for(;t>0;)h[u++]=e&t?0:255,t>>=1}let d=0;for(u=0,0!==h[u]&&(l[0]=1,++d),s=1;s<e;s++)h[u]!==h[u+1]&&(l[s]=h[u]?2:1,++d),u++;for(0!==h[u]&&(l[s]=2,++d),o=1;o<n;o++){u=o*c,a=o*r,h[u-c]!==h[u]&&(l[a]=h[u]?1:8,++d);let t=(h[u]?4:0)+(h[u-c]?8:0);for(s=1;s<e;s++)t=(t>>2)+(h[u+1]?4:0)+(h[u-c+1]?8:0),i[t]&&(l[a+s]=i[t],++d),u++;if(h[u-c]!==h[u]&&(l[a+s]=h[u]?2:4,++d),d>1e3)return null}for(u=c*(n-1),a=o*r,0!==h[u]&&(l[a]=8,++d),s=1;s<e;s++)h[u]!==h[u+1]&&(l[a+s]=h[u]?4:8,++d),u++;if(0!==h[u]&&(l[a+s]=4,++d),d>1e3)return null;const p=new Int32Array([0,r,-1,0,-r,0,0,0,1]),f=new Path2D;for(o=0;d&&o<=n;o++){let t=o*r;const n=t+e;for(;t<n&&!l[t];)t++;if(t===n)continue;f.moveTo(t%r,o);const i=t;let s=l[t];do{const e=p[s];do{t+=e}while(!l[t]);const n=l[t];5!==n&&10!==n?(s=n,l[t]=0):(s=n&51*s>>4,l[t]&=s>>2|s<<2),f.lineTo(t%r,t/r|0),l[t]||--d}while(i!==t);--o}return h=null,l=null,function(t){t.save(),t.scale(1/e,-1/n),t.translate(0,-n),t.fill(f),t.beginPath(),t.restore()}}(t)),i.compiled))return void i.compiled(n);const r=this._createMaskCanvas(t),o=r.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(o,r.offsetX,r.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,n=0,o=0,s,a){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=(0,r.getCurrentTransform)(l);l.transform(e,n,o,s,0,0);const h=this._createMaskCanvas(t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let t=0,r=a.length;t<r;t+=2){const r=i.Util.transform(c,[e,n,o,s,a[t],a[t+1]]),[u,d]=i.Util.applyTransform([0,0],r);l.drawImage(h.canvas,u,d)}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,n=this.current.fillColor,i=this.current.patternFill;for(const s of t){const{data:t,width:a,height:l,transform:c}=s,u=this.cachedCanvases.getCanvas("maskCanvas",a,l),d=u.context;d.save(),p(d,this.getObject(t,s)),d.globalCompositeOperation="source-in",d.fillStyle=i?n.getPattern(d,this,(0,r.getCurrentTransformInverse)(e),o.PathType.FILL):n,d.fillRect(0,0,a,l),d.restore(),e.save(),e.transform(...c),e.scale(1,-1),h(e,u.canvas,0,0,a,l,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,i.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,n,r){if(!this.contentVisible)return;const o=this.getObject(t);if(!o)return void(0,i.warn)("Dependent image isn't ready yet");const s=o.width,a=o.height,l=[];for(let t=0,i=r.length;t<i;t+=2)l.push({transform:[e,0,0,n,r[t],r[t+1]],x:0,y:0,w:s,h:a});this.paintInlineImageXObjectGroup(o,l)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;const{bitmap:e,width:n,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",n,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,n=t.height,o=this.ctx;if(this.save(),!i.isNodeJS){const{filter:t}=o;"none"!==t&&""!==t&&(o.filter="none")}let s;if(o.scale(1/e,-1/n),t.bitmap)s=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)s=t;else{const i=this.cachedCanvases.getCanvas("inlineImage",e,n).context;d(i,t),s=this.applyTransferMapsToCanvas(i)}const a=this._scaleImage(s,(0,r.getCurrentTransformInverse)(o));o.imageSmoothingEnabled=w((0,r.getCurrentTransform)(o),t.interpolate),h(o,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,e,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const n=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const e=t.width,n=t.height,r=this.cachedCanvases.getCanvas("inlineImage",e,n).context;d(r,t),i=this.applyTransferMapsToCanvas(r)}for(const t of e)n.save(),n.transform(...t.transform),n.scale(1,-1),h(n,i,t.x,t.y,t.w,t.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){const e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);const n=this.ctx;this.pendingClip&&(e||(this.pendingClip===C?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=(0,r.getCurrentTransform)(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),n=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(n,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:t}=this.current,{a:e,b:n,c:i,d:r}=this.ctx.getTransform();let o,s;if(0===n&&0===i){const n=Math.abs(e),i=Math.abs(r);if(n===i)if(0===t)o=s=1/n;else{const e=n*t;o=s=e<1?1/e:1}else if(0===t)o=1/n,s=1/i;else{const e=n*t,r=i*t;o=e<1?1/e:1,s=r<1?1/r:1}}else{const a=Math.abs(e*r-n*i),l=Math.hypot(e,n),c=Math.hypot(i,r);if(0===t)o=c/a,s=l/a;else{const e=t*a;o=c>e?c/e:1,s=l>e?l/e:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=s}return this._cachedScaleForStroking}rescaleAndStroke(t){const{ctx:e}=this,{lineWidth:n}=this.current,[i,r]=this.getScaleForStroking();if(e.lineWidth=n||1,1===i&&1===r)return void e.stroke();const o=e.getLineDash();if(t&&e.save(),e.scale(i,r),o.length>0){const t=Math.max(i,r);e.setLineDash(o.map((e=>e/t))),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}e.CanvasGraphics=k;for(const t in i.OPS)void 0!==k.prototype[t]&&(k.prototype[i.OPS[t]]=k.prototype[t])},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new l(t);case"Mesh":return new u(t);case"Dummy":return new d}throw new Error(`Unknown IR type: ${t[0]}`)};var i=n(1),r=n(6);const o={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function s(t,e){if(!e)return;const n=e[2]-e[0],i=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],n,i),t.clip(r)}e.PathType=o;class a{constructor(){this.constructor===a&&(0,i.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,i.unreachable)("Abstract method `getPattern` called.")}}class l extends a{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;"axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const t of this._colorStops)e.addColorStop(t[0],t[1]);return e}getPattern(t,e,n,a){let l;if(a===o.STROKE||a===o.FILL){const o=e.current.getClippedPathBoundingBox(a,(0,r.getCurrentTransform)(t))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,u=e.cachedCanvases.getCanvas("pattern",c,h,!0),d=u.context;d.clearRect(0,0,d.canvas.width,d.canvas.height),d.beginPath(),d.rect(0,0,d.canvas.width,d.canvas.height),d.translate(-o[0],-o[1]),n=i.Util.transform(n,[1,0,0,1,o[0],o[1]]),d.transform(...e.baseTransform),this.matrix&&d.transform(...this.matrix),s(d,this._bbox),d.fillStyle=this._createGradient(d),d.fill(),l=t.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(n);l.setTransform(p)}else s(t,this._bbox),l=this._createGradient(t);return l}}function c(t,e,n,i,r,o,s,a){const l=e.coords,c=e.colors,h=t.data,u=4*t.width;let d;l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=o,o=s,s=d),l[i+1]>l[r+1]&&(d=i,i=r,r=d,d=s,s=a,a=d),l[n+1]>l[i+1]&&(d=n,n=i,i=d,d=o,o=s,s=d);const p=(l[n]+e.offsetX)*e.scaleX,f=(l[n+1]+e.offsetY)*e.scaleY,g=(l[i]+e.offsetX)*e.scaleX,m=(l[i+1]+e.offsetY)*e.scaleY,y=(l[r]+e.offsetX)*e.scaleX,v=(l[r+1]+e.offsetY)*e.scaleY;if(f>=v)return;const b=c[o],w=c[o+1],x=c[o+2],_=c[s],S=c[s+1],C=c[s+2],k=c[a],A=c[a+1],E=c[a+2],T=Math.round(f),M=Math.round(v);let O,I,D,F,P,R,L,N;for(let t=T;t<=M;t++){if(t<m){const e=t<f?0:(f-t)/(f-m);O=p-(p-g)*e,I=b-(b-_)*e,D=w-(w-S)*e,F=x-(x-C)*e}else{let e;e=t>v?1:m===v?0:(m-t)/(m-v),O=g-(g-y)*e,I=_-(_-k)*e,D=S-(S-A)*e,F=C-(C-E)*e}let e;e=t<f?0:t>v?1:(f-t)/(f-v),P=p-(p-y)*e,R=b-(b-k)*e,L=w-(w-A)*e,N=x-(x-E)*e;const n=Math.round(Math.min(O,P)),i=Math.round(Math.max(O,P));let r=u*t+4*n;for(let t=n;t<=i;t++)e=(O-t)/(O-P),e<0?e=0:e>1&&(e=1),h[r++]=I-(I-R)*e|0,h[r++]=D-(D-L)*e|0,h[r++]=F-(F-N)*e|0,h[r++]=255}}function h(t,e,n){const i=e.coords,r=e.colors;let o,s;switch(e.type){case"lattice":const a=e.verticesPerRow,l=Math.floor(i.length/a)-1,h=a-1;for(o=0;o<l;o++){let e=o*a;for(let o=0;o<h;o++,e++)c(t,n,i[e],i[e+1],i[e+a],r[e],r[e+1],r[e+a]),c(t,n,i[e+a+1],i[e+1],i[e+a],r[e+a+1],r[e+1],r[e+a])}break;case"triangles":for(o=0,s=i.length;o<s;o+=3)c(t,n,i[o],i[o+1],i[o+2],r[o],r[o+1],r[o+2]);break;default:throw new Error("illegal figure")}}class u extends a{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,n){const i=Math.floor(this._bounds[0]),r=Math.floor(this._bounds[1]),o=Math.ceil(this._bounds[2])-i,s=Math.ceil(this._bounds[3])-r,a=Math.min(Math.ceil(Math.abs(o*t[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(s*t[1]*1.1)),3e3),c=o/a,u=s/l,d={coords:this._coords,colors:this._colors,offsetX:-i,offsetY:-r,scaleX:1/c,scaleY:1/u},p=a+4,f=l+4,g=n.getCanvas("mesh",p,f,!1),m=g.context,y=m.createImageData(a,l);if(e){const t=y.data;for(let n=0,i=t.length;n<i;n+=4)t[n]=e[0],t[n+1]=e[1],t[n+2]=e[2],t[n+3]=255}for(const t of this._figures)h(y,t,d);return m.putImageData(y,2,2),{canvas:g.canvas,offsetX:i-2*c,offsetY:r-2*u,scaleX:c,scaleY:u}}getPattern(t,e,n,a){let l;if(s(t,this._bbox),a===o.SHADING)l=i.Util.singularValueDecompose2dScale((0,r.getCurrentTransform)(t));else if(l=i.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){const t=i.Util.singularValueDecompose2dScale(this.matrix);l=[l[0]*t[0],l[1]*t[1]]}const c=this._createMeshCanvas(l,a===o.SHADING?null:this._background,e.cachedCanvases);return a!==o.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class d extends a{getPattern(){return"hotpink"}}const p=1,f=2;class g{static MAX_PATTERN_SIZE=3e3;constructor(t,e,n,i,r){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=n,this.canvasGraphicsFactory=i,this.baseTransform=r}createPatternCanvas(t){const e=this.operatorList,n=this.bbox,o=this.xstep,s=this.ystep,a=this.paintType,l=this.tilingType,c=this.color,h=this.canvasGraphicsFactory;(0,i.info)("TilingType: "+l);const u=n[0],d=n[1],p=n[2],f=n[3],g=i.Util.singularValueDecompose2dScale(this.matrix),m=i.Util.singularValueDecompose2dScale(this.baseTransform),y=[g[0]*m[0],g[1]*m[1]],v=this.getSizeAndScale(o,this.ctx.canvas.width,y[0]),b=this.getSizeAndScale(s,this.ctx.canvas.height,y[1]),w=t.cachedCanvases.getCanvas("pattern",v.size,b.size,!0),x=w.context,_=h.createCanvasGraphics(x);_.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(_,a,c);let S=u,C=d,k=p,A=f;return u<0&&(S=0,k+=Math.abs(u)),d<0&&(C=0,A+=Math.abs(d)),x.translate(-v.scale*S,-b.scale*C),_.transform(v.scale,0,0,b.scale,0,0),x.save(),this.clipBbox(_,S,C,k,A),_.baseTransform=(0,r.getCurrentTransform)(_.ctx),_.executeOperatorList(e),_.endDrawing(),{canvas:w.canvas,scaleX:v.scale,scaleY:b.scale,offsetX:S,offsetY:C}}getSizeAndScale(t,e,n){t=Math.abs(t);const i=Math.max(g.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*n);return r>=i?r=i:n=r/t,{scale:n,size:r}}clipBbox(t,e,n,i,o){const s=i-e,a=o-n;t.ctx.rect(e,n,s,a),t.current.updateRectMinMax((0,r.getCurrentTransform)(t.ctx),[e,n,i,o]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,n){const r=t.ctx,o=t.current;switch(e){case p:const t=this.ctx;r.fillStyle=t.fillStyle,r.strokeStyle=t.strokeStyle,o.fillColor=t.fillStyle,o.strokeColor=t.strokeStyle;break;case f:const s=i.Util.makeHexColor(n[0],n[1],n[2]);r.fillStyle=s,r.strokeStyle=s,o.fillColor=s,o.strokeColor=s;break;default:throw new i.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,n,r){let s=n;r!==o.SHADING&&(s=i.Util.transform(s,e.baseTransform),this.matrix&&(s=i.Util.transform(s,this.matrix)));const a=this.createPatternCanvas(e);let l=new DOMMatrix(s);l=l.translate(a.offsetX,a.offsetY),l=l.scale(1/a.scaleX,1/a.scaleY);const c=t.createPattern(a.canvas,"repeat");return c.setTransform(l),c}}e.TilingPattern=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=function(t){switch(t.kind){case i.ImageKind.GRAYSCALE_1BPP:return r(t);case i.ImageKind.RGB_24BPP:return function({src:t,srcPos:e=0,dest:n,destPos:r=0,width:o,height:s}){let a=0;const l=t.length>>2,c=new Uint32Array(t.buffer,e,l);if(i.FeatureTest.isLittleEndian){for(;a<l-2;a+=3,r+=4){const t=c[a],e=c[a+1],i=c[a+2];n[r]=4278190080|t,n[r+1]=t>>>24|e<<8|4278190080,n[r+2]=e>>>16|i<<16|4278190080,n[r+3]=i>>>8|4278190080}for(let e=4*a,i=t.length;e<i;e+=3)n[r++]=t[e]|t[e+1]<<8|t[e+2]<<16|4278190080}else{for(;a<l-2;a+=3,r+=4){const t=c[a],e=c[a+1],i=c[a+2];n[r]=255|t,n[r+1]=t<<24|e>>>8|255,n[r+2]=e<<16|i>>>16|255,n[r+3]=i<<8|255}for(let e=4*a,i=t.length;e<i;e+=3)n[r++]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|255}return{srcPos:e,destPos:r}}(t)}return null},e.grayToRGBA=function(t,e){if(i.FeatureTest.isLittleEndian)for(let n=0,i=t.length;n<i;n++)e[n]=65793*t[n]|4278190080;else for(let n=0,i=t.length;n<i;n++)e[n]=16843008*t[n]|255};var i=n(1);function r({src:t,srcPos:e=0,dest:n,width:r,height:o,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=i.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[s,l]:[l,s],u=r>>3,d=7&r,p=t.length;n=new Uint32Array(n.buffer);let f=0;for(let i=0;i<o;i++){for(const i=e+u;e<i;e++){const i=e<p?t[e]:255;n[f++]=128&i?h:c,n[f++]=64&i?h:c,n[f++]=32&i?h:c,n[f++]=16&i?h:c,n[f++]=8&i?h:c,n[f++]=4&i?h:c,n[f++]=2&i?h:c,n[f++]=1&i?h:c}if(0===d)continue;const i=e<p?t[e++]:255;for(let t=0;t<d;t++)n[f++]=i&1<<7-t?h:c}return{srcPos:e,destPos:f}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const n=Object.create(null);e.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(1);const r=1,o=2,s=1,a=2,l=3,c=4,h=5,u=6,d=7,p=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"PasswordException":return new i.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#ue(e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===r)n.resolve(e.data);else{if(e.callback!==o)throw new Error("Unexpected callback case");n.reject(f(e.reason))}return}const i=this.actionHandler[e.action];if(!i)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(i(e.data))})).then((function(i){n.postMessage({sourceName:t,targetName:s,callback:r,callbackId:e.callbackId,data:i})}),(function(i){n.postMessage({sourceName:t,targetName:s,callback:o,callbackId:e.callbackId,reason:f(i)})}))}else e.streamId?this.#de(e):i(e.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=new i.PromiseCapability;this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(t){o.reject(t)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const s=new i.PromiseCapability;return this.streamControllers[o]={controller:n,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:o,data:e,desiredSize:n.desiredSize},r),s.promise},pull:t=>{const e=new i.PromiseCapability;return this.streamControllers[o].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,i.assert)(t instanceof Error,"cancel must have a valid reason");const e=new i.PromiseCapability;return this.streamControllers[o].cancelCall=e,this.streamControllers[o].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:s,streamId:o,reason:f(t)}),e.promise}},n)}#de(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,s=this,a=this.actionHandler[t.action],u={enqueue(t,s=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:l,streamId:e}),delete s.streamSinks[e])},error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:h,streamId:e,reason:f(t)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:p,streamId:e,reason:f(t)})}))}#ue(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case p:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case d:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull?.())})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,reason:f(t)})}));break;case c:if((0,i.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,i.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this.#pe(g,e);break;case h:(0,i.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this.#pe(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this.#pe(g,e);break;case s:if(!m)break;new Promise((function(e){e(m.onCancel?.(f(t.reason)))})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:a,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#pe(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var i=n(1);e.Metadata=class{#fe;#ge;constructor({parsedData:t,rawData:e}){this.#fe=t,this.#ge=e}getRaw(){return this.#ge}get(t){return this.#fe.get(t)??null}getAll(){return(0,i.objectFromMap)(this.#fe)}has(t){return this.#fe.has(t)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var i=n(1),r=n(8);const o=Symbol("INTERNAL");class s{#me=!0;constructor(t,e){this.name=t,this.intent=e}get visible(){return this.#me}_setVisible(t,e){t!==o&&(0,i.unreachable)("Internal method `_setVisible` called."),this.#me=e}}e.OptionalContentConfig=class{#ye=null;#ve=new Map;#be=null;#we=null;constructor(t){if(this.name=null,this.creator=null,null!==t){this.name=t.name,this.creator=t.creator,this.#we=t.order;for(const e of t.groups)this.#ve.set(e.id,new s(e.name,e.intent));if("OFF"===t.baseState)for(const t of this.#ve.values())t._setVisible(o,!1);for(const e of t.on)this.#ve.get(e)._setVisible(o,!0);for(const e of t.off)this.#ve.get(e)._setVisible(o,!1);this.#be=this.getHash()}}#xe(t){const e=t.length;if(e<2)return!0;const n=t[0];for(let r=1;r<e;r++){const e=t[r];let o;if(Array.isArray(e))o=this.#xe(e);else{if(!this.#ve.has(e))return(0,i.warn)(`Optional content group not found: ${e}`),!0;o=this.#ve.get(e).visible}switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return"And"===n}isVisible(t){if(0===this.#ve.size)return!0;if(!t)return(0,i.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return this.#ve.has(t.id)?this.#ve.get(t.id).visible:((0,i.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return this.#xe(t.expression);if(!t.policy||"AnyOn"===t.policy){for(const e of t.ids){if(!this.#ve.has(e))return(0,i.warn)(`Optional content group not found: ${e}`),!0;if(this.#ve.get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(const e of t.ids){if(!this.#ve.has(e))return(0,i.warn)(`Optional content group not found: ${e}`),!0;if(!this.#ve.get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(const e of t.ids){if(!this.#ve.has(e))return(0,i.warn)(`Optional content group not found: ${e}`),!0;if(!this.#ve.get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(const e of t.ids){if(!this.#ve.has(e))return(0,i.warn)(`Optional content group not found: ${e}`),!0;if(this.#ve.get(e).visible)return!1}return!0}return(0,i.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,i.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0){this.#ve.has(t)?(this.#ve.get(t)._setVisible(o,!!e),this.#ye=null):(0,i.warn)(`Optional content group not found: ${t}`)}get hasInitialVisibility(){return null===this.#be||this.getHash()===this.#be}getOrder(){return this.#ve.size?this.#we?this.#we.slice():[...this.#ve.keys()]:null}getGroups(){return this.#ve.size>0?(0,i.objectFromMap)(this.#ve):null}getGroup(t){return this.#ve.get(t)||null}getHash(){if(null!==this.#ye)return this.#ye;const t=new r.MurmurHash3_64;for(const[e,n]of this.#ve)t.update(`${e}:${n.visible}`);return this.#ye=t.hexdigest()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var i=n(1),r=n(6);e.PDFDataTransportStream=class{constructor({length:t,initialData:e,progressiveDone:n=!1,contentDispositionFilename:r=null,disableRange:o=!1,disableStream:s=!1},a){if((0,i.assert)(a,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=n,this._contentDispositionFilename=r,e?.length>0){const t=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=a,this._isStreamingSupported=!s,this._isRangeSupported=!o,this._contentLength=t,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener(((t,e)=>{this._onReceiveData({begin:t,chunk:e})})),this._pdfDataRangeTransport.addProgressListener(((t,e)=>{this._onProgress({loaded:t,total:e})})),this._pdfDataRangeTransport.addProgressiveReadListener((t=>{this._onReceiveData({chunk:t})})),this._pdfDataRangeTransport.addProgressiveDoneListener((()=>{this._onProgressiveDone()})),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:t,chunk:e}){const n=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const e=this._rangeReaders.some((function(e){return e._begin===t&&(e._enqueue(n),!0)}));(0,i.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){void 0===t.total?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,i.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new o(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new s(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeReaders.slice(0))e.cancel(t);this._pdfDataRangeTransport.abort()}};class o{constructor(t,e,n=!1,i=null){this._stream=t,this._done=n||!1,this._filename=(0,r.isPdfFile)(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const t of this._queuedChunks)this._loaded+=t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=new i.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class s{constructor(t,e,n){this._stream=t,this._begin=e,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=new i.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var i=n(1),r=n(20);function o(t,e,n){return{method:"GET",headers:t,signal:n.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function s(t){const e=new Headers;for(const n in t){const i=t[n];void 0!==i&&e.append(n,i)}return e}function a(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,i.warn)(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new l(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=new c(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class l{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=new i.PromiseCapability,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=s(this._stream.httpHeaders);const n=e.url;fetch(n,o(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,n);this._reader=t.body.getReader(),this._headersCapability.resolve();const e=e=>t.headers.get(e),{allowRangeRequests:o,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new i.AbortException("Streaming is disabled."))})).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:a(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class c{constructor(t,e,n){this._stream=t,this._reader=null,this._loaded=0;const a=t.source;this._withCredentials=a.withCredentials||!1,this._readCapability=new i.PromiseCapability,this._isStreamingSupported=!a.disableStream,this._abortController=new AbortController,this._headers=s(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${n-1}`);const l=a.url;fetch(l,o(this._headers,this._withCredentials,this._abortController)).then((t=>{if(!(0,r.validateResponseStatus)(t.status))throw(0,r.createResponseStatusError)(t.status,l);this._readCapability.resolve(),this._reader=t.body.getReader()})).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:a(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new i.MissingPDFException('Missing PDF "'+e+'".'):new i.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){const e=t("Content-Disposition");if(e){let t=(0,r.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if((0,o.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function({getResponseHeader:t,isHttp:e,rangeChunkSize:n,disableRange:i}){const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t("Content-Length"),10);return Number.isInteger(o)?(r.suggestedLength=o,o<=2*n||i||!e||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r},e.validateResponseStatus=function(t){return 200===t||206===t};var i=n(1),r=n(21),o=n(6)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,n=r("filename\\*","i").exec(t);if(n){n=n[1];let t=a(n);return t=unescape(t),t=l(t),t=c(t),s(t)}if(n=function(t){const e=[];let n;const i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=i.exec(t));){let[,t,i,r]=n;if(t=parseInt(t,10),t in e){if(0===t)break}else e[t]=[i,r]}const o=[];for(let t=0;t<e.length&&t in e;++t){let[n,i]=e[t];i=a(i),n&&(i=unescape(i),0===t&&(i=l(i))),o.push(i)}return o.join("")}(t),n)return s(c(n));if(n=r("filename","i").exec(t),n){n=n[1];let t=a(n);return t=c(t),s(t)}function r(t,e){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function o(t,n){if(t){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(t,{fatal:!0}),o=(0,i.stringToBytes)(n);n=r.decode(o),e=!1}catch{}}return n}function s(t){return e&&/[\x80-\xff]/.test(t)&&(t=o("utf-8",t),e&&(t=o("iso-8859-1",t))),t}function a(t){if(t.startsWith('"')){const e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){const n=e[t].indexOf('"');-1!==n&&(e[t]=e[t].slice(0,n),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function l(t){const e=t.indexOf("'");return-1===e?t:o(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,(function(t,e,n,i){if("q"===n||"Q"===n)return o(e,i=(i=i.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,(function(t,e){return String.fromCharCode(parseInt(e,16))})));try{i=atob(i)}catch{}return o(e,i)}))}return""};var i=n(1)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var i=n(1),r=n(20);class o{constructor(t,e={}){this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,n){const i={begin:t,end:e};for(const t in n)i[t]=n[t];return this.request(i)}requestFull(t){return this.request(t)}request(t){const e=new XMLHttpRequest,n=this.currXhrId++,i=this.pendingRequests[n]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const t in this.httpHeaders){const n=this.httpHeaders[t];void 0!==n&&e.setRequestHeader(t,n)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=206):i.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(n){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,n),e.onprogress=this.onProgress.bind(this,n),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),n}onProgress(t,e){const n=this.pendingRequests[t];n&&n.onProgress?.(e)}onStateChange(t,e){const n=this.pendingRequests[t];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===r.status&&this.isHttp)return void n.onError?.(r.status);const o=r.status||200;if((200!==o||206!==n.expectedStatus)&&o!==n.expectedStatus)return void n.onError?.(r.status);const s=function(t){const e=t.response;return"string"!=typeof e?e:(0,i.stringToBytes)(e).buffer}(r);if(206===o){const t=r.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);n.onDone({begin:parseInt(e[1],10),chunk:s})}else s?n.onDone({begin:0,chunk:s}):n.onError?.(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new o(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new s(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const n=new a(this._manager,t,e);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class s{constructor(t,e){this._manager=t;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(n),this._headersReceivedCapability=new i.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t),n=t=>e.getResponseHeader(t),{allowRangeRequests:i,suggestedLength:o}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=new i.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersReceivedCapability.reject(t);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(t,e,n){this._manager=t;const i={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,n,i),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError=(0,r.createResponseStatusError)(t,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const t=new i.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var i=n(1),r=n(20);const o=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){const e=__webpack_require__(6671),n=e.parse(t);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(t)?e.parse(`file:///${t}`):(n.host||(n.protocol="file:"),n)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new c(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const n=this.isFsUrl?new d(this,t,e):new h(this,t,e);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class s{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new i.PromiseCapability,this._headersCapability=new i.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new i.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new i.PromiseCapability;const e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return null===t?(this._readCapability=new i.PromiseCapability,this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",(()=>{this._readCapability.resolve()})),t.on("end",(()=>{t.destroy(),this._done=!0,this._readCapability.resolve()})),t.on("error",(t=>{this._error(t)})),this._storedError&&this._readableStream.destroy(this._storedError)}}function l(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class c extends s{constructor(t){super(t);const e=e=>{if(404===e.statusCode){const t=new i.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=t,void this._headersCapability.reject(t)}this._headersCapability.resolve(),this._setReadableStream(e);const n=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:o,suggestedLength:s}=(0,r.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=s||this._contentLength,this._filename=(0,r.extractFilenameFromHeader)(n)};if(this._request=null,"http:"===this._url.protocol){const n=__webpack_require__(7492);this._request=n.request(l(this._url,t.httpHeaders),e)}else{const n=__webpack_require__(1815);this._request=n.request(l(this._url,t.httpHeaders),e)}this._request.on("error",(t=>{this._storedError=t,this._headersCapability.reject(t)})),this._request.end()}}class h extends a{constructor(t,e,n){super(t),this._httpHeaders={};for(const e in t.httpHeaders){const n=t.httpHeaders[e];void 0!==n&&(this._httpHeaders[e]=n)}this._httpHeaders.Range=`bytes=${e}-${n-1}`;const r=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{const t=new i.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};if(this._request=null,"http:"===this._url.protocol){const t=__webpack_require__(7492);this._request=t.request(l(this._url,this._httpHeaders),r)}else{const t=__webpack_require__(1815);this._request=t.request(l(this._url,this._httpHeaders),r)}this._request.on("error",(t=>{this._storedError=t})),this._request.end()}}class u extends s{constructor(t){super(t);let e=decodeURIComponent(this._url.path);o.test(this._url.href)&&(e=e.replace(/^\//,""));const n=__webpack_require__(3237);n.lstat(e,((t,r)=>{if(t)return"ENOENT"===t.code&&(t=new i.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,void this._headersCapability.reject(t);this._contentLength=r.size,this._setReadableStream(n.createReadStream(e)),this._headersCapability.resolve()}))}}class d extends a{constructor(t,e,n){super(t);let i=decodeURIComponent(this._url.path);o.test(this._url.href)&&(i=i.replace(/^\//,""));const r=__webpack_require__(3237);this._setReadableStream(r.createReadStream(i,{start:e,end:n-1}))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var i=n(6),r=n(1);const o="normal",s="normal",a="#000000",l=["butt","round","square"],c=["miter","round","bevel"],h=function(t,e="",n=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!n)return URL.createObjectURL(new Blob([t],{type:e}));const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r=`data:${e};base64,`;for(let e=0,n=t.length;e<n;e+=3){const o=255&t[e],s=255&t[e+1],a=255&t[e+2];r+=i[o>>2]+i[(3&o)<<4|s>>4]+i[e+1<n?(15&s)<<2|a>>6:64]+i[e+2<n?63&a:64]}return r},u=function(){const t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let n=t;for(let t=0;t<8;t++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;e[t]=n}function n(t,n,i,r){let o=r;const s=n.length;i[o]=s>>24&255,i[o+1]=s>>16&255,i[o+2]=s>>8&255,i[o+3]=255&s,o+=4,i[o]=255&t.charCodeAt(0),i[o+1]=255&t.charCodeAt(1),i[o+2]=255&t.charCodeAt(2),i[o+3]=255&t.charCodeAt(3),o+=4,i.set(n,o),o+=n.length;const a=function(t,n,i){let r=-1;for(let o=n;o<i;o++){const n=255&(r^t[o]);r=r>>>8^e[n]}return-1^r}(i,r+4,o);i[o]=a>>24&255,i[o+1]=a>>16&255,i[o+2]=a>>8&255,i[o+3]=255&a}function i(t){let e=t.length;const n=65535,i=Math.ceil(e/n),r=new Uint8Array(2+e+5*i+4);let o=0;r[o++]=120,r[o++]=156;let s=0;for(;e>n;)r[o++]=0,r[o++]=255,r[o++]=255,r[o++]=0,r[o++]=0,r.set(t.subarray(s,s+n),o),o+=n,s+=n,e-=n;r[o++]=1,r[o++]=255&e,r[o++]=e>>8&255,r[o++]=255&~e,r[o++]=(65535&~e)>>8&255,r.set(t.subarray(s),o),o+=t.length-s;const a=function(t,e,n){let i=1,r=0;for(let o=e;o<n;++o)i=(i+(255&t[o]))%65521,r=(r+i)%65521;return r<<16|i}(t,0,t.length);return r[o++]=a>>24&255,r[o++]=a>>16&255,r[o++]=a>>8&255,r[o++]=255&a,r}function o(e,o,s,a){const l=e.width,c=e.height;let u,d,p;const f=e.data;switch(o){case r.ImageKind.GRAYSCALE_1BPP:d=0,u=1,p=l+7>>3;break;case r.ImageKind.RGB_24BPP:d=2,u=8,p=3*l;break;case r.ImageKind.RGBA_32BPP:d=6,u=8,p=4*l;break;default:throw new Error("invalid format")}const g=new Uint8Array((1+p)*c);let m=0,y=0;for(let t=0;t<c;++t)g[m++]=0,g.set(f.subarray(y,y+p),m),y+=p,m+=p;if(o===r.ImageKind.GRAYSCALE_1BPP&&a){m=0;for(let t=0;t<c;t++){m++;for(let t=0;t<p;t++)g[m++]^=255}}const v=new Uint8Array([l>>24&255,l>>16&255,l>>8&255,255&l,c>>24&255,c>>16&255,c>>8&255,255&c,u,d,0,0,0]),b=function(t){if(!r.isNodeJS)return i(t);try{const e=parseInt(process.versions.node)>=8?t:Buffer.from(t),n=__webpack_require__(2787).deflateSync(e,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(t){(0,r.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return i(t)}(g),w=t.length+36+v.length+b.length,x=new Uint8Array(w);let _=0;return x.set(t,_),_+=t.length,n("IHDR",v,x,_),_+=12+v.length,n("IDATA",b,x,_),_+=12+b.length,n("IEND",new Uint8Array(0),x,_),h(x,"image/png",s)}return function(t,e,n){return o(t,void 0===t.kind?r.ImageKind.GRAYSCALE_1BPP:t.kind,e,n)}}();class d{constructor(){this.fontSizeScale=1,this.fontWeight=s,this.fontSize=0,this.textMatrix=r.IDENTITY_MATRIX,this.fontMatrix=r.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=r.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=a,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}function p(t){if(Number.isInteger(t))return t.toString();const e=t.toFixed(10);let n=e.length-1;if("0"!==e[n])return e;do{n--}while("0"===e[n]);return e.substring(0,"."===e[n]?n:n+1)}function f(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${p(t[0])} ${p(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${p(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${p(t[4])} ${p(t[5])})`;return`matrix(${p(t[0])} ${p(t[1])} ${p(t[2])} ${p(t[3])} ${p(t[4])} ${p(t[5])})`}let g=0,m=0,y=0;e.SVGGraphics=class{constructor(t,e,n=!1){(0,i.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new i.DOMSVGFactory,this.current=new d,this.transformMatrix=r.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const t in r.OPS)this._operatorIdMapping[r.OPS[t]]=t}getObject(t,e=null){return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}save(){this.transformStack.push(this.transformMatrix);const t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){const e=t.fnArray,n=t.argsArray;for(let t=0,i=e.length;t<i;t++)if(e[t]===r.OPS.dependency)for(const e of n[t]){const t=e.startsWith("g_")?this.commonObjs:this.objs,n=new Promise((n=>{t.get(e,n)}));this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(t,e,n,i,o,s){const a=[t,e,n,i,o,s];this.transformMatrix=r.Util.transform(this.transformMatrix,a),this.tgrp=null}getSVG(t,e){this.viewport=e;const n=this._initialize(e);return this.loadDependencies(t).then((()=>(this.transformMatrix=r.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),n)))}convertOpList(t){const e=this._operatorIdMapping,n=t.argsArray,i=t.fnArray,r=[];for(let t=0,o=i.length;t<o;t++){const o=i[t];r.push({fnId:o,fn:e[o],args:n[t]})}return function(t){let e=[];const n=[];for(const i of t)"save"!==i.fn?"restore"===i.fn?e=n.pop():e.push(i):(e.push({fnId:92,fn:"group",items:[]}),n.push(e),e=e.at(-1).items);return e}(r)}executeOpTree(t){for(const e of t){const t=e.fn,n=e.fnId,i=e.args;switch(0|n){case r.OPS.beginText:this.beginText();break;case r.OPS.dependency:break;case r.OPS.setLeading:this.setLeading(i);break;case r.OPS.setLeadingMoveText:this.setLeadingMoveText(i[0],i[1]);break;case r.OPS.setFont:this.setFont(i);break;case r.OPS.showText:case r.OPS.showSpacedText:this.showText(i[0]);break;case r.OPS.endText:this.endText();break;case r.OPS.moveText:this.moveText(i[0],i[1]);break;case r.OPS.setCharSpacing:this.setCharSpacing(i[0]);break;case r.OPS.setWordSpacing:this.setWordSpacing(i[0]);break;case r.OPS.setHScale:this.setHScale(i[0]);break;case r.OPS.setTextMatrix:this.setTextMatrix(i[0],i[1],i[2],i[3],i[4],i[5]);break;case r.OPS.setTextRise:this.setTextRise(i[0]);break;case r.OPS.setTextRenderingMode:this.setTextRenderingMode(i[0]);break;case r.OPS.setLineWidth:this.setLineWidth(i[0]);break;case r.OPS.setLineJoin:this.setLineJoin(i[0]);break;case r.OPS.setLineCap:this.setLineCap(i[0]);break;case r.OPS.setMiterLimit:this.setMiterLimit(i[0]);break;case r.OPS.setFillRGBColor:this.setFillRGBColor(i[0],i[1],i[2]);break;case r.OPS.setStrokeRGBColor:this.setStrokeRGBColor(i[0],i[1],i[2]);break;case r.OPS.setStrokeColorN:this.setStrokeColorN(i);break;case r.OPS.setFillColorN:this.setFillColorN(i);break;case r.OPS.shadingFill:this.shadingFill(i[0]);break;case r.OPS.setDash:this.setDash(i[0],i[1]);break;case r.OPS.setRenderingIntent:this.setRenderingIntent(i[0]);break;case r.OPS.setFlatness:this.setFlatness(i[0]);break;case r.OPS.setGState:this.setGState(i[0]);break;case r.OPS.fill:this.fill();break;case r.OPS.eoFill:this.eoFill();break;case r.OPS.stroke:this.stroke();break;case r.OPS.fillStroke:this.fillStroke();break;case r.OPS.eoFillStroke:this.eoFillStroke();break;case r.OPS.clip:this.clip("nonzero");break;case r.OPS.eoClip:this.clip("evenodd");break;case r.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case r.OPS.paintImageXObject:this.paintImageXObject(i[0]);break;case r.OPS.paintInlineImageXObject:this.paintInlineImageXObject(i[0]);break;case r.OPS.paintImageMaskXObject:this.paintImageMaskXObject(i[0]);break;case r.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(i[0],i[1]);break;case r.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case r.OPS.closePath:this.closePath();break;case r.OPS.closeStroke:this.closeStroke();break;case r.OPS.closeFillStroke:this.closeFillStroke();break;case r.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case r.OPS.nextLine:this.nextLine();break;case r.OPS.transform:this.transform(i[0],i[1],i[2],i[3],i[4],i[5]);break;case r.OPS.constructPath:this.constructPath(i[0],i[1]);break;case r.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,r.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,n,i,r,o){const s=this.current;s.textMatrix=s.lineMatrix=[t,e,n,i,r,o],s.textMatrixScale=Math.hypot(t,e),s.x=s.lineX=0,s.y=s.lineY=0,s.xcoords=[],s.ycoords=[],s.tspan=this.svgFactory.createElement("svg:tspan"),s.tspan.setAttributeNS(null,"font-family",s.fontFamily),s.tspan.setAttributeNS(null,"font-size",`${p(s.fontSize)}px`),s.tspan.setAttributeNS(null,"y",p(-s.y)),s.txtElement=this.svgFactory.createElement("svg:text"),s.txtElement.append(s.tspan)}beginText(){const t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=r.IDENTITY_MATRIX,t.lineMatrix=r.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){const n=this.current;n.x=n.lineX+=t,n.y=n.lineY+=e,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${p(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",p(-n.y))}showText(t){const e=this.current,n=e.font,i=e.fontSize;if(0===i)return;const l=e.fontSizeScale,c=e.charSpacing,h=e.wordSpacing,u=e.fontDirection,d=e.textHScale*u,g=n.vertical,m=g?1:-1,y=n.defaultVMetrics,v=i*e.fontMatrix[0];let b=0;for(const r of t){if(null===r){b+=u*h;continue}if("number"==typeof r){b+=m*r*i/1e3;continue}const t=(r.isSpace?h:0)+c,o=r.fontChar;let s,a,d=r.width;if(g){let t;const e=r.vmetric||y;t=r.vmetric?e[1]:.5*d,t=-t*v;const n=e[2]*v;d=e?-e[0]:d,s=t/l,a=(b+n)/l}else s=b/l,a=0;(r.isInFont||n.missingFile)&&(e.xcoords.push(e.x+s),g&&e.ycoords.push(-e.y+a),e.tspan.textContent+=o),b+=g?d*v-t*u:d*v+t*u}e.tspan.setAttributeNS(null,"x",e.xcoords.map(p).join(" ")),g?e.tspan.setAttributeNS(null,"y",e.ycoords.map(p).join(" ")):e.tspan.setAttributeNS(null,"y",p(-e.y)),g?e.y-=b:e.x+=b*d,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${p(e.fontSize)}px`),e.fontStyle!==o&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==s&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);const w=e.textRenderingMode&r.TextRenderingMode.FILL_STROKE_MASK;if(w===r.TextRenderingMode.FILL||w===r.TextRenderingMode.FILL_STROKE?(e.fillColor!==a&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===r.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),w===r.TextRenderingMode.STROKE||w===r.TextRenderingMode.FILL_STROKE){const t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let x=e.textMatrix;0!==e.textRise&&(x=x.slice(),x[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${f(x)} scale(${p(d)}, -1)`),e.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const e=h(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }\n`}setFont(t){const e=this.current,n=this.commonObjs.get(t[0]);let i=t[1];e.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),e.fontMatrix=n.fontMatrix||r.FONT_IDENTITY_MATRIX;let o="normal";n.black?o="900":n.bold&&(o="bold");const s=n.italic?"italic":"normal";i<0?(i=-i,e.fontDirection=-1):e.fontDirection=1,e.fontSize=i,e.fontFamily=n.loadedName,e.fontWeight=o,e.fontStyle=s,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",p(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){const t=this.current;t.textRenderingMode&r.TextRenderingMode.ADD_TO_PATH_FLAG&&t.txtElement?.hasChildNodes()&&(t.element=t.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=l[t]}setLineJoin(t){this.current.lineJoin=c[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,n){this.current.strokeColor=r.Util.makeHexColor(t,e,n)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,n){this.current.fillColor=r.Util.makeHexColor(t,e,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){const{width:e,height:n}=this.viewport,i=r.Util.inverseTransform(this.transformMatrix),[o,s,a,l]=r.Util.getAxialAlignedBoundingBox([0,0,e,n],i),c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x",o),c.setAttributeNS(null,"y",s),c.setAttributeNS(null,"width",a-o),c.setAttributeNS(null,"height",l-s),c.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&c.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(c)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){const e=t[1],n=t[2],i=t[3]||r.IDENTITY_MATRIX,[o,s,a,l]=t[4],c=t[5],h=t[6],u=t[7],d="shading"+y++,[p,f,g,m]=r.Util.normalizeRect([...r.Util.applyTransform([o,s],i),...r.Util.applyTransform([a,l],i)]),[v,b]=r.Util.singularValueDecompose2dScale(i),w=c*v,x=h*b,_=this.svgFactory.createElement("svg:pattern");_.setAttributeNS(null,"id",d),_.setAttributeNS(null,"patternUnits","userSpaceOnUse"),_.setAttributeNS(null,"width",w),_.setAttributeNS(null,"height",x),_.setAttributeNS(null,"x",`${p}`),_.setAttributeNS(null,"y",`${f}`);const S=this.svg,C=this.transformMatrix,k=this.current.fillColor,A=this.current.strokeColor,E=this.svgFactory.create(g-p,m-f);if(this.svg=E,this.transformMatrix=i,2===u){const t=r.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(n)),this.svg=S,this.transformMatrix=C,this.current.fillColor=k,this.current.strokeColor=A,_.append(E.childNodes[0]),this.defs.append(_),`url(#${d})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":const e="shading"+y++,n=t[3];let i;switch(t[1]){case"axial":const n=t[4],r=t[5];i=this.svgFactory.createElement("svg:linearGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"x1",n[0]),i.setAttributeNS(null,"y1",n[1]),i.setAttributeNS(null,"x2",r[0]),i.setAttributeNS(null,"y2",r[1]);break;case"radial":const o=t[4],s=t[5],a=t[6],l=t[7];i=this.svgFactory.createElement("svg:radialGradient"),i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),i.setAttributeNS(null,"cx",s[0]),i.setAttributeNS(null,"cy",s[1]),i.setAttributeNS(null,"r",l),i.setAttributeNS(null,"fx",o[0]),i.setAttributeNS(null,"fy",o[1]),i.setAttributeNS(null,"fr",a);break;default:throw new Error(`Unknown RadialAxial type: ${t[1]}`)}for(const t of n){const e=this.svgFactory.createElement("svg:stop");e.setAttributeNS(null,"offset",t[0]),e.setAttributeNS(null,"stop-color",t[1]),i.append(e)}return this.defs.append(i),`url(#${e})`;case"Mesh":return(0,r.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){const n=this.current;let i=n.x,o=n.y,s=[],a=0;for(const n of t)switch(0|n){case r.OPS.rectangle:i=e[a++],o=e[a++];const t=i+e[a++],n=o+e[a++];s.push("M",p(i),p(o),"L",p(t),p(o),"L",p(t),p(n),"L",p(i),p(n),"Z");break;case r.OPS.moveTo:i=e[a++],o=e[a++],s.push("M",p(i),p(o));break;case r.OPS.lineTo:i=e[a++],o=e[a++],s.push("L",p(i),p(o));break;case r.OPS.curveTo:i=e[a+4],o=e[a+5],s.push("C",p(e[a]),p(e[a+1]),p(e[a+2]),p(e[a+3]),p(i),p(o)),a+=6;break;case r.OPS.curveTo2:s.push("C",p(i),p(o),p(e[a]),p(e[a+1]),p(e[a+2]),p(e[a+3])),i=e[a+2],o=e[a+3],a+=4;break;case r.OPS.curveTo3:i=e[a+2],o=e[a+3],s.push("C",p(e[a]),p(e[a+1]),p(i),p(o),p(i),p(o)),a+=4;break;case r.OPS.closePath:s.push("Z")}s=s.join(" "),n.path&&t.length>0&&t[0]!==r.OPS.rectangle&&t[0]!==r.OPS.moveTo?s=n.path.getAttributeNS(null,"d")+s:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",s),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(i,o)}endPath(){const t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element)return void(this.pendingClip=null);const e="clippath"+g++,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",e),n.setAttributeNS(null,"transform",f(this.transformMatrix));const i=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?i.setAttributeNS(null,"clip-rule","evenodd"):i.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(i),this.defs.append(n),t.activeClipUrl){t.clipGroup=null;for(const t of this.extraStack)t.clipGroup=null;n.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){const t=this.current;if(t.path){const e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,n]of t)switch(e){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,r.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){const t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){const t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t,e=1){const n=this.current;let i=n.dashArray;1!==e&&i.length>0&&(i=i.map((function(t){return e*t}))),t.setAttributeNS(null,"stroke",n.strokeColor),t.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",p(n.miterLimit)),t.setAttributeNS(null,"stroke-linecap",n.lineCap),t.setAttributeNS(null,"stroke-linejoin",n.lineJoin),t.setAttributeNS(null,"stroke-width",p(e*n.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",i.map(p).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",p(e*n.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){const e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,r.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){const n=t.width,i=t.height,r=u(t,this.forceDataSchema,!!e),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",p(n)),o.setAttributeNS(null,"height",p(i)),this.current.element=o,this.clip("nonzero");const s=this.svgFactory.createElement("svg:image");s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r),s.setAttributeNS(null,"x","0"),s.setAttributeNS(null,"y",p(-i)),s.setAttributeNS(null,"width",p(n)+"px"),s.setAttributeNS(null,"height",p(i)+"px"),s.setAttributeNS(null,"transform",`scale(${p(1/n)} ${p(-1/i)})`),e?e.append(s):this._ensureTransformGroup().append(s)}paintImageMaskXObject(t){const e=this.getObject(t.data,t);if(e.bitmap)return void(0,r.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const n=this.current,i=e.width,o=e.height,s=n.fillColor;n.maskId="mask"+m++;const a=this.svgFactory.createElement("svg:mask");a.setAttributeNS(null,"id",n.maskId);const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width",p(i)),l.setAttributeNS(null,"height",p(o)),l.setAttributeNS(null,"fill",s),l.setAttributeNS(null,"mask",`url(#${n.maskId})`),this.defs.append(a),this._ensureTransformGroup().append(l),this.paintInlineImageXObject(e,a)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){const t=e[2]-e[0],n=e[3]-e[1],i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x",e[0]),i.setAttributeNS(null,"y",e[1]),i.setAttributeNS(null,"width",p(t)),i.setAttributeNS(null,"height",p(n)),this.current.element=i,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){const e=this.svgFactory.create(t.width,t.height),n=this.svgFactory.createElement("svg:defs");e.append(n),this.defs=n;const i=this.svgFactory.createElement("svg:g");return i.setAttributeNS(null,"transform",f(t.transform)),e.append(i),this.svg=i,e}_ensureClipGroup(){if(!this.current.clipGroup){const t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",f(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class n{static textContent(t){const e=[],i={items:e,styles:Object.create(null)};return function t(i){if(!i)return;let r=null;const o=i.name;if("#text"===o)r=i.value;else{if(!n.shouldBuildText(o))return;i?.attributes?.textContent?r=i.attributes.textContent:i.value&&(r=i.value)}if(null!==r&&e.push({str:r}),i.children)for(const e of i.children)t(e)}(t),i}static shouldBuildText(t){return!("textarea"===t||"input"===t||"option"===t||"select"===t)}}e.XfaText=n},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function(t){t.textContentSource||!t.textContent&&!t.textContentStream||((0,r.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),t.textContentSource=t.textContent||t.textContentStream);const{container:e,viewport:n}=t,i=getComputedStyle(e),o=i.getPropertyValue("visibility"),s=parseFloat(i.getPropertyValue("--scale-factor"));"visible"===o&&(!s||Math.abs(s-n.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const a=new u(t);return a._render(),a},e.updateTextLayer=function({container:t,viewport:e,textDivs:n,textDivProperties:i,isOffscreenCanvasSupported:o,mustRotate:s=!0,mustRescale:a=!0}){if(s&&(0,r.setLayerDimensions)(t,{rotation:e.rotation}),a){const t=l(0,o),r={prevFontSize:null,prevFontFamily:null,div:null,scale:e.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:t};for(const t of n)r.properties=i.get(t),r.div=t,h(r)}};var i=n(1),r=n(6);const o=30,s=.8,a=new Map;function l(t,e){let n;if(e&&i.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(t,t).getContext("2d",{alpha:!1});else{const e=document.createElement("canvas");e.width=e.height=t,n=e.getContext("2d",{alpha:!1})}return n}function c(t,e,n){const r=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(r);const h=i.Util.transform(t._transform,e.transform);let u=Math.atan2(h[1],h[0]);const d=n[e.fontName];d.vertical&&(u+=Math.PI/2);const p=Math.hypot(h[2],h[3]),f=p*function(t,e){const n=a.get(t);if(n)return n;const i=l(o,e);i.font=`${o}px ${t}`;const r=i.measureText("");let c=r.fontBoundingBoxAscent,h=Math.abs(r.fontBoundingBoxDescent);if(c){const e=c/(c+h);return a.set(t,e),i.canvas.width=i.canvas.height=0,e}i.strokeStyle="red",i.clearRect(0,0,o,o),i.strokeText("g",0,0);let u=i.getImageData(0,0,o,o).data;h=0;for(let t=u.length-1-3;t>=0;t-=4)if(u[t]>0){h=Math.ceil(t/4/o);break}i.clearRect(0,0,o,o),i.strokeText("A",0,o),u=i.getImageData(0,0,o,o).data,c=0;for(let t=0,e=u.length;t<e;t+=4)if(u[t]>0){c=o-Math.floor(t/4/o);break}if(i.canvas.width=i.canvas.height=0,c){const e=c/(c+h);return a.set(t,e),e}return a.set(t,s),s}(d.fontFamily,t._isOffscreenCanvasSupported);let g,m;0===u?(g=h[4],m=h[5]-f):(g=h[4]+f*Math.sin(u),m=h[5]-f*Math.cos(u));const y="calc(var(--scale-factor)*",v=r.style;t._container===t._rootContainer?(v.left=`${(100*g/t._pageWidth).toFixed(2)}%`,v.top=`${(100*m/t._pageHeight).toFixed(2)}%`):(v.left=`${y}${g.toFixed(2)}px)`,v.top=`${y}${m.toFixed(2)}px)`),v.fontSize=`${y}${p.toFixed(2)}px)`,v.fontFamily=d.fontFamily,c.fontSize=p,r.setAttribute("role","presentation"),r.textContent=e.str,r.dir=e.dir,t._fontInspectorEnabled&&(r.dataset.fontName=e.fontName),0!==u&&(c.angle=u*(180/Math.PI));let b=!1;if(e.str.length>1)b=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(b=!0)}b&&(c.canvasWidth=d.vertical?e.height:e.width),t._textDivProperties.set(r,c),t._isReadableStream&&t._layoutText(r)}function h(t){const{div:e,scale:n,properties:i,ctx:r,prevFontSize:o,prevFontFamily:s}=t,{style:a}=e;let l="";if(0!==i.canvasWidth&&i.hasText){const{fontFamily:c}=a,{canvasWidth:h,fontSize:u}=i;o===u&&s===c||(r.font=`${u*n}px ${c}`,t.prevFontSize=u,t.prevFontFamily=c);const{width:d}=r.measureText(e.textContent);d>0&&(l=`scaleX(${h*n/d})`)}0!==i.angle&&(l=`rotate(${i.angle}deg) ${l}`),l.length>0&&(a.transform=l)}class u{constructor({textContentSource:t,container:e,viewport:n,textDivs:o,textDivProperties:s,textContentItemsStr:a,isOffscreenCanvasSupported:c}){this._textContentSource=t,this._isReadableStream=t instanceof ReadableStream,this._container=this._rootContainer=e,this._textDivs=o||[],this._textContentItemsStr=a||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=s||new WeakMap,this._canceled=!1,this._capability=new i.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:l(0,c)};const{pageWidth:h,pageHeight:u,pageX:d,pageY:p}=n.rawDims;this._transform=[1,0,0,-1,-d,p+u],this._pageWidth=h,this._pageHeight=u,(0,r.setLayerDimensions)(e,n),this._capability.promise.finally((()=>{this._layoutTextParams=null})).catch((()=>{}))}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new i.AbortException("TextLayer task cancelled.")).catch((()=>{})),this._reader=null),this._capability.reject(new i.AbortException("TextLayer task cancelled."))}_processItems(t,e){for(const n of t)if(void 0!==n.str)this._textContentItemsStr.push(n.str),c(this,n,e);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==n.id&&this._container.setAttribute("id",`${n.id}`),t.append(this._container)}else"endMarkedContent"===n.type&&(this._container=this._container.parentNode)}_layoutText(t){const e=this._layoutTextParams.properties=this._textDivProperties.get(t);if(this._layoutTextParams.div=t,h(this._layoutTextParams),e.hasText&&this._container.append(t),e.hasEOL){const t=document.createElement("br");t.setAttribute("role","presentation"),this._container.append(t)}}_render(){const t=new i.PromiseCapability;let e=Object.create(null);if(this._isReadableStream){const n=()=>{this._reader.read().then((({value:i,done:r})=>{r?t.resolve():(Object.assign(e,i.styles),this._processItems(i.items,e),n())}),t.reject)};this._reader=this._textContentSource.getReader(),n()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:e,styles:n}=this._textContentSource;this._processItems(e,n),t.resolve()}}t.promise.then((()=>{e=null,function(t){if(t._canceled)return;const e=t._textDivs,n=t._capability;if(e.length>1e5)n.resolve();else{if(!t._isReadableStream)for(const n of e)t._layoutText(n);n.resolve()}}(this)}),this._capability.reject)}}e.TextLayerRenderTask=u},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var i=n(1),r=n(4),o=n(28),s=n(33),a=n(6),l=n(34);class c{#_e;#Se=!1;#Ce=null;#ke=this.pointerup.bind(this);#Ae=this.pointerdown.bind(this);#Ee=new Map;#Te=!1;#Me=!1;#Oe=!1;#Ie;static _initialized=!1;constructor({uiManager:t,pageIndex:e,div:n,accessibilityManager:i,annotationLayer:r,viewport:a,l10n:h}){const u=[o.FreeTextEditor,s.InkEditor,l.StampEditor];if(!c._initialized){c._initialized=!0;for(const t of u)t.initialize(h)}t.registerEditorTypes(u),this.#Ie=t,this.pageIndex=e,this.div=n,this.#_e=i,this.#Ce=r,this.viewport=a,this.#Ie.addLayer(this)}get isEmpty(){return 0===this.#Ee.size}updateToolbar(t){this.#Ie.updateToolbar(t)}updateMode(t=this.#Ie.getMode()){this.#De(),t===i.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),t!==i.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",t===i.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",t===i.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",t===i.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(t){if(t||this.#Ie.getMode()===i.AnnotationEditorType.INK){if(!t)for(const t of this.#Ee.values())if(t.isEmpty())return void t.setInBackground();this.#Fe({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(t){this.#Ie.setEditingState(t)}addCommands(t){this.#Ie.addCommands(t)}enable(){this.div.style.pointerEvents="auto";const t=new Set;for(const e of this.#Ee.values())e.enableEditing(),e.annotationElementId&&t.add(e.annotationElementId);if(!this.#Ce)return;const e=this.#Ce.getEditableAnnotations();for(const n of e){if(n.hide(),this.#Ie.isDeletedAnnotationElement(n.data.id))continue;if(t.has(n.data.id))continue;const e=this.deserialize(n);e&&(this.addOrRebuild(e),e.enableEditing())}}disable(){this.#Oe=!0,this.div.style.pointerEvents="none";const t=new Set;for(const e of this.#Ee.values())e.disableEditing(),e.annotationElementId&&null===e.serialize()?(this.getEditableAnnotation(e.annotationElementId)?.show(),e.remove()):t.add(e.annotationElementId);if(this.#Ce){const e=this.#Ce.getEditableAnnotations();for(const n of e){const{id:e}=n.data;t.has(e)||this.#Ie.isDeletedAnnotationElement(e)||n.show()}}this.#De(),this.isEmpty&&(this.div.hidden=!0),this.#Oe=!1}getEditableAnnotation(t){return this.#Ce?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#Ie.getActive()!==t&&this.#Ie.setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",this.#Ae),this.div.addEventListener("pointerup",this.#ke)}disableClick(){this.div.removeEventListener("pointerdown",this.#Ae),this.div.removeEventListener("pointerup",this.#ke)}attach(t){this.#Ee.set(t.id,t);const{annotationElementId:e}=t;e&&this.#Ie.isDeletedAnnotationElement(e)&&this.#Ie.removeDeletedAnnotationElement(t)}detach(t){this.#Ee.delete(t.id),this.#_e?.removePointerInTextLayer(t.contentDiv),!this.#Oe&&t.annotationElementId&&this.#Ie.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#Ie.removeEditor(t),t.div.contains(document.activeElement)&&setTimeout((()=>{this.#Ie.focusMainContainer()}),0),t.div.remove(),t.isAttachedToDOM=!1,this.#Me||this.addInkEditorIfNeeded(!1)}changeParent(t){t.parent!==this&&(t.annotationElementId&&(this.#Ie.addDeletedAnnotationElement(t.annotationElementId),r.AnnotationEditor.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(this.changeParent(t),this.#Ie.addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(),this.#Ie.addToAnnotationStorage(t)}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&(t._focusEventsAllowed=!1,setTimeout((()=>{t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",(()=>{t._focusEventsAllowed=!0}),{once:!0}),e.focus())}),0)),t._structTreeParentId=this.#_e?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addUndoableEditor(t){this.addCommands({cmd:()=>t._uiManager.rebuild(t),undo:()=>{t.remove()},mustExec:!1})}getNextId(){return this.#Ie.getId()}#Pe(t){switch(this.#Ie.getMode()){case i.AnnotationEditorType.FREETEXT:return new o.FreeTextEditor(t);case i.AnnotationEditorType.INK:return new s.InkEditor(t);case i.AnnotationEditorType.STAMP:return new l.StampEditor(t)}return null}pasteEditor(t,e){this.#Ie.updateToolbar(t),this.#Ie.updateMode(t);const{offsetX:n,offsetY:i}=this.#Re(),r=this.getNextId(),o=this.#Pe({parent:this,id:r,x:n,y:i,uiManager:this.#Ie,isCentered:!0,...e});o&&this.add(o)}deserialize(t){switch(t.annotationType??t.annotationEditorType){case i.AnnotationEditorType.FREETEXT:return o.FreeTextEditor.deserialize(t,this,this.#Ie);case i.AnnotationEditorType.INK:return s.InkEditor.deserialize(t,this,this.#Ie);case i.AnnotationEditorType.STAMP:return l.StampEditor.deserialize(t,this,this.#Ie)}return null}#Fe(t,e){const n=this.getNextId(),i=this.#Pe({parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:this.#Ie,isCentered:e});return i&&this.add(i),i}#Re(){const{x:t,y:e,width:n,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),s=(r+Math.min(window.innerWidth,t+n))/2-t,a=(o+Math.min(window.innerHeight,e+i))/2-e,[l,c]=this.viewport.rotation%180==0?[s,a]:[a,s];return{offsetX:l,offsetY:c}}addNewEditor(){this.#Fe(this.#Re(),!0)}setSelected(t){this.#Ie.setSelected(t)}toggleSelected(t){this.#Ie.toggleSelected(t)}isSelected(t){return this.#Ie.isSelected(t)}unselect(t){this.#Ie.unselect(t)}pointerup(t){const{isMac:e}=i.FeatureTest.platform;0!==t.button||t.ctrlKey&&e||t.target===this.div&&this.#Te&&(this.#Te=!1,this.#Se?this.#Ie.getMode()!==i.AnnotationEditorType.STAMP?this.#Fe(t,!1):this.#Ie.unselectAll():this.#Se=!0)}pointerdown(t){if(this.#Te)return void(this.#Te=!1);const{isMac:e}=i.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&e)return;if(t.target!==this.div)return;this.#Te=!0;const n=this.#Ie.getActive();this.#Se=!n||n.isEmpty()}findNewParent(t,e,n){const i=this.#Ie.findParent(e,n);return null!==i&&i!==this&&(i.changeParent(t),!0)}destroy(){this.#Ie.getActive()?.parent===this&&(this.#Ie.commitOrRemove(),this.#Ie.setActiveEditor(null));for(const t of this.#Ee.values())this.#_e?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#Ee.clear(),this.#Ie.removeLayer(this)}#De(){this.#Me=!0;for(const t of this.#Ee.values())t.isEmpty()&&t.remove();this.#Me=!1}render({viewport:t}){this.viewport=t,(0,a.setLayerDimensions)(this.div,t);for(const t of this.#Ie.getEditors(this.pageIndex))this.add(t);this.updateMode()}update({viewport:t}){this.#Ie.commitOrRemove(),this.viewport=t,(0,a.setLayerDimensions)(this.div,{rotation:t.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}}e.AnnotationEditorLayer=c},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var i=n(1),r=n(5),o=n(4),s=n(29);class a extends o.AnnotationEditor{#Le=this.editorDivBlur.bind(this);#Ne=this.editorDivFocus.bind(this);#Be=this.editorDivInput.bind(this);#je=this.editorDivKeydown.bind(this);#ze;#$e="";#He=`${this.id}-editor`;#Ue;#Ve=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=a.prototype,e=t=>t.isEmpty(),n=r.AnnotationEditorUIManager.TRANSLATE_SMALL,o=r.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,i.shadow)(this,"_keyboardManager",new r.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-o,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[o,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-o],checker:e}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,o],checker:e}]]))}static _type="freetext";constructor(t){super({...t,name:"freeTextEditor"}),this.#ze=t.color||a._defaultColor||o.AnnotationEditor._defaultLineColor,this.#Ue=t.fontSize||a._defaultFontSize}static initialize(t){o.AnnotationEditor.initialize(t,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:a._defaultFontSize=e;break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:a._defaultColor=e}}updateParams(t,e){switch(t){case i.AnnotationEditorParamsType.FREETEXT_SIZE:this.#We(e);break;case i.AnnotationEditorParamsType.FREETEXT_COLOR:this.#qe(e)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,a._defaultFontSize],[i.AnnotationEditorParamsType.FREETEXT_COLOR,a._defaultColor||o.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.FREETEXT_SIZE,this.#Ue],[i.AnnotationEditorParamsType.FREETEXT_COLOR,this.#ze]]}#We(t){const e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-this.#Ue)*this.parentScale),this.#Ue=t,this.#Ke()},n=this.#Ue;this.addCommands({cmd:()=>{e(t)},undo:()=>{e(n)},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#qe(t){const e=this.#ze;this.addCommands({cmd:()=>{this.#ze=this.editorDiv.style.color=t},undo:()=>{this.#ze=this.editorDiv.style.color=e},mustExec:!0,type:i.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,e){this._uiManager.translateSelectedEditors(t,e,!0)}getInitialTranslation(){const t=this.parentScale;return[-a._internalPadding*t,-(a._internalPadding+this.#Ue)*t]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(i.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#je),this.editorDiv.addEventListener("focus",this.#Ne),this.editorDiv.addEventListener("blur",this.#Le),this.editorDiv.addEventListener("input",this.#Be))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#He),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#je),this.editorDiv.removeEventListener("focus",this.#Ne),this.editorDiv.removeEventListener("blur",this.#Le),this.editorDiv.removeEventListener("input",this.#Be),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width?this.#Xe():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#Ge(){const t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;const e=[];for(const n of t)e.push(n.innerText.replace(/\r\n?|\n/,""));return e.join("\n")}#Ke(){const[t,e]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:t,div:e}=this,i=e.style.display;e.style.display="hidden",t.div.append(this.div),n=e.getBoundingClientRect(),e.remove(),e.style.display=i}this.rotation%180==this.parentRotation%180?(this.width=n.width/t,this.height=n.height/e):(this.width=n.height/t,this.height=n.width/e),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#$e,e=this.#$e=this.#Ge().trimEnd();if(t===e)return;const n=t=>{this.#$e=t,t?(this.#Ye(),this._uiManager.rebuild(this),this.#Ke()):this.remove()};this.addCommands({cmd:()=>{n(e)},undo:()=>{n(t)},mustExec:!1}),this.#Ke()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){a._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#He),this.enableEditing(),o.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then((t=>this.editorDiv?.setAttribute("aria-label",t))),o.AnnotationEditor._l10nPromise.get("free_text2_default_content").then((t=>this.editorDiv?.setAttribute("default-content",t))),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#Ue}px * var(--scale-factor))`,n.color=this.#ze,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,r.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,i]=this.parentDimensions;if(this.annotationElementId){const{position:r}=this.#Ve;let[o,s]=this.getInitialTranslation();[o,s]=this.pageTranslationToScreen(o,s);const[a,l]=this.pageDimensions,[c,h]=this.pageTranslation;let u,d;switch(this.rotation){case 0:u=t+(r[0]-c)/a,d=e+this.height-(r[1]-h)/l;break;case 90:u=t+(r[0]-c)/a,d=e-(r[1]-h)/l,[o,s]=[s,-o];break;case 180:u=t-this.width+(r[0]-c)/a,d=e-(r[1]-h)/l,[o,s]=[-o,-s];break;case 270:u=t+(r[0]-c-this.height*l)/a,d=e+(r[1]-h-this.width*a)/l,[o,s]=[-s,o]}this.setAt(u*n,d*i,o,s)}else this.setAt(t*n,e*i,this.width*n,this.height*i);this.#Ye(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#Ye(){if(this.editorDiv.replaceChildren(),this.#$e)for(const t of this.#$e.split("\n")){const e=document.createElement("div");e.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(e)}}get contentDiv(){return this.editorDiv}static deserialize(t,e,n){let r=null;if(t instanceof s.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:e,fontColor:n},rect:o,rotation:s,id:a},textContent:l,textPosition:c,parent:{page:{pageNumber:h}}}=t;if(!l||0===l.length)return null;r=t={annotationType:i.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:e,value:l.join("\n"),position:c,pageIndex:h-1,rect:o,rotation:s,id:a,deleted:!1}}const o=super.deserialize(t,e,n);return o.#Ue=t.fontSize,o.#ze=i.Util.makeHexColor(...t.color),o.#$e=t.value,o.annotationElementId=t.id||null,o.#Ve=r,o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const e=a._internalPadding*this.parentScale,n=this.getRect(e,e),r=o.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#ze),s={annotationType:i.AnnotationEditorType.FREETEXT,color:r,fontSize:this.#Ue,value:this.#$e,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?s:this.annotationElementId&&!this.#Je(s)?null:(s.id=this.annotationElementId,s)}#Je(t){const{value:e,fontSize:n,color:i,rect:r,pageIndex:o}=this.#Ve;return t.value!==e||t.fontSize!==n||t.rect.some(((t,e)=>Math.abs(t-r[e])>=1))||t.color.some(((t,e)=>t!==i[e]))||t.pageIndex!==o}#Xe(t=!1){if(!this.annotationElementId)return;if(this.#Ke(),!t&&(0===this.width||0===this.height))return void setTimeout((()=>this.#Xe(!0)),0);const e=a._internalPadding*this.parentScale;this.#Ve.rect=this.getRect(e,e)}}e.FreeTextEditor=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var i=n(1),r=n(6),o=n(3),s=n(30),a=n(31),l=n(32);const c=1e3,h=new WeakSet;function u(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class d{static create(t){switch(t.data.annotationType){case i.AnnotationType.LINK:return new f(t);case i.AnnotationType.TEXT:return new g(t);case i.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new y(t);case"Btn":return t.data.radioButton?new w(t):t.data.checkBox?new b(t):new x(t);case"Ch":return new _(t);case"Sig":return new v(t)}return new m(t);case i.AnnotationType.POPUP:return new S(t);case i.AnnotationType.FREETEXT:return new k(t);case i.AnnotationType.LINE:return new A(t);case i.AnnotationType.SQUARE:return new E(t);case i.AnnotationType.CIRCLE:return new T(t);case i.AnnotationType.POLYLINE:return new M(t);case i.AnnotationType.CARET:return new I(t);case i.AnnotationType.INK:return new D(t);case i.AnnotationType.POLYGON:return new O(t);case i.AnnotationType.HIGHLIGHT:return new F(t);case i.AnnotationType.UNDERLINE:return new P(t);case i.AnnotationType.SQUIGGLY:return new R(t);case i.AnnotationType.STRIKEOUT:return new L(t);case i.AnnotationType.STAMP:return new N(t);case i.AnnotationType.FILEATTACHMENT:return new B(t);default:return new p(t)}}}class p{#Ze=!1;constructor(t,{isRenderable:e=!1,ignoreBorder:n=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(n)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:n}){return!!(t?.str||e?.str||n?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(t){const{data:e,parent:{page:n,viewport:r}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",e.id),this instanceof m||(o.tabIndex=c),o.style.zIndex=this.parent.zIndex++,this.data.popupRef&&o.setAttribute("aria-haspopup","dialog"),e.noRotate&&o.classList.add("norotate");const{pageWidth:s,pageHeight:a,pageX:l,pageY:h}=r.rawDims;if(!e.rect||this instanceof S){const{rotation:t}=e;return e.hasOwnCanvas||0===t||this.setRotation(t,o),o}const{width:d,height:p}=u(e.rect),f=i.Util.normalizeRect([e.rect[0],n.view[3]-e.rect[1]+n.view[1],e.rect[2],n.view[3]-e.rect[3]+n.view[1]]);if(!t&&e.borderStyle.width>0){o.style.borderWidth=`${e.borderStyle.width}px`;const t=e.borderStyle.horizontalCornerRadius,n=e.borderStyle.verticalCornerRadius;if(t>0||n>0){const e=`calc(${t}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`;o.style.borderRadius=e}else if(this instanceof w){const t=`calc(${d}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;o.style.borderRadius=t}switch(e.borderStyle.style){case i.AnnotationBorderStyleType.SOLID:o.style.borderStyle="solid";break;case i.AnnotationBorderStyleType.DASHED:o.style.borderStyle="dashed";break;case i.AnnotationBorderStyleType.BEVELED:(0,i.warn)("Unimplemented border style: beveled");break;case i.AnnotationBorderStyleType.INSET:(0,i.warn)("Unimplemented border style: inset");break;case i.AnnotationBorderStyleType.UNDERLINE:o.style.borderBottomStyle="solid"}const r=e.borderColor||null;r?(this.#Ze=!0,o.style.borderColor=i.Util.makeHexColor(0|r[0],0|r[1],0|r[2])):o.style.borderWidth=0}o.style.left=100*(f[0]-l)/s+"%",o.style.top=100*(f[1]-h)/a+"%";const{rotation:g}=e;return e.hasOwnCanvas||0===g?(o.style.width=100*d/s+"%",o.style.height=100*p/a+"%"):this.setRotation(g,o),o}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:i}=this.parent.viewport.rawDims,{width:r,height:o}=u(this.data.rect);let s,a;t%180==0?(s=100*r/n,a=100*o/i):(s=100*o/n,a=100*r/i),e.style.width=`${s}%`,e.style.height=`${a}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(t,e,n)=>{const i=n.detail[t],r=i[0],o=i.slice(1);n.target.style[e]=s.ColorConverters[`${r}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[e]:s.ColorConverters[`${r}_rgb`](o)})};return(0,i.shadow)(this,"_commonActions",{display:t=>{const{display:e}=t.detail,n=e%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===e||2===e})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:e}=t.detail;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:e,noView:e})},focus:t=>{setTimeout((()=>t.target.focus({preventScroll:!1})),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{const e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){const n=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||n[i];r?.(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const n=this._commonActions;for(const[i,r]of Object.entries(e)){const o=n[i];o&&(o({detail:{[i]:r},target:t}),delete e[i])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,n,i,r]=this.data.rect;if(1===t.length){const[,{x:o,y:s},{x:a,y:l}]=t[0];if(i===o&&r===s&&e===a&&n===l)return}const{style:o}=this.container;let s;if(this.#Ze){const{borderColor:t,borderWidth:e}=o;o.borderWidth=0,s=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${t}" stroke-width="${e}">`],this.container.classList.add("hasBorder")}const a=i-e,l=r-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const u=c.createElement("defs");h.append(u);const d=c.createElement("clipPath"),p=`clippath_${this.data.id}`;d.setAttribute("id",p),d.setAttribute("clipPathUnits","objectBoundingBox"),u.append(d);for(const[,{x:n,y:i},{x:o,y:h}]of t){const t=c.createElement("rect"),u=(o-e)/a,p=(r-i)/l,f=(n-o)/a,g=(i-h)/l;t.setAttribute("x",u),t.setAttribute("y",p),t.setAttribute("width",f),t.setAttribute("height",g),d.append(t),s?.push(`<rect vector-effect="non-scaling-stroke" x="${u}" y="${p}" width="${f}" height="${g}"/>`)}this.#Ze&&(s.push("</g></svg>')"),o.backgroundImage=s.join("")),this.container.append(h),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:t,data:e}=this;t.setAttribute("aria-haspopup","dialog");const n=new S({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){(0,i.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:t,id:o,exportValues:s}of r){if(-1===t)continue;if(o===e)continue;const r="string"==typeof s?s:null,a=document.querySelector(`[data-element-id="${o}"]`);!a||h.has(a)?n.push({id:o,exportValue:r,domElement:a}):(0,i.warn)(`_getElementsByName - element not allowed: ${o}`)}return n}for(const i of document.getElementsByName(t)){const{exportValue:t}=i,r=i.getAttribute("data-element-id");r!==e&&h.has(i)&&n.push({id:r,exportValue:t,domElement:i})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",(()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})}))}}class f extends p{constructor(t,e=null){super(t,{isRenderable:!0,ignoreBorder:!!e?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:e}=this,n=document.createElement("a");n.setAttribute("data-element-id",t.id);let i=!1;return t.url?(e.addLinkAttributes(n,t.url,t.newWindow),i=!0):t.action?(this._bindNamedAction(n,t.action),i=!0):t.attachment?(this._bindAttachment(n,t.attachment),i=!0):t.setOCGState?(this.#Qe(n,t.setOCGState),i=!0):t.dest?(this._bindLink(n,t.dest),i=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,t),i=!0),t.resetForm?(this._bindResetFormAction(n,t.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(n,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(n),this.container}#tn(){this.container.setAttribute("data-internal-link","")}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&this.#tn()}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),this.#tn()}_bindAttachment(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,e.content,e.filename),!1),this.#tn()}#Qe(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),this.#tn()}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(e.actions)){const r=n.get(i);r&&(t[r]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:i}}),!1))}t.onclick||(t.onclick=()=>!1),this.#tn()}_bindResetFormAction(t,e){const n=t.onclick;if(n||(t.href=this.linkService.getAnchorUrl("")),this.#tn(),!this._fieldObjects)return(0,i.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(t.onclick=()=>!1));t.onclick=()=>{n?.();const{fields:t,refs:r,include:o}=e,s=[];if(0!==t.length||0!==r.length){const e=new Set(r);for(const n of t){const t=this._fieldObjects[n]||[];for(const{id:n}of t)e.add(n)}for(const t of Object.values(this._fieldObjects))for(const n of t)e.has(n.id)===o&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,l=[];for(const t of s){const{id:e}=t;switch(l.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${e}"]`);n&&(h.has(n)?n.dispatchEvent(new Event("resetform")):(0,i.warn)(`_bindResetFormAction - element not allowed: ${e}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}}),!1}}}class g extends p{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class m extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&("CANVAS"===t.previousSibling?.nodeName&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){const{isWin:e,isMac:n}=i.FeatureTest.platform;return e&&t.ctrlKey||n&&t.metaKey}_setEventListener(t,e,n,i,r){n.includes("mouse")?t.addEventListener(n,(t=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})})):t.addEventListener(n,(t=>{if("blur"===n){if(!e.focused||!t.relatedTarget)return;e.focused=!1}else if("focus"===n){if(e.focused)return;e.focused=!0}r&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}})}))}_setEventListeners(t,e,n,i){for(const[r,o]of n)("Action"===o||this.data.actions?.[o])&&("Focus"!==o&&"Blur"!==o||(e||={focused:!1}),this._setEventListener(t,e,r,o,i),"Focus"!==o||this.data.actions?.Blur?"Blur"!==o||this.data.actions?.Focus||this._setEventListener(t,e,"focus","Focus",null):this._setEventListener(t,e,"blur","Blur",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":i.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,o=t.style;let s;const a=t=>Math.round(10*t)/10;if(this.data.multiLine){const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),e=t/(Math.round(t/(i.LINE_FACTOR*r))||1);s=Math.min(r,a(e/i.LINE_FACTOR))}else{const t=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(r,a(t/i.LINE_FACTOR))}o.fontSize=`calc(${s}px * var(--scale-factor))`,o.color=i.Util.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(o.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class y extends m{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,n,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=n),r.setValue(o.id,{[i]:n})}render(){const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const i=t.getValue(e,{value:this.data.fieldValue});let r=i.value||"";const o=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;o&&r.length>o&&(r=r.slice(0,o));let s=i.formattedValue||this.data.textContent?.join("\n")||null;s&&this.data.comb&&(s=s.replaceAll(/\s+/g,""));const a={userValue:r,formattedValue:s,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=s??r,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",s??r),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),h.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=c,this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",(i=>{t.setValue(e,{value:i.target.value}),this.setPropertyOnSiblings(n,"value",i.target.value,"value"),a.formattedValue=null})),n.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue??"";n.value=a.userValue=e,a.formattedValue=null}));let l=t=>{const{formattedValue:e}=a;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",(t=>{if(a.focused)return;const{target:e}=t;a.userValue&&(e.value=a.userValue),a.lastCommittedValue=e.value,a.commitKey=1,a.focused=!0})),n.addEventListener("updatefromsandbox",(n=>{this.showElementAndHideCanvas(n.target);const i={value(n){a.userValue=n.detail.value??"",t.setValue(e,{value:a.userValue.toString()}),n.target.value=a.userValue},formattedValue(n){const{formattedValue:i}=n.detail;a.formattedValue=i,null!=i&&n.target!==document.activeElement&&(n.target.value=i),t.setValue(e,{formattedValue:i})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:n=>{const{charLimit:i}=n.detail,{target:r}=n;if(0===i)return void r.removeAttribute("maxLength");r.setAttribute("maxLength",i);let o=a.userValue;!o||o.length<=i||(o=o.slice(0,i),r.value=a.userValue=o,t.setValue(e,{value:o}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:r.selectionStart,selEnd:r.selectionEnd}}))}};this._dispatchEventFromSandbox(i,n)})),n.addEventListener("keydown",(t=>{a.commitKey=1;let n=-1;if("Escape"===t.key?n=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(a.commitKey=3):n=2,-1===n)return;const{value:i}=t.target;a.lastCommittedValue!==i&&(a.lastCommittedValue=i,a.userValue=i,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:n,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))}));const i=l;l=null,n.addEventListener("blur",(t=>{if(!a.focused||!t.relatedTarget)return;a.focused=!1;const{value:n}=t.target;a.userValue=n,a.lastCommittedValue!==n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:a.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}),i(t)})),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",(t=>{a.lastCommittedValue=null;const{data:n,target:i}=t,{value:r,selectionStart:o,selectionEnd:s}=i;let l=o,c=s;switch(t.inputType){case"deleteWordBackward":{const t=r.substring(0,o).match(/\w*[^\w]*$/);t&&(l-=t[0].length);break}case"deleteWordForward":{const t=r.substring(o).match(/^[^\w]*\w*/);t&&(c+=t[0].length);break}case"deleteContentBackward":o===s&&(l-=1);break;case"deleteContentForward":o===s&&(c+=1)}t.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:r,change:n||"",willCommit:!1,selStart:l,selEnd:c}})})),this._setEventListeners(n,a,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.value))}if(l&&n.addEventListener("blur",l),this.data.comb){const t=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class v extends m{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class b extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.exportValue===e.fieldValue}).value;"string"==typeof i&&(i="Off"!==i,t.setValue(n,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return h.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=c,r.addEventListener("change",(i=>{const{name:r,checked:o}=i.target;for(const i of this._getElementsByName(r,n)){const n=o&&i.exportValue===e.exportValue;i.domElement&&(i.domElement.checked=n),t.setValue(i.id,{value:n})}t.setValue(n,{value:o})})),r.addEventListener("resetform",(t=>{const n=e.defaultFieldValue||"Off";t.target.checked=n===e.exportValue})),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",(e=>{const i={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(n,{value:e.target.checked})}};this._dispatchEventFromSandbox(i,e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class w extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,n=e.id;let i=t.getValue(n,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof i&&(i=i!==e.buttonValue,t.setValue(n,{value:i}));const r=document.createElement("input");if(h.add(r),r.setAttribute("data-element-id",n),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=c,r.addEventListener("change",(e=>{const{name:i,checked:r}=e.target;for(const e of this._getElementsByName(i,n))t.setValue(e.id,{value:!1});t.setValue(n,{value:r})})),r.addEventListener("resetform",(t=>{const n=e.defaultFieldValue;t.target.checked=null!=n&&n===e.buttonValue})),this.enableScripting&&this.hasJSActions){const i=e.buttonValue;r.addEventListener("updatefromsandbox",(e=>{const r={value:e=>{const r=i===e.detail.value;for(const i of this._getElementsByName(e.target.name)){const e=r&&i.id===n;i.domElement&&(i.domElement.checked=e),t.setValue(i.id,{value:e})}}};this._dispatchEventFromSandbox(r,e)})),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],(t=>t.target.checked))}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class x extends f{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText);const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",(t=>{this._dispatchEventFromSandbox({},t)}))),t}}class _ extends m{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,n=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");h.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=c;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",(t=>{const e=this.data.defaultFieldValue;for(const t of i.options)t.selected=t.value===e}));for(const t of this.data.options){const e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,n.value.includes(t.exportValue)&&(e.setAttribute("selected",!0),r=!1),i.append(e)}let o=null;if(r){const t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),i.prepend(t),o=()=>{t.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const s=t=>{const e=t?"value":"textContent",{options:n,multiple:r}=i;return r?Array.prototype.filter.call(n,(t=>t.selected)).map((t=>t[e])):-1===n.selectedIndex?null:n[n.selectedIndex][e]};let a=s(!1);const l=t=>{const e=t.target.options;return Array.prototype.map.call(e,(t=>({displayValue:t.textContent,exportValue:t.value})))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",(n=>{const r={value(n){o?.();const r=n.detail.value,l=new Set(Array.isArray(r)?r:[r]);for(const t of i.options)t.selected=l.has(t.value);t.setValue(e,{value:s(!0)}),a=s(!1)},multipleSelection(t){i.multiple=!0},remove(n){const r=i.options,o=n.detail.remove;r[o].selected=!1,i.remove(o),r.length>0&&-1===Array.prototype.findIndex.call(r,(t=>t.selected))&&(r[0].selected=!0),t.setValue(e,{value:s(!0),items:l(n)}),a=s(!1)},clear(n){for(;0!==i.length;)i.remove(0);t.setValue(e,{value:null,items:[]}),a=s(!1)},insert(n){const{index:r,displayValue:o,exportValue:c}=n.detail.insert,h=i.children[r],u=document.createElement("option");u.textContent=o,u.value=c,h?h.before(u):i.append(u),t.setValue(e,{value:s(!0),items:l(n)}),a=s(!1)},items(n){const{items:r}=n.detail;for(;0!==i.length;)i.remove(0);for(const t of r){const{displayValue:e,exportValue:n}=t,r=document.createElement("option");r.textContent=e,r.value=n,i.append(r)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:s(!0),items:l(n)}),a=s(!1)},indices(n){const i=new Set(n.detail.indices);for(const t of n.target.options)t.selected=i.has(t.index);t.setValue(e,{value:s(!0)}),a=s(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(r,n)})),i.addEventListener("input",(n=>{const i=s(!0);t.setValue(e,{value:i}),n.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:a,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})})),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],(t=>t.target.value))):i.addEventListener("input",(function(n){t.setValue(e,{value:s(!0)})})),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S extends p{constructor(t){const{data:e,elements:n}=t;super(t,{isRenderable:p._hasPopupData(e)}),this.elements=n}render(){this.container.classList.add("popupAnnotation");const t=new C({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const n of this.elements)n.popup=t,e.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",e.map((t=>`${i.AnnotationPrefix}${t}`)).join(",")),this.container}}class C{#en=null;#nn=this.#in.bind(this);#rn=this.#on.bind(this);#sn=this.#an.bind(this);#ln=this.#cn.bind(this);#ze=null;#Dt=null;#hn=null;#un=null;#dn=null;#pn=null;#fn=!1;#gn=null;#mn=null;#yn=null;#vn=null;#bn=!1;constructor({container:t,color:e,elements:n,titleObj:i,modificationDate:o,contentsObj:s,richText:a,parent:l,rect:c,parentRect:h,open:u}){this.#Dt=t,this.#vn=i,this.#hn=s,this.#yn=a,this.#dn=l,this.#ze=e,this.#mn=c,this.#pn=h,this.#un=n;const d=r.PDFDateString.toDateObject(o);d&&(this.#en=l.l10n.get("annotation_date_string",{date:d.toLocaleDateString(),time:d.toLocaleTimeString()})),this.trigger=n.flatMap((t=>t.getElementsToTriggerPopup()));for(const t of this.trigger)t.addEventListener("click",this.#ln),t.addEventListener("mouseenter",this.#sn),t.addEventListener("mouseleave",this.#rn),t.classList.add("popupTriggerArea");for(const t of n)t.container?.addEventListener("keydown",this.#nn);this.#Dt.hidden=!0,u&&this.#cn()}render(){if(this.#gn)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:n,pageX:r,pageY:o}}}=this.#dn,s=this.#gn=document.createElement("div");if(s.className="popup",this.#ze){const t=s.style.outlineColor=i.Util.makeHexColor(...this.#ze);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))s.style.backgroundColor=`color-mix(in srgb, ${t} 30%, white)`;else{const t=.7;s.style.backgroundColor=i.Util.makeHexColor(...this.#ze.map((e=>Math.floor(t*(255-e)+e))))}}const a=document.createElement("span");a.className="header";const c=document.createElement("h1");if(a.append(c),({dir:c.dir,str:c.textContent}=this.#vn),s.append(a),this.#en){const t=document.createElement("span");t.classList.add("popupDate"),this.#en.then((e=>{t.textContent=e})),a.append(t)}const h=this.#hn,u=this.#yn;if(!u?.str||h?.str&&h.str!==u.str){const t=this._formatContents(h);s.append(t)}else l.XfaLayer.render({xfaHtml:u.html,intent:"richText",div:s}),s.lastChild.classList.add("richText","popupContent");let d=!!this.#pn,p=d?this.#pn:this.#mn;for(const t of this.#un)if(!p||null!==i.Util.intersect(t.data.rect,p)){p=t.data.rect,d=!0;break}const f=i.Util.normalizeRect([p[0],t[3]-p[1]+t[1],p[2],t[3]-p[3]+t[1]]),g=d?p[2]-p[0]+5:0,m=f[0]+g,y=f[1],{style:v}=this.#Dt;v.left=100*(m-r)/e+"%",v.top=100*(y-o)/n+"%",this.#Dt.append(s)}_formatContents({str:t,dir:e}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let t=0,e=i.length;t<e;++t){const r=i[t];n.append(document.createTextNode(r)),t<e-1&&n.append(document.createElement("br"))}return n}#in(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||("Enter"===t.key||"Escape"===t.key&&this.#fn)&&this.#cn()}#cn(){this.#fn=!this.#fn,this.#fn?(this.#an(),this.#Dt.addEventListener("click",this.#ln),this.#Dt.addEventListener("keydown",this.#nn)):(this.#on(),this.#Dt.removeEventListener("click",this.#ln),this.#Dt.removeEventListener("keydown",this.#nn))}#an(){this.#gn||this.render(),this.isVisible?this.#fn&&this.#Dt.classList.add("focused"):(this.#Dt.hidden=!1,this.#Dt.style.zIndex=parseInt(this.#Dt.style.zIndex)+1e3)}#on(){this.#Dt.classList.remove("focused"),!this.#fn&&this.isVisible&&(this.#Dt.hidden=!0,this.#Dt.style.zIndex=parseInt(this.#Dt.style.zIndex)-1e3)}forceHide(){this.#bn=this.isVisible,this.#bn&&(this.#Dt.hidden=!0)}maybeShow(){this.#bn&&(this.#bn=!1,this.#Dt.hidden=!1)}get isVisible(){return!1===this.#Dt.hidden}}class k extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=i.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const n=document.createElement("span");n.textContent=e,t.append(n)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=k;class A extends p{#wn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:e,height:n}=u(t.rect),i=this.svgFactory.create(e,n,!0),r=this.#wn=this.svgFactory.createElement("svg:line");return r.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),r.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),r.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),r.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),i.append(r),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#wn}addHighlightArea(){this.container.classList.add("highlightArea")}}class E extends p{#xn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:e,height:n}=u(t.rect),i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=this.#xn=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",r/2),o.setAttribute("y",r/2),o.setAttribute("width",e-r),o.setAttribute("height",n-r),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#xn}addHighlightArea(){this.container.classList.add("highlightArea")}}class T extends p{#_n=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:e,height:n}=u(t.rect),i=this.svgFactory.create(e,n,!0),r=t.borderStyle.width,o=this.#_n=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",e/2),o.setAttribute("cy",n/2),o.setAttribute("rx",e/2-r/2),o.setAttribute("ry",n/2-r/2),o.setAttribute("stroke-width",r||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#_n}addHighlightArea(){this.container.classList.add("highlightArea")}}class M extends p{#Sn=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=u(t.rect),i=this.svgFactory.create(e,n,!0);let r=[];for(const e of t.vertices){const n=e.x-t.rect[0],i=t.rect[3]-e.y;r.push(n+","+i)}r=r.join(" ");const o=this.#Sn=this.svgFactory.createElement(this.svgElementName);return o.setAttribute("points",r),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Sn}addHighlightArea(){this.container.classList.add("highlightArea")}}class O extends M{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class I extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class D extends p{#Cn=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=i.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const t=this.data,{width:e,height:n}=u(t.rect),i=this.svgFactory.create(e,n,!0);for(const e of t.inkLists){let n=[];for(const i of e){const e=i.x-t.rect[0],r=t.rect[3]-i.y;n.push(`${e},${r}`)}n=n.join(" ");const r=this.svgFactory.createElement(this.svgElementName);this.#Cn.push(r),r.setAttribute("points",n),r.setAttribute("stroke-width",t.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),!t.popupRef&&this.hasPopupData&&this._createPopup(),i.append(r)}return this.container.append(i),this.container}getElementsToTriggerPopup(){return this.#Cn}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=D;class F extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class P extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class R extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class L extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class N extends p{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=N;class B extends p{#kn=null;constructor(t){super(t,{isRenderable:!0});const{filename:e,content:n}=this.data.file;this.filename=(0,r.getFilenameFromUrl)(e,!0),this.content=n,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:e,content:n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:e}=this;let n;e.hasAppearance||0===e.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(e.name)?"paperclip":"pushpin"}.svg`,e.fillAlpha&&e.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(100*e.fillAlpha)}%);`)),n.addEventListener("dblclick",this.#An.bind(this)),this.#kn=n;const{isMac:r}=i.FeatureTest.platform;return t.addEventListener("keydown",(t=>{"Enter"===t.key&&(r?t.metaKey:t.ctrlKey)&&this.#An()})),!e.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),t.append(n),t}getElementsToTriggerPopup(){return this.#kn}addHighlightArea(){this.container.classList.add("highlightArea")}#An(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}e.AnnotationLayer=class{#_e=null;#En=null;#Tn=new Map;constructor({div:t,accessibilityManager:e,annotationCanvasMap:n,l10n:i,page:r,viewport:o}){this.div=t,this.#_e=e,this.#En=n,this.l10n=i,this.page=r,this.viewport=o,this.zIndex=0,this.l10n||=a.NullL10n}#Mn(t,e){const n=t.firstChild||t;n.id=`${i.AnnotationPrefix}${e}`,this.div.append(t),this.#_e?.moveElementInDOM(this.div,t,n,!1)}async render(t){const{annotations:e}=t,n=this.div;(0,r.setLayerDimensions)(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new r.DOMSVGFactory,annotationStorage:t.annotationStorage||new o.AnnotationStorage,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const t of e){if(t.noHTML)continue;const e=t.annotationType===i.AnnotationType.POPUP;if(e){const e=s.get(t.id);if(!e)continue;a.elements=e}else{const{width:e,height:n}=u(t.rect);if(e<=0||n<=0)continue}a.data=t;const n=d.create(a);if(!n.isRenderable)continue;if(!e&&t.popupRef){const e=s.get(t.popupRef);e?e.push(n):s.set(t.popupRef,[n])}n.annotationEditorType>0&&this.#Tn.set(n.data.id,n);const r=n.render();t.hidden&&(r.style.visibility="hidden"),this.#Mn(r,t.id)}this.#On(),await this.l10n.translate(n)}update({viewport:t}){const e=this.div;this.viewport=t,(0,r.setLayerDimensions)(e,{rotation:t.rotation}),this.#On(),e.hidden=!1}#On(){if(!this.#En)return;const t=this.div;for(const[e,n]of this.#En){const i=t.querySelector(`[data-annotation-id="${e}"]`);if(!i)continue;const{firstChild:r}=i;r?"CANVAS"===r.nodeName?r.replaceWith(n):r.before(n):i.append(n)}this.#En.clear()}getEditableAnnotations(){return Array.from(this.#Tn.values())}getEditableAnnotation(t){return this.#Tn.get(t)}}},(t,e)=>{function n(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}function i(t){return Math.max(0,Math.min(255,255*t))}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G([t,e,n,i]){return["G",1-Math.min(1,.3*t+.59*n+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return[t=i(t),t,t]}static G_HTML([t]){const e=n(t);return`#${e}${e}${e}`}static RGB_G([t,e,n]){return["G",.3*t+.59*e+.11*n]}static RGB_rgb(t){return t.map(i)}static RGB_HTML(t){return`#${t.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,n,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,n+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,n,r]){return[i(1-Math.min(1,t+r)),i(1-Math.min(1,n+r)),i(1-Math.min(1,e+r))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,n]){const i=1-t,r=1-e,o=1-n;return["CMYK",i,r,o,Math.min(i,r,o)]}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=i;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function i(t,e){switch(t){case"find_match_count":t=`find_match_count[${1===e.total?"one":"other"}]`;break;case"find_match_count_limit":t=`find_match_count_limit[${1===e.limit?"one":"other"}]`}return n[t]||""}n.print_progress_percent="{{progress}}%";const r={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",get:async(t,e=null,n=i(t,e))=>function(t,e){return e?t.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,((t,n)=>n in e?e[n]:"{{"+n+"}}")):t}(n,e),async translate(t){}};e.NullL10n=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var i=n(25);e.XfaLayer=class{static setupStorage(t,e,n,i,r){const o=i.getValue(e,{value:null});switch(n.name){case"textarea":if(null!==o.value&&(t.textContent=o.value),"print"===r)break;t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}));break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(o.value===n.attributes.xfaOn?t.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&t.removeAttribute("checked"),"print"===r)break;t.addEventListener("change",(t=>{i.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})}))}else{if(null!==o.value&&t.setAttribute("value",o.value),"print"===r)break;t.addEventListener("input",(t=>{i.setValue(e,{value:t.target.value})}))}break;case"select":if(null!==o.value){t.setAttribute("value",o.value);for(const t of n.children)t.attributes.value===o.value?t.attributes.selected=!0:t.attributes.hasOwnProperty("selected")&&delete t.attributes.selected}t.addEventListener("input",(t=>{const n=t.target.options,r=-1===n.selectedIndex?"":n[n.selectedIndex].value;i.setValue(e,{value:r})}))}}static setAttributes({html:t,element:e,storage:n=null,intent:i,linkService:r}){const{attributes:o}=e,s=t instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${i}`);for(const[e,n]of Object.entries(o))if(null!=n)switch(e){case"class":n.length&&t.setAttribute(e,n.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",n);break;case"style":Object.assign(t.style,n);break;case"textContent":t.textContent=n;break;default:(!s||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,n)}s&&r.addLinkAttributes(t,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(t,o.dataId,e,n)}static render(t){const e=t.annotationStorage,n=t.linkService,r=t.xfaHtml,o=t.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:o,linkService:n});const a=[[r,-1,s]],l=t.div;if(l.append(s),t.viewport){const e=`matrix(${t.viewport.transform.join(",")})`;l.style.transform=e}"richText"!==o&&l.setAttribute("class","xfaLayer xfaFont");const c=[];for(;a.length>0;){const[t,r,s]=a.at(-1);if(r+1===t.children.length){a.pop();continue}const l=t.children[++a.at(-1)[1]];if(null===l)continue;const{name:h}=l;if("#text"===h){const t=document.createTextNode(l.value);c.push(t),s.append(t);continue}const u=l?.attributes?.xmlns?document.createElementNS(l.attributes.xmlns,h):document.createElement(h);if(s.append(u),l.attributes&&this.setAttributes({html:u,element:l,storage:e,intent:o,linkService:n}),l.children&&l.children.length>0)a.push([l,-1,u]);else if(l.value){const t=document.createTextNode(l.value);i.XfaText.shouldBuildText(h)&&c.push(t),u.append(t)}}for(const t of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var i=n(1),r=n(4),o=n(29),s=n(6),a=n(5);class l extends r.AnnotationEditor{#In=0;#Dn=0;#Fn=this.canvasPointermove.bind(this);#Pn=this.canvasPointerleave.bind(this);#Rn=this.canvasPointerup.bind(this);#Ln=this.canvasPointerdown.bind(this);#Nn=new Path2D;#Bn=!1;#jn=!1;#zn=!1;#$n=null;#Hn=0;#Un=0;#Vn=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(t){super({...t,name:"inkEditor"}),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(t){r.AnnotationEditor.initialize(t,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(t,e){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:l._defaultThickness=e;break;case i.AnnotationEditorParamsType.INK_COLOR:l._defaultColor=e;break;case i.AnnotationEditorParamsType.INK_OPACITY:l._defaultOpacity=e/100}}updateParams(t,e){switch(t){case i.AnnotationEditorParamsType.INK_THICKNESS:this.#Wn(e);break;case i.AnnotationEditorParamsType.INK_COLOR:this.#qe(e);break;case i.AnnotationEditorParamsType.INK_OPACITY:this.#qn(e)}}static get defaultPropertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,l._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,l._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*l._defaultOpacity)]]}get propertiesToUpdate(){return[[i.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||l._defaultThickness],[i.AnnotationEditorParamsType.INK_COLOR,this.color||l._defaultColor||r.AnnotationEditor._defaultLineColor],[i.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??l._defaultOpacity))]]}#Wn(t){const e=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,this.#Kn()},undo:()=>{this.thickness=e,this.#Kn()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#qe(t){const e=this.color;this.addCommands({cmd:()=>{this.color=t,this.#Xn()},undo:()=>{this.color=e,this.#Xn()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#qn(t){t/=100;const e=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,this.#Xn()},undo:()=>{this.opacity=e,this.#Xn()},mustExec:!0,type:i.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Gn(),this.#Yn()),this.isAttachedToDOM||(this.parent.add(this),this.#Jn()),this.#Kn()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#$n.disconnect(),this.#$n=null,super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){const[t,e]=this.parentDimensions,n=this.width*t,i=this.height*e;this.setDimensions(n,i)}enableEditMode(){this.#Bn||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Ln))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Ln))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#Zn(){const{parentRotation:t,parentDimensions:[e,n]}=this;switch(t){case 90:return[0,n,n,e];case 180:return[e,n,e,n];case 270:return[e,0,n,e];default:return[0,0,e,n]}}#Qn(){const{ctx:t,color:e,opacity:n,thickness:i,parentScale:r,scaleFactor:o}=this;t.lineWidth=i*r/o,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${(0,a.opacityToHex)(n)}`}#ti(t,e){this.canvas.addEventListener("contextmenu",s.noContextMenu),this.canvas.addEventListener("pointerleave",this.#Pn),this.canvas.addEventListener("pointermove",this.#Fn),this.canvas.addEventListener("pointerup",this.#Rn),this.canvas.removeEventListener("pointerdown",this.#Ln),this.isEditing=!0,this.#zn||(this.#zn=!0,this.#Jn(),this.thickness||=l._defaultThickness,this.color||=l._defaultColor||r.AnnotationEditor._defaultLineColor,this.opacity??=l._defaultOpacity),this.currentPath.push([t,e]),this.#jn=!1,this.#Qn(),this.#Vn=()=>{this.#ei(),this.#Vn&&window.requestAnimationFrame(this.#Vn)},window.requestAnimationFrame(this.#Vn)}#ni(t,e){const[n,i]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===n&&e===i)return;const r=this.currentPath;let o=this.#Nn;if(r.push([t,e]),this.#jn=!0,r.length<=2)return o.moveTo(...r[0]),void o.lineTo(t,e);3===r.length&&(this.#Nn=o=new Path2D,o.moveTo(...r[0])),this.#ii(o,...r.at(-3),...r.at(-2),t,e)}#ri(){if(0===this.currentPath.length)return;const t=this.currentPath.at(-1);this.#Nn.lineTo(...t)}#oi(t,e){let n;if(this.#Vn=null,t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),this.#ni(t,e),this.#ri(),1!==this.currentPath.length)n=this.#si();else{const i=[t,e];n=[[i,i.slice(),i.slice(),i]]}const i=this.#Nn,r=this.currentPath;this.currentPath=[],this.#Nn=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(r),this.paths.push(n),this.bezierPath2D.push(i),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Gn(),this.#Yn()),this.#Kn())},mustExec:!0})}#ei(){if(!this.#jn)return;this.#jn=!1;Math.ceil(this.thickness*this.parentScale);const t=this.currentPath.slice(-3),e=t.map((t=>t[0])),n=t.map((t=>t[1])),{ctx:i}=(Math.min(...e),Math.max(...e),Math.min(...n),Math.max(...n),this);i.save(),i.clearRect(0,0,this.canvas.width,this.canvas.height);for(const t of this.bezierPath2D)i.stroke(t);i.stroke(this.#Nn),i.restore()}#ii(t,e,n,i,r,o,s){const a=(e+i)/2,l=(n+r)/2,c=(i+o)/2,h=(r+s)/2;t.bezierCurveTo(a+2*(i-a)/3,l+2*(r-l)/3,c+2*(i-c)/3,h+2*(r-h)/3,c,h)}#si(){const t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];const e=[];let n,[i,r]=t[0];for(n=1;n<t.length-2;n++){const[o,s]=t[n],[a,l]=t[n+1],c=(o+a)/2,h=(s+l)/2,u=[i+2*(o-i)/3,r+2*(s-r)/3],d=[c+2*(o-c)/3,h+2*(s-h)/3];e.push([[i,r],u,d,[c,h]]),[i,r]=[c,h]}const[o,s]=t[n],[a,l]=t[n+1],c=[i+2*(o-i)/3,r+2*(s-r)/3],h=[a+2*(o-a)/3,l+2*(s-l)/3];return e.push([[i,r],c,h,[a,l]]),e}#Xn(){if(this.isEmpty())return void this.#ai();this.#Qn();const{canvas:t,ctx:e}=this;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),this.#ai();for(const t of this.bezierPath2D)e.stroke(t)}commit(){this.#Bn||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Bn=!0,this.div.classList.add("disabled"),this.#Kn(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),this.enableEditMode())}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!this.#Bn&&(this.setInForeground(),t.preventDefault(),"mouse"!==t.type&&this.div.focus(),this.#ti(t.offsetX,t.offsetY))}canvasPointermove(t){t.preventDefault(),this.#ni(t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),this.#li(t)}canvasPointerleave(t){this.#li(t)}#li(t){this.canvas.removeEventListener("pointerleave",this.#Pn),this.canvas.removeEventListener("pointermove",this.#Fn),this.canvas.removeEventListener("pointerup",this.#Rn),this.canvas.addEventListener("pointerdown",this.#Ln),setTimeout((()=>{this.canvas.removeEventListener("contextmenu",s.noContextMenu)}),10),this.#oi(t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Gn(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",r.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then((t=>this.canvas?.setAttribute("aria-label",t))),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Yn(){this.#$n=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),this.#$n.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#Bn}render(){if(this.div)return this.div;let t,e;this.width&&(t=this.x,e=this.y),super.render(),r.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then((t=>this.div?.setAttribute("aria-label",t)));const[n,i,o,s]=this.#Zn();if(this.setAt(n,i,0,0),this.setDims(o,s),this.#Gn(),this.width){const[n,i]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*i),this.setAt(t*n,e*i,this.width*n,this.height*i),this.#zn=!0,this.#Jn(),this.setDims(this.width*n,this.height*i),this.#Xn(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Yn(),this.div}#Jn(){if(!this.#zn)return;const[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),this.#ai()}setDimensions(t,e){const n=Math.round(t),i=Math.round(e);if(this.#Hn===n&&this.#Un===i)return;this.#Hn=n,this.#Un=i,this.canvas.style.visibility="hidden";const[r,o]=this.parentDimensions;this.width=t/r,this.height=e/o,this.fixAndSetPosition(),this.#Bn&&this.#ci(t,e),this.#Jn(),this.#Xn(),this.canvas.style.visibility="visible",this.fixDims()}#ci(t,e){const n=this.#hi(),i=(t-n)/this.#Dn,r=(e-n)/this.#In;this.scaleFactor=Math.min(i,r)}#ai(){const t=this.#hi()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)}static#ui(t){const e=new Path2D;for(let n=0,i=t.length;n<i;n++){const[i,r,o,s]=t[n];0===n&&e.moveTo(...i),e.bezierCurveTo(r[0],r[1],o[0],o[1],s[0],s[1])}return e}static#di(t,e,n){const[i,r,o,s]=e;switch(n){case 0:for(let e=0,n=t.length;e<n;e+=2)t[e]+=i,t[e+1]=s-t[e+1];break;case 90:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=t[e+1]+i,t[e+1]=n+r}break;case 180:for(let e=0,n=t.length;e<n;e+=2)t[e]=o-t[e],t[e+1]+=r;break;case 270:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=o-t[e+1],t[e+1]=s-n}break;default:throw new Error("Invalid rotation")}return t}static#pi(t,e,n){const[i,r,o,s]=e;switch(n){case 0:for(let e=0,n=t.length;e<n;e+=2)t[e]-=i,t[e+1]=s-t[e+1];break;case 90:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=t[e+1]-r,t[e+1]=n-i}break;case 180:for(let e=0,n=t.length;e<n;e+=2)t[e]=o-t[e],t[e+1]-=r;break;case 270:for(let e=0,n=t.length;e<n;e+=2){const n=t[e];t[e]=s-t[e+1],t[e+1]=o-n}break;default:throw new Error("Invalid rotation")}return t}#fi(t,e,n,i){const r=[],o=this.thickness/2,s=t*e+o,a=t*n+o;for(const e of this.paths){const n=[],o=[];for(let i=0,r=e.length;i<r;i++){const[l,c,h,u]=e[i],d=t*l[0]+s,p=t*l[1]+a,f=t*c[0]+s,g=t*c[1]+a,m=t*h[0]+s,y=t*h[1]+a,v=t*u[0]+s,b=t*u[1]+a;0===i&&(n.push(d,p),o.push(d,p)),n.push(f,g,m,y,v,b),o.push(f,g),i===r-1&&o.push(v,b)}r.push({bezier:l.#di(n,i,this.rotation),points:l.#di(o,i,this.rotation)})}return r}#gi(){let t=1/0,e=-1/0,n=1/0,r=-1/0;for(const o of this.paths)for(const[s,a,l,c]of o){const o=i.Util.bezierBoundingBox(...s,...a,...l,...c);t=Math.min(t,o[0]),n=Math.min(n,o[1]),e=Math.max(e,o[2]),r=Math.max(r,o[3])}return[t,n,e,r]}#hi(){return this.#Bn?Math.ceil(this.thickness*this.parentScale):0}#Kn(t=!1){if(this.isEmpty())return;if(!this.#Bn)return void this.#Xn();const e=this.#gi(),n=this.#hi();this.#Dn=Math.max(r.AnnotationEditor.MIN_SIZE,e[2]-e[0]),this.#In=Math.max(r.AnnotationEditor.MIN_SIZE,e[3]-e[1]);const i=Math.ceil(n+this.#Dn*this.scaleFactor),o=Math.ceil(n+this.#In*this.scaleFactor),[s,a]=this.parentDimensions;this.width=i/s,this.height=o/a,this.setAspectRatio(i,o);const l=this.translationX,c=this.translationY;this.translationX=-e[0],this.translationY=-e[1],this.#Jn(),this.#Xn(),this.#Hn=i,this.#Un=o,this.setDims(i,o);const h=t?n/this.scaleFactor/2:0;this.translate(l-this.translationX-h,c-this.translationY-h)}static deserialize(t,e,n){if(t instanceof o.InkAnnotationElement)return null;const s=super.deserialize(t,e,n);s.thickness=t.thickness,s.color=i.Util.makeHexColor(...t.color),s.opacity=t.opacity;const[a,c]=s.pageDimensions,h=s.width*a,u=s.height*c,d=s.parentScale,p=t.thickness/2;s.#Bn=!0,s.#Hn=Math.round(h),s.#Un=Math.round(u);const{paths:f,rect:g,rotation:m}=t;for(let{bezier:t}of f){t=l.#pi(t,g,m);const e=[];s.paths.push(e);let n=d*(t[0]-p),i=d*(t[1]-p);for(let r=2,o=t.length;r<o;r+=6){const o=d*(t[r]-p),s=d*(t[r+1]-p),a=d*(t[r+2]-p),l=d*(t[r+3]-p),c=d*(t[r+4]-p),h=d*(t[r+5]-p);e.push([[n,i],[o,s],[a,l],[c,h]]),n=c,i=h}const r=this.#ui(e);s.bezierPath2D.push(r)}const y=s.#gi();return s.#Dn=Math.max(r.AnnotationEditor.MIN_SIZE,y[2]-y[0]),s.#In=Math.max(r.AnnotationEditor.MIN_SIZE,y[3]-y[1]),s.#ci(h,u),s}serialize(){if(this.isEmpty())return null;const t=this.getRect(0,0),e=r.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:i.AnnotationEditorType.INK,color:e,thickness:this.thickness,opacity:this.opacity,paths:this.#fi(this.scaleFactor/this.parentScale,this.translationX,this.translationY,t),pageIndex:this.pageIndex,rect:t,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var i=n(1),r=n(4),o=n(6),s=n(29);class a extends r.AnnotationEditor{#mi=null;#yi=null;#vi=null;#bi=null;#wi=null;#xi=null;#$n=null;#_i=null;#Si=!1;#Ci=!1;static _type="stamp";constructor(t){super({...t,name:"stampEditor"}),this.#bi=t.bitmapUrl,this.#wi=t.bitmapFile}static initialize(t){r.AnnotationEditor.initialize(t)}static get supportedTypes(){return(0,i.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map((t=>`image/${t}`)))}static get supportedTypesStr(){return(0,i.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,e){e.pasteEditor(i.AnnotationEditorType.STAMP,{bitmapFile:t.getAsFile()})}#ki(t,e=!1){t?(this.#mi=t.bitmap,e||(this.#yi=t.id,this.#Si=t.isSvg),this.#Gn()):this.remove()}#Ai(){this.#vi=null,this._uiManager.enableWaiting(!1),this.#xi&&this.div.focus()}#Ei(){if(this.#yi)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#yi).then((t=>this.#ki(t,!0))).finally((()=>this.#Ai()));if(this.#bi){const t=this.#bi;return this.#bi=null,this._uiManager.enableWaiting(!0),void(this.#vi=this._uiManager.imageManager.getFromUrl(t).then((t=>this.#ki(t))).finally((()=>this.#Ai())))}if(this.#wi){const t=this.#wi;return this.#wi=null,this._uiManager.enableWaiting(!0),void(this.#vi=this._uiManager.imageManager.getFromFile(t).then((t=>this.#ki(t))).finally((()=>this.#Ai())))}const t=document.createElement("input");t.type="file",t.accept=a.supportedTypesStr,this.#vi=new Promise((e=>{t.addEventListener("change",(async()=>{if(t.files&&0!==t.files.length){this._uiManager.enableWaiting(!0);const e=await this._uiManager.imageManager.getFromFile(t.files[0]);this.#ki(e)}else this.remove();e()})),t.addEventListener("cancel",(()=>{this.remove(),e()}))})).finally((()=>this.#Ai())),t.click()}remove(){this.#yi&&(this.#mi=null,this._uiManager.imageManager.deleteId(this.#yi),this.#xi?.remove(),this.#xi=null,this.#$n?.disconnect(),this.#$n=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#yi&&this.#Ei(),this.isAttachedToDOM||this.parent.add(this))):this.#yi&&this.#Ei()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#vi||this.#mi||this.#bi||this.#wi)}get isResizable(){return!0}render(){if(this.div)return this.div;let t,e;if(this.width&&(t=this.x,e=this.y),super.render(),this.div.hidden=!0,this.#mi?this.#Gn():this.#Ei(),this.width){const[n,i]=this.parentDimensions;this.setAt(t*n,e*i,this.width*n,this.height*i)}return this.div}#Gn(){const{div:t}=this;let{width:e,height:n}=this.#mi;const[i,r]=this.pageDimensions,o=.75;if(this.width)e=this.width*i,n=this.height*r;else if(e>o*i||n>o*r){const t=Math.min(o*i/e,o*r/n);e*=t,n*=t}const[s,a]=this.parentDimensions;this.setDims(e*s/i,n*a/r),this._uiManager.enableWaiting(!1);const l=this.#xi=document.createElement("canvas");t.append(l),t.hidden=!1,this.#Ti(e,n),this.#Yn(),this.#Ci||(this.parent.addUndoableEditor(this),this.#Ci=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#Mi(t,e){const[n,i]=this.parentDimensions;this.width=t/n,this.height=e/i,this.setDims(t,e),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#_i&&clearTimeout(this.#_i),this.#_i=setTimeout((()=>{this.#_i=null,this.#Ti(t,e)}),200)}#Oi(t,e){const{width:n,height:i}=this.#mi;let r=n,o=i,s=this.#mi;for(;r>2*t||o>2*e;){const n=r,i=o;r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2)),o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const a=new OffscreenCanvas(r,o);a.getContext("2d").drawImage(s,0,0,n,i,0,0,r,o),s=a.transferToImageBitmap()}return s}#Ti(t,e){t=Math.ceil(t),e=Math.ceil(e);const n=this.#xi;if(!n||n.width===t&&n.height===e)return;n.width=t,n.height=e;const i=this.#Si?this.#mi:this.#Oi(t,e),r=n.getContext("2d");r.filter=this._uiManager.hcmFilter,r.drawImage(i,0,0,i.width,i.height,0,0,t,e)}#Ii(t){if(t){if(this.#Si){const t=this._uiManager.imageManager.getSvgUrl(this.#yi);if(t)return t}const t=document.createElement("canvas");return({width:t.width,height:t.height}=this.#mi),t.getContext("2d").drawImage(this.#mi,0,0),t.toDataURL()}if(this.#Si){const[t,e]=this.pageDimensions,n=Math.round(this.width*t*o.PixelsPerInch.PDF_TO_CSS_UNITS),i=Math.round(this.height*e*o.PixelsPerInch.PDF_TO_CSS_UNITS),r=new OffscreenCanvas(n,i);return r.getContext("2d").drawImage(this.#mi,0,0,this.#mi.width,this.#mi.height,0,0,n,i),r.transferToImageBitmap()}return structuredClone(this.#mi)}#Yn(){this.#$n=new ResizeObserver((t=>{const e=t[0].contentRect;e.width&&e.height&&this.#Mi(e.width,e.height)})),this.#$n.observe(this.div)}static deserialize(t,e,n){if(t instanceof s.StampAnnotationElement)return null;const i=super.deserialize(t,e,n),{rect:r,bitmapUrl:o,bitmapId:a,isSvg:l,accessibilityData:c}=t;a&&n.imageManager.isValidId(a)?i.#yi=a:i.#bi=o,i.#Si=l;const[h,u]=i.pageDimensions;return i.width=(r[2]-r[0])/h,i.height=(r[3]-r[1])/u,c&&(i.altTextData=c),i}serialize(t=!1,e=null){if(this.isEmpty())return null;const n={annotationType:i.AnnotationEditorType.STAMP,bitmapId:this.#yi,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#Si,structTreeParentId:this._structTreeParentId};if(t)return n.bitmapUrl=this.#Ii(!0),n.accessibilityData=this.altTextData,n;const{decorative:r,altText:o}=this.altTextData;if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),null===e)return n;e.stamps||=new Map;const s=this.#Si?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(e.stamps.has(this.#yi)){if(this.#Si){const t=e.stamps.get(this.#yi);s>t.area&&(t.area=s,t.serialized.bitmap.close(),t.serialized.bitmap=this.#Ii(!1))}}else e.stamps.set(this.#yi,{area:s,serialized:n}),n.bitmap=this.#Ii(!1);return n}}e.StampEditor=a}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__w_pdfjs_require__),n.exports}var __nested_webpack_exports__={};return(()=>{var t=__nested_webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return o.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return s.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return a.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"DOMSVGFactory",{enumerable:!0,get:function(){return i.DOMSVGFactory}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return l.GlobalWorkerOptions}}),Object.defineProperty(t,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return i.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return i.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return i.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return c.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return i.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return i.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return i.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return i.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return i.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return i.loadScript}}),Object.defineProperty(t,"noContextMenu",{enumerable:!0,get:function(){return i.noContextMenu}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return r.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return i.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return r.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return n.version}});var e=__w_pdfjs_require__(1),n=__w_pdfjs_require__(2),i=__w_pdfjs_require__(6),r=__w_pdfjs_require__(26),o=__w_pdfjs_require__(27),s=__w_pdfjs_require__(5),a=__w_pdfjs_require__(29),l=__w_pdfjs_require__(14),c=__w_pdfjs_require__(32)})(),__nested_webpack_exports__})(),module.exports=root.pdfjsLib=factory()},5920:(t,e,n)=>{("undefined"!=typeof window?window:{}).pdfjsWorker=n(1114)},1114:t=>{
/**
 * @licstart The following is the entire license notice for the
 * JavaScript code in this page
 *
 * Copyright 2023 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * @licend The above is the entire license notice for the
 * JavaScript code in this page
 */
var e,n;e=globalThis,n=()=>(()=>{"use strict";var t=[,(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerTask=e.WorkerMessageHandler=void 0;var i,r=n(2),o=n(3),s=n(4),a=n(6),l=n(10),c=n(68),h=n(73),u=n(104),d=n(105),p=n(72);class f{constructor(t){this.name=t,this.terminated=!1,this._capability=new r.PromiseCapability}get finished(){return this._capability.promise}finish(){this._capability.resolve()}terminate(){this.terminated=!0}ensureNotTerminated(){if(this.terminated)throw new Error("Worker task was terminated")}}e.WorkerTask=f;class g{static setup(t,e){let n=!1;t.on("test",(function(e){n||(n=!0,t.send("test",e instanceof Uint8Array))})),t.on("configure",(function(t){(0,r.setVerbosityLevel)(t.verbosity)})),t.on("GetDocRequest",(function(t){return g.createDocumentHandler(t,e)}))}static createDocumentHandler(t,e){let n,i=!1,g=null;const m=new Set,y=(0,r.getVerbosityLevel)(),{docId:v,apiVersion:b}=t,w="3.11.174";if(b!==w)throw new Error(`The API version "${b}" does not match the Worker version "${w}".`);const x=[];for(const t in[])x.push(t);if(x.length)throw new Error("The `Array.prototype` contains unexpected enumerable properties: "+x.join(", ")+"; thus breaking e.g. `for...in` iteration of `Array`s.");const _=v+"_worker";let S=new u.MessageHandler(_,v,e);function C(){if(i)throw new Error("Worker was terminated")}function k(t){m.add(t)}function A(t){t.finish(),m.delete(t)}async function E(t){await n.ensureDoc("checkHeader"),await n.ensureDoc("parseStartXRef"),await n.ensureDoc("parse",[t]),await n.ensureDoc("checkFirstPage",[t]),await n.ensureDoc("checkLastPage",[t]);const e=await n.ensureDoc("isPureXfa");if(e){const t=new f("loadXfaFonts");k(t),await Promise.all([n.loadXfaFonts(S,t).catch((t=>{})).then((()=>A(t))),n.loadXfaImages()])}const[i,r]=await Promise.all([n.ensureDoc("numPages"),n.ensureDoc("fingerprints")]);return{numPages:i,fingerprints:r,htmlForXfa:e?await n.ensureDoc("htmlForXfa"):null}}function T({data:t,password:e,disableAutoFetch:n,rangeChunkSize:i,length:s,docBaseUrl:l,enableXfa:c,evaluatorOptions:h}){const u={source:null,disableAutoFetch:n,docBaseUrl:l,docId:v,enableXfa:c,evaluatorOptions:h,handler:S,length:s,password:e,rangeChunkSize:i},p=new r.PromiseCapability;let f;if(t){try{u.source=t,f=new a.LocalPdfManager(u),p.resolve(f)}catch(t){p.reject(t)}return p.promise}let m,y=[];try{m=new d.PDFWorkerStream(S)}catch(t){return p.reject(t),p.promise}const b=m.getFullReader();b.headersReady.then((function(){if(b.isRangeSupported){u.source=m,u.length=b.contentLength,u.disableAutoFetch||=b.isStreamingSupported,f=new a.NetworkPdfManager(u);for(const t of y)f.sendProgressiveData(t);y=[],p.resolve(f),g=null}})).catch((function(t){p.reject(t),g=null}));let w=0;return new Promise((function(t,e){const n=function({value:t,done:i}){try{if(C(),i)return f||function(){const t=(0,o.arrayBuffersToBytes)(y);s&&t.length!==s&&(0,r.warn)("reported HTTP length is different from actual");try{u.source=t,f=new a.LocalPdfManager(u),p.resolve(f)}catch(t){p.reject(t)}y=[]}(),void(g=null);w+=t.byteLength,b.isStreamingSupported||S.send("DocProgress",{loaded:w,total:Math.max(w,b.contentLength||0)}),f?f.sendProgressiveData(t):y.push(t),b.read().then(n,e)}catch(t){e(t)}};b.read().then(n,e)})).catch((function(t){p.reject(t),g=null})),g=function(t){m.cancelAllRequests(t)},p.promise}return S.on("GetPage",(function(t){return n.getPage(t.pageIndex).then((function(t){return Promise.all([n.ensure(t,"rotate"),n.ensure(t,"ref"),n.ensure(t,"userUnit"),n.ensure(t,"view")]).then((function([t,e,n,i]){return{rotate:t,ref:e,userUnit:n,view:i}}))}))})),S.on("GetPageIndex",(function(t){const e=s.Ref.get(t.num,t.gen);return n.ensureCatalog("getPageIndex",[e])})),S.on("GetDestinations",(function(t){return n.ensureCatalog("destinations")})),S.on("GetDestination",(function(t){return n.ensureCatalog("getDestination",[t.id])})),S.on("GetPageLabels",(function(t){return n.ensureCatalog("pageLabels")})),S.on("GetPageLayout",(function(t){return n.ensureCatalog("pageLayout")})),S.on("GetPageMode",(function(t){return n.ensureCatalog("pageMode")})),S.on("GetViewerPreferences",(function(t){return n.ensureCatalog("viewerPreferences")})),S.on("GetOpenAction",(function(t){return n.ensureCatalog("openAction")})),S.on("GetAttachments",(function(t){return n.ensureCatalog("attachments")})),S.on("GetDocJSActions",(function(t){return n.ensureCatalog("jsActions")})),S.on("GetPageJSActions",(function({pageIndex:t}){return n.getPage(t).then((function(t){return n.ensure(t,"jsActions")}))})),S.on("GetOutline",(function(t){return n.ensureCatalog("documentOutline")})),S.on("GetOptionalContentConfig",(function(t){return n.ensureCatalog("optionalContentConfig")})),S.on("GetPermissions",(function(t){return n.ensureCatalog("permissions")})),S.on("GetMetadata",(function(t){return Promise.all([n.ensureDoc("documentInfo"),n.ensureCatalog("metadata")])})),S.on("GetMarkInfo",(function(t){return n.ensureCatalog("markInfo")})),S.on("GetData",(function(t){return n.requestLoadedStream().then((function(t){return t.bytes}))})),S.on("GetAnnotations",(function({pageIndex:t,intent:e}){return n.getPage(t).then((function(n){const i=new f(`GetAnnotations: page ${t}`);return k(i),n.getAnnotationsData(S,i,e).then((t=>(A(i),t)),(t=>{throw A(i),t}))}))})),S.on("GetFieldObjects",(function(t){return n.ensureDoc("fieldObjects")})),S.on("HasJSActions",(function(t){return n.ensureDoc("hasJSActions")})),S.on("GetCalculationOrderIds",(function(t){return n.ensureDoc("calculationOrderIds")})),S.on("SaveDocument",(async function({isPureXfa:t,numPages:e,annotationStorage:i,filename:a}){const c=[n.requestLoadedStream(),n.ensureCatalog("acroForm"),n.ensureCatalog("acroFormRef"),n.ensureDoc("startXRef"),n.ensureDoc("xref"),n.ensureDoc("linearization"),n.ensureCatalog("structTreeRoot")],u=[],d=t?null:(0,o.getNewAnnotationsMap)(i),[g,m,y,v,b,w,x]=await Promise.all(c),_=b.trailer.getRaw("Root")||null;let C;if(d){x?await x.canUpdateStructTree({pdfManager:n,newAnnotationsByPage:d})&&(C=x):await p.StructTreeRoot.canCreateStructureTree({catalogRef:_,pdfManager:n,newAnnotationsByPage:d})&&(C=null);const t=l.AnnotationFactory.generateImages(i.values(),b,n.evaluatorOptions.isOffscreenCanvasSupported),e=void 0===C?u:[];for(const[i,r]of d)e.push(n.getPage(i).then((e=>{const n=new f(`Save (editor): page ${i}`);return e.saveNewAnnotations(S,n,r,t).finally((function(){A(n)}))})));null===C?u.push(Promise.all(e).then((async t=>(await p.StructTreeRoot.createStructureTree({newAnnotationsByPage:d,xref:b,catalogRef:_,pdfManager:n,newRefs:t}),t)))):C&&u.push(Promise.all(e).then((async t=>(await C.updateStructureTree({newAnnotationsByPage:d,pdfManager:n,newRefs:t}),t))))}if(t)u.push(n.serializeXfaData(i));else for(let t=0;t<e;t++)u.push(n.getPage(t).then((function(e){const n=new f(`Save: page ${t}`);return e.save(S,n,i).finally((function(){A(n)}))})));const k=await Promise.all(u);let E=[],T=null;if(t){if(T=k[0],!T)return g.bytes}else if(E=k.flat(2),0===E.length)return g.bytes;const M=y&&m instanceof s.Dict&&E.some((t=>t.needAppearances)),O=m instanceof s.Dict&&m.get("XFA")||null;let I=null,D=!1;if(Array.isArray(O)){for(let t=0,e=O.length;t<e;t+=2)"datasets"===O[t]&&(I=O[t+1],D=!0);null===I&&(I=b.getNewTemporaryRef())}else O&&(0,r.warn)("Unsupported XFA type.");let F=Object.create(null);if(b.trailer){const t=Object.create(null),e=b.trailer.get("Info")||null;e instanceof s.Dict&&e.forEach(((e,n)=>{"string"==typeof n&&(t[e]=(0,r.stringToPDFString)(n))})),F={rootRef:_,encryptRef:b.trailer.getRaw("Encrypt")||null,newRef:b.getNewTemporaryRef(),infoRef:b.trailer.getRaw("Info")||null,info:t,fileIds:b.trailer.get("ID")||null,startXRef:w?v:b.lastXRefStreamPos??v,filename:a}}return(0,h.incrementalUpdate)({originalData:g.bytes,xrefInfo:F,newRefs:E,xref:b,hasXfa:!!O,xfaDatasetsRef:I,hasXfaDatasetsEntry:D,needAppearances:M,acroFormRef:y,acroForm:m,xfaData:T}).finally((()=>{b.resetNewTemporaryRef()}))})),S.on("GetOperatorList",(function(t,e){const i=t.pageIndex;n.getPage(i).then((function(n){const o=new f(`GetOperatorList: page ${i}`);k(o);const s=y>=r.VerbosityLevel.INFOS?Date.now():0;n.getOperatorList({handler:S,sink:e,task:o,intent:t.intent,cacheKey:t.cacheKey,annotationStorage:t.annotationStorage}).then((function(t){A(o),s&&(0,r.info)(`page=${i+1} - getOperatorList: time=${Date.now()-s}ms, len=${t.length}`),e.close()}),(function(t){A(o),o.terminated||e.error(t)}))}))})),S.on("GetTextContent",(function(t,e){const{pageIndex:i,includeMarkedContent:o,disableNormalization:s}=t;n.getPage(i).then((function(t){const n=new f("GetTextContent: page "+i);k(n);const a=y>=r.VerbosityLevel.INFOS?Date.now():0;t.extractTextContent({handler:S,task:n,sink:e,includeMarkedContent:o,disableNormalization:s}).then((function(){A(n),a&&(0,r.info)(`page=${i+1} - getTextContent: time=`+(Date.now()-a)+"ms"),e.close()}),(function(t){A(n),n.terminated||e.error(t)}))}))})),S.on("GetStructTree",(function(t){return n.getPage(t.pageIndex).then((function(t){return n.ensure(t,"getStructTree")}))})),S.on("FontFallback",(function(t){return n.fontFallback(t.id,S)})),S.on("Cleanup",(function(t){return n.cleanup(!0)})),S.on("Terminate",(function(t){i=!0;const e=[];if(n){n.terminate(new r.AbortException("Worker was terminated."));const t=n.cleanup();e.push(t),n=null}else(0,c.clearGlobalCaches)();g&&g(new r.AbortException("Worker was terminated."));for(const t of m)e.push(t.finished),t.terminate();return Promise.all(e).then((function(){S.destroy(),S=null}))})),S.on("Ready",(function(e){!function(t){function e(t){C(),S.send("GetDoc",{pdfInfo:t})}function s(t){if(C(),t instanceof r.PasswordException){const e=new f(`PasswordException: response ${t.code}`);k(e),S.sendWithPromise("PasswordRequest",t).then((function({password:t}){A(e),n.updatePassword(t),a()})).catch((function(){A(e),S.send("DocException",t)}))}else t instanceof r.InvalidPDFException||t instanceof r.MissingPDFException||t instanceof r.UnexpectedResponseException||t instanceof r.UnknownErrorException?S.send("DocException",t):S.send("DocException",new r.UnknownErrorException(t.message,t.toString()))}function a(){C(),E(!1).then(e,(function(t){C(),t instanceof o.XRefParseException?n.requestLoadedStream().then((function(){C(),E(!0).then(e,s)})):s(t)}))}C(),T(t).then((function(t){if(i)throw t.terminate(new r.AbortException("Worker was terminated.")),new Error("Worker was terminated");n=t,n.requestLoadedStream(!0).then((t=>{S.send("DataLoaded",{length:t.bytes.byteLength})}))})).then(a,s)}(t),t=null})),_}static initializeFromPort(t){const e=new u.MessageHandler("worker","main",t);g.setup(e,t),e.send("ready",null)}}e.WorkerMessageHandler=g,"undefined"==typeof window&&!r.isNodeJS&&"undefined"!=typeof self&&"function"==typeof(i=self).postMessage&&"onmessage"in i&&g.initializeFromPort(self)},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=function(t,e){t||s(e)},e.bytesToString=c,e.createValidAbsoluteUrl=function(t,e=null,n=null){if(!t)return null;try{if(n&&"string"==typeof t){if(n.addDefaultProtocol&&t.startsWith("www.")){const e=t.match(/\./g);e?.length>=2&&(t=`http://${t}`)}if(n.tryConvertEncoding)try{t=p(t)}catch{}}const i=e?new URL(t,e):new URL(t);if(function(t){switch(t?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(i))return i}catch{}return null},e.getModificationDate=function(t=new Date){return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getUuid=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const t=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(t);else for(let e=0;e<32;e++)t[e]=Math.floor(255*Math.random());return c(t)},e.getVerbosityLevel=function(){return r},e.info=function(t){r>=i.INFOS&&console.log(`Info: ${t}`)},e.isArrayBuffer=function(t){return"object"==typeof t&&void 0!==t?.byteLength},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0},e.isNodeJS=void 0,e.normalizeUnicode=function(t){return f||(f=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,g=new Map([["ﬅ","ſt"]])),t.replaceAll(f,((t,e,n)=>e?e.normalize("NFKC"):g.get(n)))},e.objectFromMap=function(t){const e=Object.create(null);for(const[n,i]of t)e[n]=i;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(r=t)},e.shadow=a,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=h,e.stringToPDFString=function(t){if(t[0]>="ï"){let e;if("þ"===t[0]&&"ÿ"===t[1]?e="utf-16be":"ÿ"===t[0]&&"þ"===t[1]?e="utf-16le":"ï"===t[0]&&"»"===t[1]&&"¿"===t[2]&&(e="utf-8"),e)try{const n=new TextDecoder(e,{fatal:!0}),i=h(t);return n.decode(i)}catch(t){o(`stringToPDFString: "${t}".`)}}const e=[];for(let n=0,i=t.length;n<i;n++){const i=d[t.charCodeAt(n)];e.push(i?String.fromCharCode(i):t.charAt(n))}return e.join("")},e.stringToUTF8String=p,e.unreachable=s,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=o;const n=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);e.isNodeJS=n,e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.MAX_IMAGE_SIZE_TO_CACHE=1e7,e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.BASELINE_FACTOR=.25925925925925924,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},e.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"};const i={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=i,e.CMapCompressionType={NONE:0,BINARY:1},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=i.WARNINGS;function o(t){r>=i.WARNINGS&&console.log(`Warning: ${t}`)}function s(t){throw new Error(t)}function a(t,e,n,i=!1){return Object.defineProperty(t,e,{value:n,enumerable:!i,configurable:!0,writable:!1}),n}const l=function(){function t(e,n){this.constructor===t&&s("Cannot initialize BaseException."),this.message=e,this.name=n}return t.prototype=new Error,t.constructor=t,t}();function c(t){"object"==typeof t&&void 0!==t?.length||s("Invalid argument for bytesToString");const e=t.length,n=8192;if(e<n)return String.fromCharCode.apply(null,t);const i=[];for(let r=0;r<e;r+=n){const o=Math.min(r+n,e),s=t.subarray(r,o);i.push(String.fromCharCode.apply(null,s))}return i.join("")}function h(t){"string"!=typeof t&&s("Invalid argument for stringToBytes");const e=t.length,n=new Uint8Array(e);for(let i=0;i<e;++i)n[i]=255&t.charCodeAt(i);return n}e.BaseException=l,e.PasswordException=class extends l{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends l{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends l{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends l{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends l{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends l{constructor(t){super(t,"FormatError")}},e.AbortException=class extends l{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return a(this,"isLittleEndian",function(){const t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return a(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return a(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?a(this,"platform",{isWin:!1,isMac:!1}):a(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return a(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const u=[...Array(256).keys()].map((t=>t.toString(16).padStart(2,"0")));e.Util=class{static makeHexColor(t,e,n){return`#${u[t]}${u[e]}${u[n]}`}static scaleMinMax(t,e){let n;t[0]?(t[0]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[3],e[3]*=t[3]):(n=e[0],e[0]=e[2],e[2]=n,n=e[1],e[1]=e[3],e[3]=n,t[1]<0&&(n=e[2],e[2]=e[3],e[3]=n),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(n=e[0],e[0]=e[1],e[1]=n),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){const n=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/n,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/n]}static getAxialAlignedBoundingBox(t,e){const n=this.applyTransform(t,e),i=this.applyTransform(t.slice(2,4),e),r=this.applyTransform([t[0],t[3]],e),o=this.applyTransform([t[2],t[1]],e);return[Math.min(n[0],i[0],r[0],o[0]),Math.min(n[1],i[1],r[1],o[1]),Math.max(n[0],i[0],r[0],o[0]),Math.max(n[1],i[1],r[1],o[1])]}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){const e=[t[0],t[2],t[1],t[3]],n=t[0]*e[0]+t[1]*e[2],i=t[0]*e[1]+t[1]*e[3],r=t[2]*e[0]+t[3]*e[2],o=t[2]*e[1]+t[3]*e[3],s=(n+o)/2,a=Math.sqrt((n+o)**2-4*(n*o-r*i))/2,l=s+a||1,c=s-a||1;return[Math.sqrt(l),Math.sqrt(c)]}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const n=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(n>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[n,r,i,o]}static bezierBoundingBox(t,e,n,i,r,o,s,a){const l=[],c=[[],[]];let h,u,d,p,f,g,m,y;for(let c=0;c<2;++c)if(0===c?(u=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*s,d=3*n-3*t):(u=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*a,d=3*i-3*e),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;p=-d/u,0<p&&p<1&&l.push(p)}else m=u*u-4*d*h,y=Math.sqrt(m),m<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),g=(-u-y)/(2*h),0<g&&g<1&&l.push(g));let v,b=l.length;const w=b;for(;b--;)p=l[b],v=1-p,c[0][b]=v*v*v*t+3*v*v*p*n+3*v*p*p*r+p*p*p*s,c[1][b]=v*v*v*e+3*v*v*p*i+3*v*p*p*o+p*p*p*a;return c[0][w]=t,c[1][w]=e,c[0][w+1]=s,c[1][w+1]=a,c[0].length=c[1].length=w+2,[Math.min(...c[0]),Math.min(...c[1]),Math.max(...c[0]),Math.max(...c[1])]}};const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function p(t){return decodeURIComponent(escape(t))}e.PromiseCapability=class{#t=!1;constructor(){this.promise=new Promise(((t,e)=>{this.resolve=e=>{this.#t=!0,t(e)},this.reject=t=>{this.#t=!0,e(t)}}))}get settled(){return this.#t}};let f=null,g=null;e.AnnotationPrefix="pdfjs_internal_id_"},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRefParseException=e.XRefEntryException=e.ParserEOFException=e.PDF_VERSION_REGEXP=e.MissingDataException=void 0,e.arrayBuffersToBytes=function(t){const e=t.length;if(0===e)return new Uint8Array(0);if(1===e)return new Uint8Array(t[0]);let n=0;for(let i=0;i<e;i++)n+=t[i].byteLength;const i=new Uint8Array(n);let r=0;for(let n=0;n<e;n++){const e=new Uint8Array(t[n]);i.set(e,r),r+=e.byteLength}return i},e.collectActions=function(t,e,n){const o=Object.create(null),s=h({dict:e,key:"AA",stopWhenFound:!1});if(s)for(let e=s.length-1;e>=0;e--){const i=s[e];if(i instanceof r.Dict)for(const e of i.getKeys()){const s=n[e];if(!s)continue;const a=[];d(i.getRaw(e),t,a,new r.RefSet),a.length>0&&(o[s]=a)}}if(e.has("A")){const n=[];d(e.get("A"),t,n,new r.RefSet),n.length>0&&(o.Action=n)}return(0,i.objectSize)(o)>0?o:null},e.encodeToXmlString=function(t){const e=[];let n=0;for(let i=0,r=t.length;i<r;i++){const r=t.codePointAt(i);if(32<=r&&r<=126){const o=p[r];o&&(n<i&&e.push(t.substring(n,i)),e.push(o),n=i+1)}else n<i&&e.push(t.substring(n,i)),e.push(`&#x${r.toString(16).toUpperCase()};`),r>55295&&(r<57344||r>65533)&&i++,n=i+1}return 0===e.length?t:(n<t.length&&e.push(t.substring(n,t.length)),e.join(""))},e.escapePDFName=function(t){const e=[];let n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);(r<33||r>126||35===r||40===r||41===r||60===r||62===r||91===r||93===r||123===r||125===r||47===r||37===r)&&(n<i&&e.push(t.substring(n,i)),e.push(`#${r.toString(16)}`),n=i+1)}return 0===e.length?t:(n<t.length&&e.push(t.substring(n,t.length)),e.join(""))},e.escapeString=function(t){return t.replaceAll(/([()\\\n\r])/g,(t=>"\n"===t?"\\n":"\r"===t?"\\r":`\\${t}`))},e.getInheritableProperty=h,e.getLookupTableFactory=function(t){let e;return function(){return t&&(e=Object.create(null),t(e),t=null),e}},e.getNewAnnotationsMap=function(t){if(!t)return null;const e=new Map;for(const[n,r]of t){if(!n.startsWith(i.AnnotationEditorPrefix))continue;let t=e.get(r.pageIndex);t||(t=[],e.set(r.pageIndex,t)),t.push(r)}return e.size>0?e:null},e.getRotationMatrix=function(t,e,n){switch(t){case 90:return[0,1,-1,0,e,0];case 180:return[-1,0,0,-1,e,n];case 270:return[0,-1,1,0,0,n];default:throw new Error("Invalid rotation")}},e.isAscii=function(t){return/^[\x00-\x7F]*$/.test(t)},e.isWhiteSpace=function(t){return 32===t||9===t||13===t||10===t},e.log2=function(t){return t<=0?0:Math.ceil(Math.log2(t))},e.numberToString=function(t){if(Number.isInteger(t))return t.toString();const e=Math.round(100*t);return e%100==0?(e/100).toString():e%10==0?t.toFixed(1):t.toFixed(2)},e.parseXFAPath=function(t){const e=/(.+)\[(\d+)\]$/;return t.split(".").map((t=>{const n=t.match(e);return n?{name:n[1],pos:parseInt(n[2],10)}:{name:t,pos:0}}))},e.readInt8=function(t,e){return t[e]<<24>>24},e.readUint16=function(t,e){return t[e]<<8|t[e+1]},e.readUint32=function(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0},e.recoverJsURL=function(t){const e=new RegExp("^\\s*("+["app.launchURL","window.open","xfa.host.gotoURL"].join("|").replaceAll(".","\\.")+")\\((?:'|\")([^'\"]*)(?:'|\")(?:,\\s*(\\w+)\\)|\\))","i").exec(t);if(e?.[2]){const t=e[2];let n=!1;return"true"===e[3]&&"app.launchURL"===e[1]&&(n=!0),{url:t,newWindow:n}}return null},e.stringToUTF16HexString=function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t.charCodeAt(n);e.push((i>>8&255).toString(16).padStart(2,"0"),(255&i).toString(16).padStart(2,"0"))}return e.join("")},e.stringToUTF16String=function(t,e=!1){const n=[];e&&n.push("þÿ");for(let e=0,i=t.length;e<i;e++){const i=t.charCodeAt(e);n.push(String.fromCharCode(i>>8&255),String.fromCharCode(255&i))}return n.join("")},e.toRomanNumerals=function(t,e=!1){(0,i.assert)(Number.isInteger(t)&&t>0,"The number should be a positive integer.");const n=[];let r;for(;t>=1e3;)t-=1e3,n.push("M");r=t/100|0,t%=100,n.push(u[r]),r=t/10|0,t%=10,n.push(u[10+r]),n.push(u[20+t]);const o=n.join("");return e?o.toLowerCase():o},e.validateCSSFont=function(t){const e=new Set(["100","200","300","400","500","600","700","800","900","1000","normal","bold","bolder","lighter"]),{fontFamily:n,fontWeight:i,italicAngle:r}=t;if(!f(n,!0))return!1;const o=i?i.toString():"";t.fontWeight=e.has(o)?o:"400";const s=parseFloat(r);return t.italicAngle=isNaN(s)||s<-90||s>90?"14":r.toString(),!0},e.validateFontName=f;var i=n(2),r=n(4),o=n(5);e.PDF_VERSION_REGEXP=/^[1-9]\.\d$/;class s extends i.BaseException{constructor(t,e){super(`Missing data [${t}, ${e})`,"MissingDataException"),this.begin=t,this.end=e}}e.MissingDataException=s;class a extends i.BaseException{constructor(t){super(t,"ParserEOFException")}}e.ParserEOFException=a;class l extends i.BaseException{constructor(t){super(t,"XRefEntryException")}}e.XRefEntryException=l;class c extends i.BaseException{constructor(t){super(t,"XRefParseException")}}function h({dict:t,key:e,getArray:n=!1,stopWhenFound:i=!0}){let o;const s=new r.RefSet;for(;t instanceof r.Dict&&(!t.objId||!s.has(t.objId));){t.objId&&s.put(t.objId);const r=n?t.getArray(e):t.get(e);if(void 0!==r){if(i)return r;(o||=[]).push(r)}t=t.get("Parent")}return o}e.XRefParseException=c;const u=["","C","CC","CCC","CD","D","DC","DCC","DCCC","CM","","X","XX","XXX","XL","L","LX","LXX","LXXX","XC","","I","II","III","IV","V","VI","VII","VIII","IX"];function d(t,e,n,s){if(!t)return;let a=null;if(t instanceof r.Ref){if(s.has(t))return;a=t,s.put(a),t=e.fetch(t)}if(Array.isArray(t))for(const i of t)d(i,e,n,s);else if(t instanceof r.Dict){if((0,r.isName)(t.get("S"),"JavaScript")){const e=t.get("JS");let r;e instanceof o.BaseStream?r=e.getString():"string"==typeof e&&(r=e),r&&=(0,i.stringToPDFString)(r).replaceAll("\0",""),r&&n.push(r)}d(t.getRaw("Next"),e,n,s)}a&&s.remove(a)}const p={60:"&lt;",62:"&gt;",38:"&amp;",34:"&quot;",39:"&apos;"};function f(t,e=!1){const n=/^("|').*("|')$/.exec(t);if(n&&n[1]===n[2]){if(new RegExp(`[^\\\\]${n[1]}`).test(t.slice(1,-1)))return e&&(0,i.warn)(`FontFamily contains unescaped ${n[1]}: ${t}.`),!1}else for(const n of t.split(/[ \t]+/))if(/^(\d|(-(\d|-)))/.test(n)||!/^[\w-\\]+$/.test(n))return e&&(0,i.warn)(`FontFamily contains invalid <custom-ident>: ${t}.`),!1;return!0}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RefSetCache=e.RefSet=e.Ref=e.Name=e.EOF=e.Dict=e.Cmd=e.CIRCULAR_REF=void 0,e.clearPrimitiveCaches=function(){s=Object.create(null),a=Object.create(null),l=Object.create(null)},e.isCmd=function(t,e){return t instanceof h&&(void 0===e||t.cmd===e)},e.isDict=function(t,e){return t instanceof d&&(void 0===e||m(t.get("Type"),e))},e.isName=m,e.isRefsEqual=function(t,e){return t.num===e.num&&t.gen===e.gen};var i=n(2);const r=Symbol("CIRCULAR_REF");e.CIRCULAR_REF=r;const o=Symbol("EOF");e.EOF=o;let s=Object.create(null),a=Object.create(null),l=Object.create(null);class c{constructor(t){this.name=t}static get(t){return a[t]||=new c(t)}}e.Name=c;class h{constructor(t){this.cmd=t}static get(t){return s[t]||=new h(t)}}e.Cmd=h;const u=function(){return u};class d{constructor(t=null){this._map=Object.create(null),this.xref=t,this.objId=null,this.suppressEncryption=!1,this.__nonSerializable__=u}assignXref(t){this.xref=t}get size(){return Object.keys(this._map).length}get(t,e,n){let i=this._map[t];return void 0===i&&void 0!==e&&(i=this._map[e],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof p&&this.xref?this.xref.fetch(i,this.suppressEncryption):i}async getAsync(t,e,n){let i=this._map[t];return void 0===i&&void 0!==e&&(i=this._map[e],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof p&&this.xref?this.xref.fetchAsync(i,this.suppressEncryption):i}getArray(t,e,n){let i=this._map[t];if(void 0===i&&void 0!==e&&(i=this._map[e],void 0===i&&void 0!==n&&(i=this._map[n])),i instanceof p&&this.xref&&(i=this.xref.fetch(i,this.suppressEncryption)),Array.isArray(i)){i=i.slice();for(let t=0,e=i.length;t<e;t++)i[t]instanceof p&&this.xref&&(i[t]=this.xref.fetch(i[t],this.suppressEncryption))}return i}getRaw(t){return this._map[t]}getKeys(){return Object.keys(this._map)}getRawValues(){return Object.values(this._map)}set(t,e){this._map[t]=e}has(t){return void 0!==this._map[t]}forEach(t){for(const e in this._map)t(e,this.get(e))}static get empty(){const t=new d(null);return t.set=(t,e)=>{(0,i.unreachable)("Should not call `set` on the empty dictionary.")},(0,i.shadow)(this,"empty",t)}static merge({xref:t,dictArray:e,mergeSubDicts:n=!1}){const i=new d(t),r=new Map;for(const t of e)if(t instanceof d)for(const[e,i]of Object.entries(t._map)){let t=r.get(e);if(void 0===t)t=[],r.set(e,t);else if(!(n&&i instanceof d))continue;t.push(i)}for(const[e,n]of r){if(1===n.length||!(n[0]instanceof d)){i._map[e]=n[0];continue}const r=new d(t);for(const t of n)for(const[e,n]of Object.entries(t._map))void 0===r._map[e]&&(r._map[e]=n);r.size>0&&(i._map[e]=r)}return r.clear(),i.size>0?i:d.empty}clone(){const t=new d(this.xref);for(const e of this.getKeys())t.set(e,this.getRaw(e));return t}}e.Dict=d;class p{constructor(t,e){this.num=t,this.gen=e}toString(){return 0===this.gen?`${this.num}R`:`${this.num}R${this.gen}`}static fromString(t){const e=l[t];if(e)return e;const n=/^(\d+)R(\d*)$/.exec(t);return n&&"0"!==n[1]?l[t]=new p(parseInt(n[1]),n[2]?parseInt(n[2]):0):null}static get(t,e){const n=0===e?`${t}R`:`${t}R${e}`;return l[n]||=new p(t,e)}}e.Ref=p;class f{constructor(t=null){this._set=new Set(t?._set)}has(t){return this._set.has(t.toString())}put(t){this._set.add(t.toString())}remove(t){this._set.delete(t.toString())}[Symbol.iterator](){return this._set.values()}clear(){this._set.clear()}}e.RefSet=f;class g{constructor(){this._map=new Map}get size(){return this._map.size}get(t){return this._map.get(t.toString())}has(t){return this._map.has(t.toString())}put(t,e){this._map.set(t.toString(),e)}putAlias(t,e){this._map.set(t.toString(),this.get(e))}[Symbol.iterator](){return this._map.values()}clear(){this._map.clear()}}function m(t,e){return t instanceof c&&(void 0===e||t.name===e)}e.RefSetCache=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStream=void 0;var i=n(2);class r{constructor(){this.constructor===r&&(0,i.unreachable)("Cannot initialize BaseStream.")}get length(){(0,i.unreachable)("Abstract getter `length` accessed")}get isEmpty(){(0,i.unreachable)("Abstract getter `isEmpty` accessed")}get isDataLoaded(){return(0,i.shadow)(this,"isDataLoaded",!0)}getByte(){(0,i.unreachable)("Abstract method `getByte` called")}getBytes(t){(0,i.unreachable)("Abstract method `getBytes` called")}peekByte(){const t=this.getByte();return-1!==t&&this.pos--,t}peekBytes(t){const e=this.getBytes(t);return this.pos-=e.length,e}getUint16(){const t=this.getByte(),e=this.getByte();return-1===t||-1===e?-1:(t<<8)+e}getInt32(){return(this.getByte()<<24)+(this.getByte()<<16)+(this.getByte()<<8)+this.getByte()}getByteRange(t,e){(0,i.unreachable)("Abstract method `getByteRange` called")}getString(t){return(0,i.bytesToString)(this.getBytes(t))}skip(t){this.pos+=t||1}reset(){(0,i.unreachable)("Abstract method `reset` called")}moveStart(){(0,i.unreachable)("Abstract method `moveStart` called")}makeSubStream(t,e,n=null){(0,i.unreachable)("Abstract method `makeSubStream` called")}getBaseStreams(){return null}}e.BaseStream=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NetworkPdfManager=e.LocalPdfManager=void 0;var i=n(2),r=n(7),o=n(3),s=n(9),a=n(8);class l{constructor(t){this.constructor===l&&(0,i.unreachable)("Cannot initialize BasePdfManager."),this._docBaseUrl=function(t){if(t){const e=(0,i.createValidAbsoluteUrl)(t);if(e)return e.href;(0,i.warn)(`Invalid absolute docBaseUrl: "${t}".`)}return null}(t.docBaseUrl),this._docId=t.docId,this._password=t.password,this.enableXfa=t.enableXfa,t.evaluatorOptions.isOffscreenCanvasSupported&&=i.FeatureTest.isOffscreenCanvasSupported,this.evaluatorOptions=t.evaluatorOptions}get docId(){return this._docId}get password(){return this._password}get docBaseUrl(){return this._docBaseUrl}get catalog(){return this.pdfDocument.catalog}ensureDoc(t,e){return this.ensure(this.pdfDocument,t,e)}ensureXRef(t,e){return this.ensure(this.pdfDocument.xref,t,e)}ensureCatalog(t,e){return this.ensure(this.pdfDocument.catalog,t,e)}getPage(t){return this.pdfDocument.getPage(t)}fontFallback(t,e){return this.pdfDocument.fontFallback(t,e)}loadXfaFonts(t,e){return this.pdfDocument.loadXfaFonts(t,e)}loadXfaImages(){return this.pdfDocument.loadXfaImages()}serializeXfaData(t){return this.pdfDocument.serializeXfaData(t)}cleanup(t=!1){return this.pdfDocument.cleanup(t)}async ensure(t,e,n){(0,i.unreachable)("Abstract method `ensure` called")}requestRange(t,e){(0,i.unreachable)("Abstract method `requestRange` called")}requestLoadedStream(t=!1){(0,i.unreachable)("Abstract method `requestLoadedStream` called")}sendProgressiveData(t){(0,i.unreachable)("Abstract method `sendProgressiveData` called")}updatePassword(t){this._password=t}terminate(t){(0,i.unreachable)("Abstract method `terminate` called")}}e.LocalPdfManager=class extends l{constructor(t){super(t);const e=new a.Stream(t.source);this.pdfDocument=new s.PDFDocument(this,e),this._loadedStreamPromise=Promise.resolve(e)}async ensure(t,e,n){const i=t[e];return"function"==typeof i?i.apply(t,n):i}requestRange(t,e){return Promise.resolve()}requestLoadedStream(t=!1){return this._loadedStreamPromise}terminate(t){}},e.NetworkPdfManager=class extends l{constructor(t){super(t),this.streamManager=new r.ChunkedStreamManager(t.source,{msgHandler:t.handler,length:t.length,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize}),this.pdfDocument=new s.PDFDocument(this,this.streamManager.getStream())}async ensure(t,e,n){try{const i=t[e];return"function"==typeof i?i.apply(t,n):i}catch(i){if(!(i instanceof o.MissingDataException))throw i;return await this.requestRange(i.begin,i.end),this.ensure(t,e,n)}}requestRange(t,e){return this.streamManager.requestRange(t,e)}requestLoadedStream(t=!1){return this.streamManager.requestAllChunks(t)}sendProgressiveData(t){this.streamManager.onReceiveData({chunk:t})}terminate(t){this.streamManager.abort(t)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ChunkedStreamManager=e.ChunkedStream=void 0;var i=n(3),r=n(2),o=n(8);class s extends o.Stream{constructor(t,e,n){super(new Uint8Array(t),0,t,null),this.chunkSize=e,this._loadedChunks=new Set,this.numChunks=Math.ceil(t/e),this.manager=n,this.progressiveDataLength=0,this.lastSuccessfulEnsureByteChunk=-1}getMissingChunks(){const t=[];for(let e=0,n=this.numChunks;e<n;++e)this._loadedChunks.has(e)||t.push(e);return t}get numChunksLoaded(){return this._loadedChunks.size}get isDataLoaded(){return this.numChunksLoaded===this.numChunks}onReceiveData(t,e){const n=this.chunkSize;if(t%n!=0)throw new Error(`Bad begin offset: ${t}`);const i=t+e.byteLength;if(i%n!=0&&i!==this.bytes.length)throw new Error(`Bad end offset: ${i}`);this.bytes.set(new Uint8Array(e),t);const r=Math.floor(t/n),o=Math.floor((i-1)/n)+1;for(let t=r;t<o;++t)this._loadedChunks.add(t)}onReceiveProgressiveData(t){let e=this.progressiveDataLength;const n=Math.floor(e/this.chunkSize);this.bytes.set(new Uint8Array(t),e),e+=t.byteLength,this.progressiveDataLength=e;const i=e>=this.end?this.numChunks:Math.floor(e/this.chunkSize);for(let t=n;t<i;++t)this._loadedChunks.add(t)}ensureByte(t){if(t<this.progressiveDataLength)return;const e=Math.floor(t/this.chunkSize);if(!(e>this.numChunks)&&e!==this.lastSuccessfulEnsureByteChunk){if(!this._loadedChunks.has(e))throw new i.MissingDataException(t,t+1);this.lastSuccessfulEnsureByteChunk=e}}ensureRange(t,e){if(t>=e)return;if(e<=this.progressiveDataLength)return;const n=Math.floor(t/this.chunkSize);if(n>this.numChunks)return;const r=Math.min(Math.floor((e-1)/this.chunkSize)+1,this.numChunks);for(let o=n;o<r;++o)if(!this._loadedChunks.has(o))throw new i.MissingDataException(t,e)}nextEmptyChunk(t){const e=this.numChunks;for(let n=0;n<e;++n){const i=(t+n)%e;if(!this._loadedChunks.has(i))return i}return null}hasChunk(t){return this._loadedChunks.has(t)}getByte(){const t=this.pos;return t>=this.end?-1:(t>=this.progressiveDataLength&&this.ensureByte(t),this.bytes[this.pos++])}getBytes(t){const e=this.bytes,n=this.pos,i=this.end;if(!t)return i>this.progressiveDataLength&&this.ensureRange(n,i),e.subarray(n,i);let r=n+t;return r>i&&(r=i),r>this.progressiveDataLength&&this.ensureRange(n,r),this.pos=r,e.subarray(n,r)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),e>this.progressiveDataLength&&this.ensureRange(t,e),this.bytes.subarray(t,e)}makeSubStream(t,e,n=null){function i(){}e?t+e>this.progressiveDataLength&&this.ensureRange(t,t+e):t>=this.progressiveDataLength&&this.ensureByte(t),i.prototype=Object.create(this),i.prototype.getMissingChunks=function(){const t=this.chunkSize,e=Math.floor(this.start/t),n=Math.floor((this.end-1)/t)+1,i=[];for(let t=e;t<n;++t)this._loadedChunks.has(t)||i.push(t);return i},Object.defineProperty(i.prototype,"isDataLoaded",{get(){return this.numChunksLoaded===this.numChunks||0===this.getMissingChunks().length},configurable:!0});const r=new i;return r.pos=r.start=t,r.end=t+e||this.end,r.dict=n,r}getBaseStreams(){return[this]}}e.ChunkedStream=s,e.ChunkedStreamManager=class{constructor(t,e){this.length=e.length,this.chunkSize=e.rangeChunkSize,this.stream=new s(this.length,this.chunkSize,this),this.pdfNetworkStream=t,this.disableAutoFetch=e.disableAutoFetch,this.msgHandler=e.msgHandler,this.currRequestId=0,this._chunksNeededByRequest=new Map,this._requestsByChunk=new Map,this._promisesByRequest=new Map,this.progressiveDataLength=0,this.aborted=!1,this._loadedStreamCapability=new r.PromiseCapability}sendRequest(t,e){const n=this.pdfNetworkStream.getRangeReader(t,e);n.isStreamingSupported||(n.onProgress=this.onProgress.bind(this));let r=[],o=0;return new Promise(((t,e)=>{const s=({value:a,done:l})=>{try{if(l){const e=(0,i.arrayBuffersToBytes)(r);return r=null,void t(e)}o+=a.byteLength,n.isStreamingSupported&&this.onProgress({loaded:o}),r.push(a),n.read().then(s,e)}catch(t){e(t)}};n.read().then(s,e)})).then((e=>{this.aborted||this.onReceiveData({chunk:e,begin:t})}))}requestAllChunks(t=!1){if(!t){const t=this.stream.getMissingChunks();this._requestChunks(t)}return this._loadedStreamCapability.promise}_requestChunks(t){const e=this.currRequestId++,n=new Set;this._chunksNeededByRequest.set(e,n);for(const e of t)this.stream.hasChunk(e)||n.add(e);if(0===n.size)return Promise.resolve();const i=new r.PromiseCapability;this._promisesByRequest.set(e,i);const o=[];for(const t of n){let n=this._requestsByChunk.get(t);n||(n=[],this._requestsByChunk.set(t,n),o.push(t)),n.push(e)}if(o.length>0){const t=this.groupChunks(o);for(const e of t){const t=e.beginChunk*this.chunkSize,n=Math.min(e.endChunk*this.chunkSize,this.length);this.sendRequest(t,n).catch(i.reject)}}return i.promise.catch((t=>{if(!this.aborted)throw t}))}getStream(){return this.stream}requestRange(t,e){e=Math.min(e,this.length);const n=this.getBeginChunk(t),i=this.getEndChunk(e),r=[];for(let t=n;t<i;++t)r.push(t);return this._requestChunks(r)}requestRanges(t=[]){const e=[];for(const n of t){const t=this.getBeginChunk(n.begin),i=this.getEndChunk(n.end);for(let n=t;n<i;++n)e.includes(n)||e.push(n)}return e.sort((function(t,e){return t-e})),this._requestChunks(e)}groupChunks(t){const e=[];let n=-1,i=-1;for(let r=0,o=t.length;r<o;++r){const o=t[r];n<0&&(n=o),i>=0&&i+1!==o&&(e.push({beginChunk:n,endChunk:i+1}),n=o),r+1===t.length&&e.push({beginChunk:n,endChunk:o+1}),i=o}return e}onProgress(t){this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize+t.loaded,total:this.length})}onReceiveData(t){const e=t.chunk,n=void 0===t.begin,i=n?this.progressiveDataLength:t.begin,r=i+e.byteLength,o=Math.floor(i/this.chunkSize),s=r<this.length?Math.floor(r/this.chunkSize):Math.ceil(r/this.chunkSize);n?(this.stream.onReceiveProgressiveData(e),this.progressiveDataLength=r):this.stream.onReceiveData(i,e),this.stream.isDataLoaded&&this._loadedStreamCapability.resolve(this.stream);const a=[];for(let t=o;t<s;++t){const e=this._requestsByChunk.get(t);if(e){this._requestsByChunk.delete(t);for(const n of e){const e=this._chunksNeededByRequest.get(n);e.has(t)&&e.delete(t),e.size>0||a.push(n)}}}if(!this.disableAutoFetch&&0===this._requestsByChunk.size){let t;if(1===this.stream.numChunksLoaded){const e=this.stream.numChunks-1;this.stream.hasChunk(e)||(t=e)}else t=this.stream.nextEmptyChunk(s);Number.isInteger(t)&&this._requestChunks([t])}for(const t of a){const e=this._promisesByRequest.get(t);this._promisesByRequest.delete(t),e.resolve()}this.msgHandler.send("DocProgress",{loaded:this.stream.numChunksLoaded*this.chunkSize,total:this.length})}onError(t){this._loadedStreamCapability.reject(t)}getBeginChunk(t){return Math.floor(t/this.chunkSize)}getEndChunk(t){return Math.floor((t-1)/this.chunkSize)+1}abort(t){this.aborted=!0,this.pdfNetworkStream?.cancelAllRequests(t);for(const e of this._promisesByRequest.values())e.reject(t)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StringStream=e.Stream=e.NullStream=void 0;var i=n(5),r=n(2);class o extends i.BaseStream{constructor(t,e,n,i){super(),this.bytes=t instanceof Uint8Array?t:new Uint8Array(t),this.start=e||0,this.pos=this.start,this.end=e+n||this.bytes.length,this.dict=i}get length(){return this.end-this.start}get isEmpty(){return 0===this.length}getByte(){return this.pos>=this.end?-1:this.bytes[this.pos++]}getBytes(t){const e=this.bytes,n=this.pos,i=this.end;if(!t)return e.subarray(n,i);let r=n+t;return r>i&&(r=i),this.pos=r,e.subarray(n,r)}getByteRange(t,e){return t<0&&(t=0),e>this.end&&(e=this.end),this.bytes.subarray(t,e)}reset(){this.pos=this.start}moveStart(){this.start=this.pos}makeSubStream(t,e,n=null){return new o(this.bytes.buffer,t,e,n)}}e.Stream=o,e.StringStream=class extends o{constructor(t){super((0,r.stringToBytes)(t))}},e.NullStream=class extends o{constructor(){super(new Uint8Array(0))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Page=e.PDFDocument=void 0;var i=n(2),r=n(10),o=n(3),s=n(4),a=n(51),l=n(5),c=n(74),h=n(66),u=n(68),d=n(102),p=n(16),f=n(8),g=n(76),m=n(64),y=n(13),v=n(18),b=n(72),w=n(73),x=n(77),_=n(103);const S=[0,0,612,792];class C{constructor({pdfManager:t,xref:e,pageIndex:n,pageDict:i,ref:r,globalIdFactory:o,fontCache:s,builtInCMapCache:a,standardFontDataCache:l,globalImageCache:c,systemFontCache:h,nonBlendModesSet:u,xfaFactory:d}){this.pdfManager=t,this.pageIndex=n,this.pageDict=i,this.xref=e,this.ref=r,this.fontCache=s,this.builtInCMapCache=a,this.standardFontDataCache=l,this.globalImageCache=c,this.systemFontCache=h,this.nonBlendModesSet=u,this.evaluatorOptions=t.evaluatorOptions,this.resourcesPromise=null,this.xfaFactory=d;const p={obj:0};this._localIdFactory=class extends o{static createObjId(){return`p${n}_${++p.obj}`}static getPageObjId(){return`p${r.toString()}`}}}_getInheritableProperty(t,e=!1){const n=(0,o.getInheritableProperty)({dict:this.pageDict,key:t,getArray:e,stopWhenFound:!1});return Array.isArray(n)?1!==n.length&&n[0]instanceof s.Dict?s.Dict.merge({xref:this.xref,dictArray:n}):n[0]:n}get content(){return this.pageDict.getArray("Contents")}get resources(){const t=this._getInheritableProperty("Resources");return(0,i.shadow)(this,"resources",t instanceof s.Dict?t:s.Dict.empty)}_getBoundingBox(t){if(this.xfaData)return this.xfaData.bbox;let e=this._getInheritableProperty(t,!0);if(Array.isArray(e)&&4===e.length){if(e=i.Util.normalizeRect(e),e[2]-e[0]>0&&e[3]-e[1]>0)return e;(0,i.warn)(`Empty, or invalid, /${t} entry.`)}return null}get mediaBox(){return(0,i.shadow)(this,"mediaBox",this._getBoundingBox("MediaBox")||S)}get cropBox(){return(0,i.shadow)(this,"cropBox",this._getBoundingBox("CropBox")||this.mediaBox)}get userUnit(){let t=this.pageDict.get("UserUnit");return("number"!=typeof t||t<=0)&&(t=1),(0,i.shadow)(this,"userUnit",t)}get view(){const{cropBox:t,mediaBox:e}=this;if(t!==e&&!(0,i.isArrayEqual)(t,e)){const n=i.Util.intersect(t,e);if(n&&n[2]-n[0]>0&&n[3]-n[1]>0)return(0,i.shadow)(this,"view",n);(0,i.warn)("Empty /CropBox and /MediaBox intersection.")}return(0,i.shadow)(this,"view",e)}get rotate(){let t=this._getInheritableProperty("Rotate")||0;return t%90!=0?t=0:t>=360?t%=360:t<0&&(t=(t%360+360)%360),(0,i.shadow)(this,"rotate",t)}_onSubStreamError(t,e){if(!this.evaluatorOptions.ignoreErrors)throw t;(0,i.warn)(`getContentStream - ignoring sub-stream (${e}): "${t}".`)}getContentStream(){return this.pdfManager.ensure(this,"content").then((t=>t instanceof l.BaseStream?t:Array.isArray(t)?new v.StreamsSequenceStream(t,this._onSubStreamError.bind(this)):new f.NullStream))}get xfaData(){return(0,i.shadow)(this,"xfaData",this.xfaFactory?{bbox:this.xfaFactory.getBoundingBox(this.pageIndex)}:null)}#Di(t,e,n){for(const r of t)if(r.id){const t=s.Ref.fromString(r.id);if(!t){(0,i.warn)(`A non-linked annotation cannot be modified: ${r.id}`);continue}if(r.deleted){e.put(t);continue}n?.put(t),r.ref=t,delete r.id}}async saveNewAnnotations(t,e,n,i){if(this.xfaFactory)throw new Error("XFA: Cannot save new annotations.");const o=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),a=new s.RefSet,l=new s.RefSet;this.#Di(n,a,l);const c=this.pageDict,h=this.annotations.filter((t=>!(t instanceof s.Ref&&a.has(t)))),u=await r.AnnotationFactory.saveNewAnnotations(o,e,n,i);for(const{ref:t}of u.annotations)t instanceof s.Ref&&!l.has(t)&&h.push(t);const d=c.get("Annots");c.set("Annots",h);const p=[];await(0,w.writeObject)(this.ref,c,p,this.xref),d&&c.set("Annots",d);const f=u.dependencies;return f.push({ref:this.ref,data:p.join("")},...u.annotations),f}save(t,e,n){const r=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions});return this._parsedAnnotations.then((function(t){const o=[];for(const s of t)s.mustBePrinted(n)&&o.push(s.save(r,e,n).catch((function(t){return(0,i.warn)(`save - ignoring annotation data during "${e.name}" task: "${t}".`),null})));return Promise.all(o).then((function(t){return t.filter((t=>!!t))}))}))}loadResources(t){return this.resourcesPromise||(this.resourcesPromise=this.pdfManager.ensure(this,"resources")),this.resourcesPromise.then((()=>new g.ObjectLoader(this.resources,t,this.xref).load()))}getOperatorList({handler:t,sink:e,task:n,intent:a,cacheKey:l,annotationStorage:c=null}){const h=this.getContentStream(),u=this.loadResources(["ColorSpace","ExtGState","Font","Pattern","Properties","Shading","XObject"]),d=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),p=this.xfaFactory?null:(0,o.getNewAnnotationsMap)(c);let f=null,g=Promise.resolve(null);if(p){const t=p.get(this.pageIndex);if(t){const e=this.pdfManager.ensureDoc("annotationGlobals");let o;const a=new Set;for(const{bitmapId:e,bitmap:n}of t)!e||n||a.has(e)||a.add(e);const{isOffscreenCanvasSupported:l}=this.evaluatorOptions;if(a.size>0){const e=t.slice();for(const[t,n]of c)t.startsWith(i.AnnotationEditorPrefix)&&n.bitmap&&a.has(n.bitmapId)&&e.push(n);o=r.AnnotationFactory.generateImages(e,this.xref,l)}else o=r.AnnotationFactory.generateImages(t,this.xref,l);f=new s.RefSet,this.#Di(t,f,null),g=e.then((e=>e?r.AnnotationFactory.printNewAnnotations(e,d,n,t,o):null))}}const v=Promise.all([h,u]).then((([i])=>{const r=new m.OperatorList(a,e);return t.send("StartRenderPage",{transparency:d.hasBlendModes(this.resources,this.nonBlendModesSet),pageIndex:this.pageIndex,cacheKey:l}),d.getOperatorList({stream:i,task:n,resources:this.resources,operatorList:r}).then((function(){return r}))}));return Promise.all([v,this._parsedAnnotations,g]).then((function([t,e,r]){if(r){e=e.filter((t=>!(t.ref&&f.has(t.ref))));for(let t=0,n=r.length;t<n;t++){const i=r[t];if(i.refToReplace){const o=e.findIndex((t=>t.ref&&(0,s.isRefsEqual)(t.ref,i.refToReplace)));o>=0&&(e.splice(o,1,i),r.splice(t--,1),n--)}}e=e.concat(r)}if(0===e.length||a&i.RenderingIntentFlag.ANNOTATIONS_DISABLE)return t.flush(!0),{length:t.totalLength};const o=!!(a&i.RenderingIntentFlag.ANNOTATIONS_FORMS),l=!!(a&i.RenderingIntentFlag.ANY),h=!!(a&i.RenderingIntentFlag.DISPLAY),u=!!(a&i.RenderingIntentFlag.PRINT),p=[];for(const t of e)(l||h&&t.mustBeViewed(c,o)||u&&t.mustBePrinted(c))&&p.push(t.getOperatorList(d,n,a,o,c).catch((function(t){return(0,i.warn)(`getOperatorList - ignoring annotation data during "${n.name}" task: "${t}".`),{opList:null,separateForm:!1,separateCanvas:!1}})));return Promise.all(p).then((function(e){let n=!1,i=!1;for(const{opList:r,separateForm:o,separateCanvas:s}of e)t.addOpList(r),n||=o,i||=s;return t.flush(!0,{form:n,canvas:i}),{length:t.totalLength}}))}))}extractTextContent({handler:t,task:e,includeMarkedContent:n,disableNormalization:i,sink:r}){const o=this.getContentStream(),s=this.loadResources(["ExtGState","Font","Properties","XObject"]);return Promise.all([o,s]).then((([o])=>new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}).getTextContent({stream:o,task:e,resources:this.resources,includeMarkedContent:n,disableNormalization:i,sink:r,viewBox:this.view})))}async getStructTree(){const t=await this.pdfManager.ensureCatalog("structTreeRoot");return t?(await this._parsedAnnotations,(await this.pdfManager.ensure(this,"_parseStructTree",[t])).serializable):null}_parseStructTree(t){const e=new b.StructTreePage(t,this.pageDict);return e.parse(this.ref),e}async getAnnotationsData(t,e,n){const r=await this._parsedAnnotations;if(0===r.length)return r;const o=[],s=[];let a;const l=!!(n&i.RenderingIntentFlag.ANY),c=!!(n&i.RenderingIntentFlag.DISPLAY),h=!!(n&i.RenderingIntentFlag.PRINT);for(const n of r){const r=l||c&&n.viewable;(r||h&&n.printable)&&o.push(n.data),n.hasTextContent&&r&&(a||=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:this.pageIndex,idFactory:this._localIdFactory,fontCache:this.fontCache,builtInCMapCache:this.builtInCMapCache,standardFontDataCache:this.standardFontDataCache,globalImageCache:this.globalImageCache,systemFontCache:this.systemFontCache,options:this.evaluatorOptions}),s.push(n.extractTextContent(a,e,[-1/0,-1/0,1/0,1/0]).catch((function(t){(0,i.warn)(`getAnnotationsData - ignoring textContent during "${e.name}" task: "${t}".`)}))))}return await Promise.all(s),o}get annotations(){const t=this._getInheritableProperty("Annots");return(0,i.shadow)(this,"annotations",Array.isArray(t)?t:[])}get _parsedAnnotations(){const t=this.pdfManager.ensure(this,"annotations").then((async t=>{if(0===t.length)return t;const e=await this.pdfManager.ensureDoc("annotationGlobals");if(!e)return[];const n=[];for(const o of t)n.push(r.AnnotationFactory.create(this.xref,o,e,this._localIdFactory,!1,this.ref).catch((function(t){return(0,i.warn)(`_parsedAnnotations: "${t}".`),null})));const o=[];let s;for(const t of await Promise.all(n))t&&(t instanceof r.PopupAnnotation?(s||=[]).push(t):o.push(t));return s&&o.push(...s),o}));return(0,i.shadow)(this,"_parsedAnnotations",t)}get jsActions(){const t=(0,o.collectActions)(this.xref,this.pageDict,i.PageActionEventType);return(0,i.shadow)(this,"jsActions",t)}}e.Page=C;const k=new Uint8Array([37,80,68,70,45]),A=new Uint8Array([115,116,97,114,116,120,114,101,102]),E=new Uint8Array([101,110,100,111,98,106]);function T(t,e,n=1024,i=!1){const r=e.length,o=t.peekBytes(n),s=o.length-r;if(s<=0)return!1;if(i){const n=r-1;let i=o.length-1;for(;i>=n;){let s=0;for(;s<r&&o[i-s]===e[n-s];)s++;if(s>=r)return t.pos+=i-n,!0;i--}}else{let n=0;for(;n<=s;){let i=0;for(;i<r&&o[n+i]===e[i];)i++;if(i>=r)return t.pos+=n,!0;n++}}return!1}e.PDFDocument=class{constructor(t,e){if(e.length<=0)throw new i.InvalidPDFException("The PDF file is empty, i.e. its size is zero bytes.");this.pdfManager=t,this.stream=e,this.xref=new _.XRef(e,t),this._pagePromises=new Map,this._version=null;const n={font:0};this._globalIdFactory=class{static getDocId(){return`g_${t.docId}`}static createFontId(){return"f"+ ++n.font}static createObjId(){(0,i.unreachable)("Abstract method `createObjId` called.")}static getPageObjId(){(0,i.unreachable)("Abstract method `getPageObjId` called.")}}}parse(t){this.xref.parse(t),this.catalog=new h.Catalog(this.pdfManager,this.xref)}get linearization(){let t=null;try{t=p.Linearization.create(this.stream)}catch(t){if(t instanceof o.MissingDataException)throw t;(0,i.info)(t)}return(0,i.shadow)(this,"linearization",t)}get startXRef(){const t=this.stream;let e=0;if(this.linearization)t.reset(),T(t,E)&&(e=t.pos+6-t.start);else{const n=1024,i=A.length;let r=!1,s=t.end;for(;!r&&s>0;)s-=n-i,s<0&&(s=0),t.pos=s,r=T(t,A,n,!0);if(r){let n;t.skip(9);do{n=t.getByte()}while((0,o.isWhiteSpace)(n));let i="";for(;n>=32&&n<=57;)i+=String.fromCharCode(n),n=t.getByte();e=parseInt(i,10),isNaN(e)&&(e=0)}}return(0,i.shadow)(this,"startXRef",e)}checkHeader(){const t=this.stream;if(t.reset(),!T(t,k))return;t.moveStart(),t.skip(k.length);let e,n="";for(;(e=t.getByte())>32&&n.length<7;)n+=String.fromCharCode(e);o.PDF_VERSION_REGEXP.test(n)?this._version=n:(0,i.warn)(`Invalid PDF header version: ${n}`)}parseStartXRef(){this.xref.setStartXRef(this.startXRef)}get numPages(){let t=0;return t=this.catalog.hasActualNumPages?this.catalog.numPages:this.xfaFactory?this.xfaFactory.getNumPages():this.linearization?this.linearization.numPages:this.catalog.numPages,(0,i.shadow)(this,"numPages",t)}_hasOnlyDocumentSignatures(t,e=0){return!!Array.isArray(t)&&t.every((t=>{if(!((t=this.xref.fetchIfRef(t))instanceof s.Dict))return!1;if(t.has("Kids"))return++e>10?((0,i.warn)("_hasOnlyDocumentSignatures: maximum recursion depth reached"),!1):this._hasOnlyDocumentSignatures(t.get("Kids"),e);const n=(0,s.isName)(t.get("FT"),"Sig"),r=t.get("Rect"),o=Array.isArray(r)&&r.every((t=>0===t));return n&&o}))}get _xfaStreams(){const t=this.catalog.acroForm;if(!t)return null;const e=t.get("XFA"),n={"xdp:xdp":"",template:"",datasets:"",config:"",connectionSet:"",localeSet:"",stylesheet:"","/xdp:xdp":""};if(e instanceof l.BaseStream&&!e.isEmpty)return n["xdp:xdp"]=e,n;if(!Array.isArray(e)||0===e.length)return null;for(let t=0,i=e.length;t<i;t+=2){let r;if(r=0===t?"xdp:xdp":t===i-2?"/xdp:xdp":e[t],!n.hasOwnProperty(r))continue;const o=this.xref.fetchIfRef(e[t+1]);o instanceof l.BaseStream&&!o.isEmpty&&(n[r]=o)}return n}get xfaDatasets(){const t=this._xfaStreams;if(!t)return(0,i.shadow)(this,"xfaDatasets",null);for(const e of["datasets","xdp:xdp"]){const n=t[e];if(n)try{const t={[e]:(0,i.stringToUTF8String)(n.getString())};return(0,i.shadow)(this,"xfaDatasets",new d.DatasetReader(t))}catch{(0,i.warn)("XFA - Invalid utf-8 string.");break}}return(0,i.shadow)(this,"xfaDatasets",null)}get xfaData(){const t=this._xfaStreams;if(!t)return null;const e=Object.create(null);for(const[n,r]of Object.entries(t))if(r)try{e[n]=(0,i.stringToUTF8String)(r.getString())}catch{return(0,i.warn)("XFA - Invalid utf-8 string."),null}return e}get xfaFactory(){let t;return this.pdfManager.enableXfa&&this.catalog.needsRendering&&this.formInfo.hasXfa&&!this.formInfo.hasAcroForm&&(t=this.xfaData),(0,i.shadow)(this,"xfaFactory",t?new x.XFAFactory(t):null)}get isPureXfa(){return!!this.xfaFactory&&this.xfaFactory.isValid()}get htmlForXfa(){return this.xfaFactory?this.xfaFactory.getPages():null}async loadXfaImages(){const t=await this.pdfManager.ensureCatalog("xfaImages");if(!t)return;const e=t.getKeys(),n=new g.ObjectLoader(t,e,this.xref);await n.load();const i=new Map;for(const n of e){const e=t.get(n);e instanceof l.BaseStream&&i.set(n,e.getBytes())}this.xfaFactory.setImages(i)}async loadXfaFonts(t,e){const n=await this.pdfManager.ensureCatalog("acroForm");if(!n)return;const r=await n.getAsync("DR");if(!(r instanceof s.Dict))return;const l=new g.ObjectLoader(r,["Font"],this.xref);await l.load();const c=r.get("Font");if(!(c instanceof s.Dict))return;const h=Object.assign(Object.create(null),this.pdfManager.evaluatorOptions);h.useSystemFonts=!1;const u=new y.PartialEvaluator({xref:this.xref,handler:t,pageIndex:-1,idFactory:this._globalIdFactory,fontCache:this.catalog.fontCache,builtInCMapCache:this.catalog.builtInCMapCache,standardFontDataCache:this.catalog.standardFontDataCache,options:h}),d=new m.OperatorList,p=[],f={get font(){return p.at(-1)},set font(t){p.push(t)},clone(){return this}},v=new Map;c.forEach(((t,e)=>{v.set(t,e)}));const b=[];for(const[t,n]of v){const a=n.get("FontDescriptor");if(!(a instanceof s.Dict))continue;let l=a.get("FontFamily");l=l.replaceAll(/[ ]+(\d)/g,"$1");const c={fontFamily:l,fontWeight:a.get("FontWeight"),italicAngle:-a.get("ItalicAngle")};(0,o.validateCSSFont)(c)&&b.push(u.handleSetFont(r,[s.Name.get(t),1],null,d,e,f,null,c).catch((function(t){return(0,i.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b);const w=this.xfaFactory.setFonts(p);if(!w)return;h.ignoreErrors=!0,b.length=0,p.length=0;const x=new Set;for(const t of w)(0,a.getXfaFontName)(`${t}-Regular`)||x.add(t);x.size&&w.push("PdfJS-Fallback");for(const t of w)if(!x.has(t))for(const n of[{name:"Regular",fontWeight:400,italicAngle:0},{name:"Bold",fontWeight:700,italicAngle:0},{name:"Italic",fontWeight:400,italicAngle:12},{name:"BoldItalic",fontWeight:700,italicAngle:12}]){const o=`${t}-${n.name}`,l=(0,a.getXfaFontDict)(o);b.push(u.handleSetFont(r,[s.Name.get(o),1],null,d,e,f,l,{fontFamily:t,fontWeight:n.fontWeight,italicAngle:n.italicAngle}).catch((function(t){return(0,i.warn)(`loadXfaFonts: "${t}".`),null})))}await Promise.all(b),this.xfaFactory.appendFonts(p,x)}async serializeXfaData(t){return this.xfaFactory?this.xfaFactory.serializeData(t):null}get version(){return this.catalog.version||this._version}get formInfo(){const t={hasFields:!1,hasAcroForm:!1,hasXfa:!1,hasSignatures:!1},e=this.catalog.acroForm;if(!e)return(0,i.shadow)(this,"formInfo",t);try{const n=e.get("Fields"),i=Array.isArray(n)&&n.length>0;t.hasFields=i;const r=e.get("XFA");t.hasXfa=Array.isArray(r)&&r.length>0||r instanceof l.BaseStream&&!r.isEmpty;const o=!!(1&e.get("SigFlags")),s=o&&this._hasOnlyDocumentSignatures(n);t.hasAcroForm=i&&!s,t.hasSignatures=o}catch(t){if(t instanceof o.MissingDataException)throw t;(0,i.warn)(`Cannot fetch form information: "${t}".`)}return(0,i.shadow)(this,"formInfo",t)}get documentInfo(){const t={PDFFormatVersion:this.version,Language:this.catalog.lang,EncryptFilterName:this.xref.encrypt?this.xref.encrypt.filterName:null,IsLinearized:!!this.linearization,IsAcroFormPresent:this.formInfo.hasAcroForm,IsXFAPresent:this.formInfo.hasXfa,IsCollectionPresent:!!this.catalog.collection,IsSignaturesPresent:this.formInfo.hasSignatures};let e;try{e=this.xref.trailer.get("Info")}catch(t){if(t instanceof o.MissingDataException)throw t;(0,i.info)("The document information dictionary is invalid.")}if(!(e instanceof s.Dict))return(0,i.shadow)(this,"documentInfo",t);for(const n of e.getKeys()){const r=e.get(n);switch(n){case"Title":case"Author":case"Subject":case"Keywords":case"Creator":case"Producer":case"CreationDate":case"ModDate":if("string"==typeof r){t[n]=(0,i.stringToPDFString)(r);continue}break;case"Trapped":if(r instanceof s.Name){t[n]=r;continue}break;default:let e;switch(typeof r){case"string":e=(0,i.stringToPDFString)(r);break;case"number":case"boolean":e=r;break;default:r instanceof s.Name&&(e=r)}if(void 0===e){(0,i.warn)(`Bad value, for custom key "${n}", in Info: ${r}.`);continue}t.Custom||(t.Custom=Object.create(null)),t.Custom[n]=e;continue}(0,i.warn)(`Bad value, for key "${n}", in Info: ${r}.`)}return(0,i.shadow)(this,"documentInfo",t)}get fingerprints(){function t(t){return"string"==typeof t&&t.length>0&&"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"!==t}function e(t){const e=[];for(const n of t){const t=n.toString(16);e.push(t.padStart(2,"0"))}return e.join("")}const n=this.xref.trailer.get("ID");let r,o;return Array.isArray(n)&&t(n[0])?(r=(0,i.stringToBytes)(n[0]),n[1]!==n[0]&&t(n[1])&&(o=(0,i.stringToBytes)(n[1]))):r=(0,c.calculateMD5)(this.stream.getByteRange(0,1024),0,1024),(0,i.shadow)(this,"fingerprints",[e(r),o?e(o):null])}async _getLinearizationPage(t){const{catalog:e,linearization:n,xref:r}=this,o=s.Ref.get(n.objectNumberFirst,0);try{const t=await r.fetchAsync(o);if(t instanceof s.Dict){let n=t.getRaw("Type");if(n instanceof s.Ref&&(n=await r.fetchAsync(n)),(0,s.isName)(n,"Page")||!t.has("Type")&&!t.has("Kids"))return e.pageKidsCountCache.has(o)||e.pageKidsCountCache.put(o,1),e.pageIndexCache.has(o)||e.pageIndexCache.put(o,0),[t,o]}throw new i.FormatError("The Linearization dictionary doesn't point to a valid Page dictionary.")}catch(n){return(0,i.warn)(`_getLinearizationPage: "${n.message}".`),e.getPageDict(t)}}getPage(t){const e=this._pagePromises.get(t);if(e)return e;const{catalog:n,linearization:i,xfaFactory:r}=this;let o;return o=r?Promise.resolve([s.Dict.empty,null]):i?.pageFirst===t?this._getLinearizationPage(t):n.getPageDict(t),o=o.then((([e,i])=>new C({pdfManager:this.pdfManager,xref:this.xref,pageIndex:t,pageDict:e,ref:i,globalIdFactory:this._globalIdFactory,fontCache:n.fontCache,builtInCMapCache:n.builtInCMapCache,standardFontDataCache:n.standardFontDataCache,globalImageCache:n.globalImageCache,systemFontCache:n.systemFontCache,nonBlendModesSet:n.nonBlendModesSet,xfaFactory:r}))),this._pagePromises.set(t,o),o}async checkFirstPage(t=!1){if(!t)try{await this.getPage(0)}catch(t){if(t instanceof o.XRefEntryException)throw this._pagePromises.delete(0),await this.cleanup(),new o.XRefParseException}}async checkLastPage(t=!1){const{catalog:e,pdfManager:n}=this;let r;e.setActualNumPages();try{if(await Promise.all([n.ensureDoc("xfaFactory"),n.ensureDoc("linearization"),n.ensureCatalog("numPages")]),this.xfaFactory)return;if(r=this.linearization?this.linearization.numPages:e.numPages,!Number.isInteger(r))throw new i.FormatError("Page count is not an integer.");if(r<=1)return;await this.getPage(r-1)}catch(s){if(this._pagePromises.delete(r-1),await this.cleanup(),s instanceof o.XRefEntryException&&!t)throw new o.XRefParseException;let a;(0,i.warn)(`checkLastPage - invalid /Pages tree /Count: ${r}.`);try{a=await e.getAllPageDicts(t)}catch(n){if(n instanceof o.XRefEntryException&&!t)throw new o.XRefParseException;return void e.setActualNumPages(1)}for(const[t,[i,r]]of a){let o;i instanceof Error?(o=Promise.reject(i),o.catch((()=>{}))):o=Promise.resolve(new C({pdfManager:n,xref:this.xref,pageIndex:t,pageDict:i,ref:r,globalIdFactory:this._globalIdFactory,fontCache:e.fontCache,builtInCMapCache:e.builtInCMapCache,standardFontDataCache:e.standardFontDataCache,globalImageCache:e.globalImageCache,systemFontCache:e.systemFontCache,nonBlendModesSet:e.nonBlendModesSet,xfaFactory:null})),this._pagePromises.set(t,o)}e.setActualNumPages(a.size)}}fontFallback(t,e){return this.catalog.fontFallback(t,e)}async cleanup(t=!1){return this.catalog?this.catalog.cleanup(t):(0,u.clearGlobalCaches)()}#Fi(t,e,n,o){const s=this.xref.fetchIfRef(e);if(s.has("T")){const e=(0,i.stringToPDFString)(s.get("T"));t=""===t?e:`${t}.${e}`}if(n.has(t)||n.set(t,[]),n.get(t).push(r.AnnotationFactory.create(this.xref,e,o,this._localIdFactory,!0,null).then((t=>t?.getFieldObject())).catch((function(t){return(0,i.warn)(`#collectFieldObjects: "${t}".`),null}))),s.has("Kids"))for(const e of s.get("Kids"))this.#Fi(t,e,n,o)}get fieldObjects(){if(!this.formInfo.hasFields)return(0,i.shadow)(this,"fieldObjects",Promise.resolve(null));const t=this.pdfManager.ensureDoc("annotationGlobals").then((async t=>{if(!t)return null;const e=Object.create(null),n=new Map;for(const e of this.catalog.acroForm.get("Fields"))this.#Fi("",e,n,t);const i=[];for(const[t,r]of n)i.push(Promise.all(r).then((n=>{(n=n.filter((t=>!!t))).length>0&&(e[t]=n)})));return await Promise.all(i),e}));return(0,i.shadow)(this,"fieldObjects",t)}get hasJSActions(){const t=this.pdfManager.ensureDoc("_parseHasJSActions");return(0,i.shadow)(this,"hasJSActions",t)}async _parseHasJSActions(){const[t,e]=await Promise.all([this.pdfManager.ensureCatalog("jsActions"),this.pdfManager.ensureDoc("fieldObjects")]);return!!t||!!e&&Object.values(e).some((t=>t.some((t=>null!==t.actions))))}get calculationOrderIds(){const t=this.catalog.acroForm;if(!t?.has("CO"))return(0,i.shadow)(this,"calculationOrderIds",null);const e=t.get("CO");if(!Array.isArray(e)||0===e.length)return(0,i.shadow)(this,"calculationOrderIds",null);const n=[];for(const t of e)t instanceof s.Ref&&n.push(t.toString());return 0===n.length?(0,i.shadow)(this,"calculationOrderIds",null):(0,i.shadow)(this,"calculationOrderIds",n)}get annotationGlobals(){return(0,i.shadow)(this,"annotationGlobals",r.AnnotationFactory.createGlobals(this.pdfManager))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PopupAnnotation=e.MarkupAnnotation=e.AnnotationFactory=e.AnnotationBorderStyle=e.Annotation=void 0,e.getQuadPoints=w;var i=n(2),r=n(3),o=n(11),s=n(4),a=n(8),l=n(5),c=n(60),h=n(66),u=n(12),d=n(69),p=n(26),f=n(76),g=n(64),m=n(73),y=n(77);function v(t,e=new Uint8ClampedArray(3)){if(!Array.isArray(t))return e;const n=e||new Uint8ClampedArray(3);switch(t.length){case 0:return null;case 1:return u.ColorSpace.singletons.gray.getRgbItem(t,0,n,0),n;case 3:return u.ColorSpace.singletons.rgb.getRgbItem(t,0,n,0),n;case 4:return u.ColorSpace.singletons.cmyk.getRgbItem(t,0,n,0),n;default:return e}}function b(t){return Array.from(t,(t=>t/255))}function w(t,e){const n=t.getArray("QuadPoints");if(!Array.isArray(n)||0===n.length||n.length%8>0)return null;const i=[];for(let t=0,r=n.length/8;t<r;t++){let r=1/0,o=-1/0,s=1/0,a=-1/0;for(let e=8*t,i=8*t+8;e<i;e+=2){const t=n[e],i=n[e+1];r=Math.min(t,r),o=Math.max(t,o),s=Math.min(i,s),a=Math.max(i,a)}if(null!==e&&(r<e[0]||o>e[2]||s<e[1]||a>e[3]))return null;i.push([{x:r,y:a},{x:o,y:a},{x:r,y:s},{x:o,y:s}])}return i}function x(t,e,n){const[r,o,s,a]=i.Util.getAxialAlignedBoundingBox(e,n);if(r===s||o===a)return[1,0,0,1,t[0],t[1]];const l=(t[2]-t[0])/(s-r),c=(t[3]-t[1])/(a-o);return[l,0,0,c,t[0]-r*l,t[1]-o*c]}e.AnnotationFactory=class{static createGlobals(t){return Promise.all([t.ensureCatalog("acroForm"),t.ensureDoc("xfaDatasets"),t.ensureCatalog("structTreeRoot"),t.ensureCatalog("baseUrl"),t.ensureCatalog("attachments")]).then((([e,n,i,r,o])=>({pdfManager:t,acroForm:e instanceof s.Dict?e:s.Dict.empty,xfaDatasets:n,structTreeRoot:i,baseUrl:r,attachments:o})),(t=>((0,i.warn)(`createGlobals: "${t}".`),null)))}static async create(t,e,n,i,r,o){const s=r?await this._getPageIndex(t,e,n.pdfManager):null;return n.pdfManager.ensure(this,"_create",[t,e,n,i,r,s,o])}static _create(t,e,n,o,a=!1,l=null,c=null){const h=t.fetchIfRef(e);if(!(h instanceof s.Dict))return;const{acroForm:u,pdfManager:d}=n,p=e instanceof s.Ref?e.toString():`annot_${o.createObjId()}`;let f=h.get("Subtype");f=f instanceof s.Name?f.name:null;const g={xref:t,ref:e,dict:h,subtype:f,id:p,annotationGlobals:n,collectFields:a,needAppearances:!a&&!0===u.get("NeedAppearances"),pageIndex:l,evaluatorOptions:d.evaluatorOptions,pageRef:c};switch(f){case"Link":return new I(g);case"Text":return new O(g);case"Widget":let t=(0,r.getInheritableProperty)({dict:h,key:"FT"});switch(t=t instanceof s.Name?t.name:null,t){case"Tx":return new A(g);case"Btn":return new E(g);case"Ch":return new T(g);case"Sig":return new M(g)}return(0,i.warn)(`Unimplemented widget field type "${t}", falling back to base field type.`),new k(g);case"Popup":return new D(g);case"FreeText":return new F(g);case"Line":return new P(g);case"Square":return new R(g);case"Circle":return new L(g);case"PolyLine":return new N(g);case"Polygon":return new B(g);case"Caret":return new j(g);case"Ink":return new z(g);case"Highlight":return new $(g);case"Underline":return new H(g);case"Squiggly":return new U(g);case"StrikeOut":return new V(g);case"Stamp":return new W(g);case"FileAttachment":return new q(g);default:return a||(f?(0,i.warn)(`Unimplemented annotation type "${f}", falling back to base annotation.`):(0,i.warn)("Annotation is missing the required /Subtype.")),new _(g)}}static async _getPageIndex(t,e,n){try{const r=await t.fetchIfRefAsync(e);if(!(r instanceof s.Dict))return-1;const o=r.getRaw("P");if(o instanceof s.Ref)try{return await n.ensureCatalog("getPageIndex",[o])}catch(t){(0,i.info)(`_getPageIndex -- not a valid page reference: "${t}".`)}if(r.has("Kids"))return-1;const a=await n.ensureDoc("numPages");for(let t=0;t<a;t++){const i=await n.getPage(t),r=await n.ensure(i,"annotations");for(const n of r)if(n instanceof s.Ref&&(0,s.isRefsEqual)(n,e))return t}}catch(t){(0,i.warn)(`_getPageIndex: "${t}".`)}return-1}static generateImages(t,e,n){if(!n)return(0,i.warn)("generateImages: OffscreenCanvas is not supported, cannot save or print some annotations with images."),null;let r;for(const{bitmapId:n,bitmap:i}of t)i&&(r||=new Map,r.set(n,W.createImage(i,e)));return r}static async saveNewAnnotations(t,e,n,r){const o=t.xref;let a;const l=[],c=[],{isOffscreenCanvasSupported:h}=t.options;for(const u of n)if(!u.deleted)switch(u.annotationType){case i.AnnotationEditorType.FREETEXT:if(!a){const t=new s.Dict(o);t.set("BaseFont",s.Name.get("Helvetica")),t.set("Type",s.Name.get("Font")),t.set("Subtype",s.Name.get("Type1")),t.set("Encoding",s.Name.get("WinAnsiEncoding"));const e=[];a=o.getNewTemporaryRef(),await(0,m.writeObject)(a,t,e,o),l.push({ref:a,data:e.join("")})}c.push(F.createNewAnnotation(o,u,l,{evaluator:t,task:e,baseFontRef:a}));break;case i.AnnotationEditorType.INK:c.push(z.createNewAnnotation(o,u,l));break;case i.AnnotationEditorType.STAMP:if(!h)break;const n=await r.get(u.bitmapId);if(n.imageStream){const{imageStream:t,smaskStream:e}=n,i=[];if(e){const n=o.getNewTemporaryRef();await(0,m.writeObject)(n,e,i,o),l.push({ref:n,data:i.join("")}),t.dict.set("SMask",n),i.length=0}const r=n.imageRef=o.getNewTemporaryRef();await(0,m.writeObject)(r,t,i,o),l.push({ref:r,data:i.join("")}),n.imageStream=n.smaskStream=null}c.push(W.createNewAnnotation(o,u,l,{image:n}))}return{annotations:await Promise.all(c),dependencies:l}}static async printNewAnnotations(t,e,n,r,o){if(!r)return null;const{options:s,xref:a}=e,l=[];for(const c of r)if(!c.deleted)switch(c.annotationType){case i.AnnotationEditorType.FREETEXT:l.push(F.createNewPrintAnnotation(t,a,c,{evaluator:e,task:n,evaluatorOptions:s}));break;case i.AnnotationEditorType.INK:l.push(z.createNewPrintAnnotation(t,a,c,{evaluatorOptions:s}));break;case i.AnnotationEditorType.STAMP:if(!s.isOffscreenCanvasSupported)break;const r=await o.get(c.bitmapId);if(r.imageStream){const{imageStream:t,smaskStream:e}=r;e&&t.dict.set("SMask",e),r.imageRef=new p.JpegStream(t,t.length),r.imageStream=r.smaskStream=null}l.push(W.createNewPrintAnnotation(t,a,c,{image:r,evaluatorOptions:s}))}return Promise.all(l)}};class _{constructor(t){const{dict:e,xref:n,annotationGlobals:o}=t;this.setTitle(e.get("T")),this.setContents(e.get("Contents")),this.setModificationDate(e.get("M")),this.setFlags(e.get("F")),this.setRectangle(e.getArray("Rect")),this.setColor(e.getArray("C")),this.setBorderStyle(e),this.setAppearance(e),this.setOptionalContent(e);const a=e.get("MK");this.setBorderAndBackgroundColors(a),this.setRotation(a,e),this.ref=t.ref instanceof s.Ref?t.ref:null,this._streams=[],this.appearance&&this._streams.push(this.appearance);const l=!!(this.flags&i.AnnotationFlag.LOCKED),c=!!(this.flags&i.AnnotationFlag.LOCKEDCONTENTS);if(o.structTreeRoot){let n=e.get("StructParent");n=Number.isInteger(n)&&n>=0?n:-1,o.structTreeRoot.addAnnotationIdToPage(t.pageRef,n)}if(this.data={annotationFlags:this.flags,borderStyle:this.borderStyle,color:this.color,backgroundColor:this.backgroundColor,borderColor:this.borderColor,rotation:this.rotation,contentsObj:this._contents,hasAppearance:!!this.appearance,id:t.id,modificationDate:this.modificationDate,rect:this.rectangle,subtype:t.subtype,hasOwnCanvas:!1,noRotate:!!(this.flags&i.AnnotationFlag.NOROTATE),noHTML:l&&c},t.collectFields){const o=e.get("Kids");if(Array.isArray(o)){const t=[];for(const e of o)e instanceof s.Ref&&t.push(e.toString());0!==t.length&&(this.data.kidIds=t)}this.data.actions=(0,r.collectActions)(n,e,i.AnnotationActionEventType),this.data.fieldName=this._constructFieldName(e),this.data.pageIndex=t.pageIndex}this._isOffscreenCanvasSupported=t.evaluatorOptions.isOffscreenCanvasSupported,this._fallbackFontDict=null,this._needAppearances=!1}_hasFlag(t,e){return!!(t&e)}_isViewable(t){return!this._hasFlag(t,i.AnnotationFlag.INVISIBLE)&&!this._hasFlag(t,i.AnnotationFlag.NOVIEW)}_isPrintable(t){return this._hasFlag(t,i.AnnotationFlag.PRINT)&&!this._hasFlag(t,i.AnnotationFlag.HIDDEN)&&!this._hasFlag(t,i.AnnotationFlag.INVISIBLE)}mustBeViewed(t,e){const n=t?.get(this.data.id)?.noView;return void 0!==n?!n:this.viewable&&!this._hasFlag(this.flags,i.AnnotationFlag.HIDDEN)}mustBePrinted(t){const e=t?.get(this.data.id)?.noPrint;return void 0!==e?!e:this.printable}get viewable(){return null!==this.data.quadPoints&&(0===this.flags||this._isViewable(this.flags))}get printable(){return null!==this.data.quadPoints&&0!==this.flags&&this._isPrintable(this.flags)}_parseStringHelper(t){const e="string"==typeof t?(0,i.stringToPDFString)(t):"";return{str:e,dir:e&&"rtl"===(0,c.bidi)(e).dir?"rtl":"ltr"}}setDefaultAppearance(t){const{dict:e,annotationGlobals:n}=t,i=(0,r.getInheritableProperty)({dict:e,key:"DA"})||n.acroForm.get("DA");this._defaultAppearance="string"==typeof i?i:"",this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance)}setTitle(t){this._title=this._parseStringHelper(t)}setContents(t){this._contents=this._parseStringHelper(t)}setModificationDate(t){this.modificationDate="string"==typeof t?t:null}setFlags(t){this.flags=Number.isInteger(t)&&t>0?t:0}hasFlag(t){return this._hasFlag(this.flags,t)}setRectangle(t){this.rectangle=Array.isArray(t)&&4===t.length?i.Util.normalizeRect(t):[0,0,0,0]}setColor(t){this.color=v(t)}setLineEndings(t){if(this.lineEndings=["None","None"],Array.isArray(t)&&2===t.length)for(let e=0;e<2;e++){const n=t[e];if(n instanceof s.Name)switch(n.name){case"None":continue;case"Square":case"Circle":case"Diamond":case"OpenArrow":case"ClosedArrow":case"Butt":case"ROpenArrow":case"RClosedArrow":case"Slash":this.lineEndings[e]=n.name;continue}(0,i.warn)(`Ignoring invalid lineEnding: ${n}`)}}setRotation(t,e){this.rotation=0;let n=t instanceof s.Dict?t.get("R")||0:e.get("Rotate")||0;Number.isInteger(n)&&0!==n&&(n%=360,n<0&&(n+=360),n%90==0&&(this.rotation=n))}setBorderAndBackgroundColors(t){t instanceof s.Dict?(this.borderColor=v(t.getArray("BC"),null),this.backgroundColor=v(t.getArray("BG"),null)):this.borderColor=this.backgroundColor=null}setBorderStyle(t){if(this.borderStyle=new S,t instanceof s.Dict)if(t.has("BS")){const e=t.get("BS"),n=e.get("Type");n&&!(0,s.isName)(n,"Border")||(this.borderStyle.setWidth(e.get("W"),this.rectangle),this.borderStyle.setStyle(e.get("S")),this.borderStyle.setDashArray(e.getArray("D")))}else if(t.has("Border")){const e=t.getArray("Border");Array.isArray(e)&&e.length>=3&&(this.borderStyle.setHorizontalCornerRadius(e[0]),this.borderStyle.setVerticalCornerRadius(e[1]),this.borderStyle.setWidth(e[2],this.rectangle),4===e.length&&this.borderStyle.setDashArray(e[3],!0))}else this.borderStyle.setWidth(0)}setAppearance(t){this.appearance=null;const e=t.get("AP");if(!(e instanceof s.Dict))return;const n=e.get("N");if(n instanceof l.BaseStream)return void(this.appearance=n);if(!(n instanceof s.Dict))return;const i=t.get("AS");if(!(i instanceof s.Name&&n.has(i.name)))return;const r=n.get(i.name);r instanceof l.BaseStream&&(this.appearance=r)}setOptionalContent(t){this.oc=null;const e=t.get("OC");e instanceof s.Name?(0,i.warn)("setOptionalContent: Support for /Name-entry is not implemented."):e instanceof s.Dict&&(this.oc=e)}loadResources(t,e){return e.dict.getAsync("Resources").then((e=>{if(e)return new f.ObjectLoader(e,t,e.xref).load().then((function(){return e}))}))}async getOperatorList(t,e,n,r,o){const l=this.data;let c=this.appearance;const h=!!(this.data.hasOwnCanvas&&n&i.RenderingIntentFlag.DISPLAY);if(!c){if(!h)return{opList:new g.OperatorList,separateForm:!1,separateCanvas:!1};c=new a.StringStream(""),c.dict=new s.Dict}const u=c.dict,d=await this.loadResources(["ExtGState","ColorSpace","Pattern","Shading","XObject","Font"],c),p=u.getArray("BBox")||[0,0,1,1],f=u.getArray("Matrix")||[1,0,0,1,0,0],m=x(l.rect,p,f),y=new g.OperatorList;let v;return this.oc&&(v=await t.parseMarkedContentProps(this.oc,null)),void 0!==v&&y.addOp(i.OPS.beginMarkedContentProps,["OC",v]),y.addOp(i.OPS.beginAnnotation,[l.id,l.rect,m,f,h]),await t.getOperatorList({stream:c,task:e,resources:d,operatorList:y,fallbackFontDict:this._fallbackFontDict}),y.addOp(i.OPS.endAnnotation,[]),void 0!==v&&y.addOp(i.OPS.endMarkedContent,[]),this.reset(),{opList:y,separateForm:!1,separateCanvas:h}}async save(t,e,n){return null}get hasTextContent(){return!1}async extractTextContent(t,e,n){if(!this.appearance)return;const r=await this.loadResources(["ExtGState","Font","Properties","XObject"],this.appearance),o=[],s=[];let a=null;const l={desiredSize:Math.Infinity,ready:!0,enqueue(t,e){for(const e of t.items)void 0!==e.str&&(a||=e.transform.slice(-2),s.push(e.str),e.hasEOL&&(o.push(s.join("")),s.length=0))}};if(await t.getTextContent({stream:this.appearance,task:e,resources:r,includeMarkedContent:!0,sink:l,viewBox:n}),this.reset(),s.length&&o.push(s.join("")),o.length>1||o[0]){const t=this.appearance.dict,e=t.getArray("BBox")||[0,0,1,1],n=t.getArray("Matrix")||[1,0,0,1,0,0],r=this.data.rect,s=x(r,e,n);s[4]-=r[0],s[5]-=r[1],a=i.Util.applyTransform(a,s),a=i.Util.applyTransform(a,n),this.data.textPosition=a,this.data.textContent=o}}getFieldObject(){return this.data.kidIds?{id:this.data.id,actions:this.data.actions,name:this.data.fieldName,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,type:"",kidIds:this.data.kidIds,page:this.data.pageIndex,rotation:this.rotation}:null}reset(){for(const t of this._streams)t.reset()}_constructFieldName(t){if(!t.has("T")&&!t.has("Parent"))return(0,i.warn)("Unknown field name, falling back to empty field name."),"";if(!t.has("Parent"))return(0,i.stringToPDFString)(t.get("T"));const e=[];t.has("T")&&e.unshift((0,i.stringToPDFString)(t.get("T")));let n=t;const r=new s.RefSet;for(t.objId&&r.put(t.objId);n.has("Parent")&&(n=n.get("Parent"),n instanceof s.Dict&&(!n.objId||!r.has(n.objId)));)n.objId&&r.put(n.objId),n.has("T")&&e.unshift((0,i.stringToPDFString)(n.get("T")));return e.join(".")}}e.Annotation=_;class S{constructor(){this.width=1,this.style=i.AnnotationBorderStyleType.SOLID,this.dashArray=[3],this.horizontalCornerRadius=0,this.verticalCornerRadius=0}setWidth(t,e=[0,0,0,0]){if(t instanceof s.Name)this.width=0;else if("number"==typeof t){if(t>0){const n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;n>0&&r>0&&(t>n||t>r)&&((0,i.warn)(`AnnotationBorderStyle.setWidth - ignoring width: ${t}`),t=1)}this.width=t}}setStyle(t){if(t instanceof s.Name)switch(t.name){case"S":this.style=i.AnnotationBorderStyleType.SOLID;break;case"D":this.style=i.AnnotationBorderStyleType.DASHED;break;case"B":this.style=i.AnnotationBorderStyleType.BEVELED;break;case"I":this.style=i.AnnotationBorderStyleType.INSET;break;case"U":this.style=i.AnnotationBorderStyleType.UNDERLINE}}setDashArray(t,e=!1){if(Array.isArray(t)&&t.length>0){let n=!0,i=!0;for(const e of t){if(!(+e>=0)){n=!1;break}e>0&&(i=!1)}n&&!i?(this.dashArray=t,e&&this.setStyle(s.Name.get("D"))):this.width=0}else t&&(this.width=0)}setHorizontalCornerRadius(t){Number.isInteger(t)&&(this.horizontalCornerRadius=t)}setVerticalCornerRadius(t){Number.isInteger(t)&&(this.verticalCornerRadius=t)}}e.AnnotationBorderStyle=S;class C extends _{constructor(t){super(t);const{dict:e}=t;if(e.has("IRT")){const t=e.getRaw("IRT");this.data.inReplyTo=t instanceof s.Ref?t.toString():null;const n=e.get("RT");this.data.replyType=n instanceof s.Name?n.name:i.AnnotationReplyType.REPLY}let n=null;if(this.data.replyType===i.AnnotationReplyType.GROUP){const t=e.get("IRT");this.setTitle(t.get("T")),this.data.titleObj=this._title,this.setContents(t.get("Contents")),this.data.contentsObj=this._contents,t.has("CreationDate")?(this.setCreationDate(t.get("CreationDate")),this.data.creationDate=this.creationDate):this.data.creationDate=null,t.has("M")?(this.setModificationDate(t.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,n=t.getRaw("Popup"),t.has("C")?(this.setColor(t.getArray("C")),this.data.color=this.color):this.data.color=null}else this.data.titleObj=this._title,this.setCreationDate(e.get("CreationDate")),this.data.creationDate=this.creationDate,n=e.getRaw("Popup"),e.has("C")||(this.data.color=null);this.data.popupRef=n instanceof s.Ref?n.toString():null,e.has("RC")&&(this.data.richText=y.XFAFactory.getRichTextAsHtml(e.get("RC")))}setCreationDate(t){this.creationDate="string"==typeof t?t:null}_setDefaultAppearance({xref:t,extra:e,strokeColor:n,fillColor:i,blendMode:r,strokeAlpha:o,fillAlpha:l,pointsCallback:c}){let h=Number.MAX_VALUE,u=Number.MAX_VALUE,d=Number.MIN_VALUE,p=Number.MIN_VALUE;const f=["q"];e&&f.push(e),n&&f.push(`${n[0]} ${n[1]} ${n[2]} RG`),i&&f.push(`${i[0]} ${i[1]} ${i[2]} rg`);let g=this.data.quadPoints;g||(g=[[{x:this.rectangle[0],y:this.rectangle[3]},{x:this.rectangle[2],y:this.rectangle[3]},{x:this.rectangle[0],y:this.rectangle[1]},{x:this.rectangle[2],y:this.rectangle[1]}]]);for(const t of g){const[e,n,i,r]=c(f,t);h=Math.min(h,e),d=Math.max(d,n),u=Math.min(u,i),p=Math.max(p,r)}f.push("Q");const m=new s.Dict(t),y=new s.Dict(t);y.set("Subtype",s.Name.get("Form"));const v=new a.StringStream(f.join(" "));v.dict=y,m.set("Fm0",v);const b=new s.Dict(t);r&&b.set("BM",s.Name.get(r)),"number"==typeof o&&b.set("CA",o),"number"==typeof l&&b.set("ca",l);const w=new s.Dict(t);w.set("GS0",b);const x=new s.Dict(t);x.set("ExtGState",w),x.set("XObject",m);const _=new s.Dict(t);_.set("Resources",x);const S=this.data.rect=[h,u,d,p];_.set("BBox",S),this.appearance=new a.StringStream("/GS0 gs /Fm0 Do"),this.appearance.dict=_,this._streams.push(this.appearance,v)}static async createNewAnnotation(t,e,n,i){const r=e.ref||=t.getNewTemporaryRef(),o=await this.createNewAppearanceStream(e,t,i),s=[];let a;if(o){const i=t.getNewTemporaryRef();a=this.createNewDict(e,t,{apRef:i}),await(0,m.writeObject)(i,o,s,t),n.push({ref:i,data:s.join("")})}else a=this.createNewDict(e,t,{});return Number.isInteger(e.parentTreeId)&&a.set("StructParent",e.parentTreeId),s.length=0,await(0,m.writeObject)(r,a,s,t),{ref:r,data:s.join("")}}static async createNewPrintAnnotation(t,e,n,i){const r=await this.createNewAppearanceStream(n,e,i),o=this.createNewDict(n,e,{ap:r}),s=new this.prototype.constructor({dict:o,xref:e,annotationGlobals:t,evaluatorOptions:i.evaluatorOptions});return n.ref&&(s.ref=s.refToReplace=n.ref),s}}e.MarkupAnnotation=C;class k extends _{constructor(t){super(t);const{dict:e,xref:n,annotationGlobals:o}=t,a=this.data;this._needAppearances=t.needAppearances,a.annotationType=i.AnnotationType.WIDGET,void 0===a.fieldName&&(a.fieldName=this._constructFieldName(e)),void 0===a.actions&&(a.actions=(0,r.collectActions)(n,e,i.AnnotationActionEventType));let l=(0,r.getInheritableProperty)({dict:e,key:"V",getArray:!0});a.fieldValue=this._decodeFormValue(l);const c=(0,r.getInheritableProperty)({dict:e,key:"DV",getArray:!0});if(a.defaultFieldValue=this._decodeFormValue(c),void 0===l&&o.xfaDatasets){const t=this._title.str;t&&(this._hasValueFromXFA=!0,a.fieldValue=l=o.xfaDatasets.getValue(t))}void 0===l&&null!==a.defaultFieldValue&&(a.fieldValue=a.defaultFieldValue),a.alternativeText=(0,i.stringToPDFString)(e.get("TU")||""),this.setDefaultAppearance(t),a.hasAppearance||=this._needAppearances&&void 0!==a.fieldValue&&null!==a.fieldValue;const h=(0,r.getInheritableProperty)({dict:e,key:"FT"});a.fieldType=h instanceof s.Name?h.name:null;const u=(0,r.getInheritableProperty)({dict:e,key:"DR"}),d=o.acroForm.get("DR"),p=this.appearance?.dict.get("Resources");this._fieldResources={localResources:u,acroFormResources:d,appearanceResources:p,mergedResources:s.Dict.merge({xref:n,dictArray:[u,p,d],mergeSubDicts:!0})},a.fieldFlags=(0,r.getInheritableProperty)({dict:e,key:"Ff"}),(!Number.isInteger(a.fieldFlags)||a.fieldFlags<0)&&(a.fieldFlags=0),a.readOnly=this.hasFieldFlag(i.AnnotationFieldFlag.READONLY),a.required=this.hasFieldFlag(i.AnnotationFieldFlag.REQUIRED),a.hidden=this._hasFlag(a.annotationFlags,i.AnnotationFlag.HIDDEN)||this._hasFlag(a.annotationFlags,i.AnnotationFlag.NOVIEW)}_decodeFormValue(t){return Array.isArray(t)?t.filter((t=>"string"==typeof t)).map((t=>(0,i.stringToPDFString)(t))):t instanceof s.Name?(0,i.stringToPDFString)(t.name):"string"==typeof t?(0,i.stringToPDFString)(t):null}hasFieldFlag(t){return!!(this.data.fieldFlags&t)}_isViewable(t){return!this._hasFlag(t,i.AnnotationFlag.INVISIBLE)}mustBeViewed(t,e){return e?this.viewable:super.mustBeViewed(t,e)&&!this._hasFlag(this.flags,i.AnnotationFlag.NOVIEW)}getRotationMatrix(t){let e=t?.get(this.data.id)?.rotation;if(void 0===e&&(e=this.rotation),0===e)return i.IDENTITY_MATRIX;const n=this.data.rect[2]-this.data.rect[0],o=this.data.rect[3]-this.data.rect[1];return(0,r.getRotationMatrix)(e,n,o)}getBorderAndBackgroundAppearances(t){let e=t?.get(this.data.id)?.rotation;if(void 0===e&&(e=this.rotation),!this.backgroundColor&&!this.borderColor)return"";const n=this.data.rect[2]-this.data.rect[0],i=this.data.rect[3]-this.data.rect[1],r=0===e||180===e?`0 0 ${n} ${i} re`:`0 0 ${i} ${n} re`;let s="";return this.backgroundColor&&(s=`${(0,o.getPdfColor)(this.backgroundColor,!0)} ${r} f `),this.borderColor&&(s+=`${this.borderStyle.width||1} w ${(0,o.getPdfColor)(this.borderColor,!1)} ${r} S `),s}async getOperatorList(t,e,n,r,o){if(r&&!(this instanceof M)&&!this.data.noHTML&&!this.data.hasOwnCanvas)return{opList:new g.OperatorList,separateForm:!0,separateCanvas:!1};if(!this._hasText)return super.getOperatorList(t,e,n,r,o);const s=await this._getAppearance(t,e,n,o);if(this.appearance&&null===s)return super.getOperatorList(t,e,n,r,o);const l=new g.OperatorList;if(!this._defaultAppearance||null===s)return{opList:l,separateForm:!1,separateCanvas:!1};const c=!!(this.data.hasOwnCanvas&&n&i.RenderingIntentFlag.DISPLAY),h=[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]],u=x(this.data.rect,h,[1,0,0,1,0,0]);let d;this.oc&&(d=await t.parseMarkedContentProps(this.oc,null)),void 0!==d&&l.addOp(i.OPS.beginMarkedContentProps,["OC",d]),l.addOp(i.OPS.beginAnnotation,[this.data.id,this.data.rect,u,this.getRotationMatrix(o),c]);const p=new a.StringStream(s);return await t.getOperatorList({stream:p,task:e,resources:this._fieldResources.mergedResources,operatorList:l}),l.addOp(i.OPS.endAnnotation,[]),void 0!==d&&l.addOp(i.OPS.endMarkedContent,[]),{opList:l,separateForm:!1,separateCanvas:c}}_getMKDict(t){const e=new s.Dict(null);return t&&e.set("R",t),this.borderColor&&e.set("BC",b(this.borderColor)),this.backgroundColor&&e.set("BG",b(this.backgroundColor)),e.size>0?e:null}amendSavedDict(t,e){}async save(t,e,n){const o=n?.get(this.data.id);let l=o?.value,c=o?.rotation;if(l===this.data.fieldValue||void 0===l){if(!this._hasValueFromXFA&&void 0===c)return null;l||=this.data.fieldValue}if(void 0===c&&!this._hasValueFromXFA&&Array.isArray(l)&&Array.isArray(this.data.fieldValue)&&l.length===this.data.fieldValue.length&&l.every(((t,e)=>t===this.data.fieldValue[e])))return null;void 0===c&&(c=this.rotation);let h=null;if(!this._needAppearances&&(h=await this._getAppearance(t,e,i.RenderingIntentFlag.SAVE,n),null===h))return null;let u=!1;h?.needAppearances&&(u=!0,h=null);const{xref:d}=t,p=d.fetchIfRef(this.ref);if(!(p instanceof s.Dict))return null;const f=new s.Dict(d);for(const t of p.getKeys())"AP"!==t&&f.set(t,p.getRaw(t));const g={path:this.data.fieldName,value:l},y=t=>(0,r.isAscii)(t)?t:(0,r.stringToUTF16String)(t,!0);f.set("V",Array.isArray(l)?l.map(y):y(l)),this.amendSavedDict(n,f);const v=this._getMKDict(c);v&&f.set("MK",v);const b=[],w=[{ref:this.ref,data:"",xfa:g,needAppearances:u}];if(null!==h){const t=d.getNewTemporaryRef(),e=new s.Dict(d);f.set("AP",e),e.set("N",t);const r=this._getSaveFieldResources(d),o=new a.StringStream(h),l=o.dict=new s.Dict(d);l.set("Subtype",s.Name.get("Form")),l.set("Resources",r),l.set("BBox",[0,0,this.data.rect[2]-this.data.rect[0],this.data.rect[3]-this.data.rect[1]]);const c=this.getRotationMatrix(n);c!==i.IDENTITY_MATRIX&&l.set("Matrix",c),await(0,m.writeObject)(t,o,b,d),w.push({ref:t,data:b.join(""),xfa:null,needAppearances:!1}),b.length=0}return f.set("M",`D:${(0,i.getModificationDate)()}`),await(0,m.writeObject)(this.ref,f,b,d),w[0].data=b.join(""),w}async _getAppearance(t,e,n,s){if(this.hasFieldFlag(i.AnnotationFieldFlag.PASSWORD))return null;const a=s?.get(this.data.id);let l,c;if(a&&(l=a.formattedValue||a.value,c=a.rotation),void 0===c&&void 0===l&&!this._needAppearances&&(!this._hasValueFromXFA||this.appearance))return null;const h=this.getBorderAndBackgroundAppearances(s);if(void 0===l&&(l=this.data.fieldValue,!l))return`/Tx BMC q ${h}Q EMC`;if(Array.isArray(l)&&1===l.length&&(l=l[0]),(0,i.assert)("string"==typeof l,"Expected `value` to be a string."),l=l.trim(),this.data.combo){const t=this.data.options.find((({exportValue:t})=>l===t));l=t?.displayValue||l}if(""===l)return`/Tx BMC q ${h}Q EMC`;void 0===c&&(c=this.rotation);let u,d=-1;this.data.multiLine?(u=l.split(/\r\n?|\n/).map((t=>t.normalize("NFC"))),d=u.length):u=[l.replace(/\r\n?|\n/,"").normalize("NFC")];let p=this.data.rect[3]-this.data.rect[1],f=this.data.rect[2]-this.data.rect[0];90!==c&&270!==c||([f,p]=[p,f]),this._defaultAppearance||(this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));let g,m,y,v=await k._getFontData(t,e,this.data.defaultAppearanceData,this._fieldResources.mergedResources);const b=[];let w=!1;for(const t of u){const e=v.encodeString(t);e.length>1&&(w=!0),b.push(e.join(""))}if(w&&n&i.RenderingIntentFlag.SAVE)return{needAppearances:!0};if(w&&this._isOffscreenCanvasSupported){const n=this.data.comb?"monospace":"sans-serif",i=new o.FakeUnicodeFont(t.xref,n),s=i.createFontResources(u.join("")),a=s.getRaw("Font");if(this._fieldResources.mergedResources.has("Font")){const t=this._fieldResources.mergedResources.get("Font");for(const e of a.getKeys())t.set(e,a.getRaw(e))}else this._fieldResources.mergedResources.set("Font",a);const c=i.fontName.name;v=await k._getFontData(t,e,{fontName:c,fontSize:0},s);for(let t=0,e=b.length;t<e;t++)b[t]=(0,r.stringToUTF16String)(u[t]);const h=Object.assign(Object.create(null),this.data.defaultAppearanceData);this.data.defaultAppearanceData.fontSize=0,this.data.defaultAppearanceData.fontName=c,[g,m,y]=this._computeFontSize(p-2,f-4,l,v,d),this.data.defaultAppearanceData=h}else this._isOffscreenCanvasSupported||(0,i.warn)("_getAppearance: OffscreenCanvas is not supported, annotation may not render correctly."),[g,m,y]=this._computeFontSize(p-2,f-4,l,v,d);let x=v.descent;x=isNaN(x)?i.BASELINE_FACTOR*y:Math.max(i.BASELINE_FACTOR*y,Math.abs(x)*m);const _=Math.min(Math.floor((p-m)/2),1),S=this.data.textAlignment;if(this.data.multiLine)return this._getMultilineAppearance(g,b,v,m,f,p,S,2,_,x,y,s);if(this.data.comb)return this._getCombAppearance(g,v,b[0],m,f,p,2,_,x,y,s);const C=_+x;return 0===S||S>2?`/Tx BMC q ${h}BT `+g+` 1 0 0 1 ${(0,r.numberToString)(2)} ${(0,r.numberToString)(C)} Tm (${(0,r.escapeString)(b[0])}) Tj ET Q EMC`:`/Tx BMC q ${h}BT `+g+` 1 0 0 1 0 0 Tm ${this._renderText(b[0],v,m,f,S,{shift:0},2,C)} ET Q EMC`}static async _getFontData(t,e,n,i){const r=new g.OperatorList,o={font:null,clone(){return this}},{fontName:a,fontSize:l}=n;return await t.handleSetFont(i,[a&&s.Name.get(a),l],null,r,e,o,null),o.font}_getTextWidth(t,e){return e.charsToGlyphs(t).reduce(((t,e)=>t+e.width),0)/1e3}_computeFontSize(t,e,n,r,s){let{fontSize:a}=this.data.defaultAppearanceData,l=(a||12)*i.LINE_FACTOR,c=Math.round(t/l);if(!a){const h=t=>Math.floor(100*t)/100;if(-1===s){const o=this._getTextWidth(n,r);a=h(Math.min(t/i.LINE_FACTOR,o>e?e/o:1/0)),c=1}else{const o=n.split(/\r\n?|\n/),u=[];for(const t of o){const e=r.encodeString(t).join(""),n=r.charsToGlyphs(e),i=r.getCharPositions(e);u.push({line:e,glyphs:n,positions:i})}const d=n=>{let i=0;for(const o of u)if(i+=this._splitLine(null,r,n,e,o).length*n,i>t)return!0;return!1};for(c=Math.max(c,s);l=t/c,a=h(l/i.LINE_FACTOR),d(a);)c++}const{fontName:u,fontColor:d}=this.data.defaultAppearanceData;this._defaultAppearance=(0,o.createDefaultAppearance)({fontSize:a,fontName:u,fontColor:d})}return[this._defaultAppearance,a,t/c]}_renderText(t,e,n,i,o,s,a,l){let c;c=1===o?(i-this._getTextWidth(t,e)*n)/2:2===o?i-this._getTextWidth(t,e)*n-a:a;const h=(0,r.numberToString)(c-s.shift);return s.shift=c,`${h} ${l=(0,r.numberToString)(l)} Td (${(0,r.escapeString)(t)}) Tj`}_getSaveFieldResources(t){const{localResources:e,appearanceResources:n,acroFormResources:i}=this._fieldResources,r=this.data.defaultAppearanceData?.fontName;if(!r)return e||s.Dict.empty;for(const t of[e,n])if(t instanceof s.Dict){const e=t.get("Font");if(e instanceof s.Dict&&e.has(r))return t}if(i instanceof s.Dict){const n=i.get("Font");if(n instanceof s.Dict&&n.has(r)){const i=new s.Dict(t);i.set(r,n.getRaw(r));const o=new s.Dict(t);return o.set("Font",i),s.Dict.merge({xref:t,dictArray:[o,e],mergeSubDicts:!0})}}return e||s.Dict.empty}getFieldObject(){return null}}class A extends k{constructor(t){super(t),this.data.hasOwnCanvas=this.data.readOnly&&!this.data.noHTML,this._hasText=!0;const e=t.dict;"string"!=typeof this.data.fieldValue&&(this.data.fieldValue="");let n=(0,r.getInheritableProperty)({dict:e,key:"Q"});(!Number.isInteger(n)||n<0||n>2)&&(n=null),this.data.textAlignment=n;let o=(0,r.getInheritableProperty)({dict:e,key:"MaxLen"});(!Number.isInteger(o)||o<0)&&(o=0),this.data.maxLen=o,this.data.multiLine=this.hasFieldFlag(i.AnnotationFieldFlag.MULTILINE),this.data.comb=this.hasFieldFlag(i.AnnotationFieldFlag.COMB)&&!this.hasFieldFlag(i.AnnotationFieldFlag.MULTILINE)&&!this.hasFieldFlag(i.AnnotationFieldFlag.PASSWORD)&&!this.hasFieldFlag(i.AnnotationFieldFlag.FILESELECT)&&0!==this.data.maxLen,this.data.doNotScroll=this.hasFieldFlag(i.AnnotationFieldFlag.DONOTSCROLL)}get hasTextContent(){return!!this.appearance&&!this._needAppearances}_getCombAppearance(t,e,n,i,o,s,a,l,c,h,u){const d=o/this.data.maxLen,p=this.getBorderAndBackgroundAppearances(u),f=[],g=e.getCharPositions(n);for(const[t,e]of g)f.push(`(${(0,r.escapeString)(n.substring(t,e))}) Tj`);const m=f.join(` ${(0,r.numberToString)(d)} 0 Td `);return`/Tx BMC q ${p}BT `+t+` 1 0 0 1 ${(0,r.numberToString)(a)} ${(0,r.numberToString)(l+c)} Tm ${m} ET Q EMC`}_getMultilineAppearance(t,e,n,i,o,s,a,l,c,h,u,d){const p=[],f=o-2*l,g={shift:0};for(let t=0,r=e.length;t<r;t++){const r=e[t],s=this._splitLine(r,n,i,f);for(let e=0,r=s.length;e<r;e++){const r=s[e],d=0===t&&0===e?-c-(u-h):-u;p.push(this._renderText(r,n,i,o,a,g,l,d))}}const m=this.getBorderAndBackgroundAppearances(d),y=p.join("\n");return`/Tx BMC q ${m}BT `+t+` 1 0 0 1 0 ${(0,r.numberToString)(s)} Tm ${y} ET Q EMC`}_splitLine(t,e,n,i,r={}){t=r.line||t;const o=r.glyphs||e.charsToGlyphs(t);if(o.length<=1)return[t];const s=r.positions||e.getCharPositions(t),a=n/1e3,l=[];let c=-1,h=-1,u=-1,d=0,p=0;for(let e=0,n=o.length;e<n;e++){const[n,r]=s[e],f=o[e],g=f.width*a;" "===f.unicode?p+g>i?(l.push(t.substring(d,n)),d=n,p=g,c=-1,u=-1):(p+=g,c=n,h=r,u=e):p+g>i?-1!==c?(l.push(t.substring(d,h)),d=h,e=u+1,c=-1,p=0):(l.push(t.substring(d,n)),d=n,p=g):p+=g}return d<t.length&&l.push(t.substring(d,t.length)),l}getFieldObject(){return{id:this.data.id,value:this.data.fieldValue,defaultValue:this.data.defaultFieldValue||"",multiline:this.data.multiLine,password:this.hasFieldFlag(i.AnnotationFieldFlag.PASSWORD),charLimit:this.data.maxLen,comb:this.data.comb,editable:!this.data.readOnly,hidden:this.data.hidden,name:this.data.fieldName,rect:this.data.rect,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:"text"}}}class E extends k{constructor(t){super(t),this.checkedAppearance=null,this.uncheckedAppearance=null,this.data.checkBox=!this.hasFieldFlag(i.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),this.data.radioButton=this.hasFieldFlag(i.AnnotationFieldFlag.RADIO)&&!this.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),this.data.pushButton=this.hasFieldFlag(i.AnnotationFieldFlag.PUSHBUTTON),this.data.isTooltipOnly=!1,this.data.checkBox?this._processCheckBox(t):this.data.radioButton?this._processRadioButton(t):this.data.pushButton?(this.data.hasOwnCanvas=!0,this._processPushButton(t)):(0,i.warn)("Invalid field flags for button widget annotation")}async getOperatorList(t,e,n,r,o){if(this.data.pushButton)return super.getOperatorList(t,e,n,!1,o);let s=null,a=null;if(o){const t=o.get(this.data.id);s=t?t.value:null,a=t?t.rotation:null}if(null===s&&this.appearance)return super.getOperatorList(t,e,n,r,o);null==s&&(s=this.data.checkBox?this.data.fieldValue===this.data.exportValue:this.data.fieldValue===this.data.buttonValue);const l=s?this.checkedAppearance:this.uncheckedAppearance;if(l){const s=this.appearance,c=l.dict.getArray("Matrix")||i.IDENTITY_MATRIX;a&&l.dict.set("Matrix",this.getRotationMatrix(o)),this.appearance=l;const h=super.getOperatorList(t,e,n,r,o);return this.appearance=s,l.dict.set("Matrix",c),h}return{opList:new g.OperatorList,separateForm:!1,separateCanvas:!1}}async save(t,e,n){return this.data.checkBox?this._saveCheckbox(t,e,n):this.data.radioButton?this._saveRadioButton(t,e,n):null}async _saveCheckbox(t,e,n){if(!n)return null;const r=n.get(this.data.id);let o=r?.rotation,a=r?.value;if(void 0===o){if(void 0===a)return null;if(this.data.fieldValue===this.data.exportValue===a)return null}const l=t.xref.fetchIfRef(this.ref);if(!(l instanceof s.Dict))return null;void 0===o&&(o=this.rotation),void 0===a&&(a=this.data.fieldValue===this.data.exportValue);const c={path:this.data.fieldName,value:a?this.data.exportValue:""},h=s.Name.get(a?this.data.exportValue:"Off");l.set("V",h),l.set("AS",h),l.set("M",`D:${(0,i.getModificationDate)()}`);const u=this._getMKDict(o);u&&l.set("MK",u);const d=[];return await(0,m.writeObject)(this.ref,l,d,t.xref),[{ref:this.ref,data:d.join(""),xfa:c}]}async _saveRadioButton(t,e,n){if(!n)return null;const r=n.get(this.data.id);let o=r?.rotation,a=r?.value;if(void 0===o){if(void 0===a)return null;if(this.data.fieldValue===this.data.buttonValue===a)return null}const l=t.xref.fetchIfRef(this.ref);if(!(l instanceof s.Dict))return null;void 0===a&&(a=this.data.fieldValue===this.data.buttonValue),void 0===o&&(o=this.rotation);const c={path:this.data.fieldName,value:a?this.data.buttonValue:""},h=s.Name.get(a?this.data.buttonValue:"Off"),u=[];let d=null;if(a)if(this.parent instanceof s.Ref){const e=t.xref.fetch(this.parent);e.set("V",h),await(0,m.writeObject)(this.parent,e,u,t.xref),d=u.join(""),u.length=0}else this.parent instanceof s.Dict&&this.parent.set("V",h);l.set("AS",h),l.set("M",`D:${(0,i.getModificationDate)()}`);const p=this._getMKDict(o);p&&l.set("MK",p),await(0,m.writeObject)(this.ref,l,u,t.xref);const f=[{ref:this.ref,data:u.join(""),xfa:c}];return d&&f.push({ref:this.parent,data:d,xfa:null}),f}_getDefaultCheckedAppearance(t,e){const n=this.data.rect[2]-this.data.rect[0],o=this.data.rect[3]-this.data.rect[1],l=[0,0,n,o],c=.8*Math.min(n,o);let h,u;"check"===e?(h={width:.755*c,height:.705*c},u="3"):"disc"===e?(h={width:.791*c,height:.705*c},u="l"):(0,i.unreachable)(`_getDefaultCheckedAppearance - unsupported type: ${e}`);const d=`q BT /PdfJsZaDb ${c} Tf 0 g ${(0,r.numberToString)((n-h.width)/2)} ${(0,r.numberToString)((o-h.height)/2)} Td (${u}) Tj ET Q`,p=new s.Dict(t.xref);p.set("FormType",1),p.set("Subtype",s.Name.get("Form")),p.set("Type",s.Name.get("XObject")),p.set("BBox",l),p.set("Matrix",[1,0,0,1,0,0]),p.set("Length",d.length);const f=new s.Dict(t.xref),g=new s.Dict(t.xref);g.set("PdfJsZaDb",this.fallbackFontDict),f.set("Font",g),p.set("Resources",f),this.checkedAppearance=new a.StringStream(d),this.checkedAppearance.dict=p,this._streams.push(this.checkedAppearance)}_processCheckBox(t){const e=t.dict.get("AP");if(!(e instanceof s.Dict))return;const n=e.get("N");if(!(n instanceof s.Dict))return;const i=this._decodeFormValue(t.dict.get("AS"));"string"==typeof i&&(this.data.fieldValue=i);const r=null!==this.data.fieldValue&&"Off"!==this.data.fieldValue?this.data.fieldValue:"Yes",o=n.getKeys();if(0===o.length)o.push("Off",r);else if(1===o.length)"Off"===o[0]?o.push(r):o.unshift("Off");else if(o.includes(r))o.length=0,o.push("Off",r);else{const t=o.find((t=>"Off"!==t));o.length=0,o.push("Off",t)}o.includes(this.data.fieldValue)||(this.data.fieldValue="Off"),this.data.exportValue=o[1];const a=n.get(this.data.exportValue);this.checkedAppearance=a instanceof l.BaseStream?a:null;const c=n.get("Off");this.uncheckedAppearance=c instanceof l.BaseStream?c:null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"check"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict,null===this.data.defaultFieldValue&&(this.data.defaultFieldValue="Off")}_processRadioButton(t){this.data.fieldValue=this.data.buttonValue=null;const e=t.dict.get("Parent");if(e instanceof s.Dict){this.parent=t.dict.getRaw("Parent");const n=e.get("V");n instanceof s.Name&&(this.data.fieldValue=this._decodeFormValue(n))}const n=t.dict.get("AP");if(!(n instanceof s.Dict))return;const i=n.get("N");if(!(i instanceof s.Dict))return;for(const t of i.getKeys())if("Off"!==t){this.data.buttonValue=this._decodeFormValue(t);break}const r=i.get(this.data.buttonValue);this.checkedAppearance=r instanceof l.BaseStream?r:null;const o=i.get("Off");this.uncheckedAppearance=o instanceof l.BaseStream?o:null,this.checkedAppearance?this._streams.push(this.checkedAppearance):this._getDefaultCheckedAppearance(t,"disc"),this.uncheckedAppearance&&this._streams.push(this.uncheckedAppearance),this._fallbackFontDict=this.fallbackFontDict,null===this.data.defaultFieldValue&&(this.data.defaultFieldValue="Off")}_processPushButton(t){const{dict:e,annotationGlobals:n}=t;e.has("A")||e.has("AA")||this.data.alternativeText?(this.data.isTooltipOnly=!e.has("A")&&!e.has("AA"),h.Catalog.parseDestDictionary({destDict:e,resultObj:this.data,docBaseUrl:n.baseUrl,docAttachments:n.attachments})):(0,i.warn)("Push buttons without action dictionaries are not supported")}getFieldObject(){let t,e="button";return this.data.checkBox?(e="checkbox",t=this.data.exportValue):this.data.radioButton&&(e="radiobutton",t=this.data.buttonValue),{id:this.data.id,value:this.data.fieldValue||"Off",defaultValue:this.data.defaultFieldValue,exportValues:t,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,hidden:this.data.hidden,actions:this.data.actions,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:e}}get fallbackFontDict(){const t=new s.Dict;return t.set("BaseFont",s.Name.get("ZapfDingbats")),t.set("Type",s.Name.get("FallbackType")),t.set("Subtype",s.Name.get("FallbackType")),t.set("Encoding",s.Name.get("ZapfDingbatsEncoding")),(0,i.shadow)(this,"fallbackFontDict",t)}}class T extends k{constructor(t){super(t);const{dict:e,xref:n}=t;this.indices=e.getArray("I"),this.hasIndices=Array.isArray(this.indices)&&this.indices.length>0,this.data.options=[];const o=(0,r.getInheritableProperty)({dict:e,key:"Opt"});if(Array.isArray(o))for(let t=0,e=o.length;t<e;t++){const e=n.fetchIfRef(o[t]),i=Array.isArray(e);this.data.options[t]={exportValue:this._decodeFormValue(i?n.fetchIfRef(e[0]):e),displayValue:this._decodeFormValue(i?n.fetchIfRef(e[1]):e)}}if(this.hasIndices){this.data.fieldValue=[];const t=this.data.options.length;for(const e of this.indices)Number.isInteger(e)&&e>=0&&e<t&&this.data.fieldValue.push(this.data.options[e].exportValue)}else"string"==typeof this.data.fieldValue?this.data.fieldValue=[this.data.fieldValue]:this.data.fieldValue||(this.data.fieldValue=[]);this.data.combo=this.hasFieldFlag(i.AnnotationFieldFlag.COMBO),this.data.multiSelect=this.hasFieldFlag(i.AnnotationFieldFlag.MULTISELECT),this._hasText=!0}getFieldObject(){const t=this.data.combo?"combobox":"listbox",e=this.data.fieldValue.length>0?this.data.fieldValue[0]:null;return{id:this.data.id,value:e,defaultValue:this.data.defaultFieldValue,editable:!this.data.readOnly,name:this.data.fieldName,rect:this.data.rect,numItems:this.data.fieldValue.length,multipleSelection:this.data.multiSelect,hidden:this.data.hidden,actions:this.data.actions,items:this.data.options,page:this.data.pageIndex,strokeColor:this.data.borderColor,fillColor:this.data.backgroundColor,rotation:this.rotation,type:t}}amendSavedDict(t,e){if(!this.hasIndices)return;let n=t?.get(this.data.id)?.value;Array.isArray(n)||(n=[n]);const i=[],{options:r}=this.data;for(let t=0,e=0,o=r.length;t<o;t++)r[t].exportValue===n[e]&&(i.push(t),e+=1);e.set("I",i)}async _getAppearance(t,e,n,r){if(this.data.combo)return super._getAppearance(t,e,n,r);let s,a;const l=r?.get(this.data.id);if(l&&(a=l.rotation,s=l.value),void 0===a&&void 0===s&&!this._needAppearances)return null;void 0===s?s=this.data.fieldValue:Array.isArray(s)||(s=[s]);let c=this.data.rect[3]-this.data.rect[1],h=this.data.rect[2]-this.data.rect[0];90!==a&&270!==a||([h,c]=[c,h]);const u=this.data.options.length,d=[];for(let t=0;t<u;t++){const{exportValue:e}=this.data.options[t];s.includes(e)&&d.push(t)}this._defaultAppearance||(this.data.defaultAppearanceData=(0,o.parseDefaultAppearance)(this._defaultAppearance="/Helvetica 0 Tf 0 g"));const p=await k._getFontData(t,e,this.data.defaultAppearanceData,this._fieldResources.mergedResources);let f,{fontSize:g}=this.data.defaultAppearanceData;if(g)f=this._defaultAppearance;else{const t=(c-1)/u;let e,n=-1;for(const{displayValue:t}of this.data.options){const i=this._getTextWidth(t,p);i>n&&(n=i,e=t)}[f,g]=this._computeFontSize(t,h-4,e,p,-1)}const m=g*i.LINE_FACTOR,y=(m-g)/2,v=Math.floor(c/m);let b=0;if(d.length>0){const t=Math.min(...d),e=Math.max(...d);b=Math.max(0,e-v+1),b>t&&(b=t)}const w=Math.min(b+v+1,u),x=["/Tx BMC q",`1 1 ${h} ${c} re W n`];if(d.length){x.push("0.600006 0.756866 0.854904 rg");for(const t of d)b<=t&&t<w&&x.push(`1 ${c-(t-b+1)*m} ${h} ${m} re f`)}x.push("BT",f,`1 0 0 1 0 ${c} Tm`);const _={shift:0};for(let t=b;t<w;t++){const{displayValue:e}=this.data.options[t],n=t===b?y:0;x.push(this._renderText(e,p,g,h,0,_,2,-m+n))}return x.push("ET Q EMC"),x.join("\n")}}class M extends k{constructor(t){super(t),this.data.fieldValue=null,this.data.hasOwnCanvas=this.data.noRotate}getFieldObject(){return{id:this.data.id,value:null,page:this.data.pageIndex,type:"signature"}}}class O extends C{constructor(t){super(t),this.data.noRotate=!0,this.data.hasOwnCanvas=this.data.noRotate;const{dict:e}=t;this.data.annotationType=i.AnnotationType.TEXT,this.data.hasAppearance?this.data.name="NoIcon":(this.data.rect[1]=this.data.rect[3]-22,this.data.rect[2]=this.data.rect[0]+22,this.data.name=e.has("Name")?e.get("Name").name:"Note"),e.has("State")?(this.data.state=e.get("State")||null,this.data.stateModel=e.get("StateModel")||null):(this.data.state=null,this.data.stateModel=null)}}class I extends _{constructor(t){super(t);const{dict:e,annotationGlobals:n}=t;this.data.annotationType=i.AnnotationType.LINK;const r=w(e,this.rectangle);r&&(this.data.quadPoints=r),this.data.borderColor||=this.data.color,h.Catalog.parseDestDictionary({destDict:e,resultObj:this.data,docBaseUrl:n.baseUrl,docAttachments:n.attachments})}}class D extends _{constructor(t){super(t);const{dict:e}=t;this.data.annotationType=i.AnnotationType.POPUP,this.data.rect[0]!==this.data.rect[2]&&this.data.rect[1]!==this.data.rect[3]||(this.data.rect=null);let n=e.get("Parent");if(!n)return void(0,i.warn)("Popup annotation has a missing or invalid parent annotation.");const r=n.getArray("Rect");this.data.parentRect=Array.isArray(r)&&4===r.length?i.Util.normalizeRect(r):null;const o=n.get("RT");if((0,s.isName)(o,i.AnnotationReplyType.GROUP)&&(n=n.get("IRT")),n.has("M")?(this.setModificationDate(n.get("M")),this.data.modificationDate=this.modificationDate):this.data.modificationDate=null,n.has("C")?(this.setColor(n.getArray("C")),this.data.color=this.color):this.data.color=null,!this.viewable){const t=n.get("F");this._isViewable(t)&&this.setFlags(t)}this.setTitle(n.get("T")),this.data.titleObj=this._title,this.setContents(n.get("Contents")),this.data.contentsObj=this._contents,n.has("RC")&&(this.data.richText=y.XFAFactory.getRichTextAsHtml(n.get("RC"))),this.data.open=!!e.get("Open")}}e.PopupAnnotation=D;class F extends C{constructor(t){super(t),this.data.hasOwnCanvas=!0;const{evaluatorOptions:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.FREETEXT,this.setDefaultAppearance(t),this.appearance){const{fontColor:t,fontSize:i}=(0,o.parseAppearanceStream)(this.appearance,e,n);this.data.defaultAppearanceData.fontColor=t,this.data.defaultAppearanceData.fontSize=i||10}else if(this._isOffscreenCanvasSupported){const e=t.dict.get("CA"),i=new o.FakeUnicodeFont(n,"sans-serif");this.data.defaultAppearanceData.fontSize||=10;const{fontColor:r,fontSize:s}=this.data.defaultAppearanceData;this.appearance=i.createAppearance(this._contents.str,this.rectangle,this.rotation,s,r,e),this._streams.push(this.appearance,o.FakeUnicodeFont.toUnicodeStream)}else(0,i.warn)("FreeTextAnnotation: OffscreenCanvas is not supported, annotation may not render correctly.")}get hasTextContent(){return!!this.appearance}static createNewDict(t,e,{apRef:n,ap:a}){const{color:l,fontSize:c,rect:h,rotation:u,user:d,value:p}=t,f=new s.Dict(e);f.set("Type",s.Name.get("Annot")),f.set("Subtype",s.Name.get("FreeText")),f.set("CreationDate",`D:${(0,i.getModificationDate)()}`),f.set("Rect",h);const g=`/Helv ${c} Tf ${(0,o.getPdfColor)(l,!0)}`;if(f.set("DA",g),f.set("Contents",(0,r.isAscii)(p)?p:(0,r.stringToUTF16String)(p,!0)),f.set("F",4),f.set("Border",[0,0,0]),f.set("Rotate",u),d&&f.set("T",(0,r.isAscii)(d)?d:(0,r.stringToUTF16String)(d,!0)),n||a){const t=new s.Dict(e);f.set("AP",t),n?t.set("N",n):t.set("N",a)}return f}static async createNewAppearanceStream(t,e,n){const{baseFontRef:l,evaluator:c,task:h}=n,{color:u,fontSize:d,rect:p,rotation:f,value:g}=t,m=new s.Dict(e),y=new s.Dict(e);if(l)y.set("Helv",l);else{const t=new s.Dict(e);t.set("BaseFont",s.Name.get("Helvetica")),t.set("Type",s.Name.get("Font")),t.set("Subtype",s.Name.get("Type1")),t.set("Encoding",s.Name.get("WinAnsiEncoding")),y.set("Helv",t)}m.set("Font",y);const v=await k._getFontData(c,h,{fontName:"Helv",fontSize:d},m),[b,w,x,_]=p;let S=x-b,C=_-w;f%180!=0&&([S,C]=[C,S]);const A=g.split("\n"),E=d/1e3;let T=-1/0;const M=[];for(let t of A){const e=v.encodeString(t);if(e.length>1)return null;t=e.join(""),M.push(t);let n=0;const i=v.charsToGlyphs(t);for(const t of i)n+=t.width*E;T=Math.max(T,n)}let O=1;T>S&&(O=S/T);let I=1;const D=i.LINE_FACTOR*d,F=(i.LINE_FACTOR-i.LINE_DESCENT_FACTOR)*d,P=D*A.length;P>C&&(I=C/P);const R=d*Math.min(O,I);let L,N,B;switch(f){case 0:B=[1,0,0,1],N=[p[0],p[1],S,C],L=[p[0],p[3]-F];break;case 90:B=[0,1,-1,0],N=[p[1],-p[2],S,C],L=[p[1],-p[0]-F];break;case 180:B=[-1,0,0,-1],N=[-p[2],-p[3],S,C],L=[-p[2],-p[1]-F];break;case 270:B=[0,-1,1,0],N=[-p[3],p[0],S,C],L=[-p[3],p[2]-F]}const j=["q",`${B.join(" ")} 0 0 cm`,`${N.join(" ")} re W n`,"BT",`${(0,o.getPdfColor)(u,!0)}`,`0 Tc /Helv ${(0,r.numberToString)(R)} Tf`];j.push(`${L.join(" ")} Td (${(0,r.escapeString)(M[0])}) Tj`);const z=(0,r.numberToString)(D);for(let t=1,e=M.length;t<e;t++){const e=M[t];j.push(`0 -${z} Td (${(0,r.escapeString)(e)}) Tj`)}j.push("ET","Q");const $=j.join("\n"),H=new s.Dict(e);H.set("FormType",1),H.set("Subtype",s.Name.get("Form")),H.set("Type",s.Name.get("XObject")),H.set("BBox",p),H.set("Resources",m),H.set("Matrix",[1,0,0,1,-p[0],-p[1]]);const U=new a.StringStream($);return U.dict=H,U}}class P extends C{constructor(t){super(t);const{dict:e,xref:n}=t;this.data.annotationType=i.AnnotationType.LINE,this.data.hasOwnCanvas=this.data.noRotate;const r=e.getArray("L");if(this.data.lineCoordinates=i.Util.normalizeRect(r),this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings,!this.appearance){const t=this.color?b(this.color):[0,0,0],o=e.get("CA"),s=v(e.getArray("IC"),null),a=s?b(s):null,l=a?o:null,c=this.borderStyle.width||1,h=2*c,u=[this.data.lineCoordinates[0]-h,this.data.lineCoordinates[1]-h,this.data.lineCoordinates[2]+h,this.data.lineCoordinates[3]+h];i.Util.intersect(this.rectangle,u)||(this.rectangle=u),this._setDefaultAppearance({xref:n,extra:`${c} w`,strokeColor:t,fillColor:a,strokeAlpha:o,fillAlpha:l,pointsCallback:(t,e)=>(t.push(`${r[0]} ${r[1]} m`,`${r[2]} ${r[3]} l`,"S"),[e[0].x-c,e[1].x+c,e[3].y-c,e[1].y+c])})}}}class R extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.SQUARE,this.data.hasOwnCanvas=this.data.noRotate,!this.appearance){const t=this.color?b(this.color):[0,0,0],i=e.get("CA"),r=v(e.getArray("IC"),null),o=r?b(r):null,s=o?i:null;if(0===this.borderStyle.width&&!o)return;this._setDefaultAppearance({xref:n,extra:`${this.borderStyle.width} w`,strokeColor:t,fillColor:o,strokeAlpha:i,fillAlpha:s,pointsCallback:(t,e)=>{const n=e[2].x+this.borderStyle.width/2,i=e[2].y+this.borderStyle.width/2,r=e[3].x-e[2].x-this.borderStyle.width,s=e[1].y-e[3].y-this.borderStyle.width;return t.push(`${n} ${i} ${r} ${s} re`),o?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class L extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.CIRCLE,!this.appearance){const t=this.color?b(this.color):[0,0,0],i=e.get("CA"),r=v(e.getArray("IC"),null),o=r?b(r):null,s=o?i:null;if(0===this.borderStyle.width&&!o)return;const a=4/3*Math.tan(Math.PI/8);this._setDefaultAppearance({xref:n,extra:`${this.borderStyle.width} w`,strokeColor:t,fillColor:o,strokeAlpha:i,fillAlpha:s,pointsCallback:(t,e)=>{const n=e[0].x+this.borderStyle.width/2,i=e[0].y-this.borderStyle.width/2,r=e[3].x-this.borderStyle.width/2,s=e[3].y+this.borderStyle.width/2,l=n+(r-n)/2,c=i+(s-i)/2,h=(r-n)/2*a,u=(s-i)/2*a;return t.push(`${l} ${s} m`,`${l+h} ${s} ${r} ${c+u} ${r} ${c} c`,`${r} ${c-u} ${l+h} ${i} ${l} ${i} c`,`${l-h} ${i} ${n} ${c-u} ${n} ${c} c`,`${n} ${c+u} ${l-h} ${s} ${l} ${s} c`,"h"),o?t.push("B"):t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}class N extends C{constructor(t){super(t);const{dict:e,xref:n}=t;this.data.annotationType=i.AnnotationType.POLYLINE,this.data.hasOwnCanvas=this.data.noRotate,this.data.vertices=[],this instanceof B||(this.setLineEndings(e.getArray("LE")),this.data.lineEndings=this.lineEndings);const r=e.getArray("Vertices");if(Array.isArray(r)){for(let t=0,e=r.length;t<e;t+=2)this.data.vertices.push({x:r[t],y:r[t+1]});if(!this.appearance){const t=this.color?b(this.color):[0,0,0],r=e.get("CA"),o=this.borderStyle.width||1,s=2*o,a=[1/0,1/0,-1/0,-1/0];for(const t of this.data.vertices)a[0]=Math.min(a[0],t.x-s),a[1]=Math.min(a[1],t.y-s),a[2]=Math.max(a[2],t.x+s),a[3]=Math.max(a[3],t.y+s);i.Util.intersect(this.rectangle,a)||(this.rectangle=a),this._setDefaultAppearance({xref:n,extra:`${o} w`,strokeColor:t,strokeAlpha:r,pointsCallback:(t,e)=>{const n=this.data.vertices;for(let e=0,i=n.length;e<i;e++)t.push(`${n[e].x} ${n[e].y} ${0===e?"m":"l"}`);return t.push("S"),[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}}class B extends N{constructor(t){super(t),this.data.annotationType=i.AnnotationType.POLYGON}}class j extends C{constructor(t){super(t),this.data.annotationType=i.AnnotationType.CARET}}class z extends C{constructor(t){super(t),this.data.hasOwnCanvas=this.data.noRotate;const{dict:e,xref:n}=t;this.data.annotationType=i.AnnotationType.INK,this.data.inkLists=[];const r=e.getArray("InkList");if(Array.isArray(r)){for(let t=0,e=r.length;t<e;++t){this.data.inkLists.push([]);for(let e=0,i=r[t].length;e<i;e+=2)this.data.inkLists[t].push({x:n.fetchIfRef(r[t][e]),y:n.fetchIfRef(r[t][e+1])})}if(!this.appearance){const t=this.color?b(this.color):[0,0,0],r=e.get("CA"),o=this.borderStyle.width||1,s=2*o,a=[1/0,1/0,-1/0,-1/0];for(const t of this.data.inkLists)for(const e of t)a[0]=Math.min(a[0],e.x-s),a[1]=Math.min(a[1],e.y-s),a[2]=Math.max(a[2],e.x+s),a[3]=Math.max(a[3],e.y+s);i.Util.intersect(this.rectangle,a)||(this.rectangle=a),this._setDefaultAppearance({xref:n,extra:`${o} w`,strokeColor:t,strokeAlpha:r,pointsCallback:(t,e)=>{for(const e of this.data.inkLists){for(let n=0,i=e.length;n<i;n++)t.push(`${e[n].x} ${e[n].y} ${0===n?"m":"l"}`);t.push("S")}return[e[0].x,e[1].x,e[3].y,e[1].y]}})}}}static createNewDict(t,e,{apRef:n,ap:r}){const{color:o,opacity:a,paths:l,rect:c,rotation:h,thickness:u}=t,d=new s.Dict(e);d.set("Type",s.Name.get("Annot")),d.set("Subtype",s.Name.get("Ink")),d.set("CreationDate",`D:${(0,i.getModificationDate)()}`),d.set("Rect",c),d.set("InkList",l.map((t=>t.points))),d.set("F",4),d.set("Rotate",h);const p=new s.Dict(e);d.set("BS",p),p.set("W",u),d.set("C",Array.from(o,(t=>t/255))),d.set("CA",a);const f=new s.Dict(e);return d.set("AP",f),n?f.set("N",n):f.set("N",r),d}static async createNewAppearanceStream(t,e,n){const{color:i,rect:l,paths:c,thickness:h,opacity:u}=t,d=[`${h} w 1 J 1 j`,`${(0,o.getPdfColor)(i,!1)}`];1!==u&&d.push("/R0 gs");const p=[];for(const{bezier:t}of c){p.length=0,p.push(`${(0,r.numberToString)(t[0])} ${(0,r.numberToString)(t[1])} m`);for(let e=2,n=t.length;e<n;e+=6){const n=t.slice(e,e+6).map(r.numberToString).join(" ");p.push(`${n} c`)}p.push("S"),d.push(p.join("\n"))}const f=d.join("\n"),g=new s.Dict(e);if(g.set("FormType",1),g.set("Subtype",s.Name.get("Form")),g.set("Type",s.Name.get("XObject")),g.set("BBox",l),g.set("Length",f.length),1!==u){const t=new s.Dict(e),n=new s.Dict(e),i=new s.Dict(e);i.set("CA",u),i.set("Type",s.Name.get("ExtGState")),n.set("R0",i),t.set("ExtGState",n),g.set("Resources",t)}const m=new a.StringStream(f);return m.dict=g,m}}class $ extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.HIGHLIGHT,this.data.quadPoints=w(e,null)){const t=this.appearance?.dict.get("Resources");if(!this.appearance||!t?.has("ExtGState")){this.appearance&&(0,i.warn)("HighlightAnnotation - ignoring built-in appearance stream.");const t=this.color?b(this.color):[1,1,0],r=e.get("CA");this._setDefaultAppearance({xref:n,fillColor:t,blendMode:"Multiply",fillAlpha:r,pointsCallback:(t,e)=>(t.push(`${e[0].x} ${e[0].y} m`,`${e[1].x} ${e[1].y} l`,`${e[3].x} ${e[3].y} l`,`${e[2].x} ${e[2].y} l`,"f"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.popupRef=null}}class H extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.UNDERLINE,this.data.quadPoints=w(e,null)){if(!this.appearance){const t=this.color?b(this.color):[0,0,0],i=e.get("CA");this._setDefaultAppearance({xref:n,extra:"[] 0 d 0.571 w",strokeColor:t,strokeAlpha:i,pointsCallback:(t,e)=>(t.push(`${e[2].x} ${e[2].y+1.3} m`,`${e[3].x} ${e[3].y+1.3} l`,"S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.popupRef=null}}class U extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.SQUIGGLY,this.data.quadPoints=w(e,null)){if(!this.appearance){const t=this.color?b(this.color):[0,0,0],i=e.get("CA");this._setDefaultAppearance({xref:n,extra:"[] 0 d 1 w",strokeColor:t,strokeAlpha:i,pointsCallback:(t,e)=>{const n=(e[0].y-e[2].y)/6;let i=n,r=e[2].x;const o=e[2].y,s=e[3].x;t.push(`${r} ${o+i} m`);do{r+=2,i=0===i?n:0,t.push(`${r} ${o+i} l`)}while(r<s);return t.push("S"),[e[2].x,s,o-2*n,o+2*n]}})}}else this.data.popupRef=null}}class V extends C{constructor(t){super(t);const{dict:e,xref:n}=t;if(this.data.annotationType=i.AnnotationType.STRIKEOUT,this.data.quadPoints=w(e,null)){if(!this.appearance){const t=this.color?b(this.color):[0,0,0],i=e.get("CA");this._setDefaultAppearance({xref:n,extra:"[] 0 d 1 w",strokeColor:t,strokeAlpha:i,pointsCallback:(t,e)=>(t.push((e[0].x+e[2].x)/2+" "+(e[0].y+e[2].y)/2+" m",(e[1].x+e[3].x)/2+" "+(e[1].y+e[3].y)/2+" l","S"),[e[0].x,e[1].x,e[3].y,e[1].y])})}}else this.data.popupRef=null}}class W extends C{constructor(t){super(t),this.data.annotationType=i.AnnotationType.STAMP,this.data.hasOwnCanvas=this.data.noRotate}static async createImage(t,e){const{width:n,height:r}=t,o=new OffscreenCanvas(n,r),l=o.getContext("2d",{alpha:!0});l.drawImage(t,0,0);const c=l.getImageData(0,0,n,r).data,h=new Uint32Array(c.buffer),u=h.some(i.FeatureTest.isLittleEndian?t=>t>>>24!=255:t=>255!=(255&t));u&&(l.fillStyle="white",l.fillRect(0,0,n,r),l.drawImage(t,0,0));const d=o.convertToBlob({type:"image/jpeg",quality:1}).then((t=>t.arrayBuffer())),p=s.Name.get("XObject"),f=s.Name.get("Image"),g=new s.Dict(e);g.set("Type",p),g.set("Subtype",f),g.set("BitsPerComponent",8),g.set("ColorSpace",s.Name.get("DeviceRGB")),g.set("Filter",s.Name.get("DCTDecode")),g.set("BBox",[0,0,n,r]),g.set("Width",n),g.set("Height",r);let m=null;if(u){const t=new Uint8Array(h.length);if(i.FeatureTest.isLittleEndian)for(let e=0,n=h.length;e<n;e++)t[e]=h[e]>>>24;else for(let e=0,n=h.length;e<n;e++)t[e]=255&h[e];const o=new s.Dict(e);o.set("Type",p),o.set("Subtype",f),o.set("BitsPerComponent",8),o.set("ColorSpace",s.Name.get("DeviceGray")),o.set("Width",n),o.set("Height",r),m=new a.Stream(t,0,0,o)}return{imageStream:new a.Stream(await d,0,0,g),smaskStream:m,width:n,height:r}}static createNewDict(t,e,{apRef:n,ap:o}){const{rect:a,rotation:l,user:c}=t,h=new s.Dict(e);if(h.set("Type",s.Name.get("Annot")),h.set("Subtype",s.Name.get("Stamp")),h.set("CreationDate",`D:${(0,i.getModificationDate)()}`),h.set("Rect",a),h.set("F",4),h.set("Border",[0,0,0]),h.set("Rotate",l),c&&h.set("T",(0,r.isAscii)(c)?c:(0,r.stringToUTF16String)(c,!0)),n||o){const t=new s.Dict(e);h.set("AP",t),n?t.set("N",n):t.set("N",o)}return h}static async createNewAppearanceStream(t,e,n){const{rotation:i}=t,{imageRef:o,width:l,height:c}=n.image,h=new s.Dict(e),u=new s.Dict(e);h.set("XObject",u),u.set("Im0",o);const d=`q ${l} 0 0 ${c} 0 0 cm /Im0 Do Q`,p=new s.Dict(e);if(p.set("FormType",1),p.set("Subtype",s.Name.get("Form")),p.set("Type",s.Name.get("XObject")),p.set("BBox",[0,0,l,c]),p.set("Resources",h),i){const t=(0,r.getRotationMatrix)(i,l,c);p.set("Matrix",t)}const f=new a.StringStream(d);return f.dict=p,f}}class q extends C{constructor(t){super(t);const{dict:e,xref:n}=t,r=new d.FileSpec(e.get("FS"),n);this.data.annotationType=i.AnnotationType.FILEATTACHMENT,this.data.hasOwnCanvas=this.data.noRotate,this.data.file=r.serializable;const o=e.get("Name");this.data.name=o instanceof s.Name?(0,i.stringToPDFString)(o.name):"PushPin";const a=e.get("ca");this.data.fillAlpha="number"==typeof a&&a>=0&&a<=1?a:null}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FakeUnicodeFont=void 0,e.createDefaultAppearance=function({fontSize:t,fontName:e,fontColor:n}){return`/${(0,r.escapePDFName)(e)} ${t} Tf ${p(n,!0)}`},e.getPdfColor=p,e.parseAppearanceStream=function(t,e,n){return new d(t,e,n).parse()},e.parseDefaultAppearance=function(t){return new u(t).parse()};var i=n(4),r=n(3),o=n(2),s=n(12),a=n(13),l=n(59),c=n(57),h=n(8);class u extends a.EvaluatorPreprocessor{constructor(t){super(new h.StringStream(t))}parse(){const t={fn:0,args:[]},e={fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3)};try{for(;t.args.length=0,this.read(t);){if(0!==this.savedStatesDepth)continue;const{fn:n,args:r}=t;switch(0|n){case o.OPS.setFont:const[t,n]=r;t instanceof i.Name&&(e.fontName=t.name),"number"==typeof n&&n>0&&(e.fontSize=n);break;case o.OPS.setFillRGBColor:s.ColorSpace.singletons.rgb.getRgbItem(r,0,e.fontColor,0);break;case o.OPS.setFillGray:s.ColorSpace.singletons.gray.getRgbItem(r,0,e.fontColor,0);break;case o.OPS.setFillCMYKColor:s.ColorSpace.singletons.cmyk.getRgbItem(r,0,e.fontColor,0)}}}catch(t){(0,o.warn)(`parseDefaultAppearance - ignoring errors: "${t}".`)}return e}}class d extends a.EvaluatorPreprocessor{constructor(t,e,n){super(t),this.stream=t,this.evaluatorOptions=e,this.xref=n,this.resources=t.dict?.get("Resources")}parse(){const t={fn:0,args:[]};let e={scaleFactor:1,fontSize:0,fontName:"",fontColor:new Uint8ClampedArray(3),fillColorSpace:s.ColorSpace.singletons.gray},n=!1;const r=[];try{for(;t.args.length=0,!n&&this.read(t);){const{fn:a,args:l}=t;switch(0|a){case o.OPS.save:r.push({scaleFactor:e.scaleFactor,fontSize:e.fontSize,fontName:e.fontName,fontColor:e.fontColor.slice(),fillColorSpace:e.fillColorSpace});break;case o.OPS.restore:e=r.pop()||e;break;case o.OPS.setTextMatrix:e.scaleFactor*=Math.hypot(l[0],l[1]);break;case o.OPS.setFont:const[t,a]=l;t instanceof i.Name&&(e.fontName=t.name),"number"==typeof a&&a>0&&(e.fontSize=a*e.scaleFactor);break;case o.OPS.setFillColorSpace:e.fillColorSpace=s.ColorSpace.parse({cs:l[0],xref:this.xref,resources:this.resources,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:this._localColorSpaceCache});break;case o.OPS.setFillColor:e.fillColorSpace.getRgbItem(l,0,e.fontColor,0);break;case o.OPS.setFillRGBColor:s.ColorSpace.singletons.rgb.getRgbItem(l,0,e.fontColor,0);break;case o.OPS.setFillGray:s.ColorSpace.singletons.gray.getRgbItem(l,0,e.fontColor,0);break;case o.OPS.setFillCMYKColor:s.ColorSpace.singletons.cmyk.getRgbItem(l,0,e.fontColor,0);break;case o.OPS.showText:case o.OPS.showSpacedText:case o.OPS.nextLineShowText:case o.OPS.nextLineSetSpacingShowText:n=!0}}}catch(t){(0,o.warn)(`parseAppearanceStream - ignoring errors: "${t}".`)}return this.stream.reset(),delete e.scaleFactor,delete e.fillColorSpace,e}get _localColorSpaceCache(){return(0,o.shadow)(this,"_localColorSpaceCache",new l.LocalColorSpaceCache)}get _pdfFunctionFactory(){const t=new c.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.evaluatorOptions.isEvalSupported});return(0,o.shadow)(this,"_pdfFunctionFactory",t)}}function p(t,e){if(t[0]===t[1]&&t[1]===t[2]){const n=t[0]/255;return`${(0,r.numberToString)(n)} ${e?"g":"G"}`}return Array.from(t,(t=>(0,r.numberToString)(t/255))).join(" ")+" "+(e?"rg":"RG")}class f{constructor(t,e){this.xref=t,this.widths=null,this.firstChar=1/0,this.lastChar=-1/0,this.fontFamily=e;const n=new OffscreenCanvas(1,1);this.ctxMeasure=n.getContext("2d"),f._fontNameId||(f._fontNameId=1),this.fontName=i.Name.get(`InvalidPDFjsFont_${e}_${f._fontNameId++}`)}get toUnicodeRef(){if(!f._toUnicodeRef){const t="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo\n<< /Registry (Adobe)\n/Ordering (UCS) /Supplement 0 >> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000> <FFFF>\nendcodespacerange\n1 beginbfrange\n<0000> <FFFF> <0000>\nendbfrange\nendcmap CMapName currentdict /CMap defineresource pop end end",e=f.toUnicodeStream=new h.StringStream(t),n=new i.Dict(this.xref);e.dict=n,n.set("Length",t.length),f._toUnicodeRef=this.xref.getNewPersistentRef(e)}return f._toUnicodeRef}get fontDescriptorRef(){if(!f._fontDescriptorRef){const t=new i.Dict(this.xref);t.set("Type",i.Name.get("FontDescriptor")),t.set("FontName",this.fontName),t.set("FontFamily","MyriadPro Regular"),t.set("FontBBox",[0,0,0,0]),t.set("FontStretch",i.Name.get("Normal")),t.set("FontWeight",400),t.set("ItalicAngle",0),f._fontDescriptorRef=this.xref.getNewPersistentRef(t)}return f._fontDescriptorRef}get descendantFontRef(){const t=new i.Dict(this.xref);t.set("BaseFont",this.fontName),t.set("Type",i.Name.get("Font")),t.set("Subtype",i.Name.get("CIDFontType0")),t.set("CIDToGIDMap",i.Name.get("Identity")),t.set("FirstChar",this.firstChar),t.set("LastChar",this.lastChar),t.set("FontDescriptor",this.fontDescriptorRef),t.set("DW",1e3);const e=[],n=[...this.widths.entries()].sort();let r=null,o=null;for(const[t,i]of n)r?t===r+o.length?o.push(i):(e.push(r,o),r=t,o=[i]):(r=t,o=[i]);r&&e.push(r,o),t.set("W",e);const s=new i.Dict(this.xref);return s.set("Ordering","Identity"),s.set("Registry","Adobe"),s.set("Supplement",0),t.set("CIDSystemInfo",s),this.xref.getNewPersistentRef(t)}get baseFontRef(){const t=new i.Dict(this.xref);return t.set("BaseFont",this.fontName),t.set("Type",i.Name.get("Font")),t.set("Subtype",i.Name.get("Type0")),t.set("Encoding",i.Name.get("Identity-H")),t.set("DescendantFonts",[this.descendantFontRef]),t.set("ToUnicode",this.toUnicodeRef),this.xref.getNewPersistentRef(t)}get resources(){const t=new i.Dict(this.xref),e=new i.Dict(this.xref);return e.set(this.fontName.name,this.baseFontRef),t.set("Font",e),t}_createContext(){return this.widths=new Map,this.ctxMeasure.font=`1000px ${this.fontFamily}`,this.ctxMeasure}createFontResources(t){const e=this._createContext();for(const n of t.split(/\r\n?|\n/))for(const t of n.split("")){const n=t.charCodeAt(0);if(this.widths.has(n))continue;const i=e.measureText(t),r=Math.ceil(i.width);this.widths.set(n,r),this.firstChar=Math.min(n,this.firstChar),this.lastChar=Math.max(n,this.lastChar)}return this.resources}createAppearance(t,e,n,s,a,l){const c=this._createContext(),u=[];let d=-1/0;for(const e of t.split(/\r\n?|\n/)){u.push(e);const t=c.measureText(e).width;d=Math.max(d,t);for(const t of e.split("")){const e=t.charCodeAt(0);let n=this.widths.get(e);if(void 0===n){const i=c.measureText(t);n=Math.ceil(i.width),this.widths.set(e,n),this.firstChar=Math.min(e,this.firstChar),this.lastChar=Math.max(e,this.lastChar)}}}d*=s/1e3;const[f,g,m,y]=e;let v=m-f,b=y-g;n%180!=0&&([v,b]=[b,v]);let w=1;d>v&&(w=v/d);let x=1;const _=o.LINE_FACTOR*s,S=o.LINE_DESCENT_FACTOR*s,C=_*u.length;C>b&&(x=b/C);const k=s*Math.min(w,x),A=["q",`0 0 ${(0,r.numberToString)(v)} ${(0,r.numberToString)(b)} re W n`,"BT",`1 0 0 1 0 ${(0,r.numberToString)(b+S)} Tm 0 Tc ${p(a,!0)}`,`/${this.fontName.name} ${(0,r.numberToString)(k)} Tf`],{resources:E}=this;if(1!==(l="number"==typeof l&&l>=0&&l<=1?l:1)){A.push("/R0 gs");const t=new i.Dict(this.xref),e=new i.Dict(this.xref);e.set("ca",l),e.set("CA",l),e.set("Type",i.Name.get("ExtGState")),t.set("R0",e),E.set("ExtGState",t)}const T=(0,r.numberToString)(_);for(const t of u)A.push(`0 -${T} Td <${(0,r.stringToUTF16HexString)(t)}> Tj`);A.push("ET","Q");const M=A.join("\n"),O=new i.Dict(this.xref);if(O.set("Subtype",i.Name.get("Form")),O.set("Type",i.Name.get("XObject")),O.set("BBox",[0,0,v,b]),O.set("Length",M.length),O.set("Resources",E),n){const t=(0,r.getRotationMatrix)(n,v,b);O.set("Matrix",t)}const I=new h.StringStream(M);return I.dict=O,I}}e.FakeUnicodeFont=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorSpace=void 0;var i=n(2),r=n(4),o=n(5),s=n(3);class a{constructor(t,e){this.constructor===a&&(0,i.unreachable)("Cannot initialize ColorSpace."),this.name=t,this.numComps=e}getRgb(t,e){const n=new Uint8ClampedArray(3);return this.getRgbItem(t,e,n,0),n}getRgbItem(t,e,n,r){(0,i.unreachable)("Should not call ColorSpace.getRgbItem")}getRgbBuffer(t,e,n,r,o,s,a){(0,i.unreachable)("Should not call ColorSpace.getRgbBuffer")}getOutputLength(t,e){(0,i.unreachable)("Should not call ColorSpace.getOutputLength")}isPassthrough(t){return!1}isDefaultDecode(t,e){return a.isDefaultDecode(t,this.numComps)}fillRgb(t,e,n,i,r,o,s,a,l){const c=e*n;let h=null;const u=1<<s,d=n!==r||e!==i;if(this.isPassthrough(s))h=a;else if(1===this.numComps&&c>u&&"DeviceGray"!==this.name&&"DeviceRGB"!==this.name){const e=s<=8?new Uint8Array(u):new Uint16Array(u);for(let t=0;t<u;t++)e[t]=t;const n=new Uint8ClampedArray(3*u);if(this.getRgbBuffer(e,0,u,n,0,s,0),d){h=new Uint8Array(3*c);let t=0;for(let e=0;e<c;++e){const i=3*a[e];h[t++]=n[i],h[t++]=n[i+1],h[t++]=n[i+2]}}else{let e=0;for(let i=0;i<c;++i){const r=3*a[i];t[e++]=n[r],t[e++]=n[r+1],t[e++]=n[r+2],e+=l}}}else d?(h=new Uint8ClampedArray(3*c),this.getRgbBuffer(a,0,c,h,0,s,0)):this.getRgbBuffer(a,0,i*o,t,0,s,l);if(h)if(d)!function(t,e,n,i,r,o,s){s=1!==s?0:s;const a=n/r,l=i/o;let c,h=0;const u=new Uint16Array(r),d=3*n;for(let t=0;t<r;t++)u[t]=3*Math.floor(t*a);for(let n=0;n<o;n++){const i=Math.floor(n*l)*d;for(let n=0;n<r;n++)c=i+u[n],e[h++]=t[c++],e[h++]=t[c++],e[h++]=t[c++],h+=s}}(h,t,e,n,i,r,l);else{let e=0,n=0;for(let r=0,s=i*o;r<s;r++)t[e++]=h[n++],t[e++]=h[n++],t[e++]=h[n++],e+=l}}get usesZeroToOneRange(){return(0,i.shadow)(this,"usesZeroToOneRange",!0)}static _cache(t,e,n,i){if(!n)throw new Error('ColorSpace._cache - expected "localColorSpaceCache" argument.');if(!i)throw new Error('ColorSpace._cache - expected "parsedColorSpace" argument.');let o,s;t instanceof r.Ref&&(s=t,t=e.fetch(t)),t instanceof r.Name&&(o=t.name),(o||s)&&n.set(o,s,i)}static getCached(t,e,n){if(!n)throw new Error('ColorSpace.getCached - expected "localColorSpaceCache" argument.');if(t instanceof r.Ref){const i=n.getByRef(t);if(i)return i;try{t=e.fetch(t)}catch(t){if(t instanceof s.MissingDataException)throw t}}if(t instanceof r.Name){const e=n.getByName(t.name);if(e)return e}return null}static async parseAsync({cs:t,xref:e,resources:n=null,pdfFunctionFactory:i,localColorSpaceCache:r}){const o=this._parse(t,e,n,i);return this._cache(t,e,r,o),o}static parse({cs:t,xref:e,resources:n=null,pdfFunctionFactory:i,localColorSpaceCache:r}){const o=this.getCached(t,e,r);if(o)return o;const s=this._parse(t,e,n,i);return this._cache(t,e,r,s),s}static _parse(t,e,n=null,o){if((t=e.fetchIfRef(t))instanceof r.Name)switch(t.name){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"Pattern":return new c(null);default:if(n instanceof r.Dict){const i=n.get("ColorSpace");if(i instanceof r.Dict){const s=i.get(t.name);if(s){if(s instanceof r.Name)return this._parse(s,e,n,o);t=s;break}}}throw new i.FormatError(`Unrecognized ColorSpace: ${t.name}`)}if(Array.isArray(t)){const r=e.fetchIfRef(t[0]).name;let s,a,u,d,p,y;switch(r){case"G":case"DeviceGray":return this.singletons.gray;case"RGB":case"DeviceRGB":return this.singletons.rgb;case"CMYK":case"DeviceCMYK":return this.singletons.cmyk;case"CalGray":return s=e.fetchIfRef(t[1]),d=s.getArray("WhitePoint"),p=s.getArray("BlackPoint"),y=s.get("Gamma"),new f(d,p,y);case"CalRGB":s=e.fetchIfRef(t[1]),d=s.getArray("WhitePoint"),p=s.getArray("BlackPoint"),y=s.getArray("Gamma");const v=s.getArray("Matrix");return new g(d,p,y,v);case"ICCBased":const b=e.fetchIfRef(t[1]).dict;a=b.get("N");const w=b.get("Alternate");if(w){const t=this._parse(w,e,n,o);if(t.numComps===a)return t;(0,i.warn)("ICCBased color space: Ignoring incorrect /Alternate entry.")}if(1===a)return this.singletons.gray;if(3===a)return this.singletons.rgb;if(4===a)return this.singletons.cmyk;break;case"Pattern":return u=t[1]||null,u&&(u=this._parse(u,e,n,o)),new c(u);case"I":case"Indexed":u=this._parse(t[1],e,n,o);const x=e.fetchIfRef(t[2])+1,_=e.fetchIfRef(t[3]);return new h(u,x,_);case"Separation":case"DeviceN":const S=e.fetchIfRef(t[1]);a=Array.isArray(S)?S.length:1,u=this._parse(t[2],e,n,o);const C=o.create(t[3]);return new l(a,u,C);case"Lab":s=e.fetchIfRef(t[1]),d=s.getArray("WhitePoint"),p=s.getArray("BlackPoint");const k=s.getArray("Range");return new m(d,p,k);default:throw new i.FormatError(`Unimplemented ColorSpace object: ${r}`)}}throw new i.FormatError(`Unrecognized ColorSpace object: ${t}`)}static isDefaultDecode(t,e){if(!Array.isArray(t))return!0;if(2*e!==t.length)return(0,i.warn)("The decode map is not the correct length"),!0;for(let e=0,n=t.length;e<n;e+=2)if(0!==t[e]||1!==t[e+1])return!1;return!0}static get singletons(){return(0,i.shadow)(this,"singletons",{get gray(){return(0,i.shadow)(this,"gray",new u)},get rgb(){return(0,i.shadow)(this,"rgb",new d)},get cmyk(){return(0,i.shadow)(this,"cmyk",new p)}})}}e.ColorSpace=a;class l extends a{constructor(t,e,n){super("Alternate",t),this.base=e,this.tintFn=n,this.tmpBuf=new Float32Array(e.numComps)}getRgbItem(t,e,n,i){const r=this.tmpBuf;this.tintFn(t,e,r,0),this.base.getRgbItem(r,0,n,i)}getRgbBuffer(t,e,n,i,r,o,s){const a=this.tintFn,l=this.base,c=1/((1<<o)-1),h=l.numComps,u=l.usesZeroToOneRange,d=(l.isPassthrough(8)||!u)&&0===s;let p=d?r:0;const f=d?i:new Uint8ClampedArray(h*n),g=this.numComps,m=new Float32Array(g),y=new Float32Array(h);let v,b;for(v=0;v<n;v++){for(b=0;b<g;b++)m[b]=t[e++]*c;if(a(m,0,y,0),u)for(b=0;b<h;b++)f[p++]=255*y[b];else l.getRgbItem(y,0,f,p),p+=h}d||l.getRgbBuffer(f,0,n,i,r,8,s)}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps/this.numComps,e)}}class c extends a{constructor(t){super("Pattern",null),this.base=t}isDefaultDecode(t,e){(0,i.unreachable)("Should not call PatternCS.isDefaultDecode")}}class h extends a{constructor(t,e,n){super("Indexed",1),this.base=t,this.highVal=e;const r=t.numComps*e;if(this.lookup=new Uint8Array(r),n instanceof o.BaseStream){const t=n.getBytes(r);this.lookup.set(t)}else{if("string"!=typeof n)throw new i.FormatError(`IndexedCS - unrecognized lookup table: ${n}`);for(let t=0;t<r;++t)this.lookup[t]=255&n.charCodeAt(t)}}getRgbItem(t,e,n,i){const r=this.base.numComps,o=t[e]*r;this.base.getRgbBuffer(this.lookup,o,1,n,i,8,0)}getRgbBuffer(t,e,n,i,r,o,s){const a=this.base,l=a.numComps,c=a.getOutputLength(l,s),h=this.lookup;for(let o=0;o<n;++o){const n=t[e++]*l;a.getRgbBuffer(h,n,1,i,r,8,s),r+=c}}getOutputLength(t,e){return this.base.getOutputLength(t*this.base.numComps,e)}isDefaultDecode(t,e){return!Array.isArray(t)||(2!==t.length?((0,i.warn)("Decode map length is not correct"),!0):!Number.isInteger(e)||e<1?((0,i.warn)("Bits per component is not correct"),!0):0===t[0]&&t[1]===(1<<e)-1)}}class u extends a{constructor(){super("DeviceGray",1)}getRgbItem(t,e,n,i){const r=255*t[e];n[i]=n[i+1]=n[i+2]=r}getRgbBuffer(t,e,n,i,r,o,s){const a=255/((1<<o)-1);let l=e,c=r;for(let e=0;e<n;++e){const e=a*t[l++];i[c++]=e,i[c++]=e,i[c++]=e,c+=s}}getOutputLength(t,e){return t*(3+e)}}class d extends a{constructor(){super("DeviceRGB",3)}getRgbItem(t,e,n,i){n[i]=255*t[e],n[i+1]=255*t[e+1],n[i+2]=255*t[e+2]}getRgbBuffer(t,e,n,i,r,o,s){if(8===o&&0===s)return void i.set(t.subarray(e,e+3*n),r);const a=255/((1<<o)-1);let l=e,c=r;for(let e=0;e<n;++e)i[c++]=a*t[l++],i[c++]=a*t[l++],i[c++]=a*t[l++],c+=s}getOutputLength(t,e){return t*(3+e)/3|0}isPassthrough(t){return 8===t}}class p extends a{constructor(){super("DeviceCMYK",4)}#Pi(t,e,n,i,r){const o=t[e]*n,s=t[e+1]*n,a=t[e+2]*n,l=t[e+3]*n;i[r]=255+o*(-4.387332384609988*o+54.48615194189176*s+18.82290502165302*a+212.25662451639585*l-285.2331026137004)+s*(1.7149763477362134*s-5.6096736904047315*a+-17.873870861415444*l-5.497006427196366)+a*(-2.5217340131683033*a-21.248923337353073*l+17.5119270841813)+l*(-21.86122147463605*l-189.48180835922747),i[r+1]=255+o*(8.841041422036149*o+60.118027045597366*s+6.871425592049007*a+31.159100130055922*l-79.2970844816548)+s*(-15.310361306967817*s+17.575251261109482*a+131.35250912493976*l-190.9453302588951)+a*(4.444339102852739*a+9.8632861493405*l-24.86741582555878)+l*(-20.737325471181034*l-187.80453709719578),i[r+2]=255+o*(.8842522430003296*o+8.078677503112928*s+30.89978309703729*a-.23883238689178934*l-14.183576799673286)+s*(10.49593273432072*s+63.02378494754052*a+50.606957656360734*l-112.23884253719248)+a*(.03296041114873217*a+115.60384449646641*l-193.58209356861505)+l*(-22.33816807309886*l-180.12613974708367)}getRgbItem(t,e,n,i){this.#Pi(t,e,1,n,i)}getRgbBuffer(t,e,n,i,r,o,s){const a=1/((1<<o)-1);for(let o=0;o<n;o++)this.#Pi(t,e,a,i,r),e+=4,r+=3+s}getOutputLength(t,e){return t/4*(3+e)|0}}class f extends a{constructor(t,e,n){if(super("CalGray",1),!t)throw new i.FormatError("WhitePoint missing - required for color space CalGray");if([this.XW,this.YW,this.ZW]=t,[this.XB,this.YB,this.ZB]=e||[0,0,0],this.G=n||1,this.XW<0||this.ZW<0||1!==this.YW)throw new i.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(this.XB<0||this.YB<0||this.ZB<0)&&((0,i.info)(`Invalid BlackPoint for ${this.name}, falling back to default.`),this.XB=this.YB=this.ZB=0),0===this.XB&&0===this.YB&&0===this.ZB||(0,i.warn)(`${this.name}, BlackPoint: XB: ${this.XB}, YB: ${this.YB}, ZB: ${this.ZB}, only default values are supported.`),this.G<1&&((0,i.info)(`Invalid Gamma: ${this.G} for ${this.name}, falling back to default.`),this.G=1)}#Pi(t,e,n,i,r){const o=(t[e]*r)**this.G,s=this.YW*o,a=Math.max(295.8*s**.3333333333333333-40.8,0);n[i]=a,n[i+1]=a,n[i+2]=a}getRgbItem(t,e,n,i){this.#Pi(t,e,n,i,1)}getRgbBuffer(t,e,n,i,r,o,s){const a=1/((1<<o)-1);for(let o=0;o<n;++o)this.#Pi(t,e,i,r,a),e+=1,r+=3+s}getOutputLength(t,e){return t*(3+e)}}class g extends a{static#Ri=new Float32Array([.8951,.2664,-.1614,-.7502,1.7135,.0367,.0389,-.0685,1.0296]);static#Li=new Float32Array([.9869929,-.1470543,.1599627,.4323053,.5183603,.0492912,-.0085287,.0400428,.9684867]);static#Ni=new Float32Array([3.2404542,-1.5371385,-.4985314,-.969266,1.8760108,.041556,.0556434,-.2040259,1.0572252]);static#Bi=new Float32Array([1,1,1]);static#ji=new Float32Array(3);static#zi=new Float32Array(3);static#$i=new Float32Array(3);static#Hi=(24/116)**3/8;constructor(t,e,n,r){if(super("CalRGB",3),!t)throw new i.FormatError("WhitePoint missing - required for color space CalRGB");const[o,s,a]=this.whitePoint=t,[l,c,h]=this.blackPoint=e||new Float32Array(3);if([this.GR,this.GG,this.GB]=n||new Float32Array([1,1,1]),[this.MXA,this.MYA,this.MZA,this.MXB,this.MYB,this.MZB,this.MXC,this.MYC,this.MZC]=r||new Float32Array([1,0,0,0,1,0,0,0,1]),o<0||a<0||1!==s)throw new i.FormatError(`Invalid WhitePoint components for ${this.name}, no fallback available`);(l<0||c<0||h<0)&&((0,i.info)(`Invalid BlackPoint for ${this.name} [${l}, ${c}, ${h}], falling back to default.`),this.blackPoint=new Float32Array(3)),(this.GR<0||this.GG<0||this.GB<0)&&((0,i.info)(`Invalid Gamma [${this.GR}, ${this.GG}, ${this.GB}] for ${this.name}, falling back to default.`),this.GR=this.GG=this.GB=1)}#Ui(t,e,n){n[0]=t[0]*e[0]+t[1]*e[1]+t[2]*e[2],n[1]=t[3]*e[0]+t[4]*e[1]+t[5]*e[2],n[2]=t[6]*e[0]+t[7]*e[1]+t[8]*e[2]}#Vi(t,e,n){n[0]=1*e[0]/t[0],n[1]=1*e[1]/t[1],n[2]=1*e[2]/t[2]}#Wi(t,e,n){n[0]=.95047*e[0]/t[0],n[1]=1*e[1]/t[1],n[2]=1.08883*e[2]/t[2]}#qi(t){return t<=.0031308?this.#Ki(0,1,12.92*t):t>=.99554525?1:this.#Ki(0,1,1.055*t**(1/2.4)-.055)}#Ki(t,e,n){return Math.max(t,Math.min(e,n))}#Xi(t){return t<0?-this.#Xi(-t):t>8?((t+16)/116)**3:t*g.#Hi}#Gi(t,e,n){if(0===t[0]&&0===t[1]&&0===t[2])return n[0]=e[0],n[1]=e[1],void(n[2]=e[2]);const i=this.#Xi(0),r=(1-i)/(1-this.#Xi(t[0])),o=1-r,s=(1-i)/(1-this.#Xi(t[1])),a=1-s,l=(1-i)/(1-this.#Xi(t[2])),c=1-l;n[0]=e[0]*r+o,n[1]=e[1]*s+a,n[2]=e[2]*l+c}#Yi(t,e,n){if(1===t[0]&&1===t[2])return n[0]=e[0],n[1]=e[1],void(n[2]=e[2]);const i=n;this.#Ui(g.#Ri,e,i);const r=g.#ji;this.#Vi(t,i,r),this.#Ui(g.#Li,r,n)}#Ji(t,e,n){const i=n;this.#Ui(g.#Ri,e,i);const r=g.#ji;this.#Wi(t,i,r),this.#Ui(g.#Li,r,n)}#Pi(t,e,n,i,r){const o=this.#Ki(0,1,t[e]*r),s=this.#Ki(0,1,t[e+1]*r),a=this.#Ki(0,1,t[e+2]*r),l=1===o?1:o**this.GR,c=1===s?1:s**this.GG,h=1===a?1:a**this.GB,u=this.MXA*l+this.MXB*c+this.MXC*h,d=this.MYA*l+this.MYB*c+this.MYC*h,p=this.MZA*l+this.MZB*c+this.MZC*h,f=g.#zi;f[0]=u,f[1]=d,f[2]=p;const m=g.#$i;this.#Yi(this.whitePoint,f,m);const y=g.#zi;this.#Gi(this.blackPoint,m,y);const v=g.#$i;this.#Ji(g.#Bi,y,v);const b=g.#zi;this.#Ui(g.#Ni,v,b),n[i]=255*this.#qi(b[0]),n[i+1]=255*this.#qi(b[1]),n[i+2]=255*this.#qi(b[2])}getRgbItem(t,e,n,i){this.#Pi(t,e,n,i,1)}getRgbBuffer(t,e,n,i,r,o,s){const a=1/((1<<o)-1);for(let o=0;o<n;++o)this.#Pi(t,e,i,r,a),e+=3,r+=3+s}getOutputLength(t,e){return t*(3+e)/3|0}}class m extends a{constructor(t,e,n){if(super("Lab",3),!t)throw new i.FormatError("WhitePoint missing - required for color space Lab");if([this.XW,this.YW,this.ZW]=t,[this.amin,this.amax,this.bmin,this.bmax]=n||[-100,100,-100,100],[this.XB,this.YB,this.ZB]=e||[0,0,0],this.XW<0||this.ZW<0||1!==this.YW)throw new i.FormatError("Invalid WhitePoint components, no fallback available");(this.XB<0||this.YB<0||this.ZB<0)&&((0,i.info)("Invalid BlackPoint, falling back to default"),this.XB=this.YB=this.ZB=0),(this.amin>this.amax||this.bmin>this.bmax)&&((0,i.info)("Invalid Range, falling back to defaults"),this.amin=-100,this.amax=100,this.bmin=-100,this.bmax=100)}#Zi(t){return t>=6/29?t**3:108/841*(t-4/29)}#Qi(t,e,n,i){return n+t*(i-n)/e}#Pi(t,e,n,i,r){let o=t[e],s=t[e+1],a=t[e+2];!1!==n&&(o=this.#Qi(o,n,0,100),s=this.#Qi(s,n,this.amin,this.amax),a=this.#Qi(a,n,this.bmin,this.bmax)),s>this.amax?s=this.amax:s<this.amin&&(s=this.amin),a>this.bmax?a=this.bmax:a<this.bmin&&(a=this.bmin);const l=(o+16)/116,c=l+s/500,h=l-a/200,u=this.XW*this.#Zi(c),d=this.YW*this.#Zi(l),p=this.ZW*this.#Zi(h);let f,g,m;this.ZW<1?(f=3.1339*u+-1.617*d+-.4906*p,g=-.9785*u+1.916*d+.0333*p,m=.072*u+-.229*d+1.4057*p):(f=3.2406*u+-1.5372*d+-.4986*p,g=-.9689*u+1.8758*d+.0415*p,m=.0557*u+-.204*d+1.057*p),i[r]=255*Math.sqrt(f),i[r+1]=255*Math.sqrt(g),i[r+2]=255*Math.sqrt(m)}getRgbItem(t,e,n,i){this.#Pi(t,e,!1,n,i)}getRgbBuffer(t,e,n,i,r,o,s){const a=(1<<o)-1;for(let o=0;o<n;o++)this.#Pi(t,e,a,i,r),e+=3,r+=3+s}getOutputLength(t,e){return t*(3+e)/3|0}isDefaultDecode(t,e){return!0}get usesZeroToOneRange(){return(0,i.shadow)(this,"usesZeroToOneRange",!1)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PartialEvaluator=e.EvaluatorPreprocessor=void 0;var i=n(2),r=n(14),o=n(4),s=n(34),a=n(37),l=n(41),c=n(50),h=n(51),u=n(42),d=n(57),p=n(16),f=n(59),g=n(8),m=n(5),y=n(60),v=n(12),b=n(18),w=n(38),x=n(61),_=n(39),S=n(45),C=n(40),k=n(62),A=n(63),E=n(64),T=n(65);const M=Object.freeze({maxImageSize:-1,disableFontFace:!1,ignoreErrors:!1,isEvalSupported:!0,isOffscreenCanvasSupported:!1,canvasMaxAreaInBytes:-1,fontExtraProperties:!1,useSystemFonts:!0,cMapUrl:null,standardFontDataUrl:null}),O=1,I=2,D=Promise.resolve();function F(t,e=!1){if(Array.isArray(t)){for(const e of t){const t=F(e,!0);if(t)return t}return(0,i.warn)(`Unsupported blend mode Array: ${t}`),"source-over"}if(!(t instanceof o.Name))return e?null:"source-over";switch(t.name){case"Normal":case"Compatible":return"source-over";case"Multiply":return"multiply";case"Screen":return"screen";case"Overlay":return"overlay";case"Darken":return"darken";case"Lighten":return"lighten";case"ColorDodge":return"color-dodge";case"ColorBurn":return"color-burn";case"HardLight":return"hard-light";case"SoftLight":return"soft-light";case"Difference":return"difference";case"Exclusion":return"exclusion";case"Hue":return"hue";case"Saturation":return"saturation";case"Color":return"color";case"Luminosity":return"luminosity"}return e?null:((0,i.warn)(`Unsupported blend mode: ${t.name}`),"source-over")}function P(t){t.fn===i.OPS.paintImageMaskXObject&&t.args[0]?.count>0&&t.args[0].count++}class R{static TIME_SLOT_DURATION_MS=20;static CHECK_TIME_EVERY=100;constructor(){this.reset()}check(){return!(++this.checked<R.CHECK_TIME_EVERY)&&(this.checked=0,this.endTime<=Date.now())}reset(){this.endTime=Date.now()+R.TIME_SLOT_DURATION_MS,this.checked=0}}class L{constructor({xref:t,handler:e,pageIndex:n,idFactory:i,fontCache:r,builtInCMapCache:o,standardFontDataCache:s,globalImageCache:a,systemFontCache:l,options:c=null}){this.xref=t,this.handler=e,this.pageIndex=n,this.idFactory=i,this.fontCache=r,this.builtInCMapCache=o,this.standardFontDataCache=s,this.globalImageCache=a,this.systemFontCache=l,this.options=c||M,this.parsingType3Font=!1,this._regionalImageCache=new f.RegionalImageCache,this._fetchBuiltInCMapBound=this.fetchBuiltInCMap.bind(this),k.ImageResizer.setMaxArea(this.options.canvasMaxAreaInBytes)}get _pdfFunctionFactory(){const t=new d.PDFFunctionFactory({xref:this.xref,isEvalSupported:this.options.isEvalSupported});return(0,i.shadow)(this,"_pdfFunctionFactory",t)}clone(t=null){const e=Object.create(this);return e.options=Object.assign(Object.create(null),this.options,t),e}hasBlendModes(t,e){if(!(t instanceof o.Dict))return!1;if(t.objId&&e.has(t.objId))return!1;const n=new o.RefSet(e);t.objId&&n.put(t.objId);const r=[t],s=this.xref;for(;r.length;){const t=r.shift(),e=t.get("ExtGState");if(e instanceof o.Dict)for(let t of e.getRawValues()){if(t instanceof o.Ref){if(n.has(t))continue;try{t=s.fetch(t)}catch(e){n.put(t),(0,i.info)(`hasBlendModes - ignoring ExtGState: "${e}".`);continue}}if(!(t instanceof o.Dict))continue;t.objId&&n.put(t.objId);const e=t.get("BM");if(e instanceof o.Name){if("Normal"!==e.name)return!0}else if(void 0!==e&&Array.isArray(e))for(const t of e)if(t instanceof o.Name&&"Normal"!==t.name)return!0}const a=t.get("XObject");if(a instanceof o.Dict)for(let t of a.getRawValues()){if(t instanceof o.Ref){if(n.has(t))continue;try{t=s.fetch(t)}catch(e){n.put(t),(0,i.info)(`hasBlendModes - ignoring XObject: "${e}".`);continue}}if(!(t instanceof m.BaseStream))continue;t.dict.objId&&n.put(t.dict.objId);const e=t.dict.get("Resources");e instanceof o.Dict&&(e.objId&&n.has(e.objId)||(r.push(e),e.objId&&n.put(e.objId)))}}for(const t of n)e.put(t);return!1}async fetchBuiltInCMap(t){const e=this.builtInCMapCache.get(t);if(e)return e;let n;if(null!==this.options.cMapUrl){const e=`${this.options.cMapUrl}${t}.bcmap`,r=await fetch(e);if(!r.ok)throw new Error(`fetchBuiltInCMap: failed to fetch file "${e}" with "${r.statusText}".`);n={cMapData:new Uint8Array(await r.arrayBuffer()),compressionType:i.CMapCompressionType.BINARY}}else n=await this.handler.sendWithPromise("FetchBuiltInCMap",{name:t});return n.compressionType!==i.CMapCompressionType.NONE&&this.builtInCMapCache.set(t,n),n}async fetchStandardFontData(t){const e=this.standardFontDataCache.get(t);if(e)return new g.Stream(e);if(this.options.useSystemFonts&&"Symbol"!==t&&"ZapfDingbats"!==t)return null;const n=(0,l.getFontNameToFileMap)()[t];let r;if(null!==this.options.standardFontDataUrl){const t=`${this.options.standardFontDataUrl}${n}`,e=await fetch(t);e.ok?r=await e.arrayBuffer():(0,i.warn)(`fetchStandardFontData: failed to fetch file "${t}" with "${e.statusText}".`)}else try{r=await this.handler.sendWithPromise("FetchStandardFontData",{filename:n})}catch(t){(0,i.warn)(`fetchStandardFontData: failed to fetch file "${n}" with "${t}".`)}return r?(this.standardFontDataCache.set(t,r),new g.Stream(r)):null}async buildFormXObject(t,e,n,r,s,a,l){const c=e.dict,h=c.getArray("Matrix");let u,d,p=c.getArray("BBox");p=Array.isArray(p)&&4===p.length?i.Util.normalizeRect(p):null,c.has("OC")&&(u=await this.parseMarkedContentProps(c.get("OC"),t)),void 0!==u&&r.addOp(i.OPS.beginMarkedContentProps,["OC",u]);const f=c.get("Group");if(f){d={matrix:h,bbox:p,smask:n,isolated:!1,knockout:!1};const e=f.get("S");let s=null;if((0,o.isName)(e,"Transparency")&&(d.isolated=f.get("I")||!1,d.knockout=f.get("K")||!1,f.has("CS"))){const e=f.getRaw("CS"),n=v.ColorSpace.getCached(e,this.xref,l);s=n||await this.parseColorSpace({cs:e,resources:t,localColorSpaceCache:l})}n?.backdrop&&(s||=v.ColorSpace.singletons.rgb,n.backdrop=s.getRgb(n.backdrop,0)),r.addOp(i.OPS.beginGroup,[d])}const g=f?[h,null]:[h,p];return r.addOp(i.OPS.paintFormXObjectBegin,g),this.getOperatorList({stream:e,task:s,resources:c.get("Resources")||t,operatorList:r,initialState:a}).then((function(){r.addOp(i.OPS.paintFormXObjectEnd,[]),f&&r.addOp(i.OPS.endGroup,[d]),void 0!==u&&r.addOp(i.OPS.endMarkedContent,[])}))}_sendImgData(t,e,n=!1){const i=e?[e.bitmap||e.data.buffer]:null;return this.parsingType3Font||n?this.handler.send("commonobj",[t,"Image",e],i):this.handler.send("obj",[t,this.pageIndex,"Image",e],i)}async buildPaintImageXObject({resources:t,image:e,isInline:n=!1,operatorList:r,cacheKey:o,localImageCache:s,localColorSpaceCache:a}){const l=e.dict,c=l.objId,h=l.get("W","Width"),u=l.get("H","Height");if(!h||"number"!=typeof h||!u||"number"!=typeof u)return void(0,i.warn)("Image dimensions are missing, or not numbers.");const d=this.options.maxImageSize;if(-1!==d&&h*u>d){const t="Image exceeded maximum allowed size and was removed.";if(this.options.ignoreErrors)return void(0,i.warn)(t);throw new Error(t)}let p,f,g;if(l.has("OC")&&(p=await this.parseMarkedContentProps(l.get("OC"),t)),l.get("IM","ImageMask")){const t=l.get("I","Interpolate"),n=h+7>>3,a=e.getBytes(n*u),d=l.getArray("D","Decode");if(this.parsingType3Font){if(f=T.PDFImage.createRawMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof b.DecodeStream,inverseDecode:d?.[0]>0,interpolate:t}),f.cached=!!o,g=[f],r.addImageOps(i.OPS.paintImageMaskXObject,g,p),o){const t={fn:i.OPS.paintImageMaskXObject,args:g,optionalContent:p};s.set(o,c,t),c&&this._regionalImageCache.set(null,c,t)}return}if(f=await T.PDFImage.createMask({imgArray:a,width:h,height:u,imageIsFromDecodeStream:e instanceof b.DecodeStream,inverseDecode:d?.[0]>0,interpolate:t,isOffscreenCanvasSupported:this.options.isOffscreenCanvasSupported}),f.isSingleOpaquePixel){if(r.addImageOps(i.OPS.paintSolidColorImageMask,[],p),o){const t={fn:i.OPS.paintSolidColorImageMask,args:[],optionalContent:p};s.set(o,c,t),c&&this._regionalImageCache.set(null,c,t)}return}const m=`mask_${this.idFactory.createObjId()}`;if(r.addDependency(m),this._sendImgData(m,f),g=[{data:m,width:f.width,height:f.height,interpolate:f.interpolate,count:1}],r.addImageOps(i.OPS.paintImageMaskXObject,g,p),o){const t={fn:i.OPS.paintImageMaskXObject,args:g,optionalContent:p};s.set(o,c,t),c&&this._regionalImageCache.set(null,c,t)}return}if(n&&!l.has("SMask")&&!l.has("Mask")&&h+u<200){const o=new T.PDFImage({xref:this.xref,res:t,image:e,isInline:n,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a});return f=await o.createImageData(!0,!1),r.isOffscreenCanvasSupported=this.options.isOffscreenCanvasSupported,void r.addImageOps(i.OPS.paintInlineImageXObject,[f],p)}let m=`img_${this.idFactory.createObjId()}`,y=!1;if(this.parsingType3Font?m=`${this.idFactory.getDocId()}_type3_${m}`:c&&(y=this.globalImageCache.shouldCache(c,this.pageIndex),y&&(m=`${this.idFactory.getDocId()}_${m}`)),r.addDependency(m),g=[m,h,u],T.PDFImage.buildImage({xref:this.xref,res:t,image:e,isInline:n,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:a}).then((async t=>{if(f=await t.createImageData(!1,this.options.isOffscreenCanvasSupported),o&&c&&y){const t=f.bitmap?f.width*f.height*4:f.data.length;this.globalImageCache.addByteSize(c,t)}return this._sendImgData(m,f,y)})).catch((t=>((0,i.warn)(`Unable to decode image "${m}": "${t}".`),this._sendImgData(m,null,y)))),r.addImageOps(i.OPS.paintImageXObject,g,p),o){const t={fn:i.OPS.paintImageXObject,args:g,optionalContent:p};s.set(o,c,t),c&&(this._regionalImageCache.set(null,c,t),y&&((0,i.assert)(!n,"Cannot cache an inline image globally."),this.globalImageCache.setData(c,{objId:m,fn:i.OPS.paintImageXObject,args:g,optionalContent:p,byteSize:0})))}}handleSMask(t,e,n,i,r,o){const s=t.get("G"),a={subtype:t.get("S").name,backdrop:t.get("BC")},l=t.get("TR");if((0,d.isPDFFunction)(l)){const t=this._pdfFunctionFactory.create(l),e=new Uint8Array(256),n=new Float32Array(1);for(let i=0;i<256;i++)n[0]=i/255,t(n,0,n,0),e[i]=255*n[0]|0;a.transferMap=e}return this.buildFormXObject(e,s,a,n,i,r.state.clone(),o)}handleTransferFunction(t){let e;if(Array.isArray(t))e=t;else{if(!(0,d.isPDFFunction)(t))return null;e=[t]}const n=[];let i=0,r=0;for(const t of e){const e=this.xref.fetchIfRef(t);if(i++,(0,o.isName)(e,"Identity")){n.push(null);continue}if(!(0,d.isPDFFunction)(e))return null;const s=this._pdfFunctionFactory.create(e),a=new Uint8Array(256),l=new Float32Array(1);for(let t=0;t<256;t++)l[0]=t/255,s(l,0,l,0),a[t]=255*l[0]|0;n.push(a),r++}return 1!==i&&4!==i||0===r?null:n}handleTilingType(t,e,n,r,s,a,l,h){const u=new E.OperatorList,d=o.Dict.merge({xref:this.xref,dictArray:[s.get("Resources"),n]});return this.getOperatorList({stream:r,task:l,resources:d,operatorList:u}).then((function(){const n=u.getIR(),i=(0,c.getTilingPatternIR)(n,s,e);a.addDependencies(u.dependencies),a.addOp(t,i),s.objId&&h.set(null,s.objId,{operatorListIR:n,dict:s})})).catch((t=>{if(!(t instanceof i.AbortException)){if(!this.options.ignoreErrors)throw t;(0,i.warn)(`handleTilingType - ignoring pattern: "${t}".`)}}))}handleSetFont(t,e,n,i,r,a,l=null,c=null){const h=e?.[0]instanceof o.Name?e[0].name:null;return this.loadFont(h,n,t,l,c).then((e=>e.font.isType3Font?e.loadType3Data(this,t,r).then((function(){return i.addDependencies(e.type3Dependencies),e})).catch((t=>new N({loadedName:"g_font_error",font:new s.ErrorFont(`Type3 font load error: ${t}`),dict:e.font,evaluatorOptions:this.options}))):e)).then((t=>(a.font=t.font,t.send(this.handler),t.loadedName)))}handleText(t,e){const n=e.font,r=n.charsToGlyphs(t);return n.data&&(e.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG||"Pattern"===e.fillColorSpace.name||n.disableFontFace||this.options.disableFontFace)&&L.buildFontPaths(n,r,this.handler,this.options),r}ensureStateFont(t){if(t.font)return;const e=new i.FormatError("Missing setFont (Tf) operator before text rendering operator.");if(!this.options.ignoreErrors)throw e;(0,i.warn)(`ensureStateFont: "${e}".`)}async setGState({resources:t,gState:e,operatorList:n,cacheKey:r,task:s,stateManager:a,localGStateCache:l,localColorSpaceCache:c}){const h=e.objId;let u=!0;const d=[];let p=Promise.resolve();for(const r of e.getKeys()){const l=e.get(r);switch(r){case"Type":break;case"LW":case"LC":case"LJ":case"ML":case"D":case"RI":case"FL":case"CA":case"ca":d.push([r,l]);break;case"Font":u=!1,p=p.then((()=>this.handleSetFont(t,null,l[0],n,s,a.state).then((function(t){n.addDependency(t),d.push([r,[t,l[1]]])}))));break;case"BM":d.push([r,F(l)]);break;case"SMask":if((0,o.isName)(l,"None")){d.push([r,!1]);break}l instanceof o.Dict?(u=!1,p=p.then((()=>this.handleSMask(l,t,n,s,a,c))),d.push([r,!0])):(0,i.warn)("Unsupported SMask type");break;case"TR":const e=this.handleTransferFunction(l);d.push([r,e]);break;case"OP":case"op":case"OPM":case"BG":case"BG2":case"UCR":case"UCR2":case"TR2":case"HT":case"SM":case"SA":case"AIS":case"TK":(0,i.info)("graphic state operator "+r);break;default:(0,i.info)("Unknown graphic state operator "+r)}}return p.then((function(){d.length>0&&n.addOp(i.OPS.setGState,[d]),u&&l.set(r,h,d)}))}loadFont(t,e,n,r=null,a=null){const l=async()=>new N({loadedName:"g_font_error",font:new s.ErrorFont(`Font "${t}" is not available.`),dict:e,evaluatorOptions:this.options});let c;if(e)e instanceof o.Ref&&(c=e);else{const e=n.get("Font");e&&(c=e.getRaw(t))}if(c){if(this.parsingType3Font&&this.type3FontRefs.has(c))return l();if(this.fontCache.has(c))return this.fontCache.get(c);e=this.xref.fetchIfRef(c)}if(!(e instanceof o.Dict)){if(!this.options.ignoreErrors&&!this.parsingType3Font)return(0,i.warn)(`Font "${t}" is not available.`),l();(0,i.warn)(`Font "${t}" is not available -- attempting to fallback to a default font.`),e=r||L.fallbackFontDict}if(e.cacheKey&&this.fontCache.has(e.cacheKey))return this.fontCache.get(e.cacheKey);const h=new i.PromiseCapability;let u;try{u=this.preEvaluateFont(e),u.cssFontInfo=a}catch(t){return(0,i.warn)(`loadFont - preEvaluateFont failed: "${t}".`),l()}const{descriptor:d,hash:p}=u,f=c instanceof o.Ref;let g;if(p&&d instanceof o.Dict){const t=d.fontAliases||=Object.create(null);if(t[p]){const e=t[p].aliasRef;if(f&&e&&this.fontCache.has(e))return this.fontCache.putAlias(c,e),this.fontCache.get(c)}else t[p]={fontID:this.idFactory.createFontId()};f&&(t[p].aliasRef=c),g=t[p].fontID}else g=this.idFactory.createFontId();return(0,i.assert)(g?.startsWith("f"),'The "fontID" must be (correctly) defined.'),f?this.fontCache.put(c,h.promise):(e.cacheKey=`cacheKey_${g}`,this.fontCache.put(e.cacheKey,h.promise)),e.loadedName=`${this.idFactory.getDocId()}_${g}`,this.translateFont(u).then((t=>{h.resolve(new N({loadedName:e.loadedName,font:t,dict:e,evaluatorOptions:this.options}))})).catch((t=>{(0,i.warn)(`loadFont - translateFont failed: "${t}".`),h.resolve(new N({loadedName:e.loadedName,font:new s.ErrorFont(t instanceof Error?t.message:t),dict:e,evaluatorOptions:this.options}))})),h.promise}buildPath(t,e,n,r=!1){const o=t.length-1;if(n||(n=[]),o<0||t.fnArray[o]!==i.OPS.constructPath){let o;switch(r&&((0,i.warn)(`Encountered path operator "${e}" inside of a text object.`),t.addOp(i.OPS.save,null)),e){case i.OPS.rectangle:const t=n[0]+n[2],e=n[1]+n[3];o=[Math.min(n[0],t),Math.max(n[0],t),Math.min(n[1],e),Math.max(n[1],e)];break;case i.OPS.moveTo:case i.OPS.lineTo:o=[n[0],n[0],n[1],n[1]];break;default:o=[1/0,-1/0,1/0,-1/0]}t.addOp(i.OPS.constructPath,[[e],n,o]),r&&t.addOp(i.OPS.restore,null)}else{const r=t.argsArray[o];r[0].push(e),r[1].push(...n);const s=r[2];switch(e){case i.OPS.rectangle:const t=n[0]+n[2],e=n[1]+n[3];s[0]=Math.min(s[0],n[0],t),s[1]=Math.max(s[1],n[0],t),s[2]=Math.min(s[2],n[1],e),s[3]=Math.max(s[3],n[1],e);break;case i.OPS.moveTo:case i.OPS.lineTo:s[0]=Math.min(s[0],n[0]),s[1]=Math.max(s[1],n[0]),s[2]=Math.min(s[2],n[1]),s[3]=Math.max(s[3],n[1])}}}parseColorSpace({cs:t,resources:e,localColorSpaceCache:n}){return v.ColorSpace.parseAsync({cs:t,xref:this.xref,resources:e,pdfFunctionFactory:this._pdfFunctionFactory,localColorSpaceCache:n}).catch((t=>{if(t instanceof i.AbortException)return null;if(this.options.ignoreErrors)return(0,i.warn)(`parseColorSpace - ignoring ColorSpace: "${t}".`),null;throw t}))}parseShading({shading:t,resources:e,localColorSpaceCache:n,localShadingPatternCache:i}){let r=i.get(t);if(!r){const o=c.Pattern.parseShading(t,this.xref,e,this._pdfFunctionFactory,n).getIR();r=`pattern_${this.idFactory.createObjId()}`,this.parsingType3Font&&(r=`${this.idFactory.getDocId()}_type3_${r}`),i.set(t,r),this.parsingType3Font?this.handler.send("commonobj",[r,"Pattern",o]):this.handler.send("obj",[r,this.pageIndex,"Pattern",o])}return r}handleColorN(t,e,n,r,s,a,l,h,u,d){const p=n.pop();if(p instanceof o.Name){const f=s.getRaw(p.name),g=f instanceof o.Ref&&u.getByRef(f);if(g)try{const i=r.base?r.base.getRgb(n,0):null,o=(0,c.getTilingPatternIR)(g.operatorListIR,g.dict,i);return void t.addOp(e,o)}catch{}const y=this.xref.fetchIfRef(f);if(y){const o=y instanceof m.BaseStream?y.dict:y,s=o.get("PatternType");if(s===O){const i=r.base?r.base.getRgb(n,0):null;return this.handleTilingType(e,i,a,y,o,t,l,u)}if(s===I){const n=o.get("Shading"),i=o.getArray("Matrix"),r=this.parseShading({shading:n,resources:a,localColorSpaceCache:h,localShadingPatternCache:d});return void t.addOp(e,["Shading",r,i])}throw new i.FormatError(`Unknown PatternType: ${s}`)}}throw new i.FormatError(`Unknown PatternName: ${p}`)}_parseVisibilityExpression(t,e,n){if(++e>10)return void(0,i.warn)("Visibility expression is too deeply nested");const r=t.length,s=this.xref.fetchIfRef(t[0]);if(!(r<2)&&s instanceof o.Name){switch(s.name){case"And":case"Or":case"Not":n.push(s.name);break;default:return void(0,i.warn)(`Invalid operator ${s.name} in visibility expression`)}for(let i=1;i<r;i++){const r=t[i],s=this.xref.fetchIfRef(r);if(Array.isArray(s)){const t=[];n.push(t),this._parseVisibilityExpression(s,e,t)}else r instanceof o.Ref&&n.push(r.toString())}}else(0,i.warn)("Invalid visibility expression")}async parseMarkedContentProps(t,e){let n;if(t instanceof o.Name)n=e.get("Properties").get(t.name);else{if(!(t instanceof o.Dict))throw new i.FormatError("Optional content properties malformed.");n=t}const r=n.get("Type")?.name;if("OCG"===r)return{type:r,id:n.objId};if("OCMD"===r){const t=n.get("VE");if(Array.isArray(t)){const e=[];if(this._parseVisibilityExpression(t,0,e),e.length>0)return{type:"OCMD",expression:e}}const e=n.get("OCGs");if(Array.isArray(e)||e instanceof o.Dict){const t=[];if(Array.isArray(e))for(const n of e)t.push(n.toString());else t.push(e.objId);return{type:r,ids:t,policy:n.get("P")instanceof o.Name?n.get("P").name:null,expression:null}}if(e instanceof o.Ref)return{type:r,id:e.toString()}}return null}getOperatorList({stream:t,task:e,resources:n,operatorList:r,initialState:s=null,fallbackFontDict:a=null}){if(n||=o.Dict.empty,s||=new z,!r)throw new Error('getOperatorList: missing "operatorList" parameter');const l=this,c=this.xref;let h=!1;const u=new f.LocalImageCache,d=new f.LocalColorSpaceCache,p=new f.LocalGStateCache,g=new f.LocalTilingPatternCache,y=new Map,b=n.get("XObject")||o.Dict.empty,w=n.get("Pattern")||o.Dict.empty,x=new B(s),_=new $(t,c,x),S=new R;function C(t){for(let t=0,e=_.savedStatesDepth;t<e;t++)r.addOp(i.OPS.restore,[])}return new Promise((function t(s,f){const k=function(e){Promise.all([e,r.ready]).then((function(){try{t(s,f)}catch(t){f(t)}}),f)};e.ensureNotTerminated(),S.reset();const A={};let E,T,M,O,I,F;for(;!(E=S.check())&&(A.args=null,_.read(A));){let t=A.args,s=A.fn;switch(0|s){case i.OPS.paintXObject:if(F=t[0]instanceof o.Name,I=t[0].name,F){const e=u.getByName(I);if(e){r.addImageOps(e.fn,e.args,e.optionalContent),P(e),t=null;continue}}return void k(new Promise((function(t,s){if(!F)throw new i.FormatError("XObject must be referred to by name.");let a=b.getRaw(I);if(a instanceof o.Ref){const e=u.getByRef(a)||l._regionalImageCache.getByRef(a);if(e)return r.addImageOps(e.fn,e.args,e.optionalContent),P(e),void t();const n=l.globalImageCache.getData(a,l.pageIndex);if(n)return r.addDependency(n.objId),r.addImageOps(n.fn,n.args,n.optionalContent),void t();a=c.fetch(a)}if(!(a instanceof m.BaseStream))throw new i.FormatError("XObject should be a stream");const h=a.dict.get("Subtype");if(!(h instanceof o.Name))throw new i.FormatError("XObject should have a Name subtype");if("Form"===h.name)return x.save(),void l.buildFormXObject(n,a,null,r,e,x.state.clone(),d).then((function(){x.restore(),t()}),s);if("Image"!==h.name){if("PS"!==h.name)throw new i.FormatError(`Unhandled XObject subtype ${h.name}`);(0,i.info)("Ignored XObject subtype PS"),t()}else l.buildPaintImageXObject({resources:n,image:a,operatorList:r,cacheKey:I,localImageCache:u,localColorSpaceCache:d}).then(t,s)})).catch((function(t){if(!(t instanceof i.AbortException)){if(!l.options.ignoreErrors)throw t;(0,i.warn)(`getOperatorList - ignoring XObject: "${t}".`)}})));case i.OPS.setFont:var R=t[1];return void k(l.handleSetFont(n,t,null,r,e,x.state,a).then((function(t){r.addDependency(t),r.addOp(i.OPS.setFont,[t,R])})));case i.OPS.beginText:h=!0;break;case i.OPS.endText:h=!1;break;case i.OPS.endInlineImage:var L=t[0].cacheKey;if(L){const e=u.getByName(L);if(e){r.addImageOps(e.fn,e.args,e.optionalContent),P(e),t=null;continue}}return void k(l.buildPaintImageXObject({resources:n,image:t[0],isInline:!0,operatorList:r,cacheKey:L,localImageCache:u,localColorSpaceCache:d}));case i.OPS.showText:if(!x.state.font){l.ensureStateFont(x.state);continue}t[0]=l.handleText(t[0],x.state);break;case i.OPS.showSpacedText:if(!x.state.font){l.ensureStateFont(x.state);continue}var N=[],B=x.state;for(const e of t[0])"string"==typeof e?N.push(...l.handleText(e,B)):"number"==typeof e&&N.push(e);t[0]=N,s=i.OPS.showText;break;case i.OPS.nextLineShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}r.addOp(i.OPS.nextLine),t[0]=l.handleText(t[0],x.state),s=i.OPS.showText;break;case i.OPS.nextLineSetSpacingShowText:if(!x.state.font){l.ensureStateFont(x.state);continue}r.addOp(i.OPS.nextLine),r.addOp(i.OPS.setWordSpacing,[t.shift()]),r.addOp(i.OPS.setCharSpacing,[t.shift()]),t[0]=l.handleText(t[0],x.state),s=i.OPS.showText;break;case i.OPS.setTextRenderingMode:x.state.textRenderingMode=t[0];break;case i.OPS.setFillColorSpace:{const e=v.ColorSpace.getCached(t[0],c,d);if(e){x.state.fillColorSpace=e;continue}return void k(l.parseColorSpace({cs:t[0],resources:n,localColorSpaceCache:d}).then((function(t){t&&(x.state.fillColorSpace=t)})))}case i.OPS.setStrokeColorSpace:{const e=v.ColorSpace.getCached(t[0],c,d);if(e){x.state.strokeColorSpace=e;continue}return void k(l.parseColorSpace({cs:t[0],resources:n,localColorSpaceCache:d}).then((function(t){t&&(x.state.strokeColorSpace=t)})))}case i.OPS.setFillColor:O=x.state.fillColorSpace,t=O.getRgb(t,0),s=i.OPS.setFillRGBColor;break;case i.OPS.setStrokeColor:O=x.state.strokeColorSpace,t=O.getRgb(t,0),s=i.OPS.setStrokeRGBColor;break;case i.OPS.setFillGray:x.state.fillColorSpace=v.ColorSpace.singletons.gray,t=v.ColorSpace.singletons.gray.getRgb(t,0),s=i.OPS.setFillRGBColor;break;case i.OPS.setStrokeGray:x.state.strokeColorSpace=v.ColorSpace.singletons.gray,t=v.ColorSpace.singletons.gray.getRgb(t,0),s=i.OPS.setStrokeRGBColor;break;case i.OPS.setFillCMYKColor:x.state.fillColorSpace=v.ColorSpace.singletons.cmyk,t=v.ColorSpace.singletons.cmyk.getRgb(t,0),s=i.OPS.setFillRGBColor;break;case i.OPS.setStrokeCMYKColor:x.state.strokeColorSpace=v.ColorSpace.singletons.cmyk,t=v.ColorSpace.singletons.cmyk.getRgb(t,0),s=i.OPS.setStrokeRGBColor;break;case i.OPS.setFillRGBColor:x.state.fillColorSpace=v.ColorSpace.singletons.rgb,t=v.ColorSpace.singletons.rgb.getRgb(t,0);break;case i.OPS.setStrokeRGBColor:x.state.strokeColorSpace=v.ColorSpace.singletons.rgb,t=v.ColorSpace.singletons.rgb.getRgb(t,0);break;case i.OPS.setFillColorN:if(O=x.state.fillColorSpace,"Pattern"===O.name)return void k(l.handleColorN(r,i.OPS.setFillColorN,t,O,w,n,e,d,g,y));t=O.getRgb(t,0),s=i.OPS.setFillRGBColor;break;case i.OPS.setStrokeColorN:if(O=x.state.strokeColorSpace,"Pattern"===O.name)return void k(l.handleColorN(r,i.OPS.setStrokeColorN,t,O,w,n,e,d,g,y));t=O.getRgb(t,0),s=i.OPS.setStrokeRGBColor;break;case i.OPS.shadingFill:var j=n.get("Shading");if(!j)throw new i.FormatError("No shading resource found");var z=j.get(t[0].name);if(!z)throw new i.FormatError("No shading object found");t=[l.parseShading({shading:z,resources:n,localColorSpaceCache:d,localShadingPatternCache:y})],s=i.OPS.shadingFill;break;case i.OPS.setGState:if(F=t[0]instanceof o.Name,I=t[0].name,F){const e=p.getByName(I);if(e){e.length>0&&r.addOp(i.OPS.setGState,[e]),t=null;continue}}return void k(new Promise((function(t,s){if(!F)throw new i.FormatError("GState must be referred to by name.");const a=n.get("ExtGState");if(!(a instanceof o.Dict))throw new i.FormatError("ExtGState should be a dictionary.");const c=a.get(I);if(!(c instanceof o.Dict))throw new i.FormatError("GState should be a dictionary.");l.setGState({resources:n,gState:c,operatorList:r,cacheKey:I,task:e,stateManager:x,localGStateCache:p,localColorSpaceCache:d}).then(t,s)})).catch((function(t){if(!(t instanceof i.AbortException)){if(!l.options.ignoreErrors)throw t;(0,i.warn)(`getOperatorList - ignoring ExtGState: "${t}".`)}})));case i.OPS.moveTo:case i.OPS.lineTo:case i.OPS.curveTo:case i.OPS.curveTo2:case i.OPS.curveTo3:case i.OPS.closePath:case i.OPS.rectangle:l.buildPath(r,s,t,h);continue;case i.OPS.markPoint:case i.OPS.markPointProps:case i.OPS.beginCompat:case i.OPS.endCompat:continue;case i.OPS.beginMarkedContentProps:if(!(t[0]instanceof o.Name)){(0,i.warn)(`Expected name for beginMarkedContentProps arg0=${t[0]}`);continue}if("OC"===t[0].name)return void k(l.parseMarkedContentProps(t[1],n).then((t=>{r.addOp(i.OPS.beginMarkedContentProps,["OC",t])})).catch((t=>{if(!(t instanceof i.AbortException)){if(!l.options.ignoreErrors)throw t;(0,i.warn)(`getOperatorList - ignoring beginMarkedContentProps: "${t}".`)}})));t=[t[0].name,t[1]instanceof o.Dict?t[1].get("MCID"):null];break;case i.OPS.beginMarkedContent:case i.OPS.endMarkedContent:default:if(null!==t){for(T=0,M=t.length;T<M&&!(t[T]instanceof o.Dict);T++);if(T<M){(0,i.warn)("getOperatorList - ignoring operator: "+s);continue}}}r.addOp(s,t)}E?k(D):(C(),s())})).catch((t=>{if(!(t instanceof i.AbortException)){if(this.options.ignoreErrors)return(0,i.warn)(`getOperatorList - ignoring errors during "${e.name}" task: "${t}".`),void C();throw t}}))}getTextContent({stream:t,task:e,resources:n,stateManager:r=null,includeMarkedContent:s=!1,sink:a,seenStyles:l=new Set,viewBox:c,markedContentData:h=null,disableNormalization:u=!1}){n||=o.Dict.empty,r||=new B(new j),s&&(h||={level:0});const d={items:[],styles:Object.create(null)},p={initialized:!1,str:[],totalWidth:0,totalHeight:0,width:0,height:0,vertical:!1,prevTransform:null,textAdvanceScale:0,spaceInFlowMin:0,spaceInFlowMax:0,trackingSpaceMin:1/0,negativeSpaceMax:-1/0,notASpace:-1/0,transform:null,fontName:null,hasEOL:!1},g=[" "," "];let v=0;function b(t){const e=(v+1)%2,n=" "!==g[v]&&" "===g[e];return g[v]=t,v=e,n}function w(){return" "!==g[v]&&" "===g[(v+1)%2]}function x(){g[0]=g[1]=" ",v=0}const _=this,S=this.xref,C=[];let k=null;const A=new f.LocalImageCache,E=new f.LocalGStateCache,T=new $(t,S,r);let M;function O({width:t=0,height:e=0,transform:n=p.prevTransform,fontName:i=p.fontName}){d.items.push({str:" ",dir:"ltr",width:t,height:e,transform:n,fontName:i,hasEOL:!1})}function I(){const t=M.font,e=[M.fontSize*M.textHScale,0,0,M.fontSize,0,M.textRise];if(t.isType3Font&&(M.fontSize<=1||t.isCharBBox)&&!(0,i.isArrayEqual)(M.fontMatrix,i.FONT_IDENTITY_MATRIX)){const n=t.bbox[3]-t.bbox[1];n>0&&(e[3]*=n*M.fontMatrix[3])}return i.Util.transform(M.ctm,i.Util.transform(M.textMatrix,e))}function F(){if(p.initialized)return p;const{font:t,loadedName:e}=M;l.has(e)||(l.add(e),d.styles[e]={fontFamily:t.fallbackName,ascent:t.ascent,descent:t.descent,vertical:t.vertical}),p.fontName=e;const n=p.transform=I();t.vertical?(p.width=p.totalWidth=Math.hypot(n[0],n[1]),p.height=p.totalHeight=0,p.vertical=!0):(p.width=p.totalWidth=0,p.height=p.totalHeight=Math.hypot(n[2],n[3]),p.vertical=!1);const i=Math.hypot(M.textLineMatrix[0],M.textLineMatrix[1]),r=Math.hypot(M.ctm[0],M.ctm[1]);p.textAdvanceScale=r*i;const{fontSize:o}=M;return p.trackingSpaceMin=.102*o,p.notASpace=.03*o,p.negativeSpaceMax=-.2*o,p.spaceInFlowMin=.102*o,p.spaceInFlowMax=.6*o,p.hasEOL=!1,p.initialized=!0,p}function P(){if(!p.initialized)return;const t=Math.hypot(M.textLineMatrix[0],M.textLineMatrix[1]),e=Math.hypot(M.ctm[0],M.ctm[1])*t;e!==p.textAdvanceScale&&(p.vertical?(p.totalHeight+=p.height*p.textAdvanceScale,p.height=0):(p.totalWidth+=p.width*p.textAdvanceScale,p.width=0),p.textAdvanceScale=e)}function L(t,r){return _.loadFont(t,r,n).then((function(t){return t.font.isType3Font?t.loadType3Data(_,n,e).catch((function(){})).then((function(){return t})):t})).then((function(t){M.loadedName=t.loadedName,M.font=t.font,M.fontMatrix=t.font.fontMatrix||i.FONT_IDENTITY_MATRIX}))}function N(t,e,n){const i=Math.hypot(n[0],n[1]);return[(n[0]*t+n[1]*e)/i,(n[2]*t+n[3]*e)/i]}function z(t){const e=I();let n=e[4],i=e[5];if(M.font?.vertical){if(n<c[0]||n>c[2]||i+t<c[1]||i>c[3])return!1}else if(n+t<c[0]||n>c[2]||i<c[1]||i>c[3])return!1;if(!M.font||!p.prevTransform)return!0;let r=p.prevTransform[4],o=p.prevTransform[5];if(r===n&&o===i)return!0;let s=-1;switch(e[0]&&0===e[1]&&0===e[2]?s=e[0]>0?0:180:e[1]&&0===e[0]&&0===e[3]&&(s=e[1]>0?90:270),s){case 0:break;case 90:[n,i]=[i,n],[r,o]=[o,r];break;case 180:[n,i,r,o]=[-n,-i,-r,-o];break;case 270:[n,i]=[-i,-n],[r,o]=[-o,-r];break;default:[n,i]=N(n,i,e),[r,o]=N(r,o,p.prevTransform)}if(M.font.vertical){const t=(o-i)/p.textAdvanceScale,e=n-r,s=Math.sign(p.height);return t<s*p.negativeSpaceMax?Math.abs(e)>.5*p.width?(U(),!0):(x(),W(),!0):Math.abs(e)>p.width?(U(),!0):(t<=s*p.notASpace&&x(),t<=s*p.trackingSpaceMin?w()?(x(),W(),O({height:Math.abs(t)})):p.height+=t:V(t,p.prevTransform,s)||(0===p.str.length?(x(),O({height:Math.abs(t)})):p.height+=t),Math.abs(e)>.25*p.width&&W(),!0)}const a=(n-r)/p.textAdvanceScale,l=i-o,h=Math.sign(p.width);return a<h*p.negativeSpaceMax?Math.abs(l)>.5*p.height?(U(),!0):(x(),W(),!0):Math.abs(l)>p.height?(U(),!0):(a<=h*p.notASpace&&x(),a<=h*p.trackingSpaceMin?w()?(x(),W(),O({width:Math.abs(a)})):p.width+=a:V(a,p.prevTransform,h)||(0===p.str.length?(x(),O({width:Math.abs(a)})):p.width+=a),Math.abs(l)>.25*p.height&&W(),!0)}function H({chars:t,extraSpacing:e}){const n=M.font;if(!t){const t=M.charSpacing+e;return void(t&&(n.vertical?M.translateTextMatrix(0,-t):M.translateTextMatrix(t*M.textHScale,0)))}const i=n.charsToGlyphs(t),r=M.fontMatrix[0]*M.fontSize;for(let t=0,o=i.length;t<o;t++){const s=i[t],{category:a}=s;if(a.isInvisibleFormatMark)continue;let l=M.charSpacing+(t+1===o?e:0),c=s.width;n.vertical&&(c=s.vmetric?s.vmetric[0]:-c);let h=c*r;if(a.isWhitespace){n.vertical?(l+=-h+M.wordSpacing,M.translateTextMatrix(0,-l)):(l+=h+M.wordSpacing,M.translateTextMatrix(l*M.textHScale,0)),b(" ");continue}if(!a.isZeroWidthDiacritic&&!z(h)){n.vertical?M.translateTextMatrix(0,h):M.translateTextMatrix(h*M.textHScale,0);continue}const u=F();a.isZeroWidthDiacritic&&(h=0),n.vertical?(M.translateTextMatrix(0,h),h=Math.abs(h),u.height+=h):(h*=M.textHScale,M.translateTextMatrix(h,0),u.width+=h),h&&(u.prevTransform=I());const d=s.unicode;b(d)&&u.str.push(" "),u.str.push(d),l&&(n.vertical?M.translateTextMatrix(0,-l):M.translateTextMatrix(l*M.textHScale,0))}}function U(){x(),p.initialized?(p.hasEOL=!0,W()):d.items.push({str:"",dir:"ltr",width:0,height:0,transform:I(),fontName:M.loadedName,hasEOL:!0})}function V(t,e,n){if(n*p.spaceInFlowMin<=t&&t<=n*p.spaceInFlowMax)return p.initialized&&(x(),p.str.push(" ")),!1;const i=p.fontName;let r=0;return p.vertical&&(r=t,t=0),W(),x(),O({width:Math.abs(t),height:Math.abs(r),transform:e||I(),fontName:i}),!0}function W(){p.initialized&&p.str&&(p.vertical?p.totalHeight+=p.height*p.textAdvanceScale:p.totalWidth+=p.width*p.textAdvanceScale,d.items.push(function(t){let e=t.str.join("");u||(e=(0,i.normalizeUnicode)(e));const n=(0,y.bidi)(e,-1,t.vertical);return{str:n.str,dir:n.dir,width:Math.abs(t.totalWidth),height:Math.abs(t.totalHeight),transform:t.transform,fontName:t.fontName,hasEOL:t.hasEOL}}(p)),p.initialized=!1,p.str.length=0)}function q(t=!1){const e=d.items.length;0!==e&&(t&&e<10||(a.enqueue(d,e),d.items=[],d.styles=Object.create(null)))}const K=new R;return new Promise((function t(p,f){const g=function(e){q(!0),Promise.all([e,a.ready]).then((function(){try{t(p,f)}catch(t){f(t)}}),f)};e.ensureNotTerminated(),K.reset();const y={};let v,b=[];for(;!(v=K.check())&&(b.length=0,y.args=b,T.read(y));){const t=M;M=r.state;const p=y.fn;switch(b=y.args,0|p){case i.OPS.setFont:var w=b[0].name,x=b[1];if(M.font&&w===M.fontName&&x===M.fontSize)break;return W(),M.fontName=w,M.fontSize=x,void g(L(w,null));case i.OPS.setTextRise:M.textRise=b[0];break;case i.OPS.setHScale:M.textHScale=b[0]/100;break;case i.OPS.setLeading:M.leading=b[0];break;case i.OPS.moveText:M.translateTextLineMatrix(b[0],b[1]),M.textMatrix=M.textLineMatrix.slice();break;case i.OPS.setLeadingMoveText:M.leading=-b[1],M.translateTextLineMatrix(b[0],b[1]),M.textMatrix=M.textLineMatrix.slice();break;case i.OPS.nextLine:M.carriageReturn();break;case i.OPS.setTextMatrix:M.setTextMatrix(b[0],b[1],b[2],b[3],b[4],b[5]),M.setTextLineMatrix(b[0],b[1],b[2],b[3],b[4],b[5]),P();break;case i.OPS.setCharSpacing:M.charSpacing=b[0];break;case i.OPS.setWordSpacing:M.wordSpacing=b[0];break;case i.OPS.beginText:M.textMatrix=i.IDENTITY_MATRIX.slice(),M.textLineMatrix=i.IDENTITY_MATRIX.slice();break;case i.OPS.showSpacedText:if(!r.state.font){_.ensureStateFont(r.state);continue}const p=(M.font.vertical?1:-1)*M.fontSize/1e3,f=b[0];for(let t=0,e=f.length;t<e;t++){const e=f[t];if("string"==typeof e)C.push(e);else if("number"==typeof e&&0!==e){const t=C.join("");C.length=0,H({chars:t,extraSpacing:e*p})}}if(C.length>0){const t=C.join("");C.length=0,H({chars:t,extraSpacing:0})}break;case i.OPS.showText:if(!r.state.font){_.ensureStateFont(r.state);continue}H({chars:b[0],extraSpacing:0});break;case i.OPS.nextLineShowText:if(!r.state.font){_.ensureStateFont(r.state);continue}M.carriageReturn(),H({chars:b[0],extraSpacing:0});break;case i.OPS.nextLineSetSpacingShowText:if(!r.state.font){_.ensureStateFont(r.state);continue}M.wordSpacing=b[0],M.charSpacing=b[1],M.carriageReturn(),H({chars:b[2],extraSpacing:0});break;case i.OPS.paintXObject:W(),k||(k=n.get("XObject")||o.Dict.empty);var O=b[0]instanceof o.Name,I=b[0].name;if(O&&A.getByName(I))break;return void g(new Promise((function(t,d){if(!O)throw new i.FormatError("XObject must be referred to by name.");let p=k.getRaw(I);if(p instanceof o.Ref){if(A.getByRef(p))return void t();if(_.globalImageCache.getData(p,_.pageIndex))return void t();p=S.fetch(p)}if(!(p instanceof m.BaseStream))throw new i.FormatError("XObject should be a stream");const f=p.dict.get("Subtype");if(!(f instanceof o.Name))throw new i.FormatError("XObject should have a Name subtype");if("Form"!==f.name)return A.set(I,p.dict.objId,!0),void t();const g=r.state.clone(),y=new B(g),v=p.dict.getArray("Matrix");Array.isArray(v)&&6===v.length&&y.transform(v),q();const b={enqueueInvoked:!1,enqueue(t,e){this.enqueueInvoked=!0,a.enqueue(t,e)},get desiredSize(){return a.desiredSize},get ready(){return a.ready}};_.getTextContent({stream:p,task:e,resources:p.dict.get("Resources")||n,stateManager:y,includeMarkedContent:s,sink:b,seenStyles:l,viewBox:c,markedContentData:h,disableNormalization:u}).then((function(){b.enqueueInvoked||A.set(I,p.dict.objId,!0),t()}),d)})).catch((function(t){if(!(t instanceof i.AbortException)){if(!_.options.ignoreErrors)throw t;(0,i.warn)(`getTextContent - ignoring XObject: "${t}".`)}})));case i.OPS.setGState:if(O=b[0]instanceof o.Name,I=b[0].name,O&&E.getByName(I))break;return void g(new Promise((function(t,e){if(!O)throw new i.FormatError("GState must be referred to by name.");const r=n.get("ExtGState");if(!(r instanceof o.Dict))throw new i.FormatError("ExtGState should be a dictionary.");const s=r.get(I);if(!(s instanceof o.Dict))throw new i.FormatError("GState should be a dictionary.");const a=s.get("Font");if(!a)return E.set(I,s.objId,!0),void t();W(),M.fontName=null,M.fontSize=a[1],L(null,a[0]).then(t,e)})).catch((function(t){if(!(t instanceof i.AbortException)){if(!_.options.ignoreErrors)throw t;(0,i.warn)(`getTextContent - ignoring ExtGState: "${t}".`)}})));case i.OPS.beginMarkedContent:W(),s&&(h.level++,d.items.push({type:"beginMarkedContent",tag:b[0]instanceof o.Name?b[0].name:null}));break;case i.OPS.beginMarkedContentProps:if(W(),s){h.level++;let t=null;b[1]instanceof o.Dict&&(t=b[1].get("MCID")),d.items.push({type:"beginMarkedContentProps",id:Number.isInteger(t)?`${_.idFactory.getPageObjId()}_mc${t}`:null,tag:b[0]instanceof o.Name?b[0].name:null})}break;case i.OPS.endMarkedContent:if(W(),s){if(0===h.level)break;h.level--,d.items.push({type:"endMarkedContent"})}break;case i.OPS.restore:!t||t.font===M.font&&t.fontSize===M.fontSize&&t.fontName===M.fontName||W()}if(d.items.length>=a.desiredSize){v=!0;break}}v?g(D):(W(),q(),p())})).catch((t=>{if(!(t instanceof i.AbortException)){if(this.options.ignoreErrors)return(0,i.warn)(`getTextContent - ignoring errors during "${e.name}" task: "${t}".`),W(),void q();throw t}}))}extractDataStructures(t,e,n){const r=this.xref;let s;const c=this.readToUnicode(n.toUnicode||t.get("ToUnicode")||e.get("ToUnicode"));if(n.composite){const e=t.get("CIDSystemInfo");e instanceof o.Dict&&(n.cidSystemInfo={registry:(0,i.stringToPDFString)(e.get("Registry")),ordering:(0,i.stringToPDFString)(e.get("Ordering")),supplement:e.get("Supplement")});try{const e=t.get("CIDToGIDMap");e instanceof m.BaseStream&&(s=e.getBytes())}catch(t){if(!this.options.ignoreErrors)throw t;(0,i.warn)(`extractDataStructures - ignoring CIDToGIDMap data: "${t}".`)}}const h=[];let u,d=null;if(t.has("Encoding")){if(u=t.get("Encoding"),u instanceof o.Dict){if(d=u.get("BaseEncoding"),d=d instanceof o.Name?d.name:null,u.has("Differences")){const t=u.get("Differences");let e=0;for(const n of t){const t=r.fetchIfRef(n);if("number"==typeof t)e=t;else{if(!(t instanceof o.Name))throw new i.FormatError(`Invalid entry in 'Differences' array: ${t}`);h[e++]=t.name}}}}else if(u instanceof o.Name)d=u.name;else{const t="Encoding is not a Name nor a Dict";if(!this.options.ignoreErrors)throw new i.FormatError(t);(0,i.warn)(t)}"MacRomanEncoding"!==d&&"MacExpertEncoding"!==d&&"WinAnsiEncoding"!==d&&(d=null)}const p=!n.file||n.isInternalFont,f=(0,l.getSymbolsFonts)()[n.name];if(d&&p&&f&&(d=null),d)n.defaultEncoding=(0,a.getEncoding)(d);else{const t=!!(n.flags&w.FontFlags.Symbolic),e=!!(n.flags&w.FontFlags.Nonsymbolic);u=a.StandardEncoding,"TrueType"!==n.type||e||(u=a.WinAnsiEncoding),(t||f)&&(u=a.MacRomanEncoding,p&&(/Symbol/i.test(n.name)?u=a.SymbolSetEncoding:/Dingbats/i.test(n.name)?u=a.ZapfDingbatsEncoding:/Wingdings/i.test(n.name)&&(u=a.WinAnsiEncoding))),n.defaultEncoding=u}return n.differences=h,n.baseEncodingName=d,n.hasEncoding=!!d||h.length>0,n.dict=t,c.then((t=>(n.toUnicode=t,this.buildToUnicode(n)))).then((t=>(n.toUnicode=t,s&&(n.cidToGidMap=this.readCidToGidMap(s,t)),n)))}_simpleFontToUnicode(t,e=!1){(0,i.assert)(!t.composite,"Must be a simple font.");const n=[],r=t.defaultEncoding.slice(),o=t.baseEncodingName,s=t.differences;for(const t in s){const e=s[t];".notdef"!==e&&(r[t]=e)}const l=(0,_.getGlyphsUnicode)();for(const i in r){let s=r[i];if(""===s)continue;let c=l[s];if(void 0!==c){n[i]=String.fromCharCode(c);continue}let h=0;switch(s[0]){case"G":3===s.length&&(h=parseInt(s.substring(1),16));break;case"g":5===s.length&&(h=parseInt(s.substring(1),16));break;case"C":case"c":if(s.length>=3&&s.length<=4){const n=s.substring(1);if(e){h=parseInt(n,16);break}if(h=+n,Number.isNaN(h)&&Number.isInteger(parseInt(n,16)))return this._simpleFontToUnicode(t,!0)}break;case"u":c=(0,C.getUnicodeForGlyph)(s,l),-1!==c&&(h=c);break;default:switch(s){case"f_h":case"f_t":case"T_h":n[i]=s.replaceAll("_","");continue}}if(h>0&&h<=1114111&&Number.isInteger(h)){if(o&&h===+i){const t=(0,a.getEncoding)(o);if(t&&(s=t[i])){n[i]=String.fromCharCode(l[s]);continue}}n[i]=String.fromCodePoint(h)}}return n}async buildToUnicode(t){if(t.hasIncludedToUnicodeMap=t.toUnicode?.length>0,t.hasIncludedToUnicodeMap)return!t.composite&&t.hasEncoding&&(t.fallbackToUnicode=this._simpleFontToUnicode(t)),t.toUnicode;if(!t.composite)return new u.ToUnicodeMap(this._simpleFontToUnicode(t));if(t.composite&&(t.cMap.builtInCMap&&!(t.cMap instanceof r.IdentityCMap)||"Adobe"===t.cidSystemInfo.registry&&("GB1"===t.cidSystemInfo.ordering||"CNS1"===t.cidSystemInfo.ordering||"Japan1"===t.cidSystemInfo.ordering||"Korea1"===t.cidSystemInfo.ordering))){const{registry:e,ordering:n}=t.cidSystemInfo,s=o.Name.get(`${e}-${n}-UCS2`),a=await r.CMapFactory.create({encoding:s,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}),l=[],c=[];return t.cMap.forEach((function(t,e){if(e>65535)throw new i.FormatError("Max size of CID is 65,535");const n=a.lookup(e);if(n){c.length=0;for(let t=0,e=n.length;t<e;t+=2)c.push((n.charCodeAt(t)<<8)+n.charCodeAt(t+1));l[t]=String.fromCharCode(...c)}})),new u.ToUnicodeMap(l)}return new u.IdentityToUnicodeMap(t.firstChar,t.lastChar)}readToUnicode(t){return t?t instanceof o.Name?r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){return t instanceof r.IdentityCMap?new u.IdentityToUnicodeMap(0,65535):new u.ToUnicodeMap(t.getMap())})):t instanceof m.BaseStream?r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null}).then((function(t){if(t instanceof r.IdentityCMap)return new u.IdentityToUnicodeMap(0,65535);const e=new Array(t.length);return t.forEach((function(t,n){if("number"==typeof n)return void(e[t]=String.fromCodePoint(n));const i=[];for(let t=0;t<n.length;t+=2){const e=n.charCodeAt(t)<<8|n.charCodeAt(t+1);if(55296!=(63488&e)){i.push(e);continue}t+=2;const r=n.charCodeAt(t)<<8|n.charCodeAt(t+1);i.push(((1023&e)<<10)+(1023&r)+65536)}e[t]=String.fromCodePoint(...i)})),new u.ToUnicodeMap(e)}),(t=>{if(t instanceof i.AbortException)return null;if(this.options.ignoreErrors)return(0,i.warn)(`readToUnicode - ignoring ToUnicode data: "${t}".`),null;throw t})):Promise.resolve(null):Promise.resolve(null)}readCidToGidMap(t,e){const n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i++]<<8|t[i],o=i>>1;(0!==r||e.has(o))&&(n[o]=r)}return n}extractWidths(t,e,n){const i=this.xref;let r=[],s=0;const a=[];let l,c,h,u,d,p,f,g;if(n.composite){if(s=t.has("DW")?t.get("DW"):1e3,g=t.get("W"),g)for(c=0,h=g.length;c<h;c++)if(p=i.fetchIfRef(g[c++]),f=i.fetchIfRef(g[c]),Array.isArray(f))for(u=0,d=f.length;u<d;u++)r[p++]=i.fetchIfRef(f[u]);else{const t=i.fetchIfRef(g[++c]);for(u=p;u<=f;u++)r[u]=t}if(n.vertical){let e=t.getArray("DW2")||[880,-1e3];if(l=[e[1],.5*s,e[0]],e=t.get("W2"),e)for(c=0,h=e.length;c<h;c++)if(p=i.fetchIfRef(e[c++]),f=i.fetchIfRef(e[c]),Array.isArray(f))for(u=0,d=f.length;u<d;u++)a[p++]=[i.fetchIfRef(f[u++]),i.fetchIfRef(f[u++]),i.fetchIfRef(f[u])];else{const t=[i.fetchIfRef(e[++c]),i.fetchIfRef(e[++c]),i.fetchIfRef(e[++c])];for(u=p;u<=f;u++)a[u]=t}}}else{const a=n.firstChar;if(g=t.get("Widths"),g){for(u=a,c=0,h=g.length;c<h;c++)r[u++]=i.fetchIfRef(g[c]);s=parseFloat(e.get("MissingWidth"))||0}else{const e=t.get("BaseFont");if(e instanceof o.Name){const t=this.getBaseFontMetrics(e.name);r=this.buildCharCodeToWidth(t.widths,n),s=t.defaultWidth}}}let m=!0,y=s;for(const t in r){const e=r[t];if(e)if(y){if(y!==e){m=!1;break}}else y=e}m?n.flags|=w.FontFlags.FixedPitch:n.flags&=~w.FontFlags.FixedPitch,n.defaultWidth=s,n.widths=r,n.defaultVMetrics=l,n.vmetrics=a}isSerifFont(t){const e=t.split("-")[0];return e in(0,l.getSerifFonts)()||/serif/gi.test(e)}getBaseFontMetrics(t){let e=0,n=Object.create(null),i=!1,r=(0,l.getStdFontMap)()[t]||t;const o=(0,S.getMetrics)();r in o||(r=this.isSerifFont(t)?"Times-Roman":"Helvetica");const s=o[r];return"number"==typeof s?(e=s,i=!0):n=s(),{defaultWidth:e,monospace:i,widths:n}}buildCharCodeToWidth(t,e){const n=Object.create(null),i=e.differences,r=e.defaultEncoding;for(let e=0;e<256;e++)e in i&&t[i[e]]?n[e]=t[i[e]]:e in r&&t[r[e]]&&(n[e]=t[r[e]]);return n}preEvaluateFont(t){const e=t;let n=t.get("Subtype");if(!(n instanceof o.Name))throw new i.FormatError("invalid font Subtype");let r,s,a=!1;if("Type0"===n.name){const e=t.get("DescendantFonts");if(!e)throw new i.FormatError("Descendant fonts are not specified");if(!((t=Array.isArray(e)?this.xref.fetchIfRef(e[0]):e)instanceof o.Dict))throw new i.FormatError("Descendant font is not a dictionary.");if(n=t.get("Subtype"),!(n instanceof o.Name))throw new i.FormatError("invalid font Subtype");a=!0}const l=t.get("FirstChar")||0,c=t.get("LastChar")||(a?65535:255),h=t.get("FontDescriptor");if(h){r=new A.MurmurHash3_64;const n=e.getRaw("Encoding");if(n instanceof o.Name)r.update(n.name);else if(n instanceof o.Ref)r.update(n.toString());else if(n instanceof o.Dict)for(const t of n.getRawValues())if(t instanceof o.Name)r.update(t.name);else if(t instanceof o.Ref)r.update(t.toString());else if(Array.isArray(t)){const e=t.length,n=new Array(e);for(let i=0;i<e;i++){const e=t[i];e instanceof o.Name?n[i]=e.name:("number"==typeof e||e instanceof o.Ref)&&(n[i]=e.toString())}r.update(n.join())}if(r.update(`${l}-${c}`),s=t.get("ToUnicode")||e.get("ToUnicode"),s instanceof m.BaseStream){const t=s.str||s,e=t.buffer?new Uint8Array(t.buffer.buffer,0,t.bufferLength):new Uint8Array(t.bytes.buffer,t.start,t.end-t.start);r.update(e)}else s instanceof o.Name&&r.update(s.name);const i=t.get("Widths")||e.get("Widths");if(Array.isArray(i)){const t=[];for(const e of i)("number"==typeof e||e instanceof o.Ref)&&t.push(e.toString());r.update(t.join())}if(a){r.update("compositeFont");const n=t.get("W")||e.get("W");if(Array.isArray(n)){const t=[];for(const e of n)if("number"==typeof e||e instanceof o.Ref)t.push(e.toString());else if(Array.isArray(e)){const n=[];for(const t of e)("number"==typeof t||t instanceof o.Ref)&&n.push(t.toString());t.push(`[${n.join()}]`)}r.update(t.join())}const i=t.getRaw("CIDToGIDMap")||e.getRaw("CIDToGIDMap");i instanceof o.Name?r.update(i.name):i instanceof o.Ref?r.update(i.toString()):i instanceof m.BaseStream&&r.update(i.peekBytes())}}return{descriptor:h,dict:t,baseDict:e,composite:a,type:n.name,firstChar:l,lastChar:c,toUnicode:s,hash:r?r.hexdigest():""}}async translateFont({descriptor:t,dict:e,baseDict:n,composite:a,type:c,firstChar:u,lastChar:d,toUnicode:p,cssFontInfo:f}){const m="Type3"===c;let y;if(!t){if(!m){let t=e.get("BaseFont");if(!(t instanceof o.Name))throw new i.FormatError("Base font is not specified");t=t.name.replaceAll(/[,_]/g,"-");const r=this.getBaseFontMetrics(t),a=t.split("-")[0],h=(this.isSerifFont(a)?w.FontFlags.Serif:0)|(r.monospace?w.FontFlags.FixedPitch:0)|((0,l.getSymbolsFonts)()[a]?w.FontFlags.Symbolic:w.FontFlags.Nonsymbolic);y={type:c,name:t,loadedName:n.loadedName,systemFontInfo:null,widths:r.widths,defaultWidth:r.defaultWidth,isSimulatedFlags:!0,flags:h,firstChar:u,lastChar:d,toUnicode:p,xHeight:0,capHeight:0,italicAngle:0,isType3Font:m};const f=e.get("Widths"),g=(0,l.getStandardFontName)(t);let v=null;return g&&(v=await this.fetchStandardFontData(g),y.isInternalFont=!!v),!y.isInternalFont&&this.options.useSystemFonts&&(y.systemFontInfo=(0,x.getFontSubstitution)(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,t,g)),this.extractDataStructures(e,e,y).then((e=>{if(f){const t=[];let n=u;for(const e of f)t[n++]=this.xref.fetchIfRef(e);e.widths=t}else e.widths=this.buildCharCodeToWidth(r.widths,e);return new s.Font(t,v,e)}))}(t=new o.Dict(null)).set("FontName",o.Name.get(c)),t.set("FontBBox",e.getArray("FontBBox")||[0,0,0,0])}let v=t.get("FontName"),b=e.get("BaseFont");"string"==typeof v&&(v=o.Name.get(v)),"string"==typeof b&&(b=o.Name.get(b));const _=v?.name,S=b?.name;if(m||_===S||((0,i.info)(`The FontDescriptor's FontName is "${_}" but should be the same as the Font's BaseFont "${S}".`),_&&S&&(S.startsWith(_)||!(0,l.isKnownFontName)(_)&&(0,l.isKnownFontName)(S))&&(v=null)),v||=b,!(v instanceof o.Name))throw new i.FormatError("invalid font name");let C,k,A,E,T;try{C=t.get("FontFile","FontFile2","FontFile3")}catch(t){if(!this.options.ignoreErrors)throw t;(0,i.warn)(`translateFont - fetching "${v.name}" font file: "${t}".`),C=new g.NullStream}let M=!1,O=null,I=null;if(C){if(C.dict){const t=C.dict.get("Subtype");t instanceof o.Name&&(k=t.name),A=C.dict.get("Length1"),E=C.dict.get("Length2"),T=C.dict.get("Length3")}}else if(f){const t=(0,h.getXfaFontName)(v.name);t&&(f.fontFamily=`${f.fontFamily}-PdfJS-XFA`,f.metrics=t.metrics||null,O=t.factors||null,C=await this.fetchStandardFontData(t.name),M=!!C,n=e=(0,h.getXfaFontDict)(v.name),a=!0)}else if(!m){const t=(0,l.getStandardFontName)(v.name);t&&(C=await this.fetchStandardFontData(t),M=!!C),!M&&this.options.useSystemFonts&&(I=(0,x.getFontSubstitution)(this.systemFontCache,this.idFactory,this.options.standardFontDataUrl,v.name,t))}if(y={type:c,name:v.name,subtype:k,file:C,length1:A,length2:E,length3:T,isInternalFont:M,loadedName:n.loadedName,composite:a,fixedPitch:!1,fontMatrix:e.getArray("FontMatrix")||i.FONT_IDENTITY_MATRIX,firstChar:u,lastChar:d,toUnicode:p,bbox:t.getArray("FontBBox")||e.getArray("FontBBox"),ascent:t.get("Ascent"),descent:t.get("Descent"),xHeight:t.get("XHeight")||0,capHeight:t.get("CapHeight")||0,flags:t.get("Flags"),italicAngle:t.get("ItalicAngle")||0,isType3Font:m,cssFontInfo:f,scaleFactors:O,systemFontInfo:I},a){const t=n.get("Encoding");t instanceof o.Name&&(y.cidEncoding=t.name);const e=await r.CMapFactory.create({encoding:t,fetchBuiltInCMap:this._fetchBuiltInCMapBound,useCMap:null});y.cMap=e,y.vertical=y.cMap.vertical}return this.extractDataStructures(e,n,y).then((n=>(this.extractWidths(e,t,n),new s.Font(v.name,C,n))))}static buildFontPaths(t,e,n,r){function o(e){const o=`${t.loadedName}_path_${e}`;try{if(t.renderer.hasBuiltPath(e))return;n.send("commonobj",[o,"FontPath",t.renderer.getPathJs(e)])}catch(t){if(r.ignoreErrors)return void(0,i.warn)(`buildFontPaths - ignoring ${o} glyph: "${t}".`);throw t}}for(const t of e){o(t.fontChar);const e=t.accent;e?.fontChar&&o(e.fontChar)}}static get fallbackFontDict(){const t=new o.Dict;return t.set("BaseFont",o.Name.get("Helvetica")),t.set("Type",o.Name.get("FallbackType")),t.set("Subtype",o.Name.get("FallbackType")),t.set("Encoding",o.Name.get("WinAnsiEncoding")),(0,i.shadow)(this,"fallbackFontDict",t)}}e.PartialEvaluator=L;class N{constructor({loadedName:t,font:e,dict:n,evaluatorOptions:i}){this.loadedName=t,this.font=e,this.dict=n,this._evaluatorOptions=i||M,this.type3Loaded=null,this.type3Dependencies=e.isType3Font?new Set:null,this.sent=!1}send(t){this.sent||(this.sent=!0,t.send("commonobj",[this.loadedName,"Font",this.font.exportData(this._evaluatorOptions.fontExtraProperties)]))}fallback(t){this.font.data&&(this.font.disableFontFace=!0,L.buildFontPaths(this.font,this.font.glyphCacheValues,t,this._evaluatorOptions))}loadType3Data(t,e,n){if(this.type3Loaded)return this.type3Loaded;if(!this.font.isType3Font)throw new Error("Must be a Type3 font.");const r=t.clone({ignoreErrors:!1});r.parsingType3Font=!0;const s=new o.RefSet(t.type3FontRefs);this.dict.objId&&!s.has(this.dict.objId)&&s.put(this.dict.objId),r.type3FontRefs=s;const a=this.font,l=this.type3Dependencies;let c=Promise.resolve();const h=this.dict.get("CharProcs"),u=this.dict.get("Resources")||e,d=Object.create(null),p=i.Util.normalizeRect(a.bbox||[0,0,0,0]),f=p[2]-p[0],g=p[3]-p[1],m=Math.hypot(f,g);for(const t of h.getKeys())c=c.then((()=>{const e=h.get(t),o=new E.OperatorList;return r.getOperatorList({stream:e,task:n,resources:u,operatorList:o}).then((()=>{o.fnArray[0]===i.OPS.setCharWidthAndBounds&&this._removeType3ColorOperators(o,m),d[t]=o.getIR();for(const t of o.dependencies)l.add(t)})).catch((function(e){(0,i.warn)(`Type3 font resource "${t}" is not available.`);const n=new E.OperatorList;d[t]=n.getIR()}))}));return this.type3Loaded=c.then((()=>{a.charProcOperatorList=d,this._bbox&&(a.isCharBBox=!0,a.bbox=this._bbox)})),this.type3Loaded}_removeType3ColorOperators(t,e=NaN){const n=i.Util.normalizeRect(t.argsArray[0].slice(2)),r=n[2]-n[0],o=n[3]-n[1],s=Math.hypot(r,o);0===r||0===o?(t.fnArray.splice(0,1),t.argsArray.splice(0,1)):(0===e||Math.round(s/e)>=10)&&(this._bbox||(this._bbox=[1/0,1/0,-1/0,-1/0]),this._bbox[0]=Math.min(this._bbox[0],n[0]),this._bbox[1]=Math.min(this._bbox[1],n[1]),this._bbox[2]=Math.max(this._bbox[2],n[2]),this._bbox[3]=Math.max(this._bbox[3],n[3]));let a=0,l=t.length;for(;a<l;){switch(t.fnArray[a]){case i.OPS.setCharWidthAndBounds:break;case i.OPS.setStrokeColorSpace:case i.OPS.setFillColorSpace:case i.OPS.setStrokeColor:case i.OPS.setStrokeColorN:case i.OPS.setFillColor:case i.OPS.setFillColorN:case i.OPS.setStrokeGray:case i.OPS.setFillGray:case i.OPS.setStrokeRGBColor:case i.OPS.setFillRGBColor:case i.OPS.setStrokeCMYKColor:case i.OPS.setFillCMYKColor:case i.OPS.shadingFill:case i.OPS.setRenderingIntent:t.fnArray.splice(a,1),t.argsArray.splice(a,1),l--;continue;case i.OPS.setGState:const[e]=t.argsArray[a];let n=0,r=e.length;for(;n<r;){const[t]=e[n];switch(t){case"TR":case"TR2":case"HT":case"BG":case"BG2":case"UCR":case"UCR2":e.splice(n,1),r--;continue}n++}}a++}}}class B{constructor(t=new z){this.state=t,this.stateStack=[]}save(){const t=this.state;this.stateStack.push(this.state),this.state=t.clone()}restore(){const t=this.stateStack.pop();t&&(this.state=t)}transform(t){this.state.ctm=i.Util.transform(this.state.ctm,t)}}class j{constructor(){this.ctm=new Float32Array(i.IDENTITY_MATRIX),this.fontName=null,this.fontSize=0,this.loadedName=null,this.font=null,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.textMatrix=i.IDENTITY_MATRIX.slice(),this.textLineMatrix=i.IDENTITY_MATRIX.slice(),this.charSpacing=0,this.wordSpacing=0,this.leading=0,this.textHScale=1,this.textRise=0}setTextMatrix(t,e,n,i,r,o){const s=this.textMatrix;s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=r,s[5]=o}setTextLineMatrix(t,e,n,i,r,o){const s=this.textLineMatrix;s[0]=t,s[1]=e,s[2]=n,s[3]=i,s[4]=r,s[5]=o}translateTextMatrix(t,e){const n=this.textMatrix;n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5]}translateTextLineMatrix(t,e){const n=this.textLineMatrix;n[4]=n[0]*t+n[2]*e+n[4],n[5]=n[1]*t+n[3]*e+n[5]}carriageReturn(){this.translateTextLineMatrix(0,-this.leading),this.textMatrix=this.textLineMatrix.slice()}clone(){const t=Object.create(this);return t.textMatrix=this.textMatrix.slice(),t.textLineMatrix=this.textLineMatrix.slice(),t.fontMatrix=this.fontMatrix.slice(),t}}class z{constructor(){this.ctm=new Float32Array(i.IDENTITY_MATRIX),this.font=null,this.textRenderingMode=i.TextRenderingMode.FILL,this.fillColorSpace=v.ColorSpace.singletons.gray,this.strokeColorSpace=v.ColorSpace.singletons.gray}clone(){return Object.create(this)}}class ${static get opMap(){return(0,i.shadow)(this,"opMap",{w:{id:i.OPS.setLineWidth,numArgs:1,variableArgs:!1},J:{id:i.OPS.setLineCap,numArgs:1,variableArgs:!1},j:{id:i.OPS.setLineJoin,numArgs:1,variableArgs:!1},M:{id:i.OPS.setMiterLimit,numArgs:1,variableArgs:!1},d:{id:i.OPS.setDash,numArgs:2,variableArgs:!1},ri:{id:i.OPS.setRenderingIntent,numArgs:1,variableArgs:!1},i:{id:i.OPS.setFlatness,numArgs:1,variableArgs:!1},gs:{id:i.OPS.setGState,numArgs:1,variableArgs:!1},q:{id:i.OPS.save,numArgs:0,variableArgs:!1},Q:{id:i.OPS.restore,numArgs:0,variableArgs:!1},cm:{id:i.OPS.transform,numArgs:6,variableArgs:!1},m:{id:i.OPS.moveTo,numArgs:2,variableArgs:!1},l:{id:i.OPS.lineTo,numArgs:2,variableArgs:!1},c:{id:i.OPS.curveTo,numArgs:6,variableArgs:!1},v:{id:i.OPS.curveTo2,numArgs:4,variableArgs:!1},y:{id:i.OPS.curveTo3,numArgs:4,variableArgs:!1},h:{id:i.OPS.closePath,numArgs:0,variableArgs:!1},re:{id:i.OPS.rectangle,numArgs:4,variableArgs:!1},S:{id:i.OPS.stroke,numArgs:0,variableArgs:!1},s:{id:i.OPS.closeStroke,numArgs:0,variableArgs:!1},f:{id:i.OPS.fill,numArgs:0,variableArgs:!1},F:{id:i.OPS.fill,numArgs:0,variableArgs:!1},"f*":{id:i.OPS.eoFill,numArgs:0,variableArgs:!1},B:{id:i.OPS.fillStroke,numArgs:0,variableArgs:!1},"B*":{id:i.OPS.eoFillStroke,numArgs:0,variableArgs:!1},b:{id:i.OPS.closeFillStroke,numArgs:0,variableArgs:!1},"b*":{id:i.OPS.closeEOFillStroke,numArgs:0,variableArgs:!1},n:{id:i.OPS.endPath,numArgs:0,variableArgs:!1},W:{id:i.OPS.clip,numArgs:0,variableArgs:!1},"W*":{id:i.OPS.eoClip,numArgs:0,variableArgs:!1},BT:{id:i.OPS.beginText,numArgs:0,variableArgs:!1},ET:{id:i.OPS.endText,numArgs:0,variableArgs:!1},Tc:{id:i.OPS.setCharSpacing,numArgs:1,variableArgs:!1},Tw:{id:i.OPS.setWordSpacing,numArgs:1,variableArgs:!1},Tz:{id:i.OPS.setHScale,numArgs:1,variableArgs:!1},TL:{id:i.OPS.setLeading,numArgs:1,variableArgs:!1},Tf:{id:i.OPS.setFont,numArgs:2,variableArgs:!1},Tr:{id:i.OPS.setTextRenderingMode,numArgs:1,variableArgs:!1},Ts:{id:i.OPS.setTextRise,numArgs:1,variableArgs:!1},Td:{id:i.OPS.moveText,numArgs:2,variableArgs:!1},TD:{id:i.OPS.setLeadingMoveText,numArgs:2,variableArgs:!1},Tm:{id:i.OPS.setTextMatrix,numArgs:6,variableArgs:!1},"T*":{id:i.OPS.nextLine,numArgs:0,variableArgs:!1},Tj:{id:i.OPS.showText,numArgs:1,variableArgs:!1},TJ:{id:i.OPS.showSpacedText,numArgs:1,variableArgs:!1},"'":{id:i.OPS.nextLineShowText,numArgs:1,variableArgs:!1},'"':{id:i.OPS.nextLineSetSpacingShowText,numArgs:3,variableArgs:!1},d0:{id:i.OPS.setCharWidth,numArgs:2,variableArgs:!1},d1:{id:i.OPS.setCharWidthAndBounds,numArgs:6,variableArgs:!1},CS:{id:i.OPS.setStrokeColorSpace,numArgs:1,variableArgs:!1},cs:{id:i.OPS.setFillColorSpace,numArgs:1,variableArgs:!1},SC:{id:i.OPS.setStrokeColor,numArgs:4,variableArgs:!0},SCN:{id:i.OPS.setStrokeColorN,numArgs:33,variableArgs:!0},sc:{id:i.OPS.setFillColor,numArgs:4,variableArgs:!0},scn:{id:i.OPS.setFillColorN,numArgs:33,variableArgs:!0},G:{id:i.OPS.setStrokeGray,numArgs:1,variableArgs:!1},g:{id:i.OPS.setFillGray,numArgs:1,variableArgs:!1},RG:{id:i.OPS.setStrokeRGBColor,numArgs:3,variableArgs:!1},rg:{id:i.OPS.setFillRGBColor,numArgs:3,variableArgs:!1},K:{id:i.OPS.setStrokeCMYKColor,numArgs:4,variableArgs:!1},k:{id:i.OPS.setFillCMYKColor,numArgs:4,variableArgs:!1},sh:{id:i.OPS.shadingFill,numArgs:1,variableArgs:!1},BI:{id:i.OPS.beginInlineImage,numArgs:0,variableArgs:!1},ID:{id:i.OPS.beginImageData,numArgs:0,variableArgs:!1},EI:{id:i.OPS.endInlineImage,numArgs:1,variableArgs:!1},Do:{id:i.OPS.paintXObject,numArgs:1,variableArgs:!1},MP:{id:i.OPS.markPoint,numArgs:1,variableArgs:!1},DP:{id:i.OPS.markPointProps,numArgs:2,variableArgs:!1},BMC:{id:i.OPS.beginMarkedContent,numArgs:1,variableArgs:!1},BDC:{id:i.OPS.beginMarkedContentProps,numArgs:2,variableArgs:!1},EMC:{id:i.OPS.endMarkedContent,numArgs:0,variableArgs:!1},BX:{id:i.OPS.beginCompat,numArgs:0,variableArgs:!1},EX:{id:i.OPS.endCompat,numArgs:0,variableArgs:!1},BM:null,BD:null,true:null,fa:null,fal:null,fals:null,false:null,nu:null,nul:null,null:null})}static MAX_INVALID_PATH_OPS=10;constructor(t,e,n=new B){this.parser=new p.Parser({lexer:new p.Lexer(t,$.opMap),xref:e}),this.stateManager=n,this.nonProcessedArgs=[],this._isPathOp=!1,this._numInvalidPathOPS=0}get savedStatesDepth(){return this.stateManager.stateStack.length}read(t){let e=t.args;for(;;){const n=this.parser.getObj();if(n instanceof o.Cmd){const r=n.cmd,o=$.opMap[r];if(!o){(0,i.warn)(`Unknown command "${r}".`);continue}const s=o.id,a=o.numArgs;let l=null!==e?e.length:0;if(this._isPathOp||(this._numInvalidPathOPS=0),this._isPathOp=s>=i.OPS.moveTo&&s<=i.OPS.endPath,o.variableArgs)l>a&&(0,i.info)(`Command ${r}: expected [0, ${a}] args, but received ${l} args.`);else{if(l!==a){const t=this.nonProcessedArgs;for(;l>a;)t.push(e.shift()),l--;for(;l<a&&0!==t.length;)null===e&&(e=[]),e.unshift(t.pop()),l++}if(l<a){const t=`command ${r}: expected ${a} args, but received ${l} args.`;if(this._isPathOp&&++this._numInvalidPathOPS>$.MAX_INVALID_PATH_OPS)throw new i.FormatError(`Invalid ${t}`);(0,i.warn)(`Skipping ${t}`),null!==e&&(e.length=0);continue}}return this.preprocessCommand(s,e),t.fn=s,t.args=e,!0}if(n===o.EOF)return!1;if(null!==n&&(null===e&&(e=[]),e.push(n),e.length>33))throw new i.FormatError("Too many arguments")}}preprocessCommand(t,e){switch(0|t){case i.OPS.save:this.stateManager.save();break;case i.OPS.restore:this.stateManager.restore();break;case i.OPS.transform:this.stateManager.transform(e)}}}e.EvaluatorPreprocessor=$},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.IdentityCMap=e.CMapFactory=e.CMap=void 0;var i=n(2),r=n(4),o=n(5),s=n(15),a=n(16),l=n(3),c=n(8);const h=["Adobe-GB1-UCS2","Adobe-CNS1-UCS2","Adobe-Japan1-UCS2","Adobe-Korea1-UCS2","78-EUC-H","78-EUC-V","78-H","78-RKSJ-H","78-RKSJ-V","78-V","78ms-RKSJ-H","78ms-RKSJ-V","83pv-RKSJ-H","90ms-RKSJ-H","90ms-RKSJ-V","90msp-RKSJ-H","90msp-RKSJ-V","90pv-RKSJ-H","90pv-RKSJ-V","Add-H","Add-RKSJ-H","Add-RKSJ-V","Add-V","Adobe-CNS1-0","Adobe-CNS1-1","Adobe-CNS1-2","Adobe-CNS1-3","Adobe-CNS1-4","Adobe-CNS1-5","Adobe-CNS1-6","Adobe-GB1-0","Adobe-GB1-1","Adobe-GB1-2","Adobe-GB1-3","Adobe-GB1-4","Adobe-GB1-5","Adobe-Japan1-0","Adobe-Japan1-1","Adobe-Japan1-2","Adobe-Japan1-3","Adobe-Japan1-4","Adobe-Japan1-5","Adobe-Japan1-6","Adobe-Korea1-0","Adobe-Korea1-1","Adobe-Korea1-2","B5-H","B5-V","B5pc-H","B5pc-V","CNS-EUC-H","CNS-EUC-V","CNS1-H","CNS1-V","CNS2-H","CNS2-V","ETHK-B5-H","ETHK-B5-V","ETen-B5-H","ETen-B5-V","ETenms-B5-H","ETenms-B5-V","EUC-H","EUC-V","Ext-H","Ext-RKSJ-H","Ext-RKSJ-V","Ext-V","GB-EUC-H","GB-EUC-V","GB-H","GB-V","GBK-EUC-H","GBK-EUC-V","GBK2K-H","GBK2K-V","GBKp-EUC-H","GBKp-EUC-V","GBT-EUC-H","GBT-EUC-V","GBT-H","GBT-V","GBTpc-EUC-H","GBTpc-EUC-V","GBpc-EUC-H","GBpc-EUC-V","H","HKdla-B5-H","HKdla-B5-V","HKdlb-B5-H","HKdlb-B5-V","HKgccs-B5-H","HKgccs-B5-V","HKm314-B5-H","HKm314-B5-V","HKm471-B5-H","HKm471-B5-V","HKscs-B5-H","HKscs-B5-V","Hankaku","Hiragana","KSC-EUC-H","KSC-EUC-V","KSC-H","KSC-Johab-H","KSC-Johab-V","KSC-V","KSCms-UHC-H","KSCms-UHC-HW-H","KSCms-UHC-HW-V","KSCms-UHC-V","KSCpc-EUC-H","KSCpc-EUC-V","Katakana","NWP-H","NWP-V","RKSJ-H","RKSJ-V","Roman","UniCNS-UCS2-H","UniCNS-UCS2-V","UniCNS-UTF16-H","UniCNS-UTF16-V","UniCNS-UTF32-H","UniCNS-UTF32-V","UniCNS-UTF8-H","UniCNS-UTF8-V","UniGB-UCS2-H","UniGB-UCS2-V","UniGB-UTF16-H","UniGB-UTF16-V","UniGB-UTF32-H","UniGB-UTF32-V","UniGB-UTF8-H","UniGB-UTF8-V","UniJIS-UCS2-H","UniJIS-UCS2-HW-H","UniJIS-UCS2-HW-V","UniJIS-UCS2-V","UniJIS-UTF16-H","UniJIS-UTF16-V","UniJIS-UTF32-H","UniJIS-UTF32-V","UniJIS-UTF8-H","UniJIS-UTF8-V","UniJIS2004-UTF16-H","UniJIS2004-UTF16-V","UniJIS2004-UTF32-H","UniJIS2004-UTF32-V","UniJIS2004-UTF8-H","UniJIS2004-UTF8-V","UniJISPro-UCS2-HW-V","UniJISPro-UCS2-V","UniJISPro-UTF8-V","UniJISX0213-UTF32-H","UniJISX0213-UTF32-V","UniJISX02132004-UTF32-H","UniJISX02132004-UTF32-V","UniKS-UCS2-H","UniKS-UCS2-V","UniKS-UTF16-H","UniKS-UTF16-V","UniKS-UTF32-H","UniKS-UTF32-V","UniKS-UTF8-H","UniKS-UTF8-V","V","WP-Symbol"],u=2**24-1;class d{constructor(t=!1){this.codespaceRanges=[[],[],[],[]],this.numCodespaceRanges=0,this._map=[],this.name="",this.vertical=!1,this.useCMap=null,this.builtInCMap=t}addCodespaceRange(t,e,n){this.codespaceRanges[t-1].push(e,n),this.numCodespaceRanges++}mapCidRange(t,e,n){if(e-t>u)throw new Error("mapCidRange - ignoring data above MAX_MAP_RANGE.");for(;t<=e;)this._map[t++]=n++}mapBfRange(t,e,n){if(e-t>u)throw new Error("mapBfRange - ignoring data above MAX_MAP_RANGE.");const i=n.length-1;for(;t<=e;){this._map[t++]=n;const e=n.charCodeAt(i)+1;n=e>255?n.substring(0,i-1)+String.fromCharCode(n.charCodeAt(i-1)+1)+"\0":n.substring(0,i)+String.fromCharCode(e)}}mapBfRangeToArray(t,e,n){if(e-t>u)throw new Error("mapBfRangeToArray - ignoring data above MAX_MAP_RANGE.");const i=n.length;let r=0;for(;t<=e&&r<i;)this._map[t]=n[r++],++t}mapOne(t,e){this._map[t]=e}lookup(t){return this._map[t]}contains(t){return void 0!==this._map[t]}forEach(t){const e=this._map,n=e.length;if(n<=65536)for(let i=0;i<n;i++)void 0!==e[i]&&t(i,e[i]);else for(const n in e)t(n,e[n])}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const n in e)if(e[n]===t)return 0|n;return-1}getMap(){return this._map}readCharCode(t,e,n){let i=0;const r=this.codespaceRanges;for(let o=0,s=r.length;o<s;o++){i=(i<<8|t.charCodeAt(e+o))>>>0;const s=r[o];for(let t=0,e=s.length;t<e;){const e=s[t++],r=s[t++];if(i>=e&&i<=r)return n.charcode=i,void(n.length=o+1)}}n.charcode=0,n.length=1}getCharCodeLength(t){const e=this.codespaceRanges;for(let n=0,i=e.length;n<i;n++){const i=e[n];for(let e=0,r=i.length;e<r;){const r=i[e++],o=i[e++];if(t>=r&&t<=o)return n+1}}return 1}get length(){return this._map.length}get isIdentityCMap(){if("Identity-H"!==this.name&&"Identity-V"!==this.name)return!1;if(65536!==this._map.length)return!1;for(let t=0;t<65536;t++)if(this._map[t]!==t)return!1;return!0}}e.CMap=d;class p extends d{constructor(t,e){super(),this.vertical=t,this.addCodespaceRange(e,0,65535)}mapCidRange(t,e,n){(0,i.unreachable)("should not call mapCidRange")}mapBfRange(t,e,n){(0,i.unreachable)("should not call mapBfRange")}mapBfRangeToArray(t,e,n){(0,i.unreachable)("should not call mapBfRangeToArray")}mapOne(t,e){(0,i.unreachable)("should not call mapCidOne")}lookup(t){return Number.isInteger(t)&&t<=65535?t:void 0}contains(t){return Number.isInteger(t)&&t<=65535}forEach(t){for(let e=0;e<=65535;e++)t(e,e)}charCodeOf(t){return Number.isInteger(t)&&t<=65535?t:-1}getMap(){const t=new Array(65536);for(let e=0;e<=65535;e++)t[e]=e;return t}get length(){return 65536}get isIdentityCMap(){(0,i.unreachable)("should not access .isIdentityCMap")}}function f(t){let e=0;for(let n=0;n<t.length;n++)e=e<<8|t.charCodeAt(n);return e>>>0}function g(t){if("string"!=typeof t)throw new i.FormatError("Malformed CMap: expected string.")}function m(t){if(!Number.isInteger(t))throw new i.FormatError("Malformed CMap: expected int.")}function y(t,e){for(;;){let n=e.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endbfchar"))return;g(n);const i=f(n);n=e.getObj(),g(n);const o=n;t.mapOne(i,o)}}function v(t,e){for(;;){let n=e.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endbfrange"))return;g(n);const i=f(n);n=e.getObj(),g(n);const o=f(n);if(n=e.getObj(),Number.isInteger(n)||"string"==typeof n){const e=Number.isInteger(n)?String.fromCharCode(n):n;t.mapBfRange(i,o,e)}else{if(!(0,r.isCmd)(n,"["))break;{n=e.getObj();const s=[];for(;!(0,r.isCmd)(n,"]")&&n!==r.EOF;)s.push(n),n=e.getObj();t.mapBfRangeToArray(i,o,s)}}}throw new i.FormatError("Invalid bf range.")}function b(t,e){for(;;){let n=e.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endcidchar"))return;g(n);const i=f(n);n=e.getObj(),m(n);const o=n;t.mapOne(i,o)}}function w(t,e){for(;;){let n=e.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endcidrange"))return;g(n);const i=f(n);n=e.getObj(),g(n);const o=f(n);n=e.getObj(),m(n);const s=n;t.mapCidRange(i,o,s)}}function x(t,e){for(;;){let n=e.getObj();if(n===r.EOF)break;if((0,r.isCmd)(n,"endcodespacerange"))return;if("string"!=typeof n)break;const i=f(n);if(n=e.getObj(),"string"!=typeof n)break;const o=f(n);t.addCodespaceRange(n.length,i,o)}throw new i.FormatError("Invalid codespace range.")}function _(t,e){const n=e.getObj();Number.isInteger(n)&&(t.vertical=!!n)}function S(t,e){const n=e.getObj();n instanceof r.Name&&(t.name=n.name)}async function C(t,e,n,o){let s,a;t:for(;;)try{const n=e.getObj();if(n===r.EOF)break;if(n instanceof r.Name)"WMode"===n.name?_(t,e):"CMapName"===n.name&&S(t,e),s=n;else if(n instanceof r.Cmd)switch(n.cmd){case"endcmap":break t;case"usecmap":s instanceof r.Name&&(a=s.name);break;case"begincodespacerange":x(t,e);break;case"beginbfchar":y(t,e);break;case"begincidchar":b(t,e);break;case"beginbfrange":v(t,e);break;case"begincidrange":w(t,e)}}catch(t){if(t instanceof l.MissingDataException)throw t;(0,i.warn)("Invalid cMap data: "+t);continue}return!o&&a&&(o=a),o?k(t,n,o):t}async function k(t,e,n){if(t.useCMap=await A(n,e),0===t.numCodespaceRanges){const e=t.useCMap.codespaceRanges;for(let n=0;n<e.length;n++)t.codespaceRanges[n]=e[n].slice();t.numCodespaceRanges=t.useCMap.numCodespaceRanges}return t.useCMap.forEach((function(e,n){t.contains(e)||t.mapOne(e,t.useCMap.lookup(e))})),t}async function A(t,e){if("Identity-H"===t)return new p(!1,2);if("Identity-V"===t)return new p(!0,2);if(!h.includes(t))throw new Error("Unknown CMap name: "+t);if(!e)throw new Error("Built-in CMap parameters are not provided.");const{cMapData:n,compressionType:r}=await e(t),o=new d(!0);if(r===i.CMapCompressionType.BINARY)return(new s.BinaryCMapReader).process(n,o,(t=>k(o,e,t)));if(r===i.CMapCompressionType.NONE){const t=new a.Lexer(new c.Stream(n));return C(o,t,e,null)}throw new Error(`Invalid CMap "compressionType" value: ${r}`)}e.IdentityCMap=p,e.CMapFactory=class{static async create({encoding:t,fetchBuiltInCMap:e,useCMap:n}){if(t instanceof r.Name)return A(t.name,e);if(t instanceof o.BaseStream){const i=await C(new d,new a.Lexer(t),e,n);return i.isIdentityCMap?A(i.name,e):i}throw new Error("Encoding required.")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BinaryCMapReader=void 0;var i=n(2);function r(t,e){let n=0;for(let i=0;i<=e;i++)n=n<<8|t[i];return n>>>0}function o(t,e){return 1===e?String.fromCharCode(t[0],t[1]):3===e?String.fromCharCode(t[0],t[1],t[2],t[3]):String.fromCharCode(...t.subarray(0,e+1))}function s(t,e,n){let i=0;for(let r=n;r>=0;r--)i+=t[r]+e[r],t[r]=255&i,i>>=8}function a(t,e){let n=1;for(let i=e;i>=0&&n>0;i--)n+=t[i],t[i]=255&n,n>>=8}const l=16;class c{constructor(t){this.buffer=t,this.pos=0,this.end=t.length,this.tmpBuf=new Uint8Array(19)}readByte(){return this.pos>=this.end?-1:this.buffer[this.pos++]}readNumber(){let t,e=0;do{const n=this.readByte();if(n<0)throw new i.FormatError("unexpected EOF in bcmap");t=!(128&n),e=e<<7|127&n}while(!t);return e}readSigned(){const t=this.readNumber();return 1&t?~(t>>>1):t>>>1}readHex(t,e){t.set(this.buffer.subarray(this.pos,this.pos+e+1)),this.pos+=e+1}readHexNumber(t,e){let n;const r=this.tmpBuf;let o=0;do{const t=this.readByte();if(t<0)throw new i.FormatError("unexpected EOF in bcmap");n=!(128&t),r[o++]=127&t}while(!n);let s=e,a=0,l=0;for(;s>=0;){for(;l<8&&r.length>0;)a|=r[--o]<<l,l+=7;t[s]=255&a,s--,a>>=8,l-=8}}readHexSigned(t,e){this.readHexNumber(t,e);const n=1&t[e]?255:0;let i=0;for(let r=0;r<=e;r++)i=(1&i)<<8|t[r],t[r]=i>>1^n}readString(){const t=this.readNumber(),e=new Array(t);for(let n=0;n<t;n++)e[n]=this.readNumber();return String.fromCharCode(...e)}}e.BinaryCMapReader=class{async process(t,e,n){const i=new c(t),h=i.readByte();e.vertical=!!(1&h);let u=null;const d=new Uint8Array(l),p=new Uint8Array(l),f=new Uint8Array(l),g=new Uint8Array(l),m=new Uint8Array(l);let y,v;for(;(v=i.readByte())>=0;){const t=v>>5;if(7===t){switch(31&v){case 0:i.readString();break;case 1:u=i.readString()}continue}const n=!!(16&v),c=15&v;if(c+1>l)throw new Error("BinaryCMapReader.process: Invalid dataSize.");const h=1,b=i.readNumber();switch(t){case 0:i.readHex(d,c),i.readHexNumber(p,c),s(p,d,c),e.addCodespaceRange(c+1,r(d,c),r(p,c));for(let t=1;t<b;t++)a(p,c),i.readHexNumber(d,c),s(d,p,c),i.readHexNumber(p,c),s(p,d,c),e.addCodespaceRange(c+1,r(d,c),r(p,c));break;case 1:i.readHex(d,c),i.readHexNumber(p,c),s(p,d,c),i.readNumber();for(let t=1;t<b;t++)a(p,c),i.readHexNumber(d,c),s(d,p,c),i.readHexNumber(p,c),s(p,d,c),i.readNumber();break;case 2:i.readHex(f,c),y=i.readNumber(),e.mapOne(r(f,c),y);for(let t=1;t<b;t++)a(f,c),n||(i.readHexNumber(m,c),s(f,m,c)),y=i.readSigned()+(y+1),e.mapOne(r(f,c),y);break;case 3:i.readHex(d,c),i.readHexNumber(p,c),s(p,d,c),y=i.readNumber(),e.mapCidRange(r(d,c),r(p,c),y);for(let t=1;t<b;t++)a(p,c),n?d.set(p):(i.readHexNumber(d,c),s(d,p,c)),i.readHexNumber(p,c),s(p,d,c),y=i.readNumber(),e.mapCidRange(r(d,c),r(p,c),y);break;case 4:i.readHex(f,h),i.readHex(g,c),e.mapOne(r(f,h),o(g,c));for(let t=1;t<b;t++)a(f,h),n||(i.readHexNumber(m,h),s(f,m,h)),a(g,c),i.readHexSigned(m,c),s(g,m,c),e.mapOne(r(f,h),o(g,c));break;case 5:i.readHex(d,h),i.readHexNumber(p,h),s(p,d,h),i.readHex(g,c),e.mapBfRange(r(d,h),r(p,h),o(g,c));for(let t=1;t<b;t++)a(p,h),n?d.set(p):(i.readHexNumber(d,h),s(d,p,h)),i.readHexNumber(p,h),s(p,d,h),i.readHex(g,c),e.mapBfRange(r(d,h),r(p,h),o(g,c));break;default:throw new Error(`BinaryCMapReader.process - unknown type: ${t}`)}}return u?n(u):e}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Parser=e.Linearization=e.Lexer=void 0;var i=n(2),r=n(4),o=n(3),s=n(8),a=n(17),l=n(19),c=n(20),h=n(22),u=n(23),d=n(26),p=n(29),f=n(31),g=n(32),m=n(33);class y{constructor({lexer:t,xref:e,allowStreams:n=!1,recoveryMode:i=!1}){this.lexer=t,this.xref=e,this.allowStreams=n,this.recoveryMode=i,this.imageCache=Object.create(null),this._imageId=0,this.refill()}refill(){this.buf1=this.lexer.getObj(),this.buf2=this.lexer.getObj()}shift(){this.buf2 instanceof r.Cmd&&"ID"===this.buf2.cmd?(this.buf1=this.buf2,this.buf2=null):(this.buf1=this.buf2,this.buf2=this.lexer.getObj())}tryShift(){try{return this.shift(),!0}catch(t){if(t instanceof o.MissingDataException)throw t;return!1}}getObj(t=null){const e=this.buf1;if(this.shift(),e instanceof r.Cmd)switch(e.cmd){case"BI":return this.makeInlineImage(t);case"[":const n=[];for(;!(0,r.isCmd)(this.buf1,"]")&&this.buf1!==r.EOF;)n.push(this.getObj(t));if(this.buf1===r.EOF){if(this.recoveryMode)return n;throw new o.ParserEOFException("End of file inside array.")}return this.shift(),n;case"<<":const s=new r.Dict(this.xref);for(;!(0,r.isCmd)(this.buf1,">>")&&this.buf1!==r.EOF;){if(!(this.buf1 instanceof r.Name)){(0,i.info)("Malformed dictionary: key must be a name object"),this.shift();continue}const e=this.buf1.name;if(this.shift(),this.buf1===r.EOF)break;s.set(e,this.getObj(t))}if(this.buf1===r.EOF){if(this.recoveryMode)return s;throw new o.ParserEOFException("End of file inside dictionary.")}return(0,r.isCmd)(this.buf2,"stream")?this.allowStreams?this.makeStream(s,t):s:(this.shift(),s);default:return e}if(Number.isInteger(e)){if(Number.isInteger(this.buf1)&&(0,r.isCmd)(this.buf2,"R")){const t=r.Ref.get(e,this.buf1);return this.shift(),this.shift(),t}return e}return"string"==typeof e&&t?t.decryptString(e):e}findDefaultInlineStreamEnd(t){const{knownCommands:e}=this.lexer,n=t.pos;let a,l,c=0;for(;-1!==(a=t.getByte());)if(0===c)c=69===a?1:0;else if(1===c)c=73===a?2:0;else if(32===a||10===a||13===a){l=t.pos;const n=t.peekBytes(15),o=n.length;if(0===o)break;for(let t=0;t<o;t++)if(a=n[t],(0!==a||0===n[t+1])&&10!==a&&13!==a&&(a<32||a>127)){c=0;break}if(2!==c)continue;if(!e){(0,i.warn)("findDefaultInlineStreamEnd - `lexer.knownCommands` is undefined.");continue}const h=new w(new s.Stream(n.slice()),e);h._hexStringWarn=()=>{};let u=0;for(;;){const t=h.getObj();if(t===r.EOF){c=0;break}if(t instanceof r.Cmd){const n=e[t.cmd];if(!n){c=0;break}if(n.variableArgs?u<=n.numArgs:u===n.numArgs)break;u=0}else u++}if(2===c)break}else c=0;-1===a&&((0,i.warn)("findDefaultInlineStreamEnd: Reached the end of the stream without finding a valid EI marker"),l&&((0,i.warn)('... trying to recover by using the last "EI" occurrence.'),t.skip(-(t.pos-l))));let h=4;return t.skip(-h),a=t.peekByte(),t.skip(h),(0,o.isWhiteSpace)(a)||h--,t.pos-h-n}findDCTDecodeInlineStreamEnd(t){const e=t.pos;let n,r,o=!1;for(;-1!==(n=t.getByte());)if(255===n){switch(t.getByte()){case 0:break;case 255:t.skip(-1);break;case 217:o=!0;break;case 192:case 193:case 194:case 195:case 197:case 198:case 199:case 201:case 202:case 203:case 205:case 206:case 207:case 196:case 204:case 218:case 219:case 220:case 221:case 222:case 223:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:r=t.getUint16(),r>2?t.skip(r-2):t.skip(-2)}if(o)break}const s=t.pos-e;return-1===n?((0,i.warn)("Inline DCTDecode image stream: EOI marker not found, searching for /EI/ instead."),t.skip(-s),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),s)}findASCII85DecodeInlineStreamEnd(t){const e=t.pos;let n;for(;-1!==(n=t.getByte());)if(126===n){const e=t.pos;for(n=t.peekByte();(0,o.isWhiteSpace)(n);)t.skip(),n=t.peekByte();if(62===n){t.skip();break}if(t.pos>e){const e=t.peekBytes(2);if(69===e[0]&&73===e[1])break}}const r=t.pos-e;return-1===n?((0,i.warn)("Inline ASCII85Decode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-r),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),r)}findASCIIHexDecodeInlineStreamEnd(t){const e=t.pos;let n;for(;-1!==(n=t.getByte())&&62!==n;);const r=t.pos-e;return-1===n?((0,i.warn)("Inline ASCIIHexDecode image stream: EOD marker not found, searching for /EI/ instead."),t.skip(-r),this.findDefaultInlineStreamEnd(t)):(this.inlineStreamSkipEI(t),r)}inlineStreamSkipEI(t){let e,n=0;for(;-1!==(e=t.getByte());)if(0===n)n=69===e?1:0;else if(1===n)n=73===e?2:0;else if(2===n)break}makeInlineImage(t){const e=this.lexer,n=e.stream,o=Object.create(null);let s;for(;!(0,r.isCmd)(this.buf1,"ID")&&this.buf1!==r.EOF;){if(!(this.buf1 instanceof r.Name))throw new i.FormatError("Dictionary key must be a name object");const e=this.buf1.name;if(this.shift(),this.buf1===r.EOF)break;o[e]=this.getObj(t)}-1!==e.beginInlineImagePos&&(s=n.pos-e.beginInlineImagePos);const a=this.xref.fetchIfRef(o.F||o.Filter);let l;if(a instanceof r.Name)l=a.name;else if(Array.isArray(a)){const t=this.xref.fetchIfRef(a[0]);t instanceof r.Name&&(l=t.name)}const c=n.pos;let h,u;switch(l){case"DCT":case"DCTDecode":h=this.findDCTDecodeInlineStreamEnd(n);break;case"A85":case"ASCII85Decode":h=this.findASCII85DecodeInlineStreamEnd(n);break;case"AHx":case"ASCIIHexDecode":h=this.findASCIIHexDecodeInlineStreamEnd(n);break;default:h=this.findDefaultInlineStreamEnd(n)}if(h<1e3&&s>0){const t=n.pos;n.pos=e.beginInlineImagePos,u=function(t){const e=[],n=t.length;let i=0;for(;i<n-1;)e.push(t[i++]<<8|t[i++]);return i<n&&e.push(t[i]),n+"_"+String.fromCharCode.apply(null,e)}(n.getBytes(s+h)),n.pos=t;const i=this.imageCache[u];if(void 0!==i)return this.buf2=r.Cmd.get("EI"),this.shift(),i.reset(),i}const d=new r.Dict(this.xref);for(const t in o)d.set(t,o[t]);let p=n.makeSubStream(c,h,d);return t&&(p=t.createStream(p,h)),p=this.filter(p,d,h),p.dict=d,void 0!==u&&(p.cacheKey="inline_img_"+ ++this._imageId,this.imageCache[u]=p),this.buf2=r.Cmd.get("EI"),this.shift(),p}_findStreamLength(t,e){const{stream:n}=this.lexer;n.pos=t;const i=e.length;for(;n.pos<n.end;){const r=n.peekBytes(2048),o=r.length-i;if(o<=0)break;let s=0;for(;s<o;){let o=0;for(;o<i&&r[s+o]===e[o];)o++;if(o>=i)return n.pos+=s,n.pos-t;s++}n.pos+=o}return-1}makeStream(t,e){const n=this.lexer;let s=n.stream;n.skipToNextLine();const a=s.pos-1;let l=t.get("Length");if(Number.isInteger(l)||((0,i.info)(`Bad length "${l&&l.toString()}" in stream.`),l=0),s.pos=a+l,n.nextChar(),this.tryShift()&&(0,r.isCmd)(this.buf2,"endstream"))this.shift();else{const t=new Uint8Array([101,110,100,115,116,114,101,97,109]);let e=this._findStreamLength(a,t);if(e<0){const n=1;for(let r=1;r<=n;r++){const n=t.length-r,l=t.slice(0,n),c=this._findStreamLength(a,l);if(c>=0){const t=s.peekBytes(n+1)[n];if(!(0,o.isWhiteSpace)(t))break;(0,i.info)(`Found "${(0,i.bytesToString)(l)}" when searching for endstream command.`),e=c;break}}if(e<0)throw new i.FormatError("Missing endstream command.")}l=e,n.nextChar(),this.shift(),this.shift()}return this.shift(),s=s.makeSubStream(a,l,t),e&&(s=e.createStream(s,l)),s=this.filter(s,t,l),s.dict=t,s}filter(t,e,n){let o=e.get("F","Filter"),s=e.get("DP","DecodeParms");if(o instanceof r.Name)return Array.isArray(s)&&(0,i.warn)("/DecodeParms should not be an Array, when /Filter is a Name."),this.makeFilter(t,o.name,n,s);let a=n;if(Array.isArray(o)){const e=o,n=s;for(let l=0,c=e.length;l<c;++l){if(o=this.xref.fetchIfRef(e[l]),!(o instanceof r.Name))throw new i.FormatError(`Bad filter name "${o}"`);s=null,Array.isArray(n)&&l in n&&(s=this.xref.fetchIfRef(n[l])),t=this.makeFilter(t,o.name,a,s),a=null}}return t}makeFilter(t,e,n,r){if(0===n)return(0,i.warn)(`Empty "${e}" stream.`),new s.NullStream;try{switch(e){case"Fl":case"FlateDecode":return r?new g.PredictorStream(new h.FlateStream(t,n),n,r):new h.FlateStream(t,n);case"LZW":case"LZWDecode":let e=1;return r?(r.has("EarlyChange")&&(e=r.get("EarlyChange")),new g.PredictorStream(new f.LZWStream(t,n,e),n,r)):new f.LZWStream(t,n,e);case"DCT":case"DCTDecode":return new d.JpegStream(t,n,r);case"JPX":case"JPXDecode":return new p.JpxStream(t,n,r);case"A85":case"ASCII85Decode":return new a.Ascii85Stream(t,n);case"AHx":case"ASCIIHexDecode":return new l.AsciiHexStream(t,n);case"CCF":case"CCITTFaxDecode":return new c.CCITTFaxStream(t,n,r);case"RL":case"RunLengthDecode":return new m.RunLengthStream(t,n);case"JBIG2Decode":return new u.Jbig2Stream(t,n,r)}return(0,i.warn)(`Filter "${e}" is not supported.`),t}catch(t){if(t instanceof o.MissingDataException)throw t;return(0,i.warn)(`Invalid stream: "${t}"`),new s.NullStream}}}e.Parser=y;const v=[1,0,0,0,0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,2,0,0,2,2,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function b(t){return t>=48&&t<=57?15&t:t>=65&&t<=70||t>=97&&t<=102?9+(15&t):-1}class w{constructor(t,e=null){this.stream=t,this.nextChar(),this.strBuf=[],this.knownCommands=e,this._hexStringNumWarn=0,this.beginInlineImagePos=-1}nextChar(){return this.currentChar=this.stream.getByte()}peekChar(){return this.stream.peekByte()}getNumber(){let t=this.currentChar,e=!1,n=0,r=1;if(45===t?(r=-1,t=this.nextChar(),45===t&&(t=this.nextChar())):43===t&&(t=this.nextChar()),10===t||13===t)do{t=this.nextChar()}while(10===t||13===t);if(46===t&&(n=10,t=this.nextChar()),t<48||t>57){const e=`Invalid number: ${String.fromCharCode(t)} (charCode ${t})`;if((0,o.isWhiteSpace)(t)||-1===t)return(0,i.info)(`Lexer.getNumber - "${e}".`),0;throw new i.FormatError(e)}let s=t-48,a=0,l=1;for(;(t=this.nextChar())>=0;)if(t>=48&&t<=57){const i=t-48;e?a=10*a+i:(0!==n&&(n*=10),s=10*s+i)}else if(46===t){if(0!==n)break;n=1}else if(45===t)(0,i.warn)("Badly formatted number: minus sign in the middle");else{if(69!==t&&101!==t)break;if(t=this.peekChar(),43===t||45===t)l=45===t?-1:1,this.nextChar();else if(t<48||t>57)break;e=!0}return 0!==n&&(s/=n),e&&(s*=10**(l*a)),r*s}getString(){let t=1,e=!1;const n=this.strBuf;n.length=0;let r=this.nextChar();for(;;){let o=!1;switch(0|r){case-1:(0,i.warn)("Unterminated string"),e=!0;break;case 40:++t,n.push("(");break;case 41:0==--t?(this.nextChar(),e=!0):n.push(")");break;case 92:switch(r=this.nextChar(),r){case-1:(0,i.warn)("Unterminated string"),e=!0;break;case 110:n.push("\n");break;case 114:n.push("\r");break;case 116:n.push("\t");break;case 98:n.push("\b");break;case 102:n.push("\f");break;case 92:case 40:case 41:n.push(String.fromCharCode(r));break;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:let t=15&r;r=this.nextChar(),o=!0,r>=48&&r<=55&&(t=(t<<3)+(15&r),r=this.nextChar(),r>=48&&r<=55&&(o=!1,t=(t<<3)+(15&r))),n.push(String.fromCharCode(t));break;case 13:10===this.peekChar()&&this.nextChar();break;case 10:break;default:n.push(String.fromCharCode(r))}break;default:n.push(String.fromCharCode(r))}if(e)break;o||(r=this.nextChar())}return n.join("")}getName(){let t,e;const n=this.strBuf;for(n.length=0;(t=this.nextChar())>=0&&!v[t];)if(35===t){if(t=this.nextChar(),v[t]){(0,i.warn)("Lexer_getName: NUMBER SIGN (#) should be followed by a hexadecimal number."),n.push("#");break}const r=b(t);if(-1!==r){e=t,t=this.nextChar();const o=b(t);if(-1===o){if((0,i.warn)(`Lexer_getName: Illegal digit (${String.fromCharCode(t)}) in hexadecimal number.`),n.push("#",String.fromCharCode(e)),v[t])break;n.push(String.fromCharCode(t));continue}n.push(String.fromCharCode(r<<4|o))}else n.push("#",String.fromCharCode(t))}else n.push(String.fromCharCode(t));return n.length>127&&(0,i.warn)(`Name token is longer than allowed by the spec: ${n.length}`),r.Name.get(n.join(""))}_hexStringWarn(t){5!=this._hexStringNumWarn++?this._hexStringNumWarn>5||(0,i.warn)(`getHexString - ignoring invalid character: ${t}`):(0,i.warn)("getHexString - ignoring additional invalid characters.")}getHexString(){const t=this.strBuf;t.length=0;let e,n,r=this.currentChar,o=!0;for(this._hexStringNumWarn=0;;){if(r<0){(0,i.warn)("Unterminated hex string");break}if(62===r){this.nextChar();break}if(1!==v[r]){if(o){if(e=b(r),-1===e){this._hexStringWarn(r),r=this.nextChar();continue}}else{if(n=b(r),-1===n){this._hexStringWarn(r),r=this.nextChar();continue}t.push(String.fromCharCode(e<<4|n))}o=!o,r=this.nextChar()}else r=this.nextChar()}return t.join("")}getObj(){let t=!1,e=this.currentChar;for(;;){if(e<0)return r.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(1!==v[e])break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return this.getNumber();case 40:return this.getString();case 47:return this.getName();case 91:return this.nextChar(),r.Cmd.get("[");case 93:return this.nextChar(),r.Cmd.get("]");case 60:return e=this.nextChar(),60===e?(this.nextChar(),r.Cmd.get("<<")):this.getHexString();case 62:return e=this.nextChar(),62===e?(this.nextChar(),r.Cmd.get(">>")):r.Cmd.get(">");case 123:return this.nextChar(),r.Cmd.get("{");case 125:return this.nextChar(),r.Cmd.get("}");case 41:throw this.nextChar(),new i.FormatError(`Illegal character: ${e}`)}let n=String.fromCharCode(e);if(e<32||e>127){const t=this.peekChar();if(t>=32&&t<=127)return this.nextChar(),r.Cmd.get(n)}const o=this.knownCommands;let s=void 0!==o?.[n];for(;(e=this.nextChar())>=0&&!v[e];){const t=n+String.fromCharCode(e);if(s&&void 0===o[t])break;if(128===n.length)throw new i.FormatError(`Command token too long: ${n.length}`);n=t,s=void 0!==o?.[n]}return"true"===n||"false"!==n&&("null"===n?null:("BI"===n&&(this.beginInlineImagePos=this.stream.pos),r.Cmd.get(n)))}skipToNextLine(){let t=this.currentChar;for(;t>=0;){if(13===t){t=this.nextChar(),10===t&&this.nextChar();break}if(10===t){this.nextChar();break}t=this.nextChar()}}}e.Lexer=w,e.Linearization=class{static create(t){function e(t,e,n=!1){const i=t.get(e);if(Number.isInteger(i)&&(n?i>=0:i>0))return i;throw new Error(`The "${e}" parameter in the linearization dictionary is invalid.`)}const n=new y({lexer:new w(t),xref:null}),i=n.getObj(),o=n.getObj(),s=n.getObj(),a=n.getObj();let l,c;if(!(Number.isInteger(i)&&Number.isInteger(o)&&(0,r.isCmd)(s,"obj")&&a instanceof r.Dict&&"number"==typeof(l=a.get("Linearized"))&&l>0))return null;if((c=e(a,"L"))!==t.length)throw new Error('The "L" parameter in the linearization dictionary does not equal the stream length.');return{length:c,hints:function(t){const e=t.get("H");let n;if(Array.isArray(e)&&(2===(n=e.length)||4===n)){for(let t=0;t<n;t++){const n=e[t];if(!(Number.isInteger(n)&&n>0))throw new Error(`Hint (${t}) in the linearization dictionary is invalid.`)}return e}throw new Error("Hint array in the linearization dictionary is invalid.")}(a),objectNumberFirst:e(a,"O"),endFirst:e(a,"E"),numPages:e(a,"N"),mainXRefEntriesOffset:e(a,"T"),pageFirst:a.has("P")?e(a,"P",!0):0}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Ascii85Stream=void 0;var i=n(18),r=n(3);class o extends i.DecodeStream{constructor(t,e){e&&(e*=.8),super(e),this.str=t,this.dict=t.dict,this.input=new Uint8Array(5)}readBlock(){const t=this.str;let e=t.getByte();for(;(0,r.isWhiteSpace)(e);)e=t.getByte();if(-1===e||126===e)return void(this.eof=!0);const n=this.bufferLength;let i,o;if(122===e){for(i=this.ensureBuffer(n+4),o=0;o<4;++o)i[n+o]=0;this.bufferLength+=4}else{const s=this.input;for(s[0]=e,o=1;o<5;++o){for(e=t.getByte();(0,r.isWhiteSpace)(e);)e=t.getByte();if(s[o]=e,-1===e||126===e)break}if(i=this.ensureBuffer(n+o-1),this.bufferLength+=o-1,o<5){for(;o<5;++o)s[o]=117;this.eof=!0}let a=0;for(o=0;o<5;++o)a=85*a+(s[o]-33);for(o=3;o>=0;--o)i[n+o]=255&a,a>>=8}}}e.Ascii85Stream=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StreamsSequenceStream=e.DecodeStream=void 0;var i=n(5),r=n(8);const o=new Uint8Array(0);class s extends i.BaseStream{constructor(t){if(super(),this._rawMinBufferLength=t||0,this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=o,this.minBufferLength=512,t)for(;this.minBufferLength<t;)this.minBufferLength*=2}get isEmpty(){for(;!this.eof&&0===this.bufferLength;)this.readBlock();return 0===this.bufferLength}ensureBuffer(t){const e=this.buffer;if(t<=e.byteLength)return e;let n=this.minBufferLength;for(;n<t;)n*=2;const i=new Uint8Array(n);return i.set(e),this.buffer=i}getByte(){const t=this.pos;for(;this.bufferLength<=t;){if(this.eof)return-1;this.readBlock()}return this.buffer[this.pos++]}getBytes(t){const e=this.pos;let n;if(t){for(this.ensureBuffer(e+t),n=e+t;!this.eof&&this.bufferLength<n;)this.readBlock();const i=this.bufferLength;n>i&&(n=i)}else{for(;!this.eof;)this.readBlock();n=this.bufferLength}return this.pos=n,this.buffer.subarray(e,n)}reset(){this.pos=0}makeSubStream(t,e,n=null){if(void 0===e)for(;!this.eof;)this.readBlock();else{const n=t+e;for(;this.bufferLength<=n&&!this.eof;)this.readBlock()}return new r.Stream(this.buffer,t,e,n)}getBaseStreams(){return this.str?this.str.getBaseStreams():null}}e.DecodeStream=s,e.StreamsSequenceStream=class extends s{constructor(t,e=null){let n=0;for(const e of t)n+=e instanceof s?e._rawMinBufferLength:e.length;super(n),this.streams=t,this._onError=e}readBlock(){const t=this.streams;if(0===t.length)return void(this.eof=!0);const e=t.shift();let n;try{n=e.getBytes()}catch(t){if(this._onError)return void this._onError(t,e.dict?.objId);throw t}const i=this.bufferLength,r=i+n.length;this.ensureBuffer(r).set(n,i),this.bufferLength=r}getBaseStreams(){const t=[];for(const e of this.streams){const n=e.getBaseStreams();n&&t.push(...n)}return t.length>0?t:null}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AsciiHexStream=void 0;var i=n(18);class r extends i.DecodeStream{constructor(t,e){e&&(e*=.5),super(e),this.str=t,this.dict=t.dict,this.firstDigit=-1}readBlock(){const t=this.str.getBytes(8e3);if(!t.length)return void(this.eof=!0);const e=t.length+1>>1,n=this.ensureBuffer(this.bufferLength+e);let i=this.bufferLength,r=this.firstDigit;for(const e of t){let t;if(e>=48&&e<=57)t=15&e;else{if(!(e>=65&&e<=70||e>=97&&e<=102)){if(62===e){this.eof=!0;break}continue}t=9+(15&e)}r<0?r=t:(n[i++]=r<<4|t,r=-1)}r>=0&&this.eof&&(n[i++]=r<<4,r=-1),this.firstDigit=r,this.bufferLength=i}}e.AsciiHexStream=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxStream=void 0;var i=n(21),r=n(18),o=n(4);class s extends r.DecodeStream{constructor(t,e,n){super(e),this.str=t,this.dict=t.dict,n instanceof o.Dict||(n=o.Dict.empty);const r={next:()=>t.getByte()};this.ccittFaxDecoder=new i.CCITTFaxDecoder(r,{K:n.get("K"),EndOfLine:n.get("EndOfLine"),EncodedByteAlign:n.get("EncodedByteAlign"),Columns:n.get("Columns"),Rows:n.get("Rows"),EndOfBlock:n.get("EndOfBlock"),BlackIs1:n.get("BlackIs1")})}readBlock(){for(;!this.eof;){const t=this.ccittFaxDecoder.readNextChar();if(-1===t)return void(this.eof=!0);this.ensureBuffer(this.bufferLength+1),this.buffer[this.bufferLength++]=t}}}e.CCITTFaxStream=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CCITTFaxDecoder=void 0;var i=n(2);const r=-1,o=[[-1,-1],[-1,-1],[7,8],[7,7],[6,6],[6,6],[6,5],[6,5],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[4,0],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[3,3],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2],[1,2]],s=[[-1,-1],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[12,1984],[12,2048],[12,2112],[12,2176],[12,2240],[12,2304],[11,1856],[11,1856],[11,1920],[11,1920],[12,2368],[12,2432],[12,2496],[12,2560]],a=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[8,29],[8,29],[8,30],[8,30],[8,45],[8,45],[8,46],[8,46],[7,22],[7,22],[7,22],[7,22],[7,23],[7,23],[7,23],[7,23],[8,47],[8,47],[8,48],[8,48],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[6,13],[7,20],[7,20],[7,20],[7,20],[8,33],[8,33],[8,34],[8,34],[8,35],[8,35],[8,36],[8,36],[8,37],[8,37],[8,38],[8,38],[7,19],[7,19],[7,19],[7,19],[8,31],[8,31],[8,32],[8,32],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,1],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[6,12],[8,53],[8,53],[8,54],[8,54],[7,26],[7,26],[7,26],[7,26],[8,39],[8,39],[8,40],[8,40],[8,41],[8,41],[8,42],[8,42],[8,43],[8,43],[8,44],[8,44],[7,21],[7,21],[7,21],[7,21],[7,28],[7,28],[7,28],[7,28],[8,61],[8,61],[8,62],[8,62],[8,63],[8,63],[8,0],[8,0],[8,320],[8,320],[8,384],[8,384],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,10],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[5,11],[7,27],[7,27],[7,27],[7,27],[8,59],[8,59],[8,60],[8,60],[9,1472],[9,1536],[9,1600],[9,1728],[7,18],[7,18],[7,18],[7,18],[7,24],[7,24],[7,24],[7,24],[8,49],[8,49],[8,50],[8,50],[8,51],[8,51],[8,52],[8,52],[7,25],[7,25],[7,25],[7,25],[8,55],[8,55],[8,56],[8,56],[8,57],[8,57],[8,58],[8,58],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,192],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[6,1664],[8,448],[8,448],[8,512],[8,512],[9,704],[9,768],[8,640],[8,640],[8,576],[8,576],[9,832],[9,896],[9,960],[9,1024],[9,1088],[9,1152],[9,1216],[9,1280],[9,1344],[9,1408],[7,256],[7,256],[7,256],[7,256],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,2],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[4,3],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,128],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,8],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[5,9],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,16],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[6,17],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,4],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[4,5],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,14],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[6,15],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[5,64],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,6],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7],[4,7]],l=[[-1,-1],[-1,-1],[12,-2],[12,-2],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[-1,-1],[11,1792],[11,1792],[11,1792],[11,1792],[12,1984],[12,1984],[12,2048],[12,2048],[12,2112],[12,2112],[12,2176],[12,2176],[12,2240],[12,2240],[12,2304],[12,2304],[11,1856],[11,1856],[11,1856],[11,1856],[11,1920],[11,1920],[11,1920],[11,1920],[12,2368],[12,2368],[12,2432],[12,2432],[12,2496],[12,2496],[12,2560],[12,2560],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[10,18],[12,52],[12,52],[13,640],[13,704],[13,768],[13,832],[12,55],[12,55],[12,56],[12,56],[13,1280],[13,1344],[13,1408],[13,1472],[12,59],[12,59],[12,60],[12,60],[13,1536],[13,1600],[11,24],[11,24],[11,24],[11,24],[11,25],[11,25],[11,25],[11,25],[13,1664],[13,1728],[12,320],[12,320],[12,384],[12,384],[12,448],[12,448],[13,512],[13,576],[12,53],[12,53],[12,54],[12,54],[13,896],[13,960],[13,1024],[13,1088],[13,1152],[13,1216],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64],[10,64]],c=[[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[8,13],[11,23],[11,23],[12,50],[12,51],[12,44],[12,45],[12,46],[12,47],[12,57],[12,58],[12,61],[12,256],[10,16],[10,16],[10,16],[10,16],[10,17],[10,17],[10,17],[10,17],[12,48],[12,49],[12,62],[12,63],[12,30],[12,31],[12,32],[12,33],[12,40],[12,41],[11,22],[11,22],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[8,14],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,10],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[7,11],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[9,15],[12,128],[12,192],[12,26],[12,27],[12,28],[12,29],[11,19],[11,19],[11,20],[11,20],[12,34],[12,35],[12,36],[12,37],[12,38],[12,39],[11,21],[11,21],[12,42],[12,43],[10,0],[10,0],[10,0],[10,0],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12],[7,12]],h=[[-1,-1],[-1,-1],[-1,-1],[-1,-1],[6,9],[6,8],[5,7],[5,7],[4,6],[4,6],[4,6],[4,6],[4,5],[4,5],[4,5],[4,5],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,1],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[3,4],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,3],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2],[2,2]];e.CCITTFaxDecoder=class{constructor(t,e={}){if(!t||"function"!=typeof t.next)throw new Error('CCITTFaxDecoder - invalid "source" parameter.');let n;for(this.source=t,this.eof=!1,this.encoding=e.K||0,this.eoline=e.EndOfLine||!1,this.byteAlign=e.EncodedByteAlign||!1,this.columns=e.Columns||1728,this.rows=e.Rows||0,this.eoblock=e.EndOfBlock??!0,this.black=e.BlackIs1||!1,this.codingLine=new Uint32Array(this.columns+1),this.refLine=new Uint32Array(this.columns+2),this.codingLine[0]=this.columns,this.codingPos=0,this.row=0,this.nextLine2D=this.encoding<0,this.inputBits=0,this.inputBuf=0,this.outputBits=0,this.rowsDone=!1;0===(n=this._lookBits(12));)this._eatBits(1);1===n&&this._eatBits(12),this.encoding>0&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1))}readNextChar(){if(this.eof)return-1;const t=this.refLine,e=this.codingLine,n=this.columns;let o,s,a,l,c;if(0===this.outputBits){if(this.rowsDone&&(this.eof=!0),this.eof)return-1;let a,c,h;if(this.err=!1,this.nextLine2D){for(l=0;e[l]<n;++l)t[l]=e[l];for(t[l++]=n,t[l]=n,e[0]=0,this.codingPos=0,o=0,s=0;e[this.codingPos]<n;)switch(a=this._getTwoDimCode(),a){case 0:this._addPixels(t[o+1],s),t[o+1]<n&&(o+=2);break;case 1:if(a=c=0,s){do{a+=h=this._getBlackCode()}while(h>=64);do{c+=h=this._getWhiteCode()}while(h>=64)}else{do{a+=h=this._getWhiteCode()}while(h>=64);do{c+=h=this._getBlackCode()}while(h>=64)}for(this._addPixels(e[this.codingPos]+a,s),e[this.codingPos]<n&&this._addPixels(e[this.codingPos]+c,1^s);t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 7:if(this._addPixels(t[o]+3,s),s^=1,e[this.codingPos]<n)for(++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 5:if(this._addPixels(t[o]+2,s),s^=1,e[this.codingPos]<n)for(++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 3:if(this._addPixels(t[o]+1,s),s^=1,e[this.codingPos]<n)for(++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 2:if(this._addPixels(t[o],s),s^=1,e[this.codingPos]<n)for(++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 8:if(this._addPixelsNeg(t[o]-3,s),s^=1,e[this.codingPos]<n)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 6:if(this._addPixelsNeg(t[o]-2,s),s^=1,e[this.codingPos]<n)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case 4:if(this._addPixelsNeg(t[o]-1,s),s^=1,e[this.codingPos]<n)for(o>0?--o:++o;t[o]<=e[this.codingPos]&&t[o]<n;)o+=2;break;case r:this._addPixels(n,0),this.eof=!0;break;default:(0,i.info)("bad 2d code"),this._addPixels(n,0),this.err=!0}}else for(e[0]=0,this.codingPos=0,s=0;e[this.codingPos]<n;){if(a=0,s)do{a+=h=this._getBlackCode()}while(h>=64);else do{a+=h=this._getWhiteCode()}while(h>=64);this._addPixels(e[this.codingPos]+a,s),s^=1}let u=!1;if(this.byteAlign&&(this.inputBits&=-8),this.eoblock||this.row!==this.rows-1){if(a=this._lookBits(12),this.eoline)for(;a!==r&&1!==a;)this._eatBits(1),a=this._lookBits(12);else for(;0===a;)this._eatBits(1),a=this._lookBits(12);1===a?(this._eatBits(12),u=!0):a===r&&(this.eof=!0)}else this.rowsDone=!0;if(!this.eof&&this.encoding>0&&!this.rowsDone&&(this.nextLine2D=!this._lookBits(1),this._eatBits(1)),this.eoblock&&u&&this.byteAlign){if(a=this._lookBits(12),1===a){if(this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1)),this.encoding>=0)for(l=0;l<4;++l)a=this._lookBits(12),1!==a&&(0,i.info)("bad rtc code: "+a),this._eatBits(12),this.encoding>0&&(this._lookBits(1),this._eatBits(1));this.eof=!0}}else if(this.err&&this.eoline){for(;;){if(a=this._lookBits(13),a===r)return this.eof=!0,-1;if(a>>1==1)break;this._eatBits(1)}this._eatBits(12),this.encoding>0&&(this._eatBits(1),this.nextLine2D=!(1&a))}this.outputBits=e[0]>0?e[this.codingPos=0]:e[this.codingPos=1],this.row++}if(this.outputBits>=8)c=1&this.codingPos?0:255,this.outputBits-=8,0===this.outputBits&&e[this.codingPos]<n&&(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]);else{a=8,c=0;do{if("number"!=typeof this.outputBits)throw new i.FormatError('Invalid /CCITTFaxDecode data, "outputBits" must be a number.');this.outputBits>a?(c<<=a,1&this.codingPos||(c|=255>>8-a),this.outputBits-=a,a=0):(c<<=this.outputBits,1&this.codingPos||(c|=255>>8-this.outputBits),a-=this.outputBits,this.outputBits=0,e[this.codingPos]<n?(this.codingPos++,this.outputBits=e[this.codingPos]-e[this.codingPos-1]):a>0&&(c<<=a,a=0))}while(a)}return this.black&&(c^=255),c}_addPixels(t,e){const n=this.codingLine;let r=this.codingPos;t>n[r]&&(t>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,t=this.columns),1&r^e&&++r,n[r]=t),this.codingPos=r}_addPixelsNeg(t,e){const n=this.codingLine;let r=this.codingPos;if(t>n[r])t>this.columns&&((0,i.info)("row is wrong length"),this.err=!0,t=this.columns),1&r^e&&++r,n[r]=t;else if(t<n[r]){for(t<0&&((0,i.info)("invalid code"),this.err=!0,t=0);r>0&&t<n[r-1];)--r;n[r]=t}this.codingPos=r}_findTableCode(t,e,n,i){const o=i||0;for(let i=t;i<=e;++i){let t=this._lookBits(i);if(t===r)return[!0,1,!1];if(i<e&&(t<<=e-i),!o||t>=o){const e=n[t-o];if(e[0]===i)return this._eatBits(i),[!0,e[1],!0]}}return[!1,0,!1]}_getTwoDimCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(7),t=o[e],t?.[0]>0)return this._eatBits(t[0]),t[1]}else{const t=this._findTableCode(1,7,o);if(t[0]&&t[2])return t[1]}return(0,i.info)("Bad two dim code"),r}_getWhiteCode(){let t,e=0;if(this.eoblock){if(e=this._lookBits(12),e===r)return 1;if(t=e>>5==0?s[e]:a[e>>3],t[0]>0)return this._eatBits(t[0]),t[1]}else{let t=this._findTableCode(1,9,a);if(t[0])return t[1];if(t=this._findTableCode(11,12,s),t[0])return t[1]}return(0,i.info)("bad white code"),this._eatBits(1),1}_getBlackCode(){let t,e;if(this.eoblock){if(t=this._lookBits(13),t===r)return 1;if(e=t>>7==0?l[t]:t>>9==0&&t>>7!=0?c[(t>>1)-64]:h[t>>7],e[0]>0)return this._eatBits(e[0]),e[1]}else{let t=this._findTableCode(2,6,h);if(t[0])return t[1];if(t=this._findTableCode(7,12,c,64),t[0])return t[1];if(t=this._findTableCode(10,13,l),t[0])return t[1]}return(0,i.info)("bad black code"),this._eatBits(1),1}_lookBits(t){let e;for(;this.inputBits<t;){if(-1===(e=this.source.next()))return 0===this.inputBits?r:this.inputBuf<<t-this.inputBits&65535>>16-t;this.inputBuf=this.inputBuf<<8|e,this.inputBits+=8}return this.inputBuf>>this.inputBits-t&65535>>16-t}_eatBits(t){(this.inputBits-=t)<0&&(this.inputBits=0)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FlateStream=void 0;var i=n(18),r=n(2);const o=new Int32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Int32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),a=new Int32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),l=[new Int32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],c=[new Int32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];class h extends i.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict;const n=t.getByte(),i=t.getByte();if(-1===n||-1===i)throw new r.FormatError(`Invalid header in flate stream: ${n}, ${i}`);if(8!=(15&n))throw new r.FormatError(`Unknown compression method in flate stream: ${n}, ${i}`);if(((n<<8)+i)%31!=0)throw new r.FormatError(`Bad FCHECK in flate stream: ${n}, ${i}`);if(32&i)throw new r.FormatError(`FDICT bit set in flate stream: ${n}, ${i}`);this.codeSize=0,this.codeBuf=0}getBits(t){const e=this.str;let n,i=this.codeSize,o=this.codeBuf;for(;i<t;){if(-1===(n=e.getByte()))throw new r.FormatError("Bad encoding in flate stream");o|=n<<i,i+=8}return n=o&(1<<t)-1,this.codeBuf=o>>t,this.codeSize=i-=t,n}getCode(t){const e=this.str,n=t[0],i=t[1];let o,s=this.codeSize,a=this.codeBuf;for(;s<i&&-1!==(o=e.getByte());)a|=o<<s,s+=8;const l=n[a&(1<<i)-1],c=l>>16,h=65535&l;if(c<1||s<c)throw new r.FormatError("Bad encoding in flate stream");return this.codeBuf=a>>c,this.codeSize=s-c,h}generateHuffmanTable(t){const e=t.length;let n,i=0;for(n=0;n<e;++n)t[n]>i&&(i=t[n]);const r=1<<i,o=new Int32Array(r);for(let s=1,a=0,l=2;s<=i;++s,a<<=1,l<<=1)for(let i=0;i<e;++i)if(t[i]===s){let t=0,e=a;for(n=0;n<s;++n)t=t<<1|1&e,e>>=1;for(n=t;n<r;n+=l)o[n]=s<<16|i;++a}return[o,i]}readBlock(){let t,e;const n=this.str;let i,h,u=this.getBits(3);if(1&u&&(this.eof=!0),u>>=1,0===u){let e;if(-1===(e=n.getByte()))throw new r.FormatError("Bad block header in flate stream");let i=e;if(-1===(e=n.getByte()))throw new r.FormatError("Bad block header in flate stream");if(i|=e<<8,-1===(e=n.getByte()))throw new r.FormatError("Bad block header in flate stream");let o=e;if(-1===(e=n.getByte()))throw new r.FormatError("Bad block header in flate stream");if(o|=e<<8,o!==(65535&~i)&&(0!==i||0!==o))throw new r.FormatError("Bad uncompressed block length in flate stream");this.codeBuf=0,this.codeSize=0;const s=this.bufferLength,a=s+i;if(t=this.ensureBuffer(a),this.bufferLength=a,0===i)-1===n.peekByte()&&(this.eof=!0);else{const e=n.getBytes(i);t.set(e,s),e.length<i&&(this.eof=!0)}return}if(1===u)i=l,h=c;else{if(2!==u)throw new r.FormatError("Unknown block type in flate stream");{const t=this.getBits(5)+257,n=this.getBits(5)+1,r=this.getBits(4)+4,s=new Uint8Array(o.length);let a;for(a=0;a<r;++a)s[o[a]]=this.getBits(3);const l=this.generateHuffmanTable(s);e=0,a=0;const c=t+n,u=new Uint8Array(c);let d,p,f;for(;a<c;){const t=this.getCode(l);if(16===t)d=2,p=3,f=e;else if(17===t)d=3,p=3,f=e=0;else{if(18!==t){u[a++]=e=t;continue}d=7,p=11,f=e=0}let n=this.getBits(d)+p;for(;n-- >0;)u[a++]=f}i=this.generateHuffmanTable(u.subarray(0,t)),h=this.generateHuffmanTable(u.subarray(t,c))}}t=this.buffer;let d=t?t.length:0,p=this.bufferLength;for(;;){let n=this.getCode(i);if(n<256){p+1>=d&&(t=this.ensureBuffer(p+1),d=t.length),t[p++]=n;continue}if(256===n)return void(this.bufferLength=p);n-=257,n=s[n];let r=n>>16;r>0&&(r=this.getBits(r)),e=(65535&n)+r,n=this.getCode(h),n=a[n],r=n>>16,r>0&&(r=this.getBits(r));const o=(65535&n)+r;p+e>=d&&(t=this.ensureBuffer(p+e),d=t.length);for(let n=0;n<e;++n,++p)t[p]=t[p-o]}}}e.FlateStream=h},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Stream=void 0;var i=n(5),r=n(18),o=n(4),s=n(24),a=n(2);class l extends r.DecodeStream{constructor(t,e,n){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=n}get bytes(){return(0,a.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new s.Jbig2Image,e=[];if(this.params instanceof o.Dict){const t=this.params.get("JBIG2Globals");if(t instanceof i.BaseStream){const n=t.getBytes();e.push({data:n,start:0,end:n.length})}}e.push({data:this.bytes,start:0,end:this.bytes.length});const n=t.parseChunks(e),r=n.length;for(let t=0;t<r;t++)n[t]^=255;this.buffer=n,this.bufferLength=r,this.eof=!0}}e.Jbig2Stream=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Jbig2Image=void 0;var i=n(2),r=n(3),o=n(25),s=n(21);class a extends i.BaseException{constructor(t){super(`JBIG2 error: ${t}`,"Jbig2Error")}}class l{getContexts(t){return t in this?this[t]:this[t]=new Int8Array(65536)}}class c{constructor(t,e,n){this.data=t,this.start=e,this.end=n}get decoder(){const t=new o.ArithmeticDecoder(this.data,this.start,this.end);return(0,i.shadow)(this,"decoder",t)}get contextCache(){const t=new l;return(0,i.shadow)(this,"contextCache",t)}}const h=2**31-1,u=-(2**31);function d(t,e,n){const i=t.getContexts(e);let r=1;function o(t){let e=0;for(let o=0;o<t;o++){const t=n.readBit(i,r);r=r<256?r<<1|t:511&(r<<1|t)|256,e=e<<1|t}return e>>>0}const s=o(1),a=o(1)?o(1)?o(1)?o(1)?o(1)?o(32)+4436:o(12)+340:o(8)+84:o(6)+20:o(4)+4:o(2);let l;return 0===s?l=a:a>0&&(l=-a),l>=u&&l<=h?l:null}function p(t,e,n){const i=t.getContexts("IAID");let r=1;for(let t=0;t<n;t++)r=r<<1|e.readBit(i,r);return n<31?r&(1<<n)-1:2147483647&r}const f=["SymbolDictionary",null,null,null,"IntermediateTextRegion",null,"ImmediateTextRegion","ImmediateLosslessTextRegion",null,null,null,null,null,null,null,null,"PatternDictionary",null,null,null,"IntermediateHalftoneRegion",null,"ImmediateHalftoneRegion","ImmediateLosslessHalftoneRegion",null,null,null,null,null,null,null,null,null,null,null,null,"IntermediateGenericRegion",null,"ImmediateGenericRegion","ImmediateLosslessGenericRegion","IntermediateGenericRefinementRegion",null,"ImmediateGenericRefinementRegion","ImmediateLosslessGenericRefinementRegion",null,null,null,null,"PageInformation","EndOfPage","EndOfStripe","EndOfFile","Profiles","Tables",null,null,null,null,null,null,null,null,"Extension"],g=[[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:2,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:2,y:-1},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}],[{x:-1,y:-2},{x:0,y:-2},{x:1,y:-2},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-2,y:0},{x:-1,y:0}],[{x:-3,y:-1},{x:-2,y:-1},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-4,y:0},{x:-3,y:0},{x:-2,y:0},{x:-1,y:0}]],m=[{coding:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:1,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:-1,y:1},{x:0,y:1},{x:1,y:1}]},{coding:[{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:-1,y:0}],reference:[{x:0,y:-1},{x:-1,y:0},{x:0,y:0},{x:1,y:0},{x:0,y:1},{x:1,y:1}]}],y=[39717,1941,229,405],v=[32,8];function b(t,e,n,i,r,o,s,a){if(t)return N(new P(a.data,a.start,a.end),e,n,!1);if(0===i&&!o&&!r&&4===s.length&&3===s[0].x&&-1===s[0].y&&-3===s[1].x&&-1===s[1].y&&2===s[2].x&&-2===s[2].y&&-2===s[3].x&&-2===s[3].y)return function(t,e,n){const i=n.decoder,r=n.contextCache.getContexts("GB"),o=[];let s,a,l,c,h,u,d;for(a=0;a<e;a++)for(h=o[a]=new Uint8Array(t),u=a<1?h:o[a-1],d=a<2?h:o[a-2],s=d[0]<<13|d[1]<<12|d[2]<<11|u[0]<<7|u[1]<<6|u[2]<<5|u[3]<<4,l=0;l<t;l++)h[l]=c=i.readBit(r,s),s=(31735&s)<<1|(l+3<t?d[l+3]<<11:0)|(l+4<t?u[l+4]<<4:0)|c;return o}(e,n,a);const l=!!o,c=g[i].concat(s);c.sort((function(t,e){return t.y-e.y||t.x-e.x}));const h=c.length,u=new Int8Array(h),d=new Int8Array(h),p=[];let f,m,v=0,b=0,w=0,x=0;for(m=0;m<h;m++)u[m]=c[m].x,d[m]=c[m].y,b=Math.min(b,c[m].x),w=Math.max(w,c[m].x),x=Math.min(x,c[m].y),m<h-1&&c[m].y===c[m+1].y&&c[m].x===c[m+1].x-1?v|=1<<h-1-m:p.push(m);const _=p.length,S=new Int8Array(_),C=new Int8Array(_),k=new Uint16Array(_);for(f=0;f<_;f++)m=p[f],S[f]=c[m].x,C[f]=c[m].y,k[f]=1<<h-1-m;const A=-b,E=-x,T=e-w,M=y[i];let O=new Uint8Array(e);const I=[],D=a.decoder,F=a.contextCache.getContexts("GB");let R,L,B,j,z,$=0,H=0;for(let t=0;t<n;t++)if(r&&($^=D.readBit(F,M),$))I.push(O);else for(O=new Uint8Array(O),I.push(O),R=0;R<e;R++){if(l&&o[t][R]){O[R]=0;continue}if(R>=A&&R<T&&t>=E)for(H=H<<1&v,m=0;m<_;m++)L=t+C[m],B=R+S[m],j=I[L][B],j&&(j=k[m],H|=j);else for(H=0,z=h-1,m=0;m<h;m++,z--)B=R+u[m],B>=0&&B<e&&(L=t+d[m],L>=0&&(j=I[L][B],j&&(H|=j<<z)));const n=D.readBit(F,H);O[R]=n}return I}function w(t,e,n,i,r,o,s,l,c){let h=m[n].coding;0===n&&(h=h.concat([l[0]]));const u=h.length,d=new Int32Array(u),p=new Int32Array(u);let f;for(f=0;f<u;f++)d[f]=h[f].x,p[f]=h[f].y;let g=m[n].reference;0===n&&(g=g.concat([l[1]]));const y=g.length,b=new Int32Array(y),w=new Int32Array(y);for(f=0;f<y;f++)b[f]=g[f].x,w[f]=g[f].y;const x=i[0].length,_=i.length,S=v[n],C=[],k=c.decoder,A=c.contextCache.getContexts("GR");let E=0;for(let n=0;n<e;n++){if(s&&(E^=k.readBit(A,S),E))throw new a("prediction is not supported");const e=new Uint8Array(t);C.push(e);for(let s=0;s<t;s++){let a,l,c=0;for(f=0;f<u;f++)a=n+p[f],l=s+d[f],a<0||l<0||l>=t?c<<=1:c=c<<1|C[a][l];for(f=0;f<y;f++)a=n+w[f]-o,l=s+b[f]-r,a<0||a>=_||l<0||l>=x?c<<=1:c=c<<1|i[a][l];const h=k.readBit(A,c);e[s]=h}}return C}function x(t,e,n,i,r,o,s,l,c,h,u,f,g,m,y,v,b,x,_){if(t&&e)throw new a("refinement with Huffman is not supported");const S=[];let C,k;for(C=0;C<i;C++){if(k=new Uint8Array(n),r)for(let t=0;t<n;t++)k[t]=r;S.push(k)}const A=b.decoder,E=b.contextCache;let T=t?-m.tableDeltaT.decode(_):-d(E,"IADT",A),M=0;for(C=0;C<o;){T+=t?m.tableDeltaT.decode(_):d(E,"IADT",A),M+=t?m.tableFirstS.decode(_):d(E,"IAFS",A);let i=M;for(;;){let r=0;s>1&&(r=t?_.readBits(x):d(E,"IAIT",A));const o=s*T+r,M=t?m.symbolIDTable.decode(_):p(E,A,c),O=e&&(t?_.readBit():d(E,"IARI",A));let I=l[M],D=I[0].length,F=I.length;if(O){const t=d(E,"IARDW",A),e=d(E,"IARDH",A);D+=t,F+=e,I=w(D,F,y,I,(t>>1)+d(E,"IARDX",A),(e>>1)+d(E,"IARDY",A),!1,v,b)}const P=o-(1&f?0:F-1),R=i-(2&f?D-1:0);let L,N,B;if(h){for(L=0;L<F;L++){if(k=S[R+L],!k)continue;B=I[L];const t=Math.min(n-P,D);switch(g){case 0:for(N=0;N<t;N++)k[P+N]|=B[N];break;case 2:for(N=0;N<t;N++)k[P+N]^=B[N];break;default:throw new a(`operator ${g} is not supported`)}}i+=F-1}else{for(N=0;N<F;N++)if(k=S[P+N],k)switch(B=I[N],g){case 0:for(L=0;L<D;L++)k[R+L]|=B[L];break;case 2:for(L=0;L<D;L++)k[R+L]^=B[L];break;default:throw new a(`operator ${g} is not supported`)}i+=D-1}C++;const j=t?m.tableDeltaS.decode(_):d(E,"IADS",A);if(null===j)break;i+=j+u}}return S}function _(t,e){const n={};n.number=(0,r.readUint32)(t,e);const i=t[e+4],o=63&i;if(!f[o])throw new a("invalid segment type: "+o);n.type=o,n.typeName=f[o],n.deferredNonRetain=!!(128&i);const s=!!(64&i),l=t[e+5];let c=l>>5&7;const h=[31&l];let u=e+6;if(7===l){c=536870911&(0,r.readUint32)(t,u-1),u+=3;let e=c+7>>3;for(h[0]=t[u++];--e>0;)h.push(t[u++])}else if(5===l||6===l)throw new a("invalid referred-to flags");n.retainBits=h;let d=4;n.number<=256?d=1:n.number<=65536&&(d=2);const p=[];let g,m;for(g=0;g<c;g++){let e;e=1===d?t[u]:2===d?(0,r.readUint16)(t,u):(0,r.readUint32)(t,u),p.push(e),u+=d}if(n.referredTo=p,s?(n.pageAssociation=(0,r.readUint32)(t,u),u+=4):n.pageAssociation=t[u++],n.length=(0,r.readUint32)(t,u),u+=4,4294967295===n.length){if(38!==o)throw new a("invalid unknown segment length");{const e=C(t,u),i=!!(1&t[u+k]),r=6,o=new Uint8Array(r);for(i||(o[0]=255,o[1]=172),o[2]=e.height>>>24&255,o[3]=e.height>>16&255,o[4]=e.height>>8&255,o[5]=255&e.height,g=u,m=t.length;g<m;g++){let e=0;for(;e<r&&o[e]===t[g+e];)e++;if(e===r){n.length=g+r;break}}if(4294967295===n.length)throw new a("segment end was not found")}}return n.headerEnd=u,n}function S(t,e,n,i){const r=[];let o=n;for(;o<i;){const n=_(e,o);o=n.headerEnd;const i={header:n,data:e};if(t.randomAccess||(i.start=o,o+=n.length,i.end=o),r.push(i),51===n.type)break}if(t.randomAccess)for(let t=0,e=r.length;t<e;t++)r[t].start=o,o+=r[t].header.length,r[t].end=o;return r}function C(t,e){return{width:(0,r.readUint32)(t,e),height:(0,r.readUint32)(t,e+4),x:(0,r.readUint32)(t,e+8),y:(0,r.readUint32)(t,e+12),combinationOperator:7&t[e+16]}}const k=17;function A(t,e){const n=t.header,i=t.data,o=t.end;let s,l,c,h,u=t.start;switch(n.type){case 0:const t={},e=(0,r.readUint16)(i,u);if(t.huffman=!!(1&e),t.refinement=!!(2&e),t.huffmanDHSelector=e>>2&3,t.huffmanDWSelector=e>>4&3,t.bitmapSizeSelector=e>>6&1,t.aggregationInstancesSelector=e>>7&1,t.bitmapCodingContextUsed=!!(256&e),t.bitmapCodingContextRetained=!!(512&e),t.template=e>>10&3,t.refinementTemplate=e>>12&1,u+=2,!t.huffman){for(h=0===t.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,r.readInt8)(i,u),y:(0,r.readInt8)(i,u+1)}),u+=2;t.at=l}if(t.refinement&&!t.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,r.readInt8)(i,u),y:(0,r.readInt8)(i,u+1)}),u+=2;t.refinementAt=l}t.numberOfExportedSymbols=(0,r.readUint32)(i,u),u+=4,t.numberOfNewSymbols=(0,r.readUint32)(i,u),u+=4,s=[t,n.number,n.referredTo,i,u,o];break;case 6:case 7:const d={};d.info=C(i,u),u+=k;const p=(0,r.readUint16)(i,u);if(u+=2,d.huffman=!!(1&p),d.refinement=!!(2&p),d.logStripSize=p>>2&3,d.stripSize=1<<d.logStripSize,d.referenceCorner=p>>4&3,d.transposed=!!(64&p),d.combinationOperator=p>>7&3,d.defaultPixelValue=p>>9&1,d.dsOffset=p<<17>>27,d.refinementTemplate=p>>15&1,d.huffman){const t=(0,r.readUint16)(i,u);u+=2,d.huffmanFS=3&t,d.huffmanDS=t>>2&3,d.huffmanDT=t>>4&3,d.huffmanRefinementDW=t>>6&3,d.huffmanRefinementDH=t>>8&3,d.huffmanRefinementDX=t>>10&3,d.huffmanRefinementDY=t>>12&3,d.huffmanRefinementSizeSelector=!!(16384&t)}if(d.refinement&&!d.refinementTemplate){for(l=[],c=0;c<2;c++)l.push({x:(0,r.readInt8)(i,u),y:(0,r.readInt8)(i,u+1)}),u+=2;d.refinementAt=l}d.numberOfSymbolInstances=(0,r.readUint32)(i,u),u+=4,s=[d,n.referredTo,i,u,o];break;case 16:const f={},g=i[u++];f.mmr=!!(1&g),f.template=g>>1&3,f.patternWidth=i[u++],f.patternHeight=i[u++],f.maxPatternIndex=(0,r.readUint32)(i,u),u+=4,s=[f,n.number,i,u,o];break;case 22:case 23:const m={};m.info=C(i,u),u+=k;const y=i[u++];m.mmr=!!(1&y),m.template=y>>1&3,m.enableSkip=!!(8&y),m.combinationOperator=y>>4&7,m.defaultPixelValue=y>>7&1,m.gridWidth=(0,r.readUint32)(i,u),u+=4,m.gridHeight=(0,r.readUint32)(i,u),u+=4,m.gridOffsetX=4294967295&(0,r.readUint32)(i,u),u+=4,m.gridOffsetY=4294967295&(0,r.readUint32)(i,u),u+=4,m.gridVectorX=(0,r.readUint16)(i,u),u+=2,m.gridVectorY=(0,r.readUint16)(i,u),u+=2,s=[m,n.referredTo,i,u,o];break;case 38:case 39:const v={};v.info=C(i,u),u+=k;const b=i[u++];if(v.mmr=!!(1&b),v.template=b>>1&3,v.prediction=!!(8&b),!v.mmr){for(h=0===v.template?4:1,l=[],c=0;c<h;c++)l.push({x:(0,r.readInt8)(i,u),y:(0,r.readInt8)(i,u+1)}),u+=2;v.at=l}s=[v,i,u,o];break;case 48:const w={width:(0,r.readUint32)(i,u),height:(0,r.readUint32)(i,u+4),resolutionX:(0,r.readUint32)(i,u+8),resolutionY:(0,r.readUint32)(i,u+12)};4294967295===w.height&&delete w.height;const x=i[u+16];(0,r.readUint16)(i,u+17),w.lossless=!!(1&x),w.refinement=!!(2&x),w.defaultPixelValue=x>>2&1,w.combinationOperator=x>>3&3,w.requiresBuffer=!!(32&x),w.combinationOperatorOverride=!!(64&x),s=[w];break;case 49:case 50:case 51:case 62:break;case 53:s=[n.number,i,u,o];break;default:throw new a(`segment type ${n.typeName}(${n.type}) is not implemented`)}const d="on"+n.typeName;d in e&&e[d].apply(e,s)}function E(t,e){for(let n=0,i=t.length;n<i;n++)A(t[n],e)}class T{onPageInformation(t){this.currentPageInfo=t;const e=t.width+7>>3,n=new Uint8ClampedArray(e*t.height);t.defaultPixelValue&&n.fill(255),this.buffer=n}drawBitmap(t,e){const n=this.currentPageInfo,i=t.width,r=t.height,o=n.width+7>>3,s=n.combinationOperatorOverride?t.combinationOperator:n.combinationOperator,l=this.buffer,c=128>>(7&t.x);let h,u,d,p,f=t.y*o+(t.x>>3);switch(s){case 0:for(h=0;h<r;h++){for(d=c,p=f,u=0;u<i;u++)e[h][u]&&(l[p]|=d),d>>=1,d||(d=128,p++);f+=o}break;case 2:for(h=0;h<r;h++){for(d=c,p=f,u=0;u<i;u++)e[h][u]&&(l[p]^=d),d>>=1,d||(d=128,p++);f+=o}break;default:throw new a(`operator ${s} is not supported`)}}onImmediateGenericRegion(t,e,n,i){const r=t.info,o=new c(e,n,i),s=b(t.mmr,r.width,r.height,t.template,t.prediction,null,t.at,o);this.drawBitmap(r,s)}onImmediateLosslessGenericRegion(){this.onImmediateGenericRegion(...arguments)}onSymbolDictionary(t,e,n,i,o,s){let l,h;t.huffman&&(l=function(t,e,n){let i,r,o,s,l=0;switch(t.huffmanDHSelector){case 0:case 1:i=F(t.huffmanDHSelector+4);break;case 3:i=R(l,e,n),l++;break;default:throw new a("invalid Huffman DH selector")}switch(t.huffmanDWSelector){case 0:case 1:r=F(t.huffmanDWSelector+2);break;case 3:r=R(l,e,n),l++;break;default:throw new a("invalid Huffman DW selector")}return t.bitmapSizeSelector?(o=R(l,e,n),l++):o=F(1),s=t.aggregationInstancesSelector?R(l,e,n):F(1),{tableDeltaHeight:i,tableDeltaWidth:r,tableBitmapSize:o,tableAggregateInstances:s}}(t,n,this.customTables),h=new P(i,o,s));let u=this.symbols;u||(this.symbols=u={});const f=[];for(const t of n){const e=u[t];e&&f.push(...e)}const g=new c(i,o,s);u[e]=function(t,e,n,i,o,s,l,c,h,u,f,g){if(t&&e)throw new a("symbol refinement with Huffman is not supported");const m=[];let y=0,v=(0,r.log2)(n.length+i);const _=f.decoder,S=f.contextCache;let C,k;for(t&&(C=F(1),k=[],v=Math.max(v,1));m.length<i;){y+=t?s.tableDeltaHeight.decode(g):d(S,"IADH",_);let i=0,r=0;const o=t?k.length:0;for(;;){const o=t?s.tableDeltaWidth.decode(g):d(S,"IADW",_);if(null===o)break;let a;if(i+=o,r+=i,e){const r=d(S,"IAAI",_);if(r>1)a=x(t,e,i,y,0,r,1,n.concat(m),v,0,0,1,0,s,h,u,f,0,g);else{const t=p(S,_,v),e=d(S,"IARDX",_),r=d(S,"IARDY",_);a=w(i,y,h,t<n.length?n[t]:m[t-n.length],e,r,!1,u,f)}m.push(a)}else t?k.push(i):(a=b(!1,i,y,l,!1,null,c,f),m.push(a))}if(t&&!e){const t=s.tableBitmapSize.decode(g);let e;if(g.byteAlign(),0===t)e=L(g,r,y);else{const n=g.end,i=g.position+t;g.end=i,e=N(g,r,y,!1),g.end=n,g.position=i}const n=k.length;if(o===n-1)m.push(e);else{let t,i,r,s,a,l=0;for(t=o;t<n;t++){for(s=k[t],r=l+s,a=[],i=0;i<y;i++)a.push(e[i].subarray(l,r));m.push(a),l=r}}}}const A=[],E=[];let T,M,O=!1;const I=n.length+i;for(;E.length<I;){let e=t?C.decode(g):d(S,"IAEX",_);for(;e--;)E.push(O);O=!O}for(T=0,M=n.length;T<M;T++)E[T]&&A.push(n[T]);for(let t=0;t<i;T++,t++)E[T]&&A.push(m[t]);return A}(t.huffman,t.refinement,f,t.numberOfNewSymbols,t.numberOfExportedSymbols,l,t.template,t.at,t.refinementTemplate,t.refinementAt,g,h)}onImmediateTextRegion(t,e,n,i,o){const s=t.info;let l,h;const u=this.symbols,d=[];for(const t of e){const e=u[t];e&&d.push(...e)}const p=(0,r.log2)(d.length);t.huffman&&(h=new P(n,i,o),l=function(t,e,n,i,r){const o=[];for(let t=0;t<=34;t++){const e=r.readBits(4);o.push(new M([t,e,0,0]))}const s=new I(o,!1);o.length=0;for(let t=0;t<i;){const e=s.decode(r);if(e>=32){let n,i,s;switch(e){case 32:if(0===t)throw new a("no previous value in symbol ID table");i=r.readBits(2)+3,n=o[t-1].prefixLength;break;case 33:i=r.readBits(3)+3,n=0;break;case 34:i=r.readBits(7)+11,n=0;break;default:throw new a("invalid code length in symbol ID table")}for(s=0;s<i;s++)o.push(new M([t,n,0,0])),t++}else o.push(new M([t,e,0,0])),t++}r.byteAlign();const l=new I(o,!1);let c,h,u,d=0;switch(t.huffmanFS){case 0:case 1:c=F(t.huffmanFS+6);break;case 3:c=R(d,e,n),d++;break;default:throw new a("invalid Huffman FS selector")}switch(t.huffmanDS){case 0:case 1:case 2:h=F(t.huffmanDS+8);break;case 3:h=R(d,e,n),d++;break;default:throw new a("invalid Huffman DS selector")}switch(t.huffmanDT){case 0:case 1:case 2:u=F(t.huffmanDT+11);break;case 3:u=R(d,e,n),d++;break;default:throw new a("invalid Huffman DT selector")}if(t.refinement)throw new a("refinement with Huffman is not supported");return{symbolIDTable:l,tableFirstS:c,tableDeltaS:h,tableDeltaT:u}}(t,e,this.customTables,d.length,h));const f=new c(n,i,o),g=x(t.huffman,t.refinement,s.width,s.height,t.defaultPixelValue,t.numberOfSymbolInstances,t.stripSize,d,p,t.transposed,t.dsOffset,t.referenceCorner,t.combinationOperator,l,t.refinementTemplate,t.refinementAt,f,t.logStripSize,h);this.drawBitmap(s,g)}onImmediateLosslessTextRegion(){this.onImmediateTextRegion(...arguments)}onPatternDictionary(t,e,n,i,r){let o=this.patterns;o||(this.patterns=o={});const s=new c(n,i,r);o[e]=function(t,e,n,i,r,o){const s=[];t||(s.push({x:-e,y:0}),0===r&&s.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const a=b(t,(i+1)*e,n,r,!1,null,s,o),l=[];for(let t=0;t<=i;t++){const i=[],r=e*t,o=r+e;for(let t=0;t<n;t++)i.push(a[t].subarray(r,o));l.push(i)}return l}(t.mmr,t.patternWidth,t.patternHeight,t.maxPatternIndex,t.template,s)}onImmediateHalftoneRegion(t,e,n,i,o){const s=this.patterns[e[0]],l=t.info,h=new c(n,i,o),u=function(t,e,n,i,o,s,l,c,h,u,d,p,f,g,m){if(l)throw new a("skip is not supported");if(0!==c)throw new a(`operator "${c}" is not supported in halftone region`);const y=[];let v,w,x;for(v=0;v<o;v++){if(x=new Uint8Array(i),s)for(w=0;w<i;w++)x[w]=s;y.push(x)}const _=e.length,S=e[0],C=S[0].length,k=S.length,A=(0,r.log2)(_),E=[];t||(E.push({x:n<=1?3:2,y:-1}),0===n&&E.push({x:-3,y:-1},{x:2,y:-2},{x:-2,y:-2}));const T=[];let M,O,I,D,F,R,L,B,j,z,$;for(t&&(M=new P(m.data,m.start,m.end)),v=A-1;v>=0;v--)O=t?N(M,h,u,!0):b(!1,h,u,n,!1,null,E,m),T[v]=O;for(I=0;I<u;I++)for(D=0;D<h;D++){for(F=0,R=0,w=A-1;w>=0;w--)F^=T[w][I][D],R|=F<<w;if(L=e[R],B=d+I*g+D*f>>8,j=p+I*f-D*g>>8,B>=0&&B+C<=i&&j>=0&&j+k<=o)for(v=0;v<k;v++)for($=y[j+v],z=L[v],w=0;w<C;w++)$[B+w]|=z[w];else{let t,e;for(v=0;v<k;v++)if(e=j+v,!(e<0||e>=o))for($=y[e],z=L[v],w=0;w<C;w++)t=B+w,t>=0&&t<i&&($[t]|=z[w])}}return y}(t.mmr,s,t.template,l.width,l.height,t.defaultPixelValue,t.enableSkip,t.combinationOperator,t.gridWidth,t.gridHeight,t.gridOffsetX,t.gridOffsetY,t.gridVectorX,t.gridVectorY,h);this.drawBitmap(l,u)}onImmediateLosslessHalftoneRegion(){this.onImmediateHalftoneRegion(...arguments)}onTables(t,e,n,i){let o=this.customTables;o||(this.customTables=o={}),o[t]=function(t,e,n){const i=t[e],o=4294967295&(0,r.readUint32)(t,e+1),s=4294967295&(0,r.readUint32)(t,e+5),a=new P(t,e+9,n),l=1+(i>>1&7),c=1+(i>>4&7),h=[];let u,d,p=o;do{u=a.readBits(l),d=a.readBits(c),h.push(new M([p,u,d,0])),p+=1<<d}while(p<s);return u=a.readBits(l),h.push(new M([o-1,u,32,0,"lower"])),u=a.readBits(l),h.push(new M([s,u,32,0])),1&i&&(u=a.readBits(l),h.push(new M([u,0]))),new I(h,!1)}(e,n,i)}}class M{constructor(t){2===t.length?(this.isOOB=!0,this.rangeLow=0,this.prefixLength=t[0],this.rangeLength=0,this.prefixCode=t[1],this.isLowerRange=!1):(this.isOOB=!1,this.rangeLow=t[0],this.prefixLength=t[1],this.rangeLength=t[2],this.prefixCode=t[3],this.isLowerRange="lower"===t[4])}}class O{constructor(t){this.children=[],t?(this.isLeaf=!0,this.rangeLength=t.rangeLength,this.rangeLow=t.rangeLow,this.isLowerRange=t.isLowerRange,this.isOOB=t.isOOB):this.isLeaf=!1}buildTree(t,e){const n=t.prefixCode>>e&1;if(e<=0)this.children[n]=new O(t);else{let i=this.children[n];i||(this.children[n]=i=new O(null)),i.buildTree(t,e-1)}}decodeNode(t){if(this.isLeaf){if(this.isOOB)return null;const e=t.readBits(this.rangeLength);return this.rangeLow+(this.isLowerRange?-e:e)}const e=this.children[t.readBit()];if(!e)throw new a("invalid Huffman data");return e.decodeNode(t)}}class I{constructor(t,e){e||this.assignPrefixCodes(t),this.rootNode=new O(null);for(let e=0,n=t.length;e<n;e++){const n=t[e];n.prefixLength>0&&this.rootNode.buildTree(n,n.prefixLength-1)}}decode(t){return this.rootNode.decodeNode(t)}assignPrefixCodes(t){const e=t.length;let n=0;for(let i=0;i<e;i++)n=Math.max(n,t[i].prefixLength);const i=new Uint32Array(n+1);for(let n=0;n<e;n++)i[t[n].prefixLength]++;let r,o,s,a=1,l=0;for(i[0]=0;a<=n;){for(l=l+i[a-1]<<1,r=l,o=0;o<e;)s=t[o],s.prefixLength===a&&(s.prefixCode=r,r++),o++;a++}}}const D={};function F(t){let e,n=D[t];if(n)return n;switch(t){case 1:e=[[0,1,4,0],[16,2,8,2],[272,3,16,6],[65808,3,32,7]];break;case 2:e=[[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[75,6,32,62],[6,63]];break;case 3:e=[[-256,8,8,254],[0,1,0,0],[1,2,0,2],[2,3,0,6],[3,4,3,14],[11,5,6,30],[-257,8,32,255,"lower"],[75,7,32,126],[6,62]];break;case 4:e=[[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[76,5,32,31]];break;case 5:e=[[-255,7,8,126],[1,1,0,0],[2,2,0,2],[3,3,0,6],[4,4,3,14],[12,5,6,30],[-256,7,32,127,"lower"],[76,6,32,62]];break;case 6:e=[[-2048,5,10,28],[-1024,4,9,8],[-512,4,8,9],[-256,4,7,10],[-128,5,6,29],[-64,5,5,30],[-32,4,5,11],[0,2,7,0],[128,3,7,2],[256,3,8,3],[512,4,9,12],[1024,4,10,13],[-2049,6,32,62,"lower"],[2048,6,32,63]];break;case 7:e=[[-1024,4,9,8],[-512,3,8,0],[-256,4,7,9],[-128,5,6,26],[-64,5,5,27],[-32,4,5,10],[0,4,5,11],[32,5,5,28],[64,5,6,29],[128,4,7,12],[256,3,8,1],[512,3,9,2],[1024,3,10,3],[-1025,5,32,30,"lower"],[2048,5,32,31]];break;case 8:e=[[-15,8,3,252],[-7,9,1,508],[-5,8,1,253],[-3,9,0,509],[-2,7,0,124],[-1,4,0,10],[0,2,1,0],[2,5,0,26],[3,6,0,58],[4,3,4,4],[20,6,1,59],[22,4,4,11],[38,4,5,12],[70,5,6,27],[134,5,7,28],[262,6,7,60],[390,7,8,125],[646,6,10,61],[-16,9,32,510,"lower"],[1670,9,32,511],[2,1]];break;case 9:e=[[-31,8,4,252],[-15,9,2,508],[-11,8,2,253],[-7,9,1,509],[-5,7,1,124],[-3,4,1,10],[-1,3,1,2],[1,3,1,3],[3,5,1,26],[5,6,1,58],[7,3,5,4],[39,6,2,59],[43,4,5,11],[75,4,6,12],[139,5,7,27],[267,5,8,28],[523,6,8,60],[779,7,9,125],[1291,6,11,61],[-32,9,32,510,"lower"],[3339,9,32,511],[2,0]];break;case 10:e=[[-21,7,4,122],[-5,8,0,252],[-4,7,0,123],[-3,5,0,24],[-2,2,2,0],[2,5,0,25],[3,6,0,54],[4,7,0,124],[5,8,0,253],[6,2,6,1],[70,5,5,26],[102,6,5,55],[134,6,6,56],[198,6,7,57],[326,6,8,58],[582,6,9,59],[1094,6,10,60],[2118,7,11,125],[-22,8,32,254,"lower"],[4166,8,32,255],[2,2]];break;case 11:e=[[1,1,0,0],[2,2,1,2],[4,4,0,12],[5,4,1,13],[7,5,1,28],[9,5,2,29],[13,6,2,60],[17,7,2,122],[21,7,3,123],[29,7,4,124],[45,7,5,125],[77,7,6,126],[141,7,32,127]];break;case 12:e=[[1,1,0,0],[2,2,0,2],[3,3,1,6],[5,5,0,28],[6,5,1,29],[8,6,1,60],[10,7,0,122],[11,7,1,123],[13,7,2,124],[17,7,3,125],[25,7,4,126],[41,8,5,254],[73,8,32,255]];break;case 13:e=[[1,1,0,0],[2,3,0,4],[3,4,0,12],[4,5,0,28],[5,4,1,13],[7,3,3,5],[15,6,1,58],[17,6,2,59],[21,6,3,60],[29,6,4,61],[45,6,5,62],[77,7,6,126],[141,7,32,127]];break;case 14:e=[[-2,3,0,4],[-1,3,0,5],[0,1,0,0],[1,3,0,6],[2,3,0,7]];break;case 15:e=[[-24,7,4,124],[-8,6,2,60],[-4,5,1,28],[-2,4,0,12],[-1,3,0,4],[0,1,0,0],[1,3,0,5],[2,4,0,13],[3,5,1,29],[5,6,2,61],[9,7,4,125],[-25,7,32,126,"lower"],[25,7,32,127]];break;default:throw new a(`standard table B.${t} does not exist`)}for(let t=0,n=e.length;t<n;t++)e[t]=new M(e[t]);return n=new I(e,!0),D[t]=n,n}class P{constructor(t,e,n){this.data=t,this.start=e,this.end=n,this.position=e,this.shift=-1,this.currentByte=0}readBit(){if(this.shift<0){if(this.position>=this.end)throw new a("end of data while reading bit");this.currentByte=this.data[this.position++],this.shift=7}const t=this.currentByte>>this.shift&1;return this.shift--,t}readBits(t){let e,n=0;for(e=t-1;e>=0;e--)n|=this.readBit()<<e;return n}byteAlign(){this.shift=-1}next(){return this.position>=this.end?-1:this.data[this.position++]}}function R(t,e,n){let i=0;for(let r=0,o=e.length;r<o;r++){const o=n[e[r]];if(o){if(t===i)return o;i++}}throw new a("can't find custom Huffman table")}function L(t,e,n){const i=[];for(let r=0;r<n;r++){const n=new Uint8Array(e);i.push(n);for(let i=0;i<e;i++)n[i]=t.readBit();t.byteAlign()}return i}function N(t,e,n,i){const r={K:-1,Columns:e,Rows:n,BlackIs1:!0,EndOfBlock:i},o=new s.CCITTFaxDecoder(t,r),a=[];let l,c=!1;for(let t=0;t<n;t++){const t=new Uint8Array(e);a.push(t);let n=-1;for(let i=0;i<e;i++)n<0&&(l=o.readNextChar(),-1===l&&(l=0,c=!0),n=7),t[i]=l>>n&1,n--}if(i&&!c){const t=5;for(let e=0;e<t&&-1!==o.readNextChar();e++);}return a}e.Jbig2Image=class{parseChunks(t){return function(t){const e=new T;for(let n=0,i=t.length;n<i;n++){const i=t[n];E(S({},i.data,i.start,i.end),e)}return e.buffer}(t)}parse(t){throw new Error("Not implemented: Jbig2Image.parse")}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ArithmeticDecoder=void 0;const n=[{qe:22017,nmps:1,nlps:1,switchFlag:1},{qe:13313,nmps:2,nlps:6,switchFlag:0},{qe:6145,nmps:3,nlps:9,switchFlag:0},{qe:2753,nmps:4,nlps:12,switchFlag:0},{qe:1313,nmps:5,nlps:29,switchFlag:0},{qe:545,nmps:38,nlps:33,switchFlag:0},{qe:22017,nmps:7,nlps:6,switchFlag:1},{qe:21505,nmps:8,nlps:14,switchFlag:0},{qe:18433,nmps:9,nlps:14,switchFlag:0},{qe:14337,nmps:10,nlps:14,switchFlag:0},{qe:12289,nmps:11,nlps:17,switchFlag:0},{qe:9217,nmps:12,nlps:18,switchFlag:0},{qe:7169,nmps:13,nlps:20,switchFlag:0},{qe:5633,nmps:29,nlps:21,switchFlag:0},{qe:22017,nmps:15,nlps:14,switchFlag:1},{qe:21505,nmps:16,nlps:14,switchFlag:0},{qe:20737,nmps:17,nlps:15,switchFlag:0},{qe:18433,nmps:18,nlps:16,switchFlag:0},{qe:14337,nmps:19,nlps:17,switchFlag:0},{qe:13313,nmps:20,nlps:18,switchFlag:0},{qe:12289,nmps:21,nlps:19,switchFlag:0},{qe:10241,nmps:22,nlps:19,switchFlag:0},{qe:9217,nmps:23,nlps:20,switchFlag:0},{qe:8705,nmps:24,nlps:21,switchFlag:0},{qe:7169,nmps:25,nlps:22,switchFlag:0},{qe:6145,nmps:26,nlps:23,switchFlag:0},{qe:5633,nmps:27,nlps:24,switchFlag:0},{qe:5121,nmps:28,nlps:25,switchFlag:0},{qe:4609,nmps:29,nlps:26,switchFlag:0},{qe:4353,nmps:30,nlps:27,switchFlag:0},{qe:2753,nmps:31,nlps:28,switchFlag:0},{qe:2497,nmps:32,nlps:29,switchFlag:0},{qe:2209,nmps:33,nlps:30,switchFlag:0},{qe:1313,nmps:34,nlps:31,switchFlag:0},{qe:1089,nmps:35,nlps:32,switchFlag:0},{qe:673,nmps:36,nlps:33,switchFlag:0},{qe:545,nmps:37,nlps:34,switchFlag:0},{qe:321,nmps:38,nlps:35,switchFlag:0},{qe:273,nmps:39,nlps:36,switchFlag:0},{qe:133,nmps:40,nlps:37,switchFlag:0},{qe:73,nmps:41,nlps:38,switchFlag:0},{qe:37,nmps:42,nlps:39,switchFlag:0},{qe:21,nmps:43,nlps:40,switchFlag:0},{qe:9,nmps:44,nlps:41,switchFlag:0},{qe:5,nmps:45,nlps:42,switchFlag:0},{qe:1,nmps:45,nlps:43,switchFlag:0},{qe:22017,nmps:46,nlps:46,switchFlag:0}];e.ArithmeticDecoder=class{constructor(t,e,n){this.data=t,this.bp=e,this.dataEnd=n,this.chigh=t[e],this.clow=0,this.byteIn(),this.chigh=this.chigh<<7&65535|this.clow>>9&127,this.clow=this.clow<<7&65535,this.ct-=7,this.a=32768}byteIn(){const t=this.data;let e=this.bp;255===t[e]?t[e+1]>143?(this.clow+=65280,this.ct=8):(e++,this.clow+=t[e]<<9,this.ct=7,this.bp=e):(e++,this.clow+=e<this.dataEnd?t[e]<<8:65280,this.ct=8,this.bp=e),this.clow>65535&&(this.chigh+=this.clow>>16,this.clow&=65535)}readBit(t,e){let i=t[e]>>1,r=1&t[e];const o=n[i],s=o.qe;let a,l=this.a-s;if(this.chigh<s)l<s?(l=s,a=r,i=o.nmps):(l=s,a=1^r,1===o.switchFlag&&(r=a),i=o.nlps);else{if(this.chigh-=s,0!=(32768&l))return this.a=l,r;l<s?(a=1^r,1===o.switchFlag&&(r=a),i=o.nlps):(a=r,i=o.nmps)}do{0===this.ct&&this.byteIn(),l<<=1,this.chigh=this.chigh<<1&65535|this.clow>>15&1,this.clow=this.clow<<1&65535,this.ct--}while(0==(32768&l));return this.a=l,t[e]=i<<1|r,a}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegStream=void 0;var i=n(18),r=n(4),o=n(27),s=n(2);class a extends i.DecodeStream{constructor(t,e,n){let i;for(;-1!==(i=t.getByte());)if(255===i){t.skip(-1);break}super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=n}get bytes(){return(0,s.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t={decodeTransform:void 0,colorTransform:void 0},e=this.dict.getArray("D","Decode");if((this.forceRGBA||this.forceRGB)&&Array.isArray(e)){const n=this.dict.get("BPC","BitsPerComponent")||8,i=e.length,r=new Int32Array(i);let o=!1;const s=(1<<n)-1;for(let t=0;t<i;t+=2)r[t]=256*(e[t+1]-e[t])|0,r[t+1]=e[t]*s|0,256===r[t]&&0===r[t+1]||(o=!0);o&&(t.decodeTransform=r)}if(this.params instanceof r.Dict){const e=this.params.get("ColorTransform");Number.isInteger(e)&&(t.colorTransform=e)}const n=new o.JpegImage(t);n.parse(this.bytes);const i=n.getData({width:this.drawWidth,height:this.drawHeight,forceRGBA:this.forceRGBA,forceRGB:this.forceRGB,isSourcePDF:!0});this.buffer=i,this.bufferLength=i.length,this.eof=!0}}e.JpegStream=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpegImage=void 0;var i=n(2),r=n(28),o=n(3);class s extends i.BaseException{constructor(t){super(`JPEG error: ${t}`,"JpegError")}}class a extends i.BaseException{constructor(t,e){super(t,"DNLMarkerError"),this.scanLines=e}}class l extends i.BaseException{constructor(t){super(t,"EOIMarkerError")}}const c=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),h=4017,u=799,d=3406,p=2276,f=1567,g=3784,m=5793,y=2896;function v(t,e){let n,i,r=0,o=16;for(;o>0&&!t[o-1];)o--;const s=[{children:[],index:0}];let a,l=s[0];for(n=0;n<o;n++){for(i=0;i<t[n];i++){for(l=s.pop(),l.children[l.index]=e[r];l.index>0;)l=s.pop();for(l.index++,s.push(l);s.length<=n;)s.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a;r++}n+1<o&&(s.push(a={children:[],index:0}),l.children[l.index]=a.children,l=a)}return s[0].children}function b(t,e,n){return 64*((t.blocksPerLine+1)*e+n)}function w(t,e,n,r,h,u,d,p,f,g=!1){const m=n.mcusPerLine,y=n.progressive,v=e;let w=0,x=0;function _(){if(x>0)return x--,w>>x&1;if(w=t[e++],255===w){const i=t[e++];if(i){if(220===i&&g){e+=2;const i=(0,o.readUint16)(t,e);if(e+=2,i>0&&i!==n.scanLines)throw new a("Found DNL marker (0xFFDC) while parsing scan data",i)}else if(217===i){if(g){const t=O*(8===n.precision?8:0);if(t>0&&Math.round(n.scanLines/t)>=5)throw new a("Found EOI marker (0xFFD9) while parsing scan data, possibly caused by incorrect `scanLines` parameter",t)}throw new l("Found EOI marker (0xFFD9) while parsing scan data")}throw new s(`unexpected marker ${(w<<8|i).toString(16)}`)}}return x=7,w>>>7}function C(t){let e=t;for(;;){switch(e=e[_()],typeof e){case"number":return e;case"object":continue}throw new s("invalid huffman sequence")}}function k(t){let e=0;for(;t>0;)e=e<<1|_(),t--;return e}function A(t){if(1===t)return 1===_()?1:-1;const e=k(t);return e>=1<<t-1?e:e+(-1<<t)+1}let E,T=0,M=0,O=0;function I(t,e,n,i,r){const o=n%m;O=(n/m|0)*t.v+i;const s=o*t.h+r;e(t,b(t,O,s))}function D(t,e,n){O=n/t.blocksPerLine|0;const i=n%t.blocksPerLine;e(t,b(t,O,i))}const F=r.length;let P,R,L,N,B,j;j=y?0===u?0===p?function(t,e){const n=C(t.huffmanTableDC),i=0===n?0:A(n)<<f;t.blockData[e]=t.pred+=i}:function(t,e){t.blockData[e]|=_()<<f}:0===p?function(t,e){if(T>0)return void T--;let n=u;const i=d;for(;n<=i;){const i=C(t.huffmanTableAC),r=15&i,o=i>>4;if(0===r){if(o<15){T=k(o)+(1<<o)-1;break}n+=16;continue}n+=o;const s=c[n];t.blockData[e+s]=A(r)*(1<<f),n++}}:function(t,e){let n=u;const i=d;let r,o,a=0;for(;n<=i;){const i=e+c[n],l=t.blockData[i]<0?-1:1;switch(M){case 0:if(o=C(t.huffmanTableAC),r=15&o,a=o>>4,0===r)a<15?(T=k(a)+(1<<a),M=4):(a=16,M=1);else{if(1!==r)throw new s("invalid ACn encoding");E=A(r),M=a?2:3}continue;case 1:case 2:t.blockData[i]?t.blockData[i]+=l*(_()<<f):(a--,0===a&&(M=2===M?3:0));break;case 3:t.blockData[i]?t.blockData[i]+=l*(_()<<f):(t.blockData[i]=E<<f,M=0);break;case 4:t.blockData[i]&&(t.blockData[i]+=l*(_()<<f))}n++}4===M&&(T--,0===T&&(M=0))}:function(t,e){const n=C(t.huffmanTableDC),i=0===n?0:A(n);t.blockData[e]=t.pred+=i;let r=1;for(;r<64;){const n=C(t.huffmanTableAC),i=15&n,o=n>>4;if(0===i){if(o<15)break;r+=16;continue}r+=o;const s=c[r];t.blockData[e+s]=A(i),r++}};let z,$=0;const H=1===F?r[0].blocksPerLine*r[0].blocksPerColumn:m*n.mcusPerColumn;let U,V;for(;$<=H;){const n=h?Math.min(H-$,h):H;if(n>0){for(R=0;R<F;R++)r[R].pred=0;if(T=0,1===F)for(P=r[0],B=0;B<n;B++)D(P,j,$),$++;else for(B=0;B<n;B++){for(R=0;R<F;R++)for(P=r[R],U=P.h,V=P.v,L=0;L<V;L++)for(N=0;N<U;N++)I(P,j,$,L,N);$++}}if(x=0,z=S(t,e),!z)break;if(z.invalid){const t=n>0?"unexpected":"excessive";(0,i.warn)(`decodeScan - ${t} MCU data, current marker is: ${z.invalid}`),e=z.offset}if(!(z.marker>=65488&&z.marker<=65495))break;e+=2}return e-v}function x(t,e,n){const i=t.quantizationTable,r=t.blockData;let o,a,l,c,v,b,w,x,_,S,C,k,A,E,T,M,O;if(!i)throw new s("missing required Quantization Table.");for(let t=0;t<64;t+=8)_=r[e+t],S=r[e+t+1],C=r[e+t+2],k=r[e+t+3],A=r[e+t+4],E=r[e+t+5],T=r[e+t+6],M=r[e+t+7],_*=i[t],0!=(S|C|k|A|E|T|M)?(S*=i[t+1],C*=i[t+2],k*=i[t+3],A*=i[t+4],E*=i[t+5],T*=i[t+6],M*=i[t+7],o=m*_+128>>8,a=m*A+128>>8,l=C,c=T,v=y*(S-M)+128>>8,x=y*(S+M)+128>>8,b=k<<4,w=E<<4,o=o+a+1>>1,a=o-a,O=l*g+c*f+128>>8,l=l*f-c*g+128>>8,c=O,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,o=o+c+1>>1,c=o-c,a=a+l+1>>1,l=a-l,O=v*p+x*d+2048>>12,v=v*d-x*p+2048>>12,x=O,O=b*u+w*h+2048>>12,b=b*h-w*u+2048>>12,w=O,n[t]=o+x,n[t+7]=o-x,n[t+1]=a+w,n[t+6]=a-w,n[t+2]=l+b,n[t+5]=l-b,n[t+3]=c+v,n[t+4]=c-v):(O=m*_+512>>10,n[t]=O,n[t+1]=O,n[t+2]=O,n[t+3]=O,n[t+4]=O,n[t+5]=O,n[t+6]=O,n[t+7]=O);for(let t=0;t<8;++t)_=n[t],S=n[t+8],C=n[t+16],k=n[t+24],A=n[t+32],E=n[t+40],T=n[t+48],M=n[t+56],0!=(S|C|k|A|E|T|M)?(o=m*_+2048>>12,a=m*A+2048>>12,l=C,c=T,v=y*(S-M)+2048>>12,x=y*(S+M)+2048>>12,b=k,w=E,o=4112+(o+a+1>>1),a=o-a,O=l*g+c*f+2048>>12,l=l*f-c*g+2048>>12,c=O,v=v+w+1>>1,w=v-w,x=x+b+1>>1,b=x-b,o=o+c+1>>1,c=o-c,a=a+l+1>>1,l=a-l,O=v*p+x*d+2048>>12,v=v*d-x*p+2048>>12,x=O,O=b*u+w*h+2048>>12,b=b*h-w*u+2048>>12,w=O,_=o+x,M=o-x,S=a+w,T=a-w,C=l+b,E=l-b,k=c+v,A=c-v,_<16?_=0:_>=4080?_=255:_>>=4,S<16?S=0:S>=4080?S=255:S>>=4,C<16?C=0:C>=4080?C=255:C>>=4,k<16?k=0:k>=4080?k=255:k>>=4,A<16?A=0:A>=4080?A=255:A>>=4,E<16?E=0:E>=4080?E=255:E>>=4,T<16?T=0:T>=4080?T=255:T>>=4,M<16?M=0:M>=4080?M=255:M>>=4,r[e+t]=_,r[e+t+8]=S,r[e+t+16]=C,r[e+t+24]=k,r[e+t+32]=A,r[e+t+40]=E,r[e+t+48]=T,r[e+t+56]=M):(O=m*_+8192>>14,O=O<-2040?0:O>=2024?255:O+2056>>4,r[e+t]=O,r[e+t+8]=O,r[e+t+16]=O,r[e+t+24]=O,r[e+t+32]=O,r[e+t+40]=O,r[e+t+48]=O,r[e+t+56]=O)}function _(t,e){const n=e.blocksPerLine,i=e.blocksPerColumn,r=new Int16Array(64);for(let t=0;t<i;t++)for(let i=0;i<n;i++)x(e,b(e,t,i),r);return e.blockData}function S(t,e,n=e){const i=t.length-1;let r=n<e?n:e;if(e>=i)return null;const s=(0,o.readUint16)(t,e);if(s>=65472&&s<=65534)return{invalid:null,marker:s,offset:e};let a=(0,o.readUint16)(t,r);for(;!(a>=65472&&a<=65534);){if(++r>=i)return null;a=(0,o.readUint16)(t,r)}return{invalid:s.toString(16),marker:a,offset:r}}e.JpegImage=class{constructor({decodeTransform:t=null,colorTransform:e=-1}={}){this._decodeTransform=t,this._colorTransform=e}parse(t,{dnlScanLines:e=null}={}){function n(){const e=(0,o.readUint16)(t,d);d+=2;let n=d+e-2;const r=S(t,n,d);r?.invalid&&((0,i.warn)("readDataBlock - incorrect length, current marker is: "+r.invalid),n=r.offset);const s=t.subarray(d,n);return d+=s.length,s}function r(t){const e=Math.ceil(t.samplesPerLine/8/t.maxH),n=Math.ceil(t.scanLines/8/t.maxV);for(const i of t.components){const r=Math.ceil(Math.ceil(t.samplesPerLine/8)*i.h/t.maxH),o=Math.ceil(Math.ceil(t.scanLines/8)*i.v/t.maxV),s=e*i.h,a=n*i.v*64*(s+1);i.blockData=new Int16Array(a),i.blocksPerLine=r,i.blocksPerColumn=o}t.mcusPerLine=e,t.mcusPerColumn=n}let h,u,d=0,p=null,f=null,g=0;const m=[],y=[],b=[];let x=(0,o.readUint16)(t,d);if(d+=2,65496!==x)throw new s("SOI not found");x=(0,o.readUint16)(t,d),d+=2;t:for(;65497!==x;){let _,C,k;switch(x){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:const A=n();65504===x&&74===A[0]&&70===A[1]&&73===A[2]&&70===A[3]&&0===A[4]&&(p={version:{major:A[5],minor:A[6]},densityUnits:A[7],xDensity:A[8]<<8|A[9],yDensity:A[10]<<8|A[11],thumbWidth:A[12],thumbHeight:A[13],thumbData:A.subarray(14,14+3*A[12]*A[13])}),65518===x&&65===A[0]&&100===A[1]&&111===A[2]&&98===A[3]&&101===A[4]&&(f={version:A[5]<<8|A[6],flags0:A[7]<<8|A[8],flags1:A[9]<<8|A[10],transformCode:A[11]});break;case 65499:const E=(0,o.readUint16)(t,d);d+=2;const T=E+d-2;let M;for(;d<T;){const e=t[d++],n=new Uint16Array(64);if(e>>4==0)for(C=0;C<64;C++)M=c[C],n[M]=t[d++];else{if(e>>4!=1)throw new s("DQT - invalid table spec");for(C=0;C<64;C++)M=c[C],n[M]=(0,o.readUint16)(t,d),d+=2}m[15&e]=n}break;case 65472:case 65473:case 65474:if(h)throw new s("Only single frame JPEGs supported");d+=2,h={},h.extended=65473===x,h.progressive=65474===x,h.precision=t[d++];const O=(0,o.readUint16)(t,d);d+=2,h.scanLines=e||O,h.samplesPerLine=(0,o.readUint16)(t,d),d+=2,h.components=[],h.componentIds={};const I=t[d++];let D=0,F=0;for(_=0;_<I;_++){const e=t[d],n=t[d+1]>>4,i=15&t[d+1];D<n&&(D=n),F<i&&(F=i);const r=t[d+2];k=h.components.push({h:n,v:i,quantizationId:r,quantizationTable:null}),h.componentIds[e]=k-1,d+=3}h.maxH=D,h.maxV=F,r(h);break;case 65476:const P=(0,o.readUint16)(t,d);for(d+=2,_=2;_<P;){const e=t[d++],n=new Uint8Array(16);let i=0;for(C=0;C<16;C++,d++)i+=n[C]=t[d];const r=new Uint8Array(i);for(C=0;C<i;C++,d++)r[C]=t[d];_+=17+i,(e>>4==0?b:y)[15&e]=v(n,r)}break;case 65501:d+=2,u=(0,o.readUint16)(t,d),d+=2;break;case 65498:const R=1==++g&&!e;d+=2;const L=t[d++],N=[];for(_=0;_<L;_++){const e=t[d++],n=h.componentIds[e],i=h.components[n];i.index=e;const r=t[d++];i.huffmanTableDC=b[r>>4],i.huffmanTableAC=y[15&r],N.push(i)}const B=t[d++],j=t[d++],z=t[d++];try{const e=w(t,d,h,N,u,B,j,z>>4,15&z,R);d+=e}catch(e){if(e instanceof a)return(0,i.warn)(`${e.message} -- attempting to re-parse the JPEG image.`),this.parse(t,{dnlScanLines:e.scanLines});if(e instanceof l){(0,i.warn)(`${e.message} -- ignoring the rest of the image data.`);break t}throw e}break;case 65500:d+=4;break;case 65535:255!==t[d]&&d--;break;default:const $=S(t,d-2,d-3);if($?.invalid){(0,i.warn)("JpegImage.parse - unexpected data, current marker is: "+$.invalid),d=$.offset;break}if(!$||d>=t.length-1){(0,i.warn)("JpegImage.parse - reached the end of the image data without finding an EOI marker (0xFFD9).");break t}throw new s("JpegImage.parse - unknown marker: "+x.toString(16))}x=(0,o.readUint16)(t,d),d+=2}this.width=h.samplesPerLine,this.height=h.scanLines,this.jfif=p,this.adobe=f,this.components=[];for(const t of h.components){const e=m[t.quantizationId];e&&(t.quantizationTable=e),this.components.push({index:t.index,output:_(0,t),scaleX:t.h/h.maxH,scaleY:t.v/h.maxV,blocksPerLine:t.blocksPerLine,blocksPerColumn:t.blocksPerColumn})}this.numComponents=this.components.length}_getLinearizedBlockData(t,e,n=!1){const i=this.width/t,r=this.height/e;let o,s,a,l,c,h,u,d,p,f,g,m=0;const y=this.components.length,v=t*e*y,b=new Uint8ClampedArray(v),w=new Uint32Array(t),x=4294967288;let _;for(u=0;u<y;u++){if(o=this.components[u],s=o.scaleX*i,a=o.scaleY*r,m=u,g=o.output,l=o.blocksPerLine+1<<3,s!==_){for(c=0;c<t;c++)d=0|c*s,w[c]=(d&x)<<3|7&d;_=s}for(h=0;h<e;h++)for(d=0|h*a,f=l*(d&x)|(7&d)<<3,c=0;c<t;c++)b[m]=g[f+w[c]],m+=y}let S=this._decodeTransform;if(n||4!==y||S||(S=new Int32Array([-256,255,-256,255,-256,255,-256,255])),S)for(u=0;u<v;)for(d=0,p=0;d<y;d++,u++,p+=2)b[u]=(b[u]*S[p]>>8)+S[p+1];return b}get _isColorConversionNeeded(){return this.adobe?!!this.adobe.transformCode:3===this.numComponents?0!==this._colorTransform&&(82!==this.components[0].index||71!==this.components[1].index||66!==this.components[2].index):1===this._colorTransform}_convertYccToRgb(t){let e,n,i;for(let r=0,o=t.length;r<o;r+=3)e=t[r],n=t[r+1],i=t[r+2],t[r]=e-179.456+1.402*i,t[r+1]=e+135.459-.344*n-.714*i,t[r+2]=e-226.816+1.772*n;return t}_convertYccToRgba(t,e){for(let n=0,i=0,r=t.length;n<r;n+=3,i+=4){const r=t[n],o=t[n+1],s=t[n+2];e[i]=r-179.456+1.402*s,e[i+1]=r+135.459-.344*o-.714*s,e[i+2]=r-226.816+1.772*o,e[i+3]=255}return e}_convertYcckToRgb(t){let e,n,i,r,o=0;for(let s=0,a=t.length;s<a;s+=4)e=t[s],n=t[s+1],i=t[s+2],r=t[s+3],t[o++]=n*(-660635669420364e-19*n+.000437130475926232*i-54080610064599e-18*e+.00048449797120281*r-.154362151871126)-122.67195406894+i*(-.000957964378445773*i+.000817076911346625*e-.00477271405408747*r+1.53380253221734)+e*(.000961250184130688*e-.00266257332283933*r+.48357088451265)+r*(-.000336197177618394*r+.484791561490776),t[o++]=107.268039397724+n*(219927104525741e-19*n-.000640992018297945*i+.000659397001245577*e+.000426105652938837*r-.176491792462875)+i*(-.000778269941513683*i+.00130872261408275*e+.000770482631801132*r-.151051492775562)+e*(.00126935368114843*e-.00265090189010898*r+.25802910206845)+r*(-.000318913117588328*r-.213742400323665),t[o++]=n*(-.000570115196973677*n-263409051004589e-19*i+.0020741088115012*e-.00288260236853442*r+.814272968359295)-20.810012546947+i*(-153496057440975e-19*i-.000132689043961446*e+.000560833691242812*r-.195152027534049)+e*(.00174418132927582*e-.00255243321439347*r+.116935020465145)+r*(-.000343531996510555*r+.24165260232407);return t.subarray(0,o)}_convertYcckToRgba(t){for(let e=0,n=t.length;e<n;e+=4){const n=t[e],i=t[e+1],r=t[e+2],o=t[e+3];t[e]=i*(-660635669420364e-19*i+.000437130475926232*r-54080610064599e-18*n+.00048449797120281*o-.154362151871126)-122.67195406894+r*(-.000957964378445773*r+.000817076911346625*n-.00477271405408747*o+1.53380253221734)+n*(.000961250184130688*n-.00266257332283933*o+.48357088451265)+o*(-.000336197177618394*o+.484791561490776),t[e+1]=107.268039397724+i*(219927104525741e-19*i-.000640992018297945*r+.000659397001245577*n+.000426105652938837*o-.176491792462875)+r*(-.000778269941513683*r+.00130872261408275*n+.000770482631801132*o-.151051492775562)+n*(.00126935368114843*n-.00265090189010898*o+.25802910206845)+o*(-.000318913117588328*o-.213742400323665),t[e+2]=i*(-.000570115196973677*i-263409051004589e-19*r+.0020741088115012*n-.00288260236853442*o+.814272968359295)-20.810012546947+r*(-153496057440975e-19*r-.000132689043961446*n+.000560833691242812*o-.195152027534049)+n*(.00174418132927582*n-.00255243321439347*o+.116935020465145)+o*(-.000343531996510555*o+.24165260232407),t[e+3]=255}return t}_convertYcckToCmyk(t){let e,n,i;for(let r=0,o=t.length;r<o;r+=4)e=t[r],n=t[r+1],i=t[r+2],t[r]=434.456-e-1.402*i,t[r+1]=119.541-e+.344*n+.714*i,t[r+2]=481.816-e-1.772*n;return t}_convertCmykToRgb(t){let e,n,i,r,o=0;for(let s=0,a=t.length;s<a;s+=4)e=t[s],n=t[s+1],i=t[s+2],r=t[s+3],t[o++]=255+e*(-6747147073602441e-20*e+.0008379262121013727*n+.0002894718188643294*i+.003264231057537806*r-1.1185611867203937)+n*(26374107616089405e-21*n-8626949158638572e-20*i-.0002748769067499491*r-.02155688794978967)+i*(-3878099212869363e-20*i-.0003267808279485286*r+.0686742238595345)-r*(.0003361971776183937*r+.7430659151342254),t[o++]=255+e*(.00013596372813588848*e+.000924537132573585*n+.00010567359618683593*i+.0004791864687436512*r-.3109689587515875)+n*(-.00023545346108370344*n+.0002702845253534714*i+.0020200308977307156*r-.7488052167015494)+i*(6834815998235662e-20*i+.00015168452363460973*r-.09751927774728933)-r*(.0003189131175883281*r+.7364883807733168),t[o++]=255+e*(13598650411385307e-21*e+.00012423956175490851*n+.0004751985097583589*i-36729317476630422e-22*r-.05562186980264034)+n*(.00016141380598724676*n+.0009692239130725186*i+.0007782692450036253*r-.44015232367526463)+i*(5.068882914068769e-7*i+.0017778369011375071*r-.7591454649749609)-r*(.0003435319965105553*r+.7063770186160144);return t.subarray(0,o)}_convertCmykToRgba(t){for(let e=0,n=t.length;e<n;e+=4){const n=t[e],i=t[e+1],r=t[e+2],o=t[e+3];t[e]=255+n*(-6747147073602441e-20*n+.0008379262121013727*i+.0002894718188643294*r+.003264231057537806*o-1.1185611867203937)+i*(26374107616089405e-21*i-8626949158638572e-20*r-.0002748769067499491*o-.02155688794978967)+r*(-3878099212869363e-20*r-.0003267808279485286*o+.0686742238595345)-o*(.0003361971776183937*o+.7430659151342254),t[e+1]=255+n*(.00013596372813588848*n+.000924537132573585*i+.00010567359618683593*r+.0004791864687436512*o-.3109689587515875)+i*(-.00023545346108370344*i+.0002702845253534714*r+.0020200308977307156*o-.7488052167015494)+r*(6834815998235662e-20*r+.00015168452363460973*o-.09751927774728933)-o*(.0003189131175883281*o+.7364883807733168),t[e+2]=255+n*(13598650411385307e-21*n+.00012423956175490851*i+.0004751985097583589*r-36729317476630422e-22*o-.05562186980264034)+i*(.00016141380598724676*i+.0009692239130725186*r+.0007782692450036253*o-.44015232367526463)+r*(5.068882914068769e-7*r+.0017778369011375071*o-.7591454649749609)-o*(.0003435319965105553*o+.7063770186160144),t[e+3]=255}return t}getData({width:t,height:e,forceRGBA:n=!1,forceRGB:i=!1,isSourcePDF:o=!1}){if(this.numComponents>4)throw new s("Unsupported color mode");const a=this._getLinearizedBlockData(t,e,o);if(1===this.numComponents&&(n||i)){const t=a.length*(n?4:3),e=new Uint8ClampedArray(t);let i=0;if(n)(0,r.grayToRGBA)(a,new Uint32Array(e.buffer));else for(const t of a)e[i++]=t,e[i++]=t,e[i++]=t;return e}if(3===this.numComponents&&this._isColorConversionNeeded){if(n){const t=new Uint8ClampedArray(a.length/3*4);return this._convertYccToRgba(a,t)}return this._convertYccToRgb(a)}if(4===this.numComponents){if(this._isColorConversionNeeded)return n?this._convertYcckToRgba(a):i?this._convertYcckToRgb(a):this._convertYcckToCmyk(a);if(n)return this._convertCmykToRgba(a);if(i)return this._convertCmykToRgb(a)}return a}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=r,e.convertToRGBA=function(t){switch(t.kind){case i.ImageKind.GRAYSCALE_1BPP:return r(t);case i.ImageKind.RGB_24BPP:return function({src:t,srcPos:e=0,dest:n,destPos:r=0,width:o,height:s}){let a=0;const l=t.length>>2,c=new Uint32Array(t.buffer,e,l);if(i.FeatureTest.isLittleEndian){for(;a<l-2;a+=3,r+=4){const t=c[a],e=c[a+1],i=c[a+2];n[r]=4278190080|t,n[r+1]=t>>>24|e<<8|4278190080,n[r+2]=e>>>16|i<<16|4278190080,n[r+3]=i>>>8|4278190080}for(let e=4*a,i=t.length;e<i;e+=3)n[r++]=t[e]|t[e+1]<<8|t[e+2]<<16|4278190080}else{for(;a<l-2;a+=3,r+=4){const t=c[a],e=c[a+1],i=c[a+2];n[r]=255|t,n[r+1]=t<<24|e>>>8|255,n[r+2]=e<<16|i>>>16|255,n[r+3]=i<<8|255}for(let e=4*a,i=t.length;e<i;e+=3)n[r++]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|255}return{srcPos:e,destPos:r}}(t)}return null},e.grayToRGBA=function(t,e){if(i.FeatureTest.isLittleEndian)for(let n=0,i=t.length;n<i;n++)e[n]=65793*t[n]|4278190080;else for(let n=0,i=t.length;n<i;n++)e[n]=16843008*t[n]|255};var i=n(2);function r({src:t,srcPos:e=0,dest:n,width:r,height:o,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const l=i.FeatureTest.isLittleEndian?4278190080:255,[c,h]=a?[s,l]:[l,s],u=r>>3,d=7&r,p=t.length;n=new Uint32Array(n.buffer);let f=0;for(let i=0;i<o;i++){for(const i=e+u;e<i;e++){const i=e<p?t[e]:255;n[f++]=128&i?h:c,n[f++]=64&i?h:c,n[f++]=32&i?h:c,n[f++]=16&i?h:c,n[f++]=8&i?h:c,n[f++]=4&i?h:c,n[f++]=2&i?h:c,n[f++]=1&i?h:c}if(0===d)continue;const i=e<p?t[e++]:255;for(let t=0;t<d;t++)n[f++]=i&1<<7-t?h:c}return{srcPos:e,destPos:f}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxStream=void 0;var i=n(18),r=n(30),o=n(2);class s extends i.DecodeStream{constructor(t,e,n){super(e),this.stream=t,this.dict=t.dict,this.maybeLength=e,this.params=n}get bytes(){return(0,o.shadow)(this,"bytes",this.stream.getBytes(this.maybeLength))}ensureBuffer(t){}readBlock(){if(this.eof)return;const t=new r.JpxImage;t.parse(this.bytes);const e=t.width,n=t.height,i=t.componentsCount,o=t.tiles.length;if(1===o)this.buffer=t.tiles[0].items;else{const r=new Uint8ClampedArray(e*n*i);for(let n=0;n<o;n++){const o=t.tiles[n],s=o.width,a=o.height,l=o.left,c=o.top,h=o.items;let u=0,d=(e*c+l)*i;const p=e*i,f=s*i;for(let t=0;t<a;t++){const t=h.subarray(u,u+f);r.set(t,d),u+=f,d+=p}}this.buffer=r}this.bufferLength=this.buffer.length,this.eof=!0}}e.JpxStream=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.JpxImage=void 0;var i=n(2),r=n(3),o=n(25);class s extends i.BaseException{constructor(t){super(`JPX error: ${t}`,"JpxError")}}const a={LL:0,LH:1,HL:1,HH:2};function l(t,e){t.x0=Math.ceil(e.XOsiz/t.XRsiz),t.x1=Math.ceil(e.Xsiz/t.XRsiz),t.y0=Math.ceil(e.YOsiz/t.YRsiz),t.y1=Math.ceil(e.Ysiz/t.YRsiz),t.width=t.x1-t.x0,t.height=t.y1-t.y0}function c(t,e){const n=t.SIZ,i=[];let r;const o=Math.ceil((n.Xsiz-n.XTOsiz)/n.XTsiz),s=Math.ceil((n.Ysiz-n.YTOsiz)/n.YTsiz);for(let t=0;t<s;t++)for(let e=0;e<o;e++)r={},r.tx0=Math.max(n.XTOsiz+e*n.XTsiz,n.XOsiz),r.ty0=Math.max(n.YTOsiz+t*n.YTsiz,n.YOsiz),r.tx1=Math.min(n.XTOsiz+(e+1)*n.XTsiz,n.Xsiz),r.ty1=Math.min(n.YTOsiz+(t+1)*n.YTsiz,n.Ysiz),r.width=r.tx1-r.tx0,r.height=r.ty1-r.ty0,r.components=[],i.push(r);t.tiles=i;for(let t=0,o=n.Csiz;t<o;t++){const n=e[t];for(let e=0,o=i.length;e<o;e++){const o={};r=i[e],o.tcx0=Math.ceil(r.tx0/n.XRsiz),o.tcy0=Math.ceil(r.ty0/n.YRsiz),o.tcx1=Math.ceil(r.tx1/n.XRsiz),o.tcy1=Math.ceil(r.ty1/n.YRsiz),o.width=o.tcx1-o.tcx0,o.height=o.tcy1-o.tcy0,r.components[t]=o}}}function h(t,e,n){const i=e.codingStyleParameters,r={};return i.entropyCoderWithCustomPrecincts?(r.PPx=i.precinctsSizes[n].PPx,r.PPy=i.precinctsSizes[n].PPy):(r.PPx=15,r.PPy=15),r.xcb_=n>0?Math.min(i.xcb,r.PPx-1):Math.min(i.xcb,r.PPx),r.ycb_=n>0?Math.min(i.ycb,r.PPy-1):Math.min(i.ycb,r.PPy),r}function u(t,e,n){const i=1<<n.PPx,r=1<<n.PPy,o=0===e.resLevel,s=1<<n.PPx+(o?0:-1),a=1<<n.PPy+(o?0:-1),l=e.trx1>e.trx0?Math.ceil(e.trx1/i)-Math.floor(e.trx0/i):0,c=e.try1>e.try0?Math.ceil(e.try1/r)-Math.floor(e.try0/r):0,h=l*c;e.precinctParameters={precinctWidth:i,precinctHeight:r,numprecinctswide:l,numprecinctshigh:c,numprecincts:h,precinctWidthInSubband:s,precinctHeightInSubband:a}}function d(t,e,n){const i=n.xcb_,r=n.ycb_,o=1<<i,s=1<<r,a=e.tbx0>>i,l=e.tby0>>r,c=e.tbx1+o-1>>i,h=e.tby1+s-1>>r,u=e.resolution.precinctParameters,d=[],p=[];let f,g,m,y;for(g=l;g<h;g++)for(f=a;f<c;f++){if(m={cbx:f,cby:g,tbx0:o*f,tby0:s*g,tbx1:o*(f+1),tby1:s*(g+1)},m.tbx0_=Math.max(e.tbx0,m.tbx0),m.tby0_=Math.max(e.tby0,m.tby0),m.tbx1_=Math.min(e.tbx1,m.tbx1),m.tby1_=Math.min(e.tby1,m.tby1),y=Math.floor((m.tbx0_-e.tbx0)/u.precinctWidthInSubband)+Math.floor((m.tby0_-e.tby0)/u.precinctHeightInSubband)*u.numprecinctswide,m.precinctNumber=y,m.subbandType=e.type,m.Lblock=3,m.tbx1_<=m.tbx0_||m.tby1_<=m.tby0_)continue;d.push(m);let t=p[y];void 0!==t?(f<t.cbxMin?t.cbxMin=f:f>t.cbxMax&&(t.cbxMax=f),g<t.cbyMin?t.cbxMin=g:g>t.cbyMax&&(t.cbyMax=g)):p[y]=t={cbxMin:f,cbyMin:g,cbxMax:f,cbyMax:g},m.precinct=t}e.codeblockParameters={codeblockWidth:i,codeblockHeight:r,numcodeblockwide:c-a+1,numcodeblockhigh:h-l+1},e.codeblocks=d,e.precincts=p}function p(t,e,n){const i=[],r=t.subbands;for(let t=0,n=r.length;t<n;t++){const n=r[t].codeblocks;for(let t=0,r=n.length;t<r;t++){const r=n[t];r.precinctNumber===e&&i.push(r)}}return{layerNumber:n,codeblocks:i}}function f(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a=0;for(let t=0;t<o;t++)a=Math.max(a,i.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<r;l++){for(;c<=a;c++){for(;h<o;h++){const t=i.components[h];if(c>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[c],n=e.precinctParameters.numprecincts;for(;u<n;){const t=p(e,u,l);return u++,t}u=0}h=0}c=0}throw new s("Out of packets")}}function g(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a=0;for(let t=0;t<o;t++)a=Math.max(a,i.components[t].codingStyleParameters.decompositionLevelsCount);let l=0,c=0,h=0,u=0;this.nextPacket=function(){for(;l<=a;l++){for(;c<r;c++){for(;h<o;h++){const t=i.components[h];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],n=e.precinctParameters.numprecincts;for(;u<n;){const t=p(e,u,c);return u++,t}u=0}h=0}c=0}throw new s("Out of packets")}}function m(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz;let a,l,c,h,u=0;for(c=0;c<o;c++){const t=i.components[c];u=Math.max(u,t.codingStyleParameters.decompositionLevelsCount)}const d=new Int32Array(u+1);for(l=0;l<=u;++l){let t=0;for(c=0;c<o;++c){const e=i.components[c].resolutions;l<e.length&&(t=Math.max(t,e[l].precinctParameters.numprecincts))}d[l]=t}a=0,l=0,c=0,h=0,this.nextPacket=function(){for(;l<=u;l++){for(;h<d[l];h++){for(;c<o;c++){const t=i.components[c];if(l>t.codingStyleParameters.decompositionLevelsCount)continue;const e=t.resolutions[l],n=e.precinctParameters.numprecincts;if(!(h>=n)){for(;a<r;){const t=p(e,h,a);return a++,t}a=0}}c=0}h=0}throw new s("Out of packets")}}function y(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=w(i),l=a;let c=0,h=0,u=0,d=0,f=0;this.nextPacket=function(){for(;f<l.maxNumHigh;f++){for(;d<l.maxNumWide;d++){for(;u<o;u++){const t=i.components[u],e=t.codingStyleParameters.decompositionLevelsCount;for(;h<=e;h++){const e=t.resolutions[h],n=a.components[u].resolutions[h],i=b(d,f,n,l,e);if(null!==i){for(;c<r;){const t=p(e,i,c);return c++,t}c=0}}h=0}u=0}d=0}throw new s("Out of packets")}}function v(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=i.codingStyleDefaultParameters.layersCount,o=e.Csiz,a=w(i);let l=0,c=0,h=0,u=0,d=0;this.nextPacket=function(){for(;h<o;++h){const t=i.components[h],e=a.components[h],n=t.codingStyleParameters.decompositionLevelsCount;for(;d<e.maxNumHigh;d++){for(;u<e.maxNumWide;u++){for(;c<=n;c++){const n=t.resolutions[c],i=e.resolutions[c],o=b(u,d,i,e,n);if(null!==o){for(;l<r;){const t=p(n,o,l);return l++,t}l=0}}c=0}u=0}d=0}throw new s("Out of packets")}}function b(t,e,n,i,r){const o=t*i.minWidth,s=e*i.minHeight;if(o%n.width!=0||s%n.height!=0)return null;const a=s/n.width*r.precinctParameters.numprecinctswide;return o/n.height+a}function w(t){const e=t.components.length;let n=Number.MAX_VALUE,i=Number.MAX_VALUE,r=0,o=0;const s=new Array(e);for(let a=0;a<e;a++){const e=t.components[a],l=e.codingStyleParameters.decompositionLevelsCount,c=new Array(l+1);let h=Number.MAX_VALUE,u=Number.MAX_VALUE,d=0,p=0,f=1;for(let t=l;t>=0;--t){const n=e.resolutions[t],i=f*n.precinctParameters.precinctWidth,r=f*n.precinctParameters.precinctHeight;h=Math.min(h,i),u=Math.min(u,r),d=Math.max(d,n.precinctParameters.numprecinctswide),p=Math.max(p,n.precinctParameters.numprecinctshigh),c[t]={width:i,height:r},f<<=1}n=Math.min(n,h),i=Math.min(i,u),r=Math.max(r,d),o=Math.max(o,p),s[a]={resolutions:c,minWidth:h,minHeight:u,maxNumWide:d,maxNumHigh:p}}return{components:s,minWidth:n,minHeight:i,maxNumWide:r,maxNumHigh:o}}function x(t){const e=t.SIZ,n=t.currentTile.index,i=t.tiles[n],r=e.Csiz;for(let t=0;t<r;t++){const e=i.components[t],n=e.codingStyleParameters.decompositionLevelsCount,r=[],o=[];for(let t=0;t<=n;t++){const i=h(0,e,t),s={},a=1<<n-t;let l;if(s.trx0=Math.ceil(e.tcx0/a),s.try0=Math.ceil(e.tcy0/a),s.trx1=Math.ceil(e.tcx1/a),s.try1=Math.ceil(e.tcy1/a),s.resLevel=t,u(0,s,i),r.push(s),0===t)l={},l.type="LL",l.tbx0=Math.ceil(e.tcx0/a),l.tby0=Math.ceil(e.tcy0/a),l.tbx1=Math.ceil(e.tcx1/a),l.tby1=Math.ceil(e.tcy1/a),l.resolution=s,d(0,l,i),o.push(l),s.subbands=[l];else{const r=1<<n-t+1,a=[];l={},l.type="HL",l.tbx0=Math.ceil(e.tcx0/r-.5),l.tby0=Math.ceil(e.tcy0/r),l.tbx1=Math.ceil(e.tcx1/r-.5),l.tby1=Math.ceil(e.tcy1/r),l.resolution=s,d(0,l,i),o.push(l),a.push(l),l={},l.type="LH",l.tbx0=Math.ceil(e.tcx0/r),l.tby0=Math.ceil(e.tcy0/r-.5),l.tbx1=Math.ceil(e.tcx1/r),l.tby1=Math.ceil(e.tcy1/r-.5),l.resolution=s,d(0,l,i),o.push(l),a.push(l),l={},l.type="HH",l.tbx0=Math.ceil(e.tcx0/r-.5),l.tby0=Math.ceil(e.tcy0/r-.5),l.tbx1=Math.ceil(e.tcx1/r-.5),l.tby1=Math.ceil(e.tcy1/r-.5),l.resolution=s,d(0,l,i),o.push(l),a.push(l),s.subbands=a}}e.resolutions=r,e.subbands=o}const o=i.codingStyleDefaultParameters.progressionOrder;switch(o){case 0:i.packetsIterator=new f(t);break;case 1:i.packetsIterator=new g(t);break;case 2:i.packetsIterator=new m(t);break;case 3:i.packetsIterator=new y(t);break;case 4:i.packetsIterator=new v(t);break;default:throw new s(`Unsupported progression order ${o}`)}}function _(t,e,n,i){let o,a=0,l=0,c=!1;function h(t){for(;l<t;){const t=e[n+a];a++,c?(o=o<<7|t,l+=7,c=!1):(o=o<<8|t,l+=8),255===t&&(c=!0)}return l-=t,o>>>l&(1<<t)-1}function u(t){return 255===e[n+a-1]&&e[n+a]===t?(d(1),!0):255===e[n+a]&&e[n+a+1]===t&&(d(2),!0)}function d(t){a+=t}function p(){l=0,c&&(a++,c=!1)}function f(){if(0===h(1))return 1;if(0===h(1))return 2;let t=h(2);return t<3?t+3:(t=h(5),t<31?t+6:(t=h(7),t+37))}const g=t.currentTile.index,m=t.tiles[g],y=t.COD.sopMarkerUsed,v=t.COD.ephMarkerUsed,b=m.packetsIterator;for(;a<i;){p(),y&&u(145)&&d(4);const t=b.nextPacket();if(!h(1))continue;const i=t.layerNumber,o=[];let l;for(let e=0,n=t.codeblocks.length;e<n;e++){l=t.codeblocks[e];let n=l.precinct;const a=l.cbx-n.cbxMin,c=l.cby-n.cbyMin;let u,d,p=!1,g=!1;if(void 0!==l.included)p=!!h(1);else{let t;if(n=l.precinct,void 0!==n.inclusionTree)t=n.inclusionTree;else{const e=n.cbxMax-n.cbxMin+1,r=n.cbyMax-n.cbyMin+1;t=new E(e,r,i),d=new A(e,r),n.inclusionTree=t,n.zeroBitPlanesTree=d;for(let t=0;t<i;t++)if(0!==h(1))throw new s("Invalid tag tree")}if(t.reset(a,c,i))for(;;){if(!h(1)){t.incrementValue(i);break}if(u=!t.nextLevel(),u){l.included=!0,p=g=!0;break}}}if(!p)continue;if(g){for(d=n.zeroBitPlanesTree,d.reset(a,c);;)if(h(1)){if(u=!d.nextLevel(),u)break}else d.incrementValue();l.zeroBitPlanes=d.value}const m=f();for(;h(1);)l.Lblock++;const y=(0,r.log2)(m),v=h((m<1<<y?y-1:y)+l.Lblock);o.push({codeblock:l,codingpasses:m,dataLength:v})}for(p(),v&&u(146);o.length>0;){const t=o.shift();l=t.codeblock,void 0===l.data&&(l.data=[]),l.data.push({data:e,start:n+a,end:n+a+t.dataLength,codingpasses:t.codingpasses}),a+=t.dataLength}}return a}function S(t,e,n,i,r,s,a,l,c){const h=i.tbx0,u=i.tby0,d=i.tbx1-i.tbx0,p=i.codeblocks,f="H"===i.type.charAt(0)?1:0,g="H"===i.type.charAt(1)?e:0;for(let n=0,m=p.length;n<m;++n){const m=p[n],y=m.tbx1_-m.tbx0_,v=m.tby1_-m.tby0_;if(0===y||0===v)continue;if(void 0===m.data)continue;const b=new T(y,v,m.subbandType,m.zeroBitPlanes,s);let w=2;const x=m.data;let _,S,C,k=0,A=0;for(_=0,S=x.length;_<S;_++)C=x[_],k+=C.end-C.start,A+=C.codingpasses;const E=new Uint8Array(k);let M=0;for(_=0,S=x.length;_<S;_++){C=x[_];const t=C.data.subarray(C.start,C.end);E.set(t,M),M+=t.length}const O=new o.ArithmeticDecoder(E,0,k);for(b.setDecoder(O),_=0;_<A;_++){switch(w){case 0:b.runSignificancePropagationPass();break;case 1:b.runMagnitudeRefinementPass();break;case 2:b.runCleanupPass(),l&&b.checkSegmentationSymbol()}c&&b.reset(),w=(w+1)%3}let I=m.tbx0_-h+(m.tby0_-u)*d;const D=b.coefficentsSign,F=b.coefficentsMagnitude,P=b.bitsDecoded,R=a?0:.5;let L,N,B;M=0;const j="LL"!==i.type;for(_=0;_<v;_++){const n=2*(I/d|0)*(e-d)+f+g;for(L=0;L<y;L++)N=F[M],0!==N&&(N=(N+R)*r,0!==D[M]&&(N=-N),B=P[M],t[j?n+(I<<1):I]=a&&B>=s?N:N*(1<<s-B)),I++,M++;I+=d-y}}}function C(t,e,n){const i=e.components[n],r=i.codingStyleParameters,o=i.quantizationParameters,s=r.decompositionLevelsCount,l=o.SPqcds,c=o.scalarExpounded,h=o.guardBits,u=r.segmentationSymbolUsed,d=r.resetContextProbabilities,p=t.components[n].precision,f=r.reversibleTransformation,g=f?new I:new O,m=[];let y=0;for(let t=0;t<=s;t++){const e=i.resolutions[t],n=e.trx1-e.trx0,r=e.try1-e.try0,o=new Float32Array(n*r);for(let i=0,r=e.subbands.length;i<r;i++){let r,s;c?(r=l[y].mu,s=l[y].epsilon,y++):(r=l[0].mu,s=l[0].epsilon+(t>0?1-t:0));const g=e.subbands[i],m=a[g.type];S(o,n,0,g,f?1:2**(p+m-s)*(1+r/2048),h+s-1,f,u,d)}m.push({width:n,height:r,items:o})}const v=g.calculate(m,i.tcx0,i.tcy0);return{left:i.tcx0,top:i.tcy0,width:v.width,height:v.height,items:v.items}}function k(t,e){const n=t.SIZ.Csiz,i=t.tiles[e];for(let e=0;e<n;e++){const n=i.components[e],r=void 0!==t.currentTile.QCC[e]?t.currentTile.QCC[e]:t.currentTile.QCD;n.quantizationParameters=r;const o=void 0!==t.currentTile.COC[e]?t.currentTile.COC[e]:t.currentTile.COD;n.codingStyleParameters=o}i.codingStyleDefaultParameters=t.currentTile.COD}e.JpxImage=class{constructor(){this.failOnCorruptedImage=!1}parse(t){if(65359===(0,r.readUint16)(t,0))return void this.parseCodestream(t,0,t.length);const e=t.length;let n=0;for(;n<e;){let o=8,a=(0,r.readUint32)(t,n);const l=(0,r.readUint32)(t,n+4);if(n+=o,1===a&&(a=4294967296*(0,r.readUint32)(t,n)+(0,r.readUint32)(t,n+4),n+=8,o+=8),0===a&&(a=e-n+o),a<o)throw new s("Invalid box field size");const c=a-o;let h=!0;switch(l){case 1785737832:h=!1;break;case 1668246642:const e=t[n];if(1===e){const e=(0,r.readUint32)(t,n+3);switch(e){case 16:case 17:case 18:break;default:(0,i.warn)("Unknown colorspace "+e)}}else 2===e&&(0,i.info)("ICC profile not supported");break;case 1785737827:this.parseCodestream(t,n,n+c);break;case 1783636e3:218793738!==(0,r.readUint32)(t,n)&&(0,i.warn)("Invalid JP2 signature");break;case 1783634458:case 1718909296:case 1920099697:case 1919251232:case 1768449138:break;default:const o=String.fromCharCode(l>>24&255,l>>16&255,l>>8&255,255&l);(0,i.warn)(`Unsupported header type ${l} (${o}).`)}h&&(n+=c)}}parseImageProperties(t){let e=t.getByte();for(;e>=0;){const n=e;if(e=t.getByte(),65361==(n<<8|e)){t.skip(4);const e=t.getInt32()>>>0,n=t.getInt32()>>>0,i=t.getInt32()>>>0,r=t.getInt32()>>>0;t.skip(16);const o=t.getUint16();return this.width=e-i,this.height=n-r,this.componentsCount=o,void(this.bitsPerComponent=8)}}throw new s("No size marker found in JPX stream")}parseCodestream(t,e,n){const o={};let a=!1;try{let s=e;for(;s+1<n;){const e=(0,r.readUint16)(t,s);s+=2;let n,h,u,d,p,f,g=0;switch(e){case 65359:o.mainHeader=!0;break;case 65497:break;case 65361:g=(0,r.readUint16)(t,s);const m={};m.Xsiz=(0,r.readUint32)(t,s+4),m.Ysiz=(0,r.readUint32)(t,s+8),m.XOsiz=(0,r.readUint32)(t,s+12),m.YOsiz=(0,r.readUint32)(t,s+16),m.XTsiz=(0,r.readUint32)(t,s+20),m.YTsiz=(0,r.readUint32)(t,s+24),m.XTOsiz=(0,r.readUint32)(t,s+28),m.YTOsiz=(0,r.readUint32)(t,s+32);const y=(0,r.readUint16)(t,s+36);m.Csiz=y;const v=[];n=s+38;for(let e=0;e<y;e++){const e={precision:1+(127&t[n]),isSigned:!!(128&t[n]),XRsiz:t[n+1],YRsiz:t[n+2]};n+=3,l(e,m),v.push(e)}o.SIZ=m,o.components=v,c(o,v),o.QCC=[],o.COC=[];break;case 65372:g=(0,r.readUint16)(t,s);const b={};switch(n=s+2,h=t[n++],31&h){case 0:d=8,p=!0;break;case 1:d=16,p=!1;break;case 2:d=16,p=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(b.noQuantization=8===d,b.scalarExpounded=p,b.guardBits=h>>5,u=[];n<g+s;){const e={};8===d?(e.epsilon=t[n++]>>3,e.mu=0):(e.epsilon=t[n]>>3,e.mu=(7&t[n])<<8|t[n+1],n+=2),u.push(e)}b.SPqcds=u,o.mainHeader?o.QCD=b:(o.currentTile.QCD=b,o.currentTile.QCC=[]);break;case 65373:g=(0,r.readUint16)(t,s);const w={};let S;switch(n=s+2,o.SIZ.Csiz<257?S=t[n++]:(S=(0,r.readUint16)(t,n),n+=2),h=t[n++],31&h){case 0:d=8,p=!0;break;case 1:d=16,p=!1;break;case 2:d=16,p=!0;break;default:throw new Error("Invalid SQcd value "+h)}for(w.noQuantization=8===d,w.scalarExpounded=p,w.guardBits=h>>5,u=[];n<g+s;){const e={};8===d?(e.epsilon=t[n++]>>3,e.mu=0):(e.epsilon=t[n]>>3,e.mu=(7&t[n])<<8|t[n+1],n+=2),u.push(e)}w.SPqcds=u,o.mainHeader?o.QCC[S]=w:o.currentTile.QCC[S]=w;break;case 65362:g=(0,r.readUint16)(t,s);const C={};n=s+2;const A=t[n++];C.entropyCoderWithCustomPrecincts=!!(1&A),C.sopMarkerUsed=!!(2&A),C.ephMarkerUsed=!!(4&A),C.progressionOrder=t[n++],C.layersCount=(0,r.readUint16)(t,n),n+=2,C.multipleComponentTransform=t[n++],C.decompositionLevelsCount=t[n++],C.xcb=2+(15&t[n++]),C.ycb=2+(15&t[n++]);const E=t[n++];if(C.selectiveArithmeticCodingBypass=!!(1&E),C.resetContextProbabilities=!!(2&E),C.terminationOnEachCodingPass=!!(4&E),C.verticallyStripe=!!(8&E),C.predictableTermination=!!(16&E),C.segmentationSymbolUsed=!!(32&E),C.reversibleTransformation=t[n++],C.entropyCoderWithCustomPrecincts){const e=[];for(;n<g+s;){const i=t[n++];e.push({PPx:15&i,PPy:i>>4})}C.precinctsSizes=e}const T=[];C.selectiveArithmeticCodingBypass&&T.push("selectiveArithmeticCodingBypass"),C.terminationOnEachCodingPass&&T.push("terminationOnEachCodingPass"),C.verticallyStripe&&T.push("verticallyStripe"),C.predictableTermination&&T.push("predictableTermination"),T.length>0&&(a=!0,(0,i.warn)(`JPX: Unsupported COD options (${T.join(", ")}).`)),o.mainHeader?o.COD=C:(o.currentTile.COD=C,o.currentTile.COC=[]);break;case 65424:g=(0,r.readUint16)(t,s),f={},f.index=(0,r.readUint16)(t,s+2),f.length=(0,r.readUint32)(t,s+4),f.dataEnd=f.length+s-2,f.partIndex=t[s+8],f.partsCount=t[s+9],o.mainHeader=!1,0===f.partIndex&&(f.COD=o.COD,f.COC=o.COC.slice(0),f.QCD=o.QCD,f.QCC=o.QCC.slice(0)),o.currentTile=f;break;case 65427:f=o.currentTile,0===f.partIndex&&(k(o,f.index),x(o)),g=f.dataEnd-s,_(o,t,s,g);break;case 65363:(0,i.warn)("JPX: Codestream code 0xFF53 (COC) is not implemented.");case 65365:case 65367:case 65368:case 65380:g=(0,r.readUint16)(t,s);break;default:throw new Error("Unknown codestream code: "+e.toString(16))}s+=g}}catch(t){if(a||this.failOnCorruptedImage)throw new s(t.message);(0,i.warn)(`JPX: Trying to recover from: "${t.message}".`)}this.tiles=function(t){const e=t.SIZ,n=t.components,i=e.Csiz,r=[];for(let e=0,o=t.tiles.length;e<o;e++){const o=t.tiles[e],s=[];for(let e=0;e<i;e++)s[e]=C(t,o,e);const a=s[0],l=new Uint8ClampedArray(a.items.length*i),c={left:a.left,top:a.top,width:a.width,height:a.height,items:l};let h,u,d,p,f,g,m,y=0;if(o.codingStyleDefaultParameters.multipleComponentTransform){const t=4===i,e=s[0].items,r=s[1].items,a=s[2].items,c=t?s[3].items:null;h=n[0].precision-8,u=.5+(128<<h);const v=o.components[0],b=i-3;if(p=e.length,v.codingStyleParameters.reversibleTransformation)for(d=0;d<p;d++,y+=b){f=e[d]+u,g=r[d],m=a[d];const t=f-(m+g>>2);l[y++]=t+m>>h,l[y++]=t>>h,l[y++]=t+g>>h}else for(d=0;d<p;d++,y+=b)f=e[d]+u,g=r[d],m=a[d],l[y++]=f+1.402*m>>h,l[y++]=f-.34413*g-.71414*m>>h,l[y++]=f+1.772*g>>h;if(t)for(d=0,y=3;d<p;d++,y+=4)l[y]=c[d]+u>>h}else for(let t=0;t<i;t++){const e=s[t].items;for(h=n[t].precision-8,u=.5+(128<<h),y=t,d=0,p=e.length;d<p;d++)l[y]=e[d]+u>>h,y+=i}r.push(c)}return r}(o),this.width=o.SIZ.Xsiz-o.SIZ.XOsiz,this.height=o.SIZ.Ysiz-o.SIZ.YOsiz,this.componentsCount=o.SIZ.Csiz}};class A{constructor(t,e){const n=(0,r.log2)(Math.max(t,e))+1;this.levels=[];for(let i=0;i<n;i++){const n={width:t,height:e,items:[]};this.levels.push(n),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e){let n,i=0,r=0;for(;i<this.levels.length;){n=this.levels[i];const o=t+e*n.width;if(void 0!==n.items[o]){r=n.items[o];break}n.index=o,t>>=1,e>>=1,i++}i--,n=this.levels[i],n.items[n.index]=r,this.currentLevel=i,delete this.value}incrementValue(){const t=this.levels[this.currentLevel];t.items[t.index]++}nextLevel(){let t=this.currentLevel,e=this.levels[t];const n=e.items[e.index];return t--,t<0?(this.value=n,!1):(this.currentLevel=t,e=this.levels[t],e.items[e.index]=n,!0)}}class E{constructor(t,e,n){const i=(0,r.log2)(Math.max(t,e))+1;this.levels=[];for(let r=0;r<i;r++){const i=new Uint8Array(t*e);for(let t=0,e=i.length;t<e;t++)i[t]=n;const r={width:t,height:e,items:i};this.levels.push(r),t=Math.ceil(t/2),e=Math.ceil(e/2)}}reset(t,e,n){let i=0;for(;i<this.levels.length;){const r=this.levels[i],o=t+e*r.width;r.index=o;const s=r.items[o];if(255===s)break;if(s>n)return this.currentLevel=i,this.propagateValues(),!1;t>>=1,e>>=1,i++}return this.currentLevel=i-1,!0}incrementValue(t){const e=this.levels[this.currentLevel];e.items[e.index]=t+1,this.propagateValues()}propagateValues(){let t=this.currentLevel,e=this.levels[t];const n=e.items[e.index];for(;--t>=0;)e=this.levels[t],e.items[e.index]=n}nextLevel(){let t=this.currentLevel,e=this.levels[t];const n=e.items[e.index];return e.items[e.index]=255,t--,!(t<0||(this.currentLevel=t,e=this.levels[t],e.items[e.index]=n,0))}}class T{static UNIFORM_CONTEXT=17;static RUNLENGTH_CONTEXT=18;static LLAndLHContextsLabel=new Uint8Array([0,5,8,0,3,7,8,0,4,7,8,0,0,0,0,0,1,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8,0,0,0,0,0,2,6,8,0,3,7,8,0,4,7,8]);static HLContextLabel=new Uint8Array([0,3,4,0,5,7,7,0,8,8,8,0,0,0,0,0,1,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8,0,0,0,0,0,2,3,4,0,6,7,7,0,8,8,8]);static HHContextLabel=new Uint8Array([0,1,2,0,1,2,2,0,2,2,2,0,0,0,0,0,3,4,5,0,4,5,5,0,5,5,5,0,0,0,0,0,6,7,7,0,7,7,7,0,7,7,7,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8,0,0,0,0,0,8,8,8,0,8,8,8,0,8,8,8]);constructor(t,e,n,i,r){let o;this.width=t,this.height=e,o="HH"===n?T.HHContextLabel:"HL"===n?T.HLContextLabel:T.LLAndLHContextsLabel,this.contextLabelTable=o;const s=t*e;let a;this.neighborsSignificance=new Uint8Array(s),this.coefficentsSign=new Uint8Array(s),a=r>14?new Uint32Array(s):r>6?new Uint16Array(s):new Uint8Array(s),this.coefficentsMagnitude=a,this.processingFlags=new Uint8Array(s);const l=new Uint8Array(s);if(0!==i)for(let t=0;t<s;t++)l[t]=i;this.bitsDecoded=l,this.reset()}setDecoder(t){this.decoder=t}reset(){this.contexts=new Int8Array(19),this.contexts[0]=8,this.contexts[T.UNIFORM_CONTEXT]=92,this.contexts[T.RUNLENGTH_CONTEXT]=6}setNeighborsSignificance(t,e,n){const i=this.neighborsSignificance,r=this.width,o=this.height,s=e>0,a=e+1<r;let l;t>0&&(l=n-r,s&&(i[l-1]+=16),a&&(i[l+1]+=16),i[l]+=4),t+1<o&&(l=n+r,s&&(i[l-1]+=16),a&&(i[l+1]+=16),i[l]+=4),s&&(i[n-1]+=1),a&&(i[n+1]+=1),i[n]|=128}runSignificancePropagationPass(){const t=this.decoder,e=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.coefficentsSign,o=this.neighborsSignificance,s=this.processingFlags,a=this.contexts,l=this.contextLabelTable,c=this.bitsDecoded;for(let h=0;h<n;h+=4)for(let u=0;u<e;u++){let d=h*e+u;for(let p=0;p<4;p++,d+=e){const e=h+p;if(e>=n)break;if(s[d]&=-2,i[d]||!o[d])continue;const f=l[o[d]];if(t.readBit(a,f)){const t=this.decodeSignBit(e,u,d);r[d]=t,i[d]=1,this.setNeighborsSignificance(e,u,d),s[d]|=2}c[d]++,s[d]|=1}}}decodeSignBit(t,e,n){const i=this.width,r=this.height,o=this.coefficentsMagnitude,s=this.coefficentsSign;let a,l,c,h,u,d;h=e>0&&0!==o[n-1],e+1<i&&0!==o[n+1]?(c=s[n+1],h?(l=s[n-1],a=1-c-l):a=1-c-c):h?(l=s[n-1],a=1-l-l):a=0;const p=3*a;return h=t>0&&0!==o[n-i],t+1<r&&0!==o[n+i]?(c=s[n+i],h?(l=s[n-i],a=1-c-l+p):a=1-c-c+p):h?(l=s[n-i],a=1-l-l+p):a=p,a>=0?(u=9+a,d=this.decoder.readBit(this.contexts,u)):(u=9-a,d=1^this.decoder.readBit(this.contexts,u)),d}runMagnitudeRefinementPass(){const t=this.decoder,e=this.width,n=this.height,i=this.coefficentsMagnitude,r=this.neighborsSignificance,o=this.contexts,s=this.bitsDecoded,a=this.processingFlags,l=e*n,c=4*e;for(let n,h=0;h<l;h=n){n=Math.min(l,h+c);for(let l=0;l<e;l++)for(let c=h+l;c<n;c+=e){if(!i[c]||0!=(1&a[c]))continue;let e=16;0!=(2&a[c])&&(a[c]^=2,e=0==(127&r[c])?15:14);const n=t.readBit(o,e);i[c]=i[c]<<1|n,s[c]++,a[c]|=1}}}runCleanupPass(){const t=this.decoder,e=this.width,n=this.height,i=this.neighborsSignificance,r=this.coefficentsMagnitude,o=this.coefficentsSign,s=this.contexts,a=this.contextLabelTable,l=this.bitsDecoded,c=this.processingFlags,h=e,u=2*e,d=3*e;let p;for(let f=0;f<n;f=p){p=Math.min(f+4,n);const g=f*e,m=f+3<n;for(let n=0;n<e;n++){const y=g+n;let v,b=0,w=y,x=f;if(m&&0===c[y]&&0===c[y+h]&&0===c[y+u]&&0===c[y+d]&&0===i[y]&&0===i[y+h]&&0===i[y+u]&&0===i[y+d]){if(!t.readBit(s,T.RUNLENGTH_CONTEXT)){l[y]++,l[y+h]++,l[y+u]++,l[y+d]++;continue}b=t.readBit(s,T.UNIFORM_CONTEXT)<<1|t.readBit(s,T.UNIFORM_CONTEXT),0!==b&&(x=f+b,w+=b*e),v=this.decodeSignBit(x,n,w),o[w]=v,r[w]=1,this.setNeighborsSignificance(x,n,w),c[w]|=2,w=y;for(let t=f;t<=x;t++,w+=e)l[w]++;b++}for(x=f+b;x<p;x++,w+=e){if(r[w]||0!=(1&c[w]))continue;const e=a[i[w]];1===t.readBit(s,e)&&(v=this.decodeSignBit(x,n,w),o[w]=v,r[w]=1,this.setNeighborsSignificance(x,n,w),c[w]|=2),l[w]++}}}}checkSegmentationSymbol(){const t=this.decoder,e=this.contexts;if(10!=(t.readBit(e,T.UNIFORM_CONTEXT)<<3|t.readBit(e,T.UNIFORM_CONTEXT)<<2|t.readBit(e,T.UNIFORM_CONTEXT)<<1|t.readBit(e,T.UNIFORM_CONTEXT)))throw new s("Invalid segmentation symbol")}}class M{constructor(){this.constructor===M&&(0,i.unreachable)("Cannot initialize Transform.")}calculate(t,e,n){let i=t[0];for(let r=1,o=t.length;r<o;r++)i=this.iterate(i,t[r],e,n);return i}extend(t,e,n){let i=e-1,r=e+1,o=e+n-2,s=e+n;t[i--]=t[r++],t[s++]=t[o--],t[i--]=t[r++],t[s++]=t[o--],t[i--]=t[r++],t[s++]=t[o--],t[i]=t[r],t[s]=t[o]}filter(t,e,n){(0,i.unreachable)("Abstract method `filter` called")}iterate(t,e,n,i){const r=t.width,o=t.height;let s=t.items;const a=e.width,l=e.height,c=e.items;let h,u,d,p,f,g;for(d=0,h=0;h<o;h++)for(p=2*h*a,u=0;u<r;u++,d++,p+=2)c[p]=s[d];s=t.items=null;const m=new Float32Array(a+8);if(1===a){if(0!=(1&n))for(g=0,d=0;g<l;g++,d+=a)c[d]*=.5}else for(g=0,d=0;g<l;g++,d+=a)m.set(c.subarray(d,d+a),4),this.extend(m,4,a),this.filter(m,4,a),c.set(m.subarray(4,4+a),d);let y=16;const v=[];for(h=0;h<y;h++)v.push(new Float32Array(l+8));let b,w=0;if(t=4+l,1===l){if(0!=(1&i))for(f=0;f<a;f++)c[f]*=.5}else for(f=0;f<a;f++){if(0===w){for(y=Math.min(a-f,y),d=f,p=4;p<t;d+=a,p++)for(b=0;b<y;b++)v[b][p]=c[d+b];w=y}w--;const e=v[w];if(this.extend(e,4,l),this.filter(e,4,l),0===w)for(d=f-y+1,p=4;p<t;d+=a,p++)for(b=0;b<y;b++)c[d+b]=v[b][p]}return{width:a,height:l,items:c}}}class O extends M{filter(t,e,n){const i=n>>1;let r,o,s,a;const l=-1.586134342059924,c=-.052980118572961,h=.882911075530934,u=.443506852043971,d=1.230174104914001;for(r=(e|=0)-3,o=i+4;o--;r+=2)t[r]*=.8128930661159609;for(r=e-2,s=u*t[r-1],o=i+3;o--&&(a=u*t[r+1],t[r]=d*t[r]-s-a,o--);r+=2)r+=2,s=u*t[r+1],t[r]=d*t[r]-s-a;for(r=e-1,s=h*t[r-1],o=i+2;o--&&(a=h*t[r+1],t[r]-=s+a,o--);r+=2)r+=2,s=h*t[r+1],t[r]-=s+a;for(r=e,s=c*t[r-1],o=i+1;o--&&(a=c*t[r+1],t[r]-=s+a,o--);r+=2)r+=2,s=c*t[r+1],t[r]-=s+a;if(0!==i)for(r=e+1,s=l*t[r-1],o=i;o--&&(a=l*t[r+1],t[r]-=s+a,o--);r+=2)r+=2,s=l*t[r+1],t[r]-=s+a}}class I extends M{filter(t,e,n){const i=n>>1;let r,o;for(r=e|=0,o=i+1;o--;r+=2)t[r]-=t[r-1]+t[r+1]+2>>2;for(r=e+1,o=i;o--;r+=2)t[r]+=t[r-1]+t[r+1]>>1}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LZWStream=void 0;var i=n(18);class r extends i.DecodeStream{constructor(t,e,n){super(e),this.str=t,this.dict=t.dict,this.cachedData=0,this.bitsCached=0;const i=4096,r={earlyChange:n,codeLength:9,nextCode:258,dictionaryValues:new Uint8Array(i),dictionaryLengths:new Uint16Array(i),dictionaryPrevCodes:new Uint16Array(i),currentSequence:new Uint8Array(i),currentSequenceLength:0};for(let t=0;t<256;++t)r.dictionaryValues[t]=t,r.dictionaryLengths[t]=1;this.lzwState=r}readBits(t){let e=this.bitsCached,n=this.cachedData;for(;e<t;){const t=this.str.getByte();if(-1===t)return this.eof=!0,null;n=n<<8|t,e+=8}return this.bitsCached=e-=t,this.cachedData=n,this.lastCode=null,n>>>e&(1<<t)-1}readBlock(){let t,e,n,i=1024;const r=this.lzwState;if(!r)return;const o=r.earlyChange;let s=r.nextCode;const a=r.dictionaryValues,l=r.dictionaryLengths,c=r.dictionaryPrevCodes;let h=r.codeLength,u=r.prevCode;const d=r.currentSequence;let p=r.currentSequenceLength,f=0,g=this.bufferLength,m=this.ensureBuffer(this.bufferLength+i);for(t=0;t<512;t++){const t=this.readBits(h),r=p>0;if(t<256)d[0]=t,p=1;else{if(!(t>=258)){if(256===t){h=9,s=258,p=0;continue}this.eof=!0,delete this.lzwState;break}if(t<s)for(p=l[t],e=p-1,n=t;e>=0;e--)d[e]=a[n],n=c[n];else d[p++]=d[0]}if(r&&(c[s]=u,l[s]=l[u]+1,a[s]=d[0],s++,h=s+o&s+o-1?h:0|Math.min(Math.log(s+o)/.6931471805599453+1,12)),u=t,f+=p,i<f){do{i+=512}while(i<f);m=this.ensureBuffer(this.bufferLength+i)}for(e=0;e<p;e++)m[g++]=d[e]}r.nextCode=s,r.codeLength=h,r.prevCode=u,r.currentSequenceLength=p,this.bufferLength=g}}e.LZWStream=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PredictorStream=void 0;var i=n(18),r=n(4),o=n(2);class s extends i.DecodeStream{constructor(t,e,n){if(super(e),!(n instanceof r.Dict))return t;const i=this.predictor=n.get("Predictor")||1;if(i<=1)return t;if(2!==i&&(i<10||i>15))throw new o.FormatError(`Unsupported predictor: ${i}`);this.readBlock=2===i?this.readBlockTiff:this.readBlockPng,this.str=t,this.dict=t.dict;const s=this.colors=n.get("Colors")||1,a=this.bits=n.get("BPC","BitsPerComponent")||8,l=this.columns=n.get("Columns")||1;return this.pixBytes=s*a+7>>3,this.rowBytes=l*s*a+7>>3,this}readBlockTiff(){const t=this.rowBytes,e=this.bufferLength,n=this.ensureBuffer(e+t),i=this.bits,r=this.colors,o=this.str.getBytes(t);if(this.eof=!o.length,this.eof)return;let s,a=0,l=0,c=0,h=0,u=e;if(1===i&&1===r)for(s=0;s<t;++s){let t=o[s]^a;t^=t>>1,t^=t>>2,t^=t>>4,a=(1&t)<<7,n[u++]=t}else if(8===i){for(s=0;s<r;++s)n[u++]=o[s];for(;s<t;++s)n[u]=n[u-r]+o[s],u++}else if(16===i){const e=2*r;for(s=0;s<e;++s)n[u++]=o[s];for(;s<t;s+=2){const t=((255&o[s])<<8)+(255&o[s+1])+((255&n[u-e])<<8)+(255&n[u-e+1]);n[u++]=t>>8&255,n[u++]=255&t}}else{const t=new Uint8Array(r+1),u=(1<<i)-1;let d=0,p=e;const f=this.columns;for(s=0;s<f;++s)for(let e=0;e<r;++e)c<i&&(a=a<<8|255&o[d++],c+=8),t[e]=t[e]+(a>>c-i)&u,c-=i,l=l<<i|t[e],h+=i,h>=8&&(n[p++]=l>>h-8&255,h-=8);h>0&&(n[p++]=(l<<8-h)+(a&(1<<8-h)-1))}this.bufferLength+=t}readBlockPng(){const t=this.rowBytes,e=this.pixBytes,n=this.str.getByte(),i=this.str.getBytes(t);if(this.eof=!i.length,this.eof)return;const r=this.bufferLength,s=this.ensureBuffer(r+t);let a=s.subarray(r-t,r);0===a.length&&(a=new Uint8Array(t));let l,c,h,u=r;switch(n){case 0:for(l=0;l<t;++l)s[u++]=i[l];break;case 1:for(l=0;l<e;++l)s[u++]=i[l];for(;l<t;++l)s[u]=s[u-e]+i[l]&255,u++;break;case 2:for(l=0;l<t;++l)s[u++]=a[l]+i[l]&255;break;case 3:for(l=0;l<e;++l)s[u++]=(a[l]>>1)+i[l];for(;l<t;++l)s[u]=(a[l]+s[u-e]>>1)+i[l]&255,u++;break;case 4:for(l=0;l<e;++l)c=a[l],h=i[l],s[u++]=c+h;for(;l<t;++l){c=a[l];const t=a[l-e],n=s[u-e],r=n+c-t;let o=r-n;o<0&&(o=-o);let d=r-c;d<0&&(d=-d);let p=r-t;p<0&&(p=-p),h=i[l],s[u++]=o<=d&&o<=p?n+h:d<=p?c+h:t+h}break;default:throw new o.FormatError(`Unsupported predictor: ${n}`)}this.bufferLength+=t}}e.PredictorStream=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RunLengthStream=void 0;var i=n(18);class r extends i.DecodeStream{constructor(t,e){super(e),this.str=t,this.dict=t.dict}readBlock(){const t=this.str.getBytes(2);if(!t||t.length<2||128===t[0])return void(this.eof=!0);let e,n=this.bufferLength,i=t[0];if(i<128){if(e=this.ensureBuffer(n+i+1),e[n++]=t[1],i>0){const t=this.str.getBytes(i);e.set(t,n),n+=i}}else{i=257-i;const r=t[1];e=this.ensureBuffer(n+i+1);for(let t=0;t<i;t++)e[n++]=r}this.bufferLength=n}}e.RunLengthStream=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Font=e.ErrorFont=void 0;var i=n(2),r=n(35),o=n(38),s=n(40),a=n(39),l=n(37),c=n(41),h=n(42),u=n(43),d=n(44),p=n(45),f=n(46),g=n(14),m=n(47),y=n(3),v=n(8),b=n(48);const w=[[57344,63743],[1048576,1114109]],x=1e3,_=["ascent","bbox","black","bold","charProcOperatorList","composite","cssFontInfo","data","defaultVMetrics","defaultWidth","descent","fallbackName","fontMatrix","isInvalidPDFjsFont","isType3Font","italic","loadedName","mimetype","missingFile","name","remeasure","subtype","systemFontInfo","type","vertical"],S=["cMap","defaultEncoding","differences","isMonospace","isSerifFont","isSymbolicFont","seacMap","toFontChar","toUnicode","vmetrics","widths"];function C(t){if(!t.fontMatrix)return;if(t.fontMatrix[0]===i.FONT_IDENTITY_MATRIX[0])return;const e=.001/t.fontMatrix[0],n=t.widths;for(const t in n)n[t]*=e;t.defaultWidth*=e}function k(t){if(!t.fallbackToUnicode)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const e=[];for(const n in t.fallbackToUnicode)t.toUnicode.has(n)||(e[n]=t.fallbackToUnicode[n]);e.length>0&&t.toUnicode.amend(e)}class A{constructor(t,e,n,i,r,o,s,a,l){this.originalCharCode=t,this.fontChar=e,this.unicode=n,this.accent=i,this.width=r,this.vmetric=o,this.operatorListId=s,this.isSpace=a,this.isInFont=l}get category(){return(0,i.shadow)(this,"category",(0,s.getCharUnicodeCategory)(this.unicode),!0)}}function E(t,e){return(t<<8)+e}function T(t,e,n){t[e+1]=n,t[e]=n>>>8}function M(t,e){const n=(t<<8)+e;return 32768&n?n-65536:n}function O(t){return String.fromCharCode(t>>8&255,255&t)}function I(t){return t>32767?t=32767:t<-32768&&(t=-32768),String.fromCharCode(t>>8&255,255&t)}function D(t){const e=t.peekBytes(4);return"ttcf"===(0,i.bytesToString)(e)}function F(t,{type:e,subtype:n,composite:r}){let o,s;return function(t){const e=t.peekBytes(4);return 65536===(0,y.readUint32)(e,0)||"true"===(0,i.bytesToString)(e)}(t)||D(t)?o=r?"CIDFontType2":"TrueType":function(t){const e=t.peekBytes(4);return"OTTO"===(0,i.bytesToString)(e)}(t)?o=r?"CIDFontType2":"OpenType":function(t){const e=t.peekBytes(2);return 37===e[0]&&33===e[1]||128===e[0]&&1===e[1]}(t)?o=r?"CIDFontType0":"MMType1"===e?"MMType1":"Type1":function(t){const e=t.peekBytes(4);return e[0]>=1&&e[3]>=1&&e[3]<=4}(t)?r?(o="CIDFontType0",s="CIDFontType0C"):(o="MMType1"===e?"MMType1":"Type1",s="Type1C"):((0,i.warn)("getFontFileType: Unable to detect correct font file Type/Subtype."),o=e,s=n),[o,s]}function P(t,e){for(const n in e)t[+n]=e[n]}function R(t,e,n){const i=[];let r;for(let n=0,o=t.length;n<o;n++)r=(0,s.getUnicodeForGlyph)(t[n],e),-1!==r&&(i[n]=r);for(const t in n)r=(0,s.getUnicodeForGlyph)(n[t],e),-1!==r&&(i[+t]=r);return i}function L(t){return 1===t.platform&&0===t.encoding&&0===t.language}function N(t){return 3===t.platform&&1===t.encoding&&1033===t.language}function B(t,e,n=!1){switch(e.length){case 1:return e.charCodeAt(0);case 2:return e.charCodeAt(0)<<8|e.charCodeAt(1)}const r=`Unsupported CID string (charCode ${t}): "${e}".`;if(n)throw new i.FormatError(r);return(0,i.warn)(r),e}function j(t,e,n,r){const o=Object.create(null),s=new Map,a=[],l=new Set;let c=0,h=w[c][0],u=w[c][1];for(let p in t){p|=0;let f=t[p];if(!e(f))continue;if(h>u){if(c++,c>=w.length){(0,i.warn)("Ran out of space in font private use area.");break}h=w[c][0],u=w[c][1]}const g=h++;0===f&&(f=n);let m=r.get(p);"string"==typeof m&&(m=m.codePointAt(0)),!m||(d=m,w[0][0]<=d&&d<=w[0][1]||w[1][0]<=d&&d<=w[1][1])||l.has(f)||(s.set(m,f),l.add(f)),o[g]=f,a[p]=g}var d;return{toFontChar:a,charCodeToGlyphId:o,toUnicodeExtraMap:s,nextAvailableFontCharCode:h}}function z(t,e,n){const r=function(t,e,n){const i=[];for(const e in t)t[e]>=n||i.push({fontCharCode:0|e,glyphId:t[e]});if(e)for(const[t,r]of e)r>=n||i.push({fontCharCode:t,glyphId:r});0===i.length&&i.push({fontCharCode:0,glyphId:0}),i.sort((function(t,e){return t.fontCharCode-e.fontCharCode}));const r=[],o=i.length;for(let t=0;t<o;){const e=i[t].fontCharCode,n=[i[t].glyphId];++t;let s=e;for(;t<o&&s+1===i[t].fontCharCode&&(n.push(i[t].glyphId),++s,++t,65535!==s););r.push([e,s,n])}return r}(t,e,n),o=r.at(-1)[1]>65535?2:1;let s,a,l,c,h="\0\0"+O(o)+"\0\0"+(0,i.string32)(4+8*o);for(s=r.length-1;s>=0&&!(r[s][0]<=65535);--s);const u=s+1;r[s][0]<65535&&65535===r[s][1]&&(r[s][1]=65534);const d=r[s][1]<65535?1:0,p=u+d,f=m.OpenTypeFileBuilder.getSearchParams(p,2);let g,y,v,b,w="",x="",_="",S="",C="",k=0;for(s=0,a=u;s<a;s++){g=r[s],y=g[0],v=g[1],w+=O(y),x+=O(v),b=g[2];let t=!0;for(l=1,c=b.length;l<c;++l)if(b[l]!==b[l-1]+1){t=!1;break}if(t)_+=O(b[0]-y&65535),S+=O(0);else{const t=2*(p-s)+2*k;for(k+=v-y+1,_+=O(0),S+=O(t),l=0,c=b.length;l<c;++l)C+=O(b[l])}}d>0&&(x+="ÿÿ",w+="ÿÿ",_+="\0",S+="\0\0");const A="\0\0"+O(2*p)+O(f.range)+O(f.entry)+O(f.rangeShift)+x+"\0\0"+w+_+S+C;let E="",T="";if(o>1){for(h+="\0\0\n"+(0,i.string32)(4+8*o+4+A.length),E="",s=0,a=r.length;s<a;s++){g=r[s],y=g[0],b=g[2];let t=b[0];for(l=1,c=b.length;l<c;++l)b[l]!==b[l-1]+1&&(v=g[0]+l-1,E+=(0,i.string32)(y)+(0,i.string32)(v)+(0,i.string32)(t),y=v+1,t=b[l]);E+=(0,i.string32)(y)+(0,i.string32)(g[1])+(0,i.string32)(t)}T="\0\f\0\0"+(0,i.string32)(E.length+16)+"\0\0\0\0"+(0,i.string32)(E.length/12)}return h+"\0"+O(A.length+4)+A+T+E}function $(t,e,n){n||={unitsPerEm:0,yMax:0,yMin:0,ascent:0,descent:0};let r=0,o=0,a=0,l=0,c=null,h=0,u=-1;if(e){for(let t in e)if(t|=0,(c>t||!c)&&(c=t),h<t&&(h=t),u=(0,s.getUnicodeRangeFor)(t,u),u<32)r|=1<<u;else if(u<64)o|=1<<u-32;else if(u<96)a|=1<<u-64;else{if(!(u<123))throw new i.FormatError("Unicode ranges Bits > 123 are reserved for internal usage");l|=1<<u-96}h>65535&&(h=65535)}else c=0,h=255;const d=t.bbox||[0,0,0,0],p=n.unitsPerEm||1/(t.fontMatrix||i.FONT_IDENTITY_MATRIX)[0],f=t.ascentScaled?1:p/x,g=n.ascent||Math.round(f*(t.ascent||d[3]));let m=n.descent||Math.round(f*(t.descent||d[1]));m>0&&t.descent>0&&d[1]<0&&(m=-m);const y=n.yMax||g,v=-n.yMin||-m;return"\0$ô\0\0\0»\0\0\0»\0\0ß\x001\0\0\0\0"+String.fromCharCode(t.fixedPitch?9:0)+"\0\0\0\0\0\0"+(0,i.string32)(r)+(0,i.string32)(o)+(0,i.string32)(a)+(0,i.string32)(l)+"*21*"+O(t.italicAngle?1:0)+O(c||t.firstChar)+O(h||t.lastChar)+O(g)+O(m)+"\0d"+O(y)+O(v)+"\0\0\0\0\0\0\0\0"+O(t.xHeight)+O(t.capHeight)+O(0)+O(c||t.firstChar)+"\0"}function H(t){const e=Math.floor(65536*t.italicAngle);return"\0\0\0"+(0,i.string32)(e)+"\0\0\0\0"+(0,i.string32)(t.fixedPitch?1:0)+"\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"}function U(t){return t.replaceAll(/[^\x21-\x7E]|[[\](){}<>/%]/g,"").slice(0,63)}function V(t,e){e||(e=[[],[]]);const n=[e[0][0]||"Original licence",e[0][1]||t,e[0][2]||"Unknown",e[0][3]||"uniqueID",e[0][4]||t,e[0][5]||"Version 0.11",e[0][6]||U(t),e[0][7]||"Unknown",e[0][8]||"Unknown",e[0][9]||"Unknown"],i=[];let r,o,s,a,l;for(r=0,o=n.length;r<o;r++){l=e[1][r]||n[r];const t=[];for(s=0,a=l.length;s<a;s++)t.push(O(l.charCodeAt(s)));i.push(t.join(""))}const c=[n,i],h=["\0","\0"],u=["\0\0","\0"],d=["\0\0","\t"],p=n.length*h.length;let f="\0\0"+O(p)+O(12*p+6),g=0;for(r=0,o=h.length;r<o;r++){const t=c[r];for(s=0,a=t.length;s<a;s++)l=t[s],f+=h[r]+u[r]+d[r]+O(s)+O(l.length)+O(g),g+=l.length}return f+=n.join("")+i.join(""),f}e.Font=class{constructor(t,e,n){this.name=t,this.psName=null,this.mimetype=null,this.disableFontFace=!1,this.loadedName=n.loadedName,this.isType3Font=n.isType3Font,this.missingFile=!1,this.cssFontInfo=n.cssFontInfo,this._charsCache=Object.create(null),this._glyphCache=Object.create(null);let r=!!(n.flags&o.FontFlags.Serif);if(!r&&!n.isSimulatedFlags){const e=t.replaceAll(/[,_]/g,"-").split("-")[0],n=(0,c.getSerifFonts)();for(const t of e.split("+"))if(n[t]){r=!0;break}}this.isSerifFont=r,this.isSymbolicFont=!!(n.flags&o.FontFlags.Symbolic),this.isMonospace=!!(n.flags&o.FontFlags.FixedPitch);let{type:s,subtype:a}=n;this.type=s,this.subtype=a,this.systemFontInfo=n.systemFontInfo;const l=t.match(/^InvalidPDFjsFont_(.*)_\d+$/);if(this.isInvalidPDFjsFont=!!l,this.isInvalidPDFjsFont?this.fallbackName=l[1]:this.isMonospace?this.fallbackName="monospace":this.isSerifFont?this.fallbackName="serif":this.fallbackName="sans-serif",this.systemFontInfo?.guessFallback&&(this.systemFontInfo.guessFallback=!1,this.systemFontInfo.css+=`,${this.fallbackName}`),this.differences=n.differences,this.widths=n.widths,this.defaultWidth=n.defaultWidth,this.composite=n.composite,this.cMap=n.cMap,this.capHeight=n.capHeight/x,this.ascent=n.ascent/x,this.descent=n.descent/x,this.lineHeight=this.ascent-this.descent,this.fontMatrix=n.fontMatrix,this.bbox=n.bbox,this.defaultEncoding=n.defaultEncoding,this.toUnicode=n.toUnicode,this.toFontChar=[],"Type3"===n.type){for(let t=0;t<256;t++)this.toFontChar[t]=this.differences[t]||n.defaultEncoding[t];return}if(this.cidEncoding=n.cidEncoding||"",this.vertical=!!n.vertical,this.vertical&&(this.vmetrics=n.vmetrics,this.defaultVMetrics=n.defaultVMetrics),!e||e.isEmpty)return e&&(0,i.warn)('Font file is empty in "'+t+'" ('+this.loadedName+")"),void this.fallbackToSystemFont(n);let h;[s,a]=F(e,n),s===this.type&&a===this.subtype||(0,i.info)(`Inconsistent font file Type/SubType, expected: ${this.type}/${this.subtype} but found: ${s}/${a}.`);try{switch(s){case"MMType1":(0,i.info)("MMType1 font ("+t+"), falling back to Type1.");case"Type1":case"CIDFontType0":this.mimetype="font/opentype";const r="Type1C"===a||"CIDFontType0C"===a?new u.CFFFont(e,n):new b.Type1Font(t,e,n);C(n),h=this.convert(t,r,n);break;case"OpenType":case"TrueType":case"CIDFontType2":this.mimetype="font/opentype",h=this.checkAndRepair(t,e,n),this.isOpenType&&(C(n),s="OpenType");break;default:throw new i.FormatError(`Font ${s} is not supported`)}}catch(t){return(0,i.warn)(t),void this.fallbackToSystemFont(n)}k(n),this.data=h,this.type=s,this.subtype=a,this.fontMatrix=n.fontMatrix,this.widths=n.widths,this.defaultWidth=n.defaultWidth,this.toUnicode=n.toUnicode,this.seacMap=n.seacMap}get renderer(){const t=d.FontRendererFactory.create(this,o.SEAC_ANALYSIS_ENABLED);return(0,i.shadow)(this,"renderer",t)}exportData(t=!1){const e=t?[..._,...S]:_,n=Object.create(null);let i,r;for(i of e)r=this[i],void 0!==r&&(n[i]=r);return n}fallbackToSystemFont(t){this.missingFile=!0;const{name:e,type:n}=this;let i=(0,o.normalizeFontName)(e);const r=(0,c.getStdFontMap)(),u=(0,c.getNonStdFontMap)(),d=!!r[i],f=!(!u[i]||!r[u[i]]);i=r[i]||u[i]||i;const g=(0,p.getFontBasicMetrics)()[i];g&&(isNaN(this.ascent)&&(this.ascent=g.ascent/x),isNaN(this.descent)&&(this.descent=g.descent/x),isNaN(this.capHeight)&&(this.capHeight=g.capHeight/x)),this.bold=/bold/gi.test(i),this.italic=/oblique|italic/gi.test(i),this.black=/Black/g.test(e);const m=/Narrow/g.test(e);if(this.remeasure=(!d||m)&&Object.keys(this.widths).length>0,(d||f)&&"CIDFontType2"===n&&this.cidEncoding.startsWith("Identity-")){const n=t.cidToGidMap,i=[];if(P(i,(0,c.getGlyphMapForStandardFonts)()),/Arial-?Black/i.test(e)?P(i,(0,c.getSupplementalGlyphMapForArialBlack)()):/Calibri/i.test(e)&&P(i,(0,c.getSupplementalGlyphMapForCalibri)()),n){for(const t in i){const e=i[t];void 0!==n[e]&&(i[+t]=n[e])}n.length!==this.toUnicode.length&&t.hasIncludedToUnicodeMap&&this.toUnicode instanceof h.IdentityToUnicodeMap&&this.toUnicode.forEach((function(t,e){const r=i[t];void 0===n[r]&&(i[+t]=e)}))}this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(t,e){i[+t]=e})),this.toFontChar=i,this.toUnicode=new h.ToUnicodeMap(i)}else if(/Symbol/i.test(i))this.toFontChar=R(l.SymbolSetEncoding,(0,a.getGlyphsUnicode)(),this.differences);else if(/Dingbats/i.test(i))this.toFontChar=R(l.ZapfDingbatsEncoding,(0,a.getDingbatsGlyphsUnicode)(),this.differences);else if(d){const t=R(this.defaultEncoding,(0,a.getGlyphsUnicode)(),this.differences);"CIDFontType2"!==n||this.cidEncoding.startsWith("Identity-")||this.toUnicode instanceof h.IdentityToUnicodeMap||this.toUnicode.forEach((function(e,n){t[+e]=n})),this.toFontChar=t}else{const t=(0,a.getGlyphsUnicode)(),n=[];this.toUnicode.forEach(((e,i)=>{if(!this.composite){const n=this.differences[e]||this.defaultEncoding[e],r=(0,s.getUnicodeForGlyph)(n,t);-1!==r&&(i=r)}n[+e]=i})),this.composite&&this.toUnicode instanceof h.IdentityToUnicodeMap&&/Tahoma|Verdana/i.test(e)&&P(n,(0,c.getGlyphMapForStandardFonts)()),this.toFontChar=n}k(t),this.loadedName=i.split("-")[0]}checkAndRepair(t,e,n){const s=["OS/2","cmap","head","hhea","hmtx","maxp","name","post","loca","glyf","fpgm","prep","cvt ","CFF "];function c(t,e){const n=Object.create(null);n["OS/2"]=null,n.cmap=null,n.head=null,n.hhea=null,n.hmtx=null,n.maxp=null,n.name=null,n.post=null;for(let i=0;i<e;i++){const e=d(t);s.includes(e.tag)&&0!==e.length&&(n[e.tag]=e)}return n}function d(t){const e=t.getString(4),n=t.getInt32()>>>0,i=t.getInt32()>>>0,r=t.getInt32()>>>0,o=t.pos;t.pos=t.start||0,t.skip(i);const s=t.getBytes(r);return t.pos=o,"head"===e&&(s[8]=s[9]=s[10]=s[11]=0,s[17]|=32),{tag:e,checksum:n,length:r,offset:i,data:s}}function p(t){return{version:t.getString(4),numTables:t.getUint16(),searchRange:t.getUint16(),entrySelector:t.getUint16(),rangeShift:t.getUint16()}}function y(t,e,n,i,r,o){const s={length:0,sizeOfInstructions:0};if(e<0||e>=t.length||n>t.length||n-e<=12)return s;const a=t.subarray(e,n),l=M(a[2],a[3]),c=M(a[4],a[5]),h=M(a[6],a[7]),u=M(a[8],a[9]);l>h&&(T(a,2,h),T(a,6,l)),c>u&&(T(a,4,u),T(a,8,c));const d=M(a[0],a[1]);if(d<0)return d<-1||(i.set(a,r),s.length=a.length),s;let p,f=10,g=0;for(p=0;p<d;p++)g=1+(a[f]<<8|a[f+1]),f+=2;const m=f,y=a[f]<<8|a[f+1];s.sizeOfInstructions=y,f+=2+y;const v=f;let b=0;for(p=0;p<g;p++){const t=a[f++];192&t&&(a[f-1]=63&t);let e=2;2&t?e=1:16&t&&(e=0);let n=2;4&t?n=1:32&t&&(n=0);const i=e+n;if(b+=i,8&t){const t=a[f++];0===t&&(a[f-1]^=8),p+=t,b+=t*i}}if(0===b)return s;let w=f+b;return w>a.length?s:!o&&y>0?(i.set(a.subarray(0,m),r),i.set([0,0],r+m),i.set(a.subarray(v,w),r+m+2),w-=y,a.length-w>3&&(w=w+3&-4),s.length=w,s):a.length-w>3?(w=w+3&-4,i.set(a.subarray(0,w),r),s.length=w,s):(i.set(a,r),s.length=a.length,s)}function b(t){const n=(e.start||0)+t.offset;e.pos=n;const i=[[],[]],r=[],o=t.length,s=n+o;if(0!==e.getUint16()||o<6)return[i,r];const a=e.getUint16(),l=e.getUint16();let c,h;for(c=0;c<a&&e.pos+12<=s;c++){const t={platform:e.getUint16(),encoding:e.getUint16(),language:e.getUint16(),name:e.getUint16(),length:e.getUint16(),offset:e.getUint16()};(L(t)||N(t))&&r.push(t)}for(c=0,h=r.length;c<h;c++){const t=r[c];if(t.length<=0)continue;const o=n+l+t.offset;if(o+t.length>s)continue;e.pos=o;const a=t.name;if(t.encoding){let n="";for(let i=0,r=t.length;i<r;i+=2)n+=String.fromCharCode(e.getUint16());i[1][a]=n}else i[0][a]=e.getString(t.length)}return[i,r]}const w=[0,0,0,0,0,0,0,0,-2,-2,-2,-2,0,0,-2,-5,-1,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,-1,-1,1,-1,-999,0,1,0,-1,-2,0,-1,-2,-1,-1,0,-1,-1,0,0,-999,-999,-1,-1,-1,-1,-2,-999,-2,-2,-999,0,-2,-2,0,0,-2,0,-2,0,0,0,-2,-1,-1,1,1,0,0,-1,-1,-1,-1,-1,-1,-1,0,0,-1,0,-1,-1,0,-999,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,0,0,0,0,0,-2,-999,-999,-999,-999,-999,-1,-1,-2,-2,0,0,0,0,-1,-1,-999,-2,-2,0,0,-1,-2,-2,0,0,0,-1,-1,-1,-2];function x(t,e){let n,r,o,s,a,l=t.data,c=0,h=0,u=0;const d=[],p=[],f=[];let g=e.tooComplexToFollowFunctions,m=!1,y=0,v=0;for(let t=l.length;c<t;){const t=l[c++];if(64===t)if(r=l[c++],m||v)c+=r;else for(n=0;n<r;n++)d.push(l[c++]);else if(65===t)if(r=l[c++],m||v)c+=2*r;else for(n=0;n<r;n++)o=l[c++],d.push(o<<8|l[c++]);else if(176==(248&t))if(r=t-176+1,m||v)c+=r;else for(n=0;n<r;n++)d.push(l[c++]);else if(184==(248&t))if(r=t-184+1,m||v)c+=2*r;else for(n=0;n<r;n++)o=l[c++],d.push(o<<8|l[c++]);else if(43!==t||g)if(44!==t||g){if(45===t)if(m)m=!1,h=c;else{if(a=p.pop(),!a)return(0,i.warn)("TT: ENDF bad stack"),void(e.hintsValid=!1);s=f.pop(),l=a.data,c=a.i,e.functionsStackDeltas[s]=d.length-a.stackTop}else if(137===t)(m||v)&&((0,i.warn)("TT: nested IDEFs not allowed"),g=!0),m=!0,u=c;else if(88===t)++y;else if(27===t)v=y;else if(89===t)v===y&&(v=0),--y;else if(28===t&&!m&&!v){const t=d.at(-1);t>0&&(c+=t-1)}}else(m||v)&&((0,i.warn)("TT: nested FDEFs not allowed"),g=!0),m=!0,u=c,s=d.pop(),e.functionsDefined[s]={data:l,i:c};else if(!m&&!v)if(s=d.at(-1),isNaN(s))(0,i.info)("TT: CALL empty stack (or invalid entry).");else if(e.functionsUsed[s]=!0,s in e.functionsStackDeltas){const t=d.length+e.functionsStackDeltas[s];if(t<0)return(0,i.warn)("TT: CALL invalid functions stack delta."),void(e.hintsValid=!1);d.length=t}else if(s in e.functionsDefined&&!f.includes(s)){if(p.push({data:l,i:c,stackTop:d.length-1}),f.push(s),a=e.functionsDefined[s],!a)return(0,i.warn)("TT: CALL non-existent function"),void(e.hintsValid=!1);l=a.data,c=a.i}if(!m&&!v){let e=0;for(t<=142?e=w[t]:t>=192&&t<=223?e=-1:t>=224&&(e=-2),t>=113&&t<=117&&(r=d.pop(),isNaN(r)||(e=2*-r));e<0&&d.length>0;)d.pop(),e++;for(;e>0;)d.push(NaN),e--}}e.tooComplexToFollowFunctions=g;const b=[l];c>l.length&&b.push(new Uint8Array(c-l.length)),u>h&&((0,i.warn)("TT: complementing a missing function tail"),b.push(new Uint8Array([34,45]))),function(t,e){if(e.length>1){let n,i,r=0;for(n=0,i=e.length;n<i;n++)r+=e[n].length;r=r+3&-4;const o=new Uint8Array(r);let s=0;for(n=0,i=e.length;n<i;n++)o.set(e[n],s),s+=e[n].length;t.data=o,t.length=r}}(t,b)}let _,S,k,A;if(D(e=new v.Stream(new Uint8Array(e.getBytes())))){const t=function(t,e){const{numFonts:n,offsetTable:r}=function(t){const e=t.getString(4);(0,i.assert)("ttcf"===e,"Must be a TrueType Collection font.");const n=t.getUint16(),r=t.getUint16(),o=t.getInt32()>>>0,s=[];for(let e=0;e<o;e++)s.push(t.getInt32()>>>0);const a={ttcTag:e,majorVersion:n,minorVersion:r,numFonts:o,offsetTable:s};switch(n){case 1:return a;case 2:return a.dsigTag=t.getInt32()>>>0,a.dsigLength=t.getInt32()>>>0,a.dsigOffset=t.getInt32()>>>0,a}throw new i.FormatError(`Invalid TrueType Collection majorVersion: ${n}.`)}(t),o=e.split("+");let s;for(let a=0;a<n;a++){t.pos=(t.start||0)+r[a];const n=p(t),l=c(t,n.numTables);if(!l.name)throw new i.FormatError('TrueType Collection font must contain a "name" table.');const[h]=b(l.name);for(let t=0,i=h.length;t<i;t++)for(let i=0,r=h[t].length;i<r;i++){const r=h[t][i]?.replaceAll(/\s/g,"");if(r){if(r===e)return{header:n,tables:l};if(!(o.length<2))for(const t of o)r===t&&(s={name:t,header:n,tables:l})}}}if(s)return(0,i.warn)(`TrueType Collection does not contain "${e}" font, falling back to "${s.name}" font instead.`),{header:s.header,tables:s.tables};throw new i.FormatError(`TrueType Collection does not contain "${e}" font.`)}(e,this.name);_=t.header,S=t.tables}else _=p(e),S=c(e,_.numTables);const O=!S["CFF "];if(O){if(!S.loca)throw new i.FormatError('Required "loca" table is not found');S.glyf||((0,i.warn)('Required "glyf" table is not found -- trying to recover.'),S.glyf={tag:"glyf",data:new Uint8Array(0)}),this.isOpenType=!1}else{const e=n.composite&&(n.cidToGidMap?.length>0||!(n.cMap instanceof g.IdentityCMap));if("OTTO"===_.version&&!e||!S.head||!S.hhea||!S.maxp||!S.post)return A=new v.Stream(S["CFF "].data),k=new u.CFFFont(A,n),C(n),this.convert(t,k,n);delete S.glyf,delete S.loca,delete S.fpgm,delete S.prep,delete S["cvt "],this.isOpenType=!0}if(!S.maxp)throw new i.FormatError('Required "maxp" table is not found');e.pos=(e.start||0)+S.maxp.offset;const I=e.getInt32(),F=e.getUint16();if(n.scaleFactors?.length===F&&O){const{scaleFactors:t}=n,e=E(S.head.data[50],S.head.data[51]),i=new f.GlyfTable({glyfTable:S.glyf.data,isGlyphLocationsLong:e,locaTable:S.loca.data,numGlyphs:F});i.scale(t);const{glyf:r,loca:o,isLocationLong:s}=i.write();S.glyf.data=r,S.loca.data=o,s!==!!e&&(S.head.data[50]=0,S.head.data[51]=s?1:0);const a=S.hmtx.data;for(let e=0;e<F;e++){const n=4*e,i=Math.round(t[e]*E(a[n],a[n+1]));a[n]=i>>8&255,a[n+1]=255&i,T(a,n+2,Math.round(t[e]*M(a[n+2],a[n+3])))}}let P=F+1,R=!0;P>65535&&(R=!1,P=F,(0,i.warn)("Not enough space in glyfs to duplicate first glyph."));let U=0,W=0;I>=65536&&S.maxp.length>=22&&(e.pos+=8,e.getUint16()>2&&(S.maxp.data[14]=0,S.maxp.data[15]=2),e.pos+=4,U=e.getUint16(),e.pos+=4,W=e.getUint16()),S.maxp.data[4]=P>>8,S.maxp.data[5]=255&P;const q=function(t,e,n,r){const o={functionsDefined:[],functionsUsed:[],functionsStackDeltas:[],tooComplexToFollowFunctions:!1,hintsValid:!0};if(t&&x(t,o),e&&x(e,o),t&&function(t,e){if(!t.tooComplexToFollowFunctions){if(t.functionsDefined.length>e)return(0,i.warn)("TT: more functions defined than expected"),void(t.hintsValid=!1);for(let n=0,r=t.functionsUsed.length;n<r;n++){if(n>e)return(0,i.warn)("TT: invalid function id: "+n),void(t.hintsValid=!1);if(t.functionsUsed[n]&&!t.functionsDefined[n])return(0,i.warn)("TT: undefined function: "+n),void(t.hintsValid=!1)}}}(o,r),n&&1&n.length){const t=new Uint8Array(n.length+1);t.set(n.data),n.data=t}return o.hintsValid}(S.fpgm,S.prep,S["cvt "],U);if(q||(delete S.fpgm,delete S.prep,delete S["cvt "]),function(t,e,n,r,o,s){if(!e)return void(n&&(n.data=null));t.pos=(t.start||0)+e.offset,t.pos+=4,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2,t.pos+=2;const a=t.getUint16();t.pos+=8,t.pos+=2;let l=t.getUint16();0!==a&&(2&E(r.data[44],r.data[45])||(e.data[22]=0,e.data[23]=0)),l>o&&((0,i.info)(`The numOfMetrics (${l}) should not be greater than the numGlyphs (${o}).`),l=o,e.data[34]=(65280&l)>>8,e.data[35]=255&l);const c=o-l-(n.length-4*l>>1);if(c>0){const t=new Uint8Array(n.length+2*c);t.set(n.data),s&&(t[n.length]=n.data[2],t[n.length+1]=n.data[3]),n.data=t}}(e,S.hhea,S.hmtx,S.head,P,R),!S.head)throw new i.FormatError('Required "head" table is not found');!function(t,e,n){const r=t.data,o=(s=r[0],a=r[1],l=r[2],c=r[3],(s<<24)+(a<<16)+(l<<8)+c);var s,a,l,c;o>>16!=1&&((0,i.info)("Attempting to fix invalid version in head table: "+o),r[0]=0,r[1]=1,r[2]=0,r[3]=0);const h=E(r[50],r[51]);if(h<0||h>1){(0,i.info)("Attempting to fix invalid indexToLocFormat in head table: "+h);const t=e+1;if(n===t<<1)r[50]=0,r[51]=0;else{if(n!==t<<2)throw new i.FormatError("Could not fix indexToLocFormat: "+h);r[50]=0,r[51]=1}}}(S.head,F,O?S.loca.length:0);let K=Object.create(null);if(O){const t=E(S.head.data[50],S.head.data[51]),e=function(t,e,n,i,r,o,s){let a,l,c;i?(a=4,l=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]},c=function(t,e,n){t[e]=n>>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}):(a=2,l=function(t,e){return t[e]<<9|t[e+1]<<1},c=function(t,e,n){t[e]=n>>9&255,t[e+1]=n>>1&255});const h=o?n+1:n,u=a*(1+h),d=new Uint8Array(u);d.set(t.data.subarray(0,u)),t.data=d;const p=e.data,f=p.length,g=new Uint8Array(f);let m,v;const b=[];for(m=0,v=0;m<n+1;m++,v+=a){let t=l(d,v);t>f&&(t=f),b.push({index:m,offset:t,endOffset:0})}for(b.sort(((t,e)=>t.offset-e.offset)),m=0;m<n;m++)b[m].endOffset=b[m+1].offset;for(b.sort(((t,e)=>t.index-e.index)),m=0;m<n;m++){const{offset:t,endOffset:e}=b[m];if(0!==t||0!==e)break;const n=b[m+1].offset;if(0!==n){b[m].endOffset=n;break}}const w=Object.create(null);let x=0;for(c(d,0,x),m=0,v=a;m<n;m++,v+=a){const t=y(p,b[m].offset,b[m].endOffset,g,x,r),e=t.length;0===e&&(w[m]=!0),t.sizeOfInstructions>s&&(s=t.sizeOfInstructions),x+=e,c(d,v,x)}if(0===x){const t=new Uint8Array([0,1,0,0,0,0,0,0,0,0,0,0,0,0,49,0]);for(m=0,v=a;m<h;m++,v+=a)c(d,v,t.length);e.data=t}else if(o){const n=l(d,a);g.length>n+x?e.data=g.subarray(0,n+x):(e.data=new Uint8Array(n+x),e.data.set(g.subarray(0,x))),e.data.set(g.subarray(0,n),x),c(t.data,d.length-a,x+n)}else e.data=g.subarray(0,x);return{missingGlyphs:w,maxSizeOfInstructions:s}}(S.loca,S.glyf,F,t,q,R,W);K=e.missingGlyphs,I>=65536&&S.maxp.length>=22&&(S.maxp.data[26]=e.maxSizeOfInstructions>>8,S.maxp.data[27]=255&e.maxSizeOfInstructions)}if(!S.hhea)throw new i.FormatError('Required "hhea" table is not found');0===S.hhea.data[10]&&0===S.hhea.data[11]&&(S.hhea.data[10]=255,S.hhea.data[11]=255);const X={unitsPerEm:E(S.head.data[18],S.head.data[19]),yMax:M(S.head.data[42],S.head.data[43]),yMin:M(S.head.data[38],S.head.data[39]),ascent:M(S.hhea.data[4],S.hhea.data[5]),descent:M(S.hhea.data[6],S.hhea.data[7]),lineGap:M(S.hhea.data[8],S.hhea.data[9])};this.ascent=X.ascent/X.unitsPerEm,this.descent=X.descent/X.unitsPerEm,this.lineGap=X.lineGap/X.unitsPerEm,this.cssFontInfo?.lineHeight?(this.lineHeight=this.cssFontInfo.metrics.lineHeight,this.lineGap=this.cssFontInfo.metrics.lineGap):this.lineHeight=this.ascent-this.descent+this.lineGap,S.post&&function(t,n,r){const s=(e.start||0)+t.offset;e.pos=s;const a=s+t.length,l=e.getInt32();let c;e.skip(28);let h,u=!0;switch(l){case 65536:c=o.MacStandardGlyphOrdering;break;case 131072:const t=e.getUint16();if(t!==r){u=!1;break}const s=[];for(h=0;h<t;++h){const t=e.getUint16();if(t>=32768){u=!1;break}s.push(t)}if(!u)break;const d=[],p=[];for(;e.pos<a;){const t=e.getByte();for(p.length=t,h=0;h<t;++h)p[h]=String.fromCharCode(e.getByte());d.push(p.join(""))}for(c=[],h=0;h<t;++h){const t=s[h];t<258?c.push(o.MacStandardGlyphOrdering[t]):c.push(d[t-258])}break;case 196608:break;default:(0,i.warn)("Unknown/unsupported post table version "+l),u=!1,n.defaultEncoding&&(c=n.defaultEncoding)}n.glyphNames=c}(S.post,n,F),S.post={tag:"post",data:H(n)};const G=[];function Y(t){return!K[t]}if(n.composite){const t=n.cidToGidMap||[],e=0===t.length;n.cMap.forEach((function(n,r){if("string"==typeof r&&(r=B(n,r,!0)),r>65535)throw new i.FormatError("Max size of CID is 65,535");let o=-1;e?o=r:void 0!==t[r]&&(o=t[r]),o>=0&&o<F&&Y(o)&&(G[n]=o)}))}else{const t=function(t,e,n,r){if(!t)return(0,i.warn)("No cmap table available."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};let o,s=(e.start||0)+t.offset;e.pos=s,e.skip(2);const a=e.getUint16();let l,c=!1;for(let t=0;t<a;t++){const i=e.getUint16(),o=e.getUint16(),s=e.getInt32()>>>0;let h=!1;if(l?.platformId!==i||l?.encodingId!==o){if(0!==i||0!==o&&1!==o&&3!==o)if(1===i&&0===o)h=!0;else if(3!==i||1!==o||!r&&l){if(n&&3===i&&0===o){h=!0;let n=!0;if(t<a-1){const t=e.peekBytes(2);E(t[0],t[1])<i&&(n=!1)}n&&(c=!0)}}else h=!0,n||(c=!0);else h=!0;if(h&&(l={platformId:i,encodingId:o,offset:s}),c)break}}if(l&&(e.pos=s+l.offset),!l||-1===e.peekByte())return(0,i.warn)("Could not find a preferred cmap table."),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};const h=e.getUint16();let u=!1;const d=[];let p,f;if(0===h){for(e.skip(4),p=0;p<256;p++){const t=e.getByte();t&&d.push({charCode:p,glyphId:t})}u=!0}else if(2===h){e.skip(4);const t=[];let n=0;for(let i=0;i<256;i++){const i=e.getUint16()>>3;t.push(i),n=Math.max(i,n)}const i=[];for(let t=0;t<=n;t++)i.push({firstCode:e.getUint16(),entryCount:e.getUint16(),idDelta:M(e.getByte(),e.getByte()),idRangePos:e.pos+e.getUint16()});for(let n=0;n<256;n++)if(0===t[n])e.pos=i[0].idRangePos+2*n,f=e.getUint16(),d.push({charCode:n,glyphId:f});else{const r=i[t[n]];for(p=0;p<r.entryCount;p++){const t=(n<<8)+p+r.firstCode;e.pos=r.idRangePos+2*p,f=e.getUint16(),0!==f&&(f=(f+r.idDelta)%65536),d.push({charCode:t,glyphId:f})}}}else if(4===h){e.skip(4);const t=e.getUint16()>>1;e.skip(6);const n=[];let i;for(i=0;i<t;i++)n.push({end:e.getUint16()});for(e.skip(2),i=0;i<t;i++)n[i].start=e.getUint16();for(i=0;i<t;i++)n[i].delta=e.getUint16();let r,a=0;for(i=0;i<t;i++){o=n[i];const s=e.getUint16();s?(r=(s>>1)-(t-i),o.offsetIndex=r,a=Math.max(a,r+o.end-o.start+1)):o.offsetIndex=-1}const l=[];for(p=0;p<a;p++)l.push(e.getUint16());for(i=0;i<t;i++){o=n[i],s=o.start;const t=o.end,e=o.delta;for(r=o.offsetIndex,p=s;p<=t;p++)65535!==p&&(f=r<0?p:l[r+p-s],f=f+e&65535,d.push({charCode:p,glyphId:f}))}}else if(6===h){e.skip(4);const t=e.getUint16(),n=e.getUint16();for(p=0;p<n;p++){f=e.getUint16();const n=t+p;d.push({charCode:n,glyphId:f})}}else{if(12!==h)return(0,i.warn)("cmap table has unsupported format: "+h),{platformId:-1,encodingId:-1,mappings:[],hasShortCmap:!1};{e.skip(10);const t=e.getInt32()>>>0;for(p=0;p<t;p++){const t=e.getInt32()>>>0,n=e.getInt32()>>>0;let i=e.getInt32()>>>0;for(let e=t;e<=n;e++)d.push({charCode:e,glyphId:i++})}}}d.sort((function(t,e){return t.charCode-e.charCode}));for(let t=1;t<d.length;t++)d[t-1].charCode===d[t].charCode&&(d.splice(t,1),t--);return{platformId:l.platformId,encodingId:l.encodingId,mappings:d,hasShortCmap:u}}(S.cmap,e,this.isSymbolicFont,n.hasEncoding),r=t.platformId,s=t.encodingId,c=t.mappings;let u=[],d=!1;if(!n.hasEncoding||"MacRomanEncoding"!==n.baseEncodingName&&"WinAnsiEncoding"!==n.baseEncodingName||(u=(0,l.getEncoding)(n.baseEncodingName)),n.hasEncoding&&!this.isSymbolicFont&&(3===r&&1===s||1===r&&0===s)){const t=(0,a.getGlyphsUnicode)();for(let e=0;e<256;e++){let i;if(i=void 0!==this.differences[e]?this.differences[e]:u.length&&""!==u[e]?u[e]:l.StandardEncoding[e],!i)continue;const a=(0,o.recoverGlyphName)(i,t);let d;if(3===r&&1===s?d=t[a]:1===r&&0===s&&(d=l.MacRomanEncoding.indexOf(a)),void 0===d){if(!n.glyphNames&&n.hasIncludedToUnicodeMap&&!(this.toUnicode instanceof h.IdentityToUnicodeMap)){const t=this.toUnicode.get(e);t&&(d=t.codePointAt(0))}if(void 0===d)continue}for(const t of c)if(t.charCode===d){G[e]=t.glyphId;break}}}else if(0===r){for(const t of c)G[t.charCode]=t.glyphId;d=!0}else for(const t of c){let e=t.charCode;3===r&&e>=61440&&e<=61695&&(e&=255),G[e]=t.glyphId}if(n.glyphNames&&(u.length||this.differences.length))for(let t=0;t<256;++t){if(!d&&void 0!==G[t])continue;const e=this.differences[t]||u[t];if(!e)continue;const i=n.glyphNames.indexOf(e);i>0&&Y(i)&&(G[t]=i)}}0===G.length&&(G[0]=0);let J=P-1;if(R||(J=0),!n.cssFontInfo){const t=j(G,Y,J,this.toUnicode);this.toFontChar=t.toFontChar,S.cmap={tag:"cmap",data:z(t.charCodeToGlyphId,t.toUnicodeExtraMap,P)},S["OS/2"]&&function(t,e){e.pos=(e.start||0)+t.offset;const n=e.getUint16();e.skip(60);const i=e.getUint16();return!(n<4&&768&i||e.getUint16()>e.getUint16()||(e.skip(6),0===e.getUint16()||(t.data[8]=t.data[9]=0,0)))}(S["OS/2"],e)||(S["OS/2"]={tag:"OS/2",data:$(n,t.charCodeToGlyphId,X)})}if(!O)try{A=new v.Stream(S["CFF "].data),k=new r.CFFParser(A,n,o.SEAC_ANALYSIS_ENABLED).parse(),k.duplicateFirstGlyph();const t=new r.CFFCompiler(k);S["CFF "].data=t.compile()}catch{(0,i.warn)("Failed to compile font "+n.loadedName)}if(S.name){const[e,i]=b(S.name);S.name.data=V(t,e),this.psName=e[0][6]||null,n.composite||function(t,e,n){if(t.isInternalFont)return;if(t.hasIncludedToUnicodeMap)return;if(t.hasEncoding)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;if(!e)return;if(0===n.length)return;if(t.defaultEncoding===l.WinAnsiEncoding)return;for(const t of n)if(!N(t))return;const i=l.WinAnsiEncoding,r=[],o=(0,a.getGlyphsUnicode)();for(const t in i){const e=i[t];if(""===e)continue;const n=o[e];void 0!==n&&(r[t]=String.fromCharCode(n))}r.length>0&&t.toUnicode.amend(r)}(n,this.isSymbolicFont,i)}else S.name={tag:"name",data:V(this.name)};const Z=new m.OpenTypeFileBuilder(_.version);for(const t in S)Z.addTable(t,S[t].data);return Z.toArray()}convert(t,e,n){n.fixedPitch=!1,n.builtInEncoding&&function(t,e){if(t.isInternalFont)return;if(t.hasIncludedToUnicodeMap)return;if(e===t.defaultEncoding)return;if(t.toUnicode instanceof h.IdentityToUnicodeMap)return;const n=[],i=(0,a.getGlyphsUnicode)();for(const r in e){if(t.hasEncoding&&(t.baseEncodingName||void 0!==t.differences[r]))continue;const o=e[r],a=(0,s.getUnicodeForGlyph)(o,i);-1!==a&&(n[r]=String.fromCharCode(a))}n.length>0&&t.toUnicode.amend(n)}(n,n.builtInEncoding);let r=1;e instanceof u.CFFFont&&(r=e.numGlyphs-1);const c=e.getGlyphMapping(n);let d=null,p=c,f=null;n.cssFontInfo||(d=j(c,e.hasGlyphId.bind(e),r,this.toUnicode),this.toFontChar=d.toFontChar,p=d.charCodeToGlyphId,f=d.toUnicodeExtraMap);const g=e.numGlyphs;function y(t,e){let n=null;for(const i in t)e===t[i]&&(n||=[]).push(0|i);return n}function v(t,e){for(const n in t)if(e===t[n])return 0|n;return d.charCodeToGlyphId[d.nextAvailableFontCharCode]=e,d.nextAvailableFontCharCode++}const b=e.seacs;if(d&&o.SEAC_ANALYSIS_ENABLED&&b?.length){const t=n.fontMatrix||i.FONT_IDENTITY_MATRIX,r=e.getCharset(),o=Object.create(null);for(let e in b){e|=0;const n=b[e],i=l.StandardEncoding[n[2]],s=l.StandardEncoding[n[3]],a=r.indexOf(i),h=r.indexOf(s);if(a<0||h<0)continue;const u={x:n[0]*t[0]+n[1]*t[2]+t[4],y:n[0]*t[1]+n[1]*t[3]+t[5]},p=y(c,e);if(p)for(const t of p){const e=d.charCodeToGlyphId,n=v(e,a),i=v(e,h);o[t]={baseFontCharCode:n,accentFontCharCode:i,accentOffset:u}}}n.seacMap=o}const w=1/(n.fontMatrix||i.FONT_IDENTITY_MATRIX)[0],x=new m.OpenTypeFileBuilder("OTTO");return x.addTable("CFF ",e.data),x.addTable("OS/2",$(n,p)),x.addTable("cmap",z(p,f,g)),x.addTable("head","\0\0\0\0\0\0\0\0\0\0_<õ\0\0"+I(w)+"\0\0\0\0\v~'\0\0\0\0\v~'\0\0"+I(n.descent)+"ÿ"+I(n.ascent)+O(n.italicAngle?2:0)+"\0\0\0\0\0\0\0"),x.addTable("hhea","\0\0\0"+I(n.ascent)+I(n.descent)+"\0\0ÿÿ\0\0\0\0\0\0"+I(n.capHeight)+I(Math.tan(n.italicAngle)*n.xHeight)+"\0\0\0\0\0\0\0\0\0\0\0\0"+O(g)),x.addTable("hmtx",function(){const t=e.charstrings,n=e.cff?e.cff.widths:null;let i="\0\0\0\0";for(let e=1,r=g;e<r;e++){let r=0;if(t){const n=t[e-1];r="width"in n?n.width:0}else n&&(r=Math.ceil(n[e]||0));i+=O(r)+O(0)}return i}()),x.addTable("maxp","\0\0P\0"+O(g)),x.addTable("name",V(t)),x.addTable("post",H(n)),x.toArray()}get spaceWidth(){const t=["space","minus","one","i","I"];let e;for(const n of t){if(n in this.widths){e=this.widths[n];break}const t=(0,a.getGlyphsUnicode)()[n];let i=0;if(this.composite&&this.cMap.contains(t)&&(i=this.cMap.lookup(t),"string"==typeof i&&(i=B(t,i))),!i&&this.toUnicode&&(i=this.toUnicode.charCodeOf(t)),i<=0&&(i=t),e=this.widths[i],e)break}return(0,i.shadow)(this,"spaceWidth",e||this.defaultWidth)}_charToGlyph(t,e=!1){let n,r,o,a=this._glyphCache[t];if(a?.isSpace===e)return a;let l=t;this.cMap?.contains(t)&&(l=this.cMap.lookup(t),"string"==typeof l&&(l=B(t,l))),r=this.widths[l],"number"!=typeof r&&(r=this.defaultWidth);const c=this.vmetrics?.[l];let h=this.toUnicode.get(t)||t;"number"==typeof h&&(h=String.fromCharCode(h));let u=void 0!==this.toFontChar[t];if(n=this.toFontChar[t]||t,this.missingFile){const e=this.differences[t]||this.defaultEncoding[t];".notdef"!==e&&""!==e||"Type1"!==this.type||(n=32),n=(0,s.mapSpecialUnicodeValues)(n)}this.isType3Font&&(o=n);let d=null;if(this.seacMap?.[t]){u=!0;const e=this.seacMap[t];n=e.baseFontCharCode,d={fontChar:String.fromCodePoint(e.accentFontCharCode),offset:e.accentOffset}}let p="";return"number"==typeof n&&(n<=1114111?p=String.fromCodePoint(n):(0,i.warn)(`charToGlyph - invalid fontCharCode: ${n}`)),a=new A(t,p,h,d,r,c,o,e,u),this._glyphCache[t]=a}charsToGlyphs(t){let e=this._charsCache[t];if(e)return e;if(e=[],this.cMap){const n=Object.create(null),i=t.length;let r=0;for(;r<i;){this.cMap.readCharCode(t,r,n);const{charcode:i,length:o}=n;r+=o;const s=this._charToGlyph(i,1===o&&32===t.charCodeAt(r-1));e.push(s)}}else for(let n=0,i=t.length;n<i;++n){const i=t.charCodeAt(n),r=this._charToGlyph(i,32===i);e.push(r)}return this._charsCache[t]=e}getCharPositions(t){const e=[];if(this.cMap){const n=Object.create(null);let i=0;for(;i<t.length;){this.cMap.readCharCode(t,i,n);const r=n.length;e.push([i,i+r]),i+=r}}else for(let n=0,i=t.length;n<i;++n)e.push([n,n+1]);return e}get glyphCacheValues(){return Object.values(this._glyphCache)}encodeString(t){const e=[],n=[],i=()=>e.length%2==1,r=this.toUnicode instanceof h.IdentityToUnicodeMap?t=>this.toUnicode.charCodeOf(t):t=>this.toUnicode.charCodeOf(String.fromCodePoint(t));for(let o=0,s=t.length;o<s;o++){const s=t.codePointAt(o);if(s>55295&&(s<57344||s>65533)&&o++,this.toUnicode){const t=r(s);if(-1!==t){i()&&(e.push(n.join("")),n.length=0);for(let e=(this.cMap?this.cMap.getCharCodeLength(t):1)-1;e>=0;e--)n.push(String.fromCharCode(t>>8*e&255));continue}}i()||(e.push(n.join("")),n.length=0),n.push(String.fromCodePoint(s))}return e.push(n.join("")),e}},e.ErrorFont=class{constructor(t){this.error=t,this.loadedName="g_font_error",this.missingFile=!0}charsToGlyphs(){return[]}encodeString(t){return[t]}exportData(t=!1){return{error:this.error}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFTopDict=e.CFFStrings=e.CFFStandardStrings=e.CFFPrivateDict=e.CFFParser=e.CFFIndex=e.CFFHeader=e.CFFFDSelect=e.CFFCompiler=e.CFFCharset=e.CFF=void 0;var i=n(2),r=n(36),o=n(37);const s=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];e.CFFStandardStrings=s;const a=391,l=[null,{id:"hstem",min:2,stackClearing:!0,stem:!0},null,{id:"vstem",min:2,stackClearing:!0,stem:!0},{id:"vmoveto",min:1,stackClearing:!0},{id:"rlineto",min:2,resetStack:!0},{id:"hlineto",min:1,resetStack:!0},{id:"vlineto",min:1,resetStack:!0},{id:"rrcurveto",min:6,resetStack:!0},null,{id:"callsubr",min:1,undefStack:!0},{id:"return",min:0,undefStack:!0},null,null,{id:"endchar",min:0,stackClearing:!0},null,null,null,{id:"hstemhm",min:2,stackClearing:!0,stem:!0},{id:"hintmask",min:0,stackClearing:!0},{id:"cntrmask",min:0,stackClearing:!0},{id:"rmoveto",min:2,stackClearing:!0},{id:"hmoveto",min:1,stackClearing:!0},{id:"vstemhm",min:2,stackClearing:!0,stem:!0},{id:"rcurveline",min:8,resetStack:!0},{id:"rlinecurve",min:8,resetStack:!0},{id:"vvcurveto",min:4,resetStack:!0},{id:"hhcurveto",min:4,resetStack:!0},null,{id:"callgsubr",min:1,undefStack:!0},{id:"vhcurveto",min:4,resetStack:!0},{id:"hvcurveto",min:4,resetStack:!0}],c=[null,null,null,{id:"and",min:2,stackDelta:-1},{id:"or",min:2,stackDelta:-1},{id:"not",min:1,stackDelta:0},null,null,null,{id:"abs",min:1,stackDelta:0},{id:"add",min:2,stackDelta:-1,stackFn(t,e){t[e-2]=t[e-2]+t[e-1]}},{id:"sub",min:2,stackDelta:-1,stackFn(t,e){t[e-2]=t[e-2]-t[e-1]}},{id:"div",min:2,stackDelta:-1,stackFn(t,e){t[e-2]=t[e-2]/t[e-1]}},null,{id:"neg",min:1,stackDelta:0,stackFn(t,e){t[e-1]=-t[e-1]}},{id:"eq",min:2,stackDelta:-1},null,null,{id:"drop",min:1,stackDelta:-1},null,{id:"put",min:2,stackDelta:-2},{id:"get",min:1,stackDelta:0},{id:"ifelse",min:4,stackDelta:-3},{id:"random",min:0,stackDelta:1},{id:"mul",min:2,stackDelta:-1,stackFn(t,e){t[e-2]=t[e-2]*t[e-1]}},null,{id:"sqrt",min:1,stackDelta:0},{id:"dup",min:1,stackDelta:1},{id:"exch",min:2,stackDelta:0},{id:"index",min:2,stackDelta:0},{id:"roll",min:3,stackDelta:-2},null,null,null,{id:"hflex",min:7,resetStack:!0},{id:"flex",min:13,resetStack:!0},{id:"hflex1",min:9,resetStack:!0},{id:"flex1",min:11,resetStack:!0}];e.CFFParser=class{constructor(t,e,n){this.bytes=t.getBytes(),this.properties=e,this.seacAnalysisEnabled=!!n}parse(){const t=this.properties,e=new h;this.cff=e;const n=this.parseHeader(),i=this.parseIndex(n.endPos),r=this.parseIndex(i.endPos),o=this.parseIndex(r.endPos),s=this.parseIndex(o.endPos),a=this.parseDict(r.obj.get(0)),l=this.createDict(m,a,e.strings);e.header=n.obj,e.names=this.parseNameIndex(i.obj),e.strings=this.parseStringIndex(o.obj),e.topDict=l,e.globalSubrIndex=s.obj,this.parsePrivateDict(e.topDict),e.isCIDFont=l.hasName("ROS");const c=l.getByName("CharStrings"),u=this.parseIndex(c).obj,d=l.getByName("FontMatrix");d&&(t.fontMatrix=d);const p=l.getByName("FontBBox");let f,g;if(p&&(t.ascent=Math.max(p[3],p[1]),t.descent=Math.min(p[1],p[3]),t.ascentScaled=!0),e.isCIDFont){const t=this.parseIndex(l.getByName("FDArray")).obj;for(let n=0,i=t.count;n<i;++n){const i=t.get(n),r=this.createDict(m,this.parseDict(i),e.strings);this.parsePrivateDict(r),e.fdArray.push(r)}g=null,f=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!0),e.fdSelect=this.parseFDSelect(l.getByName("FDSelect"),u.count)}else f=this.parseCharsets(l.getByName("charset"),u.count,e.strings,!1),g=this.parseEncoding(l.getByName("Encoding"),t,e.strings,f.charset);e.charset=f,e.encoding=g;const y=this.parseCharStrings({charStrings:u,localSubrIndex:l.privateDict.subrsIndex,globalSubrIndex:s.obj,fdSelect:e.fdSelect,fdArray:e.fdArray,privateDict:l.privateDict});return e.charStrings=y.charStrings,e.seacs=y.seacs,e.widths=y.widths,e}parseHeader(){let t=this.bytes;const e=t.length;let n=0;for(;n<e&&1!==t[n];)++n;if(n>=e)throw new i.FormatError("Invalid CFF header");0!==n&&((0,i.info)("cff data is shifted"),t=t.subarray(n),this.bytes=t);const r=t[0],o=t[1],s=t[2],a=t[3];return{obj:new u(r,o,s,a),endPos:s}}parseDict(t){let e=0;function n(){let n=t[e++];return 30===n?function(){let n="";const i=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"],o=t.length;for(;e<o;){const o=t[e++],s=o>>4,a=15&o;if(s===i)break;if(n+=r[s],a===i)break;n+=r[a]}return parseFloat(n)}():28===n?(n=t[e++],n=(n<<24|t[e++]<<16)>>16,n):29===n?(n=t[e++],n=n<<8|t[e++],n=n<<8|t[e++],n=n<<8|t[e++],n):n>=32&&n<=246?n-139:n>=247&&n<=250?256*(n-247)+t[e++]+108:n>=251&&n<=254?-256*(n-251)-t[e++]-108:((0,i.warn)('CFFParser_parseDict: "'+n+'" is a reserved command.'),NaN)}let r=[];const o=[];e=0;const s=t.length;for(;e<s;){let i=t[e];i<=21?(12===i&&(i=i<<8|t[++e]),o.push([i,r]),r=[],++e):r.push(n())}return o}parseIndex(t){const e=new p,n=this.bytes,i=n[t++]<<8|n[t++],r=[];let o,s,a=t;if(0!==i){const e=n[t++],l=t+(i+1)*e-1;for(o=0,s=i+1;o<s;++o){let i=0;for(let r=0;r<e;++r)i<<=8,i+=n[t++];r.push(l+i)}a=r[i]}for(o=0,s=r.length-1;o<s;++o){const t=r[o],i=r[o+1];e.add(n.subarray(t,i))}return{obj:e,endPos:a}}parseNameIndex(t){const e=[];for(let n=0,r=t.count;n<r;++n){const r=t.get(n);e.push((0,i.bytesToString)(r))}return e}parseStringIndex(t){const e=new d;for(let n=0,r=t.count;n<r;++n){const r=t.get(n);e.add((0,i.bytesToString)(r))}return e}createDict(t,e,n){const i=new t(n);for(const[t,n]of e)i.setByKey(t,n);return i}parseCharString(t,e,n,r){if(!e||t.callDepth>10)return!1;let o=t.stackSize;const s=t.stack;let a=e.length;for(let h=0;h<a;){const u=e[h++];let d=null;if(12===u){const t=e[h++];0===t?(e[h-2]=139,e[h-1]=22,o=0):d=c[t]}else if(28===u)s[o]=(e[h]<<24|e[h+1]<<16)>>16,h+=2,o++;else if(14===u){if(o>=4&&(o-=4,this.seacAnalysisEnabled))return t.seac=s.slice(o,o+4),!1;d=l[u]}else if(u>=32&&u<=246)s[o]=u-139,o++;else if(u>=247&&u<=254)s[o]=u<251?(u-247<<8)+e[h]+108:-(u-251<<8)-e[h]-108,h++,o++;else if(255===u)s[o]=(e[h]<<24|e[h+1]<<16|e[h+2]<<8|e[h+3])/65536,h+=4,o++;else if(19===u||20===u){if(t.hints+=o>>1,0===t.hints){e.copyWithin(h-1,h,-1),h-=1,a-=1;continue}h+=t.hints+7>>3,o%=2,d=l[u]}else{if(10===u||29===u){const e=10===u?n:r;if(!e)return d=l[u],(0,i.warn)("Missing subrsIndex for "+d.id),!1;let a=32768;e.count<1240?a=107:e.count<33900&&(a=1131);const c=s[--o]+a;if(c<0||c>=e.count||isNaN(c))return d=l[u],(0,i.warn)("Out of bounds subrIndex for "+d.id),!1;if(t.stackSize=o,t.callDepth++,!this.parseCharString(t,e.get(c),n,r))return!1;t.callDepth--,o=t.stackSize;continue}if(11===u)return t.stackSize=o,!0;if(0===u&&h===e.length)e[h-1]=14,d=l[14];else{if(9===u){e.copyWithin(h-1,h,-1),h-=1,a-=1;continue}d=l[u]}}if(d){if(d.stem&&(t.hints+=o>>1,3===u||23===u?t.hasVStems=!0:!t.hasVStems||1!==u&&18!==u||((0,i.warn)("CFF stem hints are in wrong order"),e[h-1]=1===u?3:23)),"min"in d&&!t.undefStack&&o<d.min)return(0,i.warn)("Not enough parameters for "+d.id+"; actual: "+o+", expected: "+d.min),0===o&&(e[h-1]=14,!0);t.firstStackClearing&&d.stackClearing&&(t.firstStackClearing=!1,o-=d.min,o>=2&&d.stem?o%=2:o>1&&(0,i.warn)("Found too many parameters for stack-clearing command"),o>0&&(t.width=s[o-1])),"stackDelta"in d?("stackFn"in d&&d.stackFn(s,o),o+=d.stackDelta):d.stackClearing?o=0:d.resetStack?(o=0,t.undefStack=!1):d.undefStack&&(o=0,t.undefStack=!0,t.firstStackClearing=!1)}}return a<e.length&&e.fill(14,a),t.stackSize=o,!0}parseCharStrings({charStrings:t,localSubrIndex:e,globalSubrIndex:n,fdSelect:r,fdArray:o,privateDict:s}){const a=[],l=[],c=t.count;for(let h=0;h<c;h++){const c=t.get(h),u={callDepth:0,stackSize:0,stack:[],undefStack:!0,hints:0,firstStackClearing:!0,seac:null,width:null,hasVStems:!1};let d=!0,p=null,f=s;if(r&&o.length){const t=r.getFDIndex(h);-1===t&&((0,i.warn)("Glyph index is not in fd select."),d=!1),t>=o.length&&((0,i.warn)("Invalid fd index for glyph index."),d=!1),d&&(f=o[t].privateDict,p=f.subrsIndex)}else e&&(p=e);if(d&&(d=this.parseCharString(u,c,p,n)),null!==u.width){const t=f.getByName("nominalWidthX");l[h]=t+u.width}else{const t=f.getByName("defaultWidthX");l[h]=t}null!==u.seac&&(a[h]=u.seac),d||t.set(h,new Uint8Array([14]))}return{charStrings:t,seacs:a,widths:l}}emptyPrivateDictionary(t){const e=this.createDict(v,[],t.strings);t.setByKey(18,[0,0]),t.privateDict=e}parsePrivateDict(t){if(!t.hasName("Private"))return void this.emptyPrivateDictionary(t);const e=t.getByName("Private");if(!Array.isArray(e)||2!==e.length)return void t.removeByName("Private");const n=e[0],i=e[1];if(0===n||i>=this.bytes.length)return void this.emptyPrivateDictionary(t);const r=i+n,o=this.bytes.subarray(i,r),s=this.parseDict(o),a=this.createDict(v,s,t.strings);if(t.privateDict=a,0===a.getByName("ExpansionFactor")&&a.setByName("ExpansionFactor",.06),!a.getByName("Subrs"))return;const l=a.getByName("Subrs"),c=i+l;if(0===l||c>=this.bytes.length)return void this.emptyPrivateDictionary(t);const h=this.parseIndex(c);a.subrsIndex=h.obj}parseCharsets(t,e,n,o){if(0===t)return new w(!0,b.ISO_ADOBE,r.ISOAdobeCharset);if(1===t)return new w(!0,b.EXPERT,r.ExpertCharset);if(2===t)return new w(!0,b.EXPERT_SUBSET,r.ExpertSubsetCharset);const s=this.bytes,a=t,l=s[t++],c=[o?0:".notdef"];let h,u,d;switch(e-=1,l){case 0:for(d=0;d<e;d++)h=s[t++]<<8|s[t++],c.push(o?h:n.get(h));break;case 1:for(;c.length<=e;)for(h=s[t++]<<8|s[t++],u=s[t++],d=0;d<=u;d++)c.push(o?h++:n.get(h++));break;case 2:for(;c.length<=e;)for(h=s[t++]<<8|s[t++],u=s[t++]<<8|s[t++],d=0;d<=u;d++)c.push(o?h++:n.get(h++));break;default:throw new i.FormatError("Unknown charset format")}const p=t,f=s.subarray(a,p);return new w(!1,l,c,f)}parseEncoding(t,e,n,r){const s=Object.create(null),a=this.bytes;let l,c,h,u=!1,d=null;if(0===t||1===t){u=!0,l=t;const e=t?o.ExpertEncoding:o.StandardEncoding;for(c=0,h=r.length;c<h;c++){const t=e.indexOf(r[c]);-1!==t&&(s[t]=c)}}else{const e=t;switch(l=a[t++],127&l){case 0:const e=a[t++];for(c=1;c<=e;c++)s[a[t++]]=c;break;case 1:const n=a[t++];let r=1;for(c=0;c<n;c++){const e=a[t++],n=a[t++];for(let t=e;t<=e+n;t++)s[t]=r++}break;default:throw new i.FormatError(`Unknown encoding format: ${l} in CFF`)}const o=t;128&l&&(a[e]&=127,function(){const e=a[t++];for(c=0;c<e;c++){const e=a[t++],i=(a[t++]<<8)+(255&a[t++]);s[e]=r.indexOf(n.get(i))}}()),d=a.subarray(e,o)}return l&=127,new x(u,l,s,d)}parseFDSelect(t,e){const n=this.bytes,r=n[t++],o=[];let s;switch(r){case 0:for(s=0;s<e;++s){const e=n[t++];o.push(e)}break;case 3:const a=n[t++]<<8|n[t++];for(s=0;s<a;++s){let e=n[t++]<<8|n[t++];0===s&&0!==e&&((0,i.warn)("parseFDSelect: The first range must have a first GID of 0 -- trying to recover."),e=0);const r=n[t++],a=n[t]<<8|n[t+1];for(let t=e;t<a;++t)o.push(r)}t+=2;break;default:throw new i.FormatError(`parseFDSelect: Unknown format "${r}".`)}if(o.length!==e)throw new i.FormatError("parseFDSelect: Invalid font data.");return new _(r,o)}};class h{constructor(){this.header=null,this.names=[],this.topDict=null,this.strings=new d,this.globalSubrIndex=null,this.encoding=null,this.charset=null,this.charStrings=null,this.fdArray=[],this.fdSelect=null,this.isCIDFont=!1}duplicateFirstGlyph(){if(this.charStrings.count>=65535)return void(0,i.warn)("Not enough space in charstrings to duplicate first glyph.");const t=this.charStrings.get(0);this.charStrings.add(t),this.isCIDFont&&this.fdSelect.fdSelect.push(this.fdSelect.fdSelect[0])}hasGlyphId(t){return!(t<0||t>=this.charStrings.count)&&this.charStrings.get(t).length>0}}e.CFF=h;class u{constructor(t,e,n,i){this.major=t,this.minor=e,this.hdrSize=n,this.offSize=i}}e.CFFHeader=u;class d{constructor(){this.strings=[]}get(t){return t>=0&&t<=390?s[t]:t-a<=this.strings.length?this.strings[t-a]:s[0]}getSID(t){let e=s.indexOf(t);return-1!==e?e:(e=this.strings.indexOf(t),-1!==e?e+a:-1)}add(t){this.strings.push(t)}get count(){return this.strings.length}}e.CFFStrings=d;class p{constructor(){this.objects=[],this.length=0}add(t){this.length+=t.length,this.objects.push(t)}set(t,e){this.length+=e.length-this.objects[t].length,this.objects[t]=e}get(t){return this.objects[t]}get count(){return this.objects.length}}e.CFFIndex=p;class f{constructor(t,e){this.keyToNameMap=t.keyToNameMap,this.nameToKeyMap=t.nameToKeyMap,this.defaults=t.defaults,this.types=t.types,this.opcodes=t.opcodes,this.order=t.order,this.strings=e,this.values=Object.create(null)}setByKey(t,e){if(!(t in this.keyToNameMap))return!1;if(0===e.length)return!0;for(const n of e)if(isNaN(n))return(0,i.warn)(`Invalid CFFDict value: "${e}" for key "${t}".`),!0;const n=this.types[t];return"num"!==n&&"sid"!==n&&"offset"!==n||(e=e[0]),this.values[t]=e,!0}setByName(t,e){if(!(t in this.nameToKeyMap))throw new i.FormatError(`Invalid dictionary name "${t}"`);this.values[this.nameToKeyMap[t]]=e}hasName(t){return this.nameToKeyMap[t]in this.values}getByName(t){if(!(t in this.nameToKeyMap))throw new i.FormatError(`Invalid dictionary name ${t}"`);const e=this.nameToKeyMap[t];return e in this.values?this.values[e]:this.defaults[e]}removeByName(t){delete this.values[this.nameToKeyMap[t]]}static createTables(t){const e={keyToNameMap:{},nameToKeyMap:{},defaults:{},types:{},opcodes:{},order:[]};for(const n of t){const t=Array.isArray(n[0])?(n[0][0]<<8)+n[0][1]:n[0];e.keyToNameMap[t]=n[1],e.nameToKeyMap[n[1]]=t,e.types[t]=n[2],e.defaults[t]=n[3],e.opcodes[t]=Array.isArray(n[0])?n[0]:[n[0]],e.order.push(t)}return e}}const g=[[[12,30],"ROS",["sid","sid","num"],null],[[12,20],"SyntheticBase","num",null],[0,"version","sid",null],[1,"Notice","sid",null],[[12,0],"Copyright","sid",null],[2,"FullName","sid",null],[3,"FamilyName","sid",null],[4,"Weight","sid",null],[[12,1],"isFixedPitch","num",0],[[12,2],"ItalicAngle","num",0],[[12,3],"UnderlinePosition","num",-100],[[12,4],"UnderlineThickness","num",50],[[12,5],"PaintType","num",0],[[12,6],"CharstringType","num",2],[[12,7],"FontMatrix",["num","num","num","num","num","num"],[.001,0,0,.001,0,0]],[13,"UniqueID","num",null],[5,"FontBBox",["num","num","num","num"],[0,0,0,0]],[[12,8],"StrokeWidth","num",0],[14,"XUID","array",null],[15,"charset","offset",0],[16,"Encoding","offset",0],[17,"CharStrings","offset",0],[18,"Private",["offset","offset"],null],[[12,21],"PostScript","sid",null],[[12,22],"BaseFontName","sid",null],[[12,23],"BaseFontBlend","delta",null],[[12,31],"CIDFontVersion","num",0],[[12,32],"CIDFontRevision","num",0],[[12,33],"CIDFontType","num",0],[[12,34],"CIDCount","num",8720],[[12,35],"UIDBase","num",null],[[12,37],"FDSelect","offset",null],[[12,36],"FDArray","offset",null],[[12,38],"FontName","sid",null]];class m extends f{static get tables(){return(0,i.shadow)(this,"tables",this.createTables(g))}constructor(t){super(m.tables,t),this.privateDict=null}}e.CFFTopDict=m;const y=[[6,"BlueValues","delta",null],[7,"OtherBlues","delta",null],[8,"FamilyBlues","delta",null],[9,"FamilyOtherBlues","delta",null],[[12,9],"BlueScale","num",.039625],[[12,10],"BlueShift","num",7],[[12,11],"BlueFuzz","num",1],[10,"StdHW","num",null],[11,"StdVW","num",null],[[12,12],"StemSnapH","delta",null],[[12,13],"StemSnapV","delta",null],[[12,14],"ForceBold","num",0],[[12,17],"LanguageGroup","num",0],[[12,18],"ExpansionFactor","num",.06],[[12,19],"initialRandomSeed","num",0],[20,"defaultWidthX","num",0],[21,"nominalWidthX","num",0],[19,"Subrs","offset",null]];class v extends f{static get tables(){return(0,i.shadow)(this,"tables",this.createTables(y))}constructor(t){super(v.tables,t),this.subrsIndex=null}}e.CFFPrivateDict=v;const b={ISO_ADOBE:0,EXPERT:1,EXPERT_SUBSET:2};class w{constructor(t,e,n,i){this.predefined=t,this.format=e,this.charset=n,this.raw=i}}e.CFFCharset=w;class x{constructor(t,e,n,i){this.predefined=t,this.format=e,this.encoding=n,this.raw=i}}class _{constructor(t,e){this.format=t,this.fdSelect=e}getFDIndex(t){return t<0||t>=this.fdSelect.length?-1:this.fdSelect[t]}}e.CFFFDSelect=_;class S{constructor(){this.offsets=Object.create(null)}isTracking(t){return t in this.offsets}track(t,e){if(t in this.offsets)throw new i.FormatError(`Already tracking location of ${t}`);this.offsets[t]=e}offset(t){for(const e in this.offsets)this.offsets[e]+=t}setEntryLocation(t,e,n){if(!(t in this.offsets))throw new i.FormatError(`Not tracking location of ${t}`);const r=n.data,o=this.offsets[t];for(let t=0,n=e.length;t<n;++t){const n=5*t+o,s=n+1,a=n+2,l=n+3,c=n+4;if(29!==r[n]||0!==r[s]||0!==r[a]||0!==r[l]||0!==r[c])throw new i.FormatError("writing to an offset that is not empty");const h=e[t];r[n]=29,r[s]=h>>24&255,r[a]=h>>16&255,r[l]=h>>8&255,r[c]=255&h}}}class C{constructor(t){this.cff=t}compile(){const t=this.cff,e={data:[],length:0,add(t){try{this.data.push(...t)}catch{this.data=this.data.concat(t)}this.length=this.data.length}},n=this.compileHeader(t.header);e.add(n);const r=this.compileNameIndex(t.names);if(e.add(r),t.isCIDFont&&t.topDict.hasName("FontMatrix")){const e=t.topDict.getByName("FontMatrix");t.topDict.removeByName("FontMatrix");for(const n of t.fdArray){let t=e.slice(0);n.hasName("FontMatrix")&&(t=i.Util.transform(t,n.getByName("FontMatrix"))),n.setByName("FontMatrix",t)}}const o=t.topDict.getByName("XUID");o?.length>16&&t.topDict.removeByName("XUID"),t.topDict.setByName("charset",0);let s=this.compileTopDicts([t.topDict],e.length,t.isCIDFont);e.add(s.output);const a=s.trackers[0],l=this.compileStringIndex(t.strings.strings);e.add(l);const c=this.compileIndex(t.globalSubrIndex);if(e.add(c),t.encoding&&t.topDict.hasName("Encoding"))if(t.encoding.predefined)a.setEntryLocation("Encoding",[t.encoding.format],e);else{const n=this.compileEncoding(t.encoding);a.setEntryLocation("Encoding",[e.length],e),e.add(n)}const h=this.compileCharset(t.charset,t.charStrings.count,t.strings,t.isCIDFont);a.setEntryLocation("charset",[e.length],e),e.add(h);const u=this.compileCharStrings(t.charStrings);if(a.setEntryLocation("CharStrings",[e.length],e),e.add(u),t.isCIDFont){a.setEntryLocation("FDSelect",[e.length],e);const n=this.compileFDSelect(t.fdSelect);e.add(n),s=this.compileTopDicts(t.fdArray,e.length,!0),a.setEntryLocation("FDArray",[e.length],e),e.add(s.output);const i=s.trackers;this.compilePrivateDicts(t.fdArray,i,e)}return this.compilePrivateDicts([t.topDict],[a],e),e.add([0]),e.data}encodeNumber(t){return Number.isInteger(t)?this.encodeInteger(t):this.encodeFloat(t)}static get EncodeFloatRegExp(){return(0,i.shadow)(this,"EncodeFloatRegExp",/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/)}encodeFloat(t){let e=t.toString();const n=C.EncodeFloatRegExp.exec(e);if(n){const i=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));e=(Math.round(t*i)/i).toString()}let i,r,o="";for(i=0,r=e.length;i<r;++i){const t=e[i];o+="e"===t?"-"===e[++i]?"c":"b":"."===t?"a":"-"===t?"e":t}o+=1&o.length?"f":"ff";const s=[30];for(i=0,r=o.length;i<r;i+=2)s.push(parseInt(o.substring(i,i+2),16));return s}encodeInteger(t){let e;return e=t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?[247+((t-=108)>>8),255&t]:t>=-1131&&t<=-108?[251+((t=-t-108)>>8),255&t]:t>=-32768&&t<=32767?[28,t>>8&255,255&t]:[29,t>>24&255,t>>16&255,t>>8&255,255&t],e}compileHeader(t){return[t.major,t.minor,4,t.offSize]}compileNameIndex(t){const e=new p;for(const n of t){const t=Math.min(n.length,127);let r=new Array(t);for(let e=0;e<t;e++){let t=n[e];(t<"!"||t>"~"||"["===t||"]"===t||"("===t||")"===t||"{"===t||"}"===t||"<"===t||">"===t||"/"===t||"%"===t)&&(t="_"),r[e]=t}r=r.join(""),""===r&&(r="Bad_Font_Name"),e.add((0,i.stringToBytes)(r))}return this.compileIndex(e)}compileTopDicts(t,e,n){const i=[];let r=new p;for(const o of t){n&&(o.removeByName("CIDFontVersion"),o.removeByName("CIDFontRevision"),o.removeByName("CIDFontType"),o.removeByName("CIDCount"),o.removeByName("UIDBase"));const t=new S,s=this.compileDict(o,t);i.push(t),r.add(s),t.offset(e)}return r=this.compileIndex(r,i),{trackers:i,output:r}}compilePrivateDicts(t,e,n){for(let r=0,o=t.length;r<o;++r){const o=t[r],s=o.privateDict;if(!s||!o.hasName("Private"))throw new i.FormatError("There must be a private dictionary.");const a=new S,l=this.compileDict(s,a);let c=n.length;if(a.offset(c),l.length||(c=0),e[r].setEntryLocation("Private",[l.length,c],n),n.add(l),s.subrsIndex&&s.hasName("Subrs")){const t=this.compileIndex(s.subrsIndex);a.setEntryLocation("Subrs",[l.length],n),n.add(t)}}}compileDict(t,e){const n=[];for(const r of t.order){if(!(r in t.values))continue;let o=t.values[r],s=t.types[r];if(Array.isArray(s)||(s=[s]),Array.isArray(o)||(o=[o]),0!==o.length){for(let a=0,l=s.length;a<l;++a){const l=s[a],c=o[a];switch(l){case"num":case"sid":n.push(...this.encodeNumber(c));break;case"offset":const s=t.keyToNameMap[r];e.isTracking(s)||e.track(s,n.length),n.push(29,0,0,0,0);break;case"array":case"delta":n.push(...this.encodeNumber(c));for(let t=1,e=o.length;t<e;++t)n.push(...this.encodeNumber(o[t]));break;default:throw new i.FormatError(`Unknown data type of ${l}`)}}n.push(...t.opcodes[r])}}return n}compileStringIndex(t){const e=new p;for(const n of t)e.add((0,i.stringToBytes)(n));return this.compileIndex(e)}compileCharStrings(t){const e=new p;for(let n=0;n<t.count;n++){const i=t.get(n);0!==i.length?e.add(i):e.add(new Uint8Array([139,14]))}return this.compileIndex(e)}compileCharset(t,e,n,r){let o;const s=e-1;if(r)o=new Uint8Array([2,0,0,s>>8&255,255&s]);else{o=new Uint8Array(1+2*s),o[0]=0;let e=0;const r=t.charset.length;let a=!1;for(let s=1;s<o.length;s+=2){let l=0;if(e<r){const r=t.charset[e++];l=n.getSID(r),-1===l&&(l=0,a||(a=!0,(0,i.warn)(`Couldn't find ${r} in CFF strings`)))}o[s]=l>>8&255,o[s+1]=255&l}}return this.compileTypedArray(o)}compileEncoding(t){return this.compileTypedArray(t.raw)}compileFDSelect(t){const e=t.format;let n,i;switch(e){case 0:for(n=new Uint8Array(1+t.fdSelect.length),n[0]=e,i=0;i<t.fdSelect.length;i++)n[i+1]=t.fdSelect[i];break;case 3:const r=0;let o=t.fdSelect[0];const s=[e,0,0,r>>8&255,255&r,o];for(i=1;i<t.fdSelect.length;i++){const e=t.fdSelect[i];e!==o&&(s.push(i>>8&255,255&i,e),o=e)}const a=(s.length-3)/3;s[1]=a>>8&255,s[2]=255&a,s.push(i>>8&255,255&i),n=new Uint8Array(s)}return this.compileTypedArray(n)}compileTypedArray(t){return Array.from(t)}compileIndex(t,e=[]){const n=t.objects,i=n.length;if(0===i)return[0,0];const r=[i>>8&255,255&i];let o,s,a=1;for(o=0;o<i;++o)a+=n[o].length;s=a<256?1:a<65536?2:a<16777216?3:4,r.push(s);let l=1;for(o=0;o<i+1;o++)1===s?r.push(255&l):2===s?r.push(l>>8&255,255&l):3===s?r.push(l>>16&255,l>>8&255,255&l):r.push(l>>>24&255,l>>16&255,l>>8&255,255&l),n[o]&&(l+=n[o].length);for(o=0;o<i;o++)e[o]&&e[o].offset(r.length),r.push(...n[o]);return r}}e.CFFCompiler=C},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ISOAdobeCharset=e.ExpertSubsetCharset=e.ExpertCharset=void 0,e.ISOAdobeCharset=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron"],e.ExpertCharset=[".notdef","space","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],e.ExpertSubsetCharset=[".notdef","space","dollaroldstyle","dollarsuperior","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","fi","fl","ffi","ffl","parenleftinferior","parenrightinferior","hyphensuperior","colonmonetary","onefitted","rupiah","centoldstyle","figuredash","hypheninferior","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior"]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ZapfDingbatsEncoding=e.WinAnsiEncoding=e.SymbolSetEncoding=e.StandardEncoding=e.MacRomanEncoding=e.ExpertEncoding=void 0,e.getEncoding=function(t){switch(t){case"WinAnsiEncoding":return s;case"StandardEncoding":return o;case"MacRomanEncoding":return r;case"SymbolSetEncoding":return a;case"ZapfDingbatsEncoding":return l;case"ExpertEncoding":return n;case"MacExpertEncoding":return i;default:return null}};const n=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];e.ExpertEncoding=n;const i=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","centoldstyle","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","","threequartersemdash","","questionsmall","","","","","Ethsmall","","","onequarter","onehalf","threequarters","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","","","","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hypheninferior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","asuperior","centsuperior","","","","","Aacutesmall","Agravesmall","Acircumflexsmall","Adieresissmall","Atildesmall","Aringsmall","Ccedillasmall","Eacutesmall","Egravesmall","Ecircumflexsmall","Edieresissmall","Iacutesmall","Igravesmall","Icircumflexsmall","Idieresissmall","Ntildesmall","Oacutesmall","Ogravesmall","Ocircumflexsmall","Odieresissmall","Otildesmall","Uacutesmall","Ugravesmall","Ucircumflexsmall","Udieresissmall","","eightsuperior","fourinferior","threeinferior","sixinferior","eightinferior","seveninferior","Scaronsmall","","centinferior","twoinferior","","Dieresissmall","","Caronsmall","osuperior","fiveinferior","","commainferior","periodinferior","Yacutesmall","","dollarinferior","","","Thornsmall","","nineinferior","zeroinferior","Zcaronsmall","AEsmall","Oslashsmall","questiondownsmall","oneinferior","Lslashsmall","","","","","","","Cedillasmall","","","","","","OEsmall","figuredash","hyphensuperior","","","","","exclamdownsmall","","Ydieresissmall","","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","ninesuperior","zerosuperior","","esuperior","rsuperior","tsuperior","","","isuperior","ssuperior","dsuperior","","","","","","lsuperior","Ogoneksmall","Brevesmall","Macronsmall","bsuperior","nsuperior","msuperior","commasuperior","periodsuperior","Dotaccentsmall","Ringsmall","","","",""],r=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","space","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron"];e.MacRomanEncoding=r;const o=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls","","","",""];e.StandardEncoding=o;const s=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","bullet","Euro","bullet","quotesinglbase","florin","quotedblbase","ellipsis","dagger","daggerdbl","circumflex","perthousand","Scaron","guilsinglleft","OE","bullet","Zcaron","bullet","bullet","quoteleft","quoteright","quotedblleft","quotedblright","bullet","endash","emdash","tilde","trademark","scaron","guilsinglright","oe","bullet","zcaron","Ydieresis","space","exclamdown","cent","sterling","currency","yen","brokenbar","section","dieresis","copyright","ordfeminine","guillemotleft","logicalnot","hyphen","registered","macron","degree","plusminus","twosuperior","threesuperior","acute","mu","paragraph","periodcentered","cedilla","onesuperior","ordmasculine","guillemotright","onequarter","onehalf","threequarters","questiondown","Agrave","Aacute","Acircumflex","Atilde","Adieresis","Aring","AE","Ccedilla","Egrave","Eacute","Ecircumflex","Edieresis","Igrave","Iacute","Icircumflex","Idieresis","Eth","Ntilde","Ograve","Oacute","Ocircumflex","Otilde","Odieresis","multiply","Oslash","Ugrave","Uacute","Ucircumflex","Udieresis","Yacute","Thorn","germandbls","agrave","aacute","acircumflex","atilde","adieresis","aring","ae","ccedilla","egrave","eacute","ecircumflex","edieresis","igrave","iacute","icircumflex","idieresis","eth","ntilde","ograve","oacute","ocircumflex","otilde","odieresis","divide","oslash","ugrave","uacute","ucircumflex","udieresis","yacute","thorn","ydieresis"];e.WinAnsiEncoding=s;const a=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","universal","numbersign","existential","percent","ampersand","suchthat","parenleft","parenright","asteriskmath","plus","comma","minus","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","congruent","Alpha","Beta","Chi","Delta","Epsilon","Phi","Gamma","Eta","Iota","theta1","Kappa","Lambda","Mu","Nu","Omicron","Pi","Theta","Rho","Sigma","Tau","Upsilon","sigma1","Omega","Xi","Psi","Zeta","bracketleft","therefore","bracketright","perpendicular","underscore","radicalex","alpha","beta","chi","delta","epsilon","phi","gamma","eta","iota","phi1","kappa","lambda","mu","nu","omicron","pi","theta","rho","sigma","tau","upsilon","omega1","omega","xi","psi","zeta","braceleft","bar","braceright","similar","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","Euro","Upsilon1","minute","lessequal","fraction","infinity","florin","club","diamond","heart","spade","arrowboth","arrowleft","arrowup","arrowright","arrowdown","degree","plusminus","second","greaterequal","multiply","proportional","partialdiff","bullet","divide","notequal","equivalence","approxequal","ellipsis","arrowvertex","arrowhorizex","carriagereturn","aleph","Ifraktur","Rfraktur","weierstrass","circlemultiply","circleplus","emptyset","intersection","union","propersuperset","reflexsuperset","notsubset","propersubset","reflexsubset","element","notelement","angle","gradient","registerserif","copyrightserif","trademarkserif","product","radical","dotmath","logicalnot","logicaland","logicalor","arrowdblboth","arrowdblleft","arrowdblup","arrowdblright","arrowdbldown","lozenge","angleleft","registersans","copyrightsans","trademarksans","summation","parenlefttp","parenleftex","parenleftbt","bracketlefttp","bracketleftex","bracketleftbt","bracelefttp","braceleftmid","braceleftbt","braceex","","angleright","integral","integraltp","integralex","integralbt","parenrighttp","parenrightex","parenrightbt","bracketrighttp","bracketrightex","bracketrightbt","bracerighttp","bracerightmid","bracerightbt",""];e.SymbolSetEncoding=a;const l=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","a1","a2","a202","a3","a4","a5","a119","a118","a117","a11","a12","a13","a14","a15","a16","a105","a17","a18","a19","a20","a21","a22","a23","a24","a25","a26","a27","a28","a6","a7","a8","a9","a10","a29","a30","a31","a32","a33","a34","a35","a36","a37","a38","a39","a40","a41","a42","a43","a44","a45","a46","a47","a48","a49","a50","a51","a52","a53","a54","a55","a56","a57","a58","a59","a60","a61","a62","a63","a64","a65","a66","a67","a68","a69","a70","a71","a72","a73","a74","a203","a75","a204","a76","a77","a78","a79","a81","a82","a83","a84","a97","a98","a99","a100","","a89","a90","a93","a94","a91","a92","a205","a85","a206","a86","a87","a88","a95","a96","","","","","","","","","","","","","","","","","","","","a101","a102","a103","a104","a106","a107","a108","a112","a111","a110","a109","a120","a121","a122","a123","a124","a125","a126","a127","a128","a129","a130","a131","a132","a133","a134","a135","a136","a137","a138","a139","a140","a141","a142","a143","a144","a145","a146","a147","a148","a149","a150","a151","a152","a153","a154","a155","a156","a157","a158","a159","a160","a161","a163","a164","a196","a165","a192","a166","a167","a168","a169","a170","a171","a172","a173","a162","a174","a175","a176","a177","a178","a179","a193","a180","a199","a181","a200","a182","","a201","a183","a184","a197","a185","a194","a198","a186","a195","a187","a188","a189","a190","a191",""];e.ZapfDingbatsEncoding=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SEAC_ANALYSIS_ENABLED=e.MacStandardGlyphOrdering=e.FontFlags=void 0,e.normalizeFontName=function(t){return t.replaceAll(/[,_]/g,"-").replaceAll(/\s/g,"")},e.recoverGlyphName=l,e.type1FontGlyphMapping=function(t,e,n){const o=Object.create(null);let s,c,h;const u=!!(t.flags&a.Symbolic);if(t.isInternalFont)for(h=e,c=0;c<h.length;c++)s=n.indexOf(h[c]),o[c]=s>=0?s:0;else if(t.baseEncodingName)for(h=(0,i.getEncoding)(t.baseEncodingName),c=0;c<h.length;c++)s=n.indexOf(h[c]),o[c]=s>=0?s:0;else if(u)for(c in e)o[c]=e[c];else for(h=i.StandardEncoding,c=0;c<h.length;c++)s=n.indexOf(h[c]),o[c]=s>=0?s:0;const d=t.differences;let p;if(d)for(c in d){const t=d[c];if(s=n.indexOf(t),-1===s){p||(p=(0,r.getGlyphsUnicode)());const e=l(t,p);e!==t&&(s=n.indexOf(e))}o[c]=s>=0?s:0}return o};var i=n(37),r=n(39),o=n(40),s=n(2);e.SEAC_ANALYSIS_ENABLED=!0;const a={FixedPitch:1,Serif:2,Symbolic:4,Script:8,Nonsymbolic:32,Italic:64,AllCap:65536,SmallCap:131072,ForceBold:262144};function l(t,e){if(void 0!==e[t])return t;const n=(0,o.getUnicodeForGlyph)(t,e);if(-1!==n)for(const t in e)if(e[t]===n)return t;return(0,s.info)("Unable to recover a standard glyph name for: "+t),t}e.FontFlags=a,e.MacStandardGlyphOrdering=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"]},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getGlyphsUnicode=e.getDingbatsGlyphsUnicode=void 0;var i=n(3);const r=(0,i.getLookupTableFactory)((function(t){t.A=65,t.AE=198,t.AEacute=508,t.AEmacron=482,t.AEsmall=63462,t.Aacute=193,t.Aacutesmall=63457,t.Abreve=258,t.Abreveacute=7854,t.Abrevecyrillic=1232,t.Abrevedotbelow=7862,t.Abrevegrave=7856,t.Abrevehookabove=7858,t.Abrevetilde=7860,t.Acaron=461,t.Acircle=9398,t.Acircumflex=194,t.Acircumflexacute=7844,t.Acircumflexdotbelow=7852,t.Acircumflexgrave=7846,t.Acircumflexhookabove=7848,t.Acircumflexsmall=63458,t.Acircumflextilde=7850,t.Acute=63177,t.Acutesmall=63412,t.Acyrillic=1040,t.Adblgrave=512,t.Adieresis=196,t.Adieresiscyrillic=1234,t.Adieresismacron=478,t.Adieresissmall=63460,t.Adotbelow=7840,t.Adotmacron=480,t.Agrave=192,t.Agravesmall=63456,t.Ahookabove=7842,t.Aiecyrillic=1236,t.Ainvertedbreve=514,t.Alpha=913,t.Alphatonos=902,t.Amacron=256,t.Amonospace=65313,t.Aogonek=260,t.Aring=197,t.Aringacute=506,t.Aringbelow=7680,t.Aringsmall=63461,t.Asmall=63329,t.Atilde=195,t.Atildesmall=63459,t.Aybarmenian=1329,t.B=66,t.Bcircle=9399,t.Bdotaccent=7682,t.Bdotbelow=7684,t.Becyrillic=1041,t.Benarmenian=1330,t.Beta=914,t.Bhook=385,t.Blinebelow=7686,t.Bmonospace=65314,t.Brevesmall=63220,t.Bsmall=63330,t.Btopbar=386,t.C=67,t.Caarmenian=1342,t.Cacute=262,t.Caron=63178,t.Caronsmall=63221,t.Ccaron=268,t.Ccedilla=199,t.Ccedillaacute=7688,t.Ccedillasmall=63463,t.Ccircle=9400,t.Ccircumflex=264,t.Cdot=266,t.Cdotaccent=266,t.Cedillasmall=63416,t.Chaarmenian=1353,t.Cheabkhasiancyrillic=1212,t.Checyrillic=1063,t.Chedescenderabkhasiancyrillic=1214,t.Chedescendercyrillic=1206,t.Chedieresiscyrillic=1268,t.Cheharmenian=1347,t.Chekhakassiancyrillic=1227,t.Cheverticalstrokecyrillic=1208,t.Chi=935,t.Chook=391,t.Circumflexsmall=63222,t.Cmonospace=65315,t.Coarmenian=1361,t.Csmall=63331,t.D=68,t.DZ=497,t.DZcaron=452,t.Daarmenian=1332,t.Dafrican=393,t.Dcaron=270,t.Dcedilla=7696,t.Dcircle=9401,t.Dcircumflexbelow=7698,t.Dcroat=272,t.Ddotaccent=7690,t.Ddotbelow=7692,t.Decyrillic=1044,t.Deicoptic=1006,t.Delta=8710,t.Deltagreek=916,t.Dhook=394,t.Dieresis=63179,t.DieresisAcute=63180,t.DieresisGrave=63181,t.Dieresissmall=63400,t.Digammagreek=988,t.Djecyrillic=1026,t.Dlinebelow=7694,t.Dmonospace=65316,t.Dotaccentsmall=63223,t.Dslash=272,t.Dsmall=63332,t.Dtopbar=395,t.Dz=498,t.Dzcaron=453,t.Dzeabkhasiancyrillic=1248,t.Dzecyrillic=1029,t.Dzhecyrillic=1039,t.E=69,t.Eacute=201,t.Eacutesmall=63465,t.Ebreve=276,t.Ecaron=282,t.Ecedillabreve=7708,t.Echarmenian=1333,t.Ecircle=9402,t.Ecircumflex=202,t.Ecircumflexacute=7870,t.Ecircumflexbelow=7704,t.Ecircumflexdotbelow=7878,t.Ecircumflexgrave=7872,t.Ecircumflexhookabove=7874,t.Ecircumflexsmall=63466,t.Ecircumflextilde=7876,t.Ecyrillic=1028,t.Edblgrave=516,t.Edieresis=203,t.Edieresissmall=63467,t.Edot=278,t.Edotaccent=278,t.Edotbelow=7864,t.Efcyrillic=1060,t.Egrave=200,t.Egravesmall=63464,t.Eharmenian=1335,t.Ehookabove=7866,t.Eightroman=8551,t.Einvertedbreve=518,t.Eiotifiedcyrillic=1124,t.Elcyrillic=1051,t.Elevenroman=8554,t.Emacron=274,t.Emacronacute=7702,t.Emacrongrave=7700,t.Emcyrillic=1052,t.Emonospace=65317,t.Encyrillic=1053,t.Endescendercyrillic=1186,t.Eng=330,t.Enghecyrillic=1188,t.Enhookcyrillic=1223,t.Eogonek=280,t.Eopen=400,t.Epsilon=917,t.Epsilontonos=904,t.Ercyrillic=1056,t.Ereversed=398,t.Ereversedcyrillic=1069,t.Escyrillic=1057,t.Esdescendercyrillic=1194,t.Esh=425,t.Esmall=63333,t.Eta=919,t.Etarmenian=1336,t.Etatonos=905,t.Eth=208,t.Ethsmall=63472,t.Etilde=7868,t.Etildebelow=7706,t.Euro=8364,t.Ezh=439,t.Ezhcaron=494,t.Ezhreversed=440,t.F=70,t.Fcircle=9403,t.Fdotaccent=7710,t.Feharmenian=1366,t.Feicoptic=996,t.Fhook=401,t.Fitacyrillic=1138,t.Fiveroman=8548,t.Fmonospace=65318,t.Fourroman=8547,t.Fsmall=63334,t.G=71,t.GBsquare=13191,t.Gacute=500,t.Gamma=915,t.Gammaafrican=404,t.Gangiacoptic=1002,t.Gbreve=286,t.Gcaron=486,t.Gcedilla=290,t.Gcircle=9404,t.Gcircumflex=284,t.Gcommaaccent=290,t.Gdot=288,t.Gdotaccent=288,t.Gecyrillic=1043,t.Ghadarmenian=1346,t.Ghemiddlehookcyrillic=1172,t.Ghestrokecyrillic=1170,t.Gheupturncyrillic=1168,t.Ghook=403,t.Gimarmenian=1331,t.Gjecyrillic=1027,t.Gmacron=7712,t.Gmonospace=65319,t.Grave=63182,t.Gravesmall=63328,t.Gsmall=63335,t.Gsmallhook=667,t.Gstroke=484,t.H=72,t.H18533=9679,t.H18543=9642,t.H18551=9643,t.H22073=9633,t.HPsquare=13259,t.Haabkhasiancyrillic=1192,t.Hadescendercyrillic=1202,t.Hardsigncyrillic=1066,t.Hbar=294,t.Hbrevebelow=7722,t.Hcedilla=7720,t.Hcircle=9405,t.Hcircumflex=292,t.Hdieresis=7718,t.Hdotaccent=7714,t.Hdotbelow=7716,t.Hmonospace=65320,t.Hoarmenian=1344,t.Horicoptic=1e3,t.Hsmall=63336,t.Hungarumlaut=63183,t.Hungarumlautsmall=63224,t.Hzsquare=13200,t.I=73,t.IAcyrillic=1071,t.IJ=306,t.IUcyrillic=1070,t.Iacute=205,t.Iacutesmall=63469,t.Ibreve=300,t.Icaron=463,t.Icircle=9406,t.Icircumflex=206,t.Icircumflexsmall=63470,t.Icyrillic=1030,t.Idblgrave=520,t.Idieresis=207,t.Idieresisacute=7726,t.Idieresiscyrillic=1252,t.Idieresissmall=63471,t.Idot=304,t.Idotaccent=304,t.Idotbelow=7882,t.Iebrevecyrillic=1238,t.Iecyrillic=1045,t.Ifraktur=8465,t.Igrave=204,t.Igravesmall=63468,t.Ihookabove=7880,t.Iicyrillic=1048,t.Iinvertedbreve=522,t.Iishortcyrillic=1049,t.Imacron=298,t.Imacroncyrillic=1250,t.Imonospace=65321,t.Iniarmenian=1339,t.Iocyrillic=1025,t.Iogonek=302,t.Iota=921,t.Iotaafrican=406,t.Iotadieresis=938,t.Iotatonos=906,t.Ismall=63337,t.Istroke=407,t.Itilde=296,t.Itildebelow=7724,t.Izhitsacyrillic=1140,t.Izhitsadblgravecyrillic=1142,t.J=74,t.Jaarmenian=1345,t.Jcircle=9407,t.Jcircumflex=308,t.Jecyrillic=1032,t.Jheharmenian=1355,t.Jmonospace=65322,t.Jsmall=63338,t.K=75,t.KBsquare=13189,t.KKsquare=13261,t.Kabashkircyrillic=1184,t.Kacute=7728,t.Kacyrillic=1050,t.Kadescendercyrillic=1178,t.Kahookcyrillic=1219,t.Kappa=922,t.Kastrokecyrillic=1182,t.Kaverticalstrokecyrillic=1180,t.Kcaron=488,t.Kcedilla=310,t.Kcircle=9408,t.Kcommaaccent=310,t.Kdotbelow=7730,t.Keharmenian=1364,t.Kenarmenian=1343,t.Khacyrillic=1061,t.Kheicoptic=998,t.Khook=408,t.Kjecyrillic=1036,t.Klinebelow=7732,t.Kmonospace=65323,t.Koppacyrillic=1152,t.Koppagreek=990,t.Ksicyrillic=1134,t.Ksmall=63339,t.L=76,t.LJ=455,t.LL=63167,t.Lacute=313,t.Lambda=923,t.Lcaron=317,t.Lcedilla=315,t.Lcircle=9409,t.Lcircumflexbelow=7740,t.Lcommaaccent=315,t.Ldot=319,t.Ldotaccent=319,t.Ldotbelow=7734,t.Ldotbelowmacron=7736,t.Liwnarmenian=1340,t.Lj=456,t.Ljecyrillic=1033,t.Llinebelow=7738,t.Lmonospace=65324,t.Lslash=321,t.Lslashsmall=63225,t.Lsmall=63340,t.M=77,t.MBsquare=13190,t.Macron=63184,t.Macronsmall=63407,t.Macute=7742,t.Mcircle=9410,t.Mdotaccent=7744,t.Mdotbelow=7746,t.Menarmenian=1348,t.Mmonospace=65325,t.Msmall=63341,t.Mturned=412,t.Mu=924,t.N=78,t.NJ=458,t.Nacute=323,t.Ncaron=327,t.Ncedilla=325,t.Ncircle=9411,t.Ncircumflexbelow=7754,t.Ncommaaccent=325,t.Ndotaccent=7748,t.Ndotbelow=7750,t.Nhookleft=413,t.Nineroman=8552,t.Nj=459,t.Njecyrillic=1034,t.Nlinebelow=7752,t.Nmonospace=65326,t.Nowarmenian=1350,t.Nsmall=63342,t.Ntilde=209,t.Ntildesmall=63473,t.Nu=925,t.O=79,t.OE=338,t.OEsmall=63226,t.Oacute=211,t.Oacutesmall=63475,t.Obarredcyrillic=1256,t.Obarreddieresiscyrillic=1258,t.Obreve=334,t.Ocaron=465,t.Ocenteredtilde=415,t.Ocircle=9412,t.Ocircumflex=212,t.Ocircumflexacute=7888,t.Ocircumflexdotbelow=7896,t.Ocircumflexgrave=7890,t.Ocircumflexhookabove=7892,t.Ocircumflexsmall=63476,t.Ocircumflextilde=7894,t.Ocyrillic=1054,t.Odblacute=336,t.Odblgrave=524,t.Odieresis=214,t.Odieresiscyrillic=1254,t.Odieresissmall=63478,t.Odotbelow=7884,t.Ogoneksmall=63227,t.Ograve=210,t.Ogravesmall=63474,t.Oharmenian=1365,t.Ohm=8486,t.Ohookabove=7886,t.Ohorn=416,t.Ohornacute=7898,t.Ohorndotbelow=7906,t.Ohorngrave=7900,t.Ohornhookabove=7902,t.Ohorntilde=7904,t.Ohungarumlaut=336,t.Oi=418,t.Oinvertedbreve=526,t.Omacron=332,t.Omacronacute=7762,t.Omacrongrave=7760,t.Omega=8486,t.Omegacyrillic=1120,t.Omegagreek=937,t.Omegaroundcyrillic=1146,t.Omegatitlocyrillic=1148,t.Omegatonos=911,t.Omicron=927,t.Omicrontonos=908,t.Omonospace=65327,t.Oneroman=8544,t.Oogonek=490,t.Oogonekmacron=492,t.Oopen=390,t.Oslash=216,t.Oslashacute=510,t.Oslashsmall=63480,t.Osmall=63343,t.Ostrokeacute=510,t.Otcyrillic=1150,t.Otilde=213,t.Otildeacute=7756,t.Otildedieresis=7758,t.Otildesmall=63477,t.P=80,t.Pacute=7764,t.Pcircle=9413,t.Pdotaccent=7766,t.Pecyrillic=1055,t.Peharmenian=1354,t.Pemiddlehookcyrillic=1190,t.Phi=934,t.Phook=420,t.Pi=928,t.Piwrarmenian=1363,t.Pmonospace=65328,t.Psi=936,t.Psicyrillic=1136,t.Psmall=63344,t.Q=81,t.Qcircle=9414,t.Qmonospace=65329,t.Qsmall=63345,t.R=82,t.Raarmenian=1356,t.Racute=340,t.Rcaron=344,t.Rcedilla=342,t.Rcircle=9415,t.Rcommaaccent=342,t.Rdblgrave=528,t.Rdotaccent=7768,t.Rdotbelow=7770,t.Rdotbelowmacron=7772,t.Reharmenian=1360,t.Rfraktur=8476,t.Rho=929,t.Ringsmall=63228,t.Rinvertedbreve=530,t.Rlinebelow=7774,t.Rmonospace=65330,t.Rsmall=63346,t.Rsmallinverted=641,t.Rsmallinvertedsuperior=694,t.S=83,t.SF010000=9484,t.SF020000=9492,t.SF030000=9488,t.SF040000=9496,t.SF050000=9532,t.SF060000=9516,t.SF070000=9524,t.SF080000=9500,t.SF090000=9508,t.SF100000=9472,t.SF110000=9474,t.SF190000=9569,t.SF200000=9570,t.SF210000=9558,t.SF220000=9557,t.SF230000=9571,t.SF240000=9553,t.SF250000=9559,t.SF260000=9565,t.SF270000=9564,t.SF280000=9563,t.SF360000=9566,t.SF370000=9567,t.SF380000=9562,t.SF390000=9556,t.SF400000=9577,t.SF410000=9574,t.SF420000=9568,t.SF430000=9552,t.SF440000=9580,t.SF450000=9575,t.SF460000=9576,t.SF470000=9572,t.SF480000=9573,t.SF490000=9561,t.SF500000=9560,t.SF510000=9554,t.SF520000=9555,t.SF530000=9579,t.SF540000=9578,t.Sacute=346,t.Sacutedotaccent=7780,t.Sampigreek=992,t.Scaron=352,t.Scarondotaccent=7782,t.Scaronsmall=63229,t.Scedilla=350,t.Schwa=399,t.Schwacyrillic=1240,t.Schwadieresiscyrillic=1242,t.Scircle=9416,t.Scircumflex=348,t.Scommaaccent=536,t.Sdotaccent=7776,t.Sdotbelow=7778,t.Sdotbelowdotaccent=7784,t.Seharmenian=1357,t.Sevenroman=8550,t.Shaarmenian=1351,t.Shacyrillic=1064,t.Shchacyrillic=1065,t.Sheicoptic=994,t.Shhacyrillic=1210,t.Shimacoptic=1004,t.Sigma=931,t.Sixroman=8549,t.Smonospace=65331,t.Softsigncyrillic=1068,t.Ssmall=63347,t.Stigmagreek=986,t.T=84,t.Tau=932,t.Tbar=358,t.Tcaron=356,t.Tcedilla=354,t.Tcircle=9417,t.Tcircumflexbelow=7792,t.Tcommaaccent=354,t.Tdotaccent=7786,t.Tdotbelow=7788,t.Tecyrillic=1058,t.Tedescendercyrillic=1196,t.Tenroman=8553,t.Tetsecyrillic=1204,t.Theta=920,t.Thook=428,t.Thorn=222,t.Thornsmall=63486,t.Threeroman=8546,t.Tildesmall=63230,t.Tiwnarmenian=1359,t.Tlinebelow=7790,t.Tmonospace=65332,t.Toarmenian=1337,t.Tonefive=444,t.Tonesix=388,t.Tonetwo=423,t.Tretroflexhook=430,t.Tsecyrillic=1062,t.Tshecyrillic=1035,t.Tsmall=63348,t.Twelveroman=8555,t.Tworoman=8545,t.U=85,t.Uacute=218,t.Uacutesmall=63482,t.Ubreve=364,t.Ucaron=467,t.Ucircle=9418,t.Ucircumflex=219,t.Ucircumflexbelow=7798,t.Ucircumflexsmall=63483,t.Ucyrillic=1059,t.Udblacute=368,t.Udblgrave=532,t.Udieresis=220,t.Udieresisacute=471,t.Udieresisbelow=7794,t.Udieresiscaron=473,t.Udieresiscyrillic=1264,t.Udieresisgrave=475,t.Udieresismacron=469,t.Udieresissmall=63484,t.Udotbelow=7908,t.Ugrave=217,t.Ugravesmall=63481,t.Uhookabove=7910,t.Uhorn=431,t.Uhornacute=7912,t.Uhorndotbelow=7920,t.Uhorngrave=7914,t.Uhornhookabove=7916,t.Uhorntilde=7918,t.Uhungarumlaut=368,t.Uhungarumlautcyrillic=1266,t.Uinvertedbreve=534,t.Ukcyrillic=1144,t.Umacron=362,t.Umacroncyrillic=1262,t.Umacrondieresis=7802,t.Umonospace=65333,t.Uogonek=370,t.Upsilon=933,t.Upsilon1=978,t.Upsilonacutehooksymbolgreek=979,t.Upsilonafrican=433,t.Upsilondieresis=939,t.Upsilondieresishooksymbolgreek=980,t.Upsilonhooksymbol=978,t.Upsilontonos=910,t.Uring=366,t.Ushortcyrillic=1038,t.Usmall=63349,t.Ustraightcyrillic=1198,t.Ustraightstrokecyrillic=1200,t.Utilde=360,t.Utildeacute=7800,t.Utildebelow=7796,t.V=86,t.Vcircle=9419,t.Vdotbelow=7806,t.Vecyrillic=1042,t.Vewarmenian=1358,t.Vhook=434,t.Vmonospace=65334,t.Voarmenian=1352,t.Vsmall=63350,t.Vtilde=7804,t.W=87,t.Wacute=7810,t.Wcircle=9420,t.Wcircumflex=372,t.Wdieresis=7812,t.Wdotaccent=7814,t.Wdotbelow=7816,t.Wgrave=7808,t.Wmonospace=65335,t.Wsmall=63351,t.X=88,t.Xcircle=9421,t.Xdieresis=7820,t.Xdotaccent=7818,t.Xeharmenian=1341,t.Xi=926,t.Xmonospace=65336,t.Xsmall=63352,t.Y=89,t.Yacute=221,t.Yacutesmall=63485,t.Yatcyrillic=1122,t.Ycircle=9422,t.Ycircumflex=374,t.Ydieresis=376,t.Ydieresissmall=63487,t.Ydotaccent=7822,t.Ydotbelow=7924,t.Yericyrillic=1067,t.Yerudieresiscyrillic=1272,t.Ygrave=7922,t.Yhook=435,t.Yhookabove=7926,t.Yiarmenian=1349,t.Yicyrillic=1031,t.Yiwnarmenian=1362,t.Ymonospace=65337,t.Ysmall=63353,t.Ytilde=7928,t.Yusbigcyrillic=1130,t.Yusbigiotifiedcyrillic=1132,t.Yuslittlecyrillic=1126,t.Yuslittleiotifiedcyrillic=1128,t.Z=90,t.Zaarmenian=1334,t.Zacute=377,t.Zcaron=381,t.Zcaronsmall=63231,t.Zcircle=9423,t.Zcircumflex=7824,t.Zdot=379,t.Zdotaccent=379,t.Zdotbelow=7826,t.Zecyrillic=1047,t.Zedescendercyrillic=1176,t.Zedieresiscyrillic=1246,t.Zeta=918,t.Zhearmenian=1338,t.Zhebrevecyrillic=1217,t.Zhecyrillic=1046,t.Zhedescendercyrillic=1174,t.Zhedieresiscyrillic=1244,t.Zlinebelow=7828,t.Zmonospace=65338,t.Zsmall=63354,t.Zstroke=437,t.a=97,t.aabengali=2438,t.aacute=225,t.aadeva=2310,t.aagujarati=2694,t.aagurmukhi=2566,t.aamatragurmukhi=2622,t.aarusquare=13059,t.aavowelsignbengali=2494,t.aavowelsigndeva=2366,t.aavowelsigngujarati=2750,t.abbreviationmarkarmenian=1375,t.abbreviationsigndeva=2416,t.abengali=2437,t.abopomofo=12570,t.abreve=259,t.abreveacute=7855,t.abrevecyrillic=1233,t.abrevedotbelow=7863,t.abrevegrave=7857,t.abrevehookabove=7859,t.abrevetilde=7861,t.acaron=462,t.acircle=9424,t.acircumflex=226,t.acircumflexacute=7845,t.acircumflexdotbelow=7853,t.acircumflexgrave=7847,t.acircumflexhookabove=7849,t.acircumflextilde=7851,t.acute=180,t.acutebelowcmb=791,t.acutecmb=769,t.acutecomb=769,t.acutedeva=2388,t.acutelowmod=719,t.acutetonecmb=833,t.acyrillic=1072,t.adblgrave=513,t.addakgurmukhi=2673,t.adeva=2309,t.adieresis=228,t.adieresiscyrillic=1235,t.adieresismacron=479,t.adotbelow=7841,t.adotmacron=481,t.ae=230,t.aeacute=509,t.aekorean=12624,t.aemacron=483,t.afii00208=8213,t.afii08941=8356,t.afii10017=1040,t.afii10018=1041,t.afii10019=1042,t.afii10020=1043,t.afii10021=1044,t.afii10022=1045,t.afii10023=1025,t.afii10024=1046,t.afii10025=1047,t.afii10026=1048,t.afii10027=1049,t.afii10028=1050,t.afii10029=1051,t.afii10030=1052;t.afii10031=1053,t.afii10032=1054,t.afii10033=1055,t.afii10034=1056,t.afii10035=1057,t.afii10036=1058,t.afii10037=1059,t.afii10038=1060,t.afii10039=1061,t.afii10040=1062,t.afii10041=1063,t.afii10042=1064,t.afii10043=1065,t.afii10044=1066,t.afii10045=1067,t.afii10046=1068,t.afii10047=1069,t.afii10048=1070,t.afii10049=1071,t.afii10050=1168,t.afii10051=1026,t.afii10052=1027,t.afii10053=1028,t.afii10054=1029,t.afii10055=1030,t.afii10056=1031,t.afii10057=1032,t.afii10058=1033,t.afii10059=1034,t.afii10060=1035,t.afii10061=1036,t.afii10062=1038,t.afii10063=63172,t.afii10064=63173,t.afii10065=1072,t.afii10066=1073,t.afii10067=1074,t.afii10068=1075,t.afii10069=1076,t.afii10070=1077,t.afii10071=1105,t.afii10072=1078,t.afii10073=1079,t.afii10074=1080,t.afii10075=1081,t.afii10076=1082,t.afii10077=1083,t.afii10078=1084,t.afii10079=1085,t.afii10080=1086,t.afii10081=1087,t.afii10082=1088,t.afii10083=1089,t.afii10084=1090,t.afii10085=1091,t.afii10086=1092,t.afii10087=1093,t.afii10088=1094,t.afii10089=1095,t.afii10090=1096,t.afii10091=1097,t.afii10092=1098,t.afii10093=1099,t.afii10094=1100,t.afii10095=1101,t.afii10096=1102,t.afii10097=1103,t.afii10098=1169,t.afii10099=1106,t.afii10100=1107,t.afii10101=1108,t.afii10102=1109,t.afii10103=1110,t.afii10104=1111,t.afii10105=1112,t.afii10106=1113,t.afii10107=1114,t.afii10108=1115,t.afii10109=1116,t.afii10110=1118,t.afii10145=1039,t.afii10146=1122,t.afii10147=1138,t.afii10148=1140,t.afii10192=63174,t.afii10193=1119,t.afii10194=1123,t.afii10195=1139,t.afii10196=1141,t.afii10831=63175,t.afii10832=63176,t.afii10846=1241,t.afii299=8206,t.afii300=8207,t.afii301=8205,t.afii57381=1642,t.afii57388=1548,t.afii57392=1632,t.afii57393=1633,t.afii57394=1634,t.afii57395=1635,t.afii57396=1636,t.afii57397=1637,t.afii57398=1638,t.afii57399=1639,t.afii57400=1640,t.afii57401=1641,t.afii57403=1563,t.afii57407=1567,t.afii57409=1569,t.afii57410=1570,t.afii57411=1571,t.afii57412=1572,t.afii57413=1573,t.afii57414=1574,t.afii57415=1575,t.afii57416=1576,t.afii57417=1577,t.afii57418=1578,t.afii57419=1579,t.afii57420=1580,t.afii57421=1581,t.afii57422=1582,t.afii57423=1583,t.afii57424=1584,t.afii57425=1585,t.afii57426=1586,t.afii57427=1587,t.afii57428=1588,t.afii57429=1589,t.afii57430=1590,t.afii57431=1591,t.afii57432=1592,t.afii57433=1593,t.afii57434=1594,t.afii57440=1600,t.afii57441=1601,t.afii57442=1602,t.afii57443=1603,t.afii57444=1604,t.afii57445=1605,t.afii57446=1606,t.afii57448=1608,t.afii57449=1609,t.afii57450=1610,t.afii57451=1611,t.afii57452=1612,t.afii57453=1613,t.afii57454=1614,t.afii57455=1615,t.afii57456=1616,t.afii57457=1617,t.afii57458=1618,t.afii57470=1607,t.afii57505=1700,t.afii57506=1662,t.afii57507=1670,t.afii57508=1688,t.afii57509=1711,t.afii57511=1657,t.afii57512=1672,t.afii57513=1681,t.afii57514=1722,t.afii57519=1746,t.afii57534=1749,t.afii57636=8362,t.afii57645=1470,t.afii57658=1475,t.afii57664=1488,t.afii57665=1489,t.afii57666=1490,t.afii57667=1491,t.afii57668=1492,t.afii57669=1493,t.afii57670=1494,t.afii57671=1495,t.afii57672=1496,t.afii57673=1497,t.afii57674=1498,t.afii57675=1499,t.afii57676=1500,t.afii57677=1501,t.afii57678=1502,t.afii57679=1503,t.afii57680=1504,t.afii57681=1505,t.afii57682=1506,t.afii57683=1507,t.afii57684=1508,t.afii57685=1509,t.afii57686=1510,t.afii57687=1511,t.afii57688=1512,t.afii57689=1513,t.afii57690=1514,t.afii57694=64298,t.afii57695=64299,t.afii57700=64331,t.afii57705=64287,t.afii57716=1520,t.afii57717=1521,t.afii57718=1522,t.afii57723=64309,t.afii57793=1460,t.afii57794=1461,t.afii57795=1462,t.afii57796=1467,t.afii57797=1464,t.afii57798=1463,t.afii57799=1456,t.afii57800=1458,t.afii57801=1457,t.afii57802=1459,t.afii57803=1474,t.afii57804=1473,t.afii57806=1465,t.afii57807=1468,t.afii57839=1469,t.afii57841=1471,t.afii57842=1472,t.afii57929=700,t.afii61248=8453,t.afii61289=8467,t.afii61352=8470,t.afii61573=8236,t.afii61574=8237,t.afii61575=8238,t.afii61664=8204,t.afii63167=1645,t.afii64937=701,t.agrave=224,t.agujarati=2693,t.agurmukhi=2565,t.ahiragana=12354,t.ahookabove=7843,t.aibengali=2448,t.aibopomofo=12574,t.aideva=2320,t.aiecyrillic=1237,t.aigujarati=2704,t.aigurmukhi=2576,t.aimatragurmukhi=2632,t.ainarabic=1593,t.ainfinalarabic=65226,t.aininitialarabic=65227,t.ainmedialarabic=65228,t.ainvertedbreve=515,t.aivowelsignbengali=2504,t.aivowelsigndeva=2376,t.aivowelsigngujarati=2760,t.akatakana=12450,t.akatakanahalfwidth=65393,t.akorean=12623,t.alef=1488,t.alefarabic=1575,t.alefdageshhebrew=64304,t.aleffinalarabic=65166,t.alefhamzaabovearabic=1571,t.alefhamzaabovefinalarabic=65156,t.alefhamzabelowarabic=1573,t.alefhamzabelowfinalarabic=65160,t.alefhebrew=1488,t.aleflamedhebrew=64335,t.alefmaddaabovearabic=1570,t.alefmaddaabovefinalarabic=65154,t.alefmaksuraarabic=1609,t.alefmaksurafinalarabic=65264,t.alefmaksurainitialarabic=65267,t.alefmaksuramedialarabic=65268,t.alefpatahhebrew=64302,t.alefqamatshebrew=64303,t.aleph=8501,t.allequal=8780,t.alpha=945,t.alphatonos=940,t.amacron=257,t.amonospace=65345,t.ampersand=38,t.ampersandmonospace=65286,t.ampersandsmall=63270,t.amsquare=13250,t.anbopomofo=12578,t.angbopomofo=12580,t.angbracketleft=12296,t.angbracketright=12297,t.angkhankhuthai=3674,t.angle=8736,t.anglebracketleft=12296,t.anglebracketleftvertical=65087,t.anglebracketright=12297,t.anglebracketrightvertical=65088,t.angleleft=9001,t.angleright=9002,t.angstrom=8491,t.anoteleia=903,t.anudattadeva=2386,t.anusvarabengali=2434,t.anusvaradeva=2306,t.anusvaragujarati=2690,t.aogonek=261,t.apaatosquare=13056,t.aparen=9372,t.apostrophearmenian=1370,t.apostrophemod=700,t.apple=63743,t.approaches=8784,t.approxequal=8776,t.approxequalorimage=8786,t.approximatelyequal=8773,t.araeaekorean=12686,t.araeakorean=12685,t.arc=8978,t.arighthalfring=7834,t.aring=229,t.aringacute=507,t.aringbelow=7681,t.arrowboth=8596,t.arrowdashdown=8675,t.arrowdashleft=8672,t.arrowdashright=8674,t.arrowdashup=8673,t.arrowdblboth=8660,t.arrowdbldown=8659,t.arrowdblleft=8656,t.arrowdblright=8658,t.arrowdblup=8657,t.arrowdown=8595,t.arrowdownleft=8601,t.arrowdownright=8600,t.arrowdownwhite=8681,t.arrowheaddownmod=709,t.arrowheadleftmod=706,t.arrowheadrightmod=707,t.arrowheadupmod=708,t.arrowhorizex=63719,t.arrowleft=8592,t.arrowleftdbl=8656,t.arrowleftdblstroke=8653,t.arrowleftoverright=8646,t.arrowleftwhite=8678,t.arrowright=8594,t.arrowrightdblstroke=8655,t.arrowrightheavy=10142,t.arrowrightoverleft=8644,t.arrowrightwhite=8680,t.arrowtableft=8676,t.arrowtabright=8677,t.arrowup=8593,t.arrowupdn=8597,t.arrowupdnbse=8616,t.arrowupdownbase=8616,t.arrowupleft=8598,t.arrowupleftofdown=8645,t.arrowupright=8599,t.arrowupwhite=8679,t.arrowvertex=63718,t.asciicircum=94,t.asciicircummonospace=65342,t.asciitilde=126,t.asciitildemonospace=65374,t.ascript=593,t.ascriptturned=594,t.asmallhiragana=12353,t.asmallkatakana=12449,t.asmallkatakanahalfwidth=65383,t.asterisk=42,t.asteriskaltonearabic=1645,t.asteriskarabic=1645,t.asteriskmath=8727,t.asteriskmonospace=65290,t.asterisksmall=65121,t.asterism=8258,t.asuperior=63209,t.asymptoticallyequal=8771,t.at=64,t.atilde=227,t.atmonospace=65312,t.atsmall=65131,t.aturned=592,t.aubengali=2452,t.aubopomofo=12576,t.audeva=2324,t.augujarati=2708,t.augurmukhi=2580,t.aulengthmarkbengali=2519,t.aumatragurmukhi=2636,t.auvowelsignbengali=2508,t.auvowelsigndeva=2380,t.auvowelsigngujarati=2764,t.avagrahadeva=2365,t.aybarmenian=1377,t.ayin=1506,t.ayinaltonehebrew=64288,t.ayinhebrew=1506,t.b=98,t.babengali=2476,t.backslash=92,t.backslashmonospace=65340,t.badeva=2348,t.bagujarati=2732,t.bagurmukhi=2604,t.bahiragana=12400,t.bahtthai=3647,t.bakatakana=12496,t.bar=124,t.barmonospace=65372,t.bbopomofo=12549,t.bcircle=9425,t.bdotaccent=7683,t.bdotbelow=7685,t.beamedsixteenthnotes=9836,t.because=8757,t.becyrillic=1073,t.beharabic=1576,t.behfinalarabic=65168,t.behinitialarabic=65169,t.behiragana=12409,t.behmedialarabic=65170,t.behmeeminitialarabic=64671,t.behmeemisolatedarabic=64520,t.behnoonfinalarabic=64621,t.bekatakana=12505,t.benarmenian=1378,t.bet=1489,t.beta=946,t.betasymbolgreek=976,t.betdagesh=64305,t.betdageshhebrew=64305,t.bethebrew=1489,t.betrafehebrew=64332,t.bhabengali=2477,t.bhadeva=2349,t.bhagujarati=2733,t.bhagurmukhi=2605,t.bhook=595,t.bihiragana=12403,t.bikatakana=12499,t.bilabialclick=664,t.bindigurmukhi=2562,t.birusquare=13105,t.blackcircle=9679,t.blackdiamond=9670,t.blackdownpointingtriangle=9660,t.blackleftpointingpointer=9668,t.blackleftpointingtriangle=9664,t.blacklenticularbracketleft=12304,t.blacklenticularbracketleftvertical=65083,t.blacklenticularbracketright=12305,t.blacklenticularbracketrightvertical=65084,t.blacklowerlefttriangle=9699,t.blacklowerrighttriangle=9698,t.blackrectangle=9644,t.blackrightpointingpointer=9658,t.blackrightpointingtriangle=9654,t.blacksmallsquare=9642,t.blacksmilingface=9787,t.blacksquare=9632,t.blackstar=9733,t.blackupperlefttriangle=9700,t.blackupperrighttriangle=9701,t.blackuppointingsmalltriangle=9652,t.blackuppointingtriangle=9650,t.blank=9251,t.blinebelow=7687,t.block=9608,t.bmonospace=65346,t.bobaimaithai=3610,t.bohiragana=12412,t.bokatakana=12508,t.bparen=9373,t.bqsquare=13251,t.braceex=63732,t.braceleft=123,t.braceleftbt=63731,t.braceleftmid=63730,t.braceleftmonospace=65371,t.braceleftsmall=65115,t.bracelefttp=63729,t.braceleftvertical=65079,t.braceright=125,t.bracerightbt=63742,t.bracerightmid=63741,t.bracerightmonospace=65373,t.bracerightsmall=65116,t.bracerighttp=63740,t.bracerightvertical=65080,t.bracketleft=91,t.bracketleftbt=63728,t.bracketleftex=63727,t.bracketleftmonospace=65339,t.bracketlefttp=63726,t.bracketright=93,t.bracketrightbt=63739,t.bracketrightex=63738,t.bracketrightmonospace=65341,t.bracketrighttp=63737,t.breve=728,t.brevebelowcmb=814,t.brevecmb=774,t.breveinvertedbelowcmb=815,t.breveinvertedcmb=785,t.breveinverteddoublecmb=865,t.bridgebelowcmb=810,t.bridgeinvertedbelowcmb=826,t.brokenbar=166,t.bstroke=384,t.bsuperior=63210,t.btopbar=387,t.buhiragana=12406,t.bukatakana=12502,t.bullet=8226,t.bulletinverse=9688,t.bulletoperator=8729,t.bullseye=9678,t.c=99,t.caarmenian=1390,t.cabengali=2458,t.cacute=263,t.cadeva=2330,t.cagujarati=2714,t.cagurmukhi=2586,t.calsquare=13192,t.candrabindubengali=2433,t.candrabinducmb=784,t.candrabindudeva=2305,t.candrabindugujarati=2689,t.capslock=8682,t.careof=8453,t.caron=711,t.caronbelowcmb=812,t.caroncmb=780,t.carriagereturn=8629,t.cbopomofo=12568,t.ccaron=269,t.ccedilla=231,t.ccedillaacute=7689,t.ccircle=9426,t.ccircumflex=265,t.ccurl=597,t.cdot=267,t.cdotaccent=267,t.cdsquare=13253,t.cedilla=184,t.cedillacmb=807,t.cent=162,t.centigrade=8451,t.centinferior=63199,t.centmonospace=65504,t.centoldstyle=63394,t.centsuperior=63200,t.chaarmenian=1401,t.chabengali=2459,t.chadeva=2331,t.chagujarati=2715,t.chagurmukhi=2587,t.chbopomofo=12564,t.cheabkhasiancyrillic=1213,t.checkmark=10003,t.checyrillic=1095,t.chedescenderabkhasiancyrillic=1215,t.chedescendercyrillic=1207,t.chedieresiscyrillic=1269,t.cheharmenian=1395,t.chekhakassiancyrillic=1228,t.cheverticalstrokecyrillic=1209,t.chi=967,t.chieuchacirclekorean=12919,t.chieuchaparenkorean=12823,t.chieuchcirclekorean=12905,t.chieuchkorean=12618,t.chieuchparenkorean=12809,t.chochangthai=3594,t.chochanthai=3592,t.chochingthai=3593,t.chochoethai=3596,t.chook=392,t.cieucacirclekorean=12918,t.cieucaparenkorean=12822,t.cieuccirclekorean=12904,t.cieuckorean=12616,t.cieucparenkorean=12808,t.cieucuparenkorean=12828,t.circle=9675,t.circlecopyrt=169,t.circlemultiply=8855,t.circleot=8857,t.circleplus=8853,t.circlepostalmark=12342,t.circlewithlefthalfblack=9680,t.circlewithrighthalfblack=9681,t.circumflex=710,t.circumflexbelowcmb=813,t.circumflexcmb=770,t.clear=8999,t.clickalveolar=450,t.clickdental=448,t.clicklateral=449,t.clickretroflex=451,t.club=9827,t.clubsuitblack=9827,t.clubsuitwhite=9831,t.cmcubedsquare=13220,t.cmonospace=65347,t.cmsquaredsquare=13216,t.coarmenian=1409,t.colon=58,t.colonmonetary=8353,t.colonmonospace=65306,t.colonsign=8353,t.colonsmall=65109,t.colontriangularhalfmod=721,t.colontriangularmod=720,t.comma=44,t.commaabovecmb=787,t.commaaboverightcmb=789,t.commaaccent=63171,t.commaarabic=1548,t.commaarmenian=1373,t.commainferior=63201,t.commamonospace=65292,t.commareversedabovecmb=788,t.commareversedmod=701,t.commasmall=65104,t.commasuperior=63202,t.commaturnedabovecmb=786,t.commaturnedmod=699,t.compass=9788,t.congruent=8773,t.contourintegral=8750,t.control=8963,t.controlACK=6,t.controlBEL=7,t.controlBS=8,t.controlCAN=24,t.controlCR=13,t.controlDC1=17,t.controlDC2=18,t.controlDC3=19,t.controlDC4=20,t.controlDEL=127,t.controlDLE=16,t.controlEM=25,t.controlENQ=5,t.controlEOT=4,t.controlESC=27,t.controlETB=23,t.controlETX=3,t.controlFF=12,t.controlFS=28,t.controlGS=29,t.controlHT=9,t.controlLF=10,t.controlNAK=21,t.controlNULL=0,t.controlRS=30,t.controlSI=15,t.controlSO=14,t.controlSOT=2,t.controlSTX=1,t.controlSUB=26,t.controlSYN=22,t.controlUS=31,t.controlVT=11,t.copyright=169,t.copyrightsans=63721,t.copyrightserif=63193,t.cornerbracketleft=12300,t.cornerbracketlefthalfwidth=65378,t.cornerbracketleftvertical=65089,t.cornerbracketright=12301,t.cornerbracketrighthalfwidth=65379,t.cornerbracketrightvertical=65090,t.corporationsquare=13183,t.cosquare=13255,t.coverkgsquare=13254,t.cparen=9374,t.cruzeiro=8354,t.cstretched=663,t.curlyand=8911,t.curlyor=8910,t.currency=164,t.cyrBreve=63185,t.cyrFlex=63186,t.cyrbreve=63188,t.cyrflex=63189,t.d=100,t.daarmenian=1380,t.dabengali=2470,t.dadarabic=1590,t.dadeva=2342,t.dadfinalarabic=65214,t.dadinitialarabic=65215,t.dadmedialarabic=65216,t.dagesh=1468,t.dageshhebrew=1468,t.dagger=8224,t.daggerdbl=8225,t.dagujarati=2726,t.dagurmukhi=2598,t.dahiragana=12384,t.dakatakana=12480,t.dalarabic=1583,t.dalet=1491,t.daletdagesh=64307,t.daletdageshhebrew=64307,t.dalethebrew=1491,t.dalfinalarabic=65194,t.dammaarabic=1615,t.dammalowarabic=1615,t.dammatanaltonearabic=1612,t.dammatanarabic=1612,t.danda=2404,t.dargahebrew=1447,t.dargalefthebrew=1447,t.dasiapneumatacyrilliccmb=1157,t.dblGrave=63187,t.dblanglebracketleft=12298,t.dblanglebracketleftvertical=65085,t.dblanglebracketright=12299,t.dblanglebracketrightvertical=65086,t.dblarchinvertedbelowcmb=811,t.dblarrowleft=8660,t.dblarrowright=8658,t.dbldanda=2405,t.dblgrave=63190,t.dblgravecmb=783,t.dblintegral=8748,t.dbllowline=8215,t.dbllowlinecmb=819,t.dbloverlinecmb=831,t.dblprimemod=698,t.dblverticalbar=8214,t.dblverticallineabovecmb=782,t.dbopomofo=12553,t.dbsquare=13256,t.dcaron=271,t.dcedilla=7697,t.dcircle=9427,t.dcircumflexbelow=7699,t.dcroat=273,t.ddabengali=2465,t.ddadeva=2337,t.ddagujarati=2721,t.ddagurmukhi=2593,t.ddalarabic=1672,t.ddalfinalarabic=64393,t.dddhadeva=2396,t.ddhabengali=2466,t.ddhadeva=2338,t.ddhagujarati=2722,t.ddhagurmukhi=2594,t.ddotaccent=7691,t.ddotbelow=7693,t.decimalseparatorarabic=1643,t.decimalseparatorpersian=1643,t.decyrillic=1076,t.degree=176,t.dehihebrew=1453,t.dehiragana=12391,t.deicoptic=1007,t.dekatakana=12487,t.deleteleft=9003,t.deleteright=8998,t.delta=948,t.deltaturned=397,t.denominatorminusonenumeratorbengali=2552,t.dezh=676,t.dhabengali=2471,t.dhadeva=2343,t.dhagujarati=2727,t.dhagurmukhi=2599,t.dhook=599,t.dialytikatonos=901,t.dialytikatonoscmb=836,t.diamond=9830,t.diamondsuitwhite=9826,t.dieresis=168,t.dieresisacute=63191,t.dieresisbelowcmb=804,t.dieresiscmb=776,t.dieresisgrave=63192,t.dieresistonos=901,t.dihiragana=12386,t.dikatakana=12482,t.dittomark=12291,t.divide=247,t.divides=8739,t.divisionslash=8725,t.djecyrillic=1106,t.dkshade=9619,t.dlinebelow=7695,t.dlsquare=13207,t.dmacron=273,t.dmonospace=65348,t.dnblock=9604,t.dochadathai=3598,t.dodekthai=3604,t.dohiragana=12393,t.dokatakana=12489,t.dollar=36;t.dollarinferior=63203,t.dollarmonospace=65284,t.dollaroldstyle=63268,t.dollarsmall=65129,t.dollarsuperior=63204,t.dong=8363,t.dorusquare=13094,t.dotaccent=729,t.dotaccentcmb=775,t.dotbelowcmb=803,t.dotbelowcomb=803,t.dotkatakana=12539,t.dotlessi=305,t.dotlessj=63166,t.dotlessjstrokehook=644,t.dotmath=8901,t.dottedcircle=9676,t.doubleyodpatah=64287,t.doubleyodpatahhebrew=64287,t.downtackbelowcmb=798,t.downtackmod=725,t.dparen=9375,t.dsuperior=63211,t.dtail=598,t.dtopbar=396,t.duhiragana=12389,t.dukatakana=12485,t.dz=499,t.dzaltone=675,t.dzcaron=454,t.dzcurl=677,t.dzeabkhasiancyrillic=1249,t.dzecyrillic=1109,t.dzhecyrillic=1119,t.e=101,t.eacute=233,t.earth=9793,t.ebengali=2447,t.ebopomofo=12572,t.ebreve=277,t.ecandradeva=2317,t.ecandragujarati=2701,t.ecandravowelsigndeva=2373,t.ecandravowelsigngujarati=2757,t.ecaron=283,t.ecedillabreve=7709,t.echarmenian=1381,t.echyiwnarmenian=1415,t.ecircle=9428,t.ecircumflex=234,t.ecircumflexacute=7871,t.ecircumflexbelow=7705,t.ecircumflexdotbelow=7879,t.ecircumflexgrave=7873,t.ecircumflexhookabove=7875,t.ecircumflextilde=7877,t.ecyrillic=1108,t.edblgrave=517,t.edeva=2319,t.edieresis=235,t.edot=279,t.edotaccent=279,t.edotbelow=7865,t.eegurmukhi=2575,t.eematragurmukhi=2631,t.efcyrillic=1092,t.egrave=232,t.egujarati=2703,t.eharmenian=1383,t.ehbopomofo=12573,t.ehiragana=12360,t.ehookabove=7867,t.eibopomofo=12575,t.eight=56,t.eightarabic=1640,t.eightbengali=2542,t.eightcircle=9319,t.eightcircleinversesansserif=10129,t.eightdeva=2414,t.eighteencircle=9329,t.eighteenparen=9349,t.eighteenperiod=9369,t.eightgujarati=2798,t.eightgurmukhi=2670,t.eighthackarabic=1640,t.eighthangzhou=12328,t.eighthnotebeamed=9835,t.eightideographicparen=12839,t.eightinferior=8328,t.eightmonospace=65304,t.eightoldstyle=63288,t.eightparen=9339,t.eightperiod=9359,t.eightpersian=1784,t.eightroman=8567,t.eightsuperior=8312,t.eightthai=3672,t.einvertedbreve=519,t.eiotifiedcyrillic=1125,t.ekatakana=12456,t.ekatakanahalfwidth=65396,t.ekonkargurmukhi=2676,t.ekorean=12628,t.elcyrillic=1083,t.element=8712,t.elevencircle=9322,t.elevenparen=9342,t.elevenperiod=9362,t.elevenroman=8570,t.ellipsis=8230,t.ellipsisvertical=8942,t.emacron=275,t.emacronacute=7703,t.emacrongrave=7701,t.emcyrillic=1084,t.emdash=8212,t.emdashvertical=65073,t.emonospace=65349,t.emphasismarkarmenian=1371,t.emptyset=8709,t.enbopomofo=12579,t.encyrillic=1085,t.endash=8211,t.endashvertical=65074,t.endescendercyrillic=1187,t.eng=331,t.engbopomofo=12581,t.enghecyrillic=1189,t.enhookcyrillic=1224,t.enspace=8194,t.eogonek=281,t.eokorean=12627,t.eopen=603,t.eopenclosed=666,t.eopenreversed=604,t.eopenreversedclosed=606,t.eopenreversedhook=605,t.eparen=9376,t.epsilon=949,t.epsilontonos=941,t.equal=61,t.equalmonospace=65309,t.equalsmall=65126,t.equalsuperior=8316,t.equivalence=8801,t.erbopomofo=12582,t.ercyrillic=1088,t.ereversed=600,t.ereversedcyrillic=1101,t.escyrillic=1089,t.esdescendercyrillic=1195,t.esh=643,t.eshcurl=646,t.eshortdeva=2318,t.eshortvowelsigndeva=2374,t.eshreversedloop=426,t.eshsquatreversed=645,t.esmallhiragana=12359,t.esmallkatakana=12455,t.esmallkatakanahalfwidth=65386,t.estimated=8494,t.esuperior=63212,t.eta=951,t.etarmenian=1384,t.etatonos=942,t.eth=240,t.etilde=7869,t.etildebelow=7707,t.etnahtafoukhhebrew=1425,t.etnahtafoukhlefthebrew=1425,t.etnahtahebrew=1425,t.etnahtalefthebrew=1425,t.eturned=477,t.eukorean=12641,t.euro=8364,t.evowelsignbengali=2503,t.evowelsigndeva=2375,t.evowelsigngujarati=2759,t.exclam=33,t.exclamarmenian=1372,t.exclamdbl=8252,t.exclamdown=161,t.exclamdownsmall=63393,t.exclammonospace=65281,t.exclamsmall=63265,t.existential=8707,t.ezh=658,t.ezhcaron=495,t.ezhcurl=659,t.ezhreversed=441,t.ezhtail=442,t.f=102,t.fadeva=2398,t.fagurmukhi=2654,t.fahrenheit=8457,t.fathaarabic=1614,t.fathalowarabic=1614,t.fathatanarabic=1611,t.fbopomofo=12552,t.fcircle=9429,t.fdotaccent=7711,t.feharabic=1601,t.feharmenian=1414,t.fehfinalarabic=65234,t.fehinitialarabic=65235,t.fehmedialarabic=65236,t.feicoptic=997,t.female=9792,t.ff=64256,t.f_f=64256,t.ffi=64259,t.f_f_i=64259,t.ffl=64260,t.f_f_l=64260,t.fi=64257,t.f_i=64257,t.fifteencircle=9326,t.fifteenparen=9346,t.fifteenperiod=9366,t.figuredash=8210,t.filledbox=9632,t.filledrect=9644,t.finalkaf=1498,t.finalkafdagesh=64314,t.finalkafdageshhebrew=64314,t.finalkafhebrew=1498,t.finalmem=1501,t.finalmemhebrew=1501,t.finalnun=1503,t.finalnunhebrew=1503,t.finalpe=1507,t.finalpehebrew=1507,t.finaltsadi=1509,t.finaltsadihebrew=1509,t.firsttonechinese=713,t.fisheye=9673,t.fitacyrillic=1139,t.five=53,t.fivearabic=1637,t.fivebengali=2539,t.fivecircle=9316,t.fivecircleinversesansserif=10126,t.fivedeva=2411,t.fiveeighths=8541,t.fivegujarati=2795,t.fivegurmukhi=2667,t.fivehackarabic=1637,t.fivehangzhou=12325,t.fiveideographicparen=12836,t.fiveinferior=8325,t.fivemonospace=65301,t.fiveoldstyle=63285,t.fiveparen=9336,t.fiveperiod=9356,t.fivepersian=1781,t.fiveroman=8564,t.fivesuperior=8309,t.fivethai=3669,t.fl=64258,t.f_l=64258,t.florin=402,t.fmonospace=65350,t.fmsquare=13209,t.fofanthai=3615,t.fofathai=3613,t.fongmanthai=3663,t.forall=8704,t.four=52,t.fourarabic=1636,t.fourbengali=2538,t.fourcircle=9315,t.fourcircleinversesansserif=10125,t.fourdeva=2410,t.fourgujarati=2794,t.fourgurmukhi=2666,t.fourhackarabic=1636,t.fourhangzhou=12324,t.fourideographicparen=12835,t.fourinferior=8324,t.fourmonospace=65300,t.fournumeratorbengali=2551,t.fouroldstyle=63284,t.fourparen=9335,t.fourperiod=9355,t.fourpersian=1780,t.fourroman=8563,t.foursuperior=8308,t.fourteencircle=9325,t.fourteenparen=9345,t.fourteenperiod=9365,t.fourthai=3668,t.fourthtonechinese=715,t.fparen=9377,t.fraction=8260,t.franc=8355,t.g=103,t.gabengali=2455,t.gacute=501,t.gadeva=2327,t.gafarabic=1711,t.gaffinalarabic=64403,t.gafinitialarabic=64404,t.gafmedialarabic=64405,t.gagujarati=2711,t.gagurmukhi=2583,t.gahiragana=12364,t.gakatakana=12460,t.gamma=947,t.gammalatinsmall=611,t.gammasuperior=736,t.gangiacoptic=1003,t.gbopomofo=12557,t.gbreve=287,t.gcaron=487,t.gcedilla=291,t.gcircle=9430,t.gcircumflex=285,t.gcommaaccent=291,t.gdot=289,t.gdotaccent=289,t.gecyrillic=1075,t.gehiragana=12370,t.gekatakana=12466,t.geometricallyequal=8785,t.gereshaccenthebrew=1436,t.gereshhebrew=1523,t.gereshmuqdamhebrew=1437,t.germandbls=223,t.gershayimaccenthebrew=1438,t.gershayimhebrew=1524,t.getamark=12307,t.ghabengali=2456,t.ghadarmenian=1394,t.ghadeva=2328,t.ghagujarati=2712,t.ghagurmukhi=2584,t.ghainarabic=1594,t.ghainfinalarabic=65230,t.ghaininitialarabic=65231,t.ghainmedialarabic=65232,t.ghemiddlehookcyrillic=1173,t.ghestrokecyrillic=1171,t.gheupturncyrillic=1169,t.ghhadeva=2394,t.ghhagurmukhi=2650,t.ghook=608,t.ghzsquare=13203,t.gihiragana=12366,t.gikatakana=12462,t.gimarmenian=1379,t.gimel=1490,t.gimeldagesh=64306,t.gimeldageshhebrew=64306,t.gimelhebrew=1490,t.gjecyrillic=1107,t.glottalinvertedstroke=446,t.glottalstop=660,t.glottalstopinverted=662,t.glottalstopmod=704,t.glottalstopreversed=661,t.glottalstopreversedmod=705,t.glottalstopreversedsuperior=740,t.glottalstopstroke=673,t.glottalstopstrokereversed=674,t.gmacron=7713,t.gmonospace=65351,t.gohiragana=12372,t.gokatakana=12468,t.gparen=9378,t.gpasquare=13228,t.gradient=8711,t.grave=96,t.gravebelowcmb=790,t.gravecmb=768,t.gravecomb=768,t.gravedeva=2387,t.gravelowmod=718,t.gravemonospace=65344,t.gravetonecmb=832,t.greater=62,t.greaterequal=8805,t.greaterequalorless=8923,t.greatermonospace=65310,t.greaterorequivalent=8819,t.greaterorless=8823,t.greateroverequal=8807,t.greatersmall=65125,t.gscript=609,t.gstroke=485,t.guhiragana=12368,t.guillemotleft=171,t.guillemotright=187,t.guilsinglleft=8249,t.guilsinglright=8250,t.gukatakana=12464,t.guramusquare=13080,t.gysquare=13257,t.h=104,t.haabkhasiancyrillic=1193,t.haaltonearabic=1729,t.habengali=2489,t.hadescendercyrillic=1203,t.hadeva=2361,t.hagujarati=2745,t.hagurmukhi=2617,t.haharabic=1581,t.hahfinalarabic=65186,t.hahinitialarabic=65187,t.hahiragana=12399,t.hahmedialarabic=65188,t.haitusquare=13098,t.hakatakana=12495,t.hakatakanahalfwidth=65418,t.halantgurmukhi=2637,t.hamzaarabic=1569,t.hamzalowarabic=1569,t.hangulfiller=12644,t.hardsigncyrillic=1098,t.harpoonleftbarbup=8636,t.harpoonrightbarbup=8640,t.hasquare=13258,t.hatafpatah=1458,t.hatafpatah16=1458,t.hatafpatah23=1458,t.hatafpatah2f=1458,t.hatafpatahhebrew=1458,t.hatafpatahnarrowhebrew=1458,t.hatafpatahquarterhebrew=1458,t.hatafpatahwidehebrew=1458,t.hatafqamats=1459,t.hatafqamats1b=1459,t.hatafqamats28=1459,t.hatafqamats34=1459,t.hatafqamatshebrew=1459,t.hatafqamatsnarrowhebrew=1459,t.hatafqamatsquarterhebrew=1459,t.hatafqamatswidehebrew=1459,t.hatafsegol=1457,t.hatafsegol17=1457,t.hatafsegol24=1457,t.hatafsegol30=1457,t.hatafsegolhebrew=1457,t.hatafsegolnarrowhebrew=1457,t.hatafsegolquarterhebrew=1457,t.hatafsegolwidehebrew=1457,t.hbar=295,t.hbopomofo=12559,t.hbrevebelow=7723,t.hcedilla=7721,t.hcircle=9431,t.hcircumflex=293,t.hdieresis=7719,t.hdotaccent=7715,t.hdotbelow=7717,t.he=1492,t.heart=9829,t.heartsuitblack=9829,t.heartsuitwhite=9825,t.hedagesh=64308,t.hedageshhebrew=64308,t.hehaltonearabic=1729,t.heharabic=1607,t.hehebrew=1492,t.hehfinalaltonearabic=64423,t.hehfinalalttwoarabic=65258,t.hehfinalarabic=65258,t.hehhamzaabovefinalarabic=64421,t.hehhamzaaboveisolatedarabic=64420,t.hehinitialaltonearabic=64424,t.hehinitialarabic=65259,t.hehiragana=12408,t.hehmedialaltonearabic=64425,t.hehmedialarabic=65260,t.heiseierasquare=13179,t.hekatakana=12504,t.hekatakanahalfwidth=65421,t.hekutaarusquare=13110,t.henghook=615,t.herutusquare=13113,t.het=1495,t.hethebrew=1495,t.hhook=614,t.hhooksuperior=689,t.hieuhacirclekorean=12923,t.hieuhaparenkorean=12827,t.hieuhcirclekorean=12909,t.hieuhkorean=12622,t.hieuhparenkorean=12813,t.hihiragana=12402,t.hikatakana=12498,t.hikatakanahalfwidth=65419,t.hiriq=1460,t.hiriq14=1460,t.hiriq21=1460,t.hiriq2d=1460,t.hiriqhebrew=1460,t.hiriqnarrowhebrew=1460,t.hiriqquarterhebrew=1460,t.hiriqwidehebrew=1460,t.hlinebelow=7830,t.hmonospace=65352,t.hoarmenian=1392,t.hohipthai=3627,t.hohiragana=12411,t.hokatakana=12507,t.hokatakanahalfwidth=65422,t.holam=1465,t.holam19=1465,t.holam26=1465,t.holam32=1465,t.holamhebrew=1465,t.holamnarrowhebrew=1465,t.holamquarterhebrew=1465,t.holamwidehebrew=1465,t.honokhukthai=3630,t.hookabovecomb=777,t.hookcmb=777,t.hookpalatalizedbelowcmb=801,t.hookretroflexbelowcmb=802,t.hoonsquare=13122,t.horicoptic=1001,t.horizontalbar=8213,t.horncmb=795,t.hotsprings=9832,t.house=8962,t.hparen=9379,t.hsuperior=688,t.hturned=613,t.huhiragana=12405,t.huiitosquare=13107,t.hukatakana=12501,t.hukatakanahalfwidth=65420,t.hungarumlaut=733,t.hungarumlautcmb=779,t.hv=405,t.hyphen=45,t.hypheninferior=63205,t.hyphenmonospace=65293,t.hyphensmall=65123,t.hyphensuperior=63206,t.hyphentwo=8208,t.i=105,t.iacute=237,t.iacyrillic=1103,t.ibengali=2439,t.ibopomofo=12583,t.ibreve=301,t.icaron=464,t.icircle=9432,t.icircumflex=238,t.icyrillic=1110,t.idblgrave=521,t.ideographearthcircle=12943,t.ideographfirecircle=12939,t.ideographicallianceparen=12863,t.ideographiccallparen=12858,t.ideographiccentrecircle=12965,t.ideographicclose=12294,t.ideographiccomma=12289,t.ideographiccommaleft=65380,t.ideographiccongratulationparen=12855,t.ideographiccorrectcircle=12963,t.ideographicearthparen=12847,t.ideographicenterpriseparen=12861,t.ideographicexcellentcircle=12957,t.ideographicfestivalparen=12864,t.ideographicfinancialcircle=12950,t.ideographicfinancialparen=12854,t.ideographicfireparen=12843,t.ideographichaveparen=12850,t.ideographichighcircle=12964,t.ideographiciterationmark=12293,t.ideographiclaborcircle=12952,t.ideographiclaborparen=12856,t.ideographicleftcircle=12967,t.ideographiclowcircle=12966,t.ideographicmedicinecircle=12969,t.ideographicmetalparen=12846,t.ideographicmoonparen=12842,t.ideographicnameparen=12852,t.ideographicperiod=12290,t.ideographicprintcircle=12958,t.ideographicreachparen=12867,t.ideographicrepresentparen=12857,t.ideographicresourceparen=12862,t.ideographicrightcircle=12968,t.ideographicsecretcircle=12953,t.ideographicselfparen=12866,t.ideographicsocietyparen=12851,t.ideographicspace=12288,t.ideographicspecialparen=12853,t.ideographicstockparen=12849,t.ideographicstudyparen=12859,t.ideographicsunparen=12848,t.ideographicsuperviseparen=12860,t.ideographicwaterparen=12844,t.ideographicwoodparen=12845,t.ideographiczero=12295,t.ideographmetalcircle=12942,t.ideographmooncircle=12938,t.ideographnamecircle=12948,t.ideographsuncircle=12944,t.ideographwatercircle=12940,t.ideographwoodcircle=12941,t.ideva=2311,t.idieresis=239,t.idieresisacute=7727,t.idieresiscyrillic=1253,t.idotbelow=7883,t.iebrevecyrillic=1239,t.iecyrillic=1077,t.ieungacirclekorean=12917,t.ieungaparenkorean=12821,t.ieungcirclekorean=12903,t.ieungkorean=12615,t.ieungparenkorean=12807,t.igrave=236,t.igujarati=2695,t.igurmukhi=2567,t.ihiragana=12356,t.ihookabove=7881,t.iibengali=2440,t.iicyrillic=1080,t.iideva=2312,t.iigujarati=2696,t.iigurmukhi=2568,t.iimatragurmukhi=2624,t.iinvertedbreve=523,t.iishortcyrillic=1081,t.iivowelsignbengali=2496,t.iivowelsigndeva=2368,t.iivowelsigngujarati=2752,t.ij=307,t.ikatakana=12452,t.ikatakanahalfwidth=65394,t.ikorean=12643,t.ilde=732,t.iluyhebrew=1452,t.imacron=299,t.imacroncyrillic=1251,t.imageorapproximatelyequal=8787,t.imatragurmukhi=2623,t.imonospace=65353,t.increment=8710,t.infinity=8734,t.iniarmenian=1387,t.integral=8747,t.integralbottom=8993,t.integralbt=8993,t.integralex=63733,t.integraltop=8992,t.integraltp=8992,t.intersection=8745,t.intisquare=13061,t.invbullet=9688,t.invcircle=9689,t.invsmileface=9787,t.iocyrillic=1105,t.iogonek=303,t.iota=953,t.iotadieresis=970,t.iotadieresistonos=912,t.iotalatin=617,t.iotatonos=943,t.iparen=9380,t.irigurmukhi=2674,t.ismallhiragana=12355,t.ismallkatakana=12451,t.ismallkatakanahalfwidth=65384,t.issharbengali=2554,t.istroke=616,t.isuperior=63213,t.iterationhiragana=12445,t.iterationkatakana=12541,t.itilde=297,t.itildebelow=7725,t.iubopomofo=12585,t.iucyrillic=1102,t.ivowelsignbengali=2495,t.ivowelsigndeva=2367,t.ivowelsigngujarati=2751,t.izhitsacyrillic=1141,t.izhitsadblgravecyrillic=1143,t.j=106,t.jaarmenian=1393,t.jabengali=2460,t.jadeva=2332,t.jagujarati=2716,t.jagurmukhi=2588,t.jbopomofo=12560,t.jcaron=496,t.jcircle=9433,t.jcircumflex=309,t.jcrossedtail=669,t.jdotlessstroke=607,t.jecyrillic=1112,t.jeemarabic=1580,t.jeemfinalarabic=65182,t.jeeminitialarabic=65183,t.jeemmedialarabic=65184,t.jeharabic=1688,t.jehfinalarabic=64395,t.jhabengali=2461,t.jhadeva=2333,t.jhagujarati=2717,t.jhagurmukhi=2589,t.jheharmenian=1403,t.jis=12292,t.jmonospace=65354,t.jparen=9381,t.jsuperior=690,t.k=107,t.kabashkircyrillic=1185,t.kabengali=2453,t.kacute=7729,t.kacyrillic=1082,t.kadescendercyrillic=1179,t.kadeva=2325,t.kaf=1499,t.kafarabic=1603,t.kafdagesh=64315,t.kafdageshhebrew=64315,t.kaffinalarabic=65242,t.kafhebrew=1499,t.kafinitialarabic=65243,t.kafmedialarabic=65244,t.kafrafehebrew=64333,t.kagujarati=2709,t.kagurmukhi=2581,t.kahiragana=12363,t.kahookcyrillic=1220,t.kakatakana=12459,t.kakatakanahalfwidth=65398,t.kappa=954,t.kappasymbolgreek=1008,t.kapyeounmieumkorean=12657,t.kapyeounphieuphkorean=12676,t.kapyeounpieupkorean=12664,t.kapyeounssangpieupkorean=12665,t.karoriisquare=13069,t.kashidaautoarabic=1600,t.kashidaautonosidebearingarabic=1600,t.kasmallkatakana=12533,t.kasquare=13188,t.kasraarabic=1616,t.kasratanarabic=1613,t.kastrokecyrillic=1183,t.katahiraprolongmarkhalfwidth=65392,t.kaverticalstrokecyrillic=1181,t.kbopomofo=12558,t.kcalsquare=13193,t.kcaron=489,t.kcedilla=311,t.kcircle=9434,t.kcommaaccent=311,t.kdotbelow=7731,t.keharmenian=1412,t.kehiragana=12369,t.kekatakana=12465,t.kekatakanahalfwidth=65401,t.kenarmenian=1391,t.kesmallkatakana=12534,t.kgreenlandic=312,t.khabengali=2454,t.khacyrillic=1093,t.khadeva=2326,t.khagujarati=2710,t.khagurmukhi=2582,t.khaharabic=1582,t.khahfinalarabic=65190,t.khahinitialarabic=65191,t.khahmedialarabic=65192,t.kheicoptic=999,t.khhadeva=2393,t.khhagurmukhi=2649,t.khieukhacirclekorean=12920,t.khieukhaparenkorean=12824,t.khieukhcirclekorean=12906,t.khieukhkorean=12619,t.khieukhparenkorean=12810,t.khokhaithai=3586,t.khokhonthai=3589,t.khokhuatthai=3587,t.khokhwaithai=3588,t.khomutthai=3675,t.khook=409,t.khorakhangthai=3590,t.khzsquare=13201,t.kihiragana=12365,t.kikatakana=12461,t.kikatakanahalfwidth=65399,t.kiroguramusquare=13077,t.kiromeetorusquare=13078,t.kirosquare=13076,t.kiyeokacirclekorean=12910,t.kiyeokaparenkorean=12814,t.kiyeokcirclekorean=12896,t.kiyeokkorean=12593,t.kiyeokparenkorean=12800,t.kiyeoksioskorean=12595;t.kjecyrillic=1116,t.klinebelow=7733,t.klsquare=13208,t.kmcubedsquare=13222,t.kmonospace=65355,t.kmsquaredsquare=13218,t.kohiragana=12371,t.kohmsquare=13248,t.kokaithai=3585,t.kokatakana=12467,t.kokatakanahalfwidth=65402,t.kooposquare=13086,t.koppacyrillic=1153,t.koreanstandardsymbol=12927,t.koroniscmb=835,t.kparen=9382,t.kpasquare=13226,t.ksicyrillic=1135,t.ktsquare=13263,t.kturned=670,t.kuhiragana=12367,t.kukatakana=12463,t.kukatakanahalfwidth=65400,t.kvsquare=13240,t.kwsquare=13246,t.l=108,t.labengali=2482,t.lacute=314,t.ladeva=2354,t.lagujarati=2738,t.lagurmukhi=2610,t.lakkhangyaothai=3653,t.lamaleffinalarabic=65276,t.lamalefhamzaabovefinalarabic=65272,t.lamalefhamzaaboveisolatedarabic=65271,t.lamalefhamzabelowfinalarabic=65274,t.lamalefhamzabelowisolatedarabic=65273,t.lamalefisolatedarabic=65275,t.lamalefmaddaabovefinalarabic=65270,t.lamalefmaddaaboveisolatedarabic=65269,t.lamarabic=1604,t.lambda=955,t.lambdastroke=411,t.lamed=1500,t.lameddagesh=64316,t.lameddageshhebrew=64316,t.lamedhebrew=1500,t.lamfinalarabic=65246,t.lamhahinitialarabic=64714,t.laminitialarabic=65247,t.lamjeeminitialarabic=64713,t.lamkhahinitialarabic=64715,t.lamlamhehisolatedarabic=65010,t.lammedialarabic=65248,t.lammeemhahinitialarabic=64904,t.lammeeminitialarabic=64716,t.largecircle=9711,t.lbar=410,t.lbelt=620,t.lbopomofo=12556,t.lcaron=318,t.lcedilla=316,t.lcircle=9435,t.lcircumflexbelow=7741,t.lcommaaccent=316,t.ldot=320,t.ldotaccent=320,t.ldotbelow=7735,t.ldotbelowmacron=7737,t.leftangleabovecmb=794,t.lefttackbelowcmb=792,t.less=60,t.lessequal=8804,t.lessequalorgreater=8922,t.lessmonospace=65308,t.lessorequivalent=8818,t.lessorgreater=8822,t.lessoverequal=8806,t.lesssmall=65124,t.lezh=622,t.lfblock=9612,t.lhookretroflex=621,t.lira=8356,t.liwnarmenian=1388,t.lj=457,t.ljecyrillic=1113,t.ll=63168,t.lladeva=2355,t.llagujarati=2739,t.llinebelow=7739,t.llladeva=2356,t.llvocalicbengali=2529,t.llvocalicdeva=2401,t.llvocalicvowelsignbengali=2531,t.llvocalicvowelsigndeva=2403,t.lmiddletilde=619,t.lmonospace=65356,t.lmsquare=13264,t.lochulathai=3628,t.logicaland=8743,t.logicalnot=172,t.logicalnotreversed=8976,t.logicalor=8744,t.lolingthai=3621,t.longs=383,t.lowlinecenterline=65102,t.lowlinecmb=818,t.lowlinedashed=65101,t.lozenge=9674,t.lparen=9383,t.lslash=322,t.lsquare=8467,t.lsuperior=63214,t.ltshade=9617,t.luthai=3622,t.lvocalicbengali=2444,t.lvocalicdeva=2316,t.lvocalicvowelsignbengali=2530,t.lvocalicvowelsigndeva=2402,t.lxsquare=13267,t.m=109,t.mabengali=2478,t.macron=175,t.macronbelowcmb=817,t.macroncmb=772,t.macronlowmod=717,t.macronmonospace=65507,t.macute=7743,t.madeva=2350,t.magujarati=2734,t.magurmukhi=2606,t.mahapakhhebrew=1444,t.mahapakhlefthebrew=1444,t.mahiragana=12414,t.maichattawalowleftthai=63637,t.maichattawalowrightthai=63636,t.maichattawathai=3659,t.maichattawaupperleftthai=63635,t.maieklowleftthai=63628,t.maieklowrightthai=63627,t.maiekthai=3656,t.maiekupperleftthai=63626,t.maihanakatleftthai=63620,t.maihanakatthai=3633,t.maitaikhuleftthai=63625,t.maitaikhuthai=3655,t.maitholowleftthai=63631,t.maitholowrightthai=63630,t.maithothai=3657,t.maithoupperleftthai=63629,t.maitrilowleftthai=63634,t.maitrilowrightthai=63633,t.maitrithai=3658,t.maitriupperleftthai=63632,t.maiyamokthai=3654,t.makatakana=12510,t.makatakanahalfwidth=65423,t.male=9794,t.mansyonsquare=13127,t.maqafhebrew=1470,t.mars=9794,t.masoracirclehebrew=1455,t.masquare=13187,t.mbopomofo=12551,t.mbsquare=13268,t.mcircle=9436,t.mcubedsquare=13221,t.mdotaccent=7745,t.mdotbelow=7747,t.meemarabic=1605,t.meemfinalarabic=65250,t.meeminitialarabic=65251,t.meemmedialarabic=65252,t.meemmeeminitialarabic=64721,t.meemmeemisolatedarabic=64584,t.meetorusquare=13133,t.mehiragana=12417,t.meizierasquare=13182,t.mekatakana=12513,t.mekatakanahalfwidth=65426,t.mem=1502,t.memdagesh=64318,t.memdageshhebrew=64318,t.memhebrew=1502,t.menarmenian=1396,t.merkhahebrew=1445,t.merkhakefulahebrew=1446,t.merkhakefulalefthebrew=1446,t.merkhalefthebrew=1445,t.mhook=625,t.mhzsquare=13202,t.middledotkatakanahalfwidth=65381,t.middot=183,t.mieumacirclekorean=12914,t.mieumaparenkorean=12818,t.mieumcirclekorean=12900,t.mieumkorean=12609,t.mieumpansioskorean=12656,t.mieumparenkorean=12804,t.mieumpieupkorean=12654,t.mieumsioskorean=12655,t.mihiragana=12415,t.mikatakana=12511,t.mikatakanahalfwidth=65424,t.minus=8722,t.minusbelowcmb=800,t.minuscircle=8854,t.minusmod=727,t.minusplus=8723,t.minute=8242,t.miribaarusquare=13130,t.mirisquare=13129,t.mlonglegturned=624,t.mlsquare=13206,t.mmcubedsquare=13219,t.mmonospace=65357,t.mmsquaredsquare=13215,t.mohiragana=12418,t.mohmsquare=13249,t.mokatakana=12514,t.mokatakanahalfwidth=65427,t.molsquare=13270,t.momathai=3617,t.moverssquare=13223,t.moverssquaredsquare=13224,t.mparen=9384,t.mpasquare=13227,t.mssquare=13235,t.msuperior=63215,t.mturned=623,t.mu=181,t.mu1=181,t.muasquare=13186,t.muchgreater=8811,t.muchless=8810,t.mufsquare=13196,t.mugreek=956,t.mugsquare=13197,t.muhiragana=12416,t.mukatakana=12512,t.mukatakanahalfwidth=65425,t.mulsquare=13205,t.multiply=215,t.mumsquare=13211,t.munahhebrew=1443,t.munahlefthebrew=1443,t.musicalnote=9834,t.musicalnotedbl=9835,t.musicflatsign=9837,t.musicsharpsign=9839,t.mussquare=13234,t.muvsquare=13238,t.muwsquare=13244,t.mvmegasquare=13241,t.mvsquare=13239,t.mwmegasquare=13247,t.mwsquare=13245,t.n=110,t.nabengali=2472,t.nabla=8711,t.nacute=324,t.nadeva=2344,t.nagujarati=2728,t.nagurmukhi=2600,t.nahiragana=12394,t.nakatakana=12490,t.nakatakanahalfwidth=65413,t.napostrophe=329,t.nasquare=13185,t.nbopomofo=12555,t.nbspace=160,t.ncaron=328,t.ncedilla=326,t.ncircle=9437,t.ncircumflexbelow=7755,t.ncommaaccent=326,t.ndotaccent=7749,t.ndotbelow=7751,t.nehiragana=12397,t.nekatakana=12493,t.nekatakanahalfwidth=65416,t.newsheqelsign=8362,t.nfsquare=13195,t.ngabengali=2457,t.ngadeva=2329,t.ngagujarati=2713,t.ngagurmukhi=2585,t.ngonguthai=3591,t.nhiragana=12435,t.nhookleft=626,t.nhookretroflex=627,t.nieunacirclekorean=12911,t.nieunaparenkorean=12815,t.nieuncieuckorean=12597,t.nieuncirclekorean=12897,t.nieunhieuhkorean=12598,t.nieunkorean=12596,t.nieunpansioskorean=12648,t.nieunparenkorean=12801,t.nieunsioskorean=12647,t.nieuntikeutkorean=12646,t.nihiragana=12395,t.nikatakana=12491,t.nikatakanahalfwidth=65414,t.nikhahitleftthai=63641,t.nikhahitthai=3661,t.nine=57,t.ninearabic=1641,t.ninebengali=2543,t.ninecircle=9320,t.ninecircleinversesansserif=10130,t.ninedeva=2415,t.ninegujarati=2799,t.ninegurmukhi=2671,t.ninehackarabic=1641,t.ninehangzhou=12329,t.nineideographicparen=12840,t.nineinferior=8329,t.ninemonospace=65305,t.nineoldstyle=63289,t.nineparen=9340,t.nineperiod=9360,t.ninepersian=1785,t.nineroman=8568,t.ninesuperior=8313,t.nineteencircle=9330,t.nineteenparen=9350,t.nineteenperiod=9370,t.ninethai=3673,t.nj=460,t.njecyrillic=1114,t.nkatakana=12531,t.nkatakanahalfwidth=65437,t.nlegrightlong=414,t.nlinebelow=7753,t.nmonospace=65358,t.nmsquare=13210,t.nnabengali=2467,t.nnadeva=2339,t.nnagujarati=2723,t.nnagurmukhi=2595,t.nnnadeva=2345,t.nohiragana=12398,t.nokatakana=12494,t.nokatakanahalfwidth=65417,t.nonbreakingspace=160,t.nonenthai=3603,t.nonuthai=3609,t.noonarabic=1606,t.noonfinalarabic=65254,t.noonghunnaarabic=1722,t.noonghunnafinalarabic=64415,t.nooninitialarabic=65255,t.noonjeeminitialarabic=64722,t.noonjeemisolatedarabic=64587,t.noonmedialarabic=65256,t.noonmeeminitialarabic=64725,t.noonmeemisolatedarabic=64590,t.noonnoonfinalarabic=64653,t.notcontains=8716,t.notelement=8713,t.notelementof=8713,t.notequal=8800,t.notgreater=8815,t.notgreaternorequal=8817,t.notgreaternorless=8825,t.notidentical=8802,t.notless=8814,t.notlessnorequal=8816,t.notparallel=8742,t.notprecedes=8832,t.notsubset=8836,t.notsucceeds=8833,t.notsuperset=8837,t.nowarmenian=1398,t.nparen=9385,t.nssquare=13233,t.nsuperior=8319,t.ntilde=241,t.nu=957,t.nuhiragana=12396,t.nukatakana=12492,t.nukatakanahalfwidth=65415,t.nuktabengali=2492,t.nuktadeva=2364,t.nuktagujarati=2748,t.nuktagurmukhi=2620,t.numbersign=35,t.numbersignmonospace=65283,t.numbersignsmall=65119,t.numeralsigngreek=884,t.numeralsignlowergreek=885,t.numero=8470,t.nun=1504,t.nundagesh=64320,t.nundageshhebrew=64320,t.nunhebrew=1504,t.nvsquare=13237,t.nwsquare=13243,t.nyabengali=2462,t.nyadeva=2334,t.nyagujarati=2718,t.nyagurmukhi=2590,t.o=111,t.oacute=243,t.oangthai=3629,t.obarred=629,t.obarredcyrillic=1257,t.obarreddieresiscyrillic=1259,t.obengali=2451,t.obopomofo=12571,t.obreve=335,t.ocandradeva=2321,t.ocandragujarati=2705,t.ocandravowelsigndeva=2377,t.ocandravowelsigngujarati=2761,t.ocaron=466,t.ocircle=9438,t.ocircumflex=244,t.ocircumflexacute=7889,t.ocircumflexdotbelow=7897,t.ocircumflexgrave=7891,t.ocircumflexhookabove=7893,t.ocircumflextilde=7895,t.ocyrillic=1086,t.odblacute=337,t.odblgrave=525,t.odeva=2323,t.odieresis=246,t.odieresiscyrillic=1255,t.odotbelow=7885,t.oe=339,t.oekorean=12634,t.ogonek=731,t.ogonekcmb=808,t.ograve=242,t.ogujarati=2707,t.oharmenian=1413,t.ohiragana=12362,t.ohookabove=7887,t.ohorn=417,t.ohornacute=7899,t.ohorndotbelow=7907,t.ohorngrave=7901,t.ohornhookabove=7903,t.ohorntilde=7905,t.ohungarumlaut=337,t.oi=419,t.oinvertedbreve=527,t.okatakana=12458,t.okatakanahalfwidth=65397,t.okorean=12631,t.olehebrew=1451,t.omacron=333,t.omacronacute=7763,t.omacrongrave=7761,t.omdeva=2384,t.omega=969,t.omega1=982,t.omegacyrillic=1121,t.omegalatinclosed=631,t.omegaroundcyrillic=1147,t.omegatitlocyrillic=1149,t.omegatonos=974,t.omgujarati=2768,t.omicron=959,t.omicrontonos=972,t.omonospace=65359,t.one=49,t.onearabic=1633,t.onebengali=2535,t.onecircle=9312,t.onecircleinversesansserif=10122,t.onedeva=2407,t.onedotenleader=8228,t.oneeighth=8539,t.onefitted=63196,t.onegujarati=2791,t.onegurmukhi=2663,t.onehackarabic=1633,t.onehalf=189,t.onehangzhou=12321,t.oneideographicparen=12832,t.oneinferior=8321,t.onemonospace=65297,t.onenumeratorbengali=2548,t.oneoldstyle=63281,t.oneparen=9332,t.oneperiod=9352,t.onepersian=1777,t.onequarter=188,t.oneroman=8560,t.onesuperior=185,t.onethai=3665,t.onethird=8531,t.oogonek=491,t.oogonekmacron=493,t.oogurmukhi=2579,t.oomatragurmukhi=2635,t.oopen=596,t.oparen=9386,t.openbullet=9702,t.option=8997,t.ordfeminine=170,t.ordmasculine=186,t.orthogonal=8735,t.oshortdeva=2322,t.oshortvowelsigndeva=2378,t.oslash=248,t.oslashacute=511,t.osmallhiragana=12361,t.osmallkatakana=12457,t.osmallkatakanahalfwidth=65387,t.ostrokeacute=511,t.osuperior=63216,t.otcyrillic=1151,t.otilde=245,t.otildeacute=7757,t.otildedieresis=7759,t.oubopomofo=12577,t.overline=8254,t.overlinecenterline=65098,t.overlinecmb=773,t.overlinedashed=65097,t.overlinedblwavy=65100,t.overlinewavy=65099,t.overscore=175,t.ovowelsignbengali=2507,t.ovowelsigndeva=2379,t.ovowelsigngujarati=2763,t.p=112,t.paampssquare=13184,t.paasentosquare=13099,t.pabengali=2474,t.pacute=7765,t.padeva=2346,t.pagedown=8671,t.pageup=8670,t.pagujarati=2730,t.pagurmukhi=2602,t.pahiragana=12401,t.paiyannoithai=3631,t.pakatakana=12497,t.palatalizationcyrilliccmb=1156,t.palochkacyrillic=1216,t.pansioskorean=12671,t.paragraph=182,t.parallel=8741,t.parenleft=40,t.parenleftaltonearabic=64830,t.parenleftbt=63725,t.parenleftex=63724,t.parenleftinferior=8333,t.parenleftmonospace=65288,t.parenleftsmall=65113,t.parenleftsuperior=8317,t.parenlefttp=63723,t.parenleftvertical=65077,t.parenright=41,t.parenrightaltonearabic=64831,t.parenrightbt=63736,t.parenrightex=63735,t.parenrightinferior=8334,t.parenrightmonospace=65289,t.parenrightsmall=65114,t.parenrightsuperior=8318,t.parenrighttp=63734,t.parenrightvertical=65078,t.partialdiff=8706,t.paseqhebrew=1472,t.pashtahebrew=1433,t.pasquare=13225,t.patah=1463,t.patah11=1463,t.patah1d=1463,t.patah2a=1463,t.patahhebrew=1463,t.patahnarrowhebrew=1463,t.patahquarterhebrew=1463,t.patahwidehebrew=1463,t.pazerhebrew=1441,t.pbopomofo=12550,t.pcircle=9439,t.pdotaccent=7767,t.pe=1508,t.pecyrillic=1087,t.pedagesh=64324,t.pedageshhebrew=64324,t.peezisquare=13115,t.pefinaldageshhebrew=64323,t.peharabic=1662,t.peharmenian=1402,t.pehebrew=1508,t.pehfinalarabic=64343,t.pehinitialarabic=64344,t.pehiragana=12410,t.pehmedialarabic=64345,t.pekatakana=12506,t.pemiddlehookcyrillic=1191,t.perafehebrew=64334,t.percent=37,t.percentarabic=1642,t.percentmonospace=65285,t.percentsmall=65130,t.period=46,t.periodarmenian=1417,t.periodcentered=183,t.periodhalfwidth=65377,t.periodinferior=63207,t.periodmonospace=65294,t.periodsmall=65106,t.periodsuperior=63208,t.perispomenigreekcmb=834,t.perpendicular=8869,t.perthousand=8240,t.peseta=8359,t.pfsquare=13194,t.phabengali=2475,t.phadeva=2347,t.phagujarati=2731,t.phagurmukhi=2603,t.phi=966,t.phi1=981,t.phieuphacirclekorean=12922,t.phieuphaparenkorean=12826,t.phieuphcirclekorean=12908,t.phieuphkorean=12621,t.phieuphparenkorean=12812,t.philatin=632,t.phinthuthai=3642,t.phisymbolgreek=981,t.phook=421,t.phophanthai=3614,t.phophungthai=3612,t.phosamphaothai=3616,t.pi=960,t.pieupacirclekorean=12915,t.pieupaparenkorean=12819,t.pieupcieuckorean=12662,t.pieupcirclekorean=12901,t.pieupkiyeokkorean=12658,t.pieupkorean=12610,t.pieupparenkorean=12805,t.pieupsioskiyeokkorean=12660,t.pieupsioskorean=12612,t.pieupsiostikeutkorean=12661,t.pieupthieuthkorean=12663,t.pieuptikeutkorean=12659,t.pihiragana=12404,t.pikatakana=12500,t.pisymbolgreek=982,t.piwrarmenian=1411,t.planckover2pi=8463,t.planckover2pi1=8463,t.plus=43,t.plusbelowcmb=799,t.pluscircle=8853,t.plusminus=177,t.plusmod=726,t.plusmonospace=65291,t.plussmall=65122,t.plussuperior=8314,t.pmonospace=65360,t.pmsquare=13272,t.pohiragana=12413,t.pointingindexdownwhite=9759,t.pointingindexleftwhite=9756,t.pointingindexrightwhite=9758,t.pointingindexupwhite=9757,t.pokatakana=12509,t.poplathai=3611,t.postalmark=12306,t.postalmarkface=12320,t.pparen=9387,t.precedes=8826,t.prescription=8478,t.primemod=697,t.primereversed=8245,t.product=8719,t.projective=8965,t.prolongedkana=12540,t.propellor=8984,t.propersubset=8834,t.propersuperset=8835,t.proportion=8759,t.proportional=8733,t.psi=968,t.psicyrillic=1137,t.psilipneumatacyrilliccmb=1158,t.pssquare=13232,t.puhiragana=12407,t.pukatakana=12503,t.pvsquare=13236,t.pwsquare=13242,t.q=113,t.qadeva=2392,t.qadmahebrew=1448,t.qafarabic=1602,t.qaffinalarabic=65238,t.qafinitialarabic=65239,t.qafmedialarabic=65240,t.qamats=1464,t.qamats10=1464,t.qamats1a=1464,t.qamats1c=1464,t.qamats27=1464,t.qamats29=1464,t.qamats33=1464,t.qamatsde=1464,t.qamatshebrew=1464,t.qamatsnarrowhebrew=1464,t.qamatsqatanhebrew=1464,t.qamatsqatannarrowhebrew=1464,t.qamatsqatanquarterhebrew=1464,t.qamatsqatanwidehebrew=1464,t.qamatsquarterhebrew=1464,t.qamatswidehebrew=1464,t.qarneyparahebrew=1439,t.qbopomofo=12561,t.qcircle=9440,t.qhook=672,t.qmonospace=65361,t.qof=1511,t.qofdagesh=64327,t.qofdageshhebrew=64327,t.qofhebrew=1511,t.qparen=9388,t.quarternote=9833,t.qubuts=1467,t.qubuts18=1467,t.qubuts25=1467,t.qubuts31=1467,t.qubutshebrew=1467,t.qubutsnarrowhebrew=1467,t.qubutsquarterhebrew=1467,t.qubutswidehebrew=1467,t.question=63,t.questionarabic=1567,t.questionarmenian=1374,t.questiondown=191,t.questiondownsmall=63423,t.questiongreek=894,t.questionmonospace=65311,t.questionsmall=63295,t.quotedbl=34,t.quotedblbase=8222,t.quotedblleft=8220,t.quotedblmonospace=65282,t.quotedblprime=12318,t.quotedblprimereversed=12317,t.quotedblright=8221,t.quoteleft=8216,t.quoteleftreversed=8219,t.quotereversed=8219,t.quoteright=8217,t.quoterightn=329,t.quotesinglbase=8218,t.quotesingle=39,t.quotesinglemonospace=65287,t.r=114,t.raarmenian=1404,t.rabengali=2480,t.racute=341,t.radeva=2352,t.radical=8730,t.radicalex=63717,t.radoverssquare=13230,t.radoverssquaredsquare=13231,t.radsquare=13229,t.rafe=1471,t.rafehebrew=1471,t.ragujarati=2736,t.ragurmukhi=2608,t.rahiragana=12425,t.rakatakana=12521,t.rakatakanahalfwidth=65431,t.ralowerdiagonalbengali=2545,t.ramiddlediagonalbengali=2544,t.ramshorn=612,t.ratio=8758,t.rbopomofo=12566,t.rcaron=345,t.rcedilla=343,t.rcircle=9441,t.rcommaaccent=343,t.rdblgrave=529,t.rdotaccent=7769,t.rdotbelow=7771,t.rdotbelowmacron=7773,t.referencemark=8251,t.reflexsubset=8838,t.reflexsuperset=8839,t.registered=174,t.registersans=63720,t.registerserif=63194,t.reharabic=1585,t.reharmenian=1408,t.rehfinalarabic=65198,t.rehiragana=12428,t.rekatakana=12524;t.rekatakanahalfwidth=65434,t.resh=1512,t.reshdageshhebrew=64328,t.reshhebrew=1512,t.reversedtilde=8765,t.reviahebrew=1431,t.reviamugrashhebrew=1431,t.revlogicalnot=8976,t.rfishhook=638,t.rfishhookreversed=639,t.rhabengali=2525,t.rhadeva=2397,t.rho=961,t.rhook=637,t.rhookturned=635,t.rhookturnedsuperior=693,t.rhosymbolgreek=1009,t.rhotichookmod=734,t.rieulacirclekorean=12913,t.rieulaparenkorean=12817,t.rieulcirclekorean=12899,t.rieulhieuhkorean=12608,t.rieulkiyeokkorean=12602,t.rieulkiyeoksioskorean=12649,t.rieulkorean=12601,t.rieulmieumkorean=12603,t.rieulpansioskorean=12652,t.rieulparenkorean=12803,t.rieulphieuphkorean=12607,t.rieulpieupkorean=12604,t.rieulpieupsioskorean=12651,t.rieulsioskorean=12605,t.rieulthieuthkorean=12606,t.rieultikeutkorean=12650,t.rieulyeorinhieuhkorean=12653,t.rightangle=8735,t.righttackbelowcmb=793,t.righttriangle=8895,t.rihiragana=12426,t.rikatakana=12522,t.rikatakanahalfwidth=65432,t.ring=730,t.ringbelowcmb=805,t.ringcmb=778,t.ringhalfleft=703,t.ringhalfleftarmenian=1369,t.ringhalfleftbelowcmb=796,t.ringhalfleftcentered=723,t.ringhalfright=702,t.ringhalfrightbelowcmb=825,t.ringhalfrightcentered=722,t.rinvertedbreve=531,t.rittorusquare=13137,t.rlinebelow=7775,t.rlongleg=636,t.rlonglegturned=634,t.rmonospace=65362,t.rohiragana=12429,t.rokatakana=12525,t.rokatakanahalfwidth=65435,t.roruathai=3619,t.rparen=9389,t.rrabengali=2524,t.rradeva=2353,t.rragurmukhi=2652,t.rreharabic=1681,t.rrehfinalarabic=64397,t.rrvocalicbengali=2528,t.rrvocalicdeva=2400,t.rrvocalicgujarati=2784,t.rrvocalicvowelsignbengali=2500,t.rrvocalicvowelsigndeva=2372,t.rrvocalicvowelsigngujarati=2756,t.rsuperior=63217,t.rtblock=9616,t.rturned=633,t.rturnedsuperior=692,t.ruhiragana=12427,t.rukatakana=12523,t.rukatakanahalfwidth=65433,t.rupeemarkbengali=2546,t.rupeesignbengali=2547,t.rupiah=63197,t.ruthai=3620,t.rvocalicbengali=2443,t.rvocalicdeva=2315,t.rvocalicgujarati=2699,t.rvocalicvowelsignbengali=2499,t.rvocalicvowelsigndeva=2371,t.rvocalicvowelsigngujarati=2755,t.s=115,t.sabengali=2488,t.sacute=347,t.sacutedotaccent=7781,t.sadarabic=1589,t.sadeva=2360,t.sadfinalarabic=65210,t.sadinitialarabic=65211,t.sadmedialarabic=65212,t.sagujarati=2744,t.sagurmukhi=2616,t.sahiragana=12373,t.sakatakana=12469,t.sakatakanahalfwidth=65403,t.sallallahoualayhewasallamarabic=65018,t.samekh=1505,t.samekhdagesh=64321,t.samekhdageshhebrew=64321,t.samekhhebrew=1505,t.saraaathai=3634,t.saraaethai=3649,t.saraaimaimalaithai=3652,t.saraaimaimuanthai=3651,t.saraamthai=3635,t.saraathai=3632,t.saraethai=3648,t.saraiileftthai=63622,t.saraiithai=3637,t.saraileftthai=63621,t.saraithai=3636,t.saraothai=3650,t.saraueeleftthai=63624,t.saraueethai=3639,t.saraueleftthai=63623,t.sarauethai=3638,t.sarauthai=3640,t.sarauuthai=3641,t.sbopomofo=12569,t.scaron=353,t.scarondotaccent=7783,t.scedilla=351,t.schwa=601,t.schwacyrillic=1241,t.schwadieresiscyrillic=1243,t.schwahook=602,t.scircle=9442,t.scircumflex=349,t.scommaaccent=537,t.sdotaccent=7777,t.sdotbelow=7779,t.sdotbelowdotaccent=7785,t.seagullbelowcmb=828,t.second=8243,t.secondtonechinese=714,t.section=167,t.seenarabic=1587,t.seenfinalarabic=65202,t.seeninitialarabic=65203,t.seenmedialarabic=65204,t.segol=1462,t.segol13=1462,t.segol1f=1462,t.segol2c=1462,t.segolhebrew=1462,t.segolnarrowhebrew=1462,t.segolquarterhebrew=1462,t.segoltahebrew=1426,t.segolwidehebrew=1462,t.seharmenian=1405,t.sehiragana=12379,t.sekatakana=12475,t.sekatakanahalfwidth=65406,t.semicolon=59,t.semicolonarabic=1563,t.semicolonmonospace=65307,t.semicolonsmall=65108,t.semivoicedmarkkana=12444,t.semivoicedmarkkanahalfwidth=65439,t.sentisquare=13090,t.sentosquare=13091,t.seven=55,t.sevenarabic=1639,t.sevenbengali=2541,t.sevencircle=9318,t.sevencircleinversesansserif=10128,t.sevendeva=2413,t.seveneighths=8542,t.sevengujarati=2797,t.sevengurmukhi=2669,t.sevenhackarabic=1639,t.sevenhangzhou=12327,t.sevenideographicparen=12838,t.seveninferior=8327,t.sevenmonospace=65303,t.sevenoldstyle=63287,t.sevenparen=9338,t.sevenperiod=9358,t.sevenpersian=1783,t.sevenroman=8566,t.sevensuperior=8311,t.seventeencircle=9328,t.seventeenparen=9348,t.seventeenperiod=9368,t.seventhai=3671,t.sfthyphen=173,t.shaarmenian=1399,t.shabengali=2486,t.shacyrillic=1096,t.shaddaarabic=1617,t.shaddadammaarabic=64609,t.shaddadammatanarabic=64606,t.shaddafathaarabic=64608,t.shaddakasraarabic=64610,t.shaddakasratanarabic=64607,t.shade=9618,t.shadedark=9619,t.shadelight=9617,t.shademedium=9618,t.shadeva=2358,t.shagujarati=2742,t.shagurmukhi=2614,t.shalshelethebrew=1427,t.shbopomofo=12565,t.shchacyrillic=1097,t.sheenarabic=1588,t.sheenfinalarabic=65206,t.sheeninitialarabic=65207,t.sheenmedialarabic=65208,t.sheicoptic=995,t.sheqel=8362,t.sheqelhebrew=8362,t.sheva=1456,t.sheva115=1456,t.sheva15=1456,t.sheva22=1456,t.sheva2e=1456,t.shevahebrew=1456,t.shevanarrowhebrew=1456,t.shevaquarterhebrew=1456,t.shevawidehebrew=1456,t.shhacyrillic=1211,t.shimacoptic=1005,t.shin=1513,t.shindagesh=64329,t.shindageshhebrew=64329,t.shindageshshindot=64300,t.shindageshshindothebrew=64300,t.shindageshsindot=64301,t.shindageshsindothebrew=64301,t.shindothebrew=1473,t.shinhebrew=1513,t.shinshindot=64298,t.shinshindothebrew=64298,t.shinsindot=64299,t.shinsindothebrew=64299,t.shook=642,t.sigma=963,t.sigma1=962,t.sigmafinal=962,t.sigmalunatesymbolgreek=1010,t.sihiragana=12375,t.sikatakana=12471,t.sikatakanahalfwidth=65404,t.siluqhebrew=1469,t.siluqlefthebrew=1469,t.similar=8764,t.sindothebrew=1474,t.siosacirclekorean=12916,t.siosaparenkorean=12820,t.sioscieuckorean=12670,t.sioscirclekorean=12902,t.sioskiyeokkorean=12666,t.sioskorean=12613,t.siosnieunkorean=12667,t.siosparenkorean=12806,t.siospieupkorean=12669,t.siostikeutkorean=12668,t.six=54,t.sixarabic=1638,t.sixbengali=2540,t.sixcircle=9317,t.sixcircleinversesansserif=10127,t.sixdeva=2412,t.sixgujarati=2796,t.sixgurmukhi=2668,t.sixhackarabic=1638,t.sixhangzhou=12326,t.sixideographicparen=12837,t.sixinferior=8326,t.sixmonospace=65302,t.sixoldstyle=63286,t.sixparen=9337,t.sixperiod=9357,t.sixpersian=1782,t.sixroman=8565,t.sixsuperior=8310,t.sixteencircle=9327,t.sixteencurrencydenominatorbengali=2553,t.sixteenparen=9347,t.sixteenperiod=9367,t.sixthai=3670,t.slash=47,t.slashmonospace=65295,t.slong=383,t.slongdotaccent=7835,t.smileface=9786,t.smonospace=65363,t.sofpasuqhebrew=1475,t.softhyphen=173,t.softsigncyrillic=1100,t.sohiragana=12381,t.sokatakana=12477,t.sokatakanahalfwidth=65407,t.soliduslongoverlaycmb=824,t.solidusshortoverlaycmb=823,t.sorusithai=3625,t.sosalathai=3624,t.sosothai=3595,t.sosuathai=3626,t.space=32,t.spacehackarabic=32,t.spade=9824,t.spadesuitblack=9824,t.spadesuitwhite=9828,t.sparen=9390,t.squarebelowcmb=827,t.squarecc=13252,t.squarecm=13213,t.squarediagonalcrosshatchfill=9641,t.squarehorizontalfill=9636,t.squarekg=13199,t.squarekm=13214,t.squarekmcapital=13262,t.squareln=13265,t.squarelog=13266,t.squaremg=13198,t.squaremil=13269,t.squaremm=13212,t.squaremsquared=13217,t.squareorthogonalcrosshatchfill=9638,t.squareupperlefttolowerrightfill=9639,t.squareupperrighttolowerleftfill=9640,t.squareverticalfill=9637,t.squarewhitewithsmallblack=9635,t.srsquare=13275,t.ssabengali=2487,t.ssadeva=2359,t.ssagujarati=2743,t.ssangcieuckorean=12617,t.ssanghieuhkorean=12677,t.ssangieungkorean=12672,t.ssangkiyeokkorean=12594,t.ssangnieunkorean=12645,t.ssangpieupkorean=12611,t.ssangsioskorean=12614,t.ssangtikeutkorean=12600,t.ssuperior=63218,t.sterling=163,t.sterlingmonospace=65505,t.strokelongoverlaycmb=822,t.strokeshortoverlaycmb=821,t.subset=8834,t.subsetnotequal=8842,t.subsetorequal=8838,t.succeeds=8827,t.suchthat=8715,t.suhiragana=12377,t.sukatakana=12473,t.sukatakanahalfwidth=65405,t.sukunarabic=1618,t.summation=8721,t.sun=9788,t.superset=8835,t.supersetnotequal=8843,t.supersetorequal=8839,t.svsquare=13276,t.syouwaerasquare=13180,t.t=116,t.tabengali=2468,t.tackdown=8868,t.tackleft=8867,t.tadeva=2340,t.tagujarati=2724,t.tagurmukhi=2596,t.taharabic=1591,t.tahfinalarabic=65218,t.tahinitialarabic=65219,t.tahiragana=12383,t.tahmedialarabic=65220,t.taisyouerasquare=13181,t.takatakana=12479,t.takatakanahalfwidth=65408,t.tatweelarabic=1600,t.tau=964,t.tav=1514,t.tavdages=64330,t.tavdagesh=64330,t.tavdageshhebrew=64330,t.tavhebrew=1514,t.tbar=359,t.tbopomofo=12554,t.tcaron=357,t.tccurl=680,t.tcedilla=355,t.tcheharabic=1670,t.tchehfinalarabic=64379,t.tchehinitialarabic=64380,t.tchehmedialarabic=64381,t.tcircle=9443,t.tcircumflexbelow=7793,t.tcommaaccent=355,t.tdieresis=7831,t.tdotaccent=7787,t.tdotbelow=7789,t.tecyrillic=1090,t.tedescendercyrillic=1197,t.teharabic=1578,t.tehfinalarabic=65174,t.tehhahinitialarabic=64674,t.tehhahisolatedarabic=64524,t.tehinitialarabic=65175,t.tehiragana=12390,t.tehjeeminitialarabic=64673,t.tehjeemisolatedarabic=64523,t.tehmarbutaarabic=1577,t.tehmarbutafinalarabic=65172,t.tehmedialarabic=65176,t.tehmeeminitialarabic=64676,t.tehmeemisolatedarabic=64526,t.tehnoonfinalarabic=64627,t.tekatakana=12486,t.tekatakanahalfwidth=65411,t.telephone=8481,t.telephoneblack=9742,t.telishagedolahebrew=1440,t.telishaqetanahebrew=1449,t.tencircle=9321,t.tenideographicparen=12841,t.tenparen=9341,t.tenperiod=9361,t.tenroman=8569,t.tesh=679,t.tet=1496,t.tetdagesh=64312,t.tetdageshhebrew=64312,t.tethebrew=1496,t.tetsecyrillic=1205,t.tevirhebrew=1435,t.tevirlefthebrew=1435,t.thabengali=2469,t.thadeva=2341,t.thagujarati=2725,t.thagurmukhi=2597,t.thalarabic=1584,t.thalfinalarabic=65196,t.thanthakhatlowleftthai=63640,t.thanthakhatlowrightthai=63639,t.thanthakhatthai=3660,t.thanthakhatupperleftthai=63638,t.theharabic=1579,t.thehfinalarabic=65178,t.thehinitialarabic=65179,t.thehmedialarabic=65180,t.thereexists=8707,t.therefore=8756,t.theta=952,t.theta1=977,t.thetasymbolgreek=977,t.thieuthacirclekorean=12921,t.thieuthaparenkorean=12825,t.thieuthcirclekorean=12907,t.thieuthkorean=12620,t.thieuthparenkorean=12811,t.thirteencircle=9324,t.thirteenparen=9344,t.thirteenperiod=9364,t.thonangmonthothai=3601,t.thook=429,t.thophuthaothai=3602,t.thorn=254,t.thothahanthai=3607,t.thothanthai=3600,t.thothongthai=3608,t.thothungthai=3606,t.thousandcyrillic=1154,t.thousandsseparatorarabic=1644,t.thousandsseparatorpersian=1644,t.three=51,t.threearabic=1635,t.threebengali=2537,t.threecircle=9314,t.threecircleinversesansserif=10124,t.threedeva=2409,t.threeeighths=8540,t.threegujarati=2793,t.threegurmukhi=2665,t.threehackarabic=1635,t.threehangzhou=12323,t.threeideographicparen=12834,t.threeinferior=8323,t.threemonospace=65299,t.threenumeratorbengali=2550,t.threeoldstyle=63283,t.threeparen=9334,t.threeperiod=9354,t.threepersian=1779,t.threequarters=190,t.threequartersemdash=63198,t.threeroman=8562,t.threesuperior=179,t.threethai=3667,t.thzsquare=13204,t.tihiragana=12385,t.tikatakana=12481,t.tikatakanahalfwidth=65409,t.tikeutacirclekorean=12912,t.tikeutaparenkorean=12816,t.tikeutcirclekorean=12898,t.tikeutkorean=12599,t.tikeutparenkorean=12802,t.tilde=732,t.tildebelowcmb=816,t.tildecmb=771,t.tildecomb=771,t.tildedoublecmb=864,t.tildeoperator=8764,t.tildeoverlaycmb=820,t.tildeverticalcmb=830,t.timescircle=8855,t.tipehahebrew=1430,t.tipehalefthebrew=1430,t.tippigurmukhi=2672,t.titlocyrilliccmb=1155,t.tiwnarmenian=1407,t.tlinebelow=7791,t.tmonospace=65364,t.toarmenian=1385,t.tohiragana=12392,t.tokatakana=12488,t.tokatakanahalfwidth=65412,t.tonebarextrahighmod=741,t.tonebarextralowmod=745,t.tonebarhighmod=742,t.tonebarlowmod=744,t.tonebarmidmod=743,t.tonefive=445,t.tonesix=389,t.tonetwo=424,t.tonos=900,t.tonsquare=13095,t.topatakthai=3599,t.tortoiseshellbracketleft=12308,t.tortoiseshellbracketleftsmall=65117,t.tortoiseshellbracketleftvertical=65081,t.tortoiseshellbracketright=12309,t.tortoiseshellbracketrightsmall=65118,t.tortoiseshellbracketrightvertical=65082,t.totaothai=3605,t.tpalatalhook=427,t.tparen=9391,t.trademark=8482,t.trademarksans=63722,t.trademarkserif=63195,t.tretroflexhook=648,t.triagdn=9660,t.triaglf=9668,t.triagrt=9658,t.triagup=9650,t.ts=678,t.tsadi=1510,t.tsadidagesh=64326,t.tsadidageshhebrew=64326,t.tsadihebrew=1510,t.tsecyrillic=1094,t.tsere=1461,t.tsere12=1461,t.tsere1e=1461,t.tsere2b=1461,t.tserehebrew=1461,t.tserenarrowhebrew=1461,t.tserequarterhebrew=1461,t.tserewidehebrew=1461,t.tshecyrillic=1115,t.tsuperior=63219,t.ttabengali=2463,t.ttadeva=2335,t.ttagujarati=2719,t.ttagurmukhi=2591,t.tteharabic=1657,t.ttehfinalarabic=64359,t.ttehinitialarabic=64360,t.ttehmedialarabic=64361,t.tthabengali=2464,t.tthadeva=2336,t.tthagujarati=2720,t.tthagurmukhi=2592,t.tturned=647,t.tuhiragana=12388,t.tukatakana=12484,t.tukatakanahalfwidth=65410,t.tusmallhiragana=12387,t.tusmallkatakana=12483,t.tusmallkatakanahalfwidth=65391,t.twelvecircle=9323,t.twelveparen=9343,t.twelveperiod=9363,t.twelveroman=8571,t.twentycircle=9331,t.twentyhangzhou=21316,t.twentyparen=9351,t.twentyperiod=9371,t.two=50,t.twoarabic=1634,t.twobengali=2536,t.twocircle=9313,t.twocircleinversesansserif=10123,t.twodeva=2408,t.twodotenleader=8229,t.twodotleader=8229,t.twodotleadervertical=65072,t.twogujarati=2792,t.twogurmukhi=2664,t.twohackarabic=1634,t.twohangzhou=12322,t.twoideographicparen=12833,t.twoinferior=8322,t.twomonospace=65298,t.twonumeratorbengali=2549,t.twooldstyle=63282,t.twoparen=9333,t.twoperiod=9353,t.twopersian=1778,t.tworoman=8561,t.twostroke=443,t.twosuperior=178,t.twothai=3666,t.twothirds=8532,t.u=117,t.uacute=250,t.ubar=649,t.ubengali=2441,t.ubopomofo=12584,t.ubreve=365,t.ucaron=468,t.ucircle=9444,t.ucircumflex=251,t.ucircumflexbelow=7799,t.ucyrillic=1091,t.udattadeva=2385,t.udblacute=369,t.udblgrave=533,t.udeva=2313,t.udieresis=252,t.udieresisacute=472,t.udieresisbelow=7795,t.udieresiscaron=474,t.udieresiscyrillic=1265,t.udieresisgrave=476,t.udieresismacron=470,t.udotbelow=7909,t.ugrave=249,t.ugujarati=2697,t.ugurmukhi=2569,t.uhiragana=12358,t.uhookabove=7911,t.uhorn=432,t.uhornacute=7913,t.uhorndotbelow=7921,t.uhorngrave=7915,t.uhornhookabove=7917,t.uhorntilde=7919,t.uhungarumlaut=369,t.uhungarumlautcyrillic=1267,t.uinvertedbreve=535,t.ukatakana=12454,t.ukatakanahalfwidth=65395,t.ukcyrillic=1145,t.ukorean=12636,t.umacron=363,t.umacroncyrillic=1263,t.umacrondieresis=7803,t.umatragurmukhi=2625,t.umonospace=65365,t.underscore=95,t.underscoredbl=8215,t.underscoremonospace=65343,t.underscorevertical=65075,t.underscorewavy=65103,t.union=8746,t.universal=8704,t.uogonek=371,t.uparen=9392,t.upblock=9600,t.upperdothebrew=1476,t.upsilon=965,t.upsilondieresis=971,t.upsilondieresistonos=944,t.upsilonlatin=650,t.upsilontonos=973,t.uptackbelowcmb=797,t.uptackmod=724,t.uragurmukhi=2675,t.uring=367,t.ushortcyrillic=1118,t.usmallhiragana=12357,t.usmallkatakana=12453,t.usmallkatakanahalfwidth=65385,t.ustraightcyrillic=1199,t.ustraightstrokecyrillic=1201,t.utilde=361,t.utildeacute=7801,t.utildebelow=7797,t.uubengali=2442,t.uudeva=2314,t.uugujarati=2698,t.uugurmukhi=2570,t.uumatragurmukhi=2626,t.uuvowelsignbengali=2498,t.uuvowelsigndeva=2370,t.uuvowelsigngujarati=2754,t.uvowelsignbengali=2497,t.uvowelsigndeva=2369,t.uvowelsigngujarati=2753,t.v=118,t.vadeva=2357,t.vagujarati=2741,t.vagurmukhi=2613,t.vakatakana=12535,t.vav=1493,t.vavdagesh=64309,t.vavdagesh65=64309,t.vavdageshhebrew=64309,t.vavhebrew=1493,t.vavholam=64331,t.vavholamhebrew=64331,t.vavvavhebrew=1520,t.vavyodhebrew=1521,t.vcircle=9445,t.vdotbelow=7807,t.vecyrillic=1074,t.veharabic=1700,t.vehfinalarabic=64363,t.vehinitialarabic=64364,t.vehmedialarabic=64365,t.vekatakana=12537,t.venus=9792,t.verticalbar=124,t.verticallineabovecmb=781,t.verticallinebelowcmb=809,t.verticallinelowmod=716,t.verticallinemod=712,t.vewarmenian=1406,t.vhook=651,t.vikatakana=12536,t.viramabengali=2509,t.viramadeva=2381,t.viramagujarati=2765,t.visargabengali=2435,t.visargadeva=2307,t.visargagujarati=2691,t.vmonospace=65366,t.voarmenian=1400,t.voicediterationhiragana=12446,t.voicediterationkatakana=12542,t.voicedmarkkana=12443,t.voicedmarkkanahalfwidth=65438,t.vokatakana=12538,t.vparen=9393,t.vtilde=7805,t.vturned=652,t.vuhiragana=12436,t.vukatakana=12532,t.w=119,t.wacute=7811,t.waekorean=12633,t.wahiragana=12431,t.wakatakana=12527,t.wakatakanahalfwidth=65436,t.wakorean=12632,t.wasmallhiragana=12430,t.wasmallkatakana=12526,t.wattosquare=13143,t.wavedash=12316,t.wavyunderscorevertical=65076,t.wawarabic=1608,t.wawfinalarabic=65262,t.wawhamzaabovearabic=1572,t.wawhamzaabovefinalarabic=65158,t.wbsquare=13277,t.wcircle=9446,t.wcircumflex=373,t.wdieresis=7813,t.wdotaccent=7815,t.wdotbelow=7817,t.wehiragana=12433,t.weierstrass=8472,t.wekatakana=12529,t.wekorean=12638,t.weokorean=12637,t.wgrave=7809,t.whitebullet=9702,t.whitecircle=9675,t.whitecircleinverse=9689,t.whitecornerbracketleft=12302,t.whitecornerbracketleftvertical=65091,t.whitecornerbracketright=12303,t.whitecornerbracketrightvertical=65092,t.whitediamond=9671,t.whitediamondcontainingblacksmalldiamond=9672,t.whitedownpointingsmalltriangle=9663;t.whitedownpointingtriangle=9661,t.whiteleftpointingsmalltriangle=9667,t.whiteleftpointingtriangle=9665,t.whitelenticularbracketleft=12310,t.whitelenticularbracketright=12311,t.whiterightpointingsmalltriangle=9657,t.whiterightpointingtriangle=9655,t.whitesmallsquare=9643,t.whitesmilingface=9786,t.whitesquare=9633,t.whitestar=9734,t.whitetelephone=9743,t.whitetortoiseshellbracketleft=12312,t.whitetortoiseshellbracketright=12313,t.whiteuppointingsmalltriangle=9653,t.whiteuppointingtriangle=9651,t.wihiragana=12432,t.wikatakana=12528,t.wikorean=12639,t.wmonospace=65367,t.wohiragana=12434,t.wokatakana=12530,t.wokatakanahalfwidth=65382,t.won=8361,t.wonmonospace=65510,t.wowaenthai=3623,t.wparen=9394,t.wring=7832,t.wsuperior=695,t.wturned=653,t.wynn=447,t.x=120,t.xabovecmb=829,t.xbopomofo=12562,t.xcircle=9447,t.xdieresis=7821,t.xdotaccent=7819,t.xeharmenian=1389,t.xi=958,t.xmonospace=65368,t.xparen=9395,t.xsuperior=739,t.y=121,t.yaadosquare=13134,t.yabengali=2479,t.yacute=253,t.yadeva=2351,t.yaekorean=12626,t.yagujarati=2735,t.yagurmukhi=2607,t.yahiragana=12420,t.yakatakana=12516,t.yakatakanahalfwidth=65428,t.yakorean=12625,t.yamakkanthai=3662,t.yasmallhiragana=12419,t.yasmallkatakana=12515,t.yasmallkatakanahalfwidth=65388,t.yatcyrillic=1123,t.ycircle=9448,t.ycircumflex=375,t.ydieresis=255,t.ydotaccent=7823,t.ydotbelow=7925,t.yeharabic=1610,t.yehbarreearabic=1746,t.yehbarreefinalarabic=64431,t.yehfinalarabic=65266,t.yehhamzaabovearabic=1574,t.yehhamzaabovefinalarabic=65162,t.yehhamzaaboveinitialarabic=65163,t.yehhamzaabovemedialarabic=65164,t.yehinitialarabic=65267,t.yehmedialarabic=65268,t.yehmeeminitialarabic=64733,t.yehmeemisolatedarabic=64600,t.yehnoonfinalarabic=64660,t.yehthreedotsbelowarabic=1745,t.yekorean=12630,t.yen=165,t.yenmonospace=65509,t.yeokorean=12629,t.yeorinhieuhkorean=12678,t.yerahbenyomohebrew=1450,t.yerahbenyomolefthebrew=1450,t.yericyrillic=1099,t.yerudieresiscyrillic=1273,t.yesieungkorean=12673,t.yesieungpansioskorean=12675,t.yesieungsioskorean=12674,t.yetivhebrew=1434,t.ygrave=7923,t.yhook=436,t.yhookabove=7927,t.yiarmenian=1397,t.yicyrillic=1111,t.yikorean=12642,t.yinyang=9775,t.yiwnarmenian=1410,t.ymonospace=65369,t.yod=1497,t.yoddagesh=64313,t.yoddageshhebrew=64313,t.yodhebrew=1497,t.yodyodhebrew=1522,t.yodyodpatahhebrew=64287,t.yohiragana=12424,t.yoikorean=12681,t.yokatakana=12520,t.yokatakanahalfwidth=65430,t.yokorean=12635,t.yosmallhiragana=12423,t.yosmallkatakana=12519,t.yosmallkatakanahalfwidth=65390,t.yotgreek=1011,t.yoyaekorean=12680,t.yoyakorean=12679,t.yoyakthai=3618,t.yoyingthai=3597,t.yparen=9396,t.ypogegrammeni=890,t.ypogegrammenigreekcmb=837,t.yr=422,t.yring=7833,t.ysuperior=696,t.ytilde=7929,t.yturned=654,t.yuhiragana=12422,t.yuikorean=12684,t.yukatakana=12518,t.yukatakanahalfwidth=65429,t.yukorean=12640,t.yusbigcyrillic=1131,t.yusbigiotifiedcyrillic=1133,t.yuslittlecyrillic=1127,t.yuslittleiotifiedcyrillic=1129,t.yusmallhiragana=12421,t.yusmallkatakana=12517,t.yusmallkatakanahalfwidth=65389,t.yuyekorean=12683,t.yuyeokorean=12682,t.yyabengali=2527,t.yyadeva=2399,t.z=122,t.zaarmenian=1382,t.zacute=378,t.zadeva=2395,t.zagurmukhi=2651,t.zaharabic=1592,t.zahfinalarabic=65222,t.zahinitialarabic=65223,t.zahiragana=12374,t.zahmedialarabic=65224,t.zainarabic=1586,t.zainfinalarabic=65200,t.zakatakana=12470,t.zaqefgadolhebrew=1429,t.zaqefqatanhebrew=1428,t.zarqahebrew=1432,t.zayin=1494,t.zayindagesh=64310,t.zayindageshhebrew=64310,t.zayinhebrew=1494,t.zbopomofo=12567,t.zcaron=382,t.zcircle=9449,t.zcircumflex=7825,t.zcurl=657,t.zdot=380,t.zdotaccent=380,t.zdotbelow=7827,t.zecyrillic=1079,t.zedescendercyrillic=1177,t.zedieresiscyrillic=1247,t.zehiragana=12380,t.zekatakana=12476,t.zero=48,t.zeroarabic=1632,t.zerobengali=2534,t.zerodeva=2406,t.zerogujarati=2790,t.zerogurmukhi=2662,t.zerohackarabic=1632,t.zeroinferior=8320,t.zeromonospace=65296,t.zerooldstyle=63280,t.zeropersian=1776,t.zerosuperior=8304,t.zerothai=3664,t.zerowidthjoiner=65279,t.zerowidthnonjoiner=8204,t.zerowidthspace=8203,t.zeta=950,t.zhbopomofo=12563,t.zhearmenian=1386,t.zhebrevecyrillic=1218,t.zhecyrillic=1078,t.zhedescendercyrillic=1175,t.zhedieresiscyrillic=1245,t.zihiragana=12376,t.zikatakana=12472,t.zinorhebrew=1454,t.zlinebelow=7829,t.zmonospace=65370,t.zohiragana=12382,t.zokatakana=12478,t.zparen=9397,t.zretroflexhook=656,t.zstroke=438,t.zuhiragana=12378,t.zukatakana=12474,t[".notdef"]=0,t.angbracketleftbig=9001,t.angbracketleftBig=9001,t.angbracketleftbigg=9001,t.angbracketleftBigg=9001,t.angbracketrightBig=9002,t.angbracketrightbig=9002,t.angbracketrightBigg=9002,t.angbracketrightbigg=9002,t.arrowhookleft=8618,t.arrowhookright=8617,t.arrowlefttophalf=8636,t.arrowleftbothalf=8637,t.arrownortheast=8599,t.arrownorthwest=8598,t.arrowrighttophalf=8640,t.arrowrightbothalf=8641,t.arrowsoutheast=8600,t.arrowsouthwest=8601,t.backslashbig=8726,t.backslashBig=8726,t.backslashBigg=8726,t.backslashbigg=8726,t.bardbl=8214,t.bracehtipdownleft=65079,t.bracehtipdownright=65079,t.bracehtipupleft=65080,t.bracehtipupright=65080,t.braceleftBig=123,t.braceleftbig=123,t.braceleftbigg=123,t.braceleftBigg=123,t.bracerightBig=125,t.bracerightbig=125,t.bracerightbigg=125,t.bracerightBigg=125,t.bracketleftbig=91,t.bracketleftBig=91,t.bracketleftbigg=91,t.bracketleftBigg=91,t.bracketrightBig=93,t.bracketrightbig=93,t.bracketrightbigg=93,t.bracketrightBigg=93,t.ceilingleftbig=8968,t.ceilingleftBig=8968,t.ceilingleftBigg=8968,t.ceilingleftbigg=8968,t.ceilingrightbig=8969,t.ceilingrightBig=8969,t.ceilingrightbigg=8969,t.ceilingrightBigg=8969,t.circledotdisplay=8857,t.circledottext=8857,t.circlemultiplydisplay=8855,t.circlemultiplytext=8855,t.circleplusdisplay=8853,t.circleplustext=8853,t.contintegraldisplay=8750,t.contintegraltext=8750,t.coproductdisplay=8720,t.coproducttext=8720,t.floorleftBig=8970,t.floorleftbig=8970,t.floorleftbigg=8970,t.floorleftBigg=8970,t.floorrightbig=8971,t.floorrightBig=8971,t.floorrightBigg=8971,t.floorrightbigg=8971,t.hatwide=770,t.hatwider=770,t.hatwidest=770,t.intercal=7488,t.integraldisplay=8747,t.integraltext=8747,t.intersectiondisplay=8898,t.intersectiontext=8898,t.logicalanddisplay=8743,t.logicalandtext=8743,t.logicalordisplay=8744,t.logicalortext=8744,t.parenleftBig=40,t.parenleftbig=40,t.parenleftBigg=40,t.parenleftbigg=40,t.parenrightBig=41,t.parenrightbig=41,t.parenrightBigg=41,t.parenrightbigg=41,t.prime=8242,t.productdisplay=8719,t.producttext=8719,t.radicalbig=8730,t.radicalBig=8730,t.radicalBigg=8730,t.radicalbigg=8730,t.radicalbt=8730,t.radicaltp=8730,t.radicalvertex=8730,t.slashbig=47,t.slashBig=47,t.slashBigg=47,t.slashbigg=47,t.summationdisplay=8721,t.summationtext=8721,t.tildewide=732,t.tildewider=732,t.tildewidest=732,t.uniondisplay=8899,t.unionmultidisplay=8846,t.unionmultitext=8846,t.unionsqdisplay=8852,t.unionsqtext=8852,t.uniontext=8899,t.vextenddouble=8741,t.vextendsingle=8739}));e.getGlyphsUnicode=r;const o=(0,i.getLookupTableFactory)((function(t){t.space=32,t.a1=9985,t.a2=9986,t.a202=9987,t.a3=9988,t.a4=9742,t.a5=9990,t.a119=9991,t.a118=9992,t.a117=9993,t.a11=9755,t.a12=9758,t.a13=9996,t.a14=9997,t.a15=9998,t.a16=9999,t.a105=1e4,t.a17=10001,t.a18=10002,t.a19=10003,t.a20=10004,t.a21=10005,t.a22=10006,t.a23=10007,t.a24=10008,t.a25=10009,t.a26=10010,t.a27=10011,t.a28=10012,t.a6=10013,t.a7=10014,t.a8=10015,t.a9=10016,t.a10=10017,t.a29=10018,t.a30=10019,t.a31=10020,t.a32=10021,t.a33=10022,t.a34=10023,t.a35=9733,t.a36=10025,t.a37=10026,t.a38=10027,t.a39=10028,t.a40=10029,t.a41=10030,t.a42=10031,t.a43=10032,t.a44=10033,t.a45=10034,t.a46=10035,t.a47=10036,t.a48=10037,t.a49=10038,t.a50=10039,t.a51=10040,t.a52=10041,t.a53=10042,t.a54=10043,t.a55=10044,t.a56=10045,t.a57=10046,t.a58=10047,t.a59=10048,t.a60=10049,t.a61=10050,t.a62=10051,t.a63=10052,t.a64=10053,t.a65=10054,t.a66=10055,t.a67=10056,t.a68=10057,t.a69=10058,t.a70=10059,t.a71=9679,t.a72=10061,t.a73=9632,t.a74=10063,t.a203=10064,t.a75=10065,t.a204=10066,t.a76=9650,t.a77=9660,t.a78=9670,t.a79=10070,t.a81=9687,t.a82=10072,t.a83=10073,t.a84=10074,t.a97=10075,t.a98=10076,t.a99=10077,t.a100=10078,t.a101=10081,t.a102=10082,t.a103=10083,t.a104=10084,t.a106=10085,t.a107=10086,t.a108=10087,t.a112=9827,t.a111=9830,t.a110=9829,t.a109=9824,t.a120=9312,t.a121=9313,t.a122=9314,t.a123=9315,t.a124=9316,t.a125=9317,t.a126=9318,t.a127=9319,t.a128=9320,t.a129=9321,t.a130=10102,t.a131=10103,t.a132=10104,t.a133=10105,t.a134=10106,t.a135=10107,t.a136=10108,t.a137=10109,t.a138=10110,t.a139=10111,t.a140=10112,t.a141=10113,t.a142=10114,t.a143=10115,t.a144=10116,t.a145=10117,t.a146=10118,t.a147=10119,t.a148=10120,t.a149=10121,t.a150=10122,t.a151=10123,t.a152=10124,t.a153=10125,t.a154=10126,t.a155=10127,t.a156=10128,t.a157=10129,t.a158=10130,t.a159=10131,t.a160=10132,t.a161=8594,t.a163=8596,t.a164=8597,t.a196=10136,t.a165=10137,t.a192=10138,t.a166=10139,t.a167=10140,t.a168=10141,t.a169=10142,t.a170=10143,t.a171=10144,t.a172=10145,t.a173=10146,t.a162=10147,t.a174=10148,t.a175=10149,t.a176=10150,t.a177=10151,t.a178=10152,t.a179=10153,t.a193=10154,t.a180=10155,t.a199=10156,t.a181=10157,t.a200=10158,t.a182=10159,t.a201=10161,t.a183=10162,t.a184=10163,t.a197=10164,t.a185=10165,t.a194=10166,t.a198=10167,t.a186=10168,t.a195=10169,t.a187=10170,t.a188=10171,t.a189=10172,t.a190=10173,t.a191=10174,t.a89=10088,t.a90=10089,t.a93=10090,t.a94=10091,t.a91=10092,t.a92=10093,t.a205=10094,t.a85=10095,t.a206=10096,t.a86=10097,t.a87=10098,t.a88=10099,t.a95=10100,t.a96=10101,t[".notdef"]=0}));e.getDingbatsGlyphsUnicode=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clearUnicodeCaches=function(){s.clear()},e.getCharUnicodeCategory=function(t){const e=s.get(t);if(e)return e;const n=t.match(o),i={isWhitespace:!!n?.[1],isZeroWidthDiacritic:!!n?.[2],isInvisibleFormatMark:!!n?.[3]};return s.set(t,i),i},e.getUnicodeForGlyph=function(t,e){let n=e[t];if(void 0!==n)return n;if(!t)return-1;if("u"===t[0]){const e=t.length;let i;if(7===e&&"n"===t[1]&&"i"===t[2])i=t.substring(3);else{if(!(e>=5&&e<=7))return-1;i=t.substring(1)}if(i===i.toUpperCase()&&(n=parseInt(i,16),n>=0))return n}return-1},e.getUnicodeRangeFor=function(t,e=-1){if(-1!==e){const n=r[e];for(let i=0,r=n.length;i<r;i+=2)if(t>=n[i]&&t<=n[i+1])return e}for(let e=0,n=r.length;e<n;e++){const n=r[e];for(let i=0,r=n.length;i<r;i+=2)if(t>=n[i]&&t<=n[i+1])return e}return-1},e.mapSpecialUnicodeValues=function(t){return t>=65520&&t<=65535?0:t>=62976&&t<=63743?i()[t]||t:173===t?45:t};const i=(0,n(3).getLookupTableFactory)((function(t){t[63721]=169,t[63193]=169,t[63720]=174,t[63194]=174,t[63722]=8482,t[63195]=8482,t[63729]=9127,t[63730]=9128,t[63731]=9129,t[63740]=9131,t[63741]=9132,t[63742]=9133,t[63726]=9121,t[63727]=9122,t[63728]=9123,t[63737]=9124,t[63738]=9125,t[63739]=9126,t[63723]=9115,t[63724]=9116,t[63725]=9117,t[63734]=9118,t[63735]=9119,t[63736]=9120})),r=[[0,127],[128,255],[256,383],[384,591],[592,687,7424,7551,7552,7615],[688,767,42752,42783],[768,879,7616,7679],[880,1023],[11392,11519],[1024,1279,1280,1327,11744,11775,42560,42655],[1328,1423],[1424,1535],[42240,42559],[1536,1791,1872,1919],[1984,2047],[2304,2431],[2432,2559],[2560,2687],[2688,2815],[2816,2943],[2944,3071],[3072,3199],[3200,3327],[3328,3455],[3584,3711],[3712,3839],[4256,4351,11520,11567],[6912,7039],[4352,4607],[7680,7935,11360,11391,42784,43007],[7936,8191],[8192,8303,11776,11903],[8304,8351],[8352,8399],[8400,8447],[8448,8527],[8528,8591],[8592,8703,10224,10239,10496,10623,11008,11263],[8704,8959,10752,11007,10176,10223,10624,10751],[8960,9215],[9216,9279],[9280,9311],[9312,9471],[9472,9599],[9600,9631],[9632,9727],[9728,9983],[9984,10175],[12288,12351],[12352,12447],[12448,12543,12784,12799],[12544,12591,12704,12735],[12592,12687],[43072,43135],[12800,13055],[13056,13311],[44032,55215],[55296,57343],[67840,67871],[19968,40959,11904,12031,12032,12255,12272,12287,13312,19903,131072,173791,12688,12703],[57344,63743],[12736,12783,63744,64255,194560,195103],[64256,64335],[64336,65023],[65056,65071],[65040,65055],[65104,65135],[65136,65279],[65280,65519],[65520,65535],[3840,4095],[1792,1871],[1920,1983],[3456,3583],[4096,4255],[4608,4991,4992,5023,11648,11743],[5024,5119],[5120,5759],[5760,5791],[5792,5887],[6016,6143],[6144,6319],[10240,10495],[40960,42127],[5888,5919,5920,5951,5952,5983,5984,6015],[66304,66351],[66352,66383],[66560,66639],[118784,119039,119040,119295,119296,119375],[119808,120831],[1044480,1048573],[65024,65039,917760,917999],[917504,917631],[6400,6479],[6480,6527],[6528,6623],[6656,6687],[11264,11359],[11568,11647],[19904,19967],[43008,43055],[65536,65663,65664,65791,65792,65855],[65856,65935],[66432,66463],[66464,66527],[66640,66687],[66688,66735],[67584,67647],[68096,68191],[119552,119647],[73728,74751,74752,74879],[119648,119679],[7040,7103],[7168,7247],[7248,7295],[43136,43231],[43264,43311],[43312,43359],[43520,43615],[65936,65999],[66e3,66047],[66208,66271,66176,66207,67872,67903],[127024,127135,126976,127023]],o=new RegExp("^(\\s)|(\\p{Mn})|(\\p{Cf})$","u"),s=new Map},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getSerifFonts=e.getNonStdFontMap=e.getGlyphMapForStandardFonts=e.getFontNameToFileMap=void 0,e.getStandardFontName=function(t){const e=(0,r.normalizeFontName)(t);return o()[e]},e.getSymbolsFonts=e.getSupplementalGlyphMapForCalibri=e.getSupplementalGlyphMapForArialBlack=e.getStdFontMap=void 0,e.isKnownFontName=function(t){const e=(0,r.normalizeFontName)(t);return!!(o()[e]||a()[e]||l()[e]||c()[e])};var i=n(3),r=n(38);const o=(0,i.getLookupTableFactory)((function(t){t["Times-Roman"]="Times-Roman",t.Helvetica="Helvetica",t.Courier="Courier",t.Symbol="Symbol",t["Times-Bold"]="Times-Bold",t["Helvetica-Bold"]="Helvetica-Bold",t["Courier-Bold"]="Courier-Bold",t.ZapfDingbats="ZapfDingbats",t["Times-Italic"]="Times-Italic",t["Helvetica-Oblique"]="Helvetica-Oblique",t["Courier-Oblique"]="Courier-Oblique",t["Times-BoldItalic"]="Times-BoldItalic",t["Helvetica-BoldOblique"]="Helvetica-BoldOblique",t["Courier-BoldOblique"]="Courier-BoldOblique",t.ArialNarrow="Helvetica",t["ArialNarrow-Bold"]="Helvetica-Bold",t["ArialNarrow-BoldItalic"]="Helvetica-BoldOblique",t["ArialNarrow-Italic"]="Helvetica-Oblique",t.ArialBlack="Helvetica",t["ArialBlack-Bold"]="Helvetica-Bold",t["ArialBlack-BoldItalic"]="Helvetica-BoldOblique",t["ArialBlack-Italic"]="Helvetica-Oblique",t["Arial-Black"]="Helvetica",t["Arial-Black-Bold"]="Helvetica-Bold",t["Arial-Black-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Black-Italic"]="Helvetica-Oblique",t.Arial="Helvetica",t["Arial-Bold"]="Helvetica-Bold",t["Arial-BoldItalic"]="Helvetica-BoldOblique",t["Arial-Italic"]="Helvetica-Oblique",t.ArialMT="Helvetica",t["Arial-BoldItalicMT"]="Helvetica-BoldOblique",t["Arial-BoldMT"]="Helvetica-Bold",t["Arial-ItalicMT"]="Helvetica-Oblique",t["Arial-BoldItalicMT-BoldItalic"]="Helvetica-BoldOblique",t["Arial-BoldMT-Bold"]="Helvetica-Bold",t["Arial-ItalicMT-Italic"]="Helvetica-Oblique",t.ArialUnicodeMS="Helvetica",t["ArialUnicodeMS-Bold"]="Helvetica-Bold",t["ArialUnicodeMS-BoldItalic"]="Helvetica-BoldOblique",t["ArialUnicodeMS-Italic"]="Helvetica-Oblique",t["Courier-BoldItalic"]="Courier-BoldOblique",t["Courier-Italic"]="Courier-Oblique",t.CourierNew="Courier",t["CourierNew-Bold"]="Courier-Bold",t["CourierNew-BoldItalic"]="Courier-BoldOblique",t["CourierNew-Italic"]="Courier-Oblique",t["CourierNewPS-BoldItalicMT"]="Courier-BoldOblique",t["CourierNewPS-BoldMT"]="Courier-Bold",t["CourierNewPS-ItalicMT"]="Courier-Oblique",t.CourierNewPSMT="Courier",t["Helvetica-BoldItalic"]="Helvetica-BoldOblique",t["Helvetica-Italic"]="Helvetica-Oblique",t["Symbol-Bold"]="Symbol",t["Symbol-BoldItalic"]="Symbol",t["Symbol-Italic"]="Symbol",t.TimesNewRoman="Times-Roman",t["TimesNewRoman-Bold"]="Times-Bold",t["TimesNewRoman-BoldItalic"]="Times-BoldItalic",t["TimesNewRoman-Italic"]="Times-Italic",t.TimesNewRomanPS="Times-Roman",t["TimesNewRomanPS-Bold"]="Times-Bold",t["TimesNewRomanPS-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPS-BoldItalicMT"]="Times-BoldItalic",t["TimesNewRomanPS-BoldMT"]="Times-Bold",t["TimesNewRomanPS-Italic"]="Times-Italic",t["TimesNewRomanPS-ItalicMT"]="Times-Italic",t.TimesNewRomanPSMT="Times-Roman",t["TimesNewRomanPSMT-Bold"]="Times-Bold",t["TimesNewRomanPSMT-BoldItalic"]="Times-BoldItalic",t["TimesNewRomanPSMT-Italic"]="Times-Italic"}));e.getStdFontMap=o;const s=(0,i.getLookupTableFactory)((function(t){t.Courier="FoxitFixed.pfb",t["Courier-Bold"]="FoxitFixedBold.pfb",t["Courier-BoldOblique"]="FoxitFixedBoldItalic.pfb",t["Courier-Oblique"]="FoxitFixedItalic.pfb",t.Helvetica="LiberationSans-Regular.ttf",t["Helvetica-Bold"]="LiberationSans-Bold.ttf",t["Helvetica-BoldOblique"]="LiberationSans-BoldItalic.ttf",t["Helvetica-Oblique"]="LiberationSans-Italic.ttf",t["Times-Roman"]="FoxitSerif.pfb",t["Times-Bold"]="FoxitSerifBold.pfb",t["Times-BoldItalic"]="FoxitSerifBoldItalic.pfb",t["Times-Italic"]="FoxitSerifItalic.pfb",t.Symbol="FoxitSymbol.pfb",t.ZapfDingbats="FoxitDingbats.pfb",t["LiberationSans-Regular"]="LiberationSans-Regular.ttf",t["LiberationSans-Bold"]="LiberationSans-Bold.ttf",t["LiberationSans-Italic"]="LiberationSans-Italic.ttf",t["LiberationSans-BoldItalic"]="LiberationSans-BoldItalic.ttf"}));e.getFontNameToFileMap=s;const a=(0,i.getLookupTableFactory)((function(t){t.Calibri="Helvetica",t["Calibri-Bold"]="Helvetica-Bold",t["Calibri-BoldItalic"]="Helvetica-BoldOblique",t["Calibri-Italic"]="Helvetica-Oblique",t.CenturyGothic="Helvetica",t["CenturyGothic-Bold"]="Helvetica-Bold",t["CenturyGothic-BoldItalic"]="Helvetica-BoldOblique",t["CenturyGothic-Italic"]="Helvetica-Oblique",t.ComicSansMS="Comic Sans MS",t["ComicSansMS-Bold"]="Comic Sans MS-Bold",t["ComicSansMS-BoldItalic"]="Comic Sans MS-BoldItalic",t["ComicSansMS-Italic"]="Comic Sans MS-Italic",t.Impact="Helvetica",t["ItcSymbol-Bold"]="Helvetica-Bold",t["ItcSymbol-BoldItalic"]="Helvetica-BoldOblique",t["ItcSymbol-Book"]="Helvetica",t["ItcSymbol-BookItalic"]="Helvetica-Oblique",t["ItcSymbol-Medium"]="Helvetica",t["ItcSymbol-MediumItalic"]="Helvetica-Oblique",t.LucidaConsole="Courier",t["LucidaConsole-Bold"]="Courier-Bold",t["LucidaConsole-BoldItalic"]="Courier-BoldOblique",t["LucidaConsole-Italic"]="Courier-Oblique",t["LucidaSans-Demi"]="Helvetica-Bold",t["MS-Gothic"]="MS Gothic",t["MS-Gothic-Bold"]="MS Gothic-Bold",t["MS-Gothic-BoldItalic"]="MS Gothic-BoldItalic",t["MS-Gothic-Italic"]="MS Gothic-Italic",t["MS-Mincho"]="MS Mincho",t["MS-Mincho-Bold"]="MS Mincho-Bold",t["MS-Mincho-BoldItalic"]="MS Mincho-BoldItalic",t["MS-Mincho-Italic"]="MS Mincho-Italic",t["MS-PGothic"]="MS PGothic",t["MS-PGothic-Bold"]="MS PGothic-Bold",t["MS-PGothic-BoldItalic"]="MS PGothic-BoldItalic",t["MS-PGothic-Italic"]="MS PGothic-Italic",t["MS-PMincho"]="MS PMincho",t["MS-PMincho-Bold"]="MS PMincho-Bold",t["MS-PMincho-BoldItalic"]="MS PMincho-BoldItalic",t["MS-PMincho-Italic"]="MS PMincho-Italic",t.NuptialScript="Times-Italic",t.SegoeUISymbol="Helvetica"}));e.getNonStdFontMap=a;const l=(0,i.getLookupTableFactory)((function(t){t["Adobe Jenson"]=!0,t["Adobe Text"]=!0,t.Albertus=!0,t.Aldus=!0,t.Alexandria=!0,t.Algerian=!0,t["American Typewriter"]=!0,t.Antiqua=!0,t.Apex=!0,t.Arno=!0,t.Aster=!0,t.Aurora=!0,t.Baskerville=!0,t.Bell=!0,t.Bembo=!0,t["Bembo Schoolbook"]=!0,t.Benguiat=!0,t["Berkeley Old Style"]=!0,t["Bernhard Modern"]=!0,t["Berthold City"]=!0,t.Bodoni=!0,t["Bauer Bodoni"]=!0,t["Book Antiqua"]=!0,t.Bookman=!0,t["Bordeaux Roman"]=!0,t["Californian FB"]=!0,t.Calisto=!0,t.Calvert=!0,t.Capitals=!0,t.Cambria=!0,t.Cartier=!0,t.Caslon=!0,t.Catull=!0,t.Centaur=!0,t["Century Old Style"]=!0,t["Century Schoolbook"]=!0,t.Chaparral=!0,t["Charis SIL"]=!0,t.Cheltenham=!0,t["Cholla Slab"]=!0,t.Clarendon=!0,t.Clearface=!0,t.Cochin=!0,t.Colonna=!0,t["Computer Modern"]=!0,t["Concrete Roman"]=!0,t.Constantia=!0,t["Cooper Black"]=!0,t.Corona=!0,t.Ecotype=!0,t.Egyptienne=!0,t.Elephant=!0,t.Excelsior=!0,t.Fairfield=!0,t["FF Scala"]=!0,t.Folkard=!0,t.Footlight=!0,t.FreeSerif=!0,t["Friz Quadrata"]=!0,t.Garamond=!0,t.Gentium=!0,t.Georgia=!0,t.Gloucester=!0,t["Goudy Old Style"]=!0,t["Goudy Schoolbook"]=!0,t["Goudy Pro Font"]=!0,t.Granjon=!0,t["Guardian Egyptian"]=!0,t.Heather=!0,t.Hercules=!0,t["High Tower Text"]=!0,t.Hiroshige=!0,t["Hoefler Text"]=!0,t["Humana Serif"]=!0,t.Imprint=!0,t["Ionic No. 5"]=!0,t.Janson=!0,t.Joanna=!0,t.Korinna=!0,t.Lexicon=!0,t.LiberationSerif=!0,t["Liberation Serif"]=!0,t["Linux Libertine"]=!0,t.Literaturnaya=!0,t.Lucida=!0,t["Lucida Bright"]=!0,t.Melior=!0,t.Memphis=!0,t.Miller=!0,t.Minion=!0,t.Modern=!0,t["Mona Lisa"]=!0,t["Mrs Eaves"]=!0,t["MS Serif"]=!0,t["Museo Slab"]=!0,t["New York"]=!0,t["Nimbus Roman"]=!0,t["NPS Rawlinson Roadway"]=!0,t.NuptialScript=!0,t.Palatino=!0,t.Perpetua=!0,t.Plantin=!0,t["Plantin Schoolbook"]=!0,t.Playbill=!0,t["Poor Richard"]=!0,t["Rawlinson Roadway"]=!0,t.Renault=!0,t.Requiem=!0,t.Rockwell=!0,t.Roman=!0,t["Rotis Serif"]=!0,t.Sabon=!0,t.Scala=!0,t.Seagull=!0,t.Sistina=!0,t.Souvenir=!0,t.STIX=!0,t["Stone Informal"]=!0,t["Stone Serif"]=!0,t.Sylfaen=!0,t.Times=!0,t.Trajan=!0,t["Trinité"]=!0,t["Trump Mediaeval"]=!0,t.Utopia=!0,t["Vale Type"]=!0,t["Bitstream Vera"]=!0,t["Vera Serif"]=!0,t.Versailles=!0,t.Wanted=!0,t.Weiss=!0,t["Wide Latin"]=!0,t.Windsor=!0,t.XITS=!0}));e.getSerifFonts=l;const c=(0,i.getLookupTableFactory)((function(t){t.Dingbats=!0,t.Symbol=!0,t.ZapfDingbats=!0,t.Wingdings=!0,t["Wingdings-Bold"]=!0,t["Wingdings-Regular"]=!0}));e.getSymbolsFonts=c;const h=(0,i.getLookupTableFactory)((function(t){t[2]=10,t[3]=32,t[4]=33,t[5]=34,t[6]=35,t[7]=36,t[8]=37,t[9]=38,t[10]=39,t[11]=40,t[12]=41,t[13]=42,t[14]=43,t[15]=44,t[16]=45,t[17]=46,t[18]=47,t[19]=48,t[20]=49,t[21]=50,t[22]=51,t[23]=52,t[24]=53,t[25]=54,t[26]=55,t[27]=56,t[28]=57,t[29]=58,t[30]=894,t[31]=60,t[32]=61,t[33]=62,t[34]=63,t[35]=64,t[36]=65,t[37]=66,t[38]=67,t[39]=68,t[40]=69,t[41]=70,t[42]=71,t[43]=72,t[44]=73,t[45]=74,t[46]=75,t[47]=76,t[48]=77,t[49]=78,t[50]=79,t[51]=80,t[52]=81,t[53]=82,t[54]=83,t[55]=84,t[56]=85,t[57]=86,t[58]=87,t[59]=88,t[60]=89,t[61]=90,t[62]=91,t[63]=92,t[64]=93,t[65]=94,t[66]=95,t[67]=96,t[68]=97,t[69]=98,t[70]=99,t[71]=100,t[72]=101,t[73]=102,t[74]=103,t[75]=104,t[76]=105,t[77]=106,t[78]=107,t[79]=108,t[80]=109,t[81]=110,t[82]=111,t[83]=112,t[84]=113,t[85]=114,t[86]=115,t[87]=116,t[88]=117,t[89]=118,t[90]=119,t[91]=120,t[92]=121,t[93]=122,t[94]=123,t[95]=124,t[96]=125,t[97]=126,t[98]=196,t[99]=197,t[100]=199,t[101]=201,t[102]=209,t[103]=214,t[104]=220,t[105]=225,t[106]=224,t[107]=226,t[108]=228,t[109]=227,t[110]=229,t[111]=231,t[112]=233,t[113]=232,t[114]=234,t[115]=235,t[116]=237,t[117]=236,t[118]=238,t[119]=239,t[120]=241,t[121]=243,t[122]=242,t[123]=244,t[124]=246,t[125]=245,t[126]=250,t[127]=249,t[128]=251,t[129]=252,t[130]=8224,t[131]=176,t[132]=162,t[133]=163,t[134]=167,t[135]=8226,t[136]=182,t[137]=223,t[138]=174,t[139]=169,t[140]=8482,t[141]=180,t[142]=168,t[143]=8800,t[144]=198,t[145]=216,t[146]=8734,t[147]=177,t[148]=8804,t[149]=8805,t[150]=165,t[151]=181,t[152]=8706,t[153]=8721,t[154]=8719,t[156]=8747,t[157]=170,t[158]=186,t[159]=8486,t[160]=230,t[161]=248,t[162]=191,t[163]=161,t[164]=172,t[165]=8730,t[166]=402,t[167]=8776,t[168]=8710,t[169]=171,t[170]=187,t[171]=8230,t[179]=8220,t[180]=8221,t[181]=8216,t[182]=8217,t[200]=193,t[203]=205,t[207]=211,t[210]=218,t[223]=711,t[224]=321,t[225]=322,t[226]=352,t[227]=353,t[228]=381,t[229]=382,t[233]=221,t[234]=253,t[252]=263,t[253]=268,t[254]=269,t[258]=258,t[260]=260,t[261]=261,t[265]=280,t[266]=281,t[267]=282,t[268]=283,t[269]=313,t[275]=323,t[276]=324,t[278]=328,t[283]=344,t[284]=345,t[285]=346,t[286]=347,t[292]=367,t[295]=377,t[296]=378,t[298]=380,t[305]=963,t[306]=964,t[307]=966,t[308]=8215,t[309]=8252,t[310]=8319,t[311]=8359,t[312]=8592,t[313]=8593,t[337]=9552,t[493]=1039,t[494]=1040,t[672]=1488,t[673]=1489,t[674]=1490,t[675]=1491,t[676]=1492,t[677]=1493,t[678]=1494,t[679]=1495,t[680]=1496,t[681]=1497,t[682]=1498,t[683]=1499,t[684]=1500,t[685]=1501,t[686]=1502,t[687]=1503,t[688]=1504,t[689]=1505,t[690]=1506,t[691]=1507,t[692]=1508,t[693]=1509,t[694]=1510,t[695]=1511,t[696]=1512,t[697]=1513,t[698]=1514,t[705]=1524,t[706]=8362,t[710]=64288,t[711]=64298,t[759]=1617,t[761]=1776,t[763]=1778,t[775]=1652,t[777]=1764,t[778]=1780,t[779]=1781,t[780]=1782,t[782]=771,t[783]=64726,t[786]=8363,t[788]=8532,t[790]=768,t[791]=769,t[792]=768,t[795]=803,t[797]=64336,t[798]=64337,t[799]=64342,t[800]=64343,t[801]=64344,t[802]=64345,t[803]=64362,t[804]=64363,t[805]=64364,t[2424]=7821,t[2425]=7822,t[2426]=7823,t[2427]=7824,t[2428]=7825,t[2429]=7826,t[2430]=7827,t[2433]=7682,t[2678]=8045,t[2679]=8046,t[2830]=1552,t[2838]=686,t[2840]=751,t[2842]=753,t[2843]=754,t[2844]=755,t[2846]=757,t[2856]=767,t[2857]=848,t[2858]=849,t[2862]=853,t[2863]=854,t[2864]=855,t[2865]=861,t[2866]=862,t[2906]=7460,t[2908]=7462,t[2909]=7463,t[2910]=7464,t[2912]=7466,t[2913]=7467,t[2914]=7468,t[2916]=7470,t[2917]=7471,t[2918]=7472,t[2920]=7474,t[2921]=7475,t[2922]=7476,t[2924]=7478,t[2925]=7479,t[2926]=7480,t[2928]=7482,t[2929]=7483,t[2930]=7484,t[2932]=7486,t[2933]=7487,t[2934]=7488,t[2936]=7490,t[2937]=7491,t[2938]=7492,t[2940]=7494,t[2941]=7495,t[2942]=7496,t[2944]=7498,t[2946]=7500,t[2948]=7502,t[2950]=7504,t[2951]=7505,t[2952]=7506,t[2954]=7508,t[2955]=7509,t[2956]=7510,t[2958]=7512,t[2959]=7513,t[2960]=7514,t[2962]=7516,t[2963]=7517,t[2964]=7518,t[2966]=7520,t[2967]=7521,t[2968]=7522,t[2970]=7524,t[2971]=7525,t[2972]=7526,t[2974]=7528,t[2975]=7529,t[2976]=7530,t[2978]=1537,t[2979]=1538,t[2980]=1539,t[2982]=1549,t[2983]=1551,t[2984]=1552,t[2986]=1554,t[2987]=1555,t[2988]=1556,t[2990]=1623,t[2991]=1624,t[2995]=1775,t[2999]=1791,t[3002]=64290,t[3003]=64291,t[3004]=64292,t[3006]=64294,t[3007]=64295,t[3008]=64296,t[3011]=1900,t[3014]=8223,t[3015]=8244,t[3017]=7532,t[3018]=7533,t[3019]=7534,t[3075]=7590,t[3076]=7591,t[3079]=7594,t[3080]=7595,t[3083]=7598,t[3084]=7599,t[3087]=7602,t[3088]=7603,t[3091]=7606,t[3092]=7607,t[3095]=7610,t[3096]=7611,t[3099]=7614,t[3100]=7615,t[3103]=7618,t[3104]=7619,t[3107]=8337,t[3108]=8338,t[3116]=1884,t[3119]=1885,t[3120]=1885,t[3123]=1886,t[3124]=1886,t[3127]=1887,t[3128]=1887,t[3131]=1888,t[3132]=1888,t[3135]=1889,t[3136]=1889,t[3139]=1890,t[3140]=1890,t[3143]=1891,t[3144]=1891,t[3147]=1892,t[3148]=1892,t[3153]=580,t[3154]=581,t[3157]=584,t[3158]=585,t[3161]=588,t[3162]=589,t[3165]=891,t[3166]=892,t[3169]=1274,t[3170]=1275,t[3173]=1278,t[3174]=1279,t[3181]=7622,t[3182]=7623,t[3282]=11799,t[3316]=578,t[3379]=42785,t[3393]=1159,t[3416]=8377}));e.getGlyphMapForStandardFonts=h;const u=(0,i.getLookupTableFactory)((function(t){t[227]=322,t[264]=261,t[291]=346}));e.getSupplementalGlyphMapForArialBlack=u;const d=(0,i.getLookupTableFactory)((function(t){t[1]=32,t[4]=65,t[5]=192,t[6]=193,t[9]=196,t[17]=66,t[18]=67,t[21]=268,t[24]=68,t[28]=69,t[29]=200,t[30]=201,t[32]=282,t[38]=70,t[39]=71,t[44]=72,t[47]=73,t[48]=204,t[49]=205,t[58]=74,t[60]=75,t[62]=76,t[68]=77,t[69]=78,t[75]=79,t[76]=210,t[80]=214,t[87]=80,t[89]=81,t[90]=82,t[92]=344,t[94]=83,t[97]=352,t[100]=84,t[104]=85,t[109]=220,t[115]=86,t[116]=87,t[121]=88,t[122]=89,t[124]=221,t[127]=90,t[129]=381,t[258]=97,t[259]=224,t[260]=225,t[263]=228,t[268]=261,t[271]=98,t[272]=99,t[273]=263,t[275]=269,t[282]=100,t[286]=101,t[287]=232,t[288]=233,t[290]=283,t[295]=281,t[296]=102,t[336]=103,t[346]=104,t[349]=105,t[350]=236,t[351]=237,t[361]=106,t[364]=107,t[367]=108,t[371]=322,t[373]=109,t[374]=110,t[381]=111,t[382]=242,t[383]=243,t[386]=246,t[393]=112,t[395]=113,t[396]=114,t[398]=345,t[400]=115,t[401]=347,t[403]=353,t[410]=116,t[437]=117,t[442]=252,t[448]=118,t[449]=119,t[454]=120,t[455]=121,t[457]=253,t[460]=122,t[462]=382,t[463]=380,t[853]=44,t[855]=58,t[856]=46,t[876]=47,t[878]=45,t[882]=45,t[894]=40,t[895]=41,t[896]=91,t[897]=93,t[923]=64,t[1004]=48,t[1005]=49,t[1006]=50,t[1007]=51,t[1008]=52,t[1009]=53,t[1010]=54,t[1011]=55,t[1012]=56,t[1013]=57,t[1081]=37,t[1085]=43,t[1086]=45}));e.getSupplementalGlyphMapForCalibri=d},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ToUnicodeMap=e.IdentityToUnicodeMap=void 0;var i=n(2);e.ToUnicodeMap=class{constructor(t=[]){this._map=t}get length(){return this._map.length}forEach(t){for(const e in this._map)t(e,this._map[e].charCodeAt(0))}has(t){return void 0!==this._map[t]}get(t){return this._map[t]}charCodeOf(t){const e=this._map;if(e.length<=65536)return e.indexOf(t);for(const n in e)if(e[n]===t)return 0|n;return-1}amend(t){for(const e in t)this._map[e]=t[e]}},e.IdentityToUnicodeMap=class{constructor(t,e){this.firstChar=t,this.lastChar=e}get length(){return this.lastChar+1-this.firstChar}forEach(t){for(let e=this.firstChar,n=this.lastChar;e<=n;e++)t(e,e)}has(t){return this.firstChar<=t&&t<=this.lastChar}get(t){if(this.firstChar<=t&&t<=this.lastChar)return String.fromCharCode(t)}charCodeOf(t){return Number.isInteger(t)&&t>=this.firstChar&&t<=this.lastChar?t:-1}amend(t){(0,i.unreachable)("Should not call amend()")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CFFFont=void 0;var i=n(35),r=n(38),o=n(2);e.CFFFont=class{constructor(t,e){this.properties=e;const n=new i.CFFParser(t,e,r.SEAC_ANALYSIS_ENABLED);this.cff=n.parse(),this.cff.duplicateFirstGlyph();const s=new i.CFFCompiler(this.cff);this.seacs=this.cff.seacs;try{this.data=s.compile()}catch{(0,o.warn)("Failed to compile font "+e.loadedName),this.data=t}this._createBuiltInEncoding()}get numGlyphs(){return this.cff.charStrings.count}getCharset(){return this.cff.charset.charset}getGlyphMapping(){const t=this.cff,e=this.properties,{cidToGidMap:n,cMap:i}=e,o=t.charset.charset;let s,a;if(e.composite){let e,r;if(n?.length>0){e=Object.create(null);for(let t=0,i=n.length;t<i;t++){const i=n[t];void 0!==i&&(e[i]=t)}}if(s=Object.create(null),t.isCIDFont)for(a=0;a<o.length;a++){const t=o[a];r=i.charCodeOf(t),void 0!==e?.[r]&&(r=e[r]),s[r]=a}else for(a=0;a<t.charStrings.count;a++)r=i.charCodeOf(a),s[r]=a;return s}let l=t.encoding?t.encoding.encoding:null;return e.isInternalFont&&(l=e.defaultEncoding),s=(0,r.type1FontGlyphMapping)(e,l,o),s}hasGlyphId(t){return this.cff.hasGlyphId(t)}_createBuiltInEncoding(){const{charset:t,encoding:e}=this.cff;if(!t||!e)return;const n=t.charset,i=e.encoding,r=[];for(const t in i){const e=i[t];if(e>=0){const i=n[e];i&&(r[t]=i)}}r.length>0&&(this.properties.builtInEncoding=r)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontRendererFactory=void 0;var i=n(2),r=n(35),o=n(39),s=n(37),a=n(8);function l(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}function c(t,e){return t[e]<<8|t[e+1]}function h(t,e){return(t[e]<<24|t[e+1]<<16)>>16}function u(t,e){return t[e]<<24>>24}function d(t,e){return h(t,e)/16384}function p(t){const e=t.length;let n=32768;return e<1240?n=107:e<33900&&(n=1131),n}function f(t,e,n){const r=1===c(t,e+2)?l(t,e+8):l(t,e+16),o=c(t,e+r);let s,a,h;if(4===o){c(t,e+r+2);const n=c(t,e+r+6)>>1;for(a=e+r+14,s=[],h=0;h<n;h++,a+=2)s[h]={end:c(t,a)};for(a+=2,h=0;h<n;h++,a+=2)s[h].start=c(t,a);for(h=0;h<n;h++,a+=2)s[h].idDelta=c(t,a);for(h=0;h<n;h++,a+=2){let e=c(t,a);if(0!==e){s[h].ids=[];for(let n=0,i=s[h].end-s[h].start+1;n<i;n++)s[h].ids[n]=c(t,a+e),e+=2}}return s}if(12===o){const n=l(t,e+r+12);for(a=e+r+16,s=[],h=0;h<n;h++)e=l(t,a),s.push({start:e,end:l(t,a+4),idDelta:l(t,a+8)-e}),a+=12;return s}throw new i.FormatError(`unsupported cmap: ${o}`)}function g(t,e,n,i){const o=new r.CFFParser(new a.Stream(t,e,n-e),{},i).parse();return{glyphs:o.charStrings.objects,subrs:o.topDict.privateDict?.subrsIndex?.objects,gsubrs:o.globalSubrIndex?.objects,isCFFCIDFont:o.isCIDFont,fdSelect:o.fdSelect,fdArray:o.fdArray}}function m(t,e){const n=e.codePointAt(0);let i=0,r=0,o=t.length-1;for(;r<o;){const e=r+o+1>>1;n<t[e].start?o=e-1:r=e}return t[r].start<=n&&n<=t[r].end&&(i=t[r].idDelta+(t[r].ids?t[r].ids[n-t[r].start]:n)&65535),{charCode:n,glyphId:i}}function y(t,e,n){function i(t,n){e.push({cmd:"moveTo",args:[t,n]})}function r(t,n){e.push({cmd:"lineTo",args:[t,n]})}function o(t,n,i,r){e.push({cmd:"quadraticCurveTo",args:[t,n,i,r]})}let s=0;const a=h(t,s);let l,p=0,f=0;if(s+=10,a<0)do{l=c(t,s);const i=c(t,s+2);let r,o;s+=4,1&l?(2&l?(r=h(t,s),o=h(t,s+2)):(r=c(t,s),o=c(t,s+2)),s+=4):2&l?(r=u(t,s++),o=u(t,s++)):(r=t[s++],o=t[s++]),2&l?(p=r,f=o):(p=0,f=0);let a=1,g=1,m=0,v=0;8&l?(a=g=d(t,s),s+=2):64&l?(a=d(t,s),g=d(t,s+2),s+=4):128&l&&(a=d(t,s),m=d(t,s+2),v=d(t,s+4),g=d(t,s+6),s+=8);const b=n.glyphs[i];b&&(e.push({cmd:"save"},{cmd:"transform",args:[a,m,v,g,p,f]}),y(b,e,n),e.push({cmd:"restore"}))}while(32&l);else{const e=[];let n,u;for(n=0;n<a;n++)e.push(c(t,s)),s+=2;s+=2+c(t,s);const d=e.at(-1)+1,g=[];for(;g.length<d;){l=t[s++];let e=1;for(8&l&&(e+=t[s++]);e-- >0;)g.push({flags:l})}for(n=0;n<d;n++){switch(18&g[n].flags){case 0:p+=h(t,s),s+=2;break;case 2:p-=t[s++];break;case 18:p+=t[s++]}g[n].x=p}for(n=0;n<d;n++){switch(36&g[n].flags){case 0:f+=h(t,s),s+=2;break;case 4:f-=t[s++];break;case 36:f+=t[s++]}g[n].y=f}let m=0;for(s=0;s<a;s++){const t=e[s],a=g.slice(m,t+1);if(1&a[0].flags)a.push(a[0]);else if(1&a.at(-1).flags)a.unshift(a.at(-1));else{const t={flags:1,x:(a[0].x+a.at(-1).x)/2,y:(a[0].y+a.at(-1).y)/2};a.unshift(t),a.push(t)}for(i(a[0].x,a[0].y),n=1,u=a.length;n<u;n++)1&a[n].flags?r(a[n].x,a[n].y):1&a[n+1].flags?(o(a[n].x,a[n].y,a[n+1].x,a[n+1].y),n++):o(a[n].x,a[n].y,(a[n].x+a[n+1].x)/2,(a[n].y+a[n+1].y)/2);m=t+1}}}function v(t,e,n,r){function o(t,n){e.push({cmd:"moveTo",args:[t,n]})}function a(t,n){e.push({cmd:"lineTo",args:[t,n]})}function l(t,n,i,r,o,s){e.push({cmd:"bezierCurveTo",args:[t,n,i,r,o,s]})}const c=[];let h=0,u=0,d=0;!function t(f){let g=0;for(;g<f.length;){let y,b,w,x,_,S,C,k,A,E=!1,T=f[g++];switch(T){case 1:case 3:case 18:case 23:d+=c.length>>1,E=!0;break;case 4:u+=c.pop(),o(h,u),E=!0;break;case 5:for(;c.length>0;)h+=c.shift(),u+=c.shift(),a(h,u);break;case 6:for(;c.length>0&&(h+=c.shift(),a(h,u),0!==c.length);)u+=c.shift(),a(h,u);break;case 7:for(;c.length>0&&(u+=c.shift(),a(h,u),0!==c.length);)h+=c.shift(),a(h,u);break;case 8:for(;c.length>0;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 10:if(k=c.pop(),A=null,n.isCFFCIDFont){const t=n.fdSelect.getFDIndex(r);if(t>=0&&t<n.fdArray.length){const e=n.fdArray[t];let i;e.privateDict?.subrsIndex&&(i=e.privateDict.subrsIndex.objects),i&&(k+=p(i),A=i[k])}else(0,i.warn)("Invalid fd index for glyph index.")}else A=n.subrs[k+n.subrsBias];A&&t(A);break;case 11:return;case 12:switch(T=f[g++],T){case 34:y=h+c.shift(),b=y+c.shift(),_=u+c.shift(),h=b+c.shift(),l(y,u,b,_,h,_),y=h+c.shift(),b=y+c.shift(),h=b+c.shift(),l(y,_,b,u,h,u);break;case 35:y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),c.pop();break;case 36:y=h+c.shift(),_=u+c.shift(),b=y+c.shift(),S=_+c.shift(),h=b+c.shift(),l(y,_,b,S,h,S),y=h+c.shift(),b=y+c.shift(),C=S+c.shift(),h=b+c.shift(),l(y,S,b,C,h,u);break;case 37:const t=h,e=u;y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u),y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x,Math.abs(h-t)>Math.abs(u-e)?h+=c.shift():u+=c.shift(),l(y,w,b,x,h,u);break;default:throw new i.FormatError(`unknown operator: 12 ${T}`)}break;case 14:if(c.length>=4){const t=c.pop(),i=c.pop();u=c.pop(),h=c.pop(),e.push({cmd:"save"},{cmd:"translate",args:[h,u]});let r=m(n.cmap,String.fromCharCode(n.glyphNameMap[s.StandardEncoding[t]]));v(n.glyphs[r.glyphId],e,n,r.glyphId),e.push({cmd:"restore"}),r=m(n.cmap,String.fromCharCode(n.glyphNameMap[s.StandardEncoding[i]])),v(n.glyphs[r.glyphId],e,n,r.glyphId)}return;case 19:case 20:d+=c.length>>1,g+=d+7>>3,E=!0;break;case 21:u+=c.pop(),h+=c.pop(),o(h,u),E=!0;break;case 22:h+=c.pop(),o(h,u),E=!0;break;case 24:for(;c.length>2;)y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);h+=c.shift(),u+=c.shift(),a(h,u);break;case 25:for(;c.length>6;)h+=c.shift(),u+=c.shift(),a(h,u);y=h+c.shift(),w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+c.shift(),l(y,w,b,x,h,u);break;case 26:for(c.length%2&&(h+=c.shift());c.length>0;)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b,u=x+c.shift(),l(y,w,b,x,h,u);break;case 27:for(c.length%2&&(u+=c.shift());c.length>0;)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x,l(y,w,b,x,h,u);break;case 28:c.push((f[g]<<24|f[g+1]<<16)>>16),g+=2;break;case 29:k=c.pop()+n.gsubrsBias,A=n.gsubrs[k],A&&t(A);break;case 30:for(;c.length>0&&(y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;case 31:for(;c.length>0&&(y=h+c.shift(),w=u,b=y+c.shift(),x=w+c.shift(),u=x+c.shift(),h=b+(1===c.length?c.shift():0),l(y,w,b,x,h,u),0!==c.length);)y=h,w=u+c.shift(),b=y+c.shift(),x=w+c.shift(),h=b+c.shift(),u=x+(1===c.length?c.shift():0),l(y,w,b,x,h,u);break;default:if(T<32)throw new i.FormatError(`unknown operator: ${T}`);T<247?c.push(T-139):T<251?c.push(256*(T-247)+f[g++]+108):T<255?c.push(256*-(T-251)-f[g++]-108):(c.push((f[g]<<24|f[g+1]<<16|f[g+2]<<8|f[g+3])/65536),g+=4)}E&&(c.length=0)}}(t)}const b=[];class w{constructor(t){this.constructor===w&&(0,i.unreachable)("Cannot initialize CompiledFont."),this.fontMatrix=t,this.compiledGlyphs=Object.create(null),this.compiledCharCodeToGlyphId=Object.create(null)}getPathJs(t){const{charCode:e,glyphId:n}=m(this.cmap,t);let i=this.compiledGlyphs[n];if(!i)try{i=this.compileGlyph(this.glyphs[n],n),this.compiledGlyphs[n]=i}catch(t){throw this.compiledGlyphs[n]=b,void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=n),t}return void 0===this.compiledCharCodeToGlyphId[e]&&(this.compiledCharCodeToGlyphId[e]=n),i}compileGlyph(t,e){if(!t||0===t.length||14===t[0])return b;let n=this.fontMatrix;if(this.isCFFCIDFont){const t=this.fdSelect.getFDIndex(e);t>=0&&t<this.fdArray.length?n=this.fdArray[t].getByName("FontMatrix")||i.FONT_IDENTITY_MATRIX:(0,i.warn)("Invalid fd index for glyph index.")}const r=[{cmd:"save"},{cmd:"transform",args:n.slice()},{cmd:"scale",args:["size","-size"]}];return this.compileGlyphImpl(t,r,e),r.push({cmd:"restore"}),r}compileGlyphImpl(){(0,i.unreachable)("Children classes should implement this.")}hasBuiltPath(t){const{charCode:e,glyphId:n}=m(this.cmap,t);return void 0!==this.compiledGlyphs[n]&&void 0!==this.compiledCharCodeToGlyphId[e]}}class x extends w{constructor(t,e,n){super(n||[488e-6,0,0,488e-6,0,0]),this.glyphs=t,this.cmap=e}compileGlyphImpl(t,e){y(t,e,this)}}class _ extends w{constructor(t,e,n,i){super(n||[.001,0,0,.001,0,0]),this.glyphs=t.glyphs,this.gsubrs=t.gsubrs||[],this.subrs=t.subrs||[],this.cmap=e,this.glyphNameMap=i||(0,o.getGlyphsUnicode)(),this.gsubrsBias=p(this.gsubrs),this.subrsBias=p(this.subrs),this.isCFFCIDFont=t.isCFFCIDFont,this.fdSelect=t.fdSelect,this.fdArray=t.fdArray}compileGlyphImpl(t,e,n){v(t,e,this,n)}}e.FontRendererFactory=class{static create(t,e){const n=new Uint8Array(t.data);let r,o,s,a,h,u;const d=c(n,4);for(let t=0,p=12;t<d;t++,p+=16){const t=(0,i.bytesToString)(n.subarray(p,p+4)),d=l(n,p+8),m=l(n,p+12);switch(t){case"cmap":r=f(n,d);break;case"glyf":o=n.subarray(d,d+m);break;case"loca":s=n.subarray(d,d+m);break;case"head":u=c(n,d+18),h=c(n,d+50);break;case"CFF ":a=g(n,d,d+m,e)}}if(o){const e=u?[1/u,0,0,1/u,0,0]:t.fontMatrix;return new x(function(t,e,n){let i,r;n?(i=4,r=l):(i=2,r=(t,e)=>2*c(t,e));const o=[];let s=r(e,0);for(let n=i;n<e.length;n+=i){const i=r(e,n);o.push(t.subarray(s,i)),s=i}return o}(o,s,h),r,e)}return new _(a,r,t.fontMatrix,t.glyphNameMap)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getMetrics=e.getFontBasicMetrics=void 0;var i=n(3);const r=(0,i.getLookupTableFactory)((function(t){t.Courier=600,t["Courier-Bold"]=600,t["Courier-BoldOblique"]=600,t["Courier-Oblique"]=600,t.Helvetica=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Bold"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-BoldOblique"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=333,t.quotedbl=474,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=722,t.quoteright=278,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=333,t.semicolon=333,t.less=584,t.equal=584,t.greater=584,t.question=611,t.at=975,t.A=722,t.B=722,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=556,t.K=722,t.L=611,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=584,t.underscore=556,t.quoteleft=278,t.a=556,t.b=611,t.c=556,t.d=611,t.e=556,t.f=333,t.g=611,t.h=611,t.i=278,t.j=278,t.k=556,t.l=278,t.m=889,t.n=611,t.o=611,t.p=611,t.q=611,t.r=389,t.s=556,t.t=333,t.u=611,t.v=556,t.w=778,t.x=556,t.y=556,t.z=500,t.braceleft=389,t.bar=280,t.braceright=389,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=238,t.quotedblleft=500,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=611,t.fl=611,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=556,t.bullet=350,t.quotesinglbase=278,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=611,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=278,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=611,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=722,t.aacute=556,t.Ucircumflex=722,t.yacute=556,t.scommaaccent=556,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=611,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=556,t.aring=556,t.Ncommaaccent=722,t.lacute=278,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=556,t.scedilla=556,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=611,t.acircumflex=556,t.Amacron=722,t.rcaron=389,t.ccedilla=556,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=743,t.Umacron=722,t.uring=611,t.threesuperior=333,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=584,t.uacute=611,t.Tcaron=611,t.partialdiff=494,t.ydieresis=556,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=556,t.nacute=611,t.umacron=611,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=280,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=611,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=389,t.eogonek=556,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=556,t.zacute=500,t.iogonek=278,t.Oacute=778,t.oacute=611,t.amacron=556,t.sacute=556,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=611,t.twosuperior=333,t.Odieresis=778,t.mu=611,t.igrave=278,t.ohungarumlaut=611,t.Eogonek=667,t.dcroat=611,t.threequarters=834,t.Scedilla=667,t.lcaron=400,t.Kcommaaccent=722,t.Lacute=611,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=611,t.onehalf=834,t.lessequal=549,t.ocircumflex=611,t.ntilde=611,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=611,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=611,t.Ccaron=722,t.ugrave=611,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=611,t.Rcommaaccent=722,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=556,t.minus=584,t.Icircumflex=278,t.ncaron=611,t.tcommaaccent=333,t.logicalnot=584,t.odieresis=611,t.udieresis=611,t.notequal=549,t.gcommaaccent=611,t.eth=611,t.zcaron=500,t.ncommaaccent=611,t.onesuperior=333,t.imacron=278,t.Euro=556})),t["Helvetica-Oblique"]=(0,i.getLookupTableFactory)((function(t){t.space=278,t.exclam=278,t.quotedbl=355,t.numbersign=556,t.dollar=556,t.percent=889,t.ampersand=667,t.quoteright=222,t.parenleft=333,t.parenright=333,t.asterisk=389,t.plus=584,t.comma=278,t.hyphen=333,t.period=278,t.slash=278,t.zero=556,t.one=556,t.two=556,t.three=556,t.four=556,t.five=556,t.six=556,t.seven=556,t.eight=556,t.nine=556,t.colon=278,t.semicolon=278,t.less=584,t.equal=584,t.greater=584,t.question=556,t.at=1015,t.A=667,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=722,t.I=278,t.J=500,t.K=667,t.L=556,t.M=833,t.N=722,t.O=778,t.P=667,t.Q=778,t.R=722,t.S=667,t.T=611,t.U=722,t.V=667,t.W=944,t.X=667,t.Y=667,t.Z=611,t.bracketleft=278,t.backslash=278,t.bracketright=278,t.asciicircum=469,t.underscore=556,t.quoteleft=222,t.a=556,t.b=556,t.c=500,t.d=556,t.e=556,t.f=278,t.g=556,t.h=556,t.i=222,t.j=222,t.k=500,t.l=222,t.m=833,t.n=556,t.o=556,t.p=556,t.q=556,t.r=333,t.s=500,t.t=278,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=500,t.braceleft=334,t.bar=260,t.braceright=334,t.asciitilde=584,t.exclamdown=333,t.cent=556,t.sterling=556,t.fraction=167,t.yen=556,t.florin=556,t.section=556,t.currency=556,t.quotesingle=191,t.quotedblleft=333,t.guillemotleft=556,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=556,t.dagger=556,t.daggerdbl=556,t.periodcentered=278,t.paragraph=537,t.bullet=350,t.quotesinglbase=222,t.quotedblbase=333,t.quotedblright=333,t.guillemotright=556,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=611,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=370,t.Lslash=556,t.Oslash=778,t.OE=1e3,t.ordmasculine=365,t.ae=889,t.dotlessi=278,t.lslash=222,t.oslash=611,t.oe=944,t.germandbls=611,t.Idieresis=278,t.eacute=556,t.abreve=556,t.uhungarumlaut=556,t.ecaron=556,t.Ydieresis=667,t.divide=584,t.Yacute=667,t.Acircumflex=667,t.aacute=556,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=500,t.ecircumflex=556,t.Uring=722,t.Udieresis=722,t.aogonek=556,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=737,t.Emacron=667,t.ccaron=500,t.aring=556,t.Ncommaaccent=722,t.lacute=222,t.agrave=556,t.Tcommaaccent=611,t.Cacute=722,t.atilde=556,t.Edotaccent=667,t.scaron=500,t.scedilla=500,t.iacute=278,t.lozenge=471,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=556,t.Amacron=667,t.rcaron=333,t.ccedilla=500,t.Zdotaccent=611,t.Thorn=667,t.Omacron=778,t.Racute=722,t.Sacute=667,t.dcaron=643,t.Umacron=722,t.uring=556,t.threesuperior=333,t.Ograve=778,t.Agrave=667,t.Abreve=667,t.multiply=584,t.uacute=556,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=556,t.edieresis=556,t.cacute=500,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=278,t.plusminus=584,t.brokenbar=260,t.registered=737,t.Gbreve=778,t.Idotaccent=278,t.summation=600,t.Egrave=667,t.racute=333,t.omacron=556,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=222,t.tcaron=317,t.eogonek=556,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=556,t.zacute=500,t.iogonek=222,t.Oacute=778,t.oacute=556,t.amacron=556,t.sacute=500,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=333,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=556,t.Eogonek=667,t.dcroat=556,t.threequarters=834,t.Scedilla=667,t.lcaron=299,t.Kcommaaccent=667,t.Lacute=556,t.trademark=1e3,t.edotaccent=556,t.Igrave=278,t.Imacron=278,t.Lcaron=556,t.onehalf=834,t.lessequal=549,t.ocircumflex=556,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=556,t.gbreve=556,t.onequarter=834,t.Scaron=667,t.Scommaaccent=667,t.Ohungarumlaut=778,t.degree=400,t.ograve=556,t.Ccaron=722,t.ugrave=556,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=556,t.Rcommaaccent=722,t.Lcommaaccent=556,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=778,t.zdotaccent=500,t.Ecaron=667,t.Iogonek=278,t.kcommaaccent=500,t.minus=584,t.Icircumflex=278,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=584,t.odieresis=556,t.udieresis=556,t.notequal=549,t.gcommaaccent=556,t.eth=556,t.zcaron=500,t.ncommaaccent=556,t.onesuperior=333,t.imacron=278,t.Euro=556})),t.Symbol=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.universal=713,t.numbersign=500,t.existential=549,t.percent=833,t.ampersand=778,t.suchthat=439,t.parenleft=333,t.parenright=333,t.asteriskmath=500,t.plus=549,t.comma=250,t.minus=549,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=549,t.equal=549,t.greater=549,t.question=444,t.congruent=549,t.Alpha=722,t.Beta=667,t.Chi=722,t.Delta=612,t.Epsilon=611,t.Phi=763,t.Gamma=603,t.Eta=722,t.Iota=333,t.theta1=631,t.Kappa=722,t.Lambda=686,t.Mu=889,t.Nu=722,t.Omicron=722,t.Pi=768,t.Theta=741,t.Rho=556,t.Sigma=592,t.Tau=611,t.Upsilon=690,t.sigma1=439,t.Omega=768,t.Xi=645,t.Psi=795,t.Zeta=611,t.bracketleft=333,t.therefore=863,t.bracketright=333,t.perpendicular=658,t.underscore=500,t.radicalex=500,t.alpha=631,t.beta=549,t.chi=549,t.delta=494,t.epsilon=439,t.phi=521,t.gamma=411,t.eta=603,t.iota=329,t.phi1=603,t.kappa=549,t.lambda=549,t.mu=576,t.nu=521,t.omicron=549,t.pi=549,t.theta=521,t.rho=549,t.sigma=603,t.tau=439,t.upsilon=576,t.omega1=713,t.omega=686,t.xi=493,t.psi=686,t.zeta=494,t.braceleft=480,t.bar=200,t.braceright=480,t.similar=549,t.Euro=750,t.Upsilon1=620,t.minute=247,t.lessequal=549,t.fraction=167,t.infinity=713,t.florin=500,t.club=753,t.diamond=753,t.heart=753,t.spade=753,t.arrowboth=1042,t.arrowleft=987,t.arrowup=603,t.arrowright=987,t.arrowdown=603,t.degree=400,t.plusminus=549,t.second=411,t.greaterequal=549,t.multiply=549,t.proportional=713,t.partialdiff=494,t.bullet=460,t.divide=549,t.notequal=549,t.equivalence=549,t.approxequal=549,t.ellipsis=1e3,t.arrowvertex=603,t.arrowhorizex=1e3,t.carriagereturn=658,t.aleph=823,t.Ifraktur=686,t.Rfraktur=795,t.weierstrass=987,t.circlemultiply=768,t.circleplus=768,t.emptyset=823,t.intersection=768,t.union=768,t.propersuperset=713,t.reflexsuperset=713,t.notsubset=713,t.propersubset=713,t.reflexsubset=713,t.element=713,t.notelement=713,t.angle=768,t.gradient=713,t.registerserif=790,t.copyrightserif=790,t.trademarkserif=890,t.product=823,t.radical=549,t.dotmath=250,t.logicalnot=713,t.logicaland=603,t.logicalor=603,t.arrowdblboth=1042,t.arrowdblleft=987,t.arrowdblup=603,t.arrowdblright=987,t.arrowdbldown=603,t.lozenge=494,t.angleleft=329,t.registersans=790,t.copyrightsans=790,t.trademarksans=786,t.summation=713,t.parenlefttp=384,t.parenleftex=384,t.parenleftbt=384,t.bracketlefttp=384,t.bracketleftex=384,t.bracketleftbt=384,t.bracelefttp=494,t.braceleftmid=494,t.braceleftbt=494,t.braceex=494,t.angleright=329,t.integral=274,t.integraltp=686,t.integralex=686,t.integralbt=686,t.parenrighttp=384,t.parenrightex=384,t.parenrightbt=384,t.bracketrighttp=384,t.bracketrightex=384,t.bracketrightbt=384,t.bracerighttp=494,t.bracerightmid=494,t.bracerightbt=494,t.apple=790})),t["Times-Roman"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=408,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=564,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=278,t.semicolon=278,t.less=564,t.equal=564,t.greater=564,t.question=444,t.at=921,t.A=722,t.B=667,t.C=667,t.D=722,t.E=611,t.F=556,t.G=722,t.H=722,t.I=333,t.J=389,t.K=722,t.L=611,t.M=889,t.N=722,t.O=722,t.P=556,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=722,t.W=944,t.X=722,t.Y=722,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=469,t.underscore=500,t.quoteleft=333,t.a=444,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=500,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=500,t.o=500,t.p=500,t.q=500,t.r=333,t.s=389,t.t=278,t.u=500,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=480,t.bar=200,t.braceright=480,t.asciitilde=541,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=180,t.quotedblleft=444,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=453,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=444,t.quotedblright=444,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=444,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=889,t.ordfeminine=276,t.Lslash=611,t.Oslash=722,t.OE=889,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=444,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=722,t.divide=564,t.Yacute=722,t.Acircumflex=722,t.aacute=444,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=444,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=444,t.Ncommaaccent=722,t.lacute=278,t.agrave=444,t.Tcommaaccent=611,t.Cacute=667,t.atilde=444,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=444,t.Amacron=722,t.rcaron=333,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=556,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=588,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=722,t.Abreve=722,t.multiply=564,t.uacute=500,t.Tcaron=611,t.partialdiff=476,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=444,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=722,t.Iacute=333,t.plusminus=564,t.brokenbar=200,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=333,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=326,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=444,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=344,t.Kcommaaccent=722,t.Lacute=611,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=333,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=722,t.zdotaccent=444,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=500,t.minus=564,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=564,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Bold"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=1e3,t.ampersand=833,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=930,t.A=722,t.B=667,t.C=722,t.D=722,t.E=667,t.F=611,t.G=778,t.H=778,t.I=389,t.J=500,t.K=778,t.L=667,t.M=944,t.N=722,t.O=778,t.P=611,t.Q=778,t.R=722,t.S=556,t.T=667,t.U=722,t.V=722,t.W=1e3,t.X=722,t.Y=722,t.Z=667,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=581,t.underscore=500,t.quoteleft=333,t.a=500,t.b=556,t.c=444,t.d=556,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=333,t.k=556,t.l=278,t.m=833,t.n=556,t.o=500,t.p=556,t.q=556,t.r=444,t.s=389,t.t=333,t.u=556,t.v=500,t.w=722,t.x=500,t.y=500,t.z=444,t.braceleft=394,t.bar=220,t.braceright=394,t.asciitilde=520,t.exclamdown=333,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=540,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=1e3,t.ordfeminine=300,t.Lslash=667,t.Oslash=778,t.OE=1e3,t.ordmasculine=330,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=556,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=722,t.divide=570,t.Yacute=722,t.Acircumflex=722,t.aacute=500,t.Ucircumflex=722,t.yacute=500,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=667,t.Cacute=722,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=722,t.Gcommaaccent=778,t.ucircumflex=556,t.acircumflex=500,t.Amacron=722,t.rcaron=444,t.ccedilla=444,t.Zdotaccent=667,t.Thorn=611,t.Omacron=778,t.Racute=722,t.Sacute=556,t.dcaron=672,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=778,t.Agrave=722,t.Abreve=722,t.multiply=570,t.uacute=556,t.Tcaron=667,t.partialdiff=494,t.ydieresis=500,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=778,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=444,t.omacron=500,t.Zacute=667,t.Zcaron=667,t.greaterequal=549,t.Eth=722,t.Ccedilla=722,t.lcommaaccent=278,t.tcaron=416,t.eogonek=444,t.Uogonek=722,t.Aacute=722,t.Adieresis=722,t.egrave=444,t.zacute=444,t.iogonek=278,t.Oacute=778,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=778,t.Ugrave=722,t.Delta=612,t.thorn=556,t.twosuperior=300,t.Odieresis=778,t.mu=556,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=556,t.threequarters=750,t.Scedilla=556,t.lcaron=394,t.Kcommaaccent=778,t.Lacute=667,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=667,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=778,t.degree=400,t.ograve=500,t.Ccaron=722,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=444,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=722,t.Lcommaaccent=667,t.Atilde=722,t.Aogonek=722,t.Aring=722,t.Otilde=778,t.zdotaccent=444,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=556,t.minus=570,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=333,t.logicalnot=570,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=444,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-BoldItalic"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=389,t.quotedbl=555,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=570,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=570,t.equal=570,t.greater=570,t.question=500,t.at=832,t.A=667,t.B=667,t.C=667,t.D=722,t.E=667,t.F=667,t.G=722,t.H=778,t.I=389,t.J=500,t.K=667,t.L=611,t.M=889,t.N=722,t.O=722,t.P=611,t.Q=722,t.R=667,t.S=556,t.T=611,t.U=722,t.V=667,t.W=889,t.X=667,t.Y=611,t.Z=611,t.bracketleft=333,t.backslash=278,t.bracketright=333,t.asciicircum=570,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=333,t.g=500,t.h=556,t.i=278,t.j=278,t.k=500,t.l=278,t.m=778,t.n=556,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=556,t.v=444,t.w=667,t.x=500,t.y=444,t.z=389,t.braceleft=348,t.bar=220,t.braceright=348,t.asciitilde=570,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=278,t.quotedblleft=500,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=556,t.fl=556,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=500,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=500,t.quotedblright=500,t.guillemotright=500,t.ellipsis=1e3,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=1e3,t.AE=944,t.ordfeminine=266,t.Lslash=611,t.Oslash=722,t.OE=944,t.ordmasculine=300,t.ae=722,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=722,t.germandbls=500,t.Idieresis=389,t.eacute=444,t.abreve=500,t.uhungarumlaut=556,t.ecaron=444,t.Ydieresis=611,t.divide=570,t.Yacute=611,t.Acircumflex=667,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=556,t.Edieresis=667,t.Dcroat=722,t.commaaccent=250,t.copyright=747,t.Emacron=667,t.ccaron=444,t.aring=500,t.Ncommaaccent=722,t.lacute=278,t.agrave=500,t.Tcommaaccent=611,t.Cacute=667,t.atilde=500,t.Edotaccent=667,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=494,t.Rcaron=667,t.Gcommaaccent=722,t.ucircumflex=556,t.acircumflex=500,t.Amacron=667,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=611,t.Thorn=611,t.Omacron=722,t.Racute=667,t.Sacute=556,t.dcaron=608,t.Umacron=722,t.uring=556,t.threesuperior=300,t.Ograve=722,t.Agrave=667,t.Abreve=667,t.multiply=570,t.uacute=556,t.Tcaron=611,t.partialdiff=494,t.ydieresis=444,t.Nacute=722,t.icircumflex=278,t.Ecircumflex=667,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=556,t.umacron=556,t.Ncaron=722,t.Iacute=389,t.plusminus=570,t.brokenbar=220,t.registered=747,t.Gbreve=722,t.Idotaccent=389,t.summation=600,t.Egrave=667,t.racute=389,t.omacron=500,t.Zacute=611,t.Zcaron=611,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=366,t.eogonek=444,t.Uogonek=722,t.Aacute=667,t.Adieresis=667,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=576,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=667,t.dcroat=500,t.threequarters=750,t.Scedilla=556,t.lcaron=382,t.Kcommaaccent=667,t.Lacute=611,t.trademark=1e3,t.edotaccent=444,t.Igrave=389,t.Imacron=389,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=556,t.Uhungarumlaut=722,t.Eacute=667,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=556,t.Scommaaccent=556,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=556,t.radical=549,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=722,t.otilde=500,t.Rcommaaccent=667,t.Lcommaaccent=611,t.Atilde=667,t.Aogonek=667,t.Aring=667,t.Otilde=722,t.zdotaccent=389,t.Ecaron=667,t.Iogonek=389,t.kcommaaccent=500,t.minus=606,t.Icircumflex=389,t.ncaron=556,t.tcommaaccent=278,t.logicalnot=606,t.odieresis=500,t.udieresis=556,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=556,t.onesuperior=300,t.imacron=278,t.Euro=500})),t["Times-Italic"]=(0,i.getLookupTableFactory)((function(t){t.space=250,t.exclam=333,t.quotedbl=420,t.numbersign=500,t.dollar=500,t.percent=833,t.ampersand=778,t.quoteright=333,t.parenleft=333,t.parenright=333,t.asterisk=500,t.plus=675,t.comma=250,t.hyphen=333,t.period=250,t.slash=278,t.zero=500,t.one=500,t.two=500,t.three=500,t.four=500,t.five=500,t.six=500,t.seven=500,t.eight=500,t.nine=500,t.colon=333,t.semicolon=333,t.less=675,t.equal=675,t.greater=675,t.question=500,t.at=920,t.A=611,t.B=611,t.C=667,t.D=722,t.E=611,t.F=611,t.G=722,t.H=722,t.I=333,t.J=444,t.K=667,t.L=556,t.M=833,t.N=667,t.O=722,t.P=611,t.Q=722,t.R=611,t.S=500,t.T=556,t.U=722,t.V=611,t.W=833,t.X=611,t.Y=556,t.Z=556,t.bracketleft=389,t.backslash=278,t.bracketright=389,t.asciicircum=422,t.underscore=500,t.quoteleft=333,t.a=500,t.b=500,t.c=444,t.d=500,t.e=444,t.f=278,t.g=500,t.h=500,t.i=278,t.j=278,t.k=444,t.l=278,t.m=722,t.n=500,t.o=500,t.p=500,t.q=500,t.r=389,t.s=389,t.t=278,t.u=500,t.v=444,t.w=667,t.x=444,t.y=444,t.z=389,t.braceleft=400,t.bar=275,t.braceright=400,t.asciitilde=541,t.exclamdown=389,t.cent=500,t.sterling=500,t.fraction=167,t.yen=500,t.florin=500,t.section=500,t.currency=500,t.quotesingle=214,t.quotedblleft=556,t.guillemotleft=500,t.guilsinglleft=333,t.guilsinglright=333,t.fi=500,t.fl=500,t.endash=500,t.dagger=500,t.daggerdbl=500,t.periodcentered=250,t.paragraph=523,t.bullet=350,t.quotesinglbase=333,t.quotedblbase=556,t.quotedblright=556,t.guillemotright=500,t.ellipsis=889,t.perthousand=1e3,t.questiondown=500,t.grave=333,t.acute=333,t.circumflex=333,t.tilde=333,t.macron=333,t.breve=333,t.dotaccent=333,t.dieresis=333,t.ring=333,t.cedilla=333,t.hungarumlaut=333,t.ogonek=333,t.caron=333,t.emdash=889,t.AE=889,t.ordfeminine=276,t.Lslash=556,t.Oslash=722,t.OE=944,t.ordmasculine=310,t.ae=667,t.dotlessi=278,t.lslash=278,t.oslash=500,t.oe=667,t.germandbls=500,t.Idieresis=333,t.eacute=444,t.abreve=500,t.uhungarumlaut=500,t.ecaron=444,t.Ydieresis=556,t.divide=675,t.Yacute=556,t.Acircumflex=611,t.aacute=500,t.Ucircumflex=722,t.yacute=444,t.scommaaccent=389,t.ecircumflex=444,t.Uring=722,t.Udieresis=722,t.aogonek=500,t.Uacute=722,t.uogonek=500,t.Edieresis=611,t.Dcroat=722,t.commaaccent=250,t.copyright=760,t.Emacron=611,t.ccaron=444,t.aring=500,t.Ncommaaccent=667,t.lacute=278,t.agrave=500,t.Tcommaaccent=556,t.Cacute=667,t.atilde=500,t.Edotaccent=611,t.scaron=389,t.scedilla=389,t.iacute=278,t.lozenge=471,t.Rcaron=611,t.Gcommaaccent=722,t.ucircumflex=500,t.acircumflex=500,t.Amacron=611,t.rcaron=389,t.ccedilla=444,t.Zdotaccent=556,t.Thorn=611,t.Omacron=722,t.Racute=611,t.Sacute=500,t.dcaron=544,t.Umacron=722,t.uring=500,t.threesuperior=300,t.Ograve=722,t.Agrave=611,t.Abreve=611,t.multiply=675,t.uacute=500,t.Tcaron=556,t.partialdiff=476,t.ydieresis=444,t.Nacute=667,t.icircumflex=278,t.Ecircumflex=611,t.adieresis=500,t.edieresis=444,t.cacute=444,t.nacute=500,t.umacron=500,t.Ncaron=667,t.Iacute=333,t.plusminus=675,t.brokenbar=275,t.registered=760,t.Gbreve=722,t.Idotaccent=333,t.summation=600,t.Egrave=611,t.racute=389,t.omacron=500,t.Zacute=556,t.Zcaron=556,t.greaterequal=549,t.Eth=722,t.Ccedilla=667,t.lcommaaccent=278,t.tcaron=300,t.eogonek=444,t.Uogonek=722,t.Aacute=611,t.Adieresis=611,t.egrave=444,t.zacute=389,t.iogonek=278,t.Oacute=722,t.oacute=500,t.amacron=500,t.sacute=389,t.idieresis=278,t.Ocircumflex=722,t.Ugrave=722,t.Delta=612,t.thorn=500,t.twosuperior=300,t.Odieresis=722,t.mu=500,t.igrave=278,t.ohungarumlaut=500,t.Eogonek=611,t.dcroat=500,t.threequarters=750,t.Scedilla=500,t.lcaron=300,t.Kcommaaccent=667,t.Lacute=556,t.trademark=980,t.edotaccent=444,t.Igrave=333,t.Imacron=333,t.Lcaron=611,t.onehalf=750,t.lessequal=549,t.ocircumflex=500,t.ntilde=500,t.Uhungarumlaut=722,t.Eacute=611,t.emacron=444,t.gbreve=500,t.onequarter=750,t.Scaron=500,t.Scommaaccent=500,t.Ohungarumlaut=722,t.degree=400,t.ograve=500,t.Ccaron=667,t.ugrave=500,t.radical=453,t.Dcaron=722,t.rcommaaccent=389,t.Ntilde=667,t.otilde=500,t.Rcommaaccent=611,t.Lcommaaccent=556,t.Atilde=611,t.Aogonek=611,t.Aring=611,t.Otilde=722,t.zdotaccent=389,t.Ecaron=611,t.Iogonek=333,t.kcommaaccent=444,t.minus=675,t.Icircumflex=333,t.ncaron=500,t.tcommaaccent=278,t.logicalnot=675,t.odieresis=500,t.udieresis=500,t.notequal=549,t.gcommaaccent=500,t.eth=500,t.zcaron=389,t.ncommaaccent=500,t.onesuperior=300,t.imacron=278,t.Euro=500})),t.ZapfDingbats=(0,i.getLookupTableFactory)((function(t){t.space=278,t.a1=974,t.a2=961,t.a202=974,t.a3=980,t.a4=719,t.a5=789,t.a119=790,t.a118=791,t.a117=690,t.a11=960,t.a12=939,t.a13=549,t.a14=855,t.a15=911,t.a16=933,t.a105=911,t.a17=945,t.a18=974,t.a19=755,t.a20=846,t.a21=762,t.a22=761,t.a23=571,t.a24=677,t.a25=763,t.a26=760,t.a27=759,t.a28=754,t.a6=494,t.a7=552,t.a8=537,t.a9=577,t.a10=692,t.a29=786,t.a30=788,t.a31=788,t.a32=790,t.a33=793,t.a34=794,t.a35=816,t.a36=823,t.a37=789,t.a38=841,t.a39=823,t.a40=833,t.a41=816,t.a42=831,t.a43=923,t.a44=744,t.a45=723,t.a46=749,t.a47=790,t.a48=792,t.a49=695,t.a50=776,t.a51=768,t.a52=792,t.a53=759,t.a54=707,t.a55=708,t.a56=682,t.a57=701,t.a58=826,t.a59=815,t.a60=789,t.a61=789,t.a62=707,t.a63=687,t.a64=696,t.a65=689,t.a66=786,t.a67=787,t.a68=713,t.a69=791,t.a70=785,t.a71=791,t.a72=873,t.a73=761,t.a74=762,t.a203=762,t.a75=759,t.a204=759,t.a76=892,t.a77=892,t.a78=788,t.a79=784,t.a81=438,t.a82=138,t.a83=277,t.a84=415,t.a97=392,t.a98=392,t.a99=668,t.a100=668,t.a89=390,t.a90=390,t.a93=317,t.a94=317,t.a91=276,t.a92=276,t.a205=509,t.a85=509,t.a206=410,t.a86=410,t.a87=234,t.a88=234,t.a95=334,t.a96=334,t.a101=732,t.a102=544,t.a103=544,t.a104=910,t.a106=667,t.a107=760,t.a108=760,t.a112=776,t.a111=595,t.a110=694,t.a109=626,t.a120=788,t.a121=788,t.a122=788,t.a123=788,t.a124=788,t.a125=788,t.a126=788,t.a127=788,t.a128=788,t.a129=788,t.a130=788,t.a131=788,t.a132=788,t.a133=788,t.a134=788,t.a135=788,t.a136=788,t.a137=788,t.a138=788,t.a139=788,t.a140=788,t.a141=788,t.a142=788,t.a143=788,t.a144=788,t.a145=788,t.a146=788,t.a147=788,t.a148=788,t.a149=788,t.a150=788,t.a151=788,t.a152=788,t.a153=788,t.a154=788,t.a155=788,t.a156=788,t.a157=788,t.a158=788,t.a159=788,t.a160=894,t.a161=838,t.a163=1016,t.a164=458,t.a196=748,t.a165=924,t.a192=748,t.a166=918,t.a167=927,t.a168=928,t.a169=928,t.a170=834,t.a171=873,t.a172=828,t.a173=924,t.a162=924,t.a174=917,t.a175=930,t.a176=931,t.a177=463,t.a178=883,t.a179=836,t.a193=836,t.a180=867,t.a199=867,t.a181=696,t.a200=696,t.a182=874,t.a201=874,t.a183=760,t.a184=946,t.a197=771,t.a185=865,t.a194=771,t.a198=888,t.a186=967,t.a195=888,t.a187=831,t.a188=873,t.a189=927,t.a190=970,t.a191=918}))}));e.getMetrics=r;const o=(0,i.getLookupTableFactory)((function(t){t.Courier={ascent:629,descent:-157,capHeight:562,xHeight:-426},t["Courier-Bold"]={ascent:629,descent:-157,capHeight:562,xHeight:439},t["Courier-Oblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t["Courier-BoldOblique"]={ascent:629,descent:-157,capHeight:562,xHeight:426},t.Helvetica={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-Bold"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Helvetica-Oblique"]={ascent:718,descent:-207,capHeight:718,xHeight:523},t["Helvetica-BoldOblique"]={ascent:718,descent:-207,capHeight:718,xHeight:532},t["Times-Roman"]={ascent:683,descent:-217,capHeight:662,xHeight:450},t["Times-Bold"]={ascent:683,descent:-217,capHeight:676,xHeight:461},t["Times-Italic"]={ascent:683,descent:-217,capHeight:653,xHeight:441},t["Times-BoldItalic"]={ascent:683,descent:-217,capHeight:669,xHeight:462},t.Symbol={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN},t.ZapfDingbats={ascent:Math.NaN,descent:Math.NaN,capHeight:Math.NaN,xHeight:Math.NaN}}));e.getFontBasicMetrics=o},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlyfTable=void 0,e.GlyfTable=class{constructor({glyfTable:t,isGlyphLocationsLong:e,locaTable:i,numGlyphs:r}){this.glyphs=[];const o=new DataView(i.buffer,i.byteOffset,i.byteLength),s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=e?4:2;let l=e?o.getUint32(0):2*o.getUint16(0),c=0;for(let t=0;t<r;t++){c+=a;const t=e?o.getUint32(c):2*o.getUint16(c);if(t===l){this.glyphs.push(new n({}));continue}const i=n.parse(l,s);this.glyphs.push(i),l=t}}getSize(){return this.glyphs.reduce(((t,e)=>t+(e.getSize()+3&-4)),0)}write(){const t=this.getSize(),e=new DataView(new ArrayBuffer(t)),n=t>131070,i=n?4:2,r=new DataView(new ArrayBuffer((this.glyphs.length+1)*i));n?r.setUint32(0,0):r.setUint16(0,0);let o=0,s=0;for(const t of this.glyphs)o+=t.write(o,e),o=o+3&-4,s+=i,n?r.setUint32(s,o):r.setUint16(s,o>>1);return{isLocationLong:n,loca:new Uint8Array(r.buffer),glyf:new Uint8Array(e.buffer)}}scale(t){for(let e=0,n=this.glyphs.length;e<n;e++)this.glyphs[e].scale(t[e])}};class n{constructor({header:t=null,simple:e=null,composites:n=null}){this.header=t,this.simple=e,this.composites=n}static parse(t,e){const[r,a]=i.parse(t,e);if(t+=r,a.numberOfContours<0){const i=[];for(;;){const[n,r]=s.parse(t,e);if(t+=n,i.push(r),!(32&r.flags))break}return new n({header:a,composites:i})}const l=o.parse(t,e,a.numberOfContours);return new n({header:a,simple:l})}getSize(){if(!this.header)return 0;const t=this.simple?this.simple.getSize():this.composites.reduce(((t,e)=>t+e.getSize()),0);return this.header.getSize()+t}write(t,e){if(!this.header)return 0;const n=t;if(t+=this.header.write(t,e),this.simple)t+=this.simple.write(t,e);else for(const n of this.composites)t+=n.write(t,e);return t-n}scale(t){if(!this.header)return;const e=(this.header.xMin+this.header.xMax)/2;if(this.header.scale(e,t),this.simple)this.simple.scale(e,t);else for(const n of this.composites)n.scale(e,t)}}class i{constructor({numberOfContours:t,xMin:e,yMin:n,xMax:i,yMax:r}){this.numberOfContours=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r}static parse(t,e){return[10,new i({numberOfContours:e.getInt16(t),xMin:e.getInt16(t+2),yMin:e.getInt16(t+4),xMax:e.getInt16(t+6),yMax:e.getInt16(t+8)})]}getSize(){return 10}write(t,e){return e.setInt16(t,this.numberOfContours),e.setInt16(t+2,this.xMin),e.setInt16(t+4,this.yMin),e.setInt16(t+6,this.xMax),e.setInt16(t+8,this.yMax),10}scale(t,e){this.xMin=Math.round(t+(this.xMin-t)*e),this.xMax=Math.round(t+(this.xMax-t)*e)}}class r{constructor({flags:t,xCoordinates:e,yCoordinates:n}){this.xCoordinates=e,this.yCoordinates=n,this.flags=t}}class o{constructor({contours:t,instructions:e}){this.contours=t,this.instructions=e}static parse(t,e,n){const i=[];for(let r=0;r<n;r++){const n=e.getUint16(t);t+=2,i.push(n)}const s=i[n-1]+1,a=e.getUint16(t);t+=2;const l=new Uint8Array(e).slice(t,t+a);t+=a;const c=[];for(let n=0;n<s;t++,n++){let i=e.getUint8(t);if(c.push(i),8&i){const r=e.getUint8(++t);i^=8;for(let t=0;t<r;t++)c.push(i);n+=r}}const h=[];let u=[],d=[],p=[];const f=[];let g=0,m=0;for(let n=0;n<s;n++){const r=c[n];if(2&r){const n=e.getUint8(t++);m+=16&r?n:-n,u.push(m)}else 16&r||(m+=e.getInt16(t),t+=2),u.push(m);i[g]===n&&(g++,h.push(u),u=[])}m=0,g=0;for(let n=0;n<s;n++){const o=c[n];if(4&o){const n=e.getUint8(t++);m+=32&o?n:-n,d.push(m)}else 32&o||(m+=e.getInt16(t),t+=2),d.push(m);p.push(1&o|64&o),i[g]===n&&(u=h[g],g++,f.push(new r({flags:p,xCoordinates:u,yCoordinates:d})),d=[],p=[])}return new o({contours:f,instructions:l})}getSize(){let t=2*this.contours.length+2+this.instructions.length,e=0,n=0;for(const i of this.contours){t+=i.flags.length;for(let r=0,o=i.xCoordinates.length;r<o;r++){const o=i.xCoordinates[r],s=i.yCoordinates[r];let a=Math.abs(o-e);a>255?t+=2:a>0&&(t+=1),e=o,a=Math.abs(s-n),a>255?t+=2:a>0&&(t+=1),n=s}}return t}write(t,e){const n=t,i=[],r=[],o=[];let s=0,a=0;for(const n of this.contours){for(let t=0,e=n.xCoordinates.length;t<e;t++){let e=n.flags[t];const l=n.xCoordinates[t];let c=l-s;if(0===c)e|=16,i.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?18:2,i.push(t)):i.push(c)}s=l;const h=n.yCoordinates[t];if(c=h-a,0===c)e|=32,r.push(0);else{const t=Math.abs(c);t<=255?(e|=c>=0?36:4,r.push(t)):r.push(c)}a=h,o.push(e)}e.setUint16(t,i.length-1),t+=2}e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length);for(const n of o)e.setUint8(t++,n);for(let n=0,r=i.length;n<r;n++){const r=i[n],s=o[n];2&s?e.setUint8(t++,r):16&s||(e.setInt16(t,r),t+=2)}for(let n=0,i=r.length;n<i;n++){const i=r[n],s=o[n];4&s?e.setUint8(t++,i):32&s||(e.setInt16(t,i),t+=2)}return t-n}scale(t,e){for(const n of this.contours)if(0!==n.xCoordinates.length)for(let i=0,r=n.xCoordinates.length;i<r;i++)n.xCoordinates[i]=Math.round(t+(n.xCoordinates[i]-t)*e)}}class s{constructor({flags:t,glyphIndex:e,argument1:n,argument2:i,transf:r,instructions:o}){this.flags=t,this.glyphIndex=e,this.argument1=n,this.argument2=i,this.transf=r,this.instructions=o}static parse(t,e){const n=t,i=[];let r=e.getUint16(t);const o=e.getUint16(t+2);let a,l;t+=4,1&r?(2&r?(a=e.getInt16(t),l=e.getInt16(t+2)):(a=e.getUint16(t),l=e.getUint16(t+2)),t+=4,r^=1):(2&r?(a=e.getInt8(t),l=e.getInt8(t+1)):(a=e.getUint8(t),l=e.getUint8(t+1)),t+=2),8&r?(i.push(e.getUint16(t)),t+=2):64&r?(i.push(e.getUint16(t),e.getUint16(t+2)),t+=4):128&r&&(i.push(e.getUint16(t),e.getUint16(t+2),e.getUint16(t+4),e.getUint16(t+6)),t+=8);let c=null;if(256&r){const n=e.getUint16(t);t+=2,c=new Uint8Array(e).slice(t,t+n),t+=n}return[t-n,new s({flags:r,glyphIndex:o,argument1:a,argument2:l,transf:i,instructions:c})]}getSize(){let t=4+2*this.transf.length;return 256&this.flags&&(t+=2+this.instructions.length),t+=2,2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(t+=2):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(t+=2),t}write(t,e){const n=t;return 2&this.flags?this.argument1>=-128&&this.argument1<=127&&this.argument2>=-128&&this.argument2<=127||(this.flags|=1):this.argument1>=0&&this.argument1<=255&&this.argument2>=0&&this.argument2<=255||(this.flags|=1),e.setUint16(t,this.flags),e.setUint16(t+2,this.glyphIndex),t+=4,1&this.flags?(2&this.flags?(e.setInt16(t,this.argument1),e.setInt16(t+2,this.argument2)):(e.setUint16(t,this.argument1),e.setUint16(t+2,this.argument2)),t+=4):(e.setUint8(t,this.argument1),e.setUint8(t+1,this.argument2),t+=2),256&this.flags&&(e.setUint16(t,this.instructions.length),t+=2,this.instructions.length&&(new Uint8Array(e.buffer,0,e.buffer.byteLength).set(this.instructions,t),t+=this.instructions.length)),t-n}scale(t,e){}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OpenTypeFileBuilder=void 0;var i=n(3),r=n(2);function o(t,e,n){t[e]=n>>8&255,t[e+1]=255&n}function s(t,e,n){t[e]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function a(t,e,n){if(n instanceof Uint8Array)t.set(n,e);else if("string"==typeof n)for(let i=0,r=n.length;i<r;i++)t[e++]=255&n.charCodeAt(i);else for(const i of n)t[e++]=255&i}class l{constructor(t){this.sfnt=t,this.tables=Object.create(null)}static getSearchParams(t,e){let n=1,i=0;for(;(n^t)>n;)n<<=1,i++;const r=n*e;return{range:r,entry:i,rangeShift:e*t-r}}toArray(){let t=this.sfnt;const e=this.tables,n=Object.keys(e);n.sort();const c=n.length;let h,u,d,p,f,g=12+16*c;const m=[g];for(h=0;h<c;h++)p=e[n[h]],g+=(p.length+3&-4)>>>0,m.push(g);const y=new Uint8Array(g);for(h=0;h<c;h++)p=e[n[h]],a(y,m[h],p);"true"===t&&(t=(0,r.string32)(65536)),y[0]=255&t.charCodeAt(0),y[1]=255&t.charCodeAt(1),y[2]=255&t.charCodeAt(2),y[3]=255&t.charCodeAt(3),o(y,4,c);const v=l.getSearchParams(c,16);for(o(y,6,v.range),o(y,8,v.entry),o(y,10,v.rangeShift),g=12,h=0;h<c;h++){f=n[h],y[g]=255&f.charCodeAt(0),y[g+1]=255&f.charCodeAt(1),y[g+2]=255&f.charCodeAt(2),y[g+3]=255&f.charCodeAt(3);let t=0;for(u=m[h],d=m[h+1];u<d;u+=4)t=t+(0,i.readUint32)(y,u)>>>0;s(y,g+4,t),s(y,g+8,m[h]),s(y,g+12,e[f].length),g+=16}return y}addTable(t,e){if(t in this.tables)throw new Error("Table "+t+" already exists");this.tables[t]=e}}e.OpenTypeFileBuilder=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Font=void 0;var i=n(35),r=n(2),o=n(38),s=n(3),a=n(8),l=n(49);function c(t,e,n){const i=t.length,r=e.length,o=i-r;let a=n,l=!1;for(;a<o;){let n=0;for(;n<r&&t[a+n]===e[n];)n++;if(n>=r){for(a+=n;a<i&&(0,s.isWhiteSpace)(t[a]);)a++;l=!0;break}a++}return{found:l,length:a}}e.Type1Font=class{constructor(t,e,n){let i=n.length1,s=n.length2,h=e.peekBytes(6);const u=128===h[0]&&1===h[1];u&&(e.skip(6),i=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const d=function(t,e){const n=[101,101,120,101,99],i=t.pos;let o,s,l,h;try{o=t.getBytes(e),s=o.length}catch{}if(s===e&&(l=c(o,n,e-2*n.length),l.found&&l.length===e))return{stream:new a.Stream(o),length:e};for((0,r.warn)('Invalid "Length1" property in Type1 font -- trying to recover.'),t.pos=i;l=c(t.peekBytes(2048),n,0),0!==l.length;)if(t.pos+=l.length,l.found){h=t.pos-i;break}return t.pos=i,h?{stream:new a.Stream(t.getBytes(h)),length:h}:((0,r.warn)('Unable to recover "Length1" property in Type1 font -- using as is.'),{stream:new a.Stream(t.getBytes(e)),length:e})}(e,i);new l.Type1Parser(d.stream,!1,o.SEAC_ANALYSIS_ENABLED).extractFontHeader(n),u&&(h=e.getBytes(6),s=h[5]<<24|h[4]<<16|h[3]<<8|h[2]);const p=function(t,e){const n=t.getBytes();if(0===n.length)throw new r.FormatError("getEexecBlock - no font program found.");return{stream:new a.Stream(n),length:n.length}}(e),f=new l.Type1Parser(p.stream,!0,o.SEAC_ANALYSIS_ENABLED).extractFontProgram(n);for(const t in f.properties)n[t]=f.properties[t];const g=f.charstrings,m=this.getType2Charstrings(g),y=this.getType2Subrs(f.subrs);this.charstrings=g,this.data=this.wrap(t,m,this.charstrings,y,n),this.seacs=this.getSeacs(f.charstrings)}get numGlyphs(){return this.charstrings.length+1}getCharset(){const t=[".notdef"];for(const{glyphName:e}of this.charstrings)t.push(e);return t}getGlyphMapping(t){const e=this.charstrings;if(t.composite){const n=Object.create(null);for(let i=0,r=e.length;i<r;i++)n[t.cMap.charCodeOf(i)]=i+1;return n}const n=[".notdef"];let i,r;for(r=0;r<e.length;r++)n.push(e[r].glyphName);const s=t.builtInEncoding;if(s){i=Object.create(null);for(const t in s)r=n.indexOf(s[t]),r>=0&&(i[t]=r)}return(0,o.type1FontGlyphMapping)(t,i,n)}hasGlyphId(t){return!(t<0||t>=this.numGlyphs)&&(0===t||this.charstrings[t-1].charstring.length>0)}getSeacs(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];i.seac&&(e[n+1]=i.seac)}return e}getType2Charstrings(t){const e=[];for(const n of t)e.push(n.charstring);return e}getType2Subrs(t){let e=0;const n=t.length;e=n<1133?107:n<33769?1131:32768;const i=[];let r;for(r=0;r<e;r++)i.push([11]);for(r=0;r<n;r++)i.push(t[r]);return i}wrap(t,e,n,r,o){const s=new i.CFF;s.header=new i.CFFHeader(1,0,4,4),s.names=[t];const a=new i.CFFTopDict;a.setByName("version",391),a.setByName("Notice",392),a.setByName("FullName",393),a.setByName("FamilyName",394),a.setByName("Weight",395),a.setByName("Encoding",null),a.setByName("FontMatrix",o.fontMatrix),a.setByName("FontBBox",o.bbox),a.setByName("charset",null),a.setByName("CharStrings",null),a.setByName("Private",null),s.topDict=a;const l=new i.CFFStrings;l.add("Version 0.11"),l.add("See original notice"),l.add(t),l.add(t),l.add("Medium"),s.strings=l,s.globalSubrIndex=new i.CFFIndex;const c=e.length,h=[".notdef"];let u,d;for(u=0;u<c;u++){const t=n[u].glyphName;-1===i.CFFStandardStrings.indexOf(t)&&l.add(t),h.push(t)}s.charset=new i.CFFCharset(!1,0,h);const p=new i.CFFIndex;for(p.add([139,14]),u=0;u<c;u++)p.add(e[u]);s.charStrings=p;const f=new i.CFFPrivateDict;f.setByName("Subrs",null);const g=["BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StemSnapH","StemSnapV","BlueShift","BlueFuzz","BlueScale","LanguageGroup","ExpansionFactor","ForceBold","StdHW","StdVW"];for(u=0,d=g.length;u<d;u++){const t=g[u];if(!(t in o.privateData))continue;const e=o.privateData[t];if(Array.isArray(e))for(let t=e.length-1;t>0;t--)e[t]-=e[t-1];f.setByName(t,e)}s.topDict.privateDict=f;const m=new i.CFFIndex;for(u=0,d=r.length;u<d;u++)m.add(r[u]);return f.subrsIndex=m,new i.CFFCompiler(s).compile()}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Type1Parser=void 0;var i=n(37),r=n(3),o=n(8),s=n(2);const a=[4],l=[5],c=[6],h=[7],u=[8],d=[12,35],p=[14],f=[21],g=[22],m=[30],y=[31];class v{constructor(){this.width=0,this.lsb=0,this.flexing=!1,this.output=[],this.stack=[]}convert(t,e,n){const i=t.length;let r,o,v,b=!1;for(let w=0;w<i;w++){let i=t[w];if(i<32){switch(12===i&&(i=(i<<8)+t[++w]),i){case 1:case 3:case 9:case 3072:case 3073:case 3074:case 3105:this.stack=[];break;case 4:if(this.flexing){if(this.stack.length<1){b=!0;break}const t=this.stack.pop();this.stack.push(0,t);break}b=this.executeCommand(1,a);break;case 5:b=this.executeCommand(2,l);break;case 6:b=this.executeCommand(1,c);break;case 7:b=this.executeCommand(1,h);break;case 8:b=this.executeCommand(6,u);break;case 10:if(this.stack.length<1){b=!0;break}if(v=this.stack.pop(),!e[v]){b=!0;break}b=this.convert(e[v],e,n);break;case 11:return b;case 13:if(this.stack.length<2){b=!0;break}r=this.stack.pop(),o=this.stack.pop(),this.lsb=o,this.width=r,this.stack.push(r,o),b=this.executeCommand(2,g);break;case 14:this.output.push(p[0]);break;case 21:if(this.flexing)break;b=this.executeCommand(2,f);break;case 22:if(this.flexing){this.stack.push(0);break}b=this.executeCommand(1,g);break;case 30:b=this.executeCommand(4,m);break;case 31:b=this.executeCommand(4,y);break;case 3078:if(n){const t=this.stack.at(-5);this.seac=this.stack.splice(-4,4),this.seac[0]+=this.lsb-t,b=this.executeCommand(0,p)}else b=this.executeCommand(4,p);break;case 3079:if(this.stack.length<4){b=!0;break}this.stack.pop(),r=this.stack.pop();const t=this.stack.pop();o=this.stack.pop(),this.lsb=o,this.width=r,this.stack.push(r,o,t),b=this.executeCommand(3,f);break;case 3084:if(this.stack.length<2){b=!0;break}const w=this.stack.pop(),x=this.stack.pop();this.stack.push(x/w);break;case 3088:if(this.stack.length<2){b=!0;break}v=this.stack.pop();const _=this.stack.pop();if(0===v&&3===_){const t=this.stack.splice(-17,17);this.stack.push(t[2]+t[0],t[3]+t[1],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]),b=this.executeCommand(13,d,!0),this.flexing=!1,this.stack.push(t[15],t[16])}else 1===v&&0===_&&(this.flexing=!0);break;case 3089:break;default:(0,s.warn)('Unknown type 1 charstring command of "'+i+'"')}if(b)break}else i<=246?i-=139:i=i<=250?256*(i-247)+t[++w]+108:i<=254?-256*(i-251)-t[++w]-108:(255&t[++w])<<24|(255&t[++w])<<16|(255&t[++w])<<8|(255&t[++w])<<0,this.stack.push(i)}return b}executeCommand(t,e,n){const i=this.stack.length;if(t>i)return!0;const r=i-t;for(let t=r;t<i;t++){let e=this.stack[t];Number.isInteger(e)?this.output.push(28,e>>8&255,255&e):(e=65536*e|0,this.output.push(255,e>>24&255,e>>16&255,e>>8&255,255&e))}return this.output.push(...e),n?this.stack.splice(r,t):this.stack.length=0,!1}}function b(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function w(t,e,n){if(n>=t.length)return new Uint8Array(0);let i,r,o=0|e;for(i=0;i<n;i++)o=52845*(t[i]+o)+22719&65535;const s=t.length-n,a=new Uint8Array(s);for(i=n,r=0;r<s;i++,r++){const e=t[i];a[r]=e^o>>8,o=52845*(e+o)+22719&65535}return a}function x(t){return 47===t||91===t||93===t||123===t||125===t||40===t||41===t}e.Type1Parser=class{constructor(t,e,n){if(e){const e=t.getBytes(),n=!((b(e[0])||(0,r.isWhiteSpace)(e[0]))&&b(e[1])&&b(e[2])&&b(e[3])&&b(e[4])&&b(e[5])&&b(e[6])&&b(e[7]));t=new o.Stream(n?w(e,55665,4):function(t,e,n){let i=0|e;const r=t.length,o=new Uint8Array(r>>>1);let s,a;for(s=0,a=0;s<r;s++){const e=t[s];if(!b(e))continue;let n;for(s++;s<r&&!b(n=t[s]);)s++;if(s<r){const t=parseInt(String.fromCharCode(e,n),16);o[a++]=t^i>>8,i=52845*(t+i)+22719&65535}}return o.slice(n,a)}(e,55665,4))}this.seacAnalysisEnabled=!!n,this.stream=t,this.nextChar()}readNumberArray(){this.getToken();const t=[];for(;;){const e=this.getToken();if(null===e||"]"===e||"}"===e)break;t.push(parseFloat(e||0))}return t}readNumber(){const t=this.getToken();return parseFloat(t||0)}readInt(){const t=this.getToken();return 0|parseInt(t||0,10)}readBoolean(){return"true"===this.getToken()?1:0}nextChar(){return this.currentChar=this.stream.getByte()}prevChar(){return this.stream.skip(-2),this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(-1===e)return null;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,r.isWhiteSpace)(e))break;e=this.nextChar()}if(x(e))return this.nextChar(),String.fromCharCode(e);let n="";do{n+=String.fromCharCode(e),e=this.nextChar()}while(e>=0&&!(0,r.isWhiteSpace)(e)&&!x(e));return n}readCharStrings(t,e){return-1===e?t:w(t,4330,e)}extractFontProgram(t){const e=this.stream,n=[],i=[],r=Object.create(null);r.lenIV=4;const o={subrs:[],charstrings:[],properties:{privateData:r}};let s,a,l,c;for(;null!==(s=this.getToken());)if("/"===s)switch(s=this.getToken(),s){case"CharStrings":for(this.getToken(),this.getToken(),this.getToken(),this.getToken();s=this.getToken(),null!==s&&"end"!==s;){if("/"!==s)continue;const t=this.getToken();a=this.readInt(),this.getToken(),l=a>0?e.getBytes(a):new Uint8Array(0),c=o.properties.privateData.lenIV;const n=this.readCharStrings(l,c);this.nextChar(),s=this.getToken(),"noaccess"===s?this.getToken():"/"===s&&this.prevChar(),i.push({glyph:t,encoded:n})}break;case"Subrs":for(this.readInt(),this.getToken();"dup"===this.getToken();){const t=this.readInt();a=this.readInt(),this.getToken(),l=a>0?e.getBytes(a):new Uint8Array(0),c=o.properties.privateData.lenIV;const i=this.readCharStrings(l,c);this.nextChar(),s=this.getToken(),"noaccess"===s&&this.getToken(),n[t]=i}break;case"BlueValues":case"OtherBlues":case"FamilyBlues":case"FamilyOtherBlues":const t=this.readNumberArray();t.length>0&&t.length;break;case"StemSnapH":case"StemSnapV":o.properties.privateData[s]=this.readNumberArray();break;case"StdHW":case"StdVW":o.properties.privateData[s]=this.readNumberArray()[0];break;case"BlueShift":case"lenIV":case"BlueFuzz":case"BlueScale":case"LanguageGroup":o.properties.privateData[s]=this.readNumber();break;case"ExpansionFactor":o.properties.privateData[s]=this.readNumber()||.06;break;case"ForceBold":o.properties.privateData[s]=this.readBoolean()}for(const{encoded:e,glyph:r}of i){const i=new v,s=i.convert(e,n,this.seacAnalysisEnabled);let a=i.output;s&&(a=[14]);const l={glyphName:r,charstring:a,width:i.width,lsb:i.lsb,seac:i.seac};if(".notdef"===r?o.charstrings.unshift(l):o.charstrings.push(l),t.builtInEncoding){const e=t.builtInEncoding.indexOf(r);e>-1&&void 0===t.widths[e]&&e>=t.firstChar&&e<=t.lastChar&&(t.widths[e]=i.width)}}return o}extractFontHeader(t){let e;for(;null!==(e=this.getToken());)if("/"===e)switch(e=this.getToken(),e){case"FontMatrix":const n=this.readNumberArray();t.fontMatrix=n;break;case"Encoding":const r=this.getToken();let o;if(/^\d+$/.test(r)){o=[];const t=0|parseInt(r,10);this.getToken();for(let n=0;n<t;n++){for(e=this.getToken();"dup"!==e&&"def"!==e;)if(e=this.getToken(),null===e)return;if("def"===e)break;const t=this.readInt();this.getToken();const n=this.getToken();o[t]=n,this.getToken()}}else o=(0,i.getEncoding)(r);t.builtInEncoding=o;break;case"FontBBox":const s=this.readNumberArray();t.ascent=Math.max(s[3],s[1]),t.descent=Math.min(s[1],s[3]),t.ascentScaled=!0}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Pattern=void 0,e.clearPatternCaches=function(){m=Object.create(null)},e.getTilingPatternIR=function(t,e,n){const r=e.getArray("Matrix"),o=i.Util.normalizeRect(e.getArray("BBox")),s=e.get("XStep"),a=e.get("YStep"),l=e.get("PaintType"),c=e.get("TilingType");if(o[2]-o[0]==0||o[3]-o[1]==0)throw new i.FormatError(`Invalid getTilingPatternIR /BBox array: [${o}].`);return["TilingPattern",n,t,r,o,s,a,l,c]};var i=n(2),r=n(5),o=n(12),s=n(3);const a=2,l=3,c=4,h=5,u=6,d=7;e.Pattern=class{constructor(){(0,i.unreachable)("Cannot initialize Pattern.")}static parseShading(t,e,n,o,p){const g=t instanceof r.BaseStream?t.dict:t,m=g.get("ShadingType");try{switch(m){case a:case l:return new f(g,e,n,o,p);case c:case h:case u:case d:return new v(t,e,n,o,p);default:throw new i.FormatError("Unsupported ShadingType: "+m)}}catch(t){if(t instanceof s.MissingDataException)throw t;return(0,i.warn)(t),new b}}};class p{static SMALL_NUMBER=1e-6;constructor(){this.constructor===p&&(0,i.unreachable)("Cannot initialize BaseShading.")}getIR(){(0,i.unreachable)("Abstract method `getIR` called.")}}class f extends p{constructor(t,e,n,r,s){super(),this.coordsArr=t.getArray("Coords"),this.shadingType=t.get("ShadingType");const a=o.ColorSpace.parse({cs:t.getRaw("CS")||t.getRaw("ColorSpace"),xref:e,resources:n,pdfFunctionFactory:r,localColorSpaceCache:s}),c=t.getArray("BBox");this.bbox=Array.isArray(c)&&4===c.length?i.Util.normalizeRect(c):null;let h=0,u=1;if(t.has("Domain")){const e=t.getArray("Domain");h=e[0],u=e[1]}let d=!1,f=!1;if(t.has("Extend")){const e=t.getArray("Extend");d=e[0],f=e[1]}if(!(this.shadingType!==l||d&&f)){const[t,e,n,r,o,s]=this.coordsArr,a=Math.hypot(t-r,e-o);n<=s+a&&s<=n+a&&(0,i.warn)("Unsupported radial gradient.")}this.extendStart=d,this.extendEnd=f;const g=t.getRaw("Function"),m=r.createFromArray(g),y=(u-h)/840,v=this.colorStops=[];if(h>=u||y<=0)return void(0,i.info)("Bad shading domain.");const b=new Float32Array(a.numComps),w=new Float32Array(1);let x,_=0;w[0]=h,m(w,0,b,0);let S=a.getRgb(b,0);const C=i.Util.makeHexColor(S[0],S[1],S[2]);v.push([0,C]);let k=1;w[0]=h+y,m(w,0,b,0);let A=a.getRgb(b,0),E=A[0]-S[0]+1,T=A[1]-S[1]+1,M=A[2]-S[2]+1,O=A[0]-S[0]-1,I=A[1]-S[1]-1,D=A[2]-S[2]-1;for(let t=2;t<840;t++){w[0]=h+t*y,m(w,0,b,0),x=a.getRgb(b,0);const e=t-_;if(E=Math.min(E,(x[0]-S[0]+1)/e),T=Math.min(T,(x[1]-S[1]+1)/e),M=Math.min(M,(x[2]-S[2]+1)/e),O=Math.max(O,(x[0]-S[0]-1)/e),I=Math.max(I,(x[1]-S[1]-1)/e),D=Math.max(D,(x[2]-S[2]-1)/e),!(O<=E&&I<=T&&D<=M)){const t=i.Util.makeHexColor(A[0],A[1],A[2]);v.push([k/840,t]),E=x[0]-A[0]+1,T=x[1]-A[1]+1,M=x[2]-A[2]+1,O=x[0]-A[0]-1,I=x[1]-A[1]-1,D=x[2]-A[2]-1,_=k,S=A}k=t,A=x}const F=i.Util.makeHexColor(A[0],A[1],A[2]);v.push([1,F]);let P="transparent";t.has("Background")&&(x=a.getRgb(t.get("Background"),0),P=i.Util.makeHexColor(x[0],x[1],x[2])),d||(v.unshift([0,P]),v[1][0]+=p.SMALL_NUMBER),f||(v.at(-1)[0]-=p.SMALL_NUMBER,v.push([1,P])),this.colorStops=v}getIR(){const t=this.coordsArr,e=this.shadingType;let n,r,o,s,c;return e===a?(r=[t[0],t[1]],o=[t[2],t[3]],s=null,c=null,n="axial"):e===l?(r=[t[0],t[1]],o=[t[3],t[4]],s=t[2],c=t[5],n="radial"):(0,i.unreachable)(`getPattern type unknown: ${e}`),["RadialAxial",n,this.bbox,this.colorStops,r,o,s,c]}}class g{constructor(t,e){this.stream=t,this.context=e,this.buffer=0,this.bufferLength=0;const n=e.numComps;this.tmpCompsBuf=new Float32Array(n);const i=e.colorSpace.numComps;this.tmpCsCompsBuf=e.colorFn?new Float32Array(i):this.tmpCompsBuf}get hasData(){if(this.stream.end)return this.stream.pos<this.stream.end;if(this.bufferLength>0)return!0;const t=this.stream.getByte();return!(t<0||(this.buffer=t,this.bufferLength=8,0))}readBits(t){let e=this.buffer,n=this.bufferLength;if(32===t){if(0===n)return(this.stream.getByte()<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte())>>>0;e=e<<24|this.stream.getByte()<<16|this.stream.getByte()<<8|this.stream.getByte();const t=this.stream.getByte();return this.buffer=t&(1<<n)-1,(e<<8-n|(255&t)>>n)>>>0}if(8===t&&0===n)return this.stream.getByte();for(;n<t;)e=e<<8|this.stream.getByte(),n+=8;return n-=t,this.bufferLength=n,this.buffer=e&(1<<n)-1,e>>n}align(){this.buffer=0,this.bufferLength=0}readFlag(){return this.readBits(this.context.bitsPerFlag)}readCoordinate(){const t=this.context.bitsPerCoordinate,e=this.readBits(t),n=this.readBits(t),i=this.context.decode,r=t<32?1/((1<<t)-1):2.3283064365386963e-10;return[e*r*(i[1]-i[0])+i[0],n*r*(i[3]-i[2])+i[2]]}readComponents(){const t=this.context.numComps,e=this.context.bitsPerComponent,n=e<32?1/((1<<e)-1):2.3283064365386963e-10,i=this.context.decode,r=this.tmpCompsBuf;for(let o=0,s=4;o<t;o++,s+=2){const t=this.readBits(e);r[o]=t*n*(i[s+1]-i[s])+i[s]}const o=this.tmpCsCompsBuf;return this.context.colorFn&&this.context.colorFn(r,0,o,0),this.context.colorSpace.getRgb(o,0)}}let m=Object.create(null);function y(t){return m[t]||=function(t){const e=[];for(let n=0;n<=t;n++){const i=n/t,r=1-i;e.push(new Float32Array([r**3,3*i*r**2,3*i**2*r,i**3]))}return e}(t)}class v extends p{static MIN_SPLIT_PATCH_CHUNKS_AMOUNT=3;static MAX_SPLIT_PATCH_CHUNKS_AMOUNT=20;static TRIANGLE_DENSITY=20;constructor(t,e,n,s,a){if(super(),!(t instanceof r.BaseStream))throw new i.FormatError("Mesh data is not a stream");const l=t.dict;this.shadingType=l.get("ShadingType");const p=l.getArray("BBox");this.bbox=Array.isArray(p)&&4===p.length?i.Util.normalizeRect(p):null;const f=o.ColorSpace.parse({cs:l.getRaw("CS")||l.getRaw("ColorSpace"),xref:e,resources:n,pdfFunctionFactory:s,localColorSpaceCache:a});this.background=l.has("Background")?f.getRgb(l.get("Background"),0):null;const m=l.getRaw("Function"),y=m?s.createFromArray(m):null;this.coords=[],this.colors=[],this.figures=[];const v={bitsPerCoordinate:l.get("BitsPerCoordinate"),bitsPerComponent:l.get("BitsPerComponent"),bitsPerFlag:l.get("BitsPerFlag"),decode:l.getArray("Decode"),colorFn:y,colorSpace:f,numComps:y?1:f.numComps},b=new g(t,v);let w=!1;switch(this.shadingType){case c:this._decodeType4Shading(b);break;case h:const t=0|l.get("VerticesPerRow");if(t<2)throw new i.FormatError("Invalid VerticesPerRow");this._decodeType5Shading(b,t);break;case u:this._decodeType6Shading(b),w=!0;break;case d:this._decodeType7Shading(b),w=!0;break;default:(0,i.unreachable)("Unsupported mesh type.")}if(w){this._updateBounds();for(let t=0,e=this.figures.length;t<e;t++)this._buildFigureFromPatch(t)}this._updateBounds(),this._packData()}_decodeType4Shading(t){const e=this.coords,n=this.colors,r=[],o=[];let s=0;for(;t.hasData;){const a=t.readFlag(),l=t.readCoordinate(),c=t.readComponents();if(0===s){if(!(0<=a&&a<=2))throw new i.FormatError("Unknown type4 flag");switch(a){case 0:s=3;break;case 1:o.push(o.at(-2),o.at(-1)),s=1;break;case 2:o.push(o.at(-3),o.at(-1)),s=1}r.push(a)}o.push(e.length),e.push(l),n.push(c),s--,t.align()}this.figures.push({type:"triangles",coords:new Int32Array(o),colors:new Int32Array(o)})}_decodeType5Shading(t,e){const n=this.coords,i=this.colors,r=[];for(;t.hasData;){const e=t.readCoordinate(),o=t.readComponents();r.push(n.length),n.push(e),i.push(o)}this.figures.push({type:"lattice",coords:new Int32Array(r),colors:new Int32Array(r),verticesPerRow:e})}_decodeType6Shading(t){const e=this.coords,n=this.colors,r=new Int32Array(16),o=new Int32Array(4);for(;t.hasData;){const s=t.readFlag();if(!(0<=s&&s<=3))throw new i.FormatError("Unknown type6 flag");const a=e.length;for(let n=0,i=0!==s?8:12;n<i;n++)e.push(t.readCoordinate());const l=n.length;for(let e=0,i=0!==s?2:4;e<i;e++)n.push(t.readComponents());let c,h,u,d;switch(s){case 0:r[12]=a+3,r[13]=a+4,r[14]=a+5,r[15]=a+6,r[8]=a+2,r[11]=a+7,r[4]=a+1,r[7]=a+8,r[0]=a,r[1]=a+11,r[2]=a+10,r[3]=a+9,o[2]=l+1,o[3]=l+2,o[0]=l,o[1]=l+3;break;case 1:c=r[12],h=r[13],u=r[14],d=r[15],r[12]=d,r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=u,r[11]=a+3,r[4]=h,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=o[2],h=o[3],o[2]=h,o[3]=l,o[0]=c,o[1]=l+1;break;case 2:c=r[15],h=r[11],r[12]=r[3],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[7],r[11]=a+3,r[4]=h,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=o[3],o[2]=o[1],o[3]=l,o[0]=c,o[1]=l+1;break;case 3:r[12]=r[0],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[1],r[11]=a+3,r[4]=r[2],r[7]=a+4,r[0]=r[3],r[1]=a+7,r[2]=a+6,r[3]=a+5,o[2]=o[0],o[3]=l,o[0]=o[1],o[1]=l+1}r[5]=e.length,e.push([(-4*e[r[0]][0]-e[r[15]][0]+6*(e[r[4]][0]+e[r[1]][0])-2*(e[r[12]][0]+e[r[3]][0])+3*(e[r[13]][0]+e[r[7]][0]))/9,(-4*e[r[0]][1]-e[r[15]][1]+6*(e[r[4]][1]+e[r[1]][1])-2*(e[r[12]][1]+e[r[3]][1])+3*(e[r[13]][1]+e[r[7]][1]))/9]),r[6]=e.length,e.push([(-4*e[r[3]][0]-e[r[12]][0]+6*(e[r[2]][0]+e[r[7]][0])-2*(e[r[0]][0]+e[r[15]][0])+3*(e[r[4]][0]+e[r[14]][0]))/9,(-4*e[r[3]][1]-e[r[12]][1]+6*(e[r[2]][1]+e[r[7]][1])-2*(e[r[0]][1]+e[r[15]][1])+3*(e[r[4]][1]+e[r[14]][1]))/9]),r[9]=e.length,e.push([(-4*e[r[12]][0]-e[r[3]][0]+6*(e[r[8]][0]+e[r[13]][0])-2*(e[r[0]][0]+e[r[15]][0])+3*(e[r[11]][0]+e[r[1]][0]))/9,(-4*e[r[12]][1]-e[r[3]][1]+6*(e[r[8]][1]+e[r[13]][1])-2*(e[r[0]][1]+e[r[15]][1])+3*(e[r[11]][1]+e[r[1]][1]))/9]),r[10]=e.length,e.push([(-4*e[r[15]][0]-e[r[0]][0]+6*(e[r[11]][0]+e[r[14]][0])-2*(e[r[12]][0]+e[r[3]][0])+3*(e[r[2]][0]+e[r[8]][0]))/9,(-4*e[r[15]][1]-e[r[0]][1]+6*(e[r[11]][1]+e[r[14]][1])-2*(e[r[12]][1]+e[r[3]][1])+3*(e[r[2]][1]+e[r[8]][1]))/9]),this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(o)})}}_decodeType7Shading(t){const e=this.coords,n=this.colors,r=new Int32Array(16),o=new Int32Array(4);for(;t.hasData;){const s=t.readFlag();if(!(0<=s&&s<=3))throw new i.FormatError("Unknown type7 flag");const a=e.length;for(let n=0,i=0!==s?12:16;n<i;n++)e.push(t.readCoordinate());const l=n.length;for(let e=0,i=0!==s?2:4;e<i;e++)n.push(t.readComponents());let c,h,u,d;switch(s){case 0:r[12]=a+3,r[13]=a+4,r[14]=a+5,r[15]=a+6,r[8]=a+2,r[9]=a+13,r[10]=a+14,r[11]=a+7,r[4]=a+1,r[5]=a+12,r[6]=a+15,r[7]=a+8,r[0]=a,r[1]=a+11,r[2]=a+10,r[3]=a+9,o[2]=l+1,o[3]=l+2,o[0]=l,o[1]=l+3;break;case 1:c=r[12],h=r[13],u=r[14],d=r[15],r[12]=d,r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=u,r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=h,r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=o[2],h=o[3],o[2]=h,o[3]=l,o[0]=c,o[1]=l+1;break;case 2:c=r[15],h=r[11],r[12]=r[3],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[7],r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=h,r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=c,r[1]=a+7,r[2]=a+6,r[3]=a+5,c=o[3],o[2]=o[1],o[3]=l,o[0]=c,o[1]=l+1;break;case 3:r[12]=r[0],r[13]=a+0,r[14]=a+1,r[15]=a+2,r[8]=r[1],r[9]=a+9,r[10]=a+10,r[11]=a+3,r[4]=r[2],r[5]=a+8,r[6]=a+11,r[7]=a+4,r[0]=r[3],r[1]=a+7,r[2]=a+6,r[3]=a+5,o[2]=o[0],o[3]=l,o[0]=o[1],o[1]=l+1}this.figures.push({type:"patch",coords:new Int32Array(r),colors:new Int32Array(o)})}}_buildFigureFromPatch(t){const e=this.figures[t];(0,i.assert)("patch"===e.type,"Unexpected patch mesh figure");const n=this.coords,r=this.colors,o=e.coords,s=e.colors,a=Math.min(n[o[0]][0],n[o[3]][0],n[o[12]][0],n[o[15]][0]),l=Math.min(n[o[0]][1],n[o[3]][1],n[o[12]][1],n[o[15]][1]),c=Math.max(n[o[0]][0],n[o[3]][0],n[o[12]][0],n[o[15]][0]),h=Math.max(n[o[0]][1],n[o[3]][1],n[o[12]][1],n[o[15]][1]);let u=Math.ceil((c-a)*v.TRIANGLE_DENSITY/(this.bounds[2]-this.bounds[0]));u=Math.max(v.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(v.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,u));let d=Math.ceil((h-l)*v.TRIANGLE_DENSITY/(this.bounds[3]-this.bounds[1]));d=Math.max(v.MIN_SPLIT_PATCH_CHUNKS_AMOUNT,Math.min(v.MAX_SPLIT_PATCH_CHUNKS_AMOUNT,d));const p=u+1,f=new Int32Array((d+1)*p),g=new Int32Array((d+1)*p);let m=0;const b=new Uint8Array(3),w=new Uint8Array(3),x=r[s[0]],_=r[s[1]],S=r[s[2]],C=r[s[3]],k=y(d),A=y(u);for(let t=0;t<=d;t++){b[0]=(x[0]*(d-t)+S[0]*t)/d|0,b[1]=(x[1]*(d-t)+S[1]*t)/d|0,b[2]=(x[2]*(d-t)+S[2]*t)/d|0,w[0]=(_[0]*(d-t)+C[0]*t)/d|0,w[1]=(_[1]*(d-t)+C[1]*t)/d|0,w[2]=(_[2]*(d-t)+C[2]*t)/d|0;for(let e=0;e<=u;e++,m++){if(!(0!==t&&t!==d||0!==e&&e!==u))continue;let i=0,s=0,a=0;for(let r=0;r<=3;r++)for(let l=0;l<=3;l++,a++){const c=k[t][r]*A[e][l];i+=n[o[a]][0]*c,s+=n[o[a]][1]*c}f[m]=n.length,n.push([i,s]),g[m]=r.length;const l=new Uint8Array(3);l[0]=(b[0]*(u-e)+w[0]*e)/u|0,l[1]=(b[1]*(u-e)+w[1]*e)/u|0,l[2]=(b[2]*(u-e)+w[2]*e)/u|0,r.push(l)}}f[0]=o[0],g[0]=s[0],f[u]=o[3],g[u]=s[1],f[p*d]=o[12],g[p*d]=s[2],f[p*d+u]=o[15],g[p*d+u]=s[3],this.figures[t]={type:"lattice",coords:f,colors:g,verticesPerRow:p}}_updateBounds(){let t=this.coords[0][0],e=this.coords[0][1],n=t,i=e;for(let r=1,o=this.coords.length;r<o;r++){const o=this.coords[r][0],s=this.coords[r][1];t=t>o?o:t,e=e>s?s:e,n=n<o?o:n,i=i<s?s:i}this.bounds=[t,e,n,i]}_packData(){let t,e,n,i;const r=this.coords,o=new Float32Array(2*r.length);for(t=0,n=0,e=r.length;t<e;t++){const e=r[t];o[n++]=e[0],o[n++]=e[1]}this.coords=o;const s=this.colors,a=new Uint8Array(3*s.length);for(t=0,n=0,e=s.length;t<e;t++){const e=s[t];a[n++]=e[0],a[n++]=e[1],a[n++]=e[2]}this.colors=a;const l=this.figures;for(t=0,e=l.length;t<e;t++){const e=l[t],r=e.coords,o=e.colors;for(n=0,i=r.length;n<i;n++)r[n]*=2,o[n]*=3}}getIR(){return["Mesh",this.shadingType,this.coords,this.colors,this.figures,this.bounds,this.bbox,this.background]}}class b extends p{getIR(){return["Dummy"]}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getXfaFontDict=function(t){const e=function(t){const e=d(t);if(!e)return null;const{baseWidths:n,baseMapping:i,factors:r}=e,o=r?n.map(((t,e)=>t*r[e])):n;let s,a=-2;const l=[];for(const[t,e]of i.map(((t,e)=>[t,e])).sort((([t],[e])=>t-e)))-1!==t&&(t===a+1?(s.push(o[e]),a+=1):(a=t,s=[o[e]],l.push(t,s)));return l}(t),n=new r.Dict(null);n.set("BaseFont",r.Name.get(t)),n.set("Type",r.Name.get("Font")),n.set("Subtype",r.Name.get("CIDFontType2")),n.set("Encoding",r.Name.get("Identity-H")),n.set("CIDToGIDMap",r.Name.get("Identity")),n.set("W",e),n.set("FirstChar",e[0]),n.set("LastChar",e.at(-2)+e.at(-1).length-1);const i=new r.Dict(null);n.set("FontDescriptor",i);const o=new r.Dict(null);return o.set("Ordering","Identity"),o.set("Registry","Adobe"),o.set("Supplement",0),n.set("CIDSystemInfo",o),n},e.getXfaFontName=d;var i=n(52),r=n(4),o=n(53),s=n(54),a=n(55),l=n(56),c=n(3),h=n(38);const u=(0,c.getLookupTableFactory)((function(t){t["MyriadPro-Regular"]=t["PdfJS-Fallback-Regular"]={name:"LiberationSans-Regular",factors:a.MyriadProRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:a.MyriadProRegularMetrics},t["MyriadPro-Bold"]=t["PdfJS-Fallback-Bold"]={name:"LiberationSans-Bold",factors:a.MyriadProBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:a.MyriadProBoldMetrics},t["MyriadPro-It"]=t["MyriadPro-Italic"]=t["PdfJS-Fallback-Italic"]={name:"LiberationSans-Italic",factors:a.MyriadProItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:a.MyriadProItalicMetrics},t["MyriadPro-BoldIt"]=t["MyriadPro-BoldItalic"]=t["PdfJS-Fallback-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:a.MyriadProBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:a.MyriadProBoldItalicMetrics},t.ArialMT=t.Arial=t["Arial-Regular"]={name:"LiberationSans-Regular",baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping},t["Arial-BoldMT"]=t["Arial-Bold"]={name:"LiberationSans-Bold",baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping},t["Arial-ItalicMT"]=t["Arial-Italic"]={name:"LiberationSans-Italic",baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping},t["Arial-BoldItalicMT"]=t["Arial-BoldItalic"]={name:"LiberationSans-BoldItalic",baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping},t["Calibri-Regular"]={name:"LiberationSans-Regular",factors:i.CalibriRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:i.CalibriRegularMetrics},t["Calibri-Bold"]={name:"LiberationSans-Bold",factors:i.CalibriBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:i.CalibriBoldMetrics},t["Calibri-Italic"]={name:"LiberationSans-Italic",factors:i.CalibriItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:i.CalibriItalicMetrics},t["Calibri-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:i.CalibriBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:i.CalibriBoldItalicMetrics},t["Segoeui-Regular"]={name:"LiberationSans-Regular",factors:l.SegoeuiRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:l.SegoeuiRegularMetrics},t["Segoeui-Bold"]={name:"LiberationSans-Bold",factors:l.SegoeuiBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:l.SegoeuiBoldMetrics},t["Segoeui-Italic"]={name:"LiberationSans-Italic",factors:l.SegoeuiItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:l.SegoeuiItalicMetrics},t["Segoeui-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:l.SegoeuiBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:l.SegoeuiBoldItalicMetrics},t["Helvetica-Regular"]=t.Helvetica={name:"LiberationSans-Regular",factors:o.HelveticaRegularFactors,baseWidths:s.LiberationSansRegularWidths,baseMapping:s.LiberationSansRegularMapping,metrics:o.HelveticaRegularMetrics},t["Helvetica-Bold"]={name:"LiberationSans-Bold",factors:o.HelveticaBoldFactors,baseWidths:s.LiberationSansBoldWidths,baseMapping:s.LiberationSansBoldMapping,metrics:o.HelveticaBoldMetrics},t["Helvetica-Italic"]={name:"LiberationSans-Italic",factors:o.HelveticaItalicFactors,baseWidths:s.LiberationSansItalicWidths,baseMapping:s.LiberationSansItalicMapping,metrics:o.HelveticaItalicMetrics},t["Helvetica-BoldItalic"]={name:"LiberationSans-BoldItalic",factors:o.HelveticaBoldItalicFactors,baseWidths:s.LiberationSansBoldItalicWidths,baseMapping:s.LiberationSansBoldItalicMapping,metrics:o.HelveticaBoldItalicMetrics}}));function d(t){const e=(0,h.normalizeFontName)(t);return u()[e]}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CalibriRegularMetrics=e.CalibriRegularFactors=e.CalibriItalicMetrics=e.CalibriItalicFactors=e.CalibriBoldMetrics=e.CalibriBoldItalicMetrics=e.CalibriBoldItalicFactors=e.CalibriBoldFactors=void 0,e.CalibriBoldFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.54657,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.73293,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.9121,.86943,.79795,.88198,.77958,.70864,.81055,.90399,.88653,.96017,.82577,.77892,.78257,.97507,1.54657,.97507,.85284,.89552,.90176,.88762,.8785,.75241,.8785,.90518,.95015,.77618,.8785,.88401,.91916,.86304,.88401,.91488,.8785,.8801,.8785,.8785,.91343,.7173,1.04106,.8785,.85075,.95794,.82616,.85162,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.12401,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.73293,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.9121,.86943,.86943,.86943,.86943,.86943,.85284,.87508,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.88762,.88762,.88762,.88762,.88762,.88762,.8715,.75241,.90518,.90518,.90518,.90518,.88401,.88401,.88401,.88401,.8785,.8785,.8801,.8801,.8801,.8801,.8801,.90747,.89049,.8785,.8785,.8785,.8785,.85162,.8785,.85162,.83908,.88762,.83908,.88762,.83908,.88762,.73293,.75241,.73293,.75241,.73293,.75241,.73293,.75241,.87289,.83016,.88506,.93125,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.73133,.90518,.81921,.77618,.81921,.77618,.81921,.77618,1,1,.87356,.8785,.91075,.89608,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76229,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.79468,.91926,.88175,.70823,.94903,.9121,.8785,1,1,.9121,.8785,.87802,.88656,.8785,.86943,.8801,.86943,.8801,.86943,.8801,.87402,.89291,.77958,.91343,1,1,.77958,.91343,.70864,.7173,.70864,.7173,.70864,.7173,.70864,.7173,1,1,.81055,.75841,.81055,1.06452,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.90399,.8785,.96017,.95794,.77892,.85162,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.88762,.77539,.8715,.87508,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70674,.98387,.94721,1.33431,1.45894,.95161,1.06303,.83908,.80352,.57184,.6965,.56289,.82001,.56029,.81235,1.02988,.83908,.7762,.68156,.80367,.73133,.78257,.87356,.86943,.95958,.75727,.89019,1.04924,.9121,.7648,.86943,.87356,.79795,.78275,.81055,.77892,.9762,.82577,.99819,.84896,.95958,.77892,.96108,1.01407,.89049,1.02988,.94211,.96108,.8936,.84021,.87842,.96399,.79109,.89049,1.00813,1.02988,.86077,.87445,.92099,.84723,.86513,.8801,.75638,.85714,.78216,.79586,.87965,.94211,.97747,.78287,.97926,.84971,1.02988,.94211,.8801,.94211,.84971,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90264,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.90518,1,1,1,1,1,1,1,1,1,1,1,1,.90548,1,1,1,1,1,1,.96017,.95794,.96017,.95794,.96017,.95794,.77892,.85162,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.92794,.87012,.87012,.87012,.89552,.89552,1.42259,.71143,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.93835,.83406,.91133,.84107,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90527,1.81055,.90527,1.81055,1.31006,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriBoldItalicFactors=[1.3877,1,1,1,.97801,.92482,.89552,.91133,.81988,.97566,.98152,.93548,.93548,1.2798,.85284,.92794,1,.96134,1.56239,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.82845,.82845,.85284,.85284,.85284,.75859,.92138,.83908,.7762,.71805,.87289,.73133,.7514,.81921,.87356,.95958,.59526,.75727,.69225,1.04924,.90872,.85938,.79795,.87068,.77958,.69766,.81055,.90399,.88653,.96068,.82577,.77892,.78257,.97507,1.529,.97507,.85284,.89552,.90176,.94908,.86411,.74012,.86411,.88323,.95015,.86411,.86331,.88401,.91916,.86304,.88401,.9039,.86331,.86331,.86411,.86411,.90464,.70852,1.04106,.86331,.84372,.95794,.82616,.84548,.79492,.88331,1.69808,.88331,.85284,.97801,.89552,.91133,.89552,.91133,1.7801,.89552,1.24487,1.13254,1.19129,.96839,.85284,.68787,.70645,.85592,.90747,1.01466,1.0088,.90323,1,1.07463,1,.91056,.75806,1.19118,.96839,.78864,.82845,.84133,.75859,.83908,.83908,.83908,.83908,.83908,.83908,.77539,.71805,.73133,.73133,.73133,.73133,.95958,.95958,.95958,.95958,.88506,.90872,.85938,.85938,.85938,.85938,.85938,.85284,.87068,.90399,.90399,.90399,.90399,.77892,.79795,.90807,.94908,.94908,.94908,.94908,.94908,.94908,.85887,.74012,.88323,.88323,.88323,.88323,.88401,.88401,.88401,.88401,.8785,.86331,.86331,.86331,.86331,.86331,.86331,.90747,.89049,.86331,.86331,.86331,.86331,.84548,.86411,.84548,.83908,.94908,.83908,.94908,.83908,.94908,.71805,.74012,.71805,.74012,.71805,.74012,.71805,.74012,.87289,.79538,.88506,.92726,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.73133,.88323,.81921,.86411,.81921,.86411,.81921,.86411,1,1,.87356,.86331,.91075,.8777,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.95958,.88401,.76467,.90167,.59526,.91916,1,1,.86304,.69225,.88401,1,1,.70424,.77312,.91926,.88175,.70823,.94903,.90872,.86331,1,1,.90872,.86331,.86906,.88116,.86331,.85938,.86331,.85938,.86331,.85938,.86331,.87402,.86549,.77958,.90464,1,1,.77958,.90464,.69766,.70852,.69766,.70852,.69766,.70852,.69766,.70852,1,1,.81055,.75841,.81055,1.06452,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.90399,.86331,.96068,.95794,.77892,.84548,.77892,.78257,.79492,.78257,.79492,.78257,.79492,.9297,.56892,.83908,.94908,.77539,.85887,.87068,.89049,1,1,.81055,1.04106,1.20528,1.20528,1,1.15543,.70088,.98387,.94721,1.33431,1.45894,.95161,1.48387,.83908,.80352,.57118,.6965,.56347,.79179,.55853,.80346,1.02988,.83908,.7762,.67174,.86036,.73133,.78257,.87356,.86441,.95958,.75727,.89019,1.04924,.90872,.74889,.85938,.87891,.79795,.7957,.81055,.77892,.97447,.82577,.97466,.87179,.95958,.77892,.94252,.95612,.8753,1.02988,.92733,.94252,.87411,.84021,.8728,.95612,.74081,.8753,1.02189,1.02988,.84814,.87445,.91822,.84723,.85668,.86331,.81344,.87581,.76422,.82046,.96057,.92733,.99375,.78022,.95452,.86015,1.02988,.92733,.86331,.92733,.86015,.73133,1,1,1,1,1,1,1,1,1,1,1,1,.90631,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.88323,1,1,1,1,1,1,1,1,1,1,1,1,.85174,1,1,1,1,1,1,.96068,.95794,.96068,.95794,.96068,.95794,.77892,.84548,1,1,.89552,.90527,1,.90363,.92794,.92794,.92794,.89807,.87012,.87012,.87012,.89552,.89552,1.42259,.71094,1.06152,1,1,1.03372,1.03372,.97171,1.4956,2.2807,.92972,.83406,.91133,.83326,.91133,1,1,1,.72021,1,1.23108,.83489,.88525,.88525,.81499,.90616,1.81055,.90527,1.81055,1.3107,1.53711,.94434,1.08696,1,.95018,.77192,.85284,.90747,1.17534,.69825,.9716,1.37077,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.08004,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,.90727,.90727,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriBoldItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriItalicFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39543,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.72346,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89249,.84118,.77452,.85374,.75186,.67789,.79776,.88844,.85066,.94309,.77818,.7306,.76659,1.10369,1.38313,1.10369,1.06139,.89552,.8739,.9245,.9245,.83203,.9245,.85865,1.09842,.9245,.9245,1.03297,1.07692,.90918,1.03297,.94959,.9245,.92274,.9245,.9245,1.02933,.77832,1.20562,.9245,.8916,.98986,.86621,.89453,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.16359,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.72346,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89249,.84118,.84118,.84118,.84118,.84118,.85284,.84557,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.9245,.9245,.9245,.9245,.9245,.9245,.84843,.83203,.85865,.85865,.85865,.85865,.82601,.82601,.82601,.82601,.94469,.9245,.92274,.92274,.92274,.92274,.92274,.90747,.86651,.9245,.9245,.9245,.9245,.89453,.9245,.89453,.8675,.9245,.8675,.9245,.8675,.9245,.72346,.83203,.72346,.83203,.72346,.83203,.72346,.83203,.85193,.8875,.86477,.99034,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.73206,.85865,.81105,.9245,.81105,.9245,.81105,.9245,1,1,.86275,.9245,.90872,.93591,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77896,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.9375,.98156,.93407,.77261,1.11429,.89249,.9245,1,1,.89249,.9245,.92534,.86698,.9245,.84118,.92274,.84118,.92274,.84118,.92274,.8667,.86291,.75186,1.02933,1,1,.75186,1.02933,.67789,.77832,.67789,.77832,.67789,.77832,.67789,.77832,1,1,.79776,.97655,.79776,1.23023,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.88844,.9245,.94309,.98986,.7306,.89453,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.9245,.76318,.84843,.84557,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67009,.96334,.93695,1.35191,1.40909,.95161,1.48387,.8675,.90861,.6192,.7363,.64824,.82411,.56321,.85696,1.23516,.8675,.81552,.7286,.84134,.73206,.76659,.86275,.84369,.90685,.77892,.85871,1.02638,.89249,.75828,.84118,.85984,.77452,.76466,.79776,.7306,.90782,.77818,.903,.87291,.90685,.7306,.99058,1.03667,.94635,1.23516,.9849,.99058,.92393,.8916,.942,1.03667,.75026,.94635,1.0297,1.23516,.90918,.94048,.98217,.89746,.84153,.92274,.82507,.88832,.84438,.88178,1.03525,.9849,1.00225,.78086,.97248,.89404,1.23516,.9849,.92274,.9849,.89404,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.89693,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.85865,1,1,1,1,1,1,1,1,1,1,1,1,.90933,1,1,1,1,1,1,.94309,.98986,.94309,.98986,.94309,.98986,.7306,.89453,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.68994,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.97858,.82616,.91133,.83437,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90572,1.81055,.90749,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85284,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.CalibriItalicMetrics={lineHeight:1.2207,lineGap:.2207},e.CalibriRegularFactors=[1.3877,1,1,1,1.17223,1.1293,.89552,.91133,.80395,1.02269,1.15601,.91056,.91056,1.2798,.85284,.89807,1,.90861,1.39016,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.91133,.96309,.96309,.85284,.85284,.85284,.83319,.88071,.8675,.81552,.73834,.85193,.73206,.7522,.81105,.86275,.90685,.6377,.77892,.75593,1.02638,.89385,.85122,.77452,.86503,.75186,.68887,.79776,.88844,.85066,.94258,.77818,.7306,.76659,1.10369,1.39016,1.10369,1.06139,.89552,.8739,.86128,.94469,.8457,.94469,.89464,1.09842,.84636,.94469,1.03297,1.07692,.90918,1.03297,.95897,.94469,.9482,.94469,.94469,1.04692,.78223,1.20562,.94469,.90332,.98986,.86621,.90527,.79004,.94152,1.77256,.94152,.85284,.97801,.89552,.91133,.89552,.91133,1.91729,.89552,1.17889,1.13254,1.08707,.92098,.85284,.68787,.71353,.84737,.90747,1.0088,1.0044,.87683,1,1.09091,1,.92229,.739,1.15642,.92098,.76288,.80504,.80972,.75859,.8675,.8675,.8675,.8675,.8675,.8675,.76318,.73834,.73206,.73206,.73206,.73206,.90685,.90685,.90685,.90685,.86477,.89385,.85122,.85122,.85122,.85122,.85122,.85284,.85311,.88844,.88844,.88844,.88844,.7306,.77452,.86331,.86128,.86128,.86128,.86128,.86128,.86128,.8693,.8457,.89464,.89464,.89464,.89464,.82601,.82601,.82601,.82601,.94469,.94469,.9482,.9482,.9482,.9482,.9482,.90747,.86651,.94469,.94469,.94469,.94469,.90527,.94469,.90527,.8675,.86128,.8675,.86128,.8675,.86128,.73834,.8457,.73834,.8457,.73834,.8457,.73834,.8457,.85193,.92454,.86477,.9921,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.73206,.89464,.81105,.84636,.81105,.84636,.81105,.84636,1,1,.86275,.94469,.90872,.95786,.90685,.82601,.90685,.82601,.90685,.82601,.90685,1.03297,.90685,.82601,.77741,1.05611,.6377,1.07692,1,1,.90918,.75593,1.03297,1,1,.76032,.90452,.98156,1.11842,.77261,1.11429,.89385,.94469,1,1,.89385,.94469,.95877,.86901,.94469,.85122,.9482,.85122,.9482,.85122,.9482,.8667,.90016,.75186,1.04692,1,1,.75186,1.04692,.68887,.78223,.68887,.78223,.68887,.78223,.68887,.78223,1,1,.79776,.92188,.79776,1.23023,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.88844,.94469,.94258,.98986,.7306,.90527,.7306,.76659,.79004,.76659,.79004,.76659,.79004,1.09231,.54873,.8675,.86128,.76318,.8693,.85311,.86651,1,1,.79776,1.20562,1.18622,1.18622,1,1.1437,.67742,.96334,.93695,1.35191,1.40909,.95161,1.48387,.86686,.90861,.62267,.74359,.65649,.85498,.56963,.88254,1.23516,.8675,.81552,.75443,.84503,.73206,.76659,.86275,.85122,.90685,.77892,.85746,1.02638,.89385,.75657,.85122,.86275,.77452,.74171,.79776,.7306,.95165,.77818,.89772,.88831,.90685,.7306,.98142,1.02191,.96576,1.23516,.99018,.98142,.9236,.89258,.94035,1.02191,.78848,.96576,.9561,1.23516,.90918,.92578,.95424,.89746,.83969,.9482,.80113,.89442,.85208,.86155,.98022,.99018,1.00452,.81209,.99247,.89181,1.23516,.99018,.9482,.99018,.89181,.73206,1,1,1,1,1,1,1,1,1,1,1,1,.88844,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89464,1,1,1,1,1,1,1,1,1,1,1,1,.96766,1,1,1,1,1,1,.94258,.98986,.94258,.98986,.94258,.98986,.7306,.90527,1,1,.89552,.90527,1,.90186,1.12308,1.12308,1.12308,1.12308,1.2566,1.2566,1.2566,.89552,.89552,1.42259,.69043,1.03809,1,1,1.0176,1.0176,1.11523,1.4956,2.01462,.99331,.82616,.91133,.84286,.91133,1,1,1,.70508,1,1.23108,.79801,.84426,.84426,.774,.90527,1.81055,.90527,1.81055,1.28809,1.55469,.94434,1.07806,1,.97094,.7589,.85284,.90747,1.19658,.69825,.97622,1.33512,.90747,.90747,.85356,.90747,.90747,1.44947,.85284,.8941,.8941,.70572,.8,.70572,.70572,.70572,.70572,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.99862,.99862,1,1,1,1,1,1.0336,.91027,1,1,1,.99862,1,1,1,1,1,1,1,1,1,1,1,1,1.05859,1.05859,1,1,1,1.07185,.99413,.96334,1.08065,1,1,1,1,1,1,1,1,1,1,1],e.CalibriRegularMetrics={lineHeight:1.2207,lineGap:.2207}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HelveticaRegularMetrics=e.HelveticaRegularFactors=e.HelveticaItalicMetrics=e.HelveticaItalicFactors=e.HelveticaBoldMetrics=e.HelveticaBoldItalicMetrics=e.HelveticaBoldItalicFactors=e.HelveticaBoldFactors=void 0,e.HelveticaBoldFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.03374,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.00042,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.03828,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00034,.99977,1,.99997,1.00026,1.00078,1.00036,.99973,1.00013,1.0006,.99977,.99977,.99988,.85148,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,1.00069,1.00022,.99977,1.00001,.99984,1.00026,1.00001,1.00024,1.00001,.9999,1,1.0006,1.00001,1.00041,.99962,1.00026,1.0006,.99995,1.00041,.99942,.99973,.99927,1.00082,.99902,1.00026,1.00087,1.0006,1.00069,.99973,.99867,.99973,.9993,1.00026,1.00049,1.00056,1,.99988,.99935,.99995,.99954,1.00055,.99945,1.00032,1.0006,.99995,1.00026,.99995,1.00032,1.00001,1.00008,.99971,1.00019,.9994,1.00001,1.0006,1.00044,.99973,1.00023,1.00047,1,.99942,.99561,.99989,1.00035,.99977,1.00035,.99977,1.00019,.99944,1.00001,1.00021,.99926,1.00035,1.00035,.99942,1.00048,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.99989,1.00057,1.00001,.99936,1.00052,1.00012,.99996,1.00043,1,1.00035,.9994,.99976,1.00035,.99973,1.00052,1.00041,1.00119,1.00037,.99973,1.00002,.99986,1.00041,1.00041,.99902,.9996,1.00034,.99999,1.00026,.99999,1.00026,.99973,1.00052,.99973,1,.99973,1.00041,1.00075,.9994,1.0003,.99999,1,1.00041,.99955,1,.99915,.99973,.99973,1.00026,1.00119,.99955,.99973,1.0006,.99911,1.0006,1.00026,.99972,1.00026,.99902,1.00041,.99973,.99999,1,1,1.00038,1.0005,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,1.00047,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldMetrics={lineHeight:1.2,lineGap:.2},e.HelveticaBoldItalicFactors=[.76116,1,1,1.0006,.99998,.99974,.99973,.99973,.99982,.99977,1.00087,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99998,1,1.00003,1.00003,1.00003,1.00026,.9999,.99977,.99977,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,.99973,.99977,1.00026,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,.99998,1.0006,.99998,1.00003,.99973,.99998,.99973,1.00026,.99973,1.00026,.99973,.99998,1.00026,1.00026,1.0006,1.0006,.99973,1.0006,.99982,1.00026,1.00026,1.00026,1.00026,.99959,.99973,.99998,1.00026,.99973,1.00022,.99973,.99973,1,.99959,1.00077,.99959,1.00003,.99998,.99973,.99973,.99973,.99973,1.00077,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.99973,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,.99977,.99977,.99977,.99977,.99977,.99977,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,.99973,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.00026,1.06409,1.00026,1.00026,1.00026,1.00026,1.00026,.99973,1.00026,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,1.0044,.99977,1.00026,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,.99977,1.00026,.99977,1.00026,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99971,.99973,.99973,1.0006,.99977,.99973,.99973,1.00026,1.0006,1.00026,1.0006,1.00026,1.01011,1.00026,.99999,1.00026,1.0006,.99977,1.00026,.99977,1.00026,.99977,1.00026,.9993,.9998,1.00026,1.00022,1.00026,1.00022,1.00026,1.00022,1.00026,1,1.00016,.99977,.99959,.99977,.99959,.99977,.99959,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00026,.99998,1.00026,.8121,1.00026,.99998,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,.99977,1.00026,1.00016,1.00022,1.00001,.99973,1.00001,1.00026,1,1.00026,1,1.00026,1,1.0006,.99973,.99977,.99973,1,.99982,1.00022,1.00026,1.00001,.99973,1.00026,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99977,1,1,1.00026,.99969,.99972,.99981,.9998,1.0006,.99977,.99977,1.00022,.91155,1.00001,1.00026,.99977,1.00022,1.0006,.99977,1.00001,.99999,.99977,.99966,1.00022,1.00032,1.00001,.99944,1.00026,1.00001,.99968,1.00001,1.00047,1,1.0006,1.00001,.99981,1.00101,1.00026,1.0006,.99948,.99981,1.00064,.99973,.99942,1.00101,1.00061,1.00026,1.00069,1.0006,1.00014,.99973,1.01322,.99973,1.00065,1.00026,1.00012,.99923,1,1.00064,1.00076,.99948,1.00055,1.00063,1.00007,.99943,1.0006,.99948,1.00026,.99948,.99943,1.00001,1.00001,1.00029,1.00038,1.00035,1.00001,1.0006,1.0006,.99973,.99978,1.00001,1.00057,.99989,.99967,.99964,.99967,.99977,.99999,.99977,1.00038,.99977,1.00001,.99973,1.00066,.99967,.99967,1.00041,.99998,.99999,.99977,1.00022,.99967,1.00001,.99977,1.00026,.99964,1.00031,1.00001,.99999,.99999,1,1.00023,1,1,.99999,1.00035,1.00001,.99999,.99973,.99977,.99999,1.00058,.99973,.99973,.99955,.9995,1.00026,1.00026,1.00032,.99989,1.00034,.99999,1.00026,1.00026,1.00026,.99973,.45998,.99973,1.00026,.99973,1.00001,.99999,.99982,.99994,.99996,1,1.00042,1.00044,1.00029,1.00023,.99973,.99973,1.00026,.99949,1.00002,.99973,1.0006,1.0006,1.0006,.99975,1.00026,1.00026,1.00032,.98685,.99973,1.00026,1,1,.99966,1.00044,1.00016,1.00022,1.00016,1.00022,1.00016,1.00022,1.00001,.99973,1,1,.99973,1,1,.99955,1.0006,1.0006,1.0006,1.0006,1,1,1,.99973,.99973,.99972,1,1,1.00106,.99999,.99998,.99998,.99999,.99998,1.66475,1,.99973,.99973,1,.99973,.99971,.99978,1,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00098,1,1,1,1.00049,1,1,.99972,1,1.20985,1.39713,1.00003,1.00031,1.00015,1,.99561,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.99972,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaBoldItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaItalicFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.0288,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,.99946,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.06311,.99973,1.00024,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,1.00041,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.89547,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,1.00001,1,1.00054,.99977,1.00084,1.00007,.99973,1.00013,.99924,1.00001,1.00001,.99945,.91221,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00001,.99999,.99977,.99933,1.00022,1.00054,1.00001,1.00065,1.00026,1.00001,1.0001,1.00001,1.00052,1,1.0006,1.00001,.99945,.99897,.99968,.99924,1.00036,.99945,.99949,1,1.0006,.99897,.99918,.99968,.99911,.99924,1,.99962,1.01487,1,1.0005,.99973,1.00012,1.00043,1,.99995,.99994,1.00036,.99947,1.00019,1.00063,1.00025,.99924,1.00036,.99973,1.00036,1.00025,1.00001,1.00001,1.00027,1.0001,1.00068,1.00001,1.0006,1.0006,1,1.00008,.99957,.99972,.9994,.99954,.99975,1.00051,1.00001,1.00019,1.00001,1.0001,.99986,1.00001,1.00001,1.00038,.99954,.99954,.9994,1.00066,.99999,.99977,1.00022,1.00054,1.00001,.99977,1.00026,.99975,1.0001,1.00001,.99993,.9995,.99955,1.00016,.99978,.99974,1.00019,1.00022,.99955,1.00053,.99973,1.00089,1.00005,.99967,1.00048,.99973,1.00002,1.00034,.99973,.99973,.99964,1.00006,1.00066,.99947,.99973,.98894,.99973,1,.44898,1,.99946,1,1.00039,1.00082,.99991,.99991,.99985,1.00022,1.00023,1.00061,1.00006,.99966,.99973,.99973,.99973,1.00019,1.0008,1,.99924,.99924,.99924,.99983,1.00044,.99973,.99964,.98332,1,.99973,1,1,.99962,.99895,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,1.00423,.99925,.99999,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1.00049,1,1.00245,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,1.00003,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,.99998,.99998,.99998,.99998,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaItalicMetrics={lineHeight:1.35,lineGap:.2},e.HelveticaRegularFactors=[.76116,1,1,1.0006,1.0006,1.00006,.99973,.99973,.99982,1.00001,1.00043,.99998,.99998,.99959,1.00003,1.0006,.99998,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.0006,1,1.00003,1.00003,1.00003,.99973,.99987,1.00001,1.00001,.99977,.99977,1.00001,1.00026,1.00022,.99977,1.0006,1,1.00001,.99973,.99999,.99977,1.00022,1.00001,1.00022,.99977,1.00001,1.00026,.99977,1.00001,1.00016,1.00001,1.00001,1.00026,1.0006,1.0006,1.0006,.99949,.99973,.99998,.99973,.99973,1,.99973,.99973,1.0006,.99973,.99973,.99924,.99924,1,.99924,.99999,.99973,.99973,.99973,.99973,.99998,1,1.0006,.99973,1,.99977,1,1,1,1.00005,1.0009,1.00005,1.00003,.99998,.99973,.99973,.99973,.99973,1.0009,.99973,.99998,1.00025,.99968,.99973,1.00003,1.00025,.60299,1.00024,1.06409,1,1,.99998,1,.9998,1.0006,.99998,1,.99936,.99973,1.00002,1.00002,1.00002,1.00026,1.00001,1.00001,1.00001,1.00001,1.00001,1.00001,1,.99977,1.00001,1.00001,1.00001,1.00001,1.0006,1.0006,1.0006,1.0006,.99977,.99977,1.00022,1.00022,1.00022,1.00022,1.00022,1.00003,1.00022,.99977,.99977,.99977,.99977,1.00001,1.00001,1.00026,.99973,.99973,.99973,.99973,.99973,.99973,.99982,1,.99973,.99973,.99973,.99973,1.0006,1.0006,1.0006,1.0006,.99973,.99973,.99973,.99973,.99973,.99973,.99973,1.06409,1.00026,.99973,.99973,.99973,.99973,1,.99973,1,1.00001,.99973,1.00001,.99973,1.00001,.99973,.99977,1,.99977,1,.99977,1,.99977,1,.99977,1.04596,.99977,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00001,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,.99977,.99973,.99977,.99973,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,1.0006,.99924,1.0006,1.0006,1.00019,1.00034,1,.99924,1.00001,1,1,.99973,.99924,.99973,.99924,.99973,1.02572,.99973,1.00005,.99973,.99924,.99977,.99973,.99977,.99973,.99977,.99973,.99999,.9998,.99973,1.00022,.99973,1.00022,.99973,1.00022,.99973,1,1.00016,.99977,.99998,.99977,.99998,.99977,.99998,1.00001,1,1.00001,1,1.00001,1,1.00001,1,1.00026,1.0006,1.00026,.84533,1.00026,1.0006,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,.99977,.99973,1.00016,.99977,1.00001,1,1.00001,1.00026,1,1.00026,1,1.00026,1,.99924,.99973,1.00001,.99973,1,.99982,1.00022,1.00026,1.00001,1,1.00026,1.0006,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99998,.99928,1,.99977,1.00013,1.00055,.99947,.99945,.99941,.99924,1.00001,1.00001,1.0004,.91621,1.00001,1.00026,.99977,1.00022,1.0006,1.00001,1.00005,.99999,.99977,1.00015,1.00022,.99977,1.00001,.99973,1.00026,1.00001,1.00019,1.00001,.99946,1,1.0006,1.00001,.99978,1.00045,.99973,.99924,1.00023,.99978,.99966,1,1.00065,1.00045,1.00019,.99973,.99973,.99924,1,1,.96499,1,1.00055,.99973,1.00008,1.00027,1,.9997,.99995,1.00023,.99933,1.00019,1.00015,1.00031,.99924,1.00023,.99973,1.00023,1.00031,1.00001,.99928,1.00029,1.00092,1.00035,1.00001,1.0006,1.0006,1,.99988,.99975,1,1.00082,.99561,.9996,1.00035,1.00001,.99962,1.00001,1.00092,.99964,1.00001,.99963,.99999,1.00035,1.00035,1.00082,.99962,.99999,.99977,1.00022,1.00035,1.00001,.99977,1.00026,.9996,.99967,1.00001,1.00034,1.00074,1.00054,1.00053,1.00063,.99971,.99962,1.00035,.99975,.99977,.99973,1.00043,.99953,1.0007,.99915,.99973,1.00008,.99892,1.00073,1.00073,1.00114,.99915,1.00073,.99955,.99973,1.00092,.99973,1,.99998,1,1.0003,1,1.00043,1.00001,.99969,1.0003,1,1.00035,1.00001,.9995,1,1.00092,.99973,.99973,.99973,1.0007,.9995,1,.99924,1.0006,.99924,.99972,1.00062,.99973,1.00114,1.00073,1,.99955,1,1,1.00047,.99968,1.00016,.99977,1.00016,.99977,1.00016,.99977,1.00001,1,1,1,.99973,1,1,.99955,.99924,.99924,.99924,.99924,.99998,.99998,.99998,.99973,.99973,.99972,1,1,1.00267,.99999,.99998,.99998,1,.99998,1.66475,1,.99973,.99973,1.00023,.99973,.99971,.99925,1.00023,1,.99991,.99984,1.00002,1.00002,1.00002,1.00002,1,1,1,1,1,1,1,.96329,1,1.20985,1.39713,1.00003,.8254,1.00015,1,1.00035,1.00027,1.00031,1.00031,.99915,1.00031,1.00031,.99999,1.00003,.99999,.99999,1.41144,1.6,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.41144,1.40579,1.40579,1.36625,.99999,1,.99861,.99861,1,1.00026,1.00026,1.00026,1.00026,.95317,.99999,.99999,.99999,.99999,1.40483,1,.99977,1.00054,1,1,.99953,.99962,1.00042,.9995,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.HelveticaRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LiberationSansRegularWidths=e.LiberationSansRegularMapping=e.LiberationSansItalicWidths=e.LiberationSansItalicMapping=e.LiberationSansBoldWidths=e.LiberationSansBoldMapping=e.LiberationSansBoldItalicWidths=e.LiberationSansBoldItalicMapping=void 0,e.LiberationSansBoldWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,719,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,785,556,556,278,722,556,556,611,278,611,278,611,385,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,465,722,333,853,906,474,825,927,838,278,722,722,601,719,667,611,722,778,278,722,667,833,722,644,778,722,667,600,611,667,821,667,809,802,278,667,615,451,611,278,582,615,610,556,606,475,460,611,541,278,558,556,612,556,445,611,766,619,520,684,446,582,715,576,753,845,278,582,611,582,845,667,669,885,567,711,667,278,276,556,1094,1062,875,610,722,622,719,722,719,722,567,712,667,904,626,719,719,610,702,833,722,778,719,667,722,611,622,854,667,730,703,1005,1019,870,979,719,711,1031,719,556,618,615,417,635,556,709,497,615,615,500,635,740,604,611,604,611,556,490,556,875,556,615,581,833,844,729,854,615,552,854,583,556,556,611,417,552,556,278,281,278,969,906,611,500,615,556,604,778,611,487,447,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1094,556,885,489,1115,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansBoldItalicWidths=[365,0,333,278,333,474,556,556,889,722,238,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,333,333,584,584,584,611,975,722,722,722,722,667,611,778,722,278,556,722,611,833,722,778,667,778,722,667,611,722,667,944,667,667,611,333,278,333,584,556,333,556,611,556,611,556,333,611,611,278,278,556,278,889,611,611,611,611,389,556,333,611,556,778,556,556,500,389,280,389,584,333,556,556,556,556,280,556,333,737,370,556,584,737,552,400,549,333,333,333,576,556,278,333,333,365,556,834,834,834,611,722,722,722,722,722,722,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,556,556,556,556,556,278,278,278,278,611,611,611,611,611,611,611,549,611,611,611,611,611,556,611,556,722,556,722,556,722,556,722,556,722,556,722,556,722,556,722,740,722,611,667,556,667,556,667,556,667,556,667,556,778,611,778,611,778,611,778,611,722,611,722,611,278,278,278,278,278,278,278,278,278,278,782,556,556,278,722,556,556,611,278,611,278,611,396,611,479,611,278,722,611,722,611,722,611,708,723,611,778,611,778,611,778,611,1e3,944,722,389,722,389,722,389,667,556,667,556,667,556,667,556,611,333,611,479,611,333,722,611,722,611,722,611,722,611,722,611,722,611,944,778,667,556,667,611,500,611,500,611,500,278,556,722,556,1e3,889,778,611,667,556,611,333,333,333,333,333,333,333,333,333,333,333,333,722,333,854,906,473,844,930,847,278,722,722,610,671,667,611,722,778,278,722,667,833,722,657,778,718,667,590,611,667,822,667,829,781,278,667,620,479,611,278,591,620,621,556,610,479,492,611,558,278,566,556,603,556,450,611,712,605,532,664,409,591,704,578,773,834,278,591,611,591,834,667,667,886,614,719,667,278,278,556,1094,1042,854,622,719,677,719,722,708,722,614,722,667,927,643,719,719,615,687,833,722,778,719,667,722,611,677,781,667,729,708,979,989,854,1e3,708,719,1042,729,556,619,604,534,618,556,736,510,611,611,507,622,740,604,611,611,611,556,889,556,885,556,646,583,889,935,707,854,594,552,865,589,556,556,611,469,563,556,278,278,278,969,906,611,507,619,556,611,778,611,575,467,944,778,944,778,944,778,667,556,333,333,556,1e3,1e3,552,278,278,278,278,500,500,500,556,556,350,1e3,1e3,240,479,333,333,604,333,167,396,556,556,1104,556,885,516,1146,1e3,768,600,834,834,834,834,999,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,722,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,611,611,333,333,333,333,333,333,333,333,222,222,333,333,333,333,333,333,333,333],e.LiberationSansBoldItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansItalicWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,625,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,733,444,500,222,667,500,500,556,222,556,222,556,281,556,400,556,222,722,556,722,556,722,556,615,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,354,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,789,846,389,794,865,775,222,667,667,570,671,667,611,722,778,278,667,667,833,722,648,778,725,667,600,611,667,837,667,831,761,278,667,570,439,555,222,550,570,571,500,556,439,463,555,542,222,500,492,548,500,447,556,670,573,486,603,374,550,652,546,728,779,222,550,556,550,779,667,667,843,544,708,667,278,278,500,1066,982,844,589,715,639,724,667,651,667,544,704,667,917,614,715,715,589,686,833,722,778,725,667,722,611,639,795,667,727,673,920,923,805,886,651,694,1022,682,556,562,522,493,553,556,688,465,556,556,472,564,686,550,556,556,556,500,833,500,835,500,572,518,830,851,621,736,526,492,752,534,556,556,556,378,496,500,222,222,222,910,828,556,472,565,500,556,778,556,492,339,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1083,1e3,768,600,834,834,834,834,1e3,500,998,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,584,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansItalicMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1],e.LiberationSansRegularWidths=[365,0,333,278,278,355,556,556,889,667,191,333,333,389,584,278,333,278,278,556,556,556,556,556,556,556,556,556,556,278,278,584,584,584,556,1015,667,667,722,722,667,611,778,722,278,500,667,556,833,722,778,667,778,722,667,611,722,667,944,667,667,611,278,278,278,469,556,333,556,556,500,556,556,278,556,556,222,222,500,222,833,556,556,556,556,333,500,278,556,500,722,500,500,500,334,260,334,584,333,556,556,556,556,260,556,333,737,370,556,584,737,552,400,549,333,333,333,576,537,278,333,333,365,556,834,834,834,611,667,667,667,667,667,667,1e3,722,667,667,667,667,278,278,278,278,722,722,778,778,778,778,778,584,778,722,722,722,722,667,667,611,556,556,556,556,556,556,889,500,556,556,556,556,278,278,278,278,556,556,556,556,556,556,556,549,611,556,556,556,556,500,556,500,667,556,667,556,667,556,722,500,722,500,722,500,722,500,722,615,722,556,667,556,667,556,667,556,667,556,667,556,778,556,778,556,778,556,778,556,722,556,722,556,278,278,278,278,278,278,278,222,278,278,735,444,500,222,667,500,500,556,222,556,222,556,292,556,334,556,222,722,556,722,556,722,556,604,723,556,778,556,778,556,778,556,1e3,944,722,333,722,333,722,333,667,500,667,500,667,500,667,500,611,278,611,375,611,278,722,556,722,556,722,556,722,556,722,556,722,556,944,722,667,500,667,611,500,611,500,611,500,222,556,667,556,1e3,889,778,611,667,500,611,278,333,333,333,333,333,333,333,333,333,333,333,667,278,784,838,384,774,855,752,222,667,667,551,668,667,611,722,778,278,667,668,833,722,650,778,722,667,618,611,667,798,667,835,748,278,667,578,446,556,222,547,578,575,500,557,446,441,556,556,222,500,500,576,500,448,556,690,569,482,617,395,547,648,525,713,781,222,547,556,547,781,667,667,865,542,719,667,278,278,500,1057,1010,854,583,722,635,719,667,656,667,542,677,667,923,604,719,719,583,656,833,722,778,719,667,722,611,635,760,667,740,667,917,938,792,885,656,719,1010,722,556,573,531,365,583,556,669,458,559,559,438,583,688,552,556,542,556,500,458,500,823,500,573,521,802,823,625,719,521,510,750,542,556,556,556,365,510,500,222,278,222,906,812,556,438,559,500,552,778,556,489,411,944,722,944,722,944,722,667,500,333,333,556,1e3,1e3,552,222,222,222,222,333,333,333,556,556,350,1e3,1e3,188,354,333,333,500,333,167,365,556,556,1094,556,885,323,1073,1e3,768,600,834,834,834,834,1e3,500,1e3,500,1e3,500,500,494,612,823,713,584,549,713,979,719,274,549,549,583,549,549,604,584,604,604,708,625,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,708,729,604,604,354,354,1e3,990,990,990,990,494,604,604,604,604,354,1021,1052,917,750,750,531,656,594,510,500,750,750,500,500,333,333,333,333,333,333,333,333,222,222,294,294,324,324,316,328,398,285],e.LiberationSansRegularMapping=[-1,-1,-1,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,161,162,163,164,165,166,167,168,169,170,171,172,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,307,308,309,310,311,312,313,314,315,316,317,318,319,320,321,322,323,324,325,326,327,328,329,330,331,332,333,334,335,336,337,338,339,340,341,342,343,344,345,346,347,348,349,350,351,352,353,354,355,356,357,358,359,360,361,362,363,364,365,366,367,368,369,370,371,372,373,374,375,376,377,378,379,380,381,382,383,402,506,507,508,509,510,511,536,537,538,539,710,711,713,728,729,730,731,732,733,900,901,902,903,904,905,906,908,910,911,912,913,914,915,916,917,918,919,920,921,922,923,924,925,926,927,928,929,931,932,933,934,935,936,937,938,939,940,941,942,943,944,945,946,947,948,949,950,951,952,953,954,955,956,957,958,959,960,961,962,963,964,965,966,967,968,969,970,971,972,973,974,1024,1025,1026,1027,1028,1029,1030,1031,1032,1033,1034,1035,1036,1037,1038,1039,1040,1041,1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,1057,1058,1059,1060,1061,1062,1063,1064,1065,1066,1067,1068,1069,1070,1071,1072,1073,1074,1075,1076,1077,1078,1079,1080,1081,1082,1083,1084,1085,1086,1087,1088,1089,1090,1091,1092,1093,1094,1095,1096,1097,1098,1099,1100,1101,1102,1103,1104,1105,1106,1107,1108,1109,1110,1111,1112,1113,1114,1115,1116,1117,1118,1119,1138,1139,1168,1169,7808,7809,7810,7811,7812,7813,7922,7923,8208,8209,8211,8212,8213,8215,8216,8217,8218,8219,8220,8221,8222,8224,8225,8226,8230,8240,8242,8243,8249,8250,8252,8254,8260,8319,8355,8356,8359,8364,8453,8467,8470,8482,8486,8494,8539,8540,8541,8542,8592,8593,8594,8595,8596,8597,8616,8706,8710,8719,8721,8722,8730,8734,8735,8745,8747,8776,8800,8801,8804,8805,8962,8976,8992,8993,9472,9474,9484,9488,9492,9496,9500,9508,9516,9524,9532,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561,9562,9563,9564,9565,9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579,9580,9600,9604,9608,9612,9616,9617,9618,9619,9632,9633,9642,9643,9644,9650,9658,9660,9668,9674,9675,9679,9688,9689,9702,9786,9787,9788,9792,9794,9824,9827,9829,9830,9834,9835,9836,61441,61442,61445,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MyriadProRegularMetrics=e.MyriadProRegularFactors=e.MyriadProItalicMetrics=e.MyriadProItalicFactors=e.MyriadProBoldMetrics=e.MyriadProBoldItalicMetrics=e.MyriadProBoldItalicFactors=e.MyriadProBoldFactors=void 0,e.MyriadProBoldFactors=[1.36898,1,1,.72706,.80479,.83734,.98894,.99793,.9897,.93884,.86209,.94292,.94292,1.16661,1.02058,.93582,.96694,.93582,1.19137,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.99793,.78076,.78076,1.02058,1.02058,1.02058,.72851,.78966,.90838,.83637,.82391,.96376,.80061,.86275,.8768,.95407,1.0258,.73901,.85022,.83655,1.0156,.95546,.92179,.87107,.92179,.82114,.8096,.89713,.94438,.95353,.94083,.91905,.90406,.9446,.94292,1.18777,.94292,1.02058,.89903,.90088,.94938,.97898,.81093,.97571,.94938,1.024,.9577,.95933,.98621,1.0474,.97455,.98981,.9672,.95933,.9446,.97898,.97407,.97646,.78036,1.10208,.95442,.95298,.97579,.9332,.94039,.938,.80687,1.01149,.80687,1.02058,.80479,.99793,.99793,.99793,.99793,1.01149,1.00872,.90088,.91882,1.0213,.8361,1.02058,.62295,.54324,.89022,1.08595,1,1,.90088,1,.97455,.93582,.90088,1,1.05686,.8361,.99642,.99642,.99642,.72851,.90838,.90838,.90838,.90838,.90838,.90838,.868,.82391,.80061,.80061,.80061,.80061,1.0258,1.0258,1.0258,1.0258,.97484,.95546,.92179,.92179,.92179,.92179,.92179,1.02058,.92179,.94438,.94438,.94438,.94438,.90406,.86958,.98225,.94938,.94938,.94938,.94938,.94938,.94938,.9031,.81093,.94938,.94938,.94938,.94938,.98621,.98621,.98621,.98621,.93969,.95933,.9446,.9446,.9446,.9446,.9446,1.08595,.9446,.95442,.95442,.95442,.95442,.94039,.97898,.94039,.90838,.94938,.90838,.94938,.90838,.94938,.82391,.81093,.82391,.81093,.82391,.81093,.82391,.81093,.96376,.84313,.97484,.97571,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.80061,.94938,.8768,.9577,.8768,.9577,.8768,.9577,1,1,.95407,.95933,.97069,.95933,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,1.0258,.98621,.887,1.01591,.73901,1.0474,1,1,.97455,.83655,.98981,1,1,.83655,.73977,.83655,.73903,.84638,1.033,.95546,.95933,1,1,.95546,.95933,.8271,.95417,.95933,.92179,.9446,.92179,.9446,.92179,.9446,.936,.91964,.82114,.97646,1,1,.82114,.97646,.8096,.78036,.8096,.78036,1,1,.8096,.78036,1,1,.89713,.77452,.89713,1.10208,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94438,.95442,.94083,.97579,.90406,.94039,.90406,.9446,.938,.9446,.938,.9446,.938,1,.99793,.90838,.94938,.868,.9031,.92179,.9446,1,1,.89713,1.10208,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90989,.9358,.91945,.83181,.75261,.87992,.82976,.96034,.83689,.97268,1.0078,.90838,.83637,.8019,.90157,.80061,.9446,.95407,.92436,1.0258,.85022,.97153,1.0156,.95546,.89192,.92179,.92361,.87107,.96318,.89713,.93704,.95638,.91905,.91709,.92796,1.0258,.93704,.94836,1.0373,.95933,1.0078,.95871,.94836,.96174,.92601,.9498,.98607,.95776,.95933,1.05453,1.0078,.98275,.9314,.95617,.91701,1.05993,.9446,.78367,.9553,1,.86832,1.0128,.95871,.99394,.87548,.96361,.86774,1.0078,.95871,.9446,.95871,.86774,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.94083,.97579,.94083,.97579,.94083,.97579,.90406,.94039,.96694,1,.89903,1,1,1,.93582,.93582,.93582,1,.908,.908,.918,.94219,.94219,.96544,1,1.285,1,1,.81079,.81079,1,1,.74854,1,1,1,1,.99793,1,1,1,.65,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.17173,1,.80535,.76169,1.02058,1.0732,1.05486,1,1,1.30692,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.16161,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProBoldItalicFactors=[1.36898,1,1,.66227,.80779,.81625,.97276,.97276,.97733,.92222,.83266,.94292,.94292,1.16148,1.02058,.93582,.96694,.93582,1.17337,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.97276,.78076,.78076,1.02058,1.02058,1.02058,.71541,.76813,.85576,.80591,.80729,.94299,.77512,.83655,.86523,.92222,.98621,.71743,.81698,.79726,.98558,.92222,.90637,.83809,.90637,.80729,.76463,.86275,.90699,.91605,.9154,.85308,.85458,.90531,.94292,1.21296,.94292,1.02058,.89903,1.18616,.99613,.91677,.78216,.91677,.90083,.98796,.9135,.92168,.95381,.98981,.95298,.95381,.93459,.92168,.91513,.92004,.91677,.95077,.748,1.04502,.91677,.92061,.94236,.89544,.89364,.9,.80687,.8578,.80687,1.02058,.80779,.97276,.97276,.97276,.97276,.8578,.99973,1.18616,.91339,1.08074,.82891,1.02058,.55509,.71526,.89022,1.08595,1,1,1.18616,1,.96736,.93582,1.18616,1,1.04864,.82711,.99043,.99043,.99043,.71541,.85576,.85576,.85576,.85576,.85576,.85576,.845,.80729,.77512,.77512,.77512,.77512,.98621,.98621,.98621,.98621,.95961,.92222,.90637,.90637,.90637,.90637,.90637,1.02058,.90251,.90699,.90699,.90699,.90699,.85458,.83659,.94951,.99613,.99613,.99613,.99613,.99613,.99613,.85811,.78216,.90083,.90083,.90083,.90083,.95381,.95381,.95381,.95381,.9135,.92168,.91513,.91513,.91513,.91513,.91513,1.08595,.91677,.91677,.91677,.91677,.91677,.89364,.92332,.89364,.85576,.99613,.85576,.99613,.85576,.99613,.80729,.78216,.80729,.78216,.80729,.78216,.80729,.78216,.94299,.76783,.95961,.91677,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.77512,.90083,.86523,.9135,.86523,.9135,.86523,.9135,1,1,.92222,.92168,.92222,.92168,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.98621,.95381,.86036,.97096,.71743,.98981,1,1,.95298,.79726,.95381,1,1,.79726,.6894,.79726,.74321,.81691,1.0006,.92222,.92168,1,1,.92222,.92168,.79464,.92098,.92168,.90637,.91513,.90637,.91513,.90637,.91513,.909,.87514,.80729,.95077,1,1,.80729,.95077,.76463,.748,.76463,.748,1,1,.76463,.748,1,1,.86275,.72651,.86275,1.04502,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.90699,.91677,.9154,.94236,.85458,.89364,.85458,.90531,.9,.90531,.9,.90531,.9,1,.97276,.85576,.99613,.845,.85811,.90251,.91677,1,1,.86275,1.04502,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.18616,1.00899,1.30628,.85576,.80178,.66862,.7927,.69323,.88127,.72459,.89711,.95381,.85576,.80591,.7805,.94729,.77512,.90531,.92222,.90637,.98621,.81698,.92655,.98558,.92222,.85359,.90637,.90976,.83809,.94523,.86275,.83509,.93157,.85308,.83392,.92346,.98621,.83509,.92886,.91324,.92168,.95381,.90646,.92886,.90557,.86847,.90276,.91324,.86842,.92168,.99531,.95381,.9224,.85408,.92699,.86847,1.0051,.91513,.80487,.93481,1,.88159,1.05214,.90646,.97355,.81539,.89398,.85923,.95381,.90646,.91513,.90646,.85923,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9154,.94236,.9154,.94236,.9154,.94236,.85458,.89364,.96694,1,.89903,1,1,1,.91782,.91782,.91782,1,.896,.896,.896,.9332,.9332,.95973,1,1.26,1,1,.80479,.80178,1,1,.85633,1,1,1,1,.97276,1,1,1,.698,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.14542,1,.79199,.78694,1.02058,1.03493,1.05486,1,1,1.23026,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.20006,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProBoldItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProItalicFactors=[1.36898,1,1,.65507,.84943,.85639,.88465,.88465,.86936,.88307,.86948,.85283,.85283,1.06383,1.02058,.75945,.9219,.75945,1.17337,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.88465,.75945,.75945,1.02058,1.02058,1.02058,.69046,.70926,.85158,.77812,.76852,.89591,.70466,.76125,.80094,.86822,.83864,.728,.77212,.79475,.93637,.87514,.8588,.76013,.8588,.72421,.69866,.77598,.85991,.80811,.87832,.78112,.77512,.8562,1.0222,1.18417,1.0222,1.27014,.89903,1.15012,.93859,.94399,.846,.94399,.81453,1.0186,.94219,.96017,1.03075,1.02175,.912,1.03075,.96998,.96017,.93859,.94399,.94399,.95493,.746,1.12658,.94578,.91,.979,.882,.882,.83,.85034,.83537,.85034,1.02058,.70869,.88465,.88465,.88465,.88465,.83537,.90083,1.15012,.9161,.94565,.73541,1.02058,.53609,.69353,.79519,1.08595,1,1,1.15012,1,.91974,.75945,1.15012,1,.9446,.73361,.9005,.9005,.9005,.62864,.85158,.85158,.85158,.85158,.85158,.85158,.773,.76852,.70466,.70466,.70466,.70466,.83864,.83864,.83864,.83864,.90561,.87514,.8588,.8588,.8588,.8588,.8588,1.02058,.85751,.85991,.85991,.85991,.85991,.77512,.76013,.88075,.93859,.93859,.93859,.93859,.93859,.93859,.8075,.846,.81453,.81453,.81453,.81453,.82424,.82424,.82424,.82424,.9278,.96017,.93859,.93859,.93859,.93859,.93859,1.08595,.8562,.94578,.94578,.94578,.94578,.882,.94578,.882,.85158,.93859,.85158,.93859,.85158,.93859,.76852,.846,.76852,.846,.76852,.846,.76852,.846,.89591,.8544,.90561,.94399,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.70466,.81453,.80094,.94219,.80094,.94219,.80094,.94219,1,1,.86822,.96017,.86822,.96017,.83864,.82424,.83864,.82424,.83864,.82424,.83864,1.03075,.83864,.82424,.81402,1.02738,.728,1.02175,1,1,.912,.79475,1.03075,1,1,.79475,.83911,.79475,.66266,.80553,1.06676,.87514,.96017,1,1,.87514,.96017,.86865,.87396,.96017,.8588,.93859,.8588,.93859,.8588,.93859,.867,.84759,.72421,.95493,1,1,.72421,.95493,.69866,.746,.69866,.746,1,1,.69866,.746,1,1,.77598,.88417,.77598,1.12658,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.85991,.94578,.87832,.979,.77512,.882,.77512,.8562,.83,.8562,.83,.8562,.83,1,.88465,.85158,.93859,.773,.8075,.85751,.8562,1,1,.77598,1.12658,1.15012,1.15012,1.15012,1.15012,1.15012,1.15313,1.15012,1.15012,1.15012,1.08106,1.03901,.85158,.77025,.62264,.7646,.65351,.86026,.69461,.89947,1.03075,.85158,.77812,.76449,.88836,.70466,.8562,.86822,.8588,.83864,.77212,.85308,.93637,.87514,.82352,.8588,.85701,.76013,.89058,.77598,.8156,.82565,.78112,.77899,.89386,.83864,.8156,.9486,.92388,.96186,1.03075,.91123,.9486,.93298,.878,.93942,.92388,.84596,.96186,.95119,1.03075,.922,.88787,.95829,.88,.93559,.93859,.78815,.93758,1,.89217,1.03737,.91123,.93969,.77487,.85769,.86799,1.03075,.91123,.93859,.91123,.86799,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87832,.979,.87832,.979,.87832,.979,.77512,.882,.9219,1,.89903,1,1,1,.87321,.87321,.87321,1,1.027,1.027,1.027,.86847,.86847,.79121,1,1.124,1,1,.73572,.73572,1,1,.85034,1,1,1,1,.88465,1,1,1,.669,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.04828,1,.74948,.75187,1.02058,.98391,1.02119,1,1,1.06233,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05233,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProItalicMetrics={lineHeight:1.2,lineGap:.2},e.MyriadProRegularFactors=[1.36898,1,1,.76305,.82784,.94935,.89364,.92241,.89073,.90706,.98472,.85283,.85283,1.0664,1.02058,.74505,.9219,.74505,1.23456,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.92241,.74505,.74505,1.02058,1.02058,1.02058,.73002,.72601,.91755,.8126,.80314,.92222,.73764,.79726,.83051,.90284,.86023,.74,.8126,.84869,.96518,.91115,.8858,.79761,.8858,.74498,.73914,.81363,.89591,.83659,.89633,.85608,.8111,.90531,1.0222,1.22736,1.0222,1.27014,.89903,.90088,.86667,1.0231,.896,1.01411,.90083,1.05099,1.00512,.99793,1.05326,1.09377,.938,1.06226,1.00119,.99793,.98714,1.0231,1.01231,.98196,.792,1.19137,.99074,.962,1.01915,.926,.942,.856,.85034,.92006,.85034,1.02058,.69067,.92241,.92241,.92241,.92241,.92006,.9332,.90088,.91882,.93484,.75339,1.02058,.56866,.54324,.79519,1.08595,1,1,.90088,1,.95325,.74505,.90088,1,.97198,.75339,.91009,.91009,.91009,.66466,.91755,.91755,.91755,.91755,.91755,.91755,.788,.80314,.73764,.73764,.73764,.73764,.86023,.86023,.86023,.86023,.92915,.91115,.8858,.8858,.8858,.8858,.8858,1.02058,.8858,.89591,.89591,.89591,.89591,.8111,.79611,.89713,.86667,.86667,.86667,.86667,.86667,.86667,.86936,.896,.90083,.90083,.90083,.90083,.84224,.84224,.84224,.84224,.97276,.99793,.98714,.98714,.98714,.98714,.98714,1.08595,.89876,.99074,.99074,.99074,.99074,.942,1.0231,.942,.91755,.86667,.91755,.86667,.91755,.86667,.80314,.896,.80314,.896,.80314,.896,.80314,.896,.92222,.93372,.92915,1.01411,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.73764,.90083,.83051,1.00512,.83051,1.00512,.83051,1.00512,1,1,.90284,.99793,.90976,.99793,.86023,.84224,.86023,.84224,.86023,.84224,.86023,1.05326,.86023,.84224,.82873,1.07469,.74,1.09377,1,1,.938,.84869,1.06226,1,1,.84869,.83704,.84869,.81441,.85588,1.08927,.91115,.99793,1,1,.91115,.99793,.91887,.90991,.99793,.8858,.98714,.8858,.98714,.8858,.98714,.894,.91434,.74498,.98196,1,1,.74498,.98196,.73914,.792,.73914,.792,1,1,.73914,.792,1,1,.81363,.904,.81363,1.19137,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89591,.99074,.89633,1.01915,.8111,.942,.8111,.90531,.856,.90531,.856,.90531,.856,1,.92241,.91755,.86667,.788,.86936,.8858,.89876,1,1,.81363,1.19137,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90088,.90388,1.03901,.92138,.78105,.7154,.86169,.80513,.94007,.82528,.98612,1.06226,.91755,.8126,.81884,.92819,.73764,.90531,.90284,.8858,.86023,.8126,.91172,.96518,.91115,.83089,.8858,.87791,.79761,.89297,.81363,.88157,.89992,.85608,.81992,.94307,.86023,.88157,.95308,.98699,.99793,1.06226,.95817,.95308,.97358,.928,.98088,.98699,.92761,.99793,.96017,1.06226,.986,.944,.95978,.938,.96705,.98714,.80442,.98972,1,.89762,1.04552,.95817,.99007,.87064,.91879,.88888,1.06226,.95817,.98714,.95817,.88888,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.89633,1.01915,.89633,1.01915,.89633,1.01915,.8111,.942,.9219,1,.89903,1,1,1,.93173,.93173,.93173,1,1.06304,1.06304,1.06904,.89903,.89903,.80549,1,1.156,1,1,.76575,.76575,1,1,.72458,1,1,1,1,.92241,1,1,1,.619,1,1.36145,1,1,1,1,1,1,1,1,1,1,1,1.07257,1,.74705,.71119,1.02058,1.024,1.02119,1,1,1.1536,1.08595,1.08595,1,1.08595,1.08595,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.05638,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.MyriadProRegularMetrics={lineHeight:1.2,lineGap:.2}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SegoeuiRegularMetrics=e.SegoeuiRegularFactors=e.SegoeuiItalicMetrics=e.SegoeuiItalicFactors=e.SegoeuiBoldMetrics=e.SegoeuiBoldItalicMetrics=e.SegoeuiBoldItalicFactors=e.SegoeuiBoldFactors=void 0,e.SegoeuiBoldFactors=[1.76738,1,1,.99297,.9824,1.04016,1.06497,1.03424,.97529,1.17647,1.23203,1.1085,1.1085,1.16939,1.2107,.9754,1.21408,.9754,1.59578,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,1.03424,.81378,.81378,1.2107,1.2107,1.2107,.71703,.97847,.97363,.88776,.8641,1.02096,.79795,.85132,.914,1.06085,1.1406,.8007,.89858,.83693,1.14889,1.09398,.97489,.92094,.97489,.90399,.84041,.95923,1.00135,1,1.06467,.98243,.90996,.99361,1.1085,1.56942,1.1085,1.2107,.74627,.94282,.96752,1.01519,.86304,1.01359,.97278,1.15103,1.01359,.98561,1.02285,1.02285,1.00527,1.02285,1.0302,.99041,1.0008,1.01519,1.01359,1.02258,.79104,1.16862,.99041,.97454,1.02511,.99298,.96752,.95801,.94856,1.16579,.94856,1.2107,.9824,1.03424,1.03424,1,1.03424,1.16579,.8727,1.3871,1.18622,1.10818,1.04478,1.2107,1.18622,.75155,.94994,1.28826,1.21408,1.21408,.91056,1,.91572,.9754,.64663,1.18328,1.24866,1.04478,1.14169,1.15749,1.17389,.71703,.97363,.97363,.97363,.97363,.97363,.97363,.93506,.8641,.79795,.79795,.79795,.79795,1.1406,1.1406,1.1406,1.1406,1.02096,1.09398,.97426,.97426,.97426,.97426,.97426,1.2107,.97489,1.00135,1.00135,1.00135,1.00135,.90996,.92094,1.02798,.96752,.96752,.96752,.96752,.96752,.96752,.93136,.86304,.97278,.97278,.97278,.97278,1.02285,1.02285,1.02285,1.02285,.97122,.99041,1,1,1,1,1,1.28826,1.0008,.99041,.99041,.99041,.99041,.96752,1.01519,.96752,.97363,.96752,.97363,.96752,.97363,.96752,.8641,.86304,.8641,.86304,.8641,.86304,.8641,.86304,1.02096,1.03057,1.02096,1.03517,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.79795,.97278,.914,1.01359,.914,1.01359,.914,1.01359,1,1,1.06085,.98561,1.06085,1.00879,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,1.1406,1.02285,.97138,1.08692,.8007,1.02285,1,1,1.00527,.83693,1.02285,1,1,.83693,.9455,.83693,.90418,.83693,1.13005,1.09398,.99041,1,1,1.09398,.99041,.96692,1.09251,.99041,.97489,1.0008,.97489,1.0008,.97489,1.0008,.93994,.97931,.90399,1.02258,1,1,.90399,1.02258,.84041,.79104,.84041,.79104,.84041,.79104,.84041,.79104,1,1,.95923,1.07034,.95923,1.16862,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.00135,.99041,1.06467,1.02511,.90996,.96752,.90996,.99361,.95801,.99361,.95801,.99361,.95801,1.07733,1.03424,.97363,.96752,.93506,.93136,.97489,1.0008,1,1,.95923,1.16862,1.15103,1.15103,1.01173,1.03959,.75953,.81378,.79912,1.15103,1.21994,.95161,.87815,1.01149,.81525,.7676,.98167,1.01134,1.02546,.84097,1.03089,1.18102,.97363,.88776,.85134,.97826,.79795,.99361,1.06085,.97489,1.1406,.89858,1.0388,1.14889,1.09398,.86039,.97489,1.0595,.92094,.94793,.95923,.90996,.99346,.98243,1.02112,.95493,1.1406,.90996,1.03574,1.02597,1.0008,1.18102,1.06628,1.03574,1.0192,1.01932,1.00886,.97531,1.0106,1.0008,1.13189,1.18102,1.02277,.98683,1.0016,.99561,1.07237,1.0008,.90434,.99921,.93803,.8965,1.23085,1.06628,1.04983,.96268,1.0499,.98439,1.18102,1.06628,1.0008,1.06628,.98439,.79795,1,1,1,1,1,1,1,1,1,1,1,1,1.09466,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.97278,1,1,1,1,1,1,1,1,1,1,1,1,1.02065,1,1,1,1,1,1,1.06467,1.02511,1.06467,1.02511,1.06467,1.02511,.90996,.96752,1,1.21408,.89903,1,1,.75155,1.04394,1.04394,1.04394,1.04394,.98633,.98633,.98633,.73047,.73047,1.20642,.91211,1.25635,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.12454,.93503,1.03424,1.19687,1.03424,1,1,1,.771,1,1,1.15749,1.15749,1.15749,1.10948,.86279,.94434,.86279,.94434,.86182,1,1,1.16897,1,.96085,.90137,1.2107,1.18416,1.13973,.69825,.9716,2.10339,1.29004,1.29004,1.21172,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18874,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.09193,1.09193,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiBoldItalicFactors=[1.76738,1,1,.98946,1.03959,1.04016,1.02809,1.036,.97639,1.10953,1.23203,1.11144,1.11144,1.16939,1.21237,.9754,1.21261,.9754,1.59754,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,1.036,.81378,.81378,1.21237,1.21237,1.21237,.73541,.97847,.97363,.89723,.87897,1.0426,.79429,.85292,.91149,1.05815,1.1406,.79631,.90128,.83853,1.04396,1.10615,.97552,.94436,.97552,.88641,.80527,.96083,1.00135,1,1.06777,.9817,.91142,.99361,1.11144,1.57293,1.11144,1.21237,.74627,1.31818,1.06585,.97042,.83055,.97042,.93503,1.1261,.97042,.97922,1.14236,.94552,1.01054,1.14236,1.02471,.97922,.94165,.97042,.97042,1.0276,.78929,1.1261,.97922,.95874,1.02197,.98507,.96752,.97168,.95107,1.16579,.95107,1.21237,1.03959,1.036,1.036,1,1.036,1.16579,.87357,1.31818,1.18754,1.26781,1.05356,1.21237,1.18622,.79487,.94994,1.29004,1.24047,1.24047,1.31818,1,.91484,.9754,1.31818,1.1349,1.24866,1.05356,1.13934,1.15574,1.17389,.73541,.97363,.97363,.97363,.97363,.97363,.97363,.94385,.87897,.79429,.79429,.79429,.79429,1.1406,1.1406,1.1406,1.1406,1.0426,1.10615,.97552,.97552,.97552,.97552,.97552,1.21237,.97552,1.00135,1.00135,1.00135,1.00135,.91142,.94436,.98721,1.06585,1.06585,1.06585,1.06585,1.06585,1.06585,.96705,.83055,.93503,.93503,.93503,.93503,1.14236,1.14236,1.14236,1.14236,.93125,.97922,.94165,.94165,.94165,.94165,.94165,1.29004,.94165,.97922,.97922,.97922,.97922,.96752,.97042,.96752,.97363,1.06585,.97363,1.06585,.97363,1.06585,.87897,.83055,.87897,.83055,.87897,.83055,.87897,.83055,1.0426,1.0033,1.0426,.97042,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.79429,.93503,.91149,.97042,.91149,.97042,.91149,.97042,1,1,1.05815,.97922,1.05815,.97922,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,1.1406,1.14236,.97441,1.04302,.79631,1.01582,1,1,1.01054,.83853,1.14236,1,1,.83853,1.09125,.83853,.90418,.83853,1.19508,1.10615,.97922,1,1,1.10615,.97922,1.01034,1.10466,.97922,.97552,.94165,.97552,.94165,.97552,.94165,.91602,.91981,.88641,1.0276,1,1,.88641,1.0276,.80527,.78929,.80527,.78929,.80527,.78929,.80527,.78929,1,1,.96083,1.05403,.95923,1.16862,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.00135,.97922,1.06777,1.02197,.91142,.96752,.91142,.99361,.97168,.99361,.97168,.99361,.97168,1.23199,1.036,.97363,1.06585,.94385,.96705,.97552,.94165,1,1,.96083,1.1261,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,1.31818,.95161,1.27126,1.00811,.83284,.77702,.99137,.95253,1.0347,.86142,1.07205,1.14236,.97363,.89723,.86869,1.09818,.79429,.99361,1.05815,.97552,1.1406,.90128,1.06662,1.04396,1.10615,.84918,.97552,1.04694,.94436,.98015,.96083,.91142,1.00356,.9817,1.01945,.98999,1.1406,.91142,1.04961,.9898,1.00639,1.14236,1.07514,1.04961,.99607,1.02897,1.008,.9898,.95134,1.00639,1.11121,1.14236,1.00518,.97981,1.02186,1,1.08578,.94165,.99314,.98387,.93028,.93377,1.35125,1.07514,1.10687,.93491,1.04232,1.00351,1.14236,1.07514,.94165,1.07514,1.00351,.79429,1,1,1,1,1,1,1,1,1,1,1,1,1.09097,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.93503,1,1,1,1,1,1,1,1,1,1,1,1,.96609,1,1,1,1,1,1,1.06777,1.02197,1.06777,1.02197,1.06777,1.02197,.91142,.96752,1,1.21261,.89903,1,1,.75155,1.04745,1.04745,1.04745,1.04394,.98633,.98633,.98633,.72959,.72959,1.20502,.91406,1.26514,1.222,1.02956,1.03372,1.03372,.96039,1.24633,1,1.09125,.93327,1.03336,1.16541,1.036,1,1,1,.771,1,1,1.15574,1.15574,1.15574,1.15574,.86364,.94434,.86279,.94434,.86224,1,1,1.16798,1,.96085,.90068,1.21237,1.18416,1.13904,.69825,.9716,2.10339,1.29004,1.29004,1.21339,1.29004,1.29004,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18775,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.13269,1.13269,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiBoldItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiItalicFactors=[1.76738,1,1,.98946,1.14763,1.05365,1.06234,.96927,.92586,1.15373,1.18414,.91349,.91349,1.07403,1.17308,.78383,1.20088,.78383,1.42531,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78383,.78383,1.17308,1.17308,1.17308,.77349,.94565,.94729,.85944,.88506,.9858,.74817,.80016,.88449,.98039,.95782,.69238,.89898,.83231,.98183,1.03989,.96924,.86237,.96924,.80595,.74524,.86091,.95402,.94143,.98448,.8858,.83089,.93285,1.0949,1.39016,1.0949,1.45994,.74627,1.04839,.97454,.97454,.87207,.97454,.87533,1.06151,.97454,1.00176,1.16484,1.08132,.98047,1.16484,1.02989,1.01054,.96225,.97454,.97454,1.06598,.79004,1.16344,1.00351,.94629,.9973,.91016,.96777,.9043,.91082,.92481,.91082,1.17308,.95748,.96927,.96927,1,.96927,.92481,.80597,1.04839,1.23393,1.1781,.9245,1.17308,1.20808,.63218,.94261,1.24822,1.09971,1.09971,1.04839,1,.85273,.78032,1.04839,1.09971,1.22326,.9245,1.09836,1.13525,1.15222,.70424,.94729,.94729,.94729,.94729,.94729,.94729,.85498,.88506,.74817,.74817,.74817,.74817,.95782,.95782,.95782,.95782,.9858,1.03989,.96924,.96924,.96924,.96924,.96924,1.17308,.96924,.95402,.95402,.95402,.95402,.83089,.86237,.88409,.97454,.97454,.97454,.97454,.97454,.97454,.92916,.87207,.87533,.87533,.87533,.87533,.93146,.93146,.93146,.93146,.93854,1.01054,.96225,.96225,.96225,.96225,.96225,1.24822,.8761,1.00351,1.00351,1.00351,1.00351,.96777,.97454,.96777,.94729,.97454,.94729,.97454,.94729,.97454,.88506,.87207,.88506,.87207,.88506,.87207,.88506,.87207,.9858,.95391,.9858,.97454,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.74817,.87533,.88449,.97454,.88449,.97454,.88449,.97454,1,1,.98039,1.00176,.98039,1.00176,.95782,.93146,.95782,.93146,.95782,.93146,.95782,1.16484,.95782,.93146,.84421,1.12761,.69238,1.08132,1,1,.98047,.83231,1.16484,1,1,.84723,1.04861,.84723,.78755,.83231,1.23736,1.03989,1.01054,1,1,1.03989,1.01054,.9857,1.03849,1.01054,.96924,.96225,.96924,.96225,.96924,.96225,.92383,.90171,.80595,1.06598,1,1,.80595,1.06598,.74524,.79004,.74524,.79004,.74524,.79004,.74524,.79004,1,1,.86091,1.02759,.85771,1.16344,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.95402,1.00351,.98448,.9973,.83089,.96777,.83089,.93285,.9043,.93285,.9043,.93285,.9043,1.31868,.96927,.94729,.97454,.85498,.92916,.96924,.8761,1,1,.86091,1.16344,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,1.04839,.81965,.81965,.94729,.78032,.71022,.90883,.84171,.99877,.77596,1.05734,1.2,.94729,.85944,.82791,.9607,.74817,.93285,.98039,.96924,.95782,.89898,.98316,.98183,1.03989,.78614,.96924,.97642,.86237,.86075,.86091,.83089,.90082,.8858,.97296,1.01284,.95782,.83089,1.0976,1.04,1.03342,1.2,1.0675,1.0976,.98205,1.03809,1.05097,1.04,.95364,1.03342,1.05401,1.2,1.02148,1.0119,1.04724,1.0127,1.02732,.96225,.8965,.97783,.93574,.94818,1.30679,1.0675,1.11826,.99821,1.0557,1.0326,1.2,1.0675,.96225,1.0675,1.0326,.74817,1,1,1,1,1,1,1,1,1,1,1,1,1.03754,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.87533,1,1,1,1,1,1,1,1,1,1,1,1,.98705,1,1,1,1,1,1,.98448,.9973,.98448,.9973,.98448,.9973,.83089,.96777,1,1.20088,.89903,1,1,.75155,.94945,.94945,.94945,.94945,1.12317,1.12317,1.12317,.67603,.67603,1.15621,.73584,1.21191,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87709,.96927,1.01473,.96927,1,1,1,.77295,1,1,1.09836,1.09836,1.09836,1.01522,.86321,.94434,.8649,.94434,.86182,1,1,1.083,1,.91578,.86438,1.17308,1.18416,1.14589,.69825,.97622,1.96791,1.24822,1.24822,1.17308,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.17984,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10742,1.10742,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiItalicMetrics={lineHeight:1.33008,lineGap:0},e.SegoeuiRegularFactors=[1.76738,1,1,.98594,1.02285,1.10454,1.06234,.96927,.92037,1.19985,1.2046,.90616,.90616,1.07152,1.1714,.78032,1.20088,.78032,1.40246,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.96927,.78032,.78032,1.1714,1.1714,1.1714,.80597,.94084,.96706,.85944,.85734,.97093,.75842,.79936,.88198,.9831,.95782,.71387,.86969,.84636,1.07796,1.03584,.96924,.83968,.96924,.82826,.79649,.85771,.95132,.93119,.98965,.88433,.8287,.93365,1.08612,1.3638,1.08612,1.45786,.74627,.80499,.91484,1.05707,.92383,1.05882,.9403,1.12654,1.05882,1.01756,1.09011,1.09011,.99414,1.09011,1.034,1.01756,1.05356,1.05707,1.05882,1.04399,.84863,1.21968,1.01756,.95801,1.00068,.91797,.96777,.9043,.90351,.92105,.90351,1.1714,.85337,.96927,.96927,.99912,.96927,.92105,.80597,1.2434,1.20808,1.05937,.90957,1.1714,1.20808,.75155,.94261,1.24644,1.09971,1.09971,.84751,1,.85273,.78032,.61584,1.05425,1.17914,.90957,1.08665,1.11593,1.14169,.73381,.96706,.96706,.96706,.96706,.96706,.96706,.86035,.85734,.75842,.75842,.75842,.75842,.95782,.95782,.95782,.95782,.97093,1.03584,.96924,.96924,.96924,.96924,.96924,1.1714,.96924,.95132,.95132,.95132,.95132,.8287,.83968,.89049,.91484,.91484,.91484,.91484,.91484,.91484,.93575,.92383,.9403,.9403,.9403,.9403,.8717,.8717,.8717,.8717,1.00527,1.01756,1.05356,1.05356,1.05356,1.05356,1.05356,1.24644,.95923,1.01756,1.01756,1.01756,1.01756,.96777,1.05707,.96777,.96706,.91484,.96706,.91484,.96706,.91484,.85734,.92383,.85734,.92383,.85734,.92383,.85734,.92383,.97093,1.0969,.97093,1.05882,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.75842,.9403,.88198,1.05882,.88198,1.05882,.88198,1.05882,1,1,.9831,1.01756,.9831,1.01756,.95782,.8717,.95782,.8717,.95782,.8717,.95782,1.09011,.95782,.8717,.84784,1.11551,.71387,1.09011,1,1,.99414,.84636,1.09011,1,1,.84636,1.0536,.84636,.94298,.84636,1.23297,1.03584,1.01756,1,1,1.03584,1.01756,1.00323,1.03444,1.01756,.96924,1.05356,.96924,1.05356,.96924,1.05356,.93066,.98293,.82826,1.04399,1,1,.82826,1.04399,.79649,.84863,.79649,.84863,.79649,.84863,.79649,.84863,1,1,.85771,1.17318,.85771,1.21968,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.95132,1.01756,.98965,1.00068,.8287,.96777,.8287,.93365,.9043,.93365,.9043,.93365,.9043,1.08571,.96927,.96706,.91484,.86035,.93575,.96924,.95923,1,1,.85771,1.21968,1.11437,1.11437,.93109,.91202,.60411,.84164,.55572,1.01173,.97361,.81818,.81818,.96635,.78032,.72727,.92366,.98601,1.03405,.77968,1.09799,1.2,.96706,.85944,.85638,.96491,.75842,.93365,.9831,.96924,.95782,.86969,.94152,1.07796,1.03584,.78437,.96924,.98715,.83968,.83491,.85771,.8287,.94492,.88433,.9287,1.0098,.95782,.8287,1.0625,.98248,1.03424,1.2,1.01071,1.0625,.95246,1.03809,1.04912,.98248,1.00221,1.03424,1.05443,1.2,1.04785,.99609,1.00169,1.05176,.99346,1.05356,.9087,1.03004,.95542,.93117,1.23362,1.01071,1.07831,1.02512,1.05205,1.03502,1.2,1.01071,1.05356,1.01071,1.03502,.75842,1,1,1,1,1,1,1,1,1,1,1,1,1.03719,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,.9403,1,1,1,1,1,1,1,1,1,1,1,1,1.04021,1,1,1,1,1,1,.98965,1.00068,.98965,1.00068,.98965,1.00068,.8287,.96777,1,1.20088,.89903,1,1,.75155,1.03077,1.03077,1.03077,1.03077,1.13196,1.13196,1.13196,.67428,.67428,1.16039,.73291,1.20996,1.22135,1.06483,.94868,.94868,.95996,1.24633,1,1.07497,.87796,.96927,1.01518,.96927,1,1,1,.77295,1,1,1.10539,1.10539,1.11358,1.06967,.86279,.94434,.86279,.94434,.86182,1,1,1.083,1,.91578,.86507,1.1714,1.18416,1.14589,.69825,.97622,1.9697,1.24822,1.24822,1.17238,1.24822,1.24822,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1.42603,1,.99862,.99862,1,.87025,.87025,.87025,.87025,1.18083,1.42603,1,1.42603,1.42603,.99862,1,1,1,1,1,1.2886,1.04315,1.15296,1.34163,1,1,1,1.10938,1.10938,1,1,1,1.05425,1.09971,1.09971,1.09971,1,1,1,1,1,1,1,1,1,1,1],e.SegoeuiRegularMetrics={lineHeight:1.33008,lineGap:0}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptEvaluator=e.PostScriptCompiler=e.PDFFunctionFactory=void 0,e.isPDFFunction=function(t){let e;if(t instanceof i.Dict)e=t;else{if(!(t instanceof s.BaseStream))return!1;e=t.dict}return e.has("FunctionType")};var i=n(4),r=n(2),o=n(58),s=n(5),a=n(59);function l(t){if(!Array.isArray(t))return null;const e=t.length;for(let n=0;n<e;n++)if("number"!=typeof t[n]){const n=new Array(e);for(let i=0;i<e;i++)n[i]=+t[i];return n}return t}e.PDFFunctionFactory=class{constructor({xref:t,isEvalSupported:e=!0}){this.xref=t,this.isEvalSupported=!1!==e}create(t){const e=this.getCached(t);if(e)return e;const n=c.parse({xref:this.xref,isEvalSupported:this.isEvalSupported,fn:t instanceof i.Ref?this.xref.fetch(t):t});return this._cache(t,n),n}createFromArray(t){const e=this.getCached(t);if(e)return e;const n=c.parseArray({xref:this.xref,isEvalSupported:this.isEvalSupported,fnObj:t instanceof i.Ref?this.xref.fetch(t):t});return this._cache(t,n),n}getCached(t){let e;if(t instanceof i.Ref?e=t:t instanceof i.Dict?e=t.objId:t instanceof s.BaseStream&&(e=t.dict?.objId),e){const t=this._localFunctionCache.getByRef(e);if(t)return t}return null}_cache(t,e){if(!e)throw new Error('PDFFunctionFactory._cache - expected "parsedFunction" argument.');let n;t instanceof i.Ref?n=t:t instanceof i.Dict?n=t.objId:t instanceof s.BaseStream&&(n=t.dict?.objId),n&&this._localFunctionCache.set(null,n,e)}get _localFunctionCache(){return(0,r.shadow)(this,"_localFunctionCache",new a.LocalFunctionCache)}};class c{static getSampleArray(t,e,n,i){let r,o,s=1;for(r=0,o=t.length;r<o;r++)s*=t[r];s*=e;const a=new Array(s);let l=0,c=0;const h=1/(2**n-1),u=i.getBytes((s*n+7)/8);let d=0;for(r=0;r<s;r++){for(;l<n;)c<<=8,c|=u[d++],l+=8;l-=n,a[r]=(c>>l)*h,c&=(1<<l)-1}return a}static parse({xref:t,isEvalSupported:e,fn:n}){const i=n.dict||n;switch(i.get("FunctionType")){case 0:return this.constructSampled({xref:t,isEvalSupported:e,fn:n,dict:i});case 1:break;case 2:return this.constructInterpolated({xref:t,isEvalSupported:e,dict:i});case 3:return this.constructStiched({xref:t,isEvalSupported:e,dict:i});case 4:return this.constructPostScript({xref:t,isEvalSupported:e,fn:n,dict:i})}throw new r.FormatError("Unknown type of function")}static parseArray({xref:t,isEvalSupported:e,fnObj:n}){if(!Array.isArray(n))return this.parse({xref:t,isEvalSupported:e,fn:n});const i=[];for(const r of n)i.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(r)}));return function(t,e,n,r){for(let o=0,s=i.length;o<s;o++)i[o](t,e,n,r+o)}}static constructSampled({xref:t,isEvalSupported:e,fn:n,dict:i}){function o(t){const e=t.length,n=[];let i=0;for(let r=0;r<e;r+=2)n[i++]=[t[r],t[r+1]];return n}function s(t,e,n,i,r){return i+(r-i)/(n-e)*(t-e)}let a=l(i.getArray("Domain")),c=l(i.getArray("Range"));if(!a||!c)throw new r.FormatError("No domain or range");const h=a.length/2,u=c.length/2;a=o(a),c=o(c);const d=l(i.getArray("Size")),p=i.get("BitsPerSample"),f=i.get("Order")||1;1!==f&&(0,r.info)("No support for cubic spline interpolation: "+f);let g=l(i.getArray("Encode"));if(g)g=o(g);else{g=[];for(let t=0;t<h;++t)g.push([0,d[t]-1])}let m=l(i.getArray("Decode"));m=m?o(m):c;const y=this.getSampleArray(d,u,p,n);return function(t,e,n,i){const r=1<<h,o=new Float64Array(r),l=new Uint32Array(r);let p,f;for(f=0;f<r;f++)o[f]=1;let v=u,b=1;for(p=0;p<h;++p){const n=a[p][0],i=a[p][1];let c=s(Math.min(Math.max(t[e+p],n),i),n,i,g[p][0],g[p][1]);const h=d[p];c=Math.min(Math.max(c,0),h-1);const u=c<h-1?Math.floor(c):c-1,m=u+1-c,y=c-u,w=u*v,x=w+v;for(f=0;f<r;f++)f&b?(o[f]*=y,l[f]+=x):(o[f]*=m,l[f]+=w);v*=h,b<<=1}for(f=0;f<u;++f){let t=0;for(p=0;p<r;p++)t+=y[l[p]+f]*o[p];t=s(t,0,1,m[f][0],m[f][1]),n[i+f]=Math.min(Math.max(t,c[f][0]),c[f][1])}}}static constructInterpolated({xref:t,isEvalSupported:e,dict:n}){const i=l(n.getArray("C0"))||[0],r=l(n.getArray("C1"))||[1],o=n.get("N"),s=[];for(let t=0,e=i.length;t<e;++t)s.push(r[t]-i[t]);const a=s.length;return function(t,e,n,r){const l=1===o?t[e]:t[e]**o;for(let t=0;t<a;++t)n[r+t]=i[t]+l*s[t]}}static constructStiched({xref:t,isEvalSupported:e,dict:n}){const i=l(n.getArray("Domain"));if(!i)throw new r.FormatError("No domain");if(1!=i.length/2)throw new r.FormatError("Bad domain for stiched function");const o=[];for(const i of n.get("Functions"))o.push(this.parse({xref:t,isEvalSupported:e,fn:t.fetchIfRef(i)}));const s=l(n.getArray("Bounds")),a=l(n.getArray("Encode")),c=new Float32Array(1);return function(t,e,n,r){const l=function(t,e,n){return t>n?t=n:t<e&&(t=e),t}(t[e],i[0],i[1]),h=s.length;let u;for(u=0;u<h&&!(l<s[u]);++u);let d=i[0];u>0&&(d=s[u-1]);let p=i[1];u<s.length&&(p=s[u]);const f=a[2*u],g=a[2*u+1];c[0]=d===p?f:f+(l-d)*(g-f)/(p-d),o[u](c,0,n,r)}}static constructPostScript({xref:t,isEvalSupported:e,fn:n,dict:i}){const s=l(i.getArray("Domain")),a=l(i.getArray("Range"));if(!s)throw new r.FormatError("No domain.");if(!a)throw new r.FormatError("No range.");const c=new o.PostScriptLexer(n),h=new o.PostScriptParser(c).parse();if(e&&r.FeatureTest.isEvalSupported){const t=(new C).compile(h,s,a);if(t)return new Function("src","srcOffset","dest","destOffset",t)}(0,r.info)("Unable to compile PS function");const d=a.length>>1,p=s.length>>1,f=new u(h),g=Object.create(null);let m=8192;const y=new Float32Array(p);return function(t,e,n,i){let r,o,s="";const l=y;for(r=0;r<p;r++)o=t[e+r],l[r]=o,s+=o+"_";const c=g[s];if(void 0!==c)return void n.set(c,i);const h=new Float32Array(d),u=f.execute(l),v=u.length-d;for(r=0;r<d;r++){o=u[v+r];let t=a[2*r];o<t?o=t:(t=a[2*r+1],o>t&&(o=t)),h[r]=o}m>0&&(m--,g[s]=h),n.set(h,i)}}}class h{static MAX_STACK_SIZE=100;constructor(t){this.stack=t?Array.from(t):[]}push(t){if(this.stack.length>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");this.stack.push(t)}pop(){if(this.stack.length<=0)throw new Error("PostScript function stack underflow.");return this.stack.pop()}copy(t){if(this.stack.length+t>=h.MAX_STACK_SIZE)throw new Error("PostScript function stack overflow.");const e=this.stack;for(let n=e.length-t,i=t-1;i>=0;i--,n++)e.push(e[n])}index(t){this.push(this.stack[this.stack.length-t-1])}roll(t,e){const n=this.stack,i=n.length-t,r=n.length-1,o=i+(e-Math.floor(e/t)*t);for(let t=i,e=r;t<e;t++,e--){const i=n[t];n[t]=n[e],n[e]=i}for(let t=i,e=o-1;t<e;t++,e--){const i=n[t];n[t]=n[e],n[e]=i}for(let t=o,e=r;t<e;t++,e--){const i=n[t];n[t]=n[e],n[e]=i}}}class u{constructor(t){this.operators=t}execute(t){const e=new h(t);let n=0;const i=this.operators,o=i.length;let s,a,l;for(;n<o;)if(s=i[n++],"number"!=typeof s)switch(s){case"jz":l=e.pop(),a=e.pop(),a||(n=l);break;case"j":a=e.pop(),n=a;break;case"abs":a=e.pop(),e.push(Math.abs(a));break;case"add":l=e.pop(),a=e.pop(),e.push(a+l);break;case"and":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a&&l):e.push(a&l);break;case"atan":l=e.pop(),a=e.pop(),a=Math.atan2(a,l)/Math.PI*180,a<0&&(a+=360),e.push(a);break;case"bitshift":l=e.pop(),a=e.pop(),a>0?e.push(a<<l):e.push(a>>l);break;case"ceiling":a=e.pop(),e.push(Math.ceil(a));break;case"copy":a=e.pop(),e.copy(a);break;case"cos":a=e.pop(),e.push(Math.cos(a%360/180*Math.PI));break;case"cvi":a=0|e.pop(),e.push(a);break;case"cvr":break;case"div":l=e.pop(),a=e.pop(),e.push(a/l);break;case"dup":e.copy(1);break;case"eq":l=e.pop(),a=e.pop(),e.push(a===l);break;case"exch":e.roll(2,1);break;case"exp":l=e.pop(),a=e.pop(),e.push(a**l);break;case"false":e.push(!1);break;case"floor":a=e.pop(),e.push(Math.floor(a));break;case"ge":l=e.pop(),a=e.pop(),e.push(a>=l);break;case"gt":l=e.pop(),a=e.pop(),e.push(a>l);break;case"idiv":l=e.pop(),a=e.pop(),e.push(a/l|0);break;case"index":a=e.pop(),e.index(a);break;case"le":l=e.pop(),a=e.pop(),e.push(a<=l);break;case"ln":a=e.pop(),e.push(Math.log(a));break;case"log":a=e.pop(),e.push(Math.log10(a));break;case"lt":l=e.pop(),a=e.pop(),e.push(a<l);break;case"mod":l=e.pop(),a=e.pop(),e.push(a%l);break;case"mul":l=e.pop(),a=e.pop(),e.push(a*l);break;case"ne":l=e.pop(),a=e.pop(),e.push(a!==l);break;case"neg":a=e.pop(),e.push(-a);break;case"not":a=e.pop(),"boolean"==typeof a?e.push(!a):e.push(~a);break;case"or":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a||l):e.push(a|l);break;case"pop":e.pop();break;case"roll":l=e.pop(),a=e.pop(),e.roll(a,l);break;case"round":a=e.pop(),e.push(Math.round(a));break;case"sin":a=e.pop(),e.push(Math.sin(a%360/180*Math.PI));break;case"sqrt":a=e.pop(),e.push(Math.sqrt(a));break;case"sub":l=e.pop(),a=e.pop(),e.push(a-l);break;case"true":e.push(!0);break;case"truncate":a=e.pop(),a=a<0?Math.ceil(a):Math.floor(a),e.push(a);break;case"xor":l=e.pop(),a=e.pop(),"boolean"==typeof a&&"boolean"==typeof l?e.push(a!==l):e.push(a^l);break;default:throw new r.FormatError(`Unknown operator ${s}`)}else e.push(s);return e.stack}}e.PostScriptEvaluator=u;class d{constructor(t){this.type=t}visit(t){(0,r.unreachable)("abstract method")}}class p extends d{constructor(t,e,n){super("args"),this.index=t,this.min=e,this.max=n}visit(t){t.visitArgument(this)}}class f extends d{constructor(t){super("literal"),this.number=t,this.min=t,this.max=t}visit(t){t.visitLiteral(this)}}class g extends d{constructor(t,e,n,i,r){super("binary"),this.op=t,this.arg1=e,this.arg2=n,this.min=i,this.max=r}visit(t){t.visitBinaryOperation(this)}}class m extends d{constructor(t,e){super("max"),this.arg=t,this.min=t.min,this.max=e}visit(t){t.visitMin(this)}}class y extends d{constructor(t,e,n){super("var"),this.index=t,this.min=e,this.max=n}visit(t){t.visitVariable(this)}}class v extends d{constructor(t,e){super("definition"),this.variable=t,this.arg=e}visit(t){t.visitVariableDefinition(this)}}class b{constructor(){this.parts=[]}visitArgument(t){this.parts.push("Math.max(",t.min,", Math.min(",t.max,", src[srcOffset + ",t.index,"]))")}visitVariable(t){this.parts.push("v",t.index)}visitLiteral(t){this.parts.push(t.number)}visitBinaryOperation(t){this.parts.push("("),t.arg1.visit(this),this.parts.push(" ",t.op," "),t.arg2.visit(this),this.parts.push(")")}visitVariableDefinition(t){this.parts.push("var "),t.variable.visit(this),this.parts.push(" = "),t.arg.visit(this),this.parts.push(";")}visitMin(t){this.parts.push("Math.min("),t.arg.visit(this),this.parts.push(", ",t.max,")")}toString(){return this.parts.join("")}}function w(t,e){return"literal"===e.type&&0===e.number?t:"literal"===t.type&&0===t.number?e:"literal"===e.type&&"literal"===t.type?new f(t.number+e.number):new g("+",t,e,t.min+e.min,t.max+e.max)}function x(t,e){if("literal"===e.type){if(0===e.number)return new f(0);if(1===e.number)return t;if("literal"===t.type)return new f(t.number*e.number)}if("literal"===t.type){if(0===t.number)return new f(0);if(1===t.number)return e}const n=Math.min(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max),i=Math.max(t.min*e.min,t.min*e.max,t.max*e.min,t.max*e.max);return new g("*",t,e,n,i)}function _(t,e){if("literal"===e.type){if(0===e.number)return t;if("literal"===t.type)return new f(t.number-e.number)}return"binary"===e.type&&"-"===e.op&&"literal"===t.type&&1===t.number&&"literal"===e.arg1.type&&1===e.arg1.number?e.arg2:new g("-",t,e,t.min-e.max,t.max-e.min)}function S(t,e){return t.min>=e?new f(e):t.max<=e?t:new m(t,e)}class C{compile(t,e,n){const i=[],r=[],o=e.length>>1,s=n.length>>1;let a,l,c,h,u,d,g,m,C=0;for(let t=0;t<o;t++)i.push(new p(t,e[2*t],e[2*t+1]));for(let e=0,n=t.length;e<n;e++)if(m=t[e],"number"!=typeof m)switch(m){case"add":if(i.length<2)return null;h=i.pop(),c=i.pop(),i.push(w(c,h));break;case"cvr":if(i.length<1)return null;break;case"mul":if(i.length<2)return null;h=i.pop(),c=i.pop(),i.push(x(c,h));break;case"sub":if(i.length<2)return null;h=i.pop(),c=i.pop(),i.push(_(c,h));break;case"exch":if(i.length<2)return null;u=i.pop(),d=i.pop(),i.push(u,d);break;case"pop":if(i.length<1)return null;i.pop();break;case"index":if(i.length<1)return null;if(c=i.pop(),"literal"!==c.type)return null;if(a=c.number,a<0||!Number.isInteger(a)||i.length<a)return null;if(u=i[i.length-a-1],"literal"===u.type||"var"===u.type){i.push(u);break}g=new y(C++,u.min,u.max),i[i.length-a-1]=g,i.push(g),r.push(new v(g,u));break;case"dup":if(i.length<1)return null;if("number"==typeof t[e+1]&&"gt"===t[e+2]&&t[e+3]===e+7&&"jz"===t[e+4]&&"pop"===t[e+5]&&t[e+6]===t[e+1]){c=i.pop(),i.push(S(c,t[e+1])),e+=6;break}if(u=i.at(-1),"literal"===u.type||"var"===u.type){i.push(u);break}g=new y(C++,u.min,u.max),i[i.length-1]=g,i.push(g),r.push(new v(g,u));break;case"roll":if(i.length<2)return null;if(h=i.pop(),c=i.pop(),"literal"!==h.type||"literal"!==c.type)return null;if(l=h.number,a=c.number,a<=0||!Number.isInteger(a)||!Number.isInteger(l)||i.length<a)return null;if(l=(l%a+a)%a,0===l)break;i.push(...i.splice(i.length-a,a-l));break;default:return null}else i.push(new f(m));if(i.length!==s)return null;const k=[];for(const t of r){const e=new b;t.visit(e),k.push(e.toString())}for(let t=0,e=i.length;t<e;t++){const e=i[t],r=new b;e.visit(r);const o=n[2*t],s=n[2*t+1],a=[r.toString()];o>e.min&&(a.unshift("Math.max(",o,", "),a.push(")")),s<e.max&&(a.unshift("Math.min(",s,", "),a.push(")")),a.unshift("dest[destOffset + ",t,"] = "),a.push(";"),k.push(a.join(""))}return k.join("\n")}}e.PostScriptCompiler=C},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PostScriptParser=e.PostScriptLexer=void 0;var i=n(2),r=n(4),o=n(3);e.PostScriptParser=class{constructor(t){this.lexer=t,this.operators=[],this.token=null,this.prev=null}nextToken(){this.prev=this.token,this.token=this.lexer.getToken()}accept(t){return this.token.type===t&&(this.nextToken(),!0)}expect(t){if(this.accept(t))return!0;throw new i.FormatError(`Unexpected symbol: found ${this.token.type} expected ${t}.`)}parse(){return this.nextToken(),this.expect(s.LBRACE),this.parseBlock(),this.expect(s.RBRACE),this.operators}parseBlock(){for(;;)if(this.accept(s.NUMBER))this.operators.push(this.prev.value);else if(this.accept(s.OPERATOR))this.operators.push(this.prev.value);else{if(!this.accept(s.LBRACE))return;this.parseCondition()}}parseCondition(){const t=this.operators.length;if(this.operators.push(null,null),this.parseBlock(),this.expect(s.RBRACE),this.accept(s.IF))this.operators[t]=this.operators.length,this.operators[t+1]="jz";else{if(!this.accept(s.LBRACE))throw new i.FormatError("PS Function: error parsing conditional.");{const e=this.operators.length;this.operators.push(null,null);const n=this.operators.length;this.parseBlock(),this.expect(s.RBRACE),this.expect(s.IFELSE),this.operators[e]=this.operators.length,this.operators[e+1]="j",this.operators[t]=n,this.operators[t+1]="jz"}}}};const s={LBRACE:0,RBRACE:1,NUMBER:2,OPERATOR:3,IF:4,IFELSE:5};class a{static get opCache(){return(0,i.shadow)(this,"opCache",Object.create(null))}constructor(t,e){this.type=t,this.value=e}static getOperator(t){return a.opCache[t]||=new a(s.OPERATOR,t)}static get LBRACE(){return(0,i.shadow)(this,"LBRACE",new a(s.LBRACE,"{"))}static get RBRACE(){return(0,i.shadow)(this,"RBRACE",new a(s.RBRACE,"}"))}static get IF(){return(0,i.shadow)(this,"IF",new a(s.IF,"IF"))}static get IFELSE(){return(0,i.shadow)(this,"IFELSE",new a(s.IFELSE,"IFELSE"))}}e.PostScriptLexer=class{constructor(t){this.stream=t,this.nextChar(),this.strBuf=[]}nextChar(){return this.currentChar=this.stream.getByte()}getToken(){let t=!1,e=this.currentChar;for(;;){if(e<0)return r.EOF;if(t)10!==e&&13!==e||(t=!1);else if(37===e)t=!0;else if(!(0,o.isWhiteSpace)(e))break;e=this.nextChar()}switch(0|e){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 43:case 45:case 46:return new a(s.NUMBER,this.getNumber());case 123:return this.nextChar(),a.LBRACE;case 125:return this.nextChar(),a.RBRACE}const n=this.strBuf;for(n.length=0,n[0]=String.fromCharCode(e);(e=this.nextChar())>=0&&(e>=65&&e<=90||e>=97&&e<=122);)n.push(String.fromCharCode(e));const i=n.join("");switch(i.toLowerCase()){case"if":return a.IF;case"ifelse":return a.IFELSE;default:return a.getOperator(i)}}getNumber(){let t=this.currentChar;const e=this.strBuf;for(e.length=0,e[0]=String.fromCharCode(t);(t=this.nextChar())>=0&&(t>=48&&t<=57||45===t||46===t);)e.push(String.fromCharCode(t));const n=parseFloat(e.join(""));if(isNaN(n))throw new i.FormatError(`Invalid floating point number: ${n}`);return n}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.RegionalImageCache=e.LocalTilingPatternCache=e.LocalImageCache=e.LocalGStateCache=e.LocalFunctionCache=e.LocalColorSpaceCache=e.GlobalImageCache=void 0;var i=n(2),r=n(4);class o{constructor(t){this.constructor===o&&(0,i.unreachable)("Cannot initialize BaseLocalCache."),this._onlyRefs=!0===t?.onlyRefs,this._onlyRefs||(this._nameRefMap=new Map,this._imageMap=new Map),this._imageCache=new r.RefSetCache}getByName(t){this._onlyRefs&&(0,i.unreachable)("Should not call `getByName` method.");const e=this._nameRefMap.get(t);return e?this.getByRef(e):this._imageMap.get(t)||null}getByRef(t){return this._imageCache.get(t)||null}set(t,e,n){(0,i.unreachable)("Abstract method `set` called.")}}e.LocalImageCache=class extends o{set(t,e=null,n){if("string"!=typeof t)throw new Error('LocalImageCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,n)}this._imageMap.has(t)||this._imageMap.set(t,n)}},e.LocalColorSpaceCache=class extends o{set(t=null,e=null,n){if("string"!=typeof t&&!e)throw new Error('LocalColorSpaceCache.set - expected "name" and/or "ref" argument.');if(e){if(this._imageCache.has(e))return;return null!==t&&this._nameRefMap.set(t,e),void this._imageCache.put(e,n)}this._imageMap.has(t)||this._imageMap.set(t,n)}},e.LocalFunctionCache=class extends o{constructor(t){super({onlyRefs:!0})}set(t=null,e,n){if(!e)throw new Error('LocalFunctionCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,n)}},e.LocalGStateCache=class extends o{set(t,e=null,n){if("string"!=typeof t)throw new Error('LocalGStateCache.set - expected "name" argument.');if(e){if(this._imageCache.has(e))return;return this._nameRefMap.set(t,e),void this._imageCache.put(e,n)}this._imageMap.has(t)||this._imageMap.set(t,n)}},e.LocalTilingPatternCache=class extends o{constructor(t){super({onlyRefs:!0})}set(t=null,e,n){if(!e)throw new Error('LocalTilingPatternCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,n)}},e.RegionalImageCache=class extends o{constructor(t){super({onlyRefs:!0})}set(t=null,e,n){if(!e)throw new Error('RegionalImageCache.set - expected "ref" argument.');this._imageCache.has(e)||this._imageCache.put(e,n)}};class s{static NUM_PAGES_THRESHOLD=2;static MIN_IMAGES_TO_CACHE=10;static MAX_BYTE_SIZE=5*i.MAX_IMAGE_SIZE_TO_CACHE;constructor(){this._refCache=new r.RefSetCache,this._imageCache=new r.RefSetCache}get _byteSize(){let t=0;for(const e of this._imageCache)t+=e.byteSize;return t}get _cacheLimitReached(){return!(this._imageCache.size<s.MIN_IMAGES_TO_CACHE||this._byteSize<s.MAX_BYTE_SIZE)}shouldCache(t,e){let n=this._refCache.get(t);return n||(n=new Set,this._refCache.put(t,n)),n.add(e),!(n.size<s.NUM_PAGES_THRESHOLD||!this._imageCache.has(t)&&this._cacheLimitReached)}addByteSize(t,e){const n=this._imageCache.get(t);n&&(n.byteSize||(n.byteSize=e))}getData(t,e){const n=this._refCache.get(t);if(!n)return null;if(n.size<s.NUM_PAGES_THRESHOLD)return null;const i=this._imageCache.get(t);return i?(n.add(e),i):null}setData(t,e){if(!this._refCache.has(t))throw new Error('GlobalImageCache.setData - expected "shouldCache" to have been called.');this._imageCache.has(t)||(this._cacheLimitReached?(0,i.warn)("GlobalImageCache.setData - cache limit reached."):this._imageCache.put(t,e))}clear(t=!1){t||this._refCache.clear(),this._imageCache.clear()}}e.GlobalImageCache=s},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.bidi=function(t,e=-1,n=!1){let f=!0;const g=t.length;if(0===g||n)return u(t,f,n);d.length=g,p.length=g;let m,y,v=0;for(m=0;m<g;++m){d[m]=t.charAt(m);const e=t.charCodeAt(m);let n="L";e<=255?n=r[e]:1424<=e&&e<=1524?n="R":1536<=e&&e<=1791?(n=o[255&e],n||(0,i.warn)("Bidi: invalid Unicode character "+e.toString(16))):(1792<=e&&e<=2220||64336<=e&&e<=65023||65136<=e&&e<=65279)&&(n="AL"),"R"!==n&&"AL"!==n&&"AN"!==n||v++,p[m]=n}if(0===v)return f=!0,u(t,f);-1===e&&(v/g<.3&&g>4?(f=!0,e=0):(f=!1,e=1));const b=[];for(m=0;m<g;++m)b[m]=e;const w=s(e)?"R":"L",x=w,_=x;let S,C=x;for(m=0;m<g;++m)"NSM"===p[m]?p[m]=C:C=p[m];for(C=x,m=0;m<g;++m)S=p[m],"EN"===S?p[m]="AL"===C?"AN":"EN":"R"!==S&&"L"!==S&&"AL"!==S||(C=S);for(m=0;m<g;++m)S=p[m],"AL"===S&&(p[m]="R");for(m=1;m<g-1;++m)"ES"===p[m]&&"EN"===p[m-1]&&"EN"===p[m+1]&&(p[m]="EN"),"CS"!==p[m]||"EN"!==p[m-1]&&"AN"!==p[m-1]||p[m+1]!==p[m-1]||(p[m]=p[m-1]);for(m=0;m<g;++m)if("EN"===p[m]){for(let t=m-1;t>=0&&"ET"===p[t];--t)p[t]="EN";for(let t=m+1;t<g&&"ET"===p[t];++t)p[t]="EN"}for(m=0;m<g;++m)S=p[m],"WS"!==S&&"ES"!==S&&"ET"!==S&&"CS"!==S||(p[m]="ON");for(C=x,m=0;m<g;++m)S=p[m],"EN"===S?p[m]="L"===C?"L":"EN":"R"!==S&&"L"!==S||(C=S);for(m=0;m<g;++m)if("ON"===p[m]){const t=l(p,m+1,"ON");let e=x;m>0&&(e=p[m-1]);let n=_;t+1<g&&(n=p[t+1]),"L"!==e&&(e="R"),"L"!==n&&(n="R"),e===n&&c(p,m,t,e),m=t-1}for(m=0;m<g;++m)"ON"===p[m]&&(p[m]=w);for(m=0;m<g;++m)S=p[m],a(b[m])?"R"===S?b[m]+=1:"AN"!==S&&"EN"!==S||(b[m]+=2):"L"!==S&&"AN"!==S&&"EN"!==S||(b[m]+=1);let k,A=-1,E=99;for(m=0,y=b.length;m<y;++m)k=b[m],A<k&&(A=k),E>k&&s(k)&&(E=k);for(k=A;k>=E;--k){let t=-1;for(m=0,y=b.length;m<y;++m)b[m]<k?t>=0&&(h(d,t,m),t=-1):t<0&&(t=m);t>=0&&h(d,t,b.length)}for(m=0,y=d.length;m<y;++m){const t=d[m];"<"!==t&&">"!==t||(d[m]="")}return u(d.join(""),f)};var i=n(2);const r=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],o=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function s(t){return 0!=(1&t)}function a(t){return 0==(1&t)}function l(t,e,n){let i,r;for(i=e,r=t.length;i<r;++i)if(t[i]!==n)return i;return i}function c(t,e,n,i){for(let r=e;r<n;++r)t[r]=i}function h(t,e,n){for(let i=e,r=n-1;i<r;++i,--r){const e=t[i];t[i]=t[r],t[r]=e}}function u(t,e,n=!1){let i="ltr";return n?i="ttb":e||(i="rtl"),{str:t,dir:i}}const d=[],p=[]},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFontSubstitution=function(t,e,n,d,p){const f=d=(0,i.normalizeFontName)(d);let g=t.get(f);if(g)return g;let m=c.get(d);if(!m)for(const[t,e]of h)if(d.startsWith(t)){d=`${e}${d.substring(t.length)}`,m=c.get(d);break}let y=!1;m||(m=c.get(p),y=!0);const v=`${e.getDocId()}_s${e.createFontId()}`;if(!m){if(!(0,r.validateFontName)(d))return t.set(f,null),null;const e=/bold/gi.test(d),n=/oblique|italic/gi.test(d);return g={css:v,guessFallback:!0,loadedName:v,baseFontName:d,src:`local(${d})`,style:e&&n&&l||e&&s||n&&a||o},t.set(f,g),g}const b=[];y&&(0,r.validateFontName)(d)&&b.push(`local(${d})`);const{style:w,ultimate:x}=u(m,b,n),_=null===x;return g={css:`${v}${_?"":`,${x}`}`,guessFallback:_,loadedName:v,baseFontName:d,src:b.join(","),style:w},t.set(f,g),g};var i=n(38),r=n(3);const o={style:"normal",weight:"normal"},s={style:"normal",weight:"bold"},a={style:"italic",weight:"normal"},l={style:"italic",weight:"bold"},c=new Map([["Times-Roman",{local:["Times New Roman","Times-Roman","Times","Liberation Serif","Nimbus Roman","Nimbus Roman L","Tinos","Thorndale","TeX Gyre Termes","FreeSerif","DejaVu Serif","Bitstream Vera Serif","Ubuntu"],style:o,ultimate:"serif"}],["Times-Bold",{alias:"Times-Roman",style:s,ultimate:"serif"}],["Times-Italic",{alias:"Times-Roman",style:a,ultimate:"serif"}],["Times-BoldItalic",{alias:"Times-Roman",style:l,ultimate:"serif"}],["Helvetica",{local:["Helvetica","Helvetica Neue","Arial","Arial Nova","Liberation Sans","Arimo","Nimbus Sans","Nimbus Sans L","A030","TeX Gyre Heros","FreeSans","DejaVu Sans","Albany","Bitstream Vera Sans","Arial Unicode MS","Microsoft Sans Serif","Apple Symbols","Cantarell"],path:"LiberationSans-Regular.ttf",style:o,ultimate:"sans-serif"}],["Helvetica-Bold",{alias:"Helvetica",path:"LiberationSans-Bold.ttf",style:s,ultimate:"sans-serif"}],["Helvetica-Oblique",{alias:"Helvetica",path:"LiberationSans-Italic.ttf",style:a,ultimate:"sans-serif"}],["Helvetica-BoldOblique",{alias:"Helvetica",path:"LiberationSans-BoldItalic.ttf",style:l,ultimate:"sans-serif"}],["Courier",{local:["Courier","Courier New","Liberation Mono","Nimbus Mono","Nimbus Mono L","Cousine","Cumberland","TeX Gyre Cursor","FreeMono"],style:o,ultimate:"monospace"}],["Courier-Bold",{alias:"Courier",style:s,ultimate:"monospace"}],["Courier-Oblique",{alias:"Courier",style:a,ultimate:"monospace"}],["Courier-BoldOblique",{alias:"Courier",style:l,ultimate:"monospace"}],["ArialBlack",{local:["Arial Black"],style:{style:"normal",weight:"900"},fallback:"Helvetica-Bold"}],["ArialBlack-Bold",{alias:"ArialBlack"}],["ArialBlack-Italic",{alias:"ArialBlack",style:{style:"italic",weight:"900"},fallback:"Helvetica-BoldOblique"}],["ArialBlack-BoldItalic",{alias:"ArialBlack-Italic"}],["ArialNarrow",{local:["Arial Narrow","Liberation Sans Narrow","Helvetica Condensed","Nimbus Sans Narrow","TeX Gyre Heros Cn"],style:o,fallback:"Helvetica"}],["ArialNarrow-Bold",{alias:"ArialNarrow",style:s,fallback:"Helvetica-Bold"}],["ArialNarrow-Italic",{alias:"ArialNarrow",style:a,fallback:"Helvetica-Oblique"}],["ArialNarrow-BoldItalic",{alias:"ArialNarrow",style:l,fallback:"Helvetica-BoldOblique"}],["Calibri",{local:["Calibri","Carlito"],style:o,fallback:"Helvetica"}],["Calibri-Bold",{alias:"Calibri",style:s,fallback:"Helvetica-Bold"}],["Calibri-Italic",{alias:"Calibri",style:a,fallback:"Helvetica-Oblique"}],["Calibri-BoldItalic",{alias:"Calibri",style:l,fallback:"Helvetica-BoldOblique"}],["Wingdings",{local:["Wingdings","URW Dingbats"],style:o}],["Wingdings-Regular",{alias:"Wingdings"}],["Wingdings-Bold",{alias:"Wingdings"}]]),h=new Map([["Arial-Black","ArialBlack"]]);function u({alias:t,local:e,path:n,fallback:i,style:r,ultimate:o},h,d,p=!0,f=!0,g=""){const m={style:null,ultimate:null};if(e){const t=g?` ${g}`:"";for(const n of e)h.push(`local(${n}${t})`)}if(t){const e=c.get(t),o=g||function(t){switch(t){case s:return"Bold";case a:return"Italic";case l:return"Bold Italic";default:if("bold"===t?.weight)return"Bold";if("italic"===t?.style)return"Italic"}return""}(r);Object.assign(m,u(e,h,d,p&&!i,f&&!n,o))}if(r&&(m.style=r),o&&(m.ultimate=o),p&&i){const t=c.get(i),{ultimate:e}=u(t,h,d,p,f&&!n,g);m.ultimate||=e}return f&&n&&d&&h.push(`url(${d}${n})`),m}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ImageResizer=void 0;var i=n(2);class r{constructor(t,e){this._imgData=t,this._isMask=e}static needsToBeResized(t,e){if(t<=this._goodSquareLength&&e<=this._goodSquareLength)return!1;const{MAX_DIM:n}=this;if(t>n||e>n)return!0;const i=t*e;return this._hasMaxArea?i>this.MAX_AREA:!(i<this._goodSquareLength**2)&&(this._areGoodDims(t,e)?(this._goodSquareLength=Math.max(this._goodSquareLength,Math.floor(Math.sqrt(t*e))),!1):(this._goodSquareLength=this._guessMax(this._goodSquareLength,n,128,0),i>(this.MAX_AREA=this._goodSquareLength**2)))}static get MAX_DIM(){return(0,i.shadow)(this,"MAX_DIM",this._guessMax(2048,65537,0,1))}static get MAX_AREA(){return this._hasMaxArea=!0,(0,i.shadow)(this,"MAX_AREA",this._guessMax(r._goodSquareLength,this.MAX_DIM,128,0)**2)}static set MAX_AREA(t){t>=0&&(this._hasMaxArea=!0,(0,i.shadow)(this,"MAX_AREA",t))}static setMaxArea(t){this._hasMaxArea||(this.MAX_AREA=t>>2)}static _areGoodDims(t,e){try{const n=new OffscreenCanvas(t,e),i=n.getContext("2d");i.fillRect(0,0,1,1);const r=i.getImageData(0,0,1,1).data[3];return n.width=n.height=1,0!==r}catch{return!1}}static _guessMax(t,e,n,i){for(;t+n+1<e;){const n=Math.floor((t+e)/2),r=i||n;this._areGoodDims(n,r)?t=n:e=n}return t}static async createImage(t,e=!1){return new r(t,e)._createImage()}async _createImage(){const t=this._encodeBMP(),e=new Blob([t.buffer],{type:"image/bmp"}),n=createImageBitmap(e),{MAX_AREA:i,MAX_DIM:o}=r,{_imgData:s}=this,{width:a,height:l}=s,c=Math.max(a/o,l/o,Math.sqrt(a*l/i)),h=Math.max(c,2),u=Math.round(10*(c+1.25))/10/h,d=Math.floor(Math.log2(u)),p=new Array(d+2).fill(2);p[0]=h,p.splice(-1,1,u/(1<<d));let f=a,g=l,m=await n;for(const t of p){const e=f,n=g;f=Math.floor(f/t)-1,g=Math.floor(g/t)-1;const i=new OffscreenCanvas(f,g);i.getContext("2d").drawImage(m,0,0,e,n,0,0,f,g),m=i.transferToImageBitmap()}return s.data=null,s.bitmap=m,s.width=f,s.height=g,s}_encodeBMP(){const{width:t,height:e,kind:n}=this._imgData;let r,o=this._imgData.data,s=new Uint8Array(0),a=s,l=0;switch(n){case i.ImageKind.GRAYSCALE_1BPP:{r=1,s=new Uint8Array(this._isMask?[255,255,255,255,0,0,0,0]:[0,0,0,0,255,255,255,255]);const n=t+7>>3,i=n+3&-4;if(n!==i){const t=new Uint8Array(i*e);let r=0;for(let s=0,a=e*n;s<a;s+=n,r+=i)t.set(o.subarray(s,s+n),r);o=t}break}case i.ImageKind.RGB_24BPP:if(r=24,3&t){const n=3*t,i=n+3&-4,r=i-n,s=new Uint8Array(i*e);let a=0;for(let t=0,i=e*n;t<i;t+=n){const e=o.subarray(t,t+n);for(let t=0;t<n;t+=3)s[a++]=e[t+2],s[a++]=e[t+1],s[a++]=e[t];a+=r}o=s}else for(let t=0,e=o.length;t<e;t+=3){const e=o[t];o[t]=o[t+2],o[t+2]=e}break;case i.ImageKind.RGBA_32BPP:r=32,l=3,a=new Uint8Array(68);const n=new DataView(a.buffer);i.FeatureTest.isLittleEndian?(n.setUint32(0,255,!0),n.setUint32(4,65280,!0),n.setUint32(8,16711680,!0),n.setUint32(12,4278190080,!0)):(n.setUint32(0,4278190080,!0),n.setUint32(4,16711680,!0),n.setUint32(8,65280,!0),n.setUint32(12,255,!0));break;default:throw new Error("invalid format")}let c=0;const h=40+a.length,u=14+h+s.length+o.length,d=new Uint8Array(u),p=new DataView(d.buffer);return p.setUint16(c,19778,!0),c+=2,p.setUint32(c,u,!0),c+=4,p.setUint32(c,0,!0),c+=4,p.setUint32(c,14+h+s.length,!0),c+=4,p.setUint32(c,h,!0),c+=4,p.setInt32(c,t,!0),c+=4,p.setInt32(c,-e,!0),c+=4,p.setUint16(c,1,!0),c+=2,p.setUint16(c,r,!0),c+=2,p.setUint32(c,l,!0),c+=4,p.setUint32(c,0,!0),c+=4,p.setInt32(c,0,!0),c+=4,p.setInt32(c,0,!0),c+=4,p.setUint32(c,s.length/4,!0),c+=4,p.setUint32(c,0,!0),c+=4,d.set(a,c),c+=a.length,d.set(s,c),c+=s.length,d.set(o,c),d}}e.ImageResizer=r,r._goodSquareLength=2048},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var i=n(2);const r=3285377520,o=4294901760,s=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?4294967295&t:r,this.h2=t?4294967295&t:r}update(t){let e,n;if("string"==typeof t){e=new Uint8Array(2*t.length),n=0;for(let i=0,r=t.length;i<r;i++){const r=t.charCodeAt(i);r<=255?e[n++]=r:(e[n++]=r>>>8,e[n++]=255&r)}}else{if(!(0,i.isArrayBuffer)(t))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");e=t.slice(),n=e.byteLength}const r=n>>2,a=n-4*r,l=new Uint32Array(e.buffer,0,r);let c=0,h=0,u=this.h1,d=this.h2;const p=3432918353,f=461845907,g=11601,m=13715;for(let t=0;t<r;t++)1&t?(c=l[t],c=c*p&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,u^=c,u=u<<13|u>>>19,u=5*u+3864292196):(h=l[t],h=h*p&o|h*g&s,h=h<<15|h>>>17,h=h*f&o|h*m&s,d^=h,d=d<<13|d>>>19,d=5*d+3864292196);switch(c=0,a){case 3:c^=e[4*r+2]<<16;case 2:c^=e[4*r+1]<<8;case 1:c^=e[4*r],c=c*p&o|c*g&s,c=c<<15|c>>>17,c=c*f&o|c*m&s,1&r?u^=c:d^=c}this.h1=u,this.h2=d}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=3981806797*t&o|36045*t&s,e=4283543511*e&o|(2950163797*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,t=444984403*t&o|60499*t&s,e=3301882366*e&o|(3120437893*(e<<16|t>>>16)&o)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OperatorList=void 0;var i=n(2);function r(t,e,n,i,r){let o=t;for(let t=0,n=e.length-1;t<n;t++){const n=e[t];o=o[n]||=[]}o[e.at(-1)]={checkFn:n,iterateFn:i,processFn:r}}const o=[];r(o,[i.OPS.save,i.OPS.transform,i.OPS.paintInlineImageXObject,i.OPS.restore],null,(function(t,e){const n=t.fnArray,r=(e-(t.iCurr-3))%4;switch(r){case 0:return n[e]===i.OPS.save;case 1:return n[e]===i.OPS.transform;case 2:return n[e]===i.OPS.paintInlineImageXObject;case 3:return n[e]===i.OPS.restore}throw new Error(`iterateInlineImageGroup - invalid pos: ${r}`)}),(function(t,e){const n=t.fnArray,r=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=o-1,c=Math.min(Math.floor((e-s)/4),200);if(c<10)return e-(e-s)%4;let h=0;const u=[];let d=0,p=1,f=1;for(let t=0;t<c;t++){const e=r[a+(t<<2)],n=r[l+(t<<2)][0];p+n.width>1e3&&(h=Math.max(h,p),f+=d+2,p=0,d=0),u.push({transform:e,x:p,y:f,w:n.width,h:n.height}),p+=n.width+2,d=Math.max(d,n.height)}const g=Math.max(h,p)+1,m=f+d+1,y=new Uint8Array(g*m*4),v=g<<2;for(let t=0;t<c;t++){const e=r[l+(t<<2)][0].data,n=u[t].w<<2;let i=0,o=u[t].x+u[t].y*g<<2;y.set(e.subarray(0,n),o-v);for(let r=0,s=u[t].h;r<s;r++)y.set(e.subarray(i,i+n),o),i+=n,o+=v;for(y.set(e.subarray(i-n,i),o);o>=0;)e[o-4]=e[o],e[o-3]=e[o+1],e[o-2]=e[o+2],e[o-1]=e[o+3],e[o+n]=e[o+n-4],e[o+n+1]=e[o+n-3],e[o+n+2]=e[o+n-2],e[o+n+3]=e[o+n-1],o-=v}const b={width:g,height:m};if(t.isOffscreenCanvasSupported){const t=new OffscreenCanvas(g,m);t.getContext("2d").putImageData(new ImageData(new Uint8ClampedArray(y.buffer),g,m),0,0),b.bitmap=t.transferToImageBitmap(),b.data=null}else b.kind=i.ImageKind.RGBA_32BPP,b.data=y;return n.splice(s,4*c,i.OPS.paintInlineImageXObjectGroup),r.splice(s,4*c,[b,u]),s+1})),r(o,[i.OPS.save,i.OPS.transform,i.OPS.paintImageMaskXObject,i.OPS.restore],null,(function(t,e){const n=t.fnArray,r=(e-(t.iCurr-3))%4;switch(r){case 0:return n[e]===i.OPS.save;case 1:return n[e]===i.OPS.transform;case 2:return n[e]===i.OPS.paintImageMaskXObject;case 3:return n[e]===i.OPS.restore}throw new Error(`iterateImageMaskGroup - invalid pos: ${r}`)}),(function(t,e){const n=t.fnArray,r=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=o-1;let c=Math.floor((e-s)/4);if(c<10)return e-(e-s)%4;let h,u,d=!1;const p=r[l][0],f=r[a][0],g=r[a][1],m=r[a][2],y=r[a][3];if(g===m){d=!0,h=a+4;let t=l+4;for(let e=1;e<c;e++,h+=4,t+=4)if(u=r[h],r[t][0]!==p||u[0]!==f||u[1]!==g||u[2]!==m||u[3]!==y){e<10?d=!1:c=e;break}}if(d){c=Math.min(c,1e3);const t=new Float32Array(2*c);h=a;for(let e=0;e<c;e++,h+=4)u=r[h],t[e<<1]=u[4],t[1+(e<<1)]=u[5];n.splice(s,4*c,i.OPS.paintImageMaskXObjectRepeat),r.splice(s,4*c,[p,f,g,m,y,t])}else{c=Math.min(c,100);const t=[];for(let e=0;e<c;e++){u=r[a+(e<<2)];const n=r[l+(e<<2)][0];t.push({data:n.data,width:n.width,height:n.height,interpolate:n.interpolate,count:n.count,transform:u})}n.splice(s,4*c,i.OPS.paintImageMaskXObjectGroup),r.splice(s,4*c,[t])}return s+1})),r(o,[i.OPS.save,i.OPS.transform,i.OPS.paintImageXObject,i.OPS.restore],(function(t){const e=t.argsArray,n=t.iCurr-2;return 0===e[n][1]&&0===e[n][2]}),(function(t,e){const n=t.fnArray,r=t.argsArray,o=(e-(t.iCurr-3))%4;switch(o){case 0:return n[e]===i.OPS.save;case 1:if(n[e]!==i.OPS.transform)return!1;const o=t.iCurr-2,s=r[o][0],a=r[o][3];return r[e][0]===s&&0===r[e][1]&&0===r[e][2]&&r[e][3]===a;case 2:if(n[e]!==i.OPS.paintImageXObject)return!1;const l=r[t.iCurr-1][0];return r[e][0]===l;case 3:return n[e]===i.OPS.restore}throw new Error(`iterateImageGroup - invalid pos: ${o}`)}),(function(t,e){const n=t.fnArray,r=t.argsArray,o=t.iCurr,s=o-3,a=o-2,l=r[o-1][0],c=r[a][0],h=r[a][3],u=Math.min(Math.floor((e-s)/4),1e3);if(u<3)return e-(e-s)%4;const d=new Float32Array(2*u);let p=a;for(let t=0;t<u;t++,p+=4){const e=r[p];d[t<<1]=e[4],d[1+(t<<1)]=e[5]}const f=[l,c,h,d];return n.splice(s,4*u,i.OPS.paintImageXObjectRepeat),r.splice(s,4*u,f),s+1})),r(o,[i.OPS.beginText,i.OPS.setFont,i.OPS.setTextMatrix,i.OPS.showText,i.OPS.endText],null,(function(t,e){const n=t.fnArray,r=t.argsArray,o=(e-(t.iCurr-4))%5;switch(o){case 0:return n[e]===i.OPS.beginText;case 1:return n[e]===i.OPS.setFont;case 2:return n[e]===i.OPS.setTextMatrix;case 3:if(n[e]!==i.OPS.showText)return!1;const o=t.iCurr-3,s=r[o][0],a=r[o][1];return r[e][0]===s&&r[e][1]===a;case 4:return n[e]===i.OPS.endText}throw new Error(`iterateShowTextGroup - invalid pos: ${o}`)}),(function(t,e){const n=t.fnArray,i=t.argsArray,r=t.iCurr,o=r-4,s=r-3,a=r-2,l=r-1,c=r,h=i[s][0],u=i[s][1];let d=Math.min(Math.floor((e-o)/5),1e3);if(d<3)return e-(e-o)%5;let p=o;o>=4&&n[o-4]===n[s]&&n[o-3]===n[a]&&n[o-2]===n[l]&&n[o-1]===n[c]&&i[o-4][0]===h&&i[o-4][1]===u&&(d++,p-=5);let f=p+4;for(let t=1;t<d;t++)n.splice(f,3),i.splice(f,3),f+=2;return f+1}));class s{constructor(t){this.queue=t}_optimize(){}push(t,e){this.queue.fnArray.push(t),this.queue.argsArray.push(e),this._optimize()}flush(){}reset(){}}class a extends s{constructor(t){super(t),this.state=null,this.context={iCurr:0,fnArray:t.fnArray,argsArray:t.argsArray,isOffscreenCanvasSupported:!1},this.match=null,this.lastProcessed=0}set isOffscreenCanvasSupported(t){this.context.isOffscreenCanvasSupported=t}_optimize(){const t=this.queue.fnArray;let e=this.lastProcessed,n=t.length,i=this.state,r=this.match;if(!i&&!r&&e+1===n&&!o[t[e]])return void(this.lastProcessed=n);const s=this.context;for(;e<n;){if(r){if((0,r.iterateFn)(s,e)){e++;continue}if(e=(0,r.processFn)(s,e+1),n=t.length,r=null,i=null,e>=n)break}i=(i||o)[t[e]],i&&!Array.isArray(i)?(s.iCurr=e,e++,!i.checkFn||(0,i.checkFn)(s)?(r=i,i=null):i=null):e++}this.state=i,this.match=r,this.lastProcessed=e}flush(){for(;this.match;){const t=this.queue.fnArray.length;this.lastProcessed=(0,this.match.processFn)(this.context,t),this.match=null,this.state=null,this._optimize()}}reset(){this.state=null,this.match=null,this.lastProcessed=0}}class l{static CHUNK_SIZE=1e3;static CHUNK_SIZE_ABOUT=this.CHUNK_SIZE-5;constructor(t=0,e){this._streamSink=e,this.fnArray=[],this.argsArray=[],this.optimizer=!e||t&i.RenderingIntentFlag.OPLIST?new s(this):new a(this),this.dependencies=new Set,this._totalLength=0,this.weight=0,this._resolved=e?null:Promise.resolve()}set isOffscreenCanvasSupported(t){this.optimizer.isOffscreenCanvasSupported=t}get length(){return this.argsArray.length}get ready(){return this._resolved||this._streamSink.ready}get totalLength(){return this._totalLength+this.length}addOp(t,e){this.optimizer.push(t,e),this.weight++,this._streamSink&&(this.weight>=l.CHUNK_SIZE||this.weight>=l.CHUNK_SIZE_ABOUT&&(t===i.OPS.restore||t===i.OPS.endText))&&this.flush()}addImageOps(t,e,n){void 0!==n&&this.addOp(i.OPS.beginMarkedContentProps,["OC",n]),this.addOp(t,e),void 0!==n&&this.addOp(i.OPS.endMarkedContent,[])}addDependency(t){this.dependencies.has(t)||(this.dependencies.add(t),this.addOp(i.OPS.dependency,[t]))}addDependencies(t){for(const e of t)this.addDependency(e)}addOpList(t){if(t instanceof l){for(const e of t.dependencies)this.dependencies.add(e);for(let e=0,n=t.length;e<n;e++)this.addOp(t.fnArray[e],t.argsArray[e])}else(0,i.warn)('addOpList - ignoring invalid "opList" parameter.')}getIR(){return{fnArray:this.fnArray,argsArray:this.argsArray,length:this.length}}get _transfers(){const t=[],{fnArray:e,argsArray:n,length:r}=this;for(let o=0;o<r;o++)switch(e[o]){case i.OPS.paintInlineImageXObject:case i.OPS.paintInlineImageXObjectGroup:case i.OPS.paintImageMaskXObject:const e=n[o][0];!e.cached&&e.data?.buffer instanceof ArrayBuffer&&t.push(e.data.buffer)}return t}flush(t=!1,e=null){this.optimizer.flush();const n=this.length;this._totalLength+=n,this._streamSink.enqueue({fnArray:this.fnArray,argsArray:this.argsArray,lastChunk:t,separateAnnots:e,length:n},1,this._transfers),this.dependencies.clear(),this.fnArray.length=0,this.argsArray.length=0,this.weight=0,this.optimizer.reset()}}e.OperatorList=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFImage=void 0;var i=n(2),r=n(28),o=n(5),s=n(12),a=n(18),l=n(62),c=n(26),h=n(30),u=n(4);function d(t,e,n,i){return(t=e+t*n)<0?t=0:t>i&&(t=i),t}function p(t,e,n,i,r,o){const s=r*o;let a;a=e<=8?new Uint8Array(s):e<=16?new Uint16Array(s):new Uint32Array(s);const l=n/r,c=i/o;let h,u,d,p,f=0;const g=new Uint16Array(r),m=n;for(h=0;h<r;h++)g[h]=Math.floor(h*l);for(h=0;h<o;h++)for(d=Math.floor(h*c)*m,u=0;u<r;u++)p=d+g[u],a[f++]=t[p];return a}class f{constructor({xref:t,res:e,image:n,isInline:r=!1,smask:a=null,mask:l=null,isMask:c=!1,pdfFunctionFactory:d,localColorSpaceCache:p}){this.image=n;const g=n.dict,m=g.get("F","Filter");let y;if(m instanceof u.Name)y=m.name;else if(Array.isArray(m)){const e=t.fetchIfRef(m[0]);e instanceof u.Name&&(y=e.name)}switch(y){case"JPXDecode":const t=new h.JpxImage;t.parseImageProperties(n.stream),n.stream.reset(),n.width=t.width,n.height=t.height,n.bitsPerComponent=t.bitsPerComponent,n.numComps=t.componentsCount;break;case"JBIG2Decode":n.bitsPerComponent=1,n.numComps=1}let v=g.get("W","Width"),b=g.get("H","Height");if(Number.isInteger(n.width)&&n.width>0&&Number.isInteger(n.height)&&n.height>0&&(n.width!==v||n.height!==b)&&((0,i.warn)("PDFImage - using the Width/Height of the image data, rather than the image dictionary."),v=n.width,b=n.height),v<1||b<1)throw new i.FormatError(`Invalid image width: ${v} or height: ${b}`);this.width=v,this.height=b,this.interpolate=g.get("I","Interpolate"),this.imageMask=g.get("IM","ImageMask")||!1,this.matte=g.get("Matte")||!1;let w=n.bitsPerComponent;if(!w&&(w=g.get("BPC","BitsPerComponent"),!w)){if(!this.imageMask)throw new i.FormatError(`Bits per component missing in image: ${this.imageMask}`);w=1}if(this.bpc=w,!this.imageMask){let o=g.getRaw("CS")||g.getRaw("ColorSpace");if(!o)switch((0,i.info)("JPX images (which do not require color spaces)"),n.numComps){case 1:o=u.Name.get("DeviceGray");break;case 3:o=u.Name.get("DeviceRGB");break;case 4:o=u.Name.get("DeviceCMYK");break;default:throw new Error(`JPX images with ${n.numComps} color components not supported.`)}this.colorSpace=s.ColorSpace.parse({cs:o,xref:t,resources:r?e:null,pdfFunctionFactory:d,localColorSpaceCache:p}),this.numComps=this.colorSpace.numComps}if(this.decode=g.getArray("D","Decode"),this.needsDecode=!1,this.decode&&(this.colorSpace&&!this.colorSpace.isDefaultDecode(this.decode,w)||c&&!s.ColorSpace.isDefaultDecode(this.decode,1))){this.needsDecode=!0;const t=(1<<w)-1;this.decodeCoefficients=[],this.decodeAddends=[];const e="Indexed"===this.colorSpace?.name;for(let n=0,i=0;n<this.decode.length;n+=2,++i){const r=this.decode[n],o=this.decode[n+1];this.decodeCoefficients[i]=e?(o-r)/t:o-r,this.decodeAddends[i]=e?r:t*r}}a?this.smask=new f({xref:t,res:e,image:a,isInline:r,pdfFunctionFactory:d,localColorSpaceCache:p}):l&&(l instanceof o.BaseStream?l.dict.get("IM","ImageMask")?this.mask=new f({xref:t,res:e,image:l,isInline:r,isMask:!0,pdfFunctionFactory:d,localColorSpaceCache:p}):(0,i.warn)("Ignoring /Mask in image without /ImageMask."):this.mask=l)}static async buildImage({xref:t,res:e,image:n,isInline:r=!1,pdfFunctionFactory:s,localColorSpaceCache:a}){const l=n;let c=null,h=null;const u=n.dict.get("SMask"),d=n.dict.get("Mask");return u?u instanceof o.BaseStream?c=u:(0,i.warn)("Unsupported /SMask format."):d&&(d instanceof o.BaseStream||Array.isArray(d)?h=d:(0,i.warn)("Unsupported /Mask format.")),new f({xref:t,res:e,image:l,isInline:r,smask:c,mask:h,pdfFunctionFactory:s,localColorSpaceCache:a})}static createRawMask({imgArray:t,width:e,height:n,imageIsFromDecodeStream:i,inverseDecode:r,interpolate:o}){const s=(e+7>>3)*n,a=t.byteLength;let l,c;if(!i||r&&s!==a?r?(l=new Uint8Array(s),l.set(t),l.fill(255,a)):l=new Uint8Array(t):l=t,r)for(c=0;c<a;c++)l[c]^=255;return{data:l,width:e,height:n,interpolate:o}}static async createMask({imgArray:t,width:e,height:n,imageIsFromDecodeStream:o,inverseDecode:s,interpolate:a,isOffscreenCanvasSupported:c=!1}){const h=1===e&&1===n&&s===(0===t.length||!!(128&t[0]));if(h)return{isSingleOpaquePixel:h};if(c){if(l.ImageResizer.needsToBeResized(e,n)){const o=new Uint8ClampedArray(e*n*4);return(0,r.convertBlackAndWhiteToRGBA)({src:t,dest:o,width:e,height:n,nonBlackColor:0,inverseDecode:s}),l.ImageResizer.createImage({kind:i.ImageKind.RGBA_32BPP,data:o,width:e,height:n,interpolate:a})}const o=new OffscreenCanvas(e,n),c=o.getContext("2d"),h=c.createImageData(e,n);return(0,r.convertBlackAndWhiteToRGBA)({src:t,dest:h.data,width:e,height:n,nonBlackColor:0,inverseDecode:s}),c.putImageData(h,0,0),{data:null,width:e,height:n,interpolate:a,bitmap:o.transferToImageBitmap()}}return this.createRawMask({imgArray:t,width:e,height:n,inverseDecode:s,imageIsFromDecodeStream:o,interpolate:a})}get drawWidth(){return Math.max(this.width,this.smask?.width||0,this.mask?.width||0)}get drawHeight(){return Math.max(this.height,this.smask?.height||0,this.mask?.height||0)}decodeBuffer(t){const e=this.bpc,n=this.numComps,i=this.decodeAddends,r=this.decodeCoefficients,o=(1<<e)-1;let s,a;if(1===e){for(s=0,a=t.length;s<a;s++)t[s]=+!t[s];return}let l=0;for(s=0,a=this.width*this.height;s<a;s++)for(let e=0;e<n;e++)t[l]=d(t[l],i[e],r[e],o),l++}getComponents(t){const e=this.bpc;if(8===e)return t;const n=this.width,i=this.height,r=this.numComps,o=n*i*r;let s,a=0;s=e<=8?new Uint8Array(o):e<=16?new Uint16Array(o):new Uint32Array(o);const l=n*r,c=(1<<e)-1;let h,u,d=0;if(1===e){let e,n,r;for(let o=0;o<i;o++){for(n=d+(-8&l),r=d+l;d<n;)u=t[a++],s[d]=u>>7&1,s[d+1]=u>>6&1,s[d+2]=u>>5&1,s[d+3]=u>>4&1,s[d+4]=u>>3&1,s[d+5]=u>>2&1,s[d+6]=u>>1&1,s[d+7]=1&u,d+=8;if(d<r)for(u=t[a++],e=128;d<r;)s[d++]=+!!(u&e),e>>=1}}else{let n=0;for(u=0,d=0,h=o;d<h;++d){for(d%l==0&&(u=0,n=0);n<e;)u=u<<8|t[a++],n+=8;const i=n-e;let r=u>>i;r<0?r=0:r>c&&(r=c),s[d]=r,u&=(1<<i)-1,n=i}}return s}fillOpacity(t,e,n,r,o){const s=this.smask,a=this.mask;let l,c,h,u,d,g;if(s)c=s.width,h=s.height,l=new Uint8ClampedArray(c*h),s.fillGrayBuffer(l),c===e&&h===n||(l=p(l,s.bpc,c,h,e,n));else if(a)if(a instanceof f){for(c=a.width,h=a.height,l=new Uint8ClampedArray(c*h),a.numComps=1,a.fillGrayBuffer(l),u=0,d=c*h;u<d;++u)l[u]=255-l[u];c===e&&h===n||(l=p(l,a.bpc,c,h,e,n))}else{if(!Array.isArray(a))throw new i.FormatError("Unknown mask format.");{l=new Uint8ClampedArray(e*n);const t=this.numComps;for(u=0,d=e*n;u<d;++u){let e=0;const n=u*t;for(g=0;g<t;++g){const t=o[n+g],i=2*g;if(t<a[i]||t>a[i+1]){e=255;break}}l[u]=e}}}if(l)for(u=0,g=3,d=e*r;u<d;++u,g+=4)t[g]=l[u];else for(u=0,g=3,d=e*r;u<d;++u,g+=4)t[g]=255}undoPreblend(t,e,n){const i=this.smask?.matte;if(!i)return;const r=this.colorSpace.getRgb(i,0),o=r[0],s=r[1],a=r[2],l=e*n*4;for(let e=0;e<l;e+=4){const n=t[e+3];if(0===n){t[e]=255,t[e+1]=255,t[e+2]=255;continue}const i=255/n;t[e]=(t[e]-o)*i+o,t[e+1]=(t[e+1]-s)*i+s,t[e+2]=(t[e+2]-a)*i+a}}async createImageData(t=!1,e=!1){const n=this.drawWidth,r=this.drawHeight,o={width:n,height:r,interpolate:this.interpolate,kind:0,data:null},s=this.numComps,a=this.width,h=this.height,u=this.bpc,d=a*s*u+7>>3,p=e&&l.ImageResizer.needsToBeResized(n,r);if(!t){let t;if("DeviceGray"===this.colorSpace.name&&1===u?t=i.ImageKind.GRAYSCALE_1BPP:"DeviceRGB"!==this.colorSpace.name||8!==u||this.needsDecode||(t=i.ImageKind.RGB_24BPP),t&&!this.smask&&!this.mask&&n===a&&r===h){const s=this.getImageBytes(h*d,{});if(e)return p?l.ImageResizer.createImage({data:s,kind:t,width:n,height:r,interpolate:this.interpolate},this.needsDecode):this.createBitmap(t,a,h,s);if(o.kind=t,o.data=s,this.needsDecode){(0,i.assert)(t===i.ImageKind.GRAYSCALE_1BPP,"PDFImage.createImageData: The image must be grayscale.");const e=o.data;for(let t=0,n=e.length;t<n;t++)e[t]^=255}return o}if(this.image instanceof c.JpegStream&&!this.smask&&!this.mask&&!this.needsDecode){let t=h*d;if(e&&!p){let e=!1;switch(this.colorSpace.name){case"DeviceGray":t*=4,e=!0;break;case"DeviceRGB":t=t/3*4,e=!0;break;case"DeviceCMYK":e=!0}if(e){const e=this.getImageBytes(t,{drawWidth:n,drawHeight:r,forceRGBA:!0});return this.createBitmap(i.ImageKind.RGBA_32BPP,n,r,e)}}else switch(this.colorSpace.name){case"DeviceGray":t*=3;case"DeviceRGB":case"DeviceCMYK":return o.kind=i.ImageKind.RGB_24BPP,o.data=this.getImageBytes(t,{drawWidth:n,drawHeight:r,forceRGB:!0}),p?l.ImageResizer.createImage(o):o}}}const f=this.getImageBytes(h*d,{internal:!0}),g=0|f.length/d*r/h,m=this.getComponents(f);let y,v,b,w,x,_;return e&&!p&&(b=new OffscreenCanvas(n,r),w=b.getContext("2d"),x=w.createImageData(n,r),_=x.data),o.kind=i.ImageKind.RGBA_32BPP,t||this.smask||this.mask?(e&&!p||(_=new Uint8ClampedArray(n*r*4)),y=1,v=!0,this.fillOpacity(_,n,r,g,m)):(!e||p?(o.kind=i.ImageKind.RGB_24BPP,_=new Uint8ClampedArray(n*r*3),y=0):(new Uint32Array(_.buffer).fill(i.FeatureTest.isLittleEndian?4278190080:255),y=1),v=!1),this.needsDecode&&this.decodeBuffer(m),this.colorSpace.fillRgb(_,a,h,n,r,g,u,m,y),v&&this.undoPreblend(_,n,g),e&&!p?(w.putImageData(x,0,0),{data:null,width:n,height:r,bitmap:b.transferToImageBitmap(),interpolate:this.interpolate}):(o.data=_,p?l.ImageResizer.createImage(o):o)}fillGrayBuffer(t){const e=this.numComps;if(1!==e)throw new i.FormatError(`Reading gray scale from a color image: ${e}`);const n=this.width,r=this.height,o=this.bpc,s=n*e*o+7>>3,a=this.getImageBytes(r*s,{internal:!0}),l=this.getComponents(a);let c,h;if(1===o){if(h=n*r,this.needsDecode)for(c=0;c<h;++c)t[c]=l[c]-1&255;else for(c=0;c<h;++c)t[c]=255&-l[c];return}this.needsDecode&&this.decodeBuffer(l),h=n*r;const u=255/((1<<o)-1);for(c=0;c<h;++c)t[c]=u*l[c]}createBitmap(t,e,n,o){const s=new OffscreenCanvas(e,n),a=s.getContext("2d");let l;return t===i.ImageKind.RGBA_32BPP?l=new ImageData(o,e,n):(l=a.createImageData(e,n),(0,r.convertToRGBA)({kind:t,src:o,dest:new Uint32Array(l.data.buffer),width:e,height:n,inverseDecode:this.needsDecode})),a.putImageData(l,0,0),{data:null,width:e,height:n,bitmap:s.transferToImageBitmap(),interpolate:this.interpolate}}getImageBytes(t,{drawWidth:e,drawHeight:n,forceRGBA:r=!1,forceRGB:o=!1,internal:s=!1}){this.image.reset(),this.image.drawWidth=e||this.width,this.image.drawHeight=n||this.height,this.image.forceRGBA=!!r,this.image.forceRGB=!!o;const l=this.image.getBytes(t);return s||this.image instanceof a.DecodeStream?l:((0,i.assert)(l instanceof Uint8Array,'PDFImage.getImageBytes: Unsupported "imageBytes" type.'),new Uint8Array(l))}}e.PDFImage=f},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Catalog=void 0;var i=n(3),r=n(2),o=n(4),s=n(67),a=n(5),l=n(68),c=n(12),h=n(69),u=n(59),d=n(70),p=n(72);function f(t){return t instanceof o.Dict&&(t=t.get("D")),Array.isArray(t)?t:null}class g{constructor(t,e){if(this.pdfManager=t,this.xref=e,this._catDict=e.getCatalogObj(),!(this._catDict instanceof o.Dict))throw new r.FormatError("Catalog object is not a dictionary.");this.toplevelPagesDict,this._actualNumPages=null,this.fontCache=new o.RefSetCache,this.builtInCMapCache=new Map,this.standardFontDataCache=new Map,this.globalImageCache=new u.GlobalImageCache,this.pageKidsCountCache=new o.RefSetCache,this.pageIndexCache=new o.RefSetCache,this.nonBlendModesSet=new o.RefSet,this.systemFontCache=new Map}cloneDict(){return this._catDict.clone()}get version(){const t=this._catDict.get("Version");if(t instanceof o.Name){if(i.PDF_VERSION_REGEXP.test(t.name))return(0,r.shadow)(this,"version",t.name);(0,r.warn)(`Invalid PDF catalog version: ${t.name}`)}return(0,r.shadow)(this,"version",null)}get lang(){const t=this._catDict.get("Lang");return(0,r.shadow)(this,"lang","string"==typeof t?(0,r.stringToPDFString)(t):null)}get needsRendering(){const t=this._catDict.get("NeedsRendering");return(0,r.shadow)(this,"needsRendering","boolean"==typeof t&&t)}get collection(){let t=null;try{const e=this._catDict.get("Collection");e instanceof o.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.info)("Cannot fetch Collection entry; assuming no collection is present.")}return(0,r.shadow)(this,"collection",t)}get acroForm(){let t=null;try{const e=this._catDict.get("AcroForm");e instanceof o.Dict&&e.size>0&&(t=e)}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.info)("Cannot fetch AcroForm entry; assuming no forms are present.")}return(0,r.shadow)(this,"acroForm",t)}get acroFormRef(){const t=this._catDict.getRaw("AcroForm");return(0,r.shadow)(this,"acroFormRef",t instanceof o.Ref?t:null)}get metadata(){const t=this._catDict.getRaw("Metadata");if(!(t instanceof o.Ref))return(0,r.shadow)(this,"metadata",null);let e=null;try{const n=this.xref.fetch(t,!this.xref.encrypt?.encryptMetadata);if(n instanceof a.BaseStream&&n.dict instanceof o.Dict){const t=n.dict.get("Type"),i=n.dict.get("Subtype");if((0,o.isName)(t,"Metadata")&&(0,o.isName)(i,"XML")){const t=(0,r.stringToUTF8String)(n.getString());t&&(e=new d.MetadataParser(t).serializable)}}}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.info)(`Skipping invalid Metadata: "${t}".`)}return(0,r.shadow)(this,"metadata",e)}get markInfo(){let t=null;try{t=this._readMarkInfo()}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)("Unable to read mark info.")}return(0,r.shadow)(this,"markInfo",t)}_readMarkInfo(){const t=this._catDict.get("MarkInfo");if(!(t instanceof o.Dict))return null;const e={Marked:!1,UserProperties:!1,Suspects:!1};for(const n in e){const i=t.get(n);"boolean"==typeof i&&(e[n]=i)}return e}get structTreeRoot(){let t=null;try{t=this._readStructTreeRoot()}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)("Unable read to structTreeRoot info.")}return(0,r.shadow)(this,"structTreeRoot",t)}_readStructTreeRoot(){const t=this._catDict.getRaw("StructTreeRoot"),e=this.xref.fetchIfRef(t);if(!(e instanceof o.Dict))return null;const n=new p.StructTreeRoot(e,t);return n.init(),n}get toplevelPagesDict(){const t=this._catDict.get("Pages");if(!(t instanceof o.Dict))throw new r.FormatError("Invalid top-level pages dictionary.");return(0,r.shadow)(this,"toplevelPagesDict",t)}get documentOutline(){let t=null;try{t=this._readDocumentOutline()}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)("Unable to read document outline.")}return(0,r.shadow)(this,"documentOutline",t)}_readDocumentOutline(){let t=this._catDict.get("Outlines");if(!(t instanceof o.Dict))return null;if(t=t.getRaw("First"),!(t instanceof o.Ref))return null;const e={items:[]},n=[{obj:t,parent:e}],i=new o.RefSet;i.put(t);const s=this.xref,a=new Uint8ClampedArray(3);for(;n.length>0;){const e=n.shift(),l=s.fetchIfRef(e.obj);if(null===l)continue;if(!l.has("Title"))throw new r.FormatError("Invalid outline item encountered.");const h={url:null,dest:null,action:null};g.parseDestDictionary({destDict:l,resultObj:h,docBaseUrl:this.baseUrl,docAttachments:this.attachments});const u=l.get("Title"),d=l.get("F")||0,p=l.getArray("C"),f=l.get("Count");let m=a;!Array.isArray(p)||3!==p.length||0===p[0]&&0===p[1]&&0===p[2]||(m=c.ColorSpace.singletons.rgb.getRgb(p,0));const y={action:h.action,attachment:h.attachment,dest:h.dest,url:h.url,unsafeUrl:h.unsafeUrl,newWindow:h.newWindow,setOCGState:h.setOCGState,title:(0,r.stringToPDFString)(u),color:m,count:Number.isInteger(f)?f:void 0,bold:!!(2&d),italic:!!(1&d),items:[]};e.parent.items.push(y),t=l.getRaw("First"),t instanceof o.Ref&&!i.has(t)&&(n.push({obj:t,parent:y}),i.put(t)),t=l.getRaw("Next"),t instanceof o.Ref&&!i.has(t)&&(n.push({obj:t,parent:e.parent}),i.put(t))}return e.items.length>0?e.items:null}get permissions(){let t=null;try{t=this._readPermissions()}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)("Unable to read permissions.")}return(0,r.shadow)(this,"permissions",t)}_readPermissions(){const t=this.xref.trailer.get("Encrypt");if(!(t instanceof o.Dict))return null;let e=t.get("P");if("number"!=typeof e)return null;e+=2**32;const n=[];for(const t in r.PermissionFlag){const i=r.PermissionFlag[t];e&i&&n.push(i)}return n}get optionalContentConfig(){let t=null;try{const e=this._catDict.get("OCProperties");if(!e)return(0,r.shadow)(this,"optionalContentConfig",null);const n=e.get("D");if(!n)return(0,r.shadow)(this,"optionalContentConfig",null);const i=e.get("OCGs");if(!Array.isArray(i))return(0,r.shadow)(this,"optionalContentConfig",null);const s=[],a=[];for(const t of i){if(!(t instanceof o.Ref))continue;a.push(t);const e=this.xref.fetchIfRef(t);s.push({id:t.toString(),name:"string"==typeof e.get("Name")?(0,r.stringToPDFString)(e.get("Name")):null,intent:"string"==typeof e.get("Intent")?(0,r.stringToPDFString)(e.get("Intent")):null})}t=this._readOptionalContentConfig(n,a),t.groups=s}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)(`Unable to read optional content config: ${t}`)}return(0,r.shadow)(this,"optionalContentConfig",t)}_readOptionalContentConfig(t,e){function n(t){const n=[];if(Array.isArray(t))for(const i of t)i instanceof o.Ref&&e.includes(i)&&n.push(i.toString());return n}function i(t,n=0){if(!Array.isArray(t))return null;const i=[];for(const r of t){if(r instanceof o.Ref&&e.includes(r)){l.put(r),i.push(r.toString());continue}const t=s(r,n);t&&i.push(t)}if(n>0)return i;const r=[];for(const t of e)l.has(t)||r.push(t.toString());return r.length&&i.push({name:null,order:r}),i}function s(t,e){if(++e>c)return(0,r.warn)("parseNestedOrder - reached MAX_NESTED_LEVELS."),null;const n=a.fetchIfRef(t);if(!Array.isArray(n))return null;const o=a.fetchIfRef(n[0]);if("string"!=typeof o)return null;const s=i(n.slice(1),e);return s&&s.length?{name:(0,r.stringToPDFString)(o),order:s}:null}const a=this.xref,l=new o.RefSet,c=10;return{name:"string"==typeof t.get("Name")?(0,r.stringToPDFString)(t.get("Name")):null,creator:"string"==typeof t.get("Creator")?(0,r.stringToPDFString)(t.get("Creator")):null,baseState:t.get("BaseState")instanceof o.Name?t.get("BaseState").name:null,on:n(t.get("ON")),off:n(t.get("OFF")),order:i(t.get("Order")),groups:null}}setActualNumPages(t=null){this._actualNumPages=t}get hasActualNumPages(){return null!==this._actualNumPages}get _pagesCount(){const t=this.toplevelPagesDict.get("Count");if(!Number.isInteger(t))throw new r.FormatError("Page count in top-level pages dictionary is not an integer.");return(0,r.shadow)(this,"_pagesCount",t)}get numPages(){return this.hasActualNumPages?this._actualNumPages:this._pagesCount}get destinations(){const t=this._readDests(),e=Object.create(null);if(t instanceof s.NameTree)for(const[n,i]of t.getAll()){const t=f(i);t&&(e[(0,r.stringToPDFString)(n)]=t)}else t instanceof o.Dict&&t.forEach((function(t,n){const i=f(n);i&&(e[t]=i)}));return(0,r.shadow)(this,"destinations",e)}getDestination(t){const e=this._readDests();if(e instanceof s.NameTree){const n=f(e.get(t));if(n)return n;const i=this.destinations[t];if(i)return(0,r.warn)(`Found "${t}" at an incorrect position in the NameTree.`),i}else if(e instanceof o.Dict){const n=f(e.get(t));if(n)return n}return null}_readDests(){const t=this._catDict.get("Names");return t?.has("Dests")?new s.NameTree(t.getRaw("Dests"),this.xref):this._catDict.has("Dests")?this._catDict.get("Dests"):void 0}get pageLabels(){let t=null;try{t=this._readPageLabels()}catch(t){if(t instanceof i.MissingDataException)throw t;(0,r.warn)("Unable to read page labels.")}return(0,r.shadow)(this,"pageLabels",t)}_readPageLabels(){const t=this._catDict.getRaw("PageLabels");if(!t)return null;const e=new Array(this.numPages);let n=null,a="";const l=new s.NumberTree(t,this.xref).getAll();let c="",h=1;for(let t=0,s=this.numPages;t<s;t++){const s=l.get(t);if(void 0!==s){if(!(s instanceof o.Dict))throw new r.FormatError("PageLabel is not a dictionary.");if(s.has("Type")&&!(0,o.isName)(s.get("Type"),"PageLabel"))throw new r.FormatError("Invalid type in PageLabel dictionary.");if(s.has("S")){const t=s.get("S");if(!(t instanceof o.Name))throw new r.FormatError("Invalid style in PageLabel dictionary.");n=t.name}else n=null;if(s.has("P")){const t=s.get("P");if("string"!=typeof t)throw new r.FormatError("Invalid prefix in PageLabel dictionary.");a=(0,r.stringToPDFString)(t)}else a="";if(s.has("St")){const t=s.get("St");if(!(Number.isInteger(t)&&t>=1))throw new r.FormatError("Invalid start in PageLabel dictionary.");h=t}else h=1}switch(n){case"D":c=h;break;case"R":case"r":c=(0,i.toRomanNumerals)(h,"r"===n);break;case"A":case"a":const t=26,e="a"===n?97:65,o=h-1;c=String.fromCharCode(e+o%t).repeat(Math.floor(o/t)+1);break;default:if(n)throw new r.FormatError(`Invalid style "${n}" in PageLabel dictionary.`);c=""}e[t]=a+c,h++}return e}get pageLayout(){const t=this._catDict.get("PageLayout");let e="";if(t instanceof o.Name)switch(t.name){case"SinglePage":case"OneColumn":case"TwoColumnLeft":case"TwoColumnRight":case"TwoPageLeft":case"TwoPageRight":e=t.name}return(0,r.shadow)(this,"pageLayout",e)}get pageMode(){const t=this._catDict.get("PageMode");let e="UseNone";if(t instanceof o.Name)switch(t.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"FullScreen":case"UseOC":case"UseAttachments":e=t.name}return(0,r.shadow)(this,"pageMode",e)}get viewerPreferences(){const t=this._catDict.get("ViewerPreferences");if(!(t instanceof o.Dict))return(0,r.shadow)(this,"viewerPreferences",null);let e=null;for(const n of t.getKeys()){const i=t.get(n);let s;switch(n){case"HideToolbar":case"HideMenubar":case"HideWindowUI":case"FitWindow":case"CenterWindow":case"DisplayDocTitle":case"PickTrayByPDFSize":"boolean"==typeof i&&(s=i);break;case"NonFullScreenPageMode":if(i instanceof o.Name)switch(i.name){case"UseNone":case"UseOutlines":case"UseThumbs":case"UseOC":s=i.name;break;default:s="UseNone"}break;case"Direction":if(i instanceof o.Name)switch(i.name){case"L2R":case"R2L":s=i.name;break;default:s="L2R"}break;case"ViewArea":case"ViewClip":case"PrintArea":case"PrintClip":if(i instanceof o.Name)switch(i.name){case"MediaBox":case"CropBox":case"BleedBox":case"TrimBox":case"ArtBox":s=i.name;break;default:s="CropBox"}break;case"PrintScaling":if(i instanceof o.Name)switch(i.name){case"None":case"AppDefault":s=i.name;break;default:s="AppDefault"}break;case"Duplex":if(i instanceof o.Name)switch(i.name){case"Simplex":case"DuplexFlipShortEdge":case"DuplexFlipLongEdge":s=i.name;break;default:s="None"}break;case"PrintPageRange":Array.isArray(i)&&i.length%2==0&&i.every(((t,e,n)=>Number.isInteger(t)&&t>0&&(0===e||t>=n[e-1])&&t<=this.numPages))&&(s=i);break;case"NumCopies":Number.isInteger(i)&&i>0&&(s=i);break;default:(0,r.warn)(`Ignoring non-standard key in ViewerPreferences: ${n}.`);continue}void 0!==s?(e||(e=Object.create(null)),e[n]=s):(0,r.warn)(`Bad value, for key "${n}", in ViewerPreferences: ${i}.`)}return(0,r.shadow)(this,"viewerPreferences",e)}get openAction(){const t=this._catDict.get("OpenAction"),e=Object.create(null);if(t instanceof o.Dict){const n=new o.Dict(this.xref);n.set("A",t);const i={url:null,dest:null,action:null};g.parseDestDictionary({destDict:n,resultObj:i}),Array.isArray(i.dest)?e.dest=i.dest:i.action&&(e.action=i.action)}else Array.isArray(t)&&(e.dest=t);return(0,r.shadow)(this,"openAction",(0,r.objectSize)(e)>0?e:null)}get attachments(){const t=this._catDict.get("Names");let e=null;if(t instanceof o.Dict&&t.has("EmbeddedFiles")){const n=new s.NameTree(t.getRaw("EmbeddedFiles"),this.xref);for(const[t,i]of n.getAll()){const n=new h.FileSpec(i,this.xref);e||(e=Object.create(null)),e[(0,r.stringToPDFString)(t)]=n.serializable}}return(0,r.shadow)(this,"attachments",e)}get xfaImages(){const t=this._catDict.get("Names");let e=null;if(t instanceof o.Dict&&t.has("XFAImages")){const n=new s.NameTree(t.getRaw("XFAImages"),this.xref);for(const[t,i]of n.getAll())e||(e=new o.Dict(this.xref)),e.set((0,r.stringToPDFString)(t),i)}return(0,r.shadow)(this,"xfaImages",e)}_collectJavaScript(){const t=this._catDict.get("Names");let e=null;function n(t,n){if(!(n instanceof o.Dict))return;if(!(0,o.isName)(n.get("S"),"JavaScript"))return;let i=n.get("JS");if(i instanceof a.BaseStream)i=i.getString();else if("string"!=typeof i)return;i=(0,r.stringToPDFString)(i).replaceAll("\0",""),i&&(e||=new Map).set(t,i)}if(t instanceof o.Dict&&t.has("JavaScript")){const e=new s.NameTree(t.getRaw("JavaScript"),this.xref);for(const[t,i]of e.getAll())n((0,r.stringToPDFString)(t),i)}const i=this._catDict.get("OpenAction");return i&&n("OpenAction",i),e}get jsActions(){const t=this._collectJavaScript();let e=(0,i.collectActions)(this.xref,this._catDict,r.DocumentActionEventType);if(t){e||=Object.create(null);for(const[n,i]of t)n in e?e[n].push(i):e[n]=[i]}return(0,r.shadow)(this,"jsActions",e)}async fontFallback(t,e){const n=await Promise.all(this.fontCache);for(const i of n)if(i.loadedName===t)return void i.fallback(e)}async cleanup(t=!1){(0,l.clearGlobalCaches)(),this.globalImageCache.clear(t),this.pageKidsCountCache.clear(),this.pageIndexCache.clear(),this.nonBlendModesSet.clear();const e=await Promise.all(this.fontCache);for(const{dict:t}of e)delete t.cacheKey;this.fontCache.clear(),this.builtInCMapCache.clear(),this.standardFontDataCache.clear(),this.systemFontCache.clear()}async getPageDict(t){const e=[this.toplevelPagesDict],n=new o.RefSet,i=this._catDict.getRaw("Pages");i instanceof o.Ref&&n.put(i);const s=this.xref,a=this.pageKidsCountCache,l=this.pageIndexCache;let c=0;for(;e.length;){const i=e.pop();if(i instanceof o.Ref){const h=a.get(i);if(h>=0&&c+h<=t){c+=h;continue}if(n.has(i))throw new r.FormatError("Pages tree contains circular reference.");n.put(i);const u=await s.fetchAsync(i);if(u instanceof o.Dict){let e=u.getRaw("Type");if(e instanceof o.Ref&&(e=await s.fetchAsync(e)),(0,o.isName)(e,"Page")||!u.has("Kids")){if(a.has(i)||a.put(i,1),l.has(i)||l.put(i,c),c===t)return[u,i];c++;continue}}e.push(u);continue}if(!(i instanceof o.Dict))throw new r.FormatError("Page dictionary kid reference points to wrong type of object.");const{objId:h}=i;let u=i.getRaw("Count");if(u instanceof o.Ref&&(u=await s.fetchAsync(u)),Number.isInteger(u)&&u>=0&&(h&&!a.has(h)&&a.put(h,u),c+u<=t)){c+=u;continue}let d=i.getRaw("Kids");if(d instanceof o.Ref&&(d=await s.fetchAsync(d)),!Array.isArray(d)){let e=i.getRaw("Type");if(e instanceof o.Ref&&(e=await s.fetchAsync(e)),(0,o.isName)(e,"Page")||!i.has("Kids")){if(c===t)return[i,null];c++;continue}throw new r.FormatError("Page dictionary kids object is not an array.")}for(let t=d.length-1;t>=0;t--)e.push(d[t])}throw new Error(`Page index ${t} not found.`)}async getAllPageDicts(t=!1){const{ignoreErrors:e}=this.pdfManager.evaluatorOptions,n=[{currentNode:this.toplevelPagesDict,posInKids:0}],s=new o.RefSet,a=this._catDict.getRaw("Pages");a instanceof o.Ref&&s.put(a);const l=new Map,c=this.xref,h=this.pageIndexCache;let u=0;function d(n){if(n instanceof i.XRefEntryException&&!t)throw n;t&&e&&0===u&&((0,r.warn)(`getAllPageDicts - Skipping invalid first page: "${n}".`),n=o.Dict.empty),l.set(u++,[n,null])}for(;n.length>0;){const t=n.at(-1),{currentNode:e,posInKids:i}=t;let a=e.getRaw("Kids");if(a instanceof o.Ref)try{a=await c.fetchAsync(a)}catch(t){d(t);break}if(!Array.isArray(a)){d(new r.FormatError("Page dictionary kids object is not an array."));break}if(i>=a.length){n.pop();continue}const g=a[i];let m;if(g instanceof o.Ref){if(s.has(g)){d(new r.FormatError("Pages tree contains circular reference."));break}s.put(g);try{m=await c.fetchAsync(g)}catch(t){d(t);break}}else m=g;if(!(m instanceof o.Dict)){d(new r.FormatError("Page dictionary kid reference points to wrong type of object."));break}let y=m.getRaw("Type");if(y instanceof o.Ref)try{y=await c.fetchAsync(y)}catch(t){d(t);break}(0,o.isName)(y,"Page")||!m.has("Kids")?(p=m,(f=g instanceof o.Ref?g:null)&&!h.has(f)&&h.put(f,u),l.set(u++,[p,f])):n.push({currentNode:m,posInKids:0}),t.posInKids++}var p,f;return l}getPageIndex(t){const e=this.pageIndexCache.get(t);if(void 0!==e)return Promise.resolve(e);const n=this.xref;let i=0;const s=e=>function(e){let i,s=0;return n.fetchAsync(e).then((function(n){if((0,o.isRefsEqual)(e,t)&&!(0,o.isDict)(n,"Page")&&!(n instanceof o.Dict&&!n.has("Type")&&n.has("Contents")))throw new r.FormatError("The reference does not point to a /Page dictionary.");if(!n)return null;if(!(n instanceof o.Dict))throw new r.FormatError("Node must be a dictionary.");return i=n.getRaw("Parent"),n.getAsync("Parent")})).then((function(t){if(!t)return null;if(!(t instanceof o.Dict))throw new r.FormatError("Parent must be a dictionary.");return t.getAsync("Kids")})).then((function(t){if(!t)return null;const a=[];let l=!1;for(const i of t){if(!(i instanceof o.Ref))throw new r.FormatError("Kid must be a reference.");if((0,o.isRefsEqual)(i,e)){l=!0;break}a.push(n.fetchAsync(i).then((function(t){if(!(t instanceof o.Dict))throw new r.FormatError("Kid node must be a dictionary.");t.has("Count")?s+=t.get("Count"):s++})))}if(!l)throw new r.FormatError("Kid reference not found in parent's kids.");return Promise.all(a).then((function(){return[s,i]}))}))}(e).then((e=>{if(!e)return this.pageIndexCache.put(t,i),i;const[n,r]=e;return i+=n,s(r)}));return s(t)}get baseUrl(){const t=this._catDict.get("URI");if(t instanceof o.Dict){const e=t.get("Base");if("string"==typeof e){const t=(0,r.createValidAbsoluteUrl)(e,null,{tryConvertEncoding:!0});if(t)return(0,r.shadow)(this,"baseUrl",t.href)}}return(0,r.shadow)(this,"baseUrl",this.pdfManager.docBaseUrl)}static parseDestDictionary({destDict:t,resultObj:e,docBaseUrl:n=null,docAttachments:s=null}){if(!(t instanceof o.Dict))return void(0,r.warn)("parseDestDictionary: `destDict` must be a dictionary.");let l,c,h=t.get("A");if(h instanceof o.Dict||(t.has("Dest")?h=t.get("Dest"):(h=t.get("AA"),h instanceof o.Dict&&(h.has("D")?h=h.get("D"):h.has("U")&&(h=h.get("U"))))),h instanceof o.Dict){const t=h.get("S");if(!(t instanceof o.Name))return void(0,r.warn)("parseDestDictionary: Invalid type in Action dictionary.");const n=t.name;switch(n){case"ResetForm":const t=h.get("Flags"),u=0==(1&("number"==typeof t?t:0)),d=[],p=[];for(const t of h.get("Fields")||[])t instanceof o.Ref?p.push(t.toString()):"string"==typeof t&&d.push((0,r.stringToPDFString)(t));e.resetForm={fields:d,refs:p,include:u};break;case"URI":l=h.get("URI"),l instanceof o.Name&&(l="/"+l.name);break;case"GoTo":c=h.get("D");break;case"Launch":case"GoToR":const f=h.get("F");f instanceof o.Dict?l=f.get("F")||null:"string"==typeof f&&(l=f);let g=h.get("D");if(g&&(g instanceof o.Name&&(g=g.name),"string"==typeof l)){const t=l.split("#")[0];"string"==typeof g?l=t+"#"+g:Array.isArray(g)&&(l=t+"#"+JSON.stringify(g))}const m=h.get("NewWindow");"boolean"==typeof m&&(e.newWindow=m);break;case"GoToE":const y=h.get("T");let v;if(s&&y instanceof o.Dict){const t=y.get("R"),e=y.get("N");(0,o.isName)(t,"C")&&"string"==typeof e&&(v=s[(0,r.stringToPDFString)(e)])}v?e.attachment=v:(0,r.warn)('parseDestDictionary - unimplemented "GoToE" action.');break;case"Named":const b=h.get("N");b instanceof o.Name&&(e.action=b.name);break;case"SetOCGState":const w=h.get("State"),x=h.get("PreserveRB");if(!Array.isArray(w)||0===w.length)break;const _=[];for(const t of w)if(t instanceof o.Name)switch(t.name){case"ON":case"OFF":case"Toggle":_.push(t.name)}else t instanceof o.Ref&&_.push(t.toString());if(_.length!==w.length)break;e.setOCGState={state:_,preserveRB:"boolean"!=typeof x||x};break;case"JavaScript":const S=h.get("JS");let C;S instanceof a.BaseStream?C=S.getString():"string"==typeof S&&(C=S);const k=C&&(0,i.recoverJsURL)((0,r.stringToPDFString)(C));if(k){l=k.url,e.newWindow=k.newWindow;break}default:if("JavaScript"===n||"SubmitForm"===n)break;(0,r.warn)(`parseDestDictionary - unsupported action: "${n}".`)}}else t.has("Dest")&&(c=t.get("Dest"));if("string"==typeof l){const t=(0,r.createValidAbsoluteUrl)(l,n,{addDefaultProtocol:!0,tryConvertEncoding:!0});t&&(e.url=t.href),e.unsafeUrl=l}c&&(c instanceof o.Name&&(c=c.name),"string"==typeof c?e.dest=(0,r.stringToPDFString)(c):Array.isArray(c)&&(e.dest=c))}}e.Catalog=g},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NumberTree=e.NameTree=void 0;var i=n(4),r=n(2);class o{constructor(t,e,n){this.constructor===o&&(0,r.unreachable)("Cannot initialize NameOrNumberTree."),this.root=t,this.xref=e,this._type=n}getAll(){const t=new Map;if(!this.root)return t;const e=this.xref,n=new i.RefSet;n.put(this.root);const o=[this.root];for(;o.length>0;){const s=e.fetchIfRef(o.shift());if(!(s instanceof i.Dict))continue;if(s.has("Kids")){const t=s.get("Kids");if(!Array.isArray(t))continue;for(const e of t){if(n.has(e))throw new r.FormatError(`Duplicate entry in "${this._type}" tree.`);o.push(e),n.put(e)}continue}const a=s.get(this._type);if(Array.isArray(a))for(let n=0,i=a.length;n<i;n+=2)t.set(e.fetchIfRef(a[n]),e.fetchIfRef(a[n+1]))}return t}get(t){if(!this.root)return null;const e=this.xref;let n=e.fetchIfRef(this.root),i=0;for(;n.has("Kids");){if(++i>10)return(0,r.warn)(`Search depth limit reached for "${this._type}" tree.`),null;const o=n.get("Kids");if(!Array.isArray(o))return null;let s=0,a=o.length-1;for(;s<=a;){const i=s+a>>1,r=e.fetchIfRef(o[i]),l=r.get("Limits");if(t<e.fetchIfRef(l[0]))a=i-1;else{if(!(t>e.fetchIfRef(l[1]))){n=r;break}s=i+1}}if(s>a)return null}const o=n.get(this._type);if(Array.isArray(o)){let n=0,i=o.length-2;for(;n<=i;){const r=n+i>>1,s=r+(1&r),a=e.fetchIfRef(o[s]);if(t<a)i=s-2;else{if(!(t>a))return e.fetchIfRef(o[s+1]);n=s+2}}}return null}}e.NameTree=class extends o{constructor(t,e){super(t,e,"Names")}},e.NumberTree=class extends o{constructor(t,e){super(t,e,"Nums")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.clearGlobalCaches=function(){(0,i.clearPatternCaches)(),(0,r.clearPrimitiveCaches)(),(0,o.clearUnicodeCaches)()};var i=n(50),r=n(4),o=n(40)},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FileSpec=void 0;var i=n(2),r=n(5),o=n(4);function s(t){return t.has("UF")?t.get("UF"):t.has("F")?t.get("F"):t.has("Unix")?t.get("Unix"):t.has("Mac")?t.get("Mac"):t.has("DOS")?t.get("DOS"):null}e.FileSpec=class{constructor(t,e){t instanceof o.Dict&&(this.xref=e,this.root=t,t.has("FS")&&(this.fs=t.get("FS")),this.description=t.has("Desc")?(0,i.stringToPDFString)(t.get("Desc")):"",t.has("RF")&&(0,i.warn)("Related file specifications are not supported"),this.contentAvailable=!0,t.has("EF")||(this.contentAvailable=!1,(0,i.warn)("Non-embedded file specifications are not supported")))}get filename(){if(!this._filename&&this.root){const t=s(this.root)||"unnamed";this._filename=(0,i.stringToPDFString)(t).replaceAll("\\\\","\\").replaceAll("\\/","/").replaceAll("\\","/")}return this._filename}get content(){if(!this.contentAvailable)return null;!this.contentRef&&this.root&&(this.contentRef=s(this.root.get("EF")));let t=null;if(this.contentRef){const e=this.xref.fetchIfRef(this.contentRef);e instanceof r.BaseStream?t=e.getBytes():(0,i.warn)("Embedded file specification points to non-existing/invalid content")}else(0,i.warn)("Embedded file specification does not have a content");return t}get serializable(){return{filename:this.filename,content:this.content}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MetadataParser=void 0;var i=n(71);e.MetadataParser=class{constructor(t){t=this._repair(t);const e=new i.SimpleXMLParser({lowerCaseName:!0}).parseFromString(t);this._metadataMap=new Map,this._data=t,e&&this._parse(e)}_repair(t){return t.replace(/^[^<]+/,"").replaceAll(/>\\376\\377([^<]+)/g,(function(t,e){const n=e.replaceAll(/\\([0-3])([0-7])([0-7])/g,(function(t,e,n,i){return String.fromCharCode(64*e+8*n+1*i)})).replaceAll(/&(amp|apos|gt|lt|quot);/g,(function(t,e){switch(e){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${e} isn't defined.`)})),i=[">"];for(let t=0,e=n.length;t<e;t+=2){const e=256*n.charCodeAt(t)+n.charCodeAt(t+1);e>=32&&e<127&&60!==e&&62!==e&&38!==e?i.push(String.fromCharCode(e)):i.push("&#x"+(65536+e).toString(16).substring(1)+";")}return i.join("")}))}_getSequence(t){const e=t.nodeName;return"rdf:bag"!==e&&"rdf:seq"!==e&&"rdf:alt"!==e?null:t.childNodes.filter((t=>"rdf:li"===t.nodeName))}_parseArray(t){if(!t.hasChildNodes())return;const[e]=t.childNodes,n=this._getSequence(e)||[];this._metadataMap.set(t.nodeName,n.map((t=>t.textContent.trim())))}_parse(t){let e=t.documentElement;if("rdf:rdf"!==e.nodeName)for(e=e.firstChild;e&&"rdf:rdf"!==e.nodeName;)e=e.nextSibling;if(e&&"rdf:rdf"===e.nodeName&&e.hasChildNodes())for(const t of e.childNodes)if("rdf:description"===t.nodeName)for(const e of t.childNodes){const t=e.nodeName;switch(t){case"#text":continue;case"dc:creator":case"dc:subject":this._parseArray(e);continue}this._metadataMap.set(t,e.textContent.trim())}}get serializable(){return{parsedData:this._metadataMap,rawData:this._data}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XMLParserErrorCode=e.XMLParserBase=e.SimpleXMLParser=e.SimpleDOMNode=void 0;var i=n(3);const r={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function o(t,e){const n=t[e];return" "===n||"\n"===n||"\r"===n||"\t"===n}e.XMLParserErrorCode=r;class s{_resolveEntities(t){return t.replaceAll(/&([^;]+);/g,((t,e)=>{if("#x"===e.substring(0,2))return String.fromCodePoint(parseInt(e.substring(2),16));if("#"===e.substring(0,1))return String.fromCodePoint(parseInt(e.substring(1),10));switch(e){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"';case"apos":return"'"}return this.onResolveEntity(e)}))}_parseContent(t,e){const n=[];let i=e;function r(){for(;i<t.length&&o(t,i);)++i}for(;i<t.length&&!o(t,i)&&">"!==t[i]&&"/"!==t[i];)++i;const s=t.substring(e,i);for(r();i<t.length&&">"!==t[i]&&"/"!==t[i]&&"?"!==t[i];){r();let e="",s="";for(;i<t.length&&!o(t,i)&&"="!==t[i];)e+=t[i],++i;if(r(),"="!==t[i])return null;++i,r();const a=t[i];if('"'!==a&&"'"!==a)return null;const l=t.indexOf(a,++i);if(l<0)return null;s=t.substring(i,l),n.push({name:e,value:this._resolveEntities(s)}),i=l+1,r()}return{name:s,attributes:n,parsed:i-e}}_parseProcessingInstruction(t,e){let n=e;for(;n<t.length&&!o(t,n)&&">"!==t[n]&&"?"!==t[n]&&"/"!==t[n];)++n;const i=t.substring(e,n);!function(){for(;n<t.length&&o(t,n);)++n}();const r=n;for(;n<t.length&&("?"!==t[n]||">"!==t[n+1]);)++n;return{name:i,value:t.substring(r,n),parsed:n-e}}parseXml(t){let e=0;for(;e<t.length;){let n=e;if("<"===t[e]){let e;switch(++n,t[n]){case"/":if(++n,e=t.indexOf(">",n),e<0)return void this.onError(r.UnterminatedElement);this.onEndElement(t.substring(n,e)),n=e+1;break;case"?":++n;const i=this._parseProcessingInstruction(t,n);if("?>"!==t.substring(n+i.parsed,n+i.parsed+2))return void this.onError(r.UnterminatedXmlDeclaration);this.onPi(i.name,i.value),n+=i.parsed+2;break;case"!":if("--"===t.substring(n+1,n+3)){if(e=t.indexOf("--\x3e",n+3),e<0)return void this.onError(r.UnterminatedComment);this.onComment(t.substring(n+3,e)),n=e+3}else if("[CDATA["===t.substring(n+1,n+8)){if(e=t.indexOf("]]>",n+8),e<0)return void this.onError(r.UnterminatedCdat);this.onCdata(t.substring(n+8,e)),n=e+3}else{if("DOCTYPE"!==t.substring(n+1,n+8))return void this.onError(r.MalformedElement);{const i=t.indexOf("[",n+8);let o=!1;if(e=t.indexOf(">",n+8),e<0)return void this.onError(r.UnterminatedDoctypeDeclaration);if(i>0&&e>i){if(e=t.indexOf("]>",n+8),e<0)return void this.onError(r.UnterminatedDoctypeDeclaration);o=!0}const s=t.substring(n+8,e+(o?1:0));this.onDoctype(s),n=e+(o?2:1)}}break;default:const o=this._parseContent(t,n);if(null===o)return void this.onError(r.MalformedElement);let s=!1;if("/>"===t.substring(n+o.parsed,n+o.parsed+2))s=!0;else if(">"!==t.substring(n+o.parsed,n+o.parsed+1))return void this.onError(r.UnterminatedElement);this.onBeginElement(o.name,o.attributes,s),n+=o.parsed+(s?2:1)}}else{for(;n<t.length&&"<"!==t[n];)n++;const i=t.substring(e,n);this.onText(this._resolveEntities(i))}e=n}}onResolveEntity(t){return`&${t};`}onPi(t,e){}onComment(t){}onCdata(t){}onDoctype(t){}onText(t){}onBeginElement(t,e,n){}onEndElement(t){}onError(t){}}e.XMLParserBase=s;class a{constructor(t,e){this.nodeName=t,this.nodeValue=e,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes?.[0]}get nextSibling(){const t=this.parentNode.childNodes;if(!t)return;const e=t.indexOf(this);return-1!==e?t[e+1]:void 0}get textContent(){return this.childNodes?this.childNodes.map((function(t){return t.textContent})).join(""):this.nodeValue||""}get children(){return this.childNodes||[]}hasChildNodes(){return this.childNodes?.length>0}searchNode(t,e){if(e>=t.length)return this;const n=t[e];if(n.name.startsWith("#")&&e<t.length-1)return this.searchNode(t,e+1);const i=[];let r=this;for(;;){if(n.name===r.nodeName){if(0!==n.pos){if(0===i.length)return null;{const[o]=i.pop();let s=0;for(const i of o.childNodes)if(n.name===i.nodeName){if(s===n.pos)return i.searchNode(t,e+1);s++}return r.searchNode(t,e+1)}}{const n=r.searchNode(t,e+1);if(null!==n)return n}}if(r.childNodes?.length>0)i.push([r,0]),r=r.childNodes[0];else{if(0===i.length)return null;for(;0!==i.length;){const[t,e]=i.pop(),n=e+1;if(n<t.childNodes.length){i.push([t,n]),r=t.childNodes[n];break}}if(0===i.length)return null}}}dump(t){if("#text"!==this.nodeName){if(t.push(`<${this.nodeName}`),this.attributes)for(const e of this.attributes)t.push(` ${e.name}="${(0,i.encodeToXmlString)(e.value)}"`);if(this.hasChildNodes()){t.push(">");for(const e of this.childNodes)e.dump(t);t.push(`</${this.nodeName}>`)}else this.nodeValue?t.push(`>${(0,i.encodeToXmlString)(this.nodeValue)}</${this.nodeName}>`):t.push("/>")}else t.push((0,i.encodeToXmlString)(this.nodeValue))}}e.SimpleDOMNode=a,e.SimpleXMLParser=class extends s{constructor({hasAttributes:t=!1,lowerCaseName:e=!1}){super(),this._currentFragment=null,this._stack=null,this._errorCode=r.NoError,this._hasAttributes=t,this._lowerCaseName=e}parseFromString(t){if(this._currentFragment=[],this._stack=[],this._errorCode=r.NoError,this.parseXml(t),this._errorCode!==r.NoError)return;const[e]=this._currentFragment;return e?{documentElement:e}:void 0}onText(t){if(function(t){for(let e=0,n=t.length;e<n;e++)if(!o(t,e))return!1;return!0}(t))return;const e=new a("#text",t);this._currentFragment.push(e)}onCdata(t){const e=new a("#text",t);this._currentFragment.push(e)}onBeginElement(t,e,n){this._lowerCaseName&&(t=t.toLowerCase());const i=new a(t);i.childNodes=[],this._hasAttributes&&(i.attributes=e),this._currentFragment.push(i),n||(this._stack.push(this._currentFragment),this._currentFragment=i.childNodes)}onEndElement(t){this._currentFragment=this._stack.pop()||[];const e=this._currentFragment.at(-1);if(!e)return null;for(const t of e.childNodes)t.parentNode=e;return e}onError(t){this._errorCode=t}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StructTreeRoot=e.StructTreePage=void 0;var i=n(2),r=n(4),o=n(67),s=n(73);const a=1,l=2,c=3,h=4,u=5;class d{constructor(t,e){this.dict=t,this.ref=e instanceof r.Ref?e:null,this.roleMap=new Map,this.structParentIds=null}init(){this.readRoleMap()}#tr(t,e,n){if(!(t instanceof r.Ref)||e<0)return;this.structParentIds||=new r.RefSetCache;let i=this.structParentIds.get(t);i||(i=[],this.structParentIds.put(t,i)),i.push([e,n])}addAnnotationIdToPage(t,e){this.#tr(t,e,h)}readRoleMap(){const t=this.dict.get("RoleMap");t instanceof r.Dict&&t.forEach(((t,e)=>{e instanceof r.Name&&this.roleMap.set(t,e.name)}))}static async canCreateStructureTree({catalogRef:t,pdfManager:e,newAnnotationsByPage:n}){if(!(t instanceof r.Ref))return(0,i.warn)("Cannot save the struct tree: no catalog reference."),!1;let o=0,s=!0;for(const[t,a]of n){const{ref:n}=await e.getPage(t);if(!(n instanceof r.Ref)){(0,i.warn)(`Cannot save the struct tree: page ${t} has no ref.`),s=!0;break}for(const t of a)t.accessibilityData?.type&&(t.parentTreeId=o++,s=!1)}if(s){for(const t of n.values())for(const e of t)delete e.parentTreeId;return!1}return!0}static async createStructureTree({newAnnotationsByPage:t,xref:e,catalogRef:n,pdfManager:i,newRefs:o}){const a=i.catalog.cloneDict(),l=e.getNewTemporaryRef();a.set("StructTreeRoot",l);const c=[];await(0,s.writeObject)(n,a,c,e),o.push({ref:n,data:c.join("")});const h=new r.Dict(e);h.set("Type",r.Name.get("StructTreeRoot"));const u=e.getNewTemporaryRef();h.set("ParentTree",u);const d=[];h.set("K",d);const p=new r.Dict(e),f=[];p.set("Nums",f);const g=await this.#er({newAnnotationsByPage:t,structTreeRootRef:l,kids:d,nums:f,xref:e,pdfManager:i,newRefs:o,buffer:c});h.set("ParentTreeNextKey",g),c.length=0,await(0,s.writeObject)(u,p,c,e),o.push({ref:u,data:c.join("")}),c.length=0,await(0,s.writeObject)(l,h,c,e),o.push({ref:l,data:c.join("")})}async canUpdateStructTree({pdfManager:t,newAnnotationsByPage:e}){if(!this.ref)return(0,i.warn)("Cannot update the struct tree: no root reference."),!1;let n=this.dict.get("ParentTreeNextKey");if(!Number.isInteger(n)||n<0)return(0,i.warn)("Cannot update the struct tree: invalid next key."),!1;const o=this.dict.get("ParentTree");if(!(o instanceof r.Dict))return(0,i.warn)("Cannot update the struct tree: ParentTree isn't a dict."),!1;const s=o.get("Nums");if(!Array.isArray(s))return(0,i.warn)("Cannot update the struct tree: nums isn't an array."),!1;const{numPages:a}=t.catalog;for(const n of e.keys()){const{pageDict:e,ref:o}=await t.getPage(n);if(!(o instanceof r.Ref))return(0,i.warn)(`Cannot save the struct tree: page ${n} has no ref.`),!1;const s=e.get("StructParents");if(!Number.isInteger(s)||s<0||s>=a)return(0,i.warn)(`Cannot save the struct tree: page ${n} has no id.`),!1}let l=!0;for(const[i,r]of e){const{pageDict:e}=await t.getPage(i);d.#nr({elements:r,xref:this.dict.xref,pageDict:e,parentTree:o});for(const t of r)t.accessibilityData?.type&&(t.parentTreeId=n++,l=!1)}if(l){for(const t of e.values())for(const e of t)delete e.parentTreeId,delete e.structTreeParent;return!1}return!0}async updateStructureTree({newAnnotationsByPage:t,pdfManager:e,newRefs:n}){const i=this.dict.xref,o=this.dict.clone(),a=this.ref;let l,c=o.getRaw("ParentTree");c instanceof r.Ref?l=i.fetch(c):(l=c,c=i.getNewTemporaryRef(),o.set("ParentTree",c)),l=l.clone();let h=l.getRaw("Nums"),u=null;h instanceof r.Ref&&(u=h,h=i.fetch(u)),h=h.slice(),u||l.set("Nums",h);let p=o.getRaw("K"),f=null;p instanceof r.Ref?(f=p,p=i.fetch(f)):(f=i.getNewTemporaryRef(),o.set("K",f)),p=Array.isArray(p)?p.slice():[p];const g=[],m=await d.#er({newAnnotationsByPage:t,structTreeRootRef:a,kids:p,nums:h,xref:i,pdfManager:e,newRefs:n,buffer:g});o.set("ParentTreeNextKey",m),g.length=0,await(0,s.writeObject)(f,p,g,i),n.push({ref:f,data:g.join("")}),u&&(g.length=0,await(0,s.writeObject)(u,h,g,i),n.push({ref:u,data:g.join("")})),g.length=0,await(0,s.writeObject)(c,l,g,i),n.push({ref:c,data:g.join("")}),g.length=0,await(0,s.writeObject)(a,o,g,i),n.push({ref:a,data:g.join("")})}static async#er({newAnnotationsByPage:t,structTreeRootRef:e,kids:n,nums:i,xref:o,pdfManager:a,newRefs:l,buffer:c}){const h=r.Name.get("OBJR");let u=-1/0;for(const[d,p]of t){const{ref:t}=await a.getPage(d);for(const{accessibilityData:{type:a,title:d,lang:f,alt:g,expanded:m,actualText:y},ref:v,parentTreeId:b,structTreeParent:w}of p){u=Math.max(u,b);const p=o.getNewTemporaryRef(),x=new r.Dict(o);x.set("S",r.Name.get(a)),d&&x.set("T",d),f&&x.set("Lang",f),g&&x.set("Alt",g),m&&x.set("E",m),y&&x.set("ActualText",y),w?await this.#ir({structTreeParent:w,tagDict:x,newTagRef:p,fallbackRef:e,xref:o,newRefs:l,buffer:c}):x.set("P",e);const _=new r.Dict(o);x.set("K",_),_.set("Type",h),_.set("Pg",t),_.set("Obj",v),c.length=0,await(0,s.writeObject)(p,x,c,o),l.push({ref:p,data:c.join("")}),i.push(b,p),n.push(p)}}return u+1}static#nr({elements:t,xref:e,pageDict:n,parentTree:i}){const s=new Map;for(const e of t)if(e.structTreeParentId){const t=parseInt(e.structTreeParentId.split("_mc")[1],10);s.set(t,e)}const a=n.get("StructParents"),l=new o.NumberTree(i,e).get(a);if(!Array.isArray(l))return;const c=(t,n,i)=>{const o=s.get(t);if(o){const t=n.getRaw("P"),s=e.fetchIfRef(t);return t instanceof r.Ref&&s instanceof r.Dict&&(o.structTreeParent={ref:i,dict:n}),!0}return!1};for(const t of l){if(!(t instanceof r.Ref))continue;const n=e.fetch(t),i=n.get("K");if(Number.isInteger(i))c(i,n,t);else if(Array.isArray(i))for(let r of i)if(r=e.fetchIfRef(r),Number.isInteger(r)&&c(r,n,t))break}}static async#ir({structTreeParent:{ref:t,dict:e},tagDict:n,newTagRef:o,fallbackRef:a,xref:l,newRefs:c,buffer:h}){const u=e.getRaw("P");let d=l.fetchIfRef(u);n.set("P",u);let p,f=!1,g=d.getRaw("K");if(g instanceof r.Ref?p=l.fetch(g):(p=g,g=l.getNewTemporaryRef(),d=d.clone(),d.set("K",g),f=!0),Array.isArray(p)){const e=p.indexOf(t);if(!(e>=0))return(0,i.warn)("Cannot update the struct tree: parent kid not found."),void n.set("P",a);p=p.slice(),p.splice(e+1,0,o)}else p instanceof r.Dict&&(p=[g,o],g=l.getNewTemporaryRef(),d.set("K",g),f=!0);h.length=0,await(0,s.writeObject)(g,p,h,l),c.push({ref:g,data:h.join("")}),f&&(h.length=0,await(0,s.writeObject)(u,d,h,l),c.push({ref:u,data:h.join("")}))}}e.StructTreeRoot=d;class p{constructor(t,e){this.tree=t,this.dict=e,this.kids=[],this.parseKids()}get role(){const t=this.dict.get("S"),e=t instanceof r.Name?t.name:"",{root:n}=this.tree;return n.roleMap.has(e)?n.roleMap.get(e):e}parseKids(){let t=null;const e=this.dict.getRaw("Pg");e instanceof r.Ref&&(t=e.toString());const n=this.dict.get("K");if(Array.isArray(n))for(const e of n){const n=this.parseKid(t,e);n&&this.kids.push(n)}else{const e=this.parseKid(t,n);e&&this.kids.push(e)}}parseKid(t,e){if(Number.isInteger(e))return this.tree.pageDict.objId!==t?null:new f({type:a,mcid:e,pageObjId:t});let n=null;if(e instanceof r.Ref?n=this.dict.xref.fetch(e):e instanceof r.Dict&&(n=e),!n)return null;const i=n.getRaw("Pg");i instanceof r.Ref&&(t=i.toString());const o=n.get("Type")instanceof r.Name?n.get("Type").name:null;if("MCR"===o){if(this.tree.pageDict.objId!==t)return null;const e=n.getRaw("Stm");return new f({type:l,refObjId:e instanceof r.Ref?e.toString():null,pageObjId:t,mcid:n.get("MCID")})}if("OBJR"===o){if(this.tree.pageDict.objId!==t)return null;const e=n.getRaw("Obj");return new f({type:c,refObjId:e instanceof r.Ref?e.toString():null,pageObjId:t})}return new f({type:u,dict:n})}}class f{constructor({type:t,dict:e=null,mcid:n=null,pageObjId:i=null,refObjId:r=null}){this.type=t,this.dict=e,this.mcid=n,this.pageObjId=i,this.refObjId=r,this.parentNode=null}}e.StructTreePage=class{constructor(t,e){this.root=t,this.rootDict=t?t.dict:null,this.pageDict=e,this.nodes=[]}parse(t){if(!this.root||!this.rootDict)return;const e=this.rootDict.get("ParentTree");if(!e)return;const n=this.pageDict.get("StructParents"),i=t instanceof r.Ref&&this.root.structParentIds?.get(t);if(!Number.isInteger(n)&&!i)return;const s=new Map,a=new o.NumberTree(e,this.rootDict.xref);if(Number.isInteger(n)){const t=a.get(n);if(Array.isArray(t))for(const e of t)e instanceof r.Ref&&this.addNode(this.rootDict.xref.fetch(e),s)}if(i)for(const[t,e]of i){const n=a.get(t);if(n){const t=this.addNode(this.rootDict.xref.fetchIfRef(n),s);1===t?.kids?.length&&t.kids[0].type===c&&(t.kids[0].type=e)}}}addNode(t,e,n=0){if(n>40)return(0,i.warn)("StructTree MAX_DEPTH reached."),null;if(e.has(t))return e.get(t);const o=new p(this,t);e.set(t,o);const s=t.get("P");if(!s||(0,r.isName)(s.get("Type"),"StructTreeRoot"))return this.addTopLevelNode(t,o)||e.delete(t),o;const a=this.addNode(s,e,n+1);if(!a)return o;let l=!1;for(const e of a.kids)e.type===u&&e.dict===t&&(e.parentNode=o,l=!0);return l||e.delete(t),o}addTopLevelNode(t,e){const n=this.rootDict.get("K");if(!n)return!1;if(n instanceof r.Dict)return n.objId===t.objId&&(this.nodes[0]=e,!0);if(!Array.isArray(n))return!0;let i=!1;for(let r=0;r<n.length;r++){const o=n[r];o?.toString()===t.objId&&(this.nodes[r]=e,i=!0)}return i}get serializable(){function t(e,n,r=0){if(r>40)return void(0,i.warn)("StructTree too deep to be fully serialized.");const o=Object.create(null);o.role=e.role,o.children=[],n.children.push(o);const s=e.dict.get("Alt");"string"==typeof s&&(o.alt=(0,i.stringToPDFString)(s));const d=e.dict.get("Lang");"string"==typeof d&&(o.lang=(0,i.stringToPDFString)(d));for(const n of e.kids){const e=n.type===u?n.parentNode:null;e?t(e,o,r+1):n.type===a||n.type===l?o.children.push({type:"content",id:`p${n.pageObjId}_mc${n.mcid}`}):n.type===c?o.children.push({type:"object",id:n.refObjId}):n.type===h&&o.children.push({type:"annotation",id:`${i.AnnotationPrefix}${n.refObjId}`})}}const e=Object.create(null);e.children=[],e.role="Root";for(const n of this.nodes)n&&t(n,e);return e}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.incrementalUpdate=async function({originalData:t,xrefInfo:e,newRefs:n,xref:a=null,hasXfa:u=!1,xfaDatasetsRef:d=null,hasXfaDatasetsEntry:p=!1,needAppearances:m,acroFormRef:y=null,acroForm:v=null,xfaData:b=null}){await async function({xref:t,acroForm:e,acroFormRef:n,hasXfa:r,hasXfaDatasetsEntry:o,xfaDatasetsRef:s,needAppearances:a,newRefs:l}){if(!r||o||s||(0,i.warn)("XFA - Cannot save it"),!a&&(!r||!s||o))return;const h=e.clone();if(r&&!o){const t=e.get("XFA").slice();t.splice(2,0,"datasets"),t.splice(3,0,s),h.set("XFA",t)}a&&h.set("NeedAppearances",!0);const u=[];await c(n,h,u,t),l.push({ref:n,data:u.join("")})}({xref:a,acroForm:v,acroFormRef:y,hasXfa:u,hasXfaDatasetsEntry:p,xfaDatasetsRef:d,needAppearances:m,newRefs:n}),u&&function({xfaData:t,xfaDatasetsRef:e,newRefs:n,xref:r}){null===t&&(t=function(t,e){const n=new s.SimpleXMLParser({hasAttributes:!0}).parseFromString(t);for(const{xfa:t}of e){if(!t)continue;const{path:e,value:r}=t;if(!e)continue;const a=(0,o.parseXFAPath)(e);let l=n.documentElement.searchNode(a,0);!l&&a.length>1&&(l=n.documentElement.searchNode([a.at(-1)],0)),l?l.childNodes=Array.isArray(r)?r.map((t=>new s.SimpleDOMNode("value",t))):[new s.SimpleDOMNode("#text",r)]:(0,i.warn)(`Node not found for path: ${e}`)}const r=[];return n.documentElement.dump(r),r.join("")}(r.fetchIfRef(e).getString(),n));const a=r.encrypt;a&&(t=a.createCipherTransform(e.num,e.gen).encryptString(t));const l=`${e.num} ${e.gen} obj\n<< /Type /EmbeddedFile /Length ${t.length}>>\nstream\n`+t+"\nendstream\nendobj\n";n.push({ref:e,data:l})}({xfaData:b,xfaDatasetsRef:d,newRefs:n,xref:a});const w=new r.Dict(null),x=e.newRef;let _,S;const C=t.at(-1);10===C||13===C?(_=[],S=t.length):(_=["\n"],S=t.length+1),w.set("Size",x.num+1),w.set("Prev",e.startXRef),w.set("Type",r.Name.get("XRef")),null!==e.rootRef&&w.set("Root",e.rootRef),null!==e.infoRef&&w.set("Info",e.infoRef),null!==e.encryptRef&&w.set("Encrypt",e.encryptRef),n.push({ref:x,data:""}),n=n.sort(((t,e)=>t.ref.num-e.ref.num));const k=[[0,1,65535]],A=[0,1];let E=0;for(const{ref:t,data:e}of n)E=Math.max(E,S),k.push([1,S,Math.min(t.gen,65535)]),S+=e.length,A.push(t.num,1),_.push(e);if(w.set("Index",A),Array.isArray(e.fileIds)&&e.fileIds.length>0){const t=function(t,e){const n=Math.floor(Date.now()/1e3),r=e.filename||"",o=[n.toString(),r,t.toString()];let s=o.reduce(((t,e)=>t+e.length),0);for(const t of Object.values(e.info))o.push(t),s+=t.length;const a=new Uint8Array(s);let c=0;for(const t of o)g(t,c,a),c+=t.length;return(0,i.bytesToString)((0,l.calculateMD5)(a))}(S,e);w.set("ID",[e.fileIds[0],t])}const T=[1,Math.ceil(Math.log2(E)/8),2],M=(T[0]+T[1]+T[2])*k.length;w.set("W",T),w.set("Length",M),_.push(`${x.num} ${x.gen} obj\n`),await h(w,_,null),_.push(" stream\n");const O=_.reduce(((t,e)=>t+e.length),0),I=`\nendstream\nendobj\nstartxref\n${S}\n%%EOF\n`,D=new Uint8Array(t.length+O+M+I.length);D.set(t);let F=t.length;for(const t of _)g(t,F,D),F+=t.length;for(const[t,e,n]of k)F=f(t,T[0],F,D),F=f(e,T[1],F,D),F=f(n,T[2],F,D);return g(I,F,D),D},e.writeDict=h,e.writeObject=c;var i=n(2),r=n(4),o=n(3),s=n(71),a=n(5),l=n(74);async function c(t,e,n,{encrypt:i=null}){const o=i?.createCipherTransform(t.num,t.gen);n.push(`${t.num} ${t.gen} obj\n`),e instanceof r.Dict?await h(e,n,o):e instanceof a.BaseStream?await u(e,n,o):Array.isArray(e)&&await d(e,n,o),n.push("\nendobj\n")}async function h(t,e,n){e.push("<<");for(const i of t.getKeys())e.push(` /${(0,o.escapePDFName)(i)} `),await p(t.getRaw(i),e,n);e.push(">>")}async function u(t,e,n){let o=t.getString();const{dict:s}=t,[a,l]=await Promise.all([s.getAsync("Filter"),s.getAsync("DecodeParms")]),c=Array.isArray(a)?await s.xref.fetchIfRefAsync(a[0]):a,u=(0,r.isName)(c,"FlateDecode");if("undefined"!=typeof CompressionStream&&(o.length>=256||u))try{const t=(0,i.stringToBytes)(o),e=new CompressionStream("deflate"),n=e.writable.getWriter();n.write(t),n.close();const c=await new Response(e.readable).arrayBuffer();let h,d;o=(0,i.bytesToString)(new Uint8Array(c)),a?u||(h=Array.isArray(a)?[r.Name.get("FlateDecode"),...a]:[r.Name.get("FlateDecode"),a],l&&(d=Array.isArray(l)?[null,...l]:[null,l])):h=r.Name.get("FlateDecode"),h&&s.set("Filter",h),d&&s.set("DecodeParms",d)}catch(t){(0,i.info)(`writeStream - cannot compress data: "${t}".`)}n&&(o=n.encryptString(o)),s.set("Length",o.length),await h(s,e,n),e.push(" stream\n",o,"\nendstream")}async function d(t,e,n){e.push("[");let i=!0;for(const r of t)i?i=!1:e.push(" "),await p(r,e,n);e.push("]")}async function p(t,e,n){t instanceof r.Name?e.push(`/${(0,o.escapePDFName)(t.name)}`):t instanceof r.Ref?e.push(`${t.num} ${t.gen} R`):Array.isArray(t)?await d(t,e,n):"string"==typeof t?(n&&(t=n.encryptString(t)),e.push(`(${(0,o.escapeString)(t)})`)):"number"==typeof t?e.push((0,o.numberToString)(t)):"boolean"==typeof t?e.push(t.toString()):t instanceof r.Dict?await h(t,e,n):t instanceof a.BaseStream?await u(t,e,n):null===t?e.push("null"):(0,i.warn)(`Unhandled value in writer: ${typeof t}, please file a bug.`)}function f(t,e,n,i){for(let r=e+n-1;r>n-1;r--)i[r]=255&t,t>>=8;return n+e}function g(t,e,n){for(let i=0,r=t.length;i<r;i++)n[e+i]=255&t.charCodeAt(i)}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.calculateSHA256=e.calculateMD5=e.PDF20=e.PDF17=e.CipherTransformFactory=e.ARCFourCipher=e.AES256Cipher=e.AES128Cipher=void 0,e.calculateSHA384=u,e.calculateSHA512=void 0;var i=n(2),r=n(4),o=n(75);class s{constructor(t){this.a=0,this.b=0;const e=new Uint8Array(256),n=t.length;for(let t=0;t<256;++t)e[t]=t;for(let i=0,r=0;i<256;++i){const o=e[i];r=r+o+t[i%n]&255,e[i]=e[r],e[r]=o}this.s=e}encryptBlock(t){let e=this.a,n=this.b;const i=this.s,r=t.length,o=new Uint8Array(r);for(let s=0;s<r;++s){e=e+1&255;const r=i[e];n=n+r&255;const a=i[n];i[e]=a,i[n]=r,o[s]=t[s]^i[r+a&255]}return this.a=e,this.b=n,o}decryptBlock(t){return this.encryptBlock(t)}encrypt(t){return this.encryptBlock(t)}}e.ARCFourCipher=s;const a=function(){const t=new Uint8Array([7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21]),e=new Int32Array([-680876936,-389564586,606105819,-1044525330,-176418897,1200080426,-1473231341,-45705983,1770035416,-1958414417,-42063,-1990404162,1804603682,-40341101,-1502002290,1236535329,-165796510,-1069501632,643717713,-373897302,-701558691,38016083,-660478335,-405537848,568446438,-1019803690,-187363961,1163531501,-1444681467,-51403784,1735328473,-1926607734,-378558,-2022574463,1839030562,-35309556,-1530992060,1272893353,-155497632,-1094730640,681279174,-358537222,-722521979,76029189,-640364487,-421815835,530742520,-995338651,-198630844,1126891415,-1416354905,-57434055,1700485571,-1894986606,-1051523,-2054922799,1873313359,-30611744,-1560198380,1309151649,-145523070,-1120210379,718787259,-343485551]);return function(n,i,r){let o=1732584193,s=-271733879,a=-1732584194,l=271733878;const c=r+72&-64,h=new Uint8Array(c);let u,d;for(u=0;u<r;++u)h[u]=n[i++];h[u++]=128;const p=c-8;for(;u<p;)h[u++]=0;h[u++]=r<<3&255,h[u++]=r>>5&255,h[u++]=r>>13&255,h[u++]=r>>21&255,h[u++]=r>>>29&255,h[u++]=0,h[u++]=0,h[u++]=0;const f=new Int32Array(16);for(u=0;u<c;){for(d=0;d<16;++d,u+=4)f[d]=h[u]|h[u+1]<<8|h[u+2]<<16|h[u+3]<<24;let n,i,r=o,c=s,p=a,g=l;for(d=0;d<64;++d){d<16?(n=c&p|~c&g,i=d):d<32?(n=g&c|~g&p,i=5*d+1&15):d<48?(n=c^p^g,i=3*d+5&15):(n=p^(c|~g),i=7*d&15);const o=g,s=r+n+e[d]+f[i]|0,a=t[d];g=p,p=c,c=c+(s<<a|s>>>32-a)|0,r=o}o=o+r|0,s=s+c|0,a=a+p|0,l=l+g|0}return new Uint8Array([255&o,o>>8&255,o>>16&255,o>>>24&255,255&s,s>>8&255,s>>16&255,s>>>24&255,255&a,a>>8&255,a>>16&255,a>>>24&255,255&l,l>>8&255,l>>16&255,l>>>24&255])}}();e.calculateMD5=a;class l{constructor(t,e){this.high=0|t,this.low=0|e}and(t){this.high&=t.high,this.low&=t.low}xor(t){this.high^=t.high,this.low^=t.low}or(t){this.high|=t.high,this.low|=t.low}shiftRight(t){t>=32?(this.low=this.high>>>t-32|0,this.high=0):(this.low=this.low>>>t|this.high<<32-t,this.high=this.high>>>t|0)}shiftLeft(t){t>=32?(this.high=this.low<<t-32,this.low=0):(this.high=this.high<<t|this.low>>>32-t,this.low<<=t)}rotateRight(t){let e,n;32&t?(n=this.low,e=this.high):(e=this.low,n=this.high),t&=31,this.low=e>>>t|n<<32-t,this.high=n>>>t|e<<32-t}not(){this.high=~this.high,this.low=~this.low}add(t){const e=(this.low>>>0)+(t.low>>>0);let n=(this.high>>>0)+(t.high>>>0);e>4294967295&&(n+=1),this.low=0|e,this.high=0|n}copyTo(t,e){t[e]=this.high>>>24&255,t[e+1]=this.high>>16&255,t[e+2]=this.high>>8&255,t[e+3]=255&this.high,t[e+4]=this.low>>>24&255,t[e+5]=this.low>>16&255,t[e+6]=this.low>>8&255,t[e+7]=255&this.low}assign(t){this.high=t.high,this.low=t.low}}const c=function(){function t(t,e){return t>>>e|t<<32-e}function e(t,e,n){return t&e^~t&n}function n(t,e,n){return t&e^t&n^e&n}function i(e){return t(e,2)^t(e,13)^t(e,22)}function r(e){return t(e,6)^t(e,11)^t(e,25)}function o(e){return t(e,7)^t(e,18)^e>>>3}const s=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];return function(a,l,c){let h=1779033703,u=3144134277,d=1013904242,p=2773480762,f=1359893119,g=2600822924,m=528734635,y=1541459225;const v=64*Math.ceil((c+9)/64),b=new Uint8Array(v);let w,x;for(w=0;w<c;++w)b[w]=a[l++];b[w++]=128;const _=v-8;for(;w<_;)b[w++]=0;b[w++]=0,b[w++]=0,b[w++]=0,b[w++]=c>>>29&255,b[w++]=c>>21&255,b[w++]=c>>13&255,b[w++]=c>>5&255,b[w++]=c<<3&255;const S=new Uint32Array(64);for(w=0;w<v;){for(x=0;x<16;++x)S[x]=b[w]<<24|b[w+1]<<16|b[w+2]<<8|b[w+3],w+=4;for(x=16;x<64;++x)S[x]=0|(t(C=S[x-2],17)^t(C,19)^C>>>10)+S[x-7]+o(S[x-15])+S[x-16];let a,l,c=h,v=u,_=d,k=p,A=f,E=g,T=m,M=y;for(x=0;x<64;++x)a=M+r(A)+e(A,E,T)+s[x]+S[x],l=i(c)+n(c,v,_),M=T,T=E,E=A,A=k+a|0,k=_,_=v,v=c,c=a+l|0;h=h+c|0,u=u+v|0,d=d+_|0,p=p+k|0,f=f+A|0,g=g+E|0,m=m+T|0,y=y+M|0}var C;return new Uint8Array([h>>24&255,h>>16&255,h>>8&255,255&h,u>>24&255,u>>16&255,u>>8&255,255&u,d>>24&255,d>>16&255,d>>8&255,255&d,p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,g>>24&255,g>>16&255,g>>8&255,255&g,m>>24&255,m>>16&255,m>>8&255,255&m,y>>24&255,y>>16&255,y>>8&255,255&y])}}();e.calculateSHA256=c;const h=function(){function t(t,e,n,i,r){t.assign(e),t.and(n),r.assign(e),r.not(),r.and(i),t.xor(r)}function e(t,e,n,i,r){t.assign(e),t.and(n),r.assign(e),r.and(i),t.xor(r),r.assign(n),r.and(i),t.xor(r)}function n(t,e,n){t.assign(e),t.rotateRight(28),n.assign(e),n.rotateRight(34),t.xor(n),n.assign(e),n.rotateRight(39),t.xor(n)}function i(t,e,n){t.assign(e),t.rotateRight(14),n.assign(e),n.rotateRight(18),t.xor(n),n.assign(e),n.rotateRight(41),t.xor(n)}function r(t,e,n){t.assign(e),t.rotateRight(1),n.assign(e),n.rotateRight(8),t.xor(n),n.assign(e),n.shiftRight(7),t.xor(n)}function o(t,e,n){t.assign(e),t.rotateRight(19),n.assign(e),n.rotateRight(61),t.xor(n),n.assign(e),n.shiftRight(6),t.xor(n)}const s=[new l(1116352408,3609767458),new l(1899447441,602891725),new l(3049323471,3964484399),new l(3921009573,2173295548),new l(961987163,4081628472),new l(1508970993,3053834265),new l(2453635748,2937671579),new l(2870763221,3664609560),new l(3624381080,2734883394),new l(310598401,1164996542),new l(607225278,1323610764),new l(1426881987,3590304994),new l(1925078388,4068182383),new l(2162078206,991336113),new l(2614888103,633803317),new l(3248222580,3479774868),new l(3835390401,2666613458),new l(4022224774,944711139),new l(264347078,2341262773),new l(604807628,2007800933),new l(770255983,1495990901),new l(1249150122,1856431235),new l(1555081692,3175218132),new l(1996064986,2198950837),new l(2554220882,3999719339),new l(2821834349,766784016),new l(2952996808,2566594879),new l(3210313671,3203337956),new l(3336571891,1034457026),new l(3584528711,2466948901),new l(113926993,3758326383),new l(338241895,168717936),new l(666307205,1188179964),new l(773529912,1546045734),new l(1294757372,1522805485),new l(1396182291,2643833823),new l(1695183700,2343527390),new l(1986661051,1014477480),new l(2177026350,1206759142),new l(2456956037,344077627),new l(2730485921,1290863460),new l(2820302411,3158454273),new l(3259730800,3505952657),new l(3345764771,106217008),new l(3516065817,3606008344),new l(3600352804,1432725776),new l(4094571909,1467031594),new l(275423344,851169720),new l(430227734,3100823752),new l(506948616,1363258195),new l(659060556,3750685593),new l(883997877,3785050280),new l(958139571,3318307427),new l(1322822218,3812723403),new l(1537002063,2003034995),new l(1747873779,3602036899),new l(1955562222,1575990012),new l(2024104815,1125592928),new l(2227730452,2716904306),new l(2361852424,442776044),new l(2428436474,593698344),new l(2756734187,3733110249),new l(3204031479,2999351573),new l(3329325298,3815920427),new l(3391569614,3928383900),new l(3515267271,566280711),new l(3940187606,3454069534),new l(4118630271,4000239992),new l(116418474,1914138554),new l(174292421,2731055270),new l(289380356,3203993006),new l(460393269,320620315),new l(685471733,587496836),new l(852142971,1086792851),new l(1017036298,365543100),new l(1126000580,2618297676),new l(1288033470,3409855158),new l(1501505948,4234509866),new l(1607167915,987167468),new l(1816402316,1246189591)];return function(a,c,h,u=!1){let d,p,f,g,m,y,v,b;u?(d=new l(3418070365,3238371032),p=new l(1654270250,914150663),f=new l(2438529370,812702999),g=new l(355462360,4144912697),m=new l(1731405415,4290775857),y=new l(2394180231,1750603025),v=new l(3675008525,1694076839),b=new l(1203062813,3204075428)):(d=new l(1779033703,4089235720),p=new l(3144134277,2227873595),f=new l(1013904242,4271175723),g=new l(2773480762,1595750129),m=new l(1359893119,2917565137),y=new l(2600822924,725511199),v=new l(528734635,4215389547),b=new l(1541459225,327033209));const w=128*Math.ceil((h+17)/128),x=new Uint8Array(w);let _,S;for(_=0;_<h;++_)x[_]=a[c++];x[_++]=128;const C=w-16;for(;_<C;)x[_++]=0;x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=0,x[_++]=h>>>29&255,x[_++]=h>>21&255,x[_++]=h>>13&255,x[_++]=h>>5&255,x[_++]=h<<3&255;const k=new Array(80);for(_=0;_<80;_++)k[_]=new l(0,0);let A=new l(0,0),E=new l(0,0),T=new l(0,0),M=new l(0,0),O=new l(0,0),I=new l(0,0),D=new l(0,0),F=new l(0,0);const P=new l(0,0),R=new l(0,0),L=new l(0,0),N=new l(0,0);let B,j;for(_=0;_<w;){for(S=0;S<16;++S)k[S].high=x[_]<<24|x[_+1]<<16|x[_+2]<<8|x[_+3],k[S].low=x[_+4]<<24|x[_+5]<<16|x[_+6]<<8|x[_+7],_+=8;for(S=16;S<80;++S)B=k[S],o(B,k[S-2],N),B.add(k[S-7]),r(L,k[S-15],N),B.add(L),B.add(k[S-16]);for(A.assign(d),E.assign(p),T.assign(f),M.assign(g),O.assign(m),I.assign(y),D.assign(v),F.assign(b),S=0;S<80;++S)P.assign(F),i(L,O,N),P.add(L),t(L,O,I,D,N),P.add(L),P.add(s[S]),P.add(k[S]),n(R,A,N),e(L,A,E,T,N),R.add(L),B=F,F=D,D=I,I=O,M.add(P),O=M,M=T,T=E,E=A,B.assign(P),B.add(R),A=B;d.add(A),p.add(E),f.add(T),g.add(M),m.add(O),y.add(I),v.add(D),b.add(F)}return u?(j=new Uint8Array(48),d.copyTo(j,0),p.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40)):(j=new Uint8Array(64),d.copyTo(j,0),p.copyTo(j,8),f.copyTo(j,16),g.copyTo(j,24),m.copyTo(j,32),y.copyTo(j,40),v.copyTo(j,48),b.copyTo(j,56)),j}}();function u(t,e,n){return h(t,e,n,!0)}e.calculateSHA512=h;class d{decryptBlock(t){return t}encrypt(t){return t}}class p{constructor(){this.constructor===p&&(0,i.unreachable)("Cannot initialize AESBaseCipher."),this._s=new Uint8Array([99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22]),this._inv_s=new Uint8Array([82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125]),this._mix=new Uint32Array([0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795]),this._mixCol=new Uint8Array(256);for(let t=0;t<256;t++)this._mixCol[t]=t<128?t<<1:t<<1^27;this.buffer=new Uint8Array(16),this.bufferPosition=0}_expandKey(t){(0,i.unreachable)("Cannot call `_expandKey` on the base class")}_decrypt(t,e){let n,i,r;const o=new Uint8Array(16);o.set(t);for(let t=0,n=this._keySize;t<16;++t,++n)o[t]^=e[n];for(let t=this._cyclesOfRepetition-1;t>=1;--t){n=o[13],o[13]=o[9],o[9]=o[5],o[5]=o[1],o[1]=n,n=o[14],i=o[10],o[14]=o[6],o[10]=o[2],o[6]=n,o[2]=i,n=o[15],i=o[11],r=o[7],o[15]=o[3],o[11]=n,o[7]=i,o[3]=r;for(let t=0;t<16;++t)o[t]=this._inv_s[o[t]];for(let n=0,i=16*t;n<16;++n,++i)o[n]^=e[i];for(let t=0;t<16;t+=4){const e=this._mix[o[t]],i=this._mix[o[t+1]],r=this._mix[o[t+2]],s=this._mix[o[t+3]];n=e^i>>>8^i<<24^r>>>16^r<<16^s>>>24^s<<8,o[t]=n>>>24&255,o[t+1]=n>>16&255,o[t+2]=n>>8&255,o[t+3]=255&n}}n=o[13],o[13]=o[9],o[9]=o[5],o[5]=o[1],o[1]=n,n=o[14],i=o[10],o[14]=o[6],o[10]=o[2],o[6]=n,o[2]=i,n=o[15],i=o[11],r=o[7],o[15]=o[3],o[11]=n,o[7]=i,o[3]=r;for(let t=0;t<16;++t)o[t]=this._inv_s[o[t]],o[t]^=e[t];return o}_encrypt(t,e){const n=this._s;let i,r,o;const s=new Uint8Array(16);s.set(t);for(let t=0;t<16;++t)s[t]^=e[t];for(let t=1;t<this._cyclesOfRepetition;t++){for(let t=0;t<16;++t)s[t]=n[s[t]];o=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=o,o=s[2],r=s[6],s[2]=s[10],s[6]=s[14],s[10]=o,s[14]=r,o=s[3],r=s[7],i=s[11],s[3]=s[15],s[7]=o,s[11]=r,s[15]=i;for(let t=0;t<16;t+=4){const e=s[t+0],n=s[t+1],r=s[t+2],o=s[t+3];i=e^n^r^o,s[t+0]^=i^this._mixCol[e^n],s[t+1]^=i^this._mixCol[n^r],s[t+2]^=i^this._mixCol[r^o],s[t+3]^=i^this._mixCol[o^e]}for(let n=0,i=16*t;n<16;++n,++i)s[n]^=e[i]}for(let t=0;t<16;++t)s[t]=n[s[t]];o=s[1],s[1]=s[5],s[5]=s[9],s[9]=s[13],s[13]=o,o=s[2],r=s[6],s[2]=s[10],s[6]=s[14],s[10]=o,s[14]=r,o=s[3],r=s[7],i=s[11],s[3]=s[15],s[7]=o,s[11]=r,s[15]=i;for(let t=0,n=this._keySize;t<16;++t,++n)s[t]^=e[n];return s}_decryptBlock2(t,e){const n=t.length;let i=this.buffer,r=this.bufferPosition;const o=[];let s=this.iv;for(let e=0;e<n;++e){if(i[r]=t[e],++r,r<16)continue;const n=this._decrypt(i,this._key);for(let t=0;t<16;++t)n[t]^=s[t];s=i,o.push(n),i=new Uint8Array(16),r=0}if(this.buffer=i,this.bufferLength=r,this.iv=s,0===o.length)return new Uint8Array(0);let a=16*o.length;if(e){const t=o.at(-1);let e=t[15];if(e<=16){for(let n=15,i=16-e;n>=i;--n)if(t[n]!==e){e=0;break}a-=e,o[o.length-1]=t.subarray(0,16-e)}}const l=new Uint8Array(a);for(let t=0,e=0,n=o.length;t<n;++t,e+=16)l.set(o[t],e);return l}decryptBlock(t,e,n=null){const i=t.length,r=this.buffer;let o=this.bufferPosition;if(n)this.iv=n;else{for(let e=0;o<16&&e<i;++e,++o)r[o]=t[e];if(o<16)return this.bufferLength=o,new Uint8Array(0);this.iv=r,t=t.subarray(16)}return this.buffer=new Uint8Array(16),this.bufferLength=0,this.decryptBlock=this._decryptBlock2,this.decryptBlock(t,e)}encrypt(t,e){const n=t.length;let i=this.buffer,r=this.bufferPosition;const o=[];e||(e=new Uint8Array(16));for(let s=0;s<n;++s){if(i[r]=t[s],++r,r<16)continue;for(let t=0;t<16;++t)i[t]^=e[t];const n=this._encrypt(i,this._key);e=n,o.push(n),i=new Uint8Array(16),r=0}if(this.buffer=i,this.bufferLength=r,this.iv=e,0===o.length)return new Uint8Array(0);const s=16*o.length,a=new Uint8Array(s);for(let t=0,e=0,n=o.length;t<n;++t,e+=16)a.set(o[t],e);return a}}class f extends p{constructor(t){super(),this._cyclesOfRepetition=10,this._keySize=160,this._rcon=new Uint8Array([141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141,1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145,57,114,228,211,189,97,194,159,37,74,148,51,102,204,131,29,58,116,232,203,141]),this._key=this._expandKey(t)}_expandKey(t){const e=this._s,n=this._rcon,i=new Uint8Array(176);i.set(t);for(let t=16,r=1;t<176;++r){let o=i[t-3],s=i[t-2],a=i[t-1],l=i[t-4];o=e[o],s=e[s],a=e[a],l=e[l],o^=n[r];for(let e=0;e<4;++e)i[t]=o^=i[t-16],t++,i[t]=s^=i[t-16],t++,i[t]=a^=i[t-16],t++,i[t]=l^=i[t-16],t++}return i}}e.AES128Cipher=f;class g extends p{constructor(t){super(),this._cyclesOfRepetition=14,this._keySize=224,this._key=this._expandKey(t)}_expandKey(t){const e=this._s,n=new Uint8Array(240);n.set(t);let i,r,o,s,a=1;for(let t=32,l=1;t<240;++l){t%32==16?(i=e[i],r=e[r],o=e[o],s=e[s]):t%32==0&&(i=n[t-3],r=n[t-2],o=n[t-1],s=n[t-4],i=e[i],r=e[r],o=e[o],s=e[s],i^=a,(a<<=1)>=256&&(a=255&(27^a)));for(let e=0;e<4;++e)n[t]=i^=n[t-32],t++,n[t]=r^=n[t-32],t++,n[t]=o^=n[t-32],t++,n[t]=s^=n[t-32],t++}return n}}e.AES256Cipher=g;class m{checkOwnerPassword(t,e,n,r){const o=new Uint8Array(t.length+56);o.set(t,0),o.set(e,t.length),o.set(n,t.length+e.length);const s=c(o,0,o.length);return(0,i.isArrayEqual)(s,r)}checkUserPassword(t,e,n){const r=new Uint8Array(t.length+8);r.set(t,0),r.set(e,t.length);const o=c(r,0,r.length);return(0,i.isArrayEqual)(o,n)}getOwnerKey(t,e,n,i){const r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(n,t.length+e.length);const o=c(r,0,r.length);return new g(o).decryptBlock(i,!1,new Uint8Array(16))}getUserKey(t,e,n){const i=new Uint8Array(t.length+8);i.set(t,0),i.set(e,t.length);const r=c(i,0,i.length);return new g(r).decryptBlock(n,!1,new Uint8Array(16))}}e.PDF17=m;class y{_hash(t,e,n){let i=c(e,0,e.length).subarray(0,32),r=[0],o=0;for(;o<64||r.at(-1)>o-32;){const e=t.length+i.length+n.length,s=new Uint8Array(e);let a=0;s.set(t,a),a+=t.length,s.set(i,a),a+=i.length,s.set(n,a);const l=new Uint8Array(64*e);for(let t=0,n=0;t<64;t++,n+=e)l.set(s,n);r=new f(i.subarray(0,16)).encrypt(l,i.subarray(16,32));const d=r.slice(0,16).reduce(((t,e)=>t+e),0)%3;0===d?i=c(r,0,r.length):1===d?i=u(r,0,r.length):2===d&&(i=h(r,0,r.length)),o++}return i.subarray(0,32)}checkOwnerPassword(t,e,n,r){const o=new Uint8Array(t.length+56);o.set(t,0),o.set(e,t.length),o.set(n,t.length+e.length);const s=this._hash(t,o,n);return(0,i.isArrayEqual)(s,r)}checkUserPassword(t,e,n){const r=new Uint8Array(t.length+8);r.set(t,0),r.set(e,t.length);const o=this._hash(t,r,[]);return(0,i.isArrayEqual)(o,n)}getOwnerKey(t,e,n,i){const r=new Uint8Array(t.length+56);r.set(t,0),r.set(e,t.length),r.set(n,t.length+e.length);const o=this._hash(t,r,n);return new g(o).decryptBlock(i,!1,new Uint8Array(16))}getUserKey(t,e,n){const i=new Uint8Array(t.length+8);i.set(t,0),i.set(e,t.length);const r=this._hash(t,i,[]);return new g(r).decryptBlock(n,!1,new Uint8Array(16))}}e.PDF20=y;class v{constructor(t,e){this.StringCipherConstructor=t,this.StreamCipherConstructor=e}createStream(t,e){const n=new this.StreamCipherConstructor;return new o.DecryptStream(t,e,(function(t,e){return n.decryptBlock(t,e)}))}decryptString(t){const e=new this.StringCipherConstructor;let n=(0,i.stringToBytes)(t);return n=e.decryptBlock(n,!0),(0,i.bytesToString)(n)}encryptString(t){const e=new this.StringCipherConstructor;if(e instanceof p){const n=16-t.length%16;t+=String.fromCharCode(n).repeat(n);const r=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(r);else for(let t=0;t<16;t++)r[t]=Math.floor(256*Math.random());let o=(0,i.stringToBytes)(t);o=e.encrypt(o,r);const s=new Uint8Array(16+o.length);return s.set(r),s.set(o,16),(0,i.bytesToString)(s)}let n=(0,i.stringToBytes)(t);return n=e.encrypt(n),(0,i.bytesToString)(n)}}class b{static#rr=new Uint8Array([40,191,78,94,78,117,138,65,100,0,78,86,255,250,1,8,46,46,0,182,208,104,62,128,47,12,169,254,100,83,105,122]);#or(t,e,n,i,r,o,s,a,l,c,h,u){if(e){const t=Math.min(127,e.length);e=e.subarray(0,t)}else e=[];const d=6===t?new y:new m;return d.checkUserPassword(e,a,s)?d.getUserKey(e,l,h):e.length&&d.checkOwnerPassword(e,i,o,n)?d.getOwnerKey(e,r,o,c):null}#sr(t,e,n,i,r,o,l,c){const h=40+n.length+t.length,u=new Uint8Array(h);let d,p,f=0;if(e)for(p=Math.min(32,e.length);f<p;++f)u[f]=e[f];for(d=0;f<32;)u[f++]=b.#rr[d++];for(d=0,p=n.length;d<p;++d)u[f++]=n[d];for(u[f++]=255&r,u[f++]=r>>8&255,u[f++]=r>>16&255,u[f++]=r>>>24&255,d=0,p=t.length;d<p;++d)u[f++]=t[d];o>=4&&!c&&(u[f++]=255,u[f++]=255,u[f++]=255,u[f++]=255);let g=a(u,0,f);const m=l>>3;if(o>=3)for(d=0;d<50;++d)g=a(g,0,m);const y=g.subarray(0,m);let v,w;if(o>=3){for(f=0;f<32;++f)u[f]=b.#rr[f];for(d=0,p=t.length;d<p;++d)u[f++]=t[d];v=new s(y),w=v.encryptBlock(a(u,0,f)),p=y.length;const e=new Uint8Array(p);for(d=1;d<=19;++d){for(let t=0;t<p;++t)e[t]=y[t]^d;v=new s(e),w=v.encryptBlock(w)}for(d=0,p=w.length;d<p;++d)if(i[d]!==w[d])return null}else for(v=new s(y),w=v.encryptBlock(b.#rr),d=0,p=w.length;d<p;++d)if(i[d]!==w[d])return null;return y}#ar(t,e,n,i){const r=new Uint8Array(32);let o=0;const l=Math.min(32,t.length);for(;o<l;++o)r[o]=t[o];let c=0;for(;o<32;)r[o++]=b.#rr[c++];let h=a(r,0,o);const u=i>>3;if(n>=3)for(c=0;c<50;++c)h=a(h,0,h.length);let d,p;if(n>=3){p=e;const t=new Uint8Array(u);for(c=19;c>=0;c--){for(let e=0;e<u;++e)t[e]=h[e]^c;d=new s(t),p=d.encryptBlock(p)}}else d=new s(h.subarray(0,u)),p=d.encryptBlock(e);return p}#lr(t,e,n,i=!1){const r=new Uint8Array(n.length+9),o=n.length;let s;for(s=0;s<o;++s)r[s]=n[s];return r[s++]=255&t,r[s++]=t>>8&255,r[s++]=t>>16&255,r[s++]=255&e,r[s++]=e>>8&255,i&&(r[s++]=115,r[s++]=65,r[s++]=108,r[s++]=84),a(r,0,s).subarray(0,Math.min(n.length+5,16))}#cr(t,e,n,o,a){if(!(e instanceof r.Name))throw new i.FormatError("Invalid crypt filter name.");const l=this,c=t.get(e.name),h=c?.get("CFM");if(!h||"None"===h.name)return function(){return new d};if("V2"===h.name)return function(){return new s(l.#lr(n,o,a,!1))};if("AESV2"===h.name)return function(){return new f(l.#lr(n,o,a,!0))};if("AESV3"===h.name)return function(){return new g(a)};throw new i.FormatError("Unknown crypto method")}constructor(t,e,n){const o=t.get("Filter");if(!(0,r.isName)(o,"Standard"))throw new i.FormatError("unknown encryption method");this.filterName=o.name,this.dict=t;const s=t.get("V");if(!Number.isInteger(s)||1!==s&&2!==s&&4!==s&&5!==s)throw new i.FormatError("unsupported encryption algorithm");this.algorithm=s;let a=t.get("Length");if(!a)if(s<=3)a=40;else{const e=t.get("CF"),n=t.get("StmF");if(e instanceof r.Dict&&n instanceof r.Name){e.suppressEncryption=!0;const t=e.get(n.name);a=t?.get("Length")||128,a<40&&(a<<=3)}}if(!Number.isInteger(a)||a<40||a%8!=0)throw new i.FormatError("invalid key length");const l=(0,i.stringToBytes)(t.get("O")),c=(0,i.stringToBytes)(t.get("U")),h=l.subarray(0,32),u=c.subarray(0,32),d=t.get("P"),p=t.get("R"),f=(4===s||5===s)&&!1!==t.get("EncryptMetadata");this.encryptMetadata=f;const g=(0,i.stringToBytes)(e);let m,y;if(n){if(6===p)try{n=(0,i.utf8StringToString)(n)}catch{(0,i.warn)("CipherTransformFactory: Unable to convert UTF8 encoded password.")}m=(0,i.stringToBytes)(n)}if(5!==s)y=this.#sr(g,m,h,u,d,p,a,f);else{const e=l.subarray(32,40),n=l.subarray(40,48),r=c.subarray(0,48),o=c.subarray(32,40),s=c.subarray(40,48),a=(0,i.stringToBytes)(t.get("OE")),d=(0,i.stringToBytes)(t.get("UE")),f=(0,i.stringToBytes)(t.get("Perms"));y=this.#or(p,m,h,e,n,r,u,o,s,a,d,f)}if(!y&&!n)throw new i.PasswordException("No password given",i.PasswordResponses.NEED_PASSWORD);if(!y&&n){const t=this.#ar(m,h,p,a);y=this.#sr(g,t,h,u,d,p,a,f)}if(!y)throw new i.PasswordException("Incorrect Password",i.PasswordResponses.INCORRECT_PASSWORD);if(this.encryptionKey=y,s>=4){const e=t.get("CF");e instanceof r.Dict&&(e.suppressEncryption=!0),this.cf=e,this.stmf=t.get("StmF")||r.Name.get("Identity"),this.strf=t.get("StrF")||r.Name.get("Identity"),this.eff=t.get("EFF")||this.stmf}}createCipherTransform(t,e){if(4===this.algorithm||5===this.algorithm)return new v(this.#cr(this.cf,this.strf,t,e,this.encryptionKey),this.#cr(this.cf,this.stmf,t,e,this.encryptionKey));const n=this.#lr(t,e,this.encryptionKey,!1),i=function(){return new s(n)};return new v(i,i)}}e.CipherTransformFactory=b},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DecryptStream=void 0;var i=n(18);class r extends i.DecodeStream{constructor(t,e,n){super(e),this.str=t,this.dict=t.dict,this.decrypt=n,this.nextChunk=null,this.initialized=!1}readBlock(){let t;if(this.initialized?t=this.nextChunk:(t=this.str.getBytes(512),this.initialized=!0),!t||0===t.length)return void(this.eof=!0);this.nextChunk=this.str.getBytes(512);const e=this.nextChunk?.length>0;t=(0,this.decrypt)(t,!e);const n=this.bufferLength,i=n+t.length;this.ensureBuffer(i).set(t,n),this.bufferLength=i}}e.DecryptStream=r},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectLoader=void 0;var i=n(4),r=n(5),o=n(3),s=n(2);function a(t,e){if(t instanceof i.Dict)t=t.getRawValues();else if(t instanceof r.BaseStream)t=t.dict.getRawValues();else if(!Array.isArray(t))return;for(const o of t)((n=o)instanceof i.Ref||n instanceof i.Dict||n instanceof r.BaseStream||Array.isArray(n))&&e.push(o);var n}e.ObjectLoader=class{constructor(t,e,n){this.dict=t,this.keys=e,this.xref=n,this.refSet=null}async load(){if(this.xref.stream.isDataLoaded)return;const{keys:t,dict:e}=this;this.refSet=new i.RefSet;const n=[];for(const i of t){const t=e.getRaw(i);void 0!==t&&n.push(t)}return this._walk(n)}async _walk(t){const e=[],n=[];for(;t.length;){let l=t.pop();if(l instanceof i.Ref){if(this.refSet.has(l))continue;try{this.refSet.put(l),l=this.xref.fetch(l)}catch(t){if(!(t instanceof o.MissingDataException)){(0,s.warn)(`ObjectLoader._walk - requesting all data: "${t}".`),this.refSet=null;const{manager:e}=this.xref.stream;return e.requestAllChunks()}e.push(l),n.push({begin:t.begin,end:t.end})}}if(l instanceof r.BaseStream){const t=l.getBaseStreams();if(t){let i=!1;for(const e of t)e.isDataLoaded||(i=!0,n.push({begin:e.start,end:e.end}));i&&e.push(l)}}a(l,t)}if(n.length){await this.xref.stream.manager.requestRanges(n);for(const t of e)t instanceof i.Ref&&this.refSet.remove(t);return this._walk(e)}this.refSet=null}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAFactory=void 0;var i=n(78),r=n(79),o=n(89),s=n(85),a=n(84),l=n(2),c=n(90),h=n(100);class u{constructor(t){try{this.root=(new c.XFAParser).parse(u._createDocument(t));const e=new r.Binder(this.root);this.form=e.bind(),this.dataHandler=new o.DataHandler(this.root,e.getData()),this.form[i.$globalData].template=this.form}catch(t){(0,l.warn)(`XFA - an error occurred during parsing and binding: ${t}`)}}isValid(){return this.root&&this.form}_createPagesHelper(){const t=this.form[i.$toPages]();return new Promise(((e,n)=>{const i=()=>{try{const n=t.next();n.done?e(n.value):setTimeout(i,0)}catch(t){n(t)}};setTimeout(i,0)}))}async _createPages(){try{this.pages=await this._createPagesHelper(),this.dims=this.pages.children.map((t=>{const{width:e,height:n}=t.attributes.style;return[0,0,parseInt(e),parseInt(n)]}))}catch(t){(0,l.warn)(`XFA - an error occurred during layout: ${t}`)}}getBoundingBox(t){return this.dims[t]}async getNumPages(){return this.pages||await this._createPages(),this.dims.length}setImages(t){this.form[i.$globalData].images=t}setFonts(t){this.form[i.$globalData].fontFinder=new s.FontFinder(t);const e=[];for(let t of this.form[i.$globalData].usedTypefaces)t=(0,a.stripQuotes)(t),this.form[i.$globalData].fontFinder.find(t)||e.push(t);return e.length>0?e:null}appendFonts(t,e){this.form[i.$globalData].fontFinder.add(t,e)}async getPages(){this.pages||await this._createPages();const t=this.pages;return this.pages=null,t}serializeData(t){return this.dataHandler.serialize(t)}static _createDocument(t){return t["/xdp:xdp"]?Object.values(t).join(""):t["xdp:xdp"]}static getRichTextAsHtml(t){if(!t||"string"!=typeof t)return null;try{let e=new c.XFAParser(h.XhtmlNamespace,!0).parse(t);if(!["body","xhtml"].includes(e[i.$nodeName])){const t=h.XhtmlNamespace.body({});t[i.$appendChild](e),e=t}const n=e[i.$toHTML]();if(!n.success)return null;const{html:r}=n,{attributes:o}=r;return o&&(o.class&&(o.class=o.class.filter((t=>!t.startsWith("xfa")))),o.dir="auto"),{html:r,str:e[i.$text]()}}catch(t){(0,l.warn)(`XFA - an error occurred during parsing of rich text: ${t}`)}return null}}e.XFAFactory=u},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.$uid=e.$toStyle=e.$toString=e.$toPages=e.$toHTML=e.$text=e.$tabIndex=e.$setValue=e.$setSetAttributes=e.$setId=e.$searchNode=e.$root=e.$resolvePrototypes=e.$removeChild=e.$pushPara=e.$pushGlyphs=e.$popPara=e.$onText=e.$onChildCheck=e.$onChild=e.$nsAttributes=e.$nodeName=e.$namespaceId=e.$lastAttribute=e.$isUsable=e.$isTransparent=e.$isThereMoreWidth=e.$isSplittable=e.$isNsAgnostic=e.$isDescendent=e.$isDataValue=e.$isCDATAXml=e.$isBindable=e.$insertAt=e.$indexOf=e.$ids=e.$hasSettableValue=e.$globalData=e.$getTemplateRoot=e.$getSubformParent=e.$getRealChildrenByNameIt=e.$getParent=e.$getNextPage=e.$getExtra=e.$getDataValue=e.$getContainedChildren=e.$getChildrenByNameIt=e.$getChildrenByName=e.$getChildrenByClass=e.$getChildren=e.$getAvailableSpace=e.$getAttributes=e.$getAttributeIt=e.$flushHTML=e.$finalize=e.$extra=e.$dump=e.$data=e.$content=e.$consumed=e.$clone=e.$cleanup=e.$cleanPage=e.$clean=e.$childrenToHTML=e.$appendChild=e.$addHTML=e.$acceptWhitespace=void 0;const n=Symbol();e.$acceptWhitespace=n;const i=Symbol();e.$addHTML=i;const r=Symbol();e.$appendChild=r;const o=Symbol();e.$childrenToHTML=o;const s=Symbol();e.$clean=s;const a=Symbol();e.$cleanPage=a;const l=Symbol();e.$cleanup=l;const c=Symbol();e.$clone=c;const h=Symbol();e.$consumed=h;const u=Symbol("content");e.$content=u;const d=Symbol("data");e.$data=d;const p=Symbol();e.$dump=p;const f=Symbol("extra");e.$extra=f;const g=Symbol();e.$finalize=g;const m=Symbol();e.$flushHTML=m;const y=Symbol();e.$getAttributeIt=y;const v=Symbol();e.$getAttributes=v;const b=Symbol();e.$getAvailableSpace=b;const w=Symbol();e.$getChildrenByClass=w;const x=Symbol();e.$getChildrenByName=x;const _=Symbol();e.$getChildrenByNameIt=_;const S=Symbol();e.$getDataValue=S;const C=Symbol();e.$getExtra=C;const k=Symbol();e.$getRealChildrenByNameIt=k;const A=Symbol();e.$getChildren=A;const E=Symbol();e.$getContainedChildren=E;const T=Symbol();e.$getNextPage=T;const M=Symbol();e.$getSubformParent=M;const O=Symbol();e.$getParent=O;const I=Symbol();e.$getTemplateRoot=I;const D=Symbol();e.$globalData=D;const F=Symbol();e.$hasSettableValue=F;const P=Symbol();e.$ids=P;const R=Symbol();e.$indexOf=R;const L=Symbol();e.$insertAt=L;const N=Symbol();e.$isCDATAXml=N;const B=Symbol();e.$isBindable=B;const j=Symbol();e.$isDataValue=j;const z=Symbol();e.$isDescendent=z;const $=Symbol();e.$isNsAgnostic=$;const H=Symbol();e.$isSplittable=H;const U=Symbol();e.$isThereMoreWidth=U;const V=Symbol();e.$isTransparent=V;const W=Symbol();e.$isUsable=W;const q=Symbol();e.$lastAttribute=q;const K=Symbol("namespaceId");e.$namespaceId=K;const X=Symbol("nodeName");e.$nodeName=X;const G=Symbol();e.$nsAttributes=G;const Y=Symbol();e.$onChild=Y;const J=Symbol();e.$onChildCheck=J;const Z=Symbol();e.$onText=Z;const Q=Symbol();e.$pushGlyphs=Q;const tt=Symbol();e.$popPara=tt;const et=Symbol();e.$pushPara=et;const nt=Symbol();e.$removeChild=nt;const it=Symbol("root");e.$root=it;const rt=Symbol();e.$resolvePrototypes=rt;const ot=Symbol();e.$searchNode=ot;const st=Symbol();e.$setId=st;const at=Symbol();e.$setSetAttributes=at;const lt=Symbol();e.$setValue=lt;const ct=Symbol();e.$tabIndex=ct;const ht=Symbol();e.$text=ht;const ut=Symbol();e.$toPages=ut;const dt=Symbol();e.$toHTML=dt;const pt=Symbol();e.$toString=pt;const ft=Symbol();e.$toStyle=ft;const gt=Symbol("uid");e.$uid=gt},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Binder=void 0;var i=n(78),r=n(80),o=n(88),s=n(87),a=n(81),l=n(2);const c=a.NamespaceIds.datasets.id;function h(t){const e=new r.Text({});return e[i.$content]=t,e}e.Binder=class{constructor(t){this.root=t,this.datasets=t.datasets,this.data=t.datasets?.data||new s.XmlObject(a.NamespaceIds.datasets.id,"data"),this.emptyMerge=0===this.data[i.$getChildren]().length,this.root.form=this.form=t.template[i.$clone]()}_isConsumeData(){return!this.emptyMerge&&this._mergeMode}_isMatchTemplate(){return!this._isConsumeData()}bind(){return this._bindElement(this.form,this.data),this.form}getData(){return this.data}_bindValue(t,e,n){if(t[i.$data]=e,t[i.$hasSettableValue]())if(e[i.$isDataValue]()){const n=e[i.$getDataValue]();t[i.$setValue](h(n))}else if(t instanceof r.Field&&"multiSelect"===t.ui?.choiceList?.open){const n=e[i.$getChildren]().map((t=>t[i.$content].trim())).join("\n");t[i.$setValue](h(n))}else this._isConsumeData()&&(0,l.warn)("XFA - Nodes haven't the same type.");else!e[i.$isDataValue]()||this._isMatchTemplate()?this._bindElement(t,e):(0,l.warn)("XFA - Nodes haven't the same type.")}_findDataByNameToConsume(t,e,n,r){if(!t)return null;let o,s;for(let r=0;r<3;r++){for(o=n[i.$getRealChildrenByNameIt](t,!1,!0);s=o.next().value,s;)if(e===s[i.$isDataValue]())return s;if(n[i.$namespaceId]===a.NamespaceIds.datasets.id&&"data"===n[i.$nodeName])break;n=n[i.$getParent]()}return r?(o=this.data[i.$getRealChildrenByNameIt](t,!0,!1),s=o.next().value,s||(o=this.data[i.$getAttributeIt](t,!0),s=o.next().value,s?.[i.$isDataValue]()?s:null)):null}_setProperties(t,e){if(t.hasOwnProperty("setProperty"))for(const{ref:n,target:a,connection:c}of t.setProperty.children){if(c)continue;if(!n)continue;const h=(0,o.searchNode)(this.root,e,n,!1,!1);if(!h){(0,l.warn)(`XFA - Invalid reference: ${n}.`);continue}const[u]=h;if(!u[i.$isDescendent](this.data)){(0,l.warn)("XFA - Invalid node: must be a data node.");continue}const d=(0,o.searchNode)(this.root,t,a,!1,!1);if(!d){(0,l.warn)(`XFA - Invalid target: ${a}.`);continue}const[p]=d;if(!p[i.$isDescendent](t)){(0,l.warn)("XFA - Invalid target: must be a property or subproperty.");continue}const f=p[i.$getParent]();if(p instanceof r.SetProperty||f instanceof r.SetProperty){(0,l.warn)("XFA - Invalid target: cannot be a setProperty or one of its properties.");continue}if(p instanceof r.BindItems||f instanceof r.BindItems){(0,l.warn)("XFA - Invalid target: cannot be a bindItems or one of its properties.");continue}const g=u[i.$text](),m=p[i.$nodeName];if(p instanceof s.XFAAttribute){const t=Object.create(null);t[m]=g;const e=Reflect.construct(Object.getPrototypeOf(f).constructor,[t]);f[m]=e[m]}else p.hasOwnProperty(i.$content)?(p[i.$data]=u,p[i.$content]=g,p[i.$finalize]()):(0,l.warn)("XFA - Invalid node to use in setProperty")}}_bindItems(t,e){if(!t.hasOwnProperty("items")||!t.hasOwnProperty("bindItems")||t.bindItems.isEmpty())return;for(const e of t.items.children)t[i.$removeChild](e);t.items.clear();const n=new r.Items({}),s=new r.Items({});t[i.$appendChild](n),t.items.push(n),t[i.$appendChild](s),t.items.push(s);for(const{ref:r,labelRef:a,valueRef:c,connection:u}of t.bindItems.children){if(u)continue;if(!r)continue;const t=(0,o.searchNode)(this.root,e,r,!1,!1);if(t)for(const e of t){if(!e[i.$isDescendent](this.datasets)){(0,l.warn)(`XFA - Invalid ref (${r}): must be a datasets child.`);continue}const t=(0,o.searchNode)(this.root,e,a,!0,!1);if(!t){(0,l.warn)(`XFA - Invalid label: ${a}.`);continue}const[u]=t;if(!u[i.$isDescendent](this.datasets)){(0,l.warn)("XFA - Invalid label: must be a datasets child.");continue}const d=(0,o.searchNode)(this.root,e,c,!0,!1);if(!d){(0,l.warn)(`XFA - Invalid value: ${c}.`);continue}const[p]=d;if(!p[i.$isDescendent](this.datasets)){(0,l.warn)("XFA - Invalid value: must be a datasets child.");continue}const f=h(u[i.$text]()),g=h(p[i.$text]());n[i.$appendChild](f),n.text.push(f),s[i.$appendChild](g),s.text.push(g)}else(0,l.warn)(`XFA - Invalid reference: ${r}.`)}}_bindOccurrences(t,e,n){let r;if(e.length>1&&(r=t[i.$clone](),r[i.$removeChild](r.occur),r.occur=null),this._bindValue(t,e[0],n),this._setProperties(t,e[0]),this._bindItems(t,e[0]),1===e.length)return;const o=t[i.$getParent](),s=t[i.$nodeName],a=o[i.$indexOf](t);for(let t=1,l=e.length;t<l;t++){const l=e[t],c=r[i.$clone]();o[s].push(c),o[i.$insertAt](a+t,c),this._bindValue(c,l,n),this._setProperties(c,l),this._bindItems(c,l)}}_createOccurrences(t){if(!this.emptyMerge)return;const{occur:e}=t;if(!e||e.initial<=1)return;const n=t[i.$getParent](),r=t[i.$nodeName];if(!(n[r]instanceof s.XFAObjectArray))return;let o;o=t.name?n[r].children.filter((e=>e.name===t.name)).length:n[r].children.length;const a=n[i.$indexOf](t)+1,l=e.initial-o;if(l){const e=t[i.$clone]();e[i.$removeChild](e.occur),e.occur=null,n[r].push(e),n[i.$insertAt](a,e);for(let t=1;t<l;t++){const o=e[i.$clone]();n[r].push(o),n[i.$insertAt](a+t,o)}}}_getOccurInfo(t){const{name:e,occur:n}=t;if(!n||!e)return[1,1];const i=-1===n.max?1/0:n.max;return[n.min,i]}_setAndBind(t,e){this._setProperties(t,e),this._bindItems(t,e),this._bindElement(t,e)}_bindElement(t,e){const n=[];this._createOccurrences(t);for(const r of t[i.$getChildren]()){if(r[i.$data])continue;if(void 0===this._mergeMode&&"subform"===r[i.$nodeName]){this._mergeMode="consumeData"===r.mergeMode;const t=e[i.$getChildren]();if(t.length>0)this._bindOccurrences(r,[t[0]],null);else if(this.emptyMerge){const t=e[i.$namespaceId]===c?-1:e[i.$namespaceId],n=r[i.$data]=new s.XmlObject(t,r.name||"root");e[i.$appendChild](n),this._bindElement(r,n)}continue}if(!r[i.$isBindable]())continue;let t=!1,a=null,h=null,u=null;if(r.bind){switch(r.bind.match){case"none":this._setAndBind(r,e);continue;case"global":t=!0;break;case"dataRef":if(!r.bind.ref){(0,l.warn)(`XFA - ref is empty in node ${r[i.$nodeName]}.`),this._setAndBind(r,e);continue}h=r.bind.ref}r.bind.picture&&(a=r.bind.picture[i.$content])}const[d,p]=this._getOccurInfo(r);if(h){if(u=(0,o.searchNode)(this.root,e,h,!0,!1),null===u){if(u=(0,o.createDataNode)(this.data,e,h),!u)continue;this._isConsumeData()&&(u[i.$consumed]=!0),this._setAndBind(r,u);continue}this._isConsumeData()&&(u=u.filter((t=>!t[i.$consumed]))),u.length>p?u=u.slice(0,p):0===u.length&&(u=null),u&&this._isConsumeData()&&u.forEach((t=>{t[i.$consumed]=!0}))}else{if(!r.name){this._setAndBind(r,e);continue}if(this._isConsumeData()){const n=[];for(;n.length<p;){const o=this._findDataByNameToConsume(r.name,r[i.$hasSettableValue](),e,t);if(!o)break;o[i.$consumed]=!0,n.push(o)}u=n.length>0?n:null}else{if(u=e[i.$getRealChildrenByNameIt](r.name,!1,this.emptyMerge).next().value,!u){if(0===d){n.push(r);continue}const t=e[i.$namespaceId]===c?-1:e[i.$namespaceId];u=r[i.$data]=new s.XmlObject(t,r.name),this.emptyMerge&&(u[i.$consumed]=!0),e[i.$appendChild](u),this._setAndBind(r,u);continue}this.emptyMerge&&(u[i.$consumed]=!0),u=[u]}}u?this._bindOccurrences(r,u,a):d>0?this._setAndBind(r,e):n.push(r)}n.forEach((t=>t[i.$getParent]()[i.$removeChild](t)))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Value=e.Text=e.TemplateNamespace=e.Template=e.SetProperty=e.Items=e.Field=e.BindItems=void 0;var i=n(78),r=n(81),o=n(82),s=n(83),a=n(87),l=n(84),c=n(2),h=n(85),u=n(3),d=n(88);const p=r.NamespaceIds.template.id,f="http://www.w3.org/2000/svg",g=/^H(\d+)$/,m=new Set(["image/gif","image/jpeg","image/jpg","image/pjpeg","image/png","image/apng","image/x-png","image/bmp","image/x-ms-bmp","image/tiff","image/tif","application/octet-stream"]),y=[[[66,77],"image/bmp"],[[255,216,255],"image/jpeg"],[[73,73,42,0],"image/tiff"],[[77,77,0,42],"image/tiff"],[[71,73,70,56,57,97],"image/gif"],[[137,80,78,71,13,10,26,10],"image/png"]];function v(t){if(!t||!t.border)return{w:0,h:0};const e=t.border[i.$getExtra]();return e?{w:e.widths[0]+e.widths[2]+e.insets[0]+e.insets[2],h:e.widths[1]+e.widths[3]+e.insets[1]+e.insets[3]}:{w:0,h:0}}function b(t){return t.margin&&(t.margin.topInset||t.margin.rightInset||t.margin.bottomInset||t.margin.leftInset)}function w(t,e){if(!t.value){const e=new Pe({});t[i.$appendChild](e),t.value=e}t.value[i.$setValue](e)}function*x(t){for(const e of t[i.$getChildren]())e instanceof we?yield*e[i.$getContainedChildren]():yield e}function _(t){return"error"===t.validate?.nullTest}function S(t){for(;t;){if(!t.traversal)return void(t[i.$tabIndex]=t[i.$getParent]()[i.$tabIndex]);if(t[i.$tabIndex])return;let e=null;for(const n of t.traversal[i.$getChildren]())if("next"===n.operation){e=n;break}if(!e||!e.ref)return void(t[i.$tabIndex]=t[i.$getParent]()[i.$tabIndex]);const n=t[i.$getTemplateRoot]();t[i.$tabIndex]=++n[i.$tabIndex];const r=n[i.$searchNode](e.ref,t);if(!r)return;t=r[0]}}function C(t,e){const n=t.assist;if(n){const t=n[i.$toHTML]();t&&(e.title=t);const r=n.role.match(g);if(r){const t="heading",n=r[1];e.role=t,e["aria-level"]=n}}if("table"===t.layout)e.role="table";else if("row"===t.layout)e.role="row";else{const n=t[i.$getParent]();"row"===n.layout&&(e.role="TH"===n.assist?.role?"columnheader":"cell")}}function k(t){if(!t.assist)return null;const e=t.assist;return e.speak&&""!==e.speak[i.$content]?e.speak[i.$content]:e.toolTip?e.toolTip[i.$content]:null}function A(t){return l.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:Object.create(null)},children:[{name:"span",attributes:{style:Object.create(null)},value:t}]})}function E(t){const e=t[i.$getTemplateRoot]();null===e[i.$extra].firstUnsplittable&&(e[i.$extra].firstUnsplittable=t,e[i.$extra].noLayoutFailure=!0)}function T(t){const e=t[i.$getTemplateRoot]();e[i.$extra].firstUnsplittable===t&&(e[i.$extra].noLayoutFailure=!1)}function M(t){if(t[i.$extra])return!1;if(t[i.$extra]=Object.create(null),"auto"===t.targetType)return!1;const e=t[i.$getTemplateRoot]();let n=null;if(t.target){if(n=e[i.$searchNode](t.target,t[i.$getParent]()),!n)return!1;n=n[0]}const{currentPageArea:r,currentContentArea:o}=e[i.$extra];if("pageArea"===t.targetType)return n instanceof Qt||(n=null),t.startNew?(t[i.$extra].target=n||r,!0):!(!n||n===r||(t[i.$extra].target=n,0));n instanceof tt||(n=null);const s=n&&n[i.$getParent]();let a,l=s;if(t.startNew)if(n){const t=s.contentArea.children,e=t.indexOf(o),i=t.indexOf(n);-1!==e&&e<i&&(l=null),a=i-1}else a=r.contentArea.children.indexOf(o);else{if(!n||n===o)return!1;a=s.contentArea.children.indexOf(n)-1,l=s===r?null:s}return t[i.$extra].target=l,t[i.$extra].index=a,!0}function O(t,e,n){const r=t[i.$getTemplateRoot](),o=r[i.$extra].noLayoutFailure,s=e[i.$getSubformParent];e[i.$getSubformParent]=()=>t,r[i.$extra].noLayoutFailure=!0;const a=e[i.$toHTML](n);t[i.$addHTML](a.html,a.bbox),r[i.$extra].noLayoutFailure=o,e[i.$getSubformParent]=s}class I extends a.StringObject{constructor(t){super(p,"appearanceFilter"),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class D extends a.XFAObject{constructor(t){super(p,"arc",!0),this.circular=(0,l.getInteger)({data:t.circular,defaultValue:0,validate:t=>1===t}),this.hand=(0,l.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.startAngle=(0,l.getFloat)({data:t.startAngle,defaultValue:0,validate:t=>!0}),this.sweepAngle=(0,l.getFloat)({data:t.sweepAngle,defaultValue:360,validate:t=>!0}),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null,this.fill=null}[i.$toHTML](){const t=this.edge||new ut({}),e=t[i.$toStyle](),n=Object.create(null);let r;"visible"===this.fill?.presence?Object.assign(n,this.fill[i.$toStyle]()):n.fill="transparent",n.strokeWidth=(0,s.measureToString)("visible"===t.presence?t.thickness:0),n.stroke=e.color;const o={xmlns:f,style:{width:"100%",height:"100%",overflow:"visible"}};if(360===this.sweepAngle)r={name:"ellipse",attributes:{xmlns:f,cx:"50%",cy:"50%",rx:"50%",ry:"50%",style:n}};else{const t=this.startAngle*Math.PI/180,e=this.sweepAngle*Math.PI/180,i=this.sweepAngle>180?1:0,[s,a,l,c]=[50*(1+Math.cos(t)),50*(1-Math.sin(t)),50*(1+Math.cos(t+e)),50*(1-Math.sin(t+e))];r={name:"path",attributes:{xmlns:f,d:`M ${s} ${a} A 50 50 0 ${i} 0 ${l} ${c}`,vectorEffect:"non-scaling-stroke",style:n}},Object.assign(o,{viewBox:"0 0 100 100",preserveAspectRatio:"none"})}const a={name:"svg",children:[r],attributes:o};return b(this[i.$getParent]()[i.$getParent]())?l.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[a]}):(a.attributes.style.position="absolute",l.HTMLResult.success(a))}}class F extends a.XFAObject{constructor(t){super(p,"area",!0),this.colSpan=(0,l.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null,this.area=new a.XFAObjectArray,this.draw=new a.XFAObjectArray,this.exObject=new a.XFAObjectArray,this.exclGroup=new a.XFAObjectArray,this.field=new a.XFAObjectArray,this.subform=new a.XFAObjectArray,this.subformSet=new a.XFAObjectArray}*[i.$getContainedChildren](){yield*x(this)}[i.$isTransparent](){return!0}[i.$isBindable](){return!0}[i.$addHTML](t,e){const[n,r,o,s]=e;this[i.$extra].width=Math.max(this[i.$extra].width,n+o),this[i.$extra].height=Math.max(this[i.$extra].height,r+s),this[i.$extra].children.push(t)}[i.$getAvailableSpace](){return this[i.$extra].availableSpace}[i.$toHTML](t){const e=(0,s.toStyle)(this,"position"),n={style:e,id:this[i.$uid],class:["xfaArea"]};(0,s.isPrintOnly)(this)&&n.class.push("xfaPrintOnly"),this.name&&(n.xfaName=this.name);const r=[];this[i.$extra]={children:r,width:0,height:0,availableSpace:t};const o=this[i.$childrenToHTML]({filter:new Set(["area","draw","field","exclGroup","subform","subformSet"]),include:!0});if(!o.success)return o.isBreak()?o:(delete this[i.$extra],l.HTMLResult.FAILURE);e.width=(0,s.measureToString)(this[i.$extra].width),e.height=(0,s.measureToString)(this[i.$extra].height);const a={name:"div",attributes:n,children:r},c=[this.x,this.y,this[i.$extra].width,this[i.$extra].height];return delete this[i.$extra],l.HTMLResult.success(a,c)}}class P extends a.XFAObject{constructor(t){super(p,"assist",!0),this.id=t.id||"",this.role=t.role||"",this.use=t.use||"",this.usehref=t.usehref||"",this.speak=null,this.toolTip=null}[i.$toHTML](){return this.toolTip?.[i.$content]||null}}class R extends a.XFAObject{constructor(t){super(p,"barcode",!0),this.charEncoding=(0,l.getKeyword)({data:t.charEncoding?t.charEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.checksum=(0,l.getStringOption)(t.checksum,["none","1mod10","1mod10_1mod11","2mod10","auto"]),this.dataColumnCount=(0,l.getInteger)({data:t.dataColumnCount,defaultValue:-1,validate:t=>t>=0}),this.dataLength=(0,l.getInteger)({data:t.dataLength,defaultValue:-1,validate:t=>t>=0}),this.dataPrep=(0,l.getStringOption)(t.dataPrep,["none","flateCompress"]),this.dataRowCount=(0,l.getInteger)({data:t.dataRowCount,defaultValue:-1,validate:t=>t>=0}),this.endChar=t.endChar||"",this.errorCorrectionLevel=(0,l.getInteger)({data:t.errorCorrectionLevel,defaultValue:-1,validate:t=>t>=0&&t<=8}),this.id=t.id||"",this.moduleHeight=(0,l.getMeasurement)(t.moduleHeight,"5mm"),this.moduleWidth=(0,l.getMeasurement)(t.moduleWidth,"0.25mm"),this.printCheckDigit=(0,l.getInteger)({data:t.printCheckDigit,defaultValue:0,validate:t=>1===t}),this.rowColumnRatio=(0,l.getRatio)(t.rowColumnRatio),this.startChar=t.startChar||"",this.textLocation=(0,l.getStringOption)(t.textLocation,["below","above","aboveEmbedded","belowEmbedded","none"]),this.truncate=(0,l.getInteger)({data:t.truncate,defaultValue:0,validate:t=>1===t}),this.type=(0,l.getStringOption)(t.type?t.type.toLowerCase():"",["aztec","codabar","code2of5industrial","code2of5interleaved","code2of5matrix","code2of5standard","code3of9","code3of9extended","code11","code49","code93","code128","code128a","code128b","code128c","code128sscc","datamatrix","ean8","ean8add2","ean8add5","ean13","ean13add2","ean13add5","ean13pwcd","fim","logmars","maxicode","msi","pdf417","pdf417macro","plessey","postauscust2","postauscust3","postausreplypaid","postausstandard","postukrm4scc","postusdpbc","postusimb","postusstandard","postus5zip","qrcode","rfid","rss14","rss14expanded","rss14limited","rss14stacked","rss14stackedomni","rss14truncated","telepen","ucc128","ucc128random","ucc128sscc","upca","upcaadd2","upcaadd5","upcapwcd","upce","upceadd2","upceadd5","upcean2","upcean5","upsmaxicode"]),this.upsMode=(0,l.getStringOption)(t.upsMode,["usCarrier","internationalCarrier","secureSymbol","standardSymbol"]),this.use=t.use||"",this.usehref=t.usehref||"",this.wideNarrowRatio=(0,l.getRatio)(t.wideNarrowRatio),this.encrypt=null,this.extras=null}}class L extends a.XFAObject{constructor(t){super(p,"bind",!0),this.match=(0,l.getStringOption)(t.match,["once","dataRef","global","none"]),this.ref=t.ref||"",this.picture=null}}class N extends a.XFAObject{constructor(t){super(p,"bindItems"),this.connection=t.connection||"",this.labelRef=t.labelRef||"",this.ref=t.ref||"",this.valueRef=t.valueRef||""}}e.BindItems=N;class B extends a.XFAObject{constructor(t){super(p,"bookend"),this.id=t.id||"",this.leader=t.leader||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}}class j extends a.Option01{constructor(t){super(p,"boolean"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$toHTML](t){return A(1===this[i.$content]?"1":"0")}}class z extends a.XFAObject{constructor(t){super(p,"border",!0),this.break=(0,l.getStringOption)(t.break,["close","open"]),this.hand=(0,l.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new a.XFAObjectArray(4),this.edge=new a.XFAObjectArray(4),this.extras=null,this.fill=null,this.margin=null}[i.$getExtra](){if(!this[i.$extra]){const t=this.edge.children.slice();if(t.length<4){const e=t.at(-1)||new ut({});for(let n=t.length;n<4;n++)t.push(e)}const e=t.map((t=>t.thickness)),n=[0,0,0,0];this.margin&&(n[0]=this.margin.topInset,n[1]=this.margin.rightInset,n[2]=this.margin.bottomInset,n[3]=this.margin.leftInset),this[i.$extra]={widths:e,insets:n,edges:t}}return this[i.$extra]}[i.$toStyle](){const{edges:t}=this[i.$getExtra](),e=t.map((t=>{const e=t[i.$toStyle]();return e.color||="#000000",e})),n=Object.create(null);if(this.margin&&Object.assign(n,this.margin[i.$toStyle]()),"visible"===this.fill?.presence&&Object.assign(n,this.fill[i.$toStyle]()),this.corner.children.some((t=>0!==t.radius))){const t=this.corner.children.map((t=>t[i.$toStyle]()));if(2===t.length||3===t.length){const e=t.at(-1);for(let n=t.length;n<4;n++)t.push(e)}n.borderRadius=t.map((t=>t.radius)).join(" ")}switch(this.presence){case"invisible":case"hidden":n.borderStyle="";break;case"inactive":n.borderStyle="none";break;default:n.borderStyle=e.map((t=>t.style)).join(" ")}return n.borderWidth=e.map((t=>t.width)).join(" "),n.borderColor=e.map((t=>t.color)).join(" "),n}}class $ extends a.XFAObject{constructor(t){super(p,"break",!0),this.after=(0,l.getStringOption)(t.after,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.afterTarget=t.afterTarget||"",this.before=(0,l.getStringOption)(t.before,["auto","contentArea","pageArea","pageEven","pageOdd"]),this.beforeTarget=t.beforeTarget||"",this.bookendLeader=t.bookendLeader||"",this.bookendTrailer=t.bookendTrailer||"",this.id=t.id||"",this.overflowLeader=t.overflowLeader||"",this.overflowTarget=t.overflowTarget||"",this.overflowTrailer=t.overflowTrailer||"",this.startNew=(0,l.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class H extends a.XFAObject{constructor(t){super(p,"breakAfter",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,l.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,l.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}}class U extends a.XFAObject{constructor(t){super(p,"breakBefore",!0),this.id=t.id||"",this.leader=t.leader||"",this.startNew=(0,l.getInteger)({data:t.startNew,defaultValue:0,validate:t=>1===t}),this.target=t.target||"",this.targetType=(0,l.getStringOption)(t.targetType,["auto","contentArea","pageArea"]),this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||"",this.script=null}[i.$toHTML](t){return this[i.$extra]={},l.HTMLResult.FAILURE}}class V extends a.XFAObject{constructor(t){super(p,"button",!0),this.highlight=(0,l.getStringOption)(t.highlight,["inverted","none","outline","push"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[i.$toHTML](t){const e=this[i.$getParent]()[i.$getParent](),n={name:"button",attributes:{id:this[i.$uid],class:["xfaButton"],style:{}},children:[]};for(const t of e.event.children){if("click"!==t.activity||!t.script)continue;const e=(0,u.recoverJsURL)(t.script[i.$content]);if(!e)continue;const r=(0,s.fixURL)(e.url);r&&n.children.push({name:"a",attributes:{id:"link"+this[i.$uid],href:r,newWindow:e.newWindow,class:["xfaLink"],style:{}},children:[]})}return l.HTMLResult.success(n)}}class W extends a.XFAObject{constructor(t){super(p,"calculate",!0),this.id=t.id||"",this.override=(0,l.getStringOption)(t.override,["disabled","error","ignore","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.script=null}}class q extends a.XFAObject{constructor(t){super(p,"caption",!0),this.id=t.id||"",this.placement=(0,l.getStringOption)(t.placement,["left","bottom","inline","right","top"]),this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.reserve=Math.ceil((0,l.getMeasurement)(t.reserve)),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.font=null,this.margin=null,this.para=null,this.value=null}[i.$setValue](t){w(this,t)}[i.$getExtra](t){if(!this[i.$extra]){let{width:e,height:n}=t;switch(this.placement){case"left":case"right":case"inline":e=this.reserve<=0?e:this.reserve;break;case"top":case"bottom":n=this.reserve<=0?n:this.reserve}this[i.$extra]=(0,s.layoutNode)(this,{width:e,height:n})}return this[i.$extra]}[i.$toHTML](t){if(!this.value)return l.HTMLResult.EMPTY;this[i.$pushPara]();const e=this.value[i.$toHTML](t).html;if(!e)return this[i.$popPara](),l.HTMLResult.EMPTY;const n=this.reserve;if(this.reserve<=0){const{w:e,h:n}=this[i.$getExtra](t);switch(this.placement){case"left":case"right":case"inline":this.reserve=e;break;case"top":case"bottom":this.reserve=n}}const r=[];"string"==typeof e?r.push({name:"#text",value:e}):r.push(e);const o=(0,s.toStyle)(this,"font","margin","visibility");switch(this.placement){case"left":case"right":this.reserve>0&&(o.width=(0,s.measureToString)(this.reserve));break;case"top":case"bottom":this.reserve>0&&(o.height=(0,s.measureToString)(this.reserve))}return(0,s.setPara)(this,null,e),this[i.$popPara](),this.reserve=n,l.HTMLResult.success({name:"div",attributes:{style:o,class:["xfaCaption"]},children:r})}}class K extends a.StringObject{constructor(t){super(p,"certificate"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class X extends a.XFAObject{constructor(t){super(p,"certificates",!0),this.credentialServerPolicy=(0,l.getStringOption)(t.credentialServerPolicy,["optional","required"]),this.id=t.id||"",this.url=t.url||"",this.urlPolicy=t.urlPolicy||"",this.use=t.use||"",this.usehref=t.usehref||"",this.encryption=null,this.issuers=null,this.keyUsage=null,this.oids=null,this.signing=null,this.subjectDNs=null}}class G extends a.XFAObject{constructor(t){super(p,"checkButton",!0),this.id=t.id||"",this.mark=(0,l.getStringOption)(t.mark,["default","check","circle","cross","diamond","square","star"]),this.shape=(0,l.getStringOption)(t.shape,["square","round"]),this.size=(0,l.getMeasurement)(t.size,"10pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[i.$toHTML](t){const e=(0,s.toStyle)("margin"),n=(0,s.measureToString)(this.size);let r,o,a;e.width=e.height=n;const c=this[i.$getParent]()[i.$getParent](),h=c.items.children.length&&c.items.children[0][i.$toHTML]().html||[],u={on:(void 0!==h[0]?h[0]:"on").toString(),off:(void 0!==h[1]?h[1]:"off").toString()},d=(c.value?.[i.$text]()||"off")===u.on||void 0,p=c[i.$getSubformParent](),f=c[i.$uid];let g;p instanceof _t?(a=p[i.$uid],r="radio",o="xfaRadio",g=p[i.$data]?.[i.$uid]||p[i.$uid]):(r="checkbox",o="xfaCheckbox",g=c[i.$data]?.[i.$uid]||c[i.$uid]);const m={name:"input",attributes:{class:[o],style:e,fieldId:f,dataId:g,type:r,checked:d,xfaOn:u.on,xfaOff:u.off,"aria-label":k(c),"aria-required":!1}};return a&&(m.attributes.name=a),_(c)&&(m.attributes["aria-required"]=!0,m.attributes.required=!0),l.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[m]})}}class Y extends a.XFAObject{constructor(t){super(p,"choiceList",!0),this.commitOn=(0,l.getStringOption)(t.commitOn,["select","exit"]),this.id=t.id||"",this.open=(0,l.getStringOption)(t.open,["userControl","always","multiSelect","onEntry"]),this.textEntry=(0,l.getInteger)({data:t.textEntry,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[i.$toHTML](t){const e=(0,s.toStyle)(this,"border","margin"),n=this[i.$getParent]()[i.$getParent](),r={fontSize:`calc(${n.font?.size||10}px * var(--scale-factor))`},o=[];if(n.items.children.length>0){const t=n.items;let e=0,s=0;2===t.children.length&&(e=t.children[0].save,s=1-e);const a=t.children[e][i.$toHTML]().html,l=t.children[s][i.$toHTML]().html;let c=!1;const h=n.value?.[i.$text]()||"";for(let t=0,e=a.length;t<e;t++){const e={name:"option",attributes:{value:l[t]||a[t],style:r},value:a[t]};l[t]===h&&(e.attributes.selected=c=!0),o.push(e)}c||o.splice(0,0,{name:"option",attributes:{hidden:!0,selected:!0},value:" "})}const a={class:["xfaSelect"],fieldId:n[i.$uid],dataId:n[i.$data]?.[i.$uid]||n[i.$uid],style:e,"aria-label":k(n),"aria-required":!1};return _(n)&&(a["aria-required"]=!0,a.required=!0),"multiSelect"===this.open&&(a.multiple=!0),l.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[{name:"select",children:o,attributes:a}]})}}class J extends a.XFAObject{constructor(t){super(p,"color",!0),this.cSpace=(0,l.getStringOption)(t.cSpace,["SRGB"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.value=t.value?(0,l.getColor)(t.value):"",this.extras=null}[i.$hasSettableValue](){return!1}[i.$toStyle](){return this.value?c.Util.makeHexColor(this.value.r,this.value.g,this.value.b):null}}class Z extends a.XFAObject{constructor(t){super(p,"comb"),this.id=t.id||"",this.numberOfCells=(0,l.getInteger)({data:t.numberOfCells,defaultValue:0,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||""}}class Q extends a.XFAObject{constructor(t){super(p,"connect",!0),this.connection=t.connection||"",this.id=t.id||"",this.ref=t.ref||"",this.usage=(0,l.getStringOption)(t.usage,["exportAndImport","exportOnly","importOnly"]),this.use=t.use||"",this.usehref=t.usehref||"",this.picture=null}}class tt extends a.XFAObject{constructor(t){super(p,"contentArea",!0),this.h=(0,l.getMeasurement)(t.h),this.id=t.id||"",this.name=t.name||"",this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=(0,l.getMeasurement)(t.w),this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.desc=null,this.extras=null}[i.$toHTML](t){const e={left:(0,s.measureToString)(this.x),top:(0,s.measureToString)(this.y),width:(0,s.measureToString)(this.w),height:(0,s.measureToString)(this.h)},n=["xfaContentarea"];return(0,s.isPrintOnly)(this)&&n.push("xfaPrintOnly"),l.HTMLResult.success({name:"div",children:[],attributes:{style:e,class:n,id:this[i.$uid]}})}}class et extends a.XFAObject{constructor(t){super(p,"corner",!0),this.id=t.id||"",this.inverted=(0,l.getInteger)({data:t.inverted,defaultValue:0,validate:t=>1===t}),this.join=(0,l.getStringOption)(t.join,["square","round"]),this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.radius=(0,l.getMeasurement)(t.radius),this.stroke=(0,l.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,l.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](){const t=(0,s.toStyle)(this,"visibility");return t.radius=(0,s.measureToString)("square"===this.join?0:this.radius),t}}class nt extends a.ContentObject{constructor(t){super(p,"date"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=this[i.$content].trim();this[i.$content]=t?new Date(t):null}[i.$toHTML](t){return A(this[i.$content]?this[i.$content].toString():"")}}class it extends a.ContentObject{constructor(t){super(p,"dateTime"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=this[i.$content].trim();this[i.$content]=t?new Date(t):null}[i.$toHTML](t){return A(this[i.$content]?this[i.$content].toString():"")}}class rt extends a.XFAObject{constructor(t){super(p,"dateTimeEdit",!0),this.hScrollPolicy=(0,l.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.picker=(0,l.getStringOption)(t.picker,["host","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[i.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin"),n=this[i.$getParent]()[i.$getParent](),r={name:"input",attributes:{type:"text",fieldId:n[i.$uid],dataId:n[i.$data]?.[i.$uid]||n[i.$uid],class:["xfaTextfield"],style:e,"aria-label":k(n),"aria-required":!1}};return _(n)&&(r.attributes["aria-required"]=!0,r.attributes.required=!0),l.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class ot extends a.ContentObject{constructor(t){super(p,"decimal"),this.fracDigits=(0,l.getInteger)({data:t.fracDigits,defaultValue:2,validate:t=>!0}),this.id=t.id||"",this.leadDigits=(0,l.getInteger)({data:t.leadDigits,defaultValue:-1,validate:t=>!0}),this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=parseFloat(this[i.$content].trim());this[i.$content]=isNaN(t)?null:t}[i.$toHTML](t){return A(null!==this[i.$content]?this[i.$content].toString():"")}}class st extends a.XFAObject{constructor(t){super(p,"defaultUi",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class at extends a.XFAObject{constructor(t){super(p,"desc",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.time=new a.XFAObjectArray}}class lt extends a.OptionObject{constructor(t){super(p,"digestMethod",["","SHA1","SHA256","SHA512","RIPEMD160"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ct extends a.XFAObject{constructor(t){super(p,"digestMethods",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.digestMethod=new a.XFAObjectArray}}class ht extends a.XFAObject{constructor(t){super(p,"draw",!0),this.anchorType=(0,l.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,l.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,l.getMeasurement)(t.h):"",this.hAlign=(0,l.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,l.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,l.getMeasurement)(t.maxW,"0pt"),this.minH=(0,l.getMeasurement)(t.minH,"0pt"),this.minW=(0,l.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,l.getRelevant)(t.relevant),this.rotate=(0,l.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,l.getMeasurement)(t.w):"",this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.assist=null,this.border=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.value=null,this.setProperty=new a.XFAObjectArray}[i.$setValue](t){w(this,t)}[i.$toHTML](t){if(S(this),"hidden"===this.presence||"inactive"===this.presence)return l.HTMLResult.EMPTY;(0,s.fixDimensions)(this),this[i.$pushPara]();const e=this.w,n=this.h,{w:r,h:a,isBroken:c}=(0,s.layoutNode)(this,t);if(r&&""===this.w){if(c&&this[i.$getSubformParent]()[i.$isThereMoreWidth]())return this[i.$popPara](),l.HTMLResult.FAILURE;this.w=r}if(a&&""===this.h&&(this.h=a),E(this),!(0,o.checkDimensions)(this,t))return this.w=e,this.h=n,this[i.$popPara](),l.HTMLResult.FAILURE;T(this);const h=(0,s.toStyle)(this,"font","hAlign","dimensions","position","presence","rotate","anchorType","border","margin");(0,s.setMinMaxDimensions)(this,h),h.margin&&(h.padding=h.margin,delete h.margin);const u=["xfaDraw"];this.font&&u.push("xfaFont"),(0,s.isPrintOnly)(this)&&u.push("xfaPrintOnly");const d={style:h,id:this[i.$uid],class:u};this.name&&(d.xfaName=this.name);const p={name:"div",attributes:d,children:[]};C(this,d);const f=(0,s.computeBbox)(this,p,t),g=this.value?this.value[i.$toHTML](t).html:null;return null===g?(this.w=e,this.h=n,this[i.$popPara](),l.HTMLResult.success((0,s.createWrapper)(this,p),f)):(p.children.push(g),(0,s.setPara)(this,h,g),this.w=e,this.h=n,this[i.$popPara](),l.HTMLResult.success((0,s.createWrapper)(this,p),f))}}class ut extends a.XFAObject{constructor(t){super(p,"edge",!0),this.cap=(0,l.getStringOption)(t.cap,["square","butt","round"]),this.id=t.id||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.stroke=(0,l.getStringOption)(t.stroke,["solid","dashDot","dashDotDot","dashed","dotted","embossed","etched","lowered","raised"]),this.thickness=(0,l.getMeasurement)(t.thickness,"0.5pt"),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](){const t=(0,s.toStyle)(this,"visibility");if(Object.assign(t,{linecap:this.cap,width:(0,s.measureToString)(this.thickness),color:this.color?this.color[i.$toStyle]():"#000000",style:""}),"visible"!==this.presence)t.style="none";else switch(this.stroke){case"solid":t.style="solid";break;case"dashDot":case"dashDotDot":case"dashed":t.style="dashed";break;case"dotted":t.style="dotted";break;case"embossed":t.style="ridge";break;case"etched":t.style="groove";break;case"lowered":t.style="inset";break;case"raised":t.style="outset"}return t}}class dt extends a.OptionObject{constructor(t){super(p,"encoding",["adbe.x509.rsa_sha1","adbe.pkcs7.detached","adbe.pkcs7.sha1"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class pt extends a.XFAObject{constructor(t){super(p,"encodings",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encoding=new a.XFAObjectArray}}class ft extends a.XFAObject{constructor(t){super(p,"encrypt",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=null}}class gt extends a.XFAObject{constructor(t){super(p,"encryptData",!0),this.id=t.id||"",this.operation=(0,l.getStringOption)(t.operation,["encrypt","decrypt"]),this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class mt extends a.XFAObject{constructor(t){super(p,"encryption",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new a.XFAObjectArray}}class yt extends a.OptionObject{constructor(t){super(p,"encryptionMethod",["","AES256-CBC","TRIPLEDES-CBC","AES128-CBC","AES192-CBC"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class vt extends a.XFAObject{constructor(t){super(p,"encryptionMethods",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.encryptionMethod=new a.XFAObjectArray}}class bt extends a.XFAObject{constructor(t){super(p,"event",!0),this.activity=(0,l.getStringOption)(t.activity,["click","change","docClose","docReady","enter","exit","full","indexChange","initialize","mouseDown","mouseEnter","mouseExit","mouseUp","postExecute","postOpen","postPrint","postSave","postSign","postSubmit","preExecute","preOpen","prePrint","preSave","preSign","preSubmit","ready","validationState"]),this.id=t.id||"",this.listen=(0,l.getStringOption)(t.listen,["refOnly","refAndDescendents"]),this.name=t.name||"",this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.encryptData=null,this.execute=null,this.script=null,this.signData=null,this.submit=null}}class wt extends a.ContentObject{constructor(t){super(p,"exData"),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.maxLength=(0,l.getInteger)({data:t.maxLength,defaultValue:-1,validate:t=>t>=-1}),this.name=t.name||"",this.rid=t.rid||"",this.transferEncoding=(0,l.getStringOption)(t.transferEncoding,["none","base64","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[i.$isCDATAXml](){return"text/html"===this.contentType}[i.$onChild](t){return("text/html"===this.contentType&&t[i.$namespaceId]===r.NamespaceIds.xhtml.id||"text/xml"===this.contentType)&&(this[i.$content]=t,!0)}[i.$toHTML](t){return"text/html"===this.contentType&&this[i.$content]?this[i.$content][i.$toHTML](t):l.HTMLResult.EMPTY}}class xt extends a.XFAObject{constructor(t){super(p,"exObject",!0),this.archive=t.archive||"",this.classId=t.classId||"",this.codeBase=t.codeBase||"",this.codeType=t.codeType||"",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.boolean=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.exObject=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.time=new a.XFAObjectArray}}class _t extends a.XFAObject{constructor(t){super(p,"exclGroup",!0),this.access=(0,l.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,l.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,l.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,l.getMeasurement)(t.h):"",this.hAlign=(0,l.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,l.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.maxH=(0,l.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,l.getMeasurement)(t.maxW,"0pt"),this.minH=(0,l.getMeasurement)(t.minH,"0pt"),this.minW=(0,l.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,l.getMeasurement)(t.w):"",this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.margin=null,this.para=null,this.traversal=null,this.validate=null,this.connect=new a.XFAObjectArray,this.event=new a.XFAObjectArray,this.field=new a.XFAObjectArray,this.setProperty=new a.XFAObjectArray}[i.$isBindable](){return!0}[i.$hasSettableValue](){return!0}[i.$setValue](t){for(const e of this.field.children){if(!e.value){const t=new Pe({});e[i.$appendChild](t),e.value=t}e.value[i.$setValue](t)}}[i.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[i.$extra].attempt&&this[i.$extra].numberInLine>0||this[i.$getParent]()[i.$isThereMoreWidth]()}[i.$isSplittable](){const t=this[i.$getSubformParent]();return!!t[i.$isSplittable]()&&(void 0!==this[i.$extra]._isSplittable?this[i.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")?(this[i.$extra]._isSplittable=!1,!1):!(t.layout?.endsWith("-tb")&&0!==t[i.$extra].numberInLine||(this[i.$extra]._isSplittable=!0,0)))}[i.$flushHTML](){return(0,o.flushHTML)(this)}[i.$addHTML](t,e){(0,o.addHTML)(this,t,e)}[i.$getAvailableSpace](){return(0,o.getAvailableSpace)(this)}[i.$toHTML](t){if(S(this),"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return l.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const e=[],n={id:this[i.$uid],class:[]};(0,s.setAccess)(this,n.class),this[i.$extra]||(this[i.$extra]=Object.create(null)),Object.assign(this[i.$extra],{children:e,attributes:n,attempt:0,line:null,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[i.$isSplittable]();if(r||E(this),!(0,o.checkDimensions)(this,t))return l.HTMLResult.FAILURE;const a=new Set(["field"]);if(this.layout.includes("row")){const t=this[i.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[i.$extra].columnWidths=t,this[i.$extra].currentColumn=0)}const c=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),h=["xfaExclgroup"],u=(0,s.layoutClass)(this);u&&h.push(u),(0,s.isPrintOnly)(this)&&h.push("xfaPrintOnly"),n.style=c,n.class=h,this.name&&(n.xfaName=this.name),this[i.$pushPara]();const d="lr-tb"===this.layout||"rl-tb"===this.layout,p=d?2:1;for(;this[i.$extra].attempt<p;this[i.$extra].attempt++){d&&1===this[i.$extra].attempt&&(this[i.$extra].numberInLine=0);const t=this[i.$childrenToHTML]({filter:a,include:!0});if(t.success)break;if(t.isBreak())return this[i.$popPara](),t;if(d&&0===this[i.$extra].attempt&&0===this[i.$extra].numberInLine&&!this[i.$getTemplateRoot]()[i.$extra].noLayoutFailure){this[i.$extra].attempt=p;break}}if(this[i.$popPara](),r||T(this),this[i.$extra].attempt===p)return r||delete this[i.$extra],l.HTMLResult.FAILURE;let f=0,g=0;this.margin&&(f=this.margin.leftInset+this.margin.rightInset,g=this.margin.topInset+this.margin.bottomInset);const m=Math.max(this[i.$extra].width+f,this.w||0),y=Math.max(this[i.$extra].height+g,this.h||0),v=[this.x,this.y,m,y];""===this.w&&(c.width=(0,s.measureToString)(m)),""===this.h&&(c.height=(0,s.measureToString)(y));const b={name:"div",attributes:n,children:e};return C(this,n),delete this[i.$extra],l.HTMLResult.success((0,s.createWrapper)(this,b),v)}}class St extends a.XFAObject{constructor(t){super(p,"execute"),this.connection=t.connection||"",this.executeType=(0,l.getStringOption)(t.executeType,["import","remerge"]),this.id=t.id||"",this.runAt=(0,l.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Ct extends a.XFAObject{constructor(t){super(p,"extras",!0),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.extras=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.time=new a.XFAObjectArray}}class kt extends a.XFAObject{constructor(t){super(p,"field",!0),this.access=(0,l.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.accessKey=t.accessKey||"",this.anchorType=(0,l.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,l.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.h=t.h?(0,l.getMeasurement)(t.h):"",this.hAlign=(0,l.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.locale=t.locale||"",this.maxH=(0,l.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,l.getMeasurement)(t.maxW,"0pt"),this.minH=(0,l.getMeasurement)(t.minH,"0pt"),this.minW=(0,l.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,l.getRelevant)(t.relevant),this.rotate=(0,l.getInteger)({data:t.rotate,defaultValue:0,validate:t=>t%90==0}),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,l.getMeasurement)(t.w):"",this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.border=null,this.calculate=null,this.caption=null,this.desc=null,this.extras=null,this.font=null,this.format=null,this.items=new a.XFAObjectArray(2),this.keep=null,this.margin=null,this.para=null,this.traversal=null,this.ui=null,this.validate=null,this.value=null,this.bindItems=new a.XFAObjectArray,this.connect=new a.XFAObjectArray,this.event=new a.XFAObjectArray,this.setProperty=new a.XFAObjectArray}[i.$isBindable](){return!0}[i.$setValue](t){w(this,t)}[i.$toHTML](t){if(S(this),!this.ui){let t;switch(this.ui=new De({}),this.ui[i.$globalData]=this[i.$globalData],this[i.$appendChild](this.ui),this.items.children.length){case 0:t=new Ae({}),this.ui.textEdit=t;break;case 1:t=new G({}),this.ui.checkButton=t;break;case 2:t=new Y({}),this.ui.choiceList=t}this.ui[i.$appendChild](t)}if(!this.ui||"hidden"===this.presence||"inactive"===this.presence||0===this.h||0===this.w)return l.HTMLResult.EMPTY;this.caption&&delete this.caption[i.$extra],this[i.$pushPara]();const e=this.caption?this.caption[i.$toHTML](t).html:null,n=this.w,r=this.h;let a=0,c=0;this.margin&&(a=this.margin.leftInset+this.margin.rightInset,c=this.margin.topInset+this.margin.bottomInset);let u=null;if(""===this.w||""===this.h){let e=null,n=null,r=0,o=0;if(this.ui.checkButton)r=o=this.ui.checkButton.size;else{const{w:e,h:n}=(0,s.layoutNode)(this,t);null!==e?(r=e,o=n):o=(0,h.getMetrics)(this.font,!0).lineNoGap}if(u=v(this.ui[i.$getExtra]()),r+=u.w,o+=u.h,this.caption){const{w:s,h:a,isBroken:c}=this.caption[i.$getExtra](t);if(c&&this[i.$getSubformParent]()[i.$isThereMoreWidth]())return this[i.$popPara](),l.HTMLResult.FAILURE;switch(e=s,n=a,this.caption.placement){case"left":case"right":case"inline":e+=r;break;case"top":case"bottom":n+=o}}else e=r,n=o;e&&""===this.w&&(e+=a,this.w=Math.min(this.maxW<=0?1/0:this.maxW,this.minW+1<e?e:this.minW)),n&&""===this.h&&(n+=c,this.h=Math.min(this.maxH<=0?1/0:this.maxH,this.minH+1<n?n:this.minH))}if(this[i.$popPara](),(0,s.fixDimensions)(this),E(this),!(0,o.checkDimensions)(this,t))return this.w=n,this.h=r,this[i.$popPara](),l.HTMLResult.FAILURE;T(this);const d=(0,s.toStyle)(this,"font","dimensions","position","rotate","anchorType","presence","margin","hAlign");(0,s.setMinMaxDimensions)(this,d);const p=["xfaField"];this.font&&p.push("xfaFont"),(0,s.isPrintOnly)(this)&&p.push("xfaPrintOnly");const f={style:d,id:this[i.$uid],class:p};d.margin&&(d.padding=d.margin,delete d.margin),(0,s.setAccess)(this,p),this.name&&(f.xfaName=this.name);const g=[],m={name:"div",attributes:f,children:g};C(this,f);const y=this.border?this.border[i.$toStyle]():null,b=(0,s.computeBbox)(this,m,t),w=this.ui[i.$toHTML]().html;if(!w)return Object.assign(d,y),l.HTMLResult.success((0,s.createWrapper)(this,m),b);this[i.$tabIndex]&&(w.children?.[0]?w.children[0].attributes.tabindex=this[i.$tabIndex]:w.attributes.tabindex=this[i.$tabIndex]),w.attributes.style||(w.attributes.style=Object.create(null));let x=null;if(this.ui.button?(1===w.children.length&&([x]=w.children.splice(0,1)),Object.assign(w.attributes.style,y)):Object.assign(d,y),g.push(w),this.value)if(this.ui.imageEdit)w.children.push(this.value[i.$toHTML]().html);else if(!this.ui.button){let t="";if(this.value.exData)t=this.value.exData[i.$text]();else if(this.value.text)t=this.value.text[i.$getExtra]();else{const e=this.value[i.$toHTML]().html;null!==e&&(t=e.children[0].value)}this.ui.textEdit&&this.value.text?.maxChars&&(w.children[0].attributes.maxLength=this.value.text.maxChars),t&&(this.ui.numericEdit&&(t=parseFloat(t),t=isNaN(t)?"":t.toString()),"textarea"===w.children[0].name?w.children[0].attributes.textContent=t:w.children[0].attributes.value=t)}if(!this.ui.imageEdit&&w.children?.[0]&&this.h){u=u||v(this.ui[i.$getExtra]());let e=0;if(this.caption&&["top","bottom"].includes(this.caption.placement)){e=this.caption.reserve,e<=0&&(e=this.caption[i.$getExtra](t).h);const n=this.h-e-c-u.h;w.children[0].attributes.style.height=(0,s.measureToString)(n)}else w.children[0].attributes.style.height="100%"}if(x&&w.children.push(x),!e)return w.attributes.class&&w.attributes.class.push("xfaLeft"),this.w=n,this.h=r,l.HTMLResult.success((0,s.createWrapper)(this,m),b);if(this.ui.button)return d.padding&&delete d.padding,"div"===e.name&&(e.name="span"),w.children.push(e),l.HTMLResult.success(m,b);switch(this.ui.checkButton&&(e.attributes.class[0]="xfaCaptionForCheckButton"),w.attributes.class||(w.attributes.class=[]),w.children.splice(0,0,e),this.caption.placement){case"left":case"inline":w.attributes.class.push("xfaLeft");break;case"right":w.attributes.class.push("xfaRight");break;case"top":w.attributes.class.push("xfaTop");break;case"bottom":w.attributes.class.push("xfaBottom")}return this.w=n,this.h=r,l.HTMLResult.success((0,s.createWrapper)(this,m),b)}}e.Field=kt;class At extends a.XFAObject{constructor(t){super(p,"fill",!0),this.id=t.id||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null,this.linear=null,this.pattern=null,this.radial=null,this.solid=null,this.stipple=null}[i.$toStyle](){const t=this[i.$getParent](),e=t[i.$getParent]()[i.$getParent](),n=Object.create(null);let r="color",o=r;t instanceof z&&(r="background-color",o="background",e instanceof De&&(n.backgroundColor="white")),(t instanceof ce||t instanceof D)&&(r=o="fill",n.fill="white");for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"color"===t)continue;const e=this[t];if(!(e instanceof a.XFAObject))continue;const s=e[i.$toStyle](this.color);return s&&(n[s.startsWith("#")?r:o]=s),n}if(this.color?.value){const t=this.color[i.$toStyle]();n[t.startsWith("#")?r:o]=t}return n}}class Et extends a.XFAObject{constructor(t){super(p,"filter",!0),this.addRevocationInfo=(0,l.getStringOption)(t.addRevocationInfo,["","required","optional","none"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.version=(0,l.getInteger)({data:this.version,defaultValue:5,validate:t=>t>=1&&t<=5}),this.appearanceFilter=null,this.certificates=null,this.digestMethods=null,this.encodings=null,this.encryptionMethods=null,this.handler=null,this.lockDocument=null,this.mdp=null,this.reasons=null,this.timeStamp=null}}class Tt extends a.ContentObject{constructor(t){super(p,"float"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=parseFloat(this[i.$content].trim());this[i.$content]=isNaN(t)?null:t}[i.$toHTML](t){return A(null!==this[i.$content]?this[i.$content].toString():"")}}class Mt extends a.XFAObject{constructor(t){super(p,"font",!0),this.baselineShift=(0,l.getMeasurement)(t.baselineShift),this.fontHorizontalScale=(0,l.getFloat)({data:t.fontHorizontalScale,defaultValue:100,validate:t=>t>=0}),this.fontVerticalScale=(0,l.getFloat)({data:t.fontVerticalScale,defaultValue:100,validate:t=>t>=0}),this.id=t.id||"",this.kerningMode=(0,l.getStringOption)(t.kerningMode,["none","pair"]),this.letterSpacing=(0,l.getMeasurement)(t.letterSpacing,"0"),this.lineThrough=(0,l.getInteger)({data:t.lineThrough,defaultValue:0,validate:t=>1===t||2===t}),this.lineThroughPeriod=(0,l.getStringOption)(t.lineThroughPeriod,["all","word"]),this.overline=(0,l.getInteger)({data:t.overline,defaultValue:0,validate:t=>1===t||2===t}),this.overlinePeriod=(0,l.getStringOption)(t.overlinePeriod,["all","word"]),this.posture=(0,l.getStringOption)(t.posture,["normal","italic"]),this.size=(0,l.getMeasurement)(t.size,"10pt"),this.typeface=t.typeface||"Courier",this.underline=(0,l.getInteger)({data:t.underline,defaultValue:0,validate:t=>1===t||2===t}),this.underlinePeriod=(0,l.getStringOption)(t.underlinePeriod,["all","word"]),this.use=t.use||"",this.usehref=t.usehref||"",this.weight=(0,l.getStringOption)(t.weight,["normal","bold"]),this.extras=null,this.fill=null}[i.$clean](t){super[i.$clean](t),this[i.$globalData].usedTypefaces.add(this.typeface)}[i.$toStyle](){const t=(0,s.toStyle)(this,"fill"),e=t.color;return e&&("#000000"===e?delete t.color:e.startsWith("#")||(t.background=e,t.backgroundClip="text",t.color="transparent")),this.baselineShift&&(t.verticalAlign=(0,s.measureToString)(this.baselineShift)),t.fontKerning="none"===this.kerningMode?"none":"normal",t.letterSpacing=(0,s.measureToString)(this.letterSpacing),0!==this.lineThrough&&(t.textDecoration="line-through",2===this.lineThrough&&(t.textDecorationStyle="double")),0!==this.overline&&(t.textDecoration="overline",2===this.overline&&(t.textDecorationStyle="double")),t.fontStyle=this.posture,t.fontSize=(0,s.measureToString)(.99*this.size),(0,s.setFontFamily)(this,this,this[i.$globalData].fontFinder,t),0!==this.underline&&(t.textDecoration="underline",2===this.underline&&(t.textDecorationStyle="double")),t.fontWeight=this.weight,t}}class Ot extends a.XFAObject{constructor(t){super(p,"format",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null}}class It extends a.StringObject{constructor(t){super(p,"handler"),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Dt extends a.XFAObject{constructor(t){super(p,"hyphenation"),this.excludeAllCaps=(0,l.getInteger)({data:t.excludeAllCaps,defaultValue:0,validate:t=>1===t}),this.excludeInitialCap=(0,l.getInteger)({data:t.excludeInitialCap,defaultValue:0,validate:t=>1===t}),this.hyphenate=(0,l.getInteger)({data:t.hyphenate,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.pushCharacterCount=(0,l.getInteger)({data:t.pushCharacterCount,defaultValue:3,validate:t=>t>=0}),this.remainCharacterCount=(0,l.getInteger)({data:t.remainCharacterCount,defaultValue:3,validate:t=>t>=0}),this.use=t.use||"",this.usehref=t.usehref||"",this.wordCharacterCount=(0,l.getInteger)({data:t.wordCharacterCount,defaultValue:7,validate:t=>t>=0})}}class Ft extends a.StringObject{constructor(t){super(p,"image"),this.aspect=(0,l.getStringOption)(t.aspect,["fit","actual","height","none","width"]),this.contentType=t.contentType||"",this.href=t.href||"",this.id=t.id||"",this.name=t.name||"",this.transferEncoding=(0,l.getStringOption)(t.transferEncoding,["base64","none","package"]),this.use=t.use||"",this.usehref=t.usehref||""}[i.$toHTML](){if(this.contentType&&!m.has(this.contentType.toLowerCase()))return l.HTMLResult.EMPTY;let t=this[i.$globalData].images&&this[i.$globalData].images.get(this.href);if(!t&&(this.href||!this[i.$content]))return l.HTMLResult.EMPTY;if(t||"base64"!==this.transferEncoding||(t=(0,c.stringToBytes)(atob(this[i.$content]))),!t)return l.HTMLResult.EMPTY;if(!this.contentType){for(const[e,n]of y)if(t.length>e.length&&e.every(((e,n)=>e===t[n]))){this.contentType=n;break}if(!this.contentType)return l.HTMLResult.EMPTY}const e=new Blob([t],{type:this.contentType});let n;switch(this.aspect){case"fit":case"actual":break;case"height":n={height:"100%",objectFit:"fill"};break;case"none":n={width:"100%",height:"100%",objectFit:"fill"};break;case"width":n={width:"100%",objectFit:"fill"}}const r=this[i.$getParent]();return l.HTMLResult.success({name:"img",attributes:{class:["xfaImage"],style:n,src:URL.createObjectURL(e),alt:r?k(r[i.$getParent]()):null}})}}class Pt extends a.XFAObject{constructor(t){super(p,"imageEdit",!0),this.data=(0,l.getStringOption)(t.data,["link","embed"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}[i.$toHTML](t){return"embed"===this.data?l.HTMLResult.success({name:"div",children:[],attributes:{}}):l.HTMLResult.EMPTY}}class Rt extends a.ContentObject{constructor(t){super(p,"integer"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=parseInt(this[i.$content].trim(),10);this[i.$content]=isNaN(t)?null:t}[i.$toHTML](t){return A(null!==this[i.$content]?this[i.$content].toString():"")}}class Lt extends a.XFAObject{constructor(t){super(p,"issuers",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new a.XFAObjectArray}}class Nt extends a.XFAObject{constructor(t){super(p,"items",!0),this.id=t.id||"",this.name=t.name||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.ref=t.ref||"",this.save=(0,l.getInteger)({data:t.save,defaultValue:0,validate:t=>1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.time=new a.XFAObjectArray}[i.$toHTML](){const t=[];for(const e of this[i.$getChildren]())t.push(e[i.$text]());return l.HTMLResult.success(t)}}e.Items=Nt;class Bt extends a.XFAObject{constructor(t){super(p,"keep",!0),this.id=t.id||"";const e=["none","contentArea","pageArea"];this.intact=(0,l.getStringOption)(t.intact,e),this.next=(0,l.getStringOption)(t.next,e),this.previous=(0,l.getStringOption)(t.previous,e),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}}class jt extends a.XFAObject{constructor(t){super(p,"keyUsage");const e=["","yes","no"];this.crlSign=(0,l.getStringOption)(t.crlSign,e),this.dataEncipherment=(0,l.getStringOption)(t.dataEncipherment,e),this.decipherOnly=(0,l.getStringOption)(t.decipherOnly,e),this.digitalSignature=(0,l.getStringOption)(t.digitalSignature,e),this.encipherOnly=(0,l.getStringOption)(t.encipherOnly,e),this.id=t.id||"",this.keyAgreement=(0,l.getStringOption)(t.keyAgreement,e),this.keyCertSign=(0,l.getStringOption)(t.keyCertSign,e),this.keyEncipherment=(0,l.getStringOption)(t.keyEncipherment,e),this.nonRepudiation=(0,l.getStringOption)(t.nonRepudiation,e),this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class zt extends a.XFAObject{constructor(t){super(p,"line",!0),this.hand=(0,l.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.slope=(0,l.getStringOption)(t.slope,["\\","/"]),this.use=t.use||"",this.usehref=t.usehref||"",this.edge=null}[i.$toHTML](){const t=this[i.$getParent]()[i.$getParent](),e=this.edge||new ut({}),n=e[i.$toStyle](),r=Object.create(null),o="visible"===e.presence?e.thickness:0;let a,c,h,u;r.strokeWidth=(0,s.measureToString)(o),r.stroke=n.color;let d="100%",p="100%";t.w<=o?([a,c,h,u]=["50%",0,"50%","100%"],d=r.strokeWidth):t.h<=o?([a,c,h,u]=[0,"50%","100%","50%"],p=r.strokeWidth):"\\"===this.slope?[a,c,h,u]=[0,0,"100%","100%"]:[a,c,h,u]=[0,"100%","100%",0];const g={name:"svg",children:[{name:"line",attributes:{xmlns:f,x1:a,y1:c,x2:h,y2:u,style:r}}],attributes:{xmlns:f,width:d,height:p,style:{overflow:"visible"}}};return b(t)?l.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[g]}):(g.attributes.style.position="absolute",l.HTMLResult.success(g))}}class $t extends a.XFAObject{constructor(t){super(p,"linear",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["toRight","toBottom","toLeft","toTop"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](t){return t=t?t[i.$toStyle]():"#FFFFFF",`linear-gradient(${this.type.replace(/([RBLT])/," $1").toLowerCase()}, ${t}, ${this.color?this.color[i.$toStyle]():"#000000"})`}}class Ht extends a.ContentObject{constructor(t){super(p,"lockDocument"),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){this[i.$content]=(0,l.getStringOption)(this[i.$content],["auto","0","1"])}}class Ut extends a.XFAObject{constructor(t){super(p,"manifest",!0),this.action=(0,l.getStringOption)(t.action,["include","all","exclude"]),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.ref=new a.XFAObjectArray}}class Vt extends a.XFAObject{constructor(t){super(p,"margin",!0),this.bottomInset=(0,l.getMeasurement)(t.bottomInset,"0"),this.id=t.id||"",this.leftInset=(0,l.getMeasurement)(t.leftInset,"0"),this.rightInset=(0,l.getMeasurement)(t.rightInset,"0"),this.topInset=(0,l.getMeasurement)(t.topInset,"0"),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[i.$toStyle](){return{margin:(0,s.measureToString)(this.topInset)+" "+(0,s.measureToString)(this.rightInset)+" "+(0,s.measureToString)(this.bottomInset)+" "+(0,s.measureToString)(this.leftInset)}}}class Wt extends a.XFAObject{constructor(t){super(p,"mdp"),this.id=t.id||"",this.permissions=(0,l.getInteger)({data:t.permissions,defaultValue:2,validate:t=>1===t||3===t}),this.signatureType=(0,l.getStringOption)(t.signatureType,["filler","author"]),this.use=t.use||"",this.usehref=t.usehref||""}}class qt extends a.XFAObject{constructor(t){super(p,"medium"),this.id=t.id||"",this.imagingBBox=(0,l.getBBox)(t.imagingBBox),this.long=(0,l.getMeasurement)(t.long),this.orientation=(0,l.getStringOption)(t.orientation,["portrait","landscape"]),this.short=(0,l.getMeasurement)(t.short),this.stock=t.stock||"",this.trayIn=(0,l.getStringOption)(t.trayIn,["auto","delegate","pageFront"]),this.trayOut=(0,l.getStringOption)(t.trayOut,["auto","delegate"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Kt extends a.XFAObject{constructor(t){super(p,"message",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.text=new a.XFAObjectArray}}class Xt extends a.XFAObject{constructor(t){super(p,"numericEdit",!0),this.hScrollPolicy=(0,l.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.comb=null,this.extras=null,this.margin=null}[i.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin"),n=this[i.$getParent]()[i.$getParent](),r={name:"input",attributes:{type:"text",fieldId:n[i.$uid],dataId:n[i.$data]?.[i.$uid]||n[i.$uid],class:["xfaTextfield"],style:e,"aria-label":k(n),"aria-required":!1}};return _(n)&&(r.attributes["aria-required"]=!0,r.attributes.required=!0),l.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[r]})}}class Gt extends a.XFAObject{constructor(t){super(p,"occur",!0),this.id=t.id||"",this.initial=""!==t.initial?(0,l.getInteger)({data:t.initial,defaultValue:"",validate:t=>!0}):"",this.max=""!==t.max?(0,l.getInteger)({data:t.max,defaultValue:1,validate:t=>!0}):"",this.min=""!==t.min?(0,l.getInteger)({data:t.min,defaultValue:1,validate:t=>!0}):"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[i.$clean](){const t=this[i.$getParent](),e=this.min;""===this.min&&(this.min=t instanceof Qt||t instanceof te?0:1),""===this.max&&(this.max=""===e?t instanceof Qt||t instanceof te?-1:1:this.min),-1!==this.max&&this.max<this.min&&(this.max=this.min),""===this.initial&&(this.initial=t instanceof Ce?1:this.min)}}class Yt extends a.StringObject{constructor(t){super(p,"oid"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Jt extends a.XFAObject{constructor(t){super(p,"oids",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.oid=new a.XFAObjectArray}}class Zt extends a.XFAObject{constructor(t){super(p,"overflow"),this.id=t.id||"",this.leader=t.leader||"",this.target=t.target||"",this.trailer=t.trailer||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$getExtra](){if(!this[i.$extra]){const t=this[i.$getParent](),e=this[i.$getTemplateRoot](),n=e[i.$searchNode](this.target,t),r=e[i.$searchNode](this.leader,t),o=e[i.$searchNode](this.trailer,t);this[i.$extra]={target:n?.[0]||null,leader:r?.[0]||null,trailer:o?.[0]||null,addLeader:!1,addTrailer:!1}}return this[i.$extra]}}class Qt extends a.XFAObject{constructor(t){super(p,"pageArea",!0),this.blankOrNotBlank=(0,l.getStringOption)(t.blankOrNotBlank,["any","blank","notBlank"]),this.id=t.id||"",this.initialNumber=(0,l.getInteger)({data:t.initialNumber,defaultValue:1,validate:t=>!0}),this.name=t.name||"",this.numbered=(0,l.getInteger)({data:t.numbered,defaultValue:1,validate:t=>!0}),this.oddOrEven=(0,l.getStringOption)(t.oddOrEven,["any","even","odd"]),this.pagePosition=(0,l.getStringOption)(t.pagePosition,["any","first","last","only","rest"]),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.desc=null,this.extras=null,this.medium=null,this.occur=null,this.area=new a.XFAObjectArray,this.contentArea=new a.XFAObjectArray,this.draw=new a.XFAObjectArray,this.exclGroup=new a.XFAObjectArray,this.field=new a.XFAObjectArray,this.subform=new a.XFAObjectArray}[i.$isUsable](){return this[i.$extra]?!this.occur||-1===this.occur.max||this[i.$extra].numberOfUse<this.occur.max:(this[i.$extra]={numberOfUse:0},!0)}[i.$cleanPage](){delete this[i.$extra]}[i.$getNextPage](){this[i.$extra]||(this[i.$extra]={numberOfUse:0});const t=this[i.$getParent]();return"orderedOccurrence"===t.relation&&this[i.$isUsable]()?(this[i.$extra].numberOfUse+=1,this):t[i.$getNextPage]()}[i.$getAvailableSpace](){return this[i.$extra].space||{width:0,height:0}}[i.$toHTML](){this[i.$extra]||(this[i.$extra]={numberOfUse:1});const t=[];this[i.$extra].children=t;const e=Object.create(null);if(this.medium&&this.medium.short&&this.medium.long){if(e.width=(0,s.measureToString)(this.medium.short),e.height=(0,s.measureToString)(this.medium.long),this[i.$extra].space={width:this.medium.short,height:this.medium.long},"landscape"===this.medium.orientation){const t=e.width;e.width=e.height,e.height=t,this[i.$extra].space={width:this.medium.long,height:this.medium.short}}}else(0,c.warn)("XFA - No medium specified in pageArea: please file a bug.");return this[i.$childrenToHTML]({filter:new Set(["area","draw","field","subform"]),include:!0}),this[i.$childrenToHTML]({filter:new Set(["contentArea"]),include:!0}),l.HTMLResult.success({name:"div",children:t,attributes:{class:["xfaPage"],id:this[i.$uid],style:e,xfaName:this.name}})}}class te extends a.XFAObject{constructor(t){super(p,"pageSet",!0),this.duplexImposition=(0,l.getStringOption)(t.duplexImposition,["longEdge","shortEdge"]),this.id=t.id||"",this.name=t.name||"",this.relation=(0,l.getStringOption)(t.relation,["orderedOccurrence","duplexPaginated","simplexPaginated"]),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.occur=null,this.pageArea=new a.XFAObjectArray,this.pageSet=new a.XFAObjectArray}[i.$cleanPage](){for(const t of this.pageArea.children)t[i.$cleanPage]();for(const t of this.pageSet.children)t[i.$cleanPage]()}[i.$isUsable](){return!this.occur||-1===this.occur.max||this[i.$extra].numberOfUse<this.occur.max}[i.$getNextPage](){if(this[i.$extra]||(this[i.$extra]={numberOfUse:1,pageIndex:-1,pageSetIndex:-1}),"orderedOccurrence"===this.relation){if(this[i.$extra].pageIndex+1<this.pageArea.children.length)return this[i.$extra].pageIndex+=1,this.pageArea.children[this[i.$extra].pageIndex][i.$getNextPage]();if(this[i.$extra].pageSetIndex+1<this.pageSet.children.length)return this[i.$extra].pageSetIndex+=1,this.pageSet.children[this[i.$extra].pageSetIndex][i.$getNextPage]();if(this[i.$isUsable]())return this[i.$extra].numberOfUse+=1,this[i.$extra].pageIndex=-1,this[i.$extra].pageSetIndex=-1,this[i.$getNextPage]();const t=this[i.$getParent]();return t instanceof te?t[i.$getNextPage]():(this[i.$cleanPage](),this[i.$getNextPage]())}const t=this[i.$getTemplateRoot]()[i.$extra].pageNumber,e=t%2==0?"even":"odd",n=0===t?"first":"rest";let r=this.pageArea.children.find((t=>t.oddOrEven===e&&t.pagePosition===n));return r||(r=this.pageArea.children.find((t=>"any"===t.oddOrEven&&t.pagePosition===n)),r||(r=this.pageArea.children.find((t=>"any"===t.oddOrEven&&"any"===t.pagePosition)),r||this.pageArea.children[0]))}}class ee extends a.XFAObject{constructor(t){super(p,"para",!0),this.hAlign=(0,l.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.lineHeight=t.lineHeight?(0,l.getMeasurement)(t.lineHeight,"0pt"):"",this.marginLeft=t.marginLeft?(0,l.getMeasurement)(t.marginLeft,"0pt"):"",this.marginRight=t.marginRight?(0,l.getMeasurement)(t.marginRight,"0pt"):"",this.orphans=(0,l.getInteger)({data:t.orphans,defaultValue:0,validate:t=>t>=0}),this.preserve=t.preserve||"",this.radixOffset=t.radixOffset?(0,l.getMeasurement)(t.radixOffset,"0pt"):"",this.spaceAbove=t.spaceAbove?(0,l.getMeasurement)(t.spaceAbove,"0pt"):"",this.spaceBelow=t.spaceBelow?(0,l.getMeasurement)(t.spaceBelow,"0pt"):"",this.tabDefault=t.tabDefault?(0,l.getMeasurement)(this.tabDefault):"",this.tabStops=(t.tabStops||"").trim().split(/\s+/).map(((t,e)=>e%2==1?(0,l.getMeasurement)(t):t)),this.textIndent=t.textIndent?(0,l.getMeasurement)(t.textIndent,"0pt"):"",this.use=t.use||"",this.usehref=t.usehref||"",this.vAlign=(0,l.getStringOption)(t.vAlign,["top","bottom","middle"]),this.widows=(0,l.getInteger)({data:t.widows,defaultValue:0,validate:t=>t>=0}),this.hyphenation=null}[i.$toStyle](){const t=(0,s.toStyle)(this,"hAlign");return""!==this.marginLeft&&(t.paddingLeft=(0,s.measureToString)(this.marginLeft)),""!==this.marginRight&&(t.paddingight=(0,s.measureToString)(this.marginRight)),""!==this.spaceAbove&&(t.paddingTop=(0,s.measureToString)(this.spaceAbove)),""!==this.spaceBelow&&(t.paddingBottom=(0,s.measureToString)(this.spaceBelow)),""!==this.textIndent&&(t.textIndent=(0,s.measureToString)(this.textIndent),(0,s.fixTextIndent)(t)),this.lineHeight>0&&(t.lineHeight=(0,s.measureToString)(this.lineHeight)),""!==this.tabDefault&&(t.tabSize=(0,s.measureToString)(this.tabDefault)),this.tabStops.length,this.hyphenatation&&Object.assign(t,this.hyphenatation[i.$toStyle]()),t}}class ne extends a.XFAObject{constructor(t){super(p,"passwordEdit",!0),this.hScrollPolicy=(0,l.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.passwordChar=t.passwordChar||"*",this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.margin=null}}class ie extends a.XFAObject{constructor(t){super(p,"pattern",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["crossHatch","crossDiagonal","diagonalLeft","diagonalRight","horizontal","vertical"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](t){t=t?t[i.$toStyle]():"#FFFFFF";const e=this.color?this.color[i.$toStyle]():"#000000",n="repeating-linear-gradient",r=`${t},${t} 5px,${e} 5px,${e} 10px`;switch(this.type){case"crossHatch":return`${n}(to top,${r}) ${n}(to right,${r})`;case"crossDiagonal":return`${n}(45deg,${r}) ${n}(-45deg,${r})`;case"diagonalLeft":return`${n}(45deg,${r})`;case"diagonalRight":return`${n}(-45deg,${r})`;case"horizontal":return`${n}(to top,${r})`;case"vertical":return`${n}(to right,${r})`}return""}}class re extends a.StringObject{constructor(t){super(p,"picture"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class oe extends a.XFAObject{constructor(t){super(p,"proto",!0),this.appearanceFilter=new a.XFAObjectArray,this.arc=new a.XFAObjectArray,this.area=new a.XFAObjectArray,this.assist=new a.XFAObjectArray,this.barcode=new a.XFAObjectArray,this.bindItems=new a.XFAObjectArray,this.bookend=new a.XFAObjectArray,this.boolean=new a.XFAObjectArray,this.border=new a.XFAObjectArray,this.break=new a.XFAObjectArray,this.breakAfter=new a.XFAObjectArray,this.breakBefore=new a.XFAObjectArray,this.button=new a.XFAObjectArray,this.calculate=new a.XFAObjectArray,this.caption=new a.XFAObjectArray,this.certificate=new a.XFAObjectArray,this.certificates=new a.XFAObjectArray,this.checkButton=new a.XFAObjectArray,this.choiceList=new a.XFAObjectArray,this.color=new a.XFAObjectArray,this.comb=new a.XFAObjectArray,this.connect=new a.XFAObjectArray,this.contentArea=new a.XFAObjectArray,this.corner=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.dateTimeEdit=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.defaultUi=new a.XFAObjectArray,this.desc=new a.XFAObjectArray,this.digestMethod=new a.XFAObjectArray,this.digestMethods=new a.XFAObjectArray,this.draw=new a.XFAObjectArray,this.edge=new a.XFAObjectArray,this.encoding=new a.XFAObjectArray,this.encodings=new a.XFAObjectArray,this.encrypt=new a.XFAObjectArray,this.encryptData=new a.XFAObjectArray,this.encryption=new a.XFAObjectArray,this.encryptionMethod=new a.XFAObjectArray,this.encryptionMethods=new a.XFAObjectArray,this.event=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.exObject=new a.XFAObjectArray,this.exclGroup=new a.XFAObjectArray,this.execute=new a.XFAObjectArray,this.extras=new a.XFAObjectArray,this.field=new a.XFAObjectArray,this.fill=new a.XFAObjectArray,this.filter=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.font=new a.XFAObjectArray,this.format=new a.XFAObjectArray,this.handler=new a.XFAObjectArray,this.hyphenation=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.imageEdit=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.issuers=new a.XFAObjectArray,this.items=new a.XFAObjectArray,this.keep=new a.XFAObjectArray,this.keyUsage=new a.XFAObjectArray,this.line=new a.XFAObjectArray,this.linear=new a.XFAObjectArray,this.lockDocument=new a.XFAObjectArray,this.manifest=new a.XFAObjectArray,this.margin=new a.XFAObjectArray,this.mdp=new a.XFAObjectArray,this.medium=new a.XFAObjectArray,this.message=new a.XFAObjectArray,this.numericEdit=new a.XFAObjectArray,this.occur=new a.XFAObjectArray,this.oid=new a.XFAObjectArray,this.oids=new a.XFAObjectArray,this.overflow=new a.XFAObjectArray,this.pageArea=new a.XFAObjectArray,this.pageSet=new a.XFAObjectArray,this.para=new a.XFAObjectArray,this.passwordEdit=new a.XFAObjectArray,this.pattern=new a.XFAObjectArray,this.picture=new a.XFAObjectArray,this.radial=new a.XFAObjectArray,this.reason=new a.XFAObjectArray,this.reasons=new a.XFAObjectArray,this.rectangle=new a.XFAObjectArray,this.ref=new a.XFAObjectArray,this.script=new a.XFAObjectArray,this.setProperty=new a.XFAObjectArray,this.signData=new a.XFAObjectArray,this.signature=new a.XFAObjectArray,this.signing=new a.XFAObjectArray,this.solid=new a.XFAObjectArray,this.speak=new a.XFAObjectArray,this.stipple=new a.XFAObjectArray,this.subform=new a.XFAObjectArray,this.subformSet=new a.XFAObjectArray,this.subjectDN=new a.XFAObjectArray,this.subjectDNs=new a.XFAObjectArray,this.submit=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.textEdit=new a.XFAObjectArray,this.time=new a.XFAObjectArray,this.timeStamp=new a.XFAObjectArray,this.toolTip=new a.XFAObjectArray,this.traversal=new a.XFAObjectArray,this.traverse=new a.XFAObjectArray,this.ui=new a.XFAObjectArray,this.validate=new a.XFAObjectArray,this.value=new a.XFAObjectArray,this.variables=new a.XFAObjectArray}}class se extends a.XFAObject{constructor(t){super(p,"radial",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["toEdge","toCenter"]),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](t){t=t?t[i.$toStyle]():"#FFFFFF";const e=this.color?this.color[i.$toStyle]():"#000000";return`radial-gradient(circle at center, ${"toEdge"===this.type?`${t},${e}`:`${e},${t}`})`}}class ae extends a.StringObject{constructor(t){super(p,"reason"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class le extends a.XFAObject{constructor(t){super(p,"reasons",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.reason=new a.XFAObjectArray}}class ce extends a.XFAObject{constructor(t){super(p,"rectangle",!0),this.hand=(0,l.getStringOption)(t.hand,["even","left","right"]),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.corner=new a.XFAObjectArray(4),this.edge=new a.XFAObjectArray(4),this.fill=null}[i.$toHTML](){const t=this.edge.children.length?this.edge.children[0]:new ut({}),e=t[i.$toStyle](),n=Object.create(null);"visible"===this.fill?.presence?Object.assign(n,this.fill[i.$toStyle]()):n.fill="transparent",n.strokeWidth=(0,s.measureToString)("visible"===t.presence?t.thickness:0),n.stroke=e.color;const r=(this.corner.children.length?this.corner.children[0]:new et({}))[i.$toStyle](),o={name:"svg",children:[{name:"rect",attributes:{xmlns:f,width:"100%",height:"100%",x:0,y:0,rx:r.radius,ry:r.radius,style:n}}],attributes:{xmlns:f,style:{overflow:"visible"},width:"100%",height:"100%"}};return b(this[i.$getParent]()[i.$getParent]())?l.HTMLResult.success({name:"div",attributes:{style:{display:"inline",width:"100%",height:"100%"}},children:[o]}):(o.attributes.style.position="absolute",l.HTMLResult.success(o))}}class he extends a.StringObject{constructor(t){super(p,"ref"),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ue extends a.StringObject{constructor(t){super(p,"script"),this.binding=t.binding||"",this.contentType=t.contentType||"",this.id=t.id||"",this.name=t.name||"",this.runAt=(0,l.getStringOption)(t.runAt,["client","both","server"]),this.use=t.use||"",this.usehref=t.usehref||""}}class de extends a.XFAObject{constructor(t){super(p,"setProperty"),this.connection=t.connection||"",this.ref=t.ref||"",this.target=t.target||""}}e.SetProperty=de;class pe extends a.XFAObject{constructor(t){super(p,"signData",!0),this.id=t.id||"",this.operation=(0,l.getStringOption)(t.operation,["sign","clear","verify"]),this.ref=t.ref||"",this.target=t.target||"",this.use=t.use||"",this.usehref=t.usehref||"",this.filter=null,this.manifest=null}}class fe extends a.XFAObject{constructor(t){super(p,"signature",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["PDF1.3","PDF1.6"]),this.use=t.use||"",this.usehref=t.usehref||"",this.border=null,this.extras=null,this.filter=null,this.manifest=null,this.margin=null}}class ge extends a.XFAObject{constructor(t){super(p,"signing",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.certificate=new a.XFAObjectArray}}class me extends a.XFAObject{constructor(t){super(p,"solid",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null}[i.$toStyle](t){return t?t[i.$toStyle]():"#FFFFFF"}}class ye extends a.StringObject{constructor(t){super(p,"speak"),this.disable=(0,l.getInteger)({data:t.disable,defaultValue:0,validate:t=>1===t}),this.id=t.id||"",this.priority=(0,l.getStringOption)(t.priority,["custom","caption","name","toolTip"]),this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class ve extends a.XFAObject{constructor(t){super(p,"stipple",!0),this.id=t.id||"",this.rate=(0,l.getInteger)({data:t.rate,defaultValue:50,validate:t=>t>=0&&t<=100}),this.use=t.use||"",this.usehref=t.usehref||"",this.color=null,this.extras=null}[i.$toStyle](t){const e=this.rate/100;return c.Util.makeHexColor(Math.round(t.value.r*(1-e)+this.value.r*e),Math.round(t.value.g*(1-e)+this.value.g*e),Math.round(t.value.b*(1-e)+this.value.b*e))}}class be extends a.XFAObject{constructor(t){super(p,"subform",!0),this.access=(0,l.getStringOption)(t.access,["open","nonInteractive","protected","readOnly"]),this.allowMacro=(0,l.getInteger)({data:t.allowMacro,defaultValue:0,validate:t=>1===t}),this.anchorType=(0,l.getStringOption)(t.anchorType,["topLeft","bottomCenter","bottomLeft","bottomRight","middleCenter","middleLeft","middleRight","topCenter","topRight"]),this.colSpan=(0,l.getInteger)({data:t.colSpan,defaultValue:1,validate:t=>t>=1||-1===t}),this.columnWidths=(t.columnWidths||"").trim().split(/\s+/).map((t=>"-1"===t?-1:(0,l.getMeasurement)(t))),this.h=t.h?(0,l.getMeasurement)(t.h):"",this.hAlign=(0,l.getStringOption)(t.hAlign,["left","center","justify","justifyAll","radix","right"]),this.id=t.id||"",this.layout=(0,l.getStringOption)(t.layout,["position","lr-tb","rl-row","rl-tb","row","table","tb"]),this.locale=t.locale||"",this.maxH=(0,l.getMeasurement)(t.maxH,"0pt"),this.maxW=(0,l.getMeasurement)(t.maxW,"0pt"),this.mergeMode=(0,l.getStringOption)(t.mergeMode,["consumeData","matchTemplate"]),this.minH=(0,l.getMeasurement)(t.minH,"0pt"),this.minW=(0,l.getMeasurement)(t.minW,"0pt"),this.name=t.name||"",this.presence=(0,l.getStringOption)(t.presence,["visible","hidden","inactive","invisible"]),this.relevant=(0,l.getRelevant)(t.relevant),this.restoreState=(0,l.getStringOption)(t.restoreState,["manual","auto"]),this.scope=(0,l.getStringOption)(t.scope,["name","none"]),this.use=t.use||"",this.usehref=t.usehref||"",this.w=t.w?(0,l.getMeasurement)(t.w):"",this.x=(0,l.getMeasurement)(t.x,"0pt"),this.y=(0,l.getMeasurement)(t.y,"0pt"),this.assist=null,this.bind=null,this.bookend=null,this.border=null,this.break=null,this.calculate=null,this.desc=null,this.extras=null,this.keep=null,this.margin=null,this.occur=null,this.overflow=null,this.pageSet=null,this.para=null,this.traversal=null,this.validate=null,this.variables=null,this.area=new a.XFAObjectArray,this.breakAfter=new a.XFAObjectArray,this.breakBefore=new a.XFAObjectArray,this.connect=new a.XFAObjectArray,this.draw=new a.XFAObjectArray,this.event=new a.XFAObjectArray,this.exObject=new a.XFAObjectArray,this.exclGroup=new a.XFAObjectArray,this.field=new a.XFAObjectArray,this.proto=new a.XFAObjectArray,this.setProperty=new a.XFAObjectArray,this.subform=new a.XFAObjectArray,this.subformSet=new a.XFAObjectArray}[i.$getSubformParent](){const t=this[i.$getParent]();return t instanceof we?t[i.$getSubformParent]():t}[i.$isBindable](){return!0}[i.$isThereMoreWidth](){return this.layout.endsWith("-tb")&&0===this[i.$extra].attempt&&this[i.$extra].numberInLine>0||this[i.$getParent]()[i.$isThereMoreWidth]()}*[i.$getContainedChildren](){yield*x(this)}[i.$flushHTML](){return(0,o.flushHTML)(this)}[i.$addHTML](t,e){(0,o.addHTML)(this,t,e)}[i.$getAvailableSpace](){return(0,o.getAvailableSpace)(this)}[i.$isSplittable](){const t=this[i.$getSubformParent]();return!!t[i.$isSplittable]()&&(void 0!==this[i.$extra]._isSplittable?this[i.$extra]._isSplittable:"position"===this.layout||this.layout.includes("row")||this.keep&&"none"!==this.keep.intact?(this[i.$extra]._isSplittable=!1,!1):!(t.layout?.endsWith("-tb")&&0!==t[i.$extra].numberInLine||(this[i.$extra]._isSplittable=!0,0)))}[i.$toHTML](t){if(S(this),this.break){if("auto"!==this.break.after||""!==this.break.afterTarget){const t=new H({targetType:this.break.after,target:this.break.afterTarget,startNew:this.break.startNew.toString()});t[i.$globalData]=this[i.$globalData],this[i.$appendChild](t),this.breakAfter.push(t)}if("auto"!==this.break.before||""!==this.break.beforeTarget){const t=new U({targetType:this.break.before,target:this.break.beforeTarget,startNew:this.break.startNew.toString()});t[i.$globalData]=this[i.$globalData],this[i.$appendChild](t),this.breakBefore.push(t)}if(""!==this.break.overflowTarget){const t=new Zt({target:this.break.overflowTarget,leader:this.break.overflowLeader,trailer:this.break.overflowTrailer});t[i.$globalData]=this[i.$globalData],this[i.$appendChild](t),this.overflow.push(t)}this[i.$removeChild](this.break),this.break=null}if("hidden"===this.presence||"inactive"===this.presence)return l.HTMLResult.EMPTY;if((this.breakBefore.children.length>1||this.breakAfter.children.length>1)&&(0,c.warn)("XFA - Several breakBefore or breakAfter in subforms: please file a bug."),this.breakBefore.children.length>=1){const t=this.breakBefore.children[0];if(M(t))return l.HTMLResult.breakNode(t)}if(this[i.$extra]?.afterBreakAfter)return l.HTMLResult.EMPTY;(0,s.fixDimensions)(this);const e=[],n={id:this[i.$uid],class:[]};(0,s.setAccess)(this,n.class),this[i.$extra]||(this[i.$extra]=Object.create(null)),Object.assign(this[i.$extra],{children:e,line:null,attributes:n,attempt:0,numberInLine:0,availableSpace:{width:Math.min(this.w||1/0,t.width),height:Math.min(this.h||1/0,t.height)},width:0,height:0,prevHeight:0,currentWidth:0});const r=this[i.$getTemplateRoot](),a=r[i.$extra].noLayoutFailure,h=this[i.$isSplittable]();if(h||E(this),!(0,o.checkDimensions)(this,t))return l.HTMLResult.FAILURE;const u=new Set(["area","draw","exclGroup","field","subform","subformSet"]);if(this.layout.includes("row")){const t=this[i.$getSubformParent]().columnWidths;Array.isArray(t)&&t.length>0&&(this[i.$extra].columnWidths=t,this[i.$extra].currentColumn=0)}const d=(0,s.toStyle)(this,"anchorType","dimensions","position","presence","border","margin","hAlign"),p=["xfaSubform"],f=(0,s.layoutClass)(this);if(f&&p.push(f),n.style=d,n.class=p,this.name&&(n.xfaName=this.name),this.overflow){const e=this.overflow[i.$getExtra]();e.addLeader&&(e.addLeader=!1,O(this,e.leader,t))}this[i.$pushPara]();const g="lr-tb"===this.layout||"rl-tb"===this.layout,m=g?2:1;for(;this[i.$extra].attempt<m;this[i.$extra].attempt++){g&&1===this[i.$extra].attempt&&(this[i.$extra].numberInLine=0);const t=this[i.$childrenToHTML]({filter:u,include:!0});if(t.success)break;if(t.isBreak())return this[i.$popPara](),t;if(g&&0===this[i.$extra].attempt&&0===this[i.$extra].numberInLine&&!r[i.$extra].noLayoutFailure){this[i.$extra].attempt=m;break}}if(this[i.$popPara](),h||T(this),r[i.$extra].noLayoutFailure=a,this[i.$extra].attempt===m)return this.overflow&&(this[i.$getTemplateRoot]()[i.$extra].overflowNode=this.overflow),h||delete this[i.$extra],l.HTMLResult.FAILURE;if(this.overflow){const e=this.overflow[i.$getExtra]();e.addTrailer&&(e.addTrailer=!1,O(this,e.trailer,t))}let y=0,v=0;this.margin&&(y=this.margin.leftInset+this.margin.rightInset,v=this.margin.topInset+this.margin.bottomInset);const b=Math.max(this[i.$extra].width+y,this.w||0),w=Math.max(this[i.$extra].height+v,this.h||0),x=[this.x,this.y,b,w];if(""===this.w&&(d.width=(0,s.measureToString)(b)),""===this.h&&(d.height=(0,s.measureToString)(w)),("0px"===d.width||"0px"===d.height)&&0===e.length)return l.HTMLResult.EMPTY;const _={name:"div",attributes:n,children:e};C(this,n);const k=l.HTMLResult.success((0,s.createWrapper)(this,_),x);if(this.breakAfter.children.length>=1){const t=this.breakAfter.children[0];if(M(t))return this[i.$extra].afterBreakAfter=k,l.HTMLResult.breakNode(t)}return delete this[i.$extra],k}}class we extends a.XFAObject{constructor(t){super(p,"subformSet",!0),this.id=t.id||"",this.name=t.name||"",this.relation=(0,l.getStringOption)(t.relation,["ordered","choice","unordered"]),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.bookend=null,this.break=null,this.desc=null,this.extras=null,this.occur=null,this.overflow=null,this.breakAfter=new a.XFAObjectArray,this.breakBefore=new a.XFAObjectArray,this.subform=new a.XFAObjectArray,this.subformSet=new a.XFAObjectArray}*[i.$getContainedChildren](){yield*x(this)}[i.$getSubformParent](){let t=this[i.$getParent]();for(;!(t instanceof be);)t=t[i.$getParent]();return t}[i.$isBindable](){return!0}}class xe extends a.ContentObject{constructor(t){super(p,"subjectDN"),this.delimiter=t.delimiter||",",this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){this[i.$content]=new Map(this[i.$content].split(this.delimiter).map((t=>((t=t.split("=",2))[0]=t[0].trim(),t))))}}class _e extends a.XFAObject{constructor(t){super(p,"subjectDNs",!0),this.id=t.id||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||"",this.subjectDN=new a.XFAObjectArray}}class Se extends a.XFAObject{constructor(t){super(p,"submit",!0),this.embedPDF=(0,l.getInteger)({data:t.embedPDF,defaultValue:0,validate:t=>1===t}),this.format=(0,l.getStringOption)(t.format,["xdp","formdata","pdf","urlencoded","xfd","xml"]),this.id=t.id||"",this.target=t.target||"",this.textEncoding=(0,l.getKeyword)({data:t.textEncoding?t.textEncoding.toLowerCase():"",defaultValue:"",validate:t=>["utf-8","big-five","fontspecific","gbk","gb-18030","gb-2312","ksc-5601","none","shift-jis","ucs-2","utf-16"].includes(t)||t.match(/iso-8859-\d{2}/)}),this.use=t.use||"",this.usehref=t.usehref||"",this.xdpContent=t.xdpContent||"",this.encrypt=null,this.encryptData=new a.XFAObjectArray,this.signData=new a.XFAObjectArray}}class Ce extends a.XFAObject{constructor(t){super(p,"template",!0),this.baseProfile=(0,l.getStringOption)(t.baseProfile,["full","interactiveForms"]),this.extras=null,this.subform=new a.XFAObjectArray}[i.$finalize](){0===this.subform.children.length&&(0,c.warn)("XFA - No subforms in template node."),this.subform.children.length>=2&&(0,c.warn)("XFA - Several subforms in template node: please file a bug."),this[i.$tabIndex]=5e3}[i.$isSplittable](){return!0}[i.$searchNode](t,e){return t.startsWith("#")?[this[i.$ids].get(t.slice(1))]:(0,d.searchNode)(this,e,t,!0,!0)}*[i.$toPages](){if(!this.subform.children.length)return l.HTMLResult.success({name:"div",children:[]});this[i.$extra]={overflowNode:null,firstUnsplittable:null,currentContentArea:null,currentPageArea:null,noLayoutFailure:!1,pageNumber:1,pagePosition:"first",oddOrEven:"odd",blankOrNotBlank:"nonBlank",paraStack:[]};const t=this.subform.children[0];t.pageSet[i.$cleanPage]();const e=t.pageSet.pageArea.children,n={name:"div",children:[]};let r=null,o=null,s=null;if(t.breakBefore.children.length>=1?(o=t.breakBefore.children[0],s=o.target):t.subform.children.length>=1&&t.subform.children[0].breakBefore.children.length>=1?(o=t.subform.children[0].breakBefore.children[0],s=o.target):t.break?.beforeTarget?(o=t.break,s=o.beforeTarget):t.subform.children.length>=1&&t.subform.children[0].break?.beforeTarget&&(o=t.subform.children[0].break,s=o.beforeTarget),o){const t=this[i.$searchNode](s,o[i.$getParent]());t instanceof Qt&&(r=t,o[i.$extra]={})}r||(r=e[0]),r[i.$extra]={numberOfUse:1};const a=r[i.$getParent]();let h;a[i.$extra]={numberOfUse:1,pageIndex:a.pageArea.children.indexOf(r),pageSetIndex:0};let u=null,d=null,p=!0,f=0,g=0;for(;;){if(p)f=0;else if(n.children.pop(),3==++f)return(0,c.warn)("XFA - Something goes wrong: please file a bug."),n;h=null,this[i.$extra].currentPageArea=r;const e=r[i.$toHTML]().html;n.children.push(e),u&&(this[i.$extra].noLayoutFailure=!0,e.children.push(u[i.$toHTML](r[i.$extra].space).html),u=null),d&&(this[i.$extra].noLayoutFailure=!0,e.children.push(d[i.$toHTML](r[i.$extra].space).html),d=null);const o=r.contentArea.children,s=e.children.filter((t=>t.attributes.class.includes("xfaContentarea")));p=!1,this[i.$extra].firstUnsplittable=null,this[i.$extra].noLayoutFailure=!1;const a=e=>{const n=t[i.$flushHTML]();n&&(p||=n.children?.length>0,s[e].children.push(n))};for(let e=g,r=o.length;e<r;e++){const r=this[i.$extra].currentContentArea=o[e],l={width:r.w,height:r.h};g=0,u&&(s[e].children.push(u[i.$toHTML](l).html),u=null),d&&(s[e].children.push(d[i.$toHTML](l).html),d=null);const c=t[i.$toHTML](l);if(c.success)return c.html?(p||=c.html.children?.length>0,s[e].children.push(c.html)):!p&&n.children.length>1&&n.children.pop(),n;if(c.isBreak()){const t=c.breakNode;if(a(e),"auto"===t.targetType)continue;t.leader&&(u=this[i.$searchNode](t.leader,t[i.$getParent]()),u=u?u[0]:null),t.trailer&&(d=this[i.$searchNode](t.trailer,t[i.$getParent]()),d=d?d[0]:null),"pageArea"===t.targetType?(h=t[i.$extra].target,e=1/0):t[i.$extra].target?(h=t[i.$extra].target,g=t[i.$extra].index+1,e=1/0):e=t[i.$extra].index}else if(this[i.$extra].overflowNode){const t=this[i.$extra].overflowNode;this[i.$extra].overflowNode=null;const n=t[i.$getExtra](),r=n.target;n.addLeader=null!==n.leader,n.addTrailer=null!==n.trailer,a(e);const s=e;if(e=1/0,r instanceof Qt)h=r;else if(r instanceof tt){const t=o.indexOf(r);-1!==t?t>s?e=t-1:g=t:(h=r[i.$getParent](),g=h.contentArea.children.indexOf(r))}}else a(e)}this[i.$extra].pageNumber+=1,h&&(h[i.$isUsable]()?h[i.$extra].numberOfUse+=1:h=null),r=h||r[i.$getNextPage](),yield null}}}e.Template=Ce;class ke extends a.ContentObject{constructor(t){super(p,"text"),this.id=t.id||"",this.maxChars=(0,l.getInteger)({data:t.maxChars,defaultValue:0,validate:t=>t>=0}),this.name=t.name||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$acceptWhitespace](){return!0}[i.$onChild](t){return t[i.$namespaceId]===r.NamespaceIds.xhtml.id?(this[i.$content]=t,!0):((0,c.warn)(`XFA - Invalid content in Text: ${t[i.$nodeName]}.`),!1)}[i.$onText](t){this[i.$content]instanceof a.XFAObject||super[i.$onText](t)}[i.$finalize](){"string"==typeof this[i.$content]&&(this[i.$content]=this[i.$content].replaceAll("\r\n","\n"))}[i.$getExtra](){return"string"==typeof this[i.$content]?this[i.$content].split(/[\u2029\u2028\n]/).reduce(((t,e)=>(e&&t.push(e),t)),[]).join("\n"):this[i.$content][i.$text]()}[i.$toHTML](t){if("string"==typeof this[i.$content]){const t=A(this[i.$content]).html;return this[i.$content].includes("\u2029")?(t.name="div",t.children=[],this[i.$content].split("\u2029").map((t=>t.split(/[\u2028\n]/).reduce(((t,e)=>(t.push({name:"span",value:e},{name:"br"}),t)),[]))).forEach((e=>{t.children.push({name:"p",children:e})}))):/[\u2028\n]/.test(this[i.$content])&&(t.name="div",t.children=[],this[i.$content].split(/[\u2028\n]/).forEach((e=>{t.children.push({name:"span",value:e},{name:"br"})}))),l.HTMLResult.success(t)}return this[i.$content][i.$toHTML](t)}}e.Text=ke;class Ae extends a.XFAObject{constructor(t){super(p,"textEdit",!0),this.allowRichText=(0,l.getInteger)({data:t.allowRichText,defaultValue:0,validate:t=>1===t}),this.hScrollPolicy=(0,l.getStringOption)(t.hScrollPolicy,["auto","off","on"]),this.id=t.id||"",this.multiLine=(0,l.getInteger)({data:t.multiLine,defaultValue:"",validate:t=>0===t||1===t}),this.use=t.use||"",this.usehref=t.usehref||"",this.vScrollPolicy=(0,l.getStringOption)(t.vScrollPolicy,["auto","off","on"]),this.border=null,this.comb=null,this.extras=null,this.margin=null}[i.$toHTML](t){const e=(0,s.toStyle)(this,"border","font","margin");let n;const r=this[i.$getParent]()[i.$getParent]();return""===this.multiLine&&(this.multiLine=r instanceof ht?1:0),n=1===this.multiLine?{name:"textarea",attributes:{dataId:r[i.$data]?.[i.$uid]||r[i.$uid],fieldId:r[i.$uid],class:["xfaTextfield"],style:e,"aria-label":k(r),"aria-required":!1}}:{name:"input",attributes:{type:"text",dataId:r[i.$data]?.[i.$uid]||r[i.$uid],fieldId:r[i.$uid],class:["xfaTextfield"],style:e,"aria-label":k(r),"aria-required":!1}},_(r)&&(n.attributes["aria-required"]=!0,n.attributes.required=!0),l.HTMLResult.success({name:"label",attributes:{class:["xfaLabel"]},children:[n]})}}class Ee extends a.StringObject{constructor(t){super(p,"time"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}[i.$finalize](){const t=this[i.$content].trim();this[i.$content]=t?new Date(t):null}[i.$toHTML](t){return A(this[i.$content]?this[i.$content].toString():"")}}class Te extends a.XFAObject{constructor(t){super(p,"timeStamp"),this.id=t.id||"",this.server=t.server||"",this.type=(0,l.getStringOption)(t.type,["optional","required"]),this.use=t.use||"",this.usehref=t.usehref||""}}class Me extends a.StringObject{constructor(t){super(p,"toolTip"),this.id=t.id||"",this.rid=t.rid||"",this.use=t.use||"",this.usehref=t.usehref||""}}class Oe extends a.XFAObject{constructor(t){super(p,"traversal",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.traverse=new a.XFAObjectArray}}class Ie extends a.XFAObject{constructor(t){super(p,"traverse",!0),this.id=t.id||"",this.operation=(0,l.getStringOption)(t.operation,["next","back","down","first","left","right","up"]),this.ref=t.ref||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.script=null}get name(){return this.operation}[i.$isTransparent](){return!1}}class De extends a.XFAObject{constructor(t){super(p,"ui",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.picture=null,this.barcode=null,this.button=null,this.checkButton=null,this.choiceList=null,this.dateTimeEdit=null,this.defaultUi=null,this.imageEdit=null,this.numericEdit=null,this.passwordEdit=null,this.signature=null,this.textEdit=null}[i.$getExtra](){if(void 0===this[i.$extra]){for(const t of Object.getOwnPropertyNames(this)){if("extras"===t||"picture"===t)continue;const e=this[t];if(e instanceof a.XFAObject)return this[i.$extra]=e,e}this[i.$extra]=null}return this[i.$extra]}[i.$toHTML](t){const e=this[i.$getExtra]();return e?e[i.$toHTML](t):l.HTMLResult.EMPTY}}class Fe extends a.XFAObject{constructor(t){super(p,"validate",!0),this.formatTest=(0,l.getStringOption)(t.formatTest,["warning","disabled","error"]),this.id=t.id||"",this.nullTest=(0,l.getStringOption)(t.nullTest,["disabled","error","warning"]),this.scriptTest=(0,l.getStringOption)(t.scriptTest,["error","disabled","warning"]),this.use=t.use||"",this.usehref=t.usehref||"",this.extras=null,this.message=null,this.picture=null,this.script=null}}class Pe extends a.XFAObject{constructor(t){super(p,"value",!0),this.id=t.id||"",this.override=(0,l.getInteger)({data:t.override,defaultValue:0,validate:t=>1===t}),this.relevant=(0,l.getRelevant)(t.relevant),this.use=t.use||"",this.usehref=t.usehref||"",this.arc=null,this.boolean=null,this.date=null,this.dateTime=null,this.decimal=null,this.exData=null,this.float=null,this.image=null,this.integer=null,this.line=null,this.rectangle=null,this.text=null,this.time=null}[i.$setValue](t){const e=this[i.$getParent]();if(e instanceof kt&&e.ui?.imageEdit)return this.image||(this.image=new Ft({}),this[i.$appendChild](this.image)),void(this.image[i.$content]=t[i.$content]);const n=t[i.$nodeName];if(null===this[n]){for(const t of Object.getOwnPropertyNames(this)){const e=this[t];e instanceof a.XFAObject&&(this[t]=null,this[i.$removeChild](e))}this[t[i.$nodeName]]=t,this[i.$appendChild](t)}else this[n][i.$content]=t[i.$content]}[i.$text](){if(this.exData)return"string"==typeof this.exData[i.$content]?this.exData[i.$content].trim():this.exData[i.$content][i.$text]().trim();for(const t of Object.getOwnPropertyNames(this)){if("image"===t)continue;const e=this[t];if(e instanceof a.XFAObject)return(e[i.$content]||"").toString().trim()}return null}[i.$toHTML](t){for(const e of Object.getOwnPropertyNames(this)){const n=this[e];if(n instanceof a.XFAObject)return n[i.$toHTML](t)}return l.HTMLResult.EMPTY}}e.Value=Pe;class Re extends a.XFAObject{constructor(t){super(p,"variables",!0),this.id=t.id||"",this.use=t.use||"",this.usehref=t.usehref||"",this.boolean=new a.XFAObjectArray,this.date=new a.XFAObjectArray,this.dateTime=new a.XFAObjectArray,this.decimal=new a.XFAObjectArray,this.exData=new a.XFAObjectArray,this.float=new a.XFAObjectArray,this.image=new a.XFAObjectArray,this.integer=new a.XFAObjectArray,this.manifest=new a.XFAObjectArray,this.script=new a.XFAObjectArray,this.text=new a.XFAObjectArray,this.time=new a.XFAObjectArray}[i.$isTransparent](){return!0}}class Le{static[r.$buildXFAObject](t,e){if(Le.hasOwnProperty(t)){const n=Le[t](e);return n[i.$setSetAttributes](e),n}}static appearanceFilter(t){return new I(t)}static arc(t){return new D(t)}static area(t){return new F(t)}static assist(t){return new P(t)}static barcode(t){return new R(t)}static bind(t){return new L(t)}static bindItems(t){return new N(t)}static bookend(t){return new B(t)}static boolean(t){return new j(t)}static border(t){return new z(t)}static break(t){return new $(t)}static breakAfter(t){return new H(t)}static breakBefore(t){return new U(t)}static button(t){return new V(t)}static calculate(t){return new W(t)}static caption(t){return new q(t)}static certificate(t){return new K(t)}static certificates(t){return new X(t)}static checkButton(t){return new G(t)}static choiceList(t){return new Y(t)}static color(t){return new J(t)}static comb(t){return new Z(t)}static connect(t){return new Q(t)}static contentArea(t){return new tt(t)}static corner(t){return new et(t)}static date(t){return new nt(t)}static dateTime(t){return new it(t)}static dateTimeEdit(t){return new rt(t)}static decimal(t){return new ot(t)}static defaultUi(t){return new st(t)}static desc(t){return new at(t)}static digestMethod(t){return new lt(t)}static digestMethods(t){return new ct(t)}static draw(t){return new ht(t)}static edge(t){return new ut(t)}static encoding(t){return new dt(t)}static encodings(t){return new pt(t)}static encrypt(t){return new ft(t)}static encryptData(t){return new gt(t)}static encryption(t){return new mt(t)}static encryptionMethod(t){return new yt(t)}static encryptionMethods(t){return new vt(t)}static event(t){return new bt(t)}static exData(t){return new wt(t)}static exObject(t){return new xt(t)}static exclGroup(t){return new _t(t)}static execute(t){return new St(t)}static extras(t){return new Ct(t)}static field(t){return new kt(t)}static fill(t){return new At(t)}static filter(t){return new Et(t)}static float(t){return new Tt(t)}static font(t){return new Mt(t)}static format(t){return new Ot(t)}static handler(t){return new It(t)}static hyphenation(t){return new Dt(t)}static image(t){return new Ft(t)}static imageEdit(t){return new Pt(t)}static integer(t){return new Rt(t)}static issuers(t){return new Lt(t)}static items(t){return new Nt(t)}static keep(t){return new Bt(t)}static keyUsage(t){return new jt(t)}static line(t){return new zt(t)}static linear(t){return new $t(t)}static lockDocument(t){return new Ht(t)}static manifest(t){return new Ut(t)}static margin(t){return new Vt(t)}static mdp(t){return new Wt(t)}static medium(t){return new qt(t)}static message(t){return new Kt(t)}static numericEdit(t){return new Xt(t)}static occur(t){return new Gt(t)}static oid(t){return new Yt(t)}static oids(t){return new Jt(t)}static overflow(t){return new Zt(t)}static pageArea(t){return new Qt(t)}static pageSet(t){return new te(t)}static para(t){return new ee(t)}static passwordEdit(t){return new ne(t)}static pattern(t){return new ie(t)}static picture(t){return new re(t)}static proto(t){return new oe(t)}static radial(t){return new se(t)}static reason(t){return new ae(t)}static reasons(t){return new le(t)}static rectangle(t){return new ce(t)}static ref(t){return new he(t)}static script(t){return new ue(t)}static setProperty(t){return new de(t)}static signData(t){return new pe(t)}static signature(t){return new fe(t)}static signing(t){return new ge(t)}static solid(t){return new me(t)}static speak(t){return new ye(t)}static stipple(t){return new ve(t)}static subform(t){return new be(t)}static subformSet(t){return new we(t)}static subjectDN(t){return new xe(t)}static subjectDNs(t){return new _e(t)}static submit(t){return new Se(t)}static template(t){return new Ce(t)}static text(t){return new ke(t)}static textEdit(t){return new Ae(t)}static time(t){return new Ee(t)}static timeStamp(t){return new Te(t)}static toolTip(t){return new Me(t)}static traversal(t){return new Oe(t)}static traverse(t){return new Ie(t)}static ui(t){return new De(t)}static validate(t){return new Fe(t)}static value(t){return new Pe(t)}static variables(t){return new Re(t)}}e.TemplateNamespace=Le},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceIds=e.$buildXFAObject=void 0;const n=Symbol();e.$buildXFAObject=n,e.NamespaceIds={config:{id:0,check:t=>t.startsWith("http://www.xfa.org/schema/xci/")},connectionSet:{id:1,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-connection-set/")},datasets:{id:2,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-data/")},form:{id:3,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-form/")},localeSet:{id:4,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-locale-set/")},pdf:{id:5,check:t=>"http://ns.adobe.com/xdp/pdf/"===t},signature:{id:6,check:t=>"http://www.w3.org/2000/09/xmldsig#"===t},sourceSet:{id:7,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-source-set/")},stylesheet:{id:8,check:t=>"http://www.w3.org/1999/XSL/Transform"===t},template:{id:9,check:t=>t.startsWith("http://www.xfa.org/schema/xfa-template/")},xdc:{id:10,check:t=>t.startsWith("http://www.xfa.org/schema/xdc/")},xdp:{id:11,check:t=>"http://ns.adobe.com/xdp/"===t},xfdf:{id:12,check:t=>"http://ns.adobe.com/xfdf/"===t},xhtml:{id:13,check:t=>"http://www.w3.org/1999/xhtml"===t},xmpmeta:{id:14,check:t=>"http://ns.adobe.com/xmpmeta/"===t}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.addHTML=function(t,e,n){const s=t[i.$extra],a=s.availableSpace,[l,c,h,u]=n;switch(t.layout){case"position":s.width=Math.max(s.width,l+h),s.height=Math.max(s.height,c+u),s.children.push(e);break;case"lr-tb":case"rl-tb":s.line&&1!==s.attempt||(s.line=o(t,[]),s.children.push(s.line),s.numberInLine=0),s.numberInLine+=1,s.line.children.push(e),0===s.attempt?(s.currentWidth+=h,s.height=Math.max(s.height,s.prevHeight+u)):(s.currentWidth=h,s.prevHeight=s.height,s.height+=u,s.attempt=0),s.width=Math.max(s.width,s.currentWidth);break;case"rl-row":case"row":{s.children.push(e),s.width+=h,s.height=Math.max(s.height,u);const t=(0,r.measureToString)(s.height);for(const e of s.children)e.attributes.style.height=t;break}case"table":case"tb":s.width=Math.min(a.width,Math.max(s.width,h)),s.height+=u,s.children.push(e)}},e.checkDimensions=function(t,e){if(null===t[i.$getTemplateRoot]()[i.$extra].firstUnsplittable)return!0;if(0===t.w||0===t.h)return!0;const n=t[i.$getSubformParent](),r=n[i.$extra]?.attempt||0,[,o,s,a]=function(t){let e,n,i=""===t.w?NaN:t.w,r=""===t.h?NaN:t.h,[o,s]=[0,0];switch(t.anchorType||""){case"bottomCenter":[o,s]=[i/2,r];break;case"bottomLeft":[o,s]=[0,r];break;case"bottomRight":[o,s]=[i,r];break;case"middleCenter":[o,s]=[i/2,r/2];break;case"middleLeft":[o,s]=[0,r/2];break;case"middleRight":[o,s]=[i,r/2];break;case"topCenter":[o,s]=[i/2,0];break;case"topRight":[o,s]=[i,0]}switch(t.rotate||0){case 0:[e,n]=[-o,-s];break;case 90:[e,n]=[-s,o],[i,r]=[r,-i];break;case 180:[e,n]=[o,s],[i,r]=[-i,-r];break;case 270:[e,n]=[s,-o],[i,r]=[-r,i]}return[t.x+e+Math.min(0,i),t.y+n+Math.min(0,r),Math.abs(i),Math.abs(r)]}(t);switch(n.layout){case"lr-tb":case"rl-tb":return 0===r?t[i.$getTemplateRoot]()[i.$extra].noLayoutFailure?""!==t.w?Math.round(s-e.width)<=2:e.width>2:!(""!==t.h&&Math.round(a-e.height)>2)&&(""!==t.w?Math.round(s-e.width)<=2||0===n[i.$extra].numberInLine&&e.height>2:e.width>2):!!t[i.$getTemplateRoot]()[i.$extra].noLayoutFailure||!(""!==t.h&&Math.round(a-e.height)>2)&&(""===t.w||Math.round(s-e.width)<=2||!n[i.$isThereMoreWidth]())&&e.height>2;case"table":case"tb":return!!t[i.$getTemplateRoot]()[i.$extra].noLayoutFailure||(""===t.h||t[i.$isSplittable]()?(""===t.w||Math.round(s-e.width)<=2||!n[i.$isThereMoreWidth]())&&e.height>2:Math.round(a-e.height)<=2);case"position":return!!t[i.$getTemplateRoot]()[i.$extra].noLayoutFailure||(""===t.h||Math.round(a+o-e.height)<=2||a+o>t[i.$getTemplateRoot]()[i.$extra].currentContentArea.h);case"rl-row":case"row":return!!t[i.$getTemplateRoot]()[i.$extra].noLayoutFailure||""===t.h||Math.round(a-e.height)<=2;default:return!0}},e.flushHTML=function(t){if(!t[i.$extra])return null;const e={name:"div",attributes:t[i.$extra].attributes,children:t[i.$extra].children};if(t[i.$extra].failingNode){const n=t[i.$extra].failingNode[i.$flushHTML]();n&&(t.layout.endsWith("-tb")?e.children.push(o(t,[n])):e.children.push(n))}return 0===e.children.length?null:e},e.getAvailableSpace=function(t){const e=t[i.$extra].availableSpace,n=t.margin?t.margin.topInset+t.margin.bottomInset:0,r=t.margin?t.margin.leftInset+t.margin.rightInset:0;switch(t.layout){case"lr-tb":case"rl-tb":return 0===t[i.$extra].attempt?{width:e.width-r-t[i.$extra].currentWidth,height:e.height-n-t[i.$extra].prevHeight}:{width:e.width-r,height:e.height-n-t[i.$extra].height};case"rl-row":case"row":return{width:t[i.$extra].columnWidths.slice(t[i.$extra].currentColumn).reduce(((t,e)=>t+e)),height:e.height-r};case"table":case"tb":return{width:e.width-r,height:e.height-n-t[i.$extra].height};default:return e}};var i=n(78),r=n(83);function o(t,e){return{name:"div",attributes:{class:["lr-tb"===t.layout?"xfaLr":"xfaRl"]},children:e}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.computeBbox=function(t,e,n){let r;if(""!==t.w&&""!==t.h)r=[t.x,t.y,t.w,t.h];else{if(!n)return null;let o=t.w;if(""===o){if(0===t.maxW){const e=t[i.$getSubformParent]();o="position"===e.layout&&""!==e.w?0:t.minW}else o=Math.min(t.maxW,n.width);e.attributes.style.width=c(o)}let s=t.h;if(""===s){if(0===t.maxH){const e=t[i.$getSubformParent]();s="position"===e.layout&&""!==e.h?0:t.minH}else s=Math.min(t.maxH,n.height);e.attributes.style.height=c(s)}r=[t.x,t.y,o,s]}return r},e.createWrapper=function(t,e){const{attributes:n}=e,{style:r}=n,o={name:"div",attributes:{class:["xfaWrapper"],style:Object.create(null)},children:[]};if(n.class.push("xfaWrapped"),t.border){const{widths:n,insets:s}=t.border[i.$extra];let a,l,c=s[0],h=s[3];const u=s[0]+s[2],p=s[1]+s[3];switch(t.border.hand){case"even":c-=n[0]/2,h-=n[3]/2,a=`calc(100% + ${(n[1]+n[3])/2-p}px)`,l=`calc(100% + ${(n[0]+n[2])/2-u}px)`;break;case"left":c-=n[0],h-=n[3],a=`calc(100% + ${n[1]+n[3]-p}px)`,l=`calc(100% + ${n[0]+n[2]-u}px)`;break;case"right":a=p?`calc(100% - ${p}px)`:"100%",l=u?`calc(100% - ${u}px)`:"100%"}const f=["xfaBorder"];d(t.border)&&f.push("xfaPrintOnly");const g={name:"div",attributes:{class:f,style:{top:`${c}px`,left:`${h}px`,width:a,height:l}},children:[]};for(const t of["border","borderWidth","borderColor","borderRadius","borderStyle"])void 0!==r[t]&&(g.attributes.style[t]=r[t],delete r[t]);o.children.push(g,e)}else o.children.push(e);for(const t of["background","backgroundClip","top","left","width","height","minWidth","minHeight","maxWidth","maxHeight","transform","transformOrigin","visibility"])void 0!==r[t]&&(o.attributes.style[t]=r[t],delete r[t]);return o.attributes.style.position="absolute"===r.position?"absolute":"relative",delete r.position,r.alignSelf&&(o.attributes.style.alignSelf=r.alignSelf,delete r.alignSelf),o},e.fixDimensions=function(t){const e=t[i.$getSubformParent]();if(e.layout?.includes("row")){const n=e[i.$extra],r=t.colSpan;let o;o=-1===r?n.columnWidths.slice(n.currentColumn).reduce(((t,e)=>t+e),0):n.columnWidths.slice(n.currentColumn,n.currentColumn+r).reduce(((t,e)=>t+e),0),isNaN(o)||(t.w=o)}e.layout&&"position"!==e.layout&&(t.x=t.y=0),"table"===t.layout&&""===t.w&&Array.isArray(t.columnWidths)&&(t.w=t.columnWidths.reduce(((t,e)=>t+e),0))},e.fixTextIndent=function(t){const e=(0,o.getMeasurement)(t.textIndent,"0px");if(e>=0)return;const n="padding"+("left"==("right"===t.textAlign?"right":"left")?"Left":"Right"),i=(0,o.getMeasurement)(t[n],"0px");t[n]=i-e+"px"},e.fixURL=function(t){const e=(0,r.createValidAbsoluteUrl)(t,null,{addDefaultProtocol:!0,tryConvertEncoding:!0});return e?e.href:null},e.isPrintOnly=d,e.layoutClass=function(t){switch(t.layout){case"position":default:return"xfaPosition";case"lr-tb":return"xfaLrTb";case"rl-row":return"xfaRlRow";case"rl-tb":return"xfaRlTb";case"row":return"xfaRow";case"table":return"xfaTable";case"tb":return"xfaTb"}},e.layoutNode=function(t,e){let n=null,r=null,o=!1;if((!t.w||!t.h)&&t.value){let s=0,a=0;t.margin&&(s=t.margin.leftInset+t.margin.rightInset,a=t.margin.topInset+t.margin.bottomInset);let l=null,c=null;t.para&&(c=Object.create(null),l=""===t.para.lineHeight?null:t.para.lineHeight,c.top=""===t.para.spaceAbove?0:t.para.spaceAbove,c.bottom=""===t.para.spaceBelow?0:t.para.spaceBelow,c.left=""===t.para.marginLeft?0:t.para.marginLeft,c.right=""===t.para.marginRight?0:t.para.marginRight);let h=t.font;if(!h){const e=t[i.$getTemplateRoot]();let n=t[i.$getParent]();for(;n&&n!==e;){if(n.font){h=n.font;break}n=n[i.$getParent]()}}const d=(t.w||e.width)-s,p=t[i.$globalData].fontFinder;if(t.value.exData&&t.value.exData[i.$content]&&"text/html"===t.value.exData.contentType){const e=u(t.value.exData[i.$content],h,c,l,p,d);r=e.width,n=e.height,o=e.isBroken}else{const e=t.value[i.$text]();if(e){const t=u(e,h,c,l,p,d);r=t.width,n=t.height,o=t.isBroken}}null===r||t.w||(r+=s),null===n||t.h||(n+=a)}return{w:r,h:n,isBroken:o}},e.measureToString=c,e.setAccess=function(t,e){switch(t.access){case"nonInteractive":e.push("xfaNonInteractive");break;case"readOnly":e.push("xfaReadOnly");break;case"protected":e.push("xfaDisabled")}},e.setFontFamily=function(t,e,n,i){if(!n)return void delete i.fontFamily;const r=(0,o.stripQuotes)(t.typeface);i.fontFamily=`"${r}"`;const a=n.find(r);if(a){const{fontFamily:n}=a.regular.cssFontInfo;n!==r&&(i.fontFamily=`"${n}"`);const o=p(e);if(o&&""!==o.lineHeight)return;if(i.lineHeight)return;const l=(0,s.selectFont)(t,a);l&&(i.lineHeight=Math.max(1.2,l.lineHeight))}},e.setMinMaxDimensions=function(t,e){"position"===t[i.$getSubformParent]().layout&&(t.minW>0&&(e.minWidth=c(t.minW)),t.maxW>0&&(e.maxWidth=c(t.maxW)),t.minH>0&&(e.minHeight=c(t.minH)),t.maxH>0&&(e.maxHeight=c(t.maxH)))},e.setPara=function(t,e,n){if(n.attributes.class?.includes("xfaRich")){e&&(""===t.h&&(e.height="auto"),""===t.w&&(e.width="auto"));const r=p(t);if(r){const t=n.attributes.style;switch(t.display="flex",t.flexDirection="column",r.vAlign){case"top":t.justifyContent="start";break;case"bottom":t.justifyContent="end";break;case"middle":t.justifyContent="center"}const e=r[i.$toStyle]();for(const[n,i]of Object.entries(e))n in t||(t[n]=i)}}},e.toStyle=function(t,...e){const n=Object.create(null);for(const o of e){const e=t[o];if(null!==e)if(h.hasOwnProperty(o))h[o](t,n);else if(e instanceof l.XFAObject){const t=e[i.$toStyle]();t?Object.assign(n,t):(0,r.warn)(`(DEBUG) - XFA - style for ${o} not implemented yet`)}}return n};var i=n(78),r=n(2),o=n(84),s=n(85),a=n(86),l=n(87);function c(t){return"string"==typeof t?"0px":Number.isInteger(t)?`${t}px`:`${t.toFixed(2)}px`}const h={anchorType(t,e){const n=t[i.$getSubformParent]();if(n&&(!n.layout||"position"===n.layout))switch("transform"in e||(e.transform=""),t.anchorType){case"bottomCenter":e.transform+="translate(-50%, -100%)";break;case"bottomLeft":e.transform+="translate(0,-100%)";break;case"bottomRight":e.transform+="translate(-100%,-100%)";break;case"middleCenter":e.transform+="translate(-50%,-50%)";break;case"middleLeft":e.transform+="translate(0,-50%)";break;case"middleRight":e.transform+="translate(-100%,-50%)";break;case"topCenter":e.transform+="translate(-50%,0)";break;case"topRight":e.transform+="translate(-100%,0)"}},dimensions(t,e){const n=t[i.$getSubformParent]();let r=t.w;const o=t.h;if(n.layout?.includes("row")){const e=n[i.$extra],o=t.colSpan;let s;-1===o?(s=e.columnWidths.slice(e.currentColumn).reduce(((t,e)=>t+e),0),e.currentColumn=0):(s=e.columnWidths.slice(e.currentColumn,e.currentColumn+o).reduce(((t,e)=>t+e),0),e.currentColumn=(e.currentColumn+t.colSpan)%e.columnWidths.length),isNaN(s)||(r=t.w=s)}e.width=""!==r?c(r):"auto",e.height=""!==o?c(o):"auto"},position(t,e){const n=t[i.$getSubformParent]();n?.layout&&"position"!==n.layout||(e.position="absolute",e.left=c(t.x),e.top=c(t.y))},rotate(t,e){t.rotate&&("transform"in e||(e.transform=""),e.transform+=`rotate(-${t.rotate}deg)`,e.transformOrigin="top left")},presence(t,e){switch(t.presence){case"invisible":e.visibility="hidden";break;case"hidden":case"inactive":e.display="none"}},hAlign(t,e){if("para"===t[i.$nodeName])switch(t.hAlign){case"justifyAll":e.textAlign="justify-all";break;case"radix":e.textAlign="left";break;default:e.textAlign=t.hAlign}else switch(t.hAlign){case"left":e.alignSelf="start";break;case"center":e.alignSelf="center";break;case"right":e.alignSelf="end"}},margin(t,e){t.margin&&(e.margin=t.margin[i.$toStyle]().margin)}};function u(t,e,n,r,o,s){const l=new a.TextMeasure(e,n,r,o);return"string"==typeof t?l.addString(t):t[i.$pushGlyphs](l),l.compute(s)}function d(t){return t.relevant.length>0&&!t.relevant[0].excluded&&"print"===t.relevant[0].viewname}function p(t){const e=t[i.$getTemplateRoot]()[i.$extra].paraStack;return e.length?e.at(-1):null}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HTMLResult=void 0,e.getBBox=function(t){const e=-1;if(!t)return{x:e,y:e,width:e,height:e};const n=t.trim().split(/\s*,\s*/).map((t=>a(t,"-1")));if(n.length<4||n[2]<0||n[3]<0)return{x:e,y:e,width:e,height:e};const[i,r,o,s]=n;return{x:i,y:r,width:o,height:s}},e.getColor=function(t,e=[0,0,0]){let[n,i,r]=e;if(!t)return{r:n,g:i,b:r};const o=t.trim().split(/\s*,\s*/).map((t=>Math.min(Math.max(0,parseInt(t.trim(),10)),255))).map((t=>isNaN(t)?0:t));return o.length<3||([n,i,r]=o),{r:n,g:i,b:r}},e.getFloat=function({data:t,defaultValue:e,validate:n}){if(!t)return e;t=t.trim();const i=parseFloat(t);return!isNaN(i)&&n(i)?i:e},e.getInteger=function({data:t,defaultValue:e,validate:n}){if(!t)return e;t=t.trim();const i=parseInt(t,10);return!isNaN(i)&&n(i)?i:e},e.getKeyword=s,e.getMeasurement=a,e.getRatio=function(t){if(!t)return{num:1,den:1};const e=t.trim().split(/\s*:\s*/).map((t=>parseFloat(t))).filter((t=>!isNaN(t)));if(1===e.length&&e.push(1),0===e.length)return{num:1,den:1};const[n,i]=e;return{num:n,den:i}},e.getRelevant=function(t){return t?t.trim().split(/\s+/).map((t=>({excluded:"-"===t[0],viewname:t.substring(1)}))):[]},e.getStringOption=function(t,e){return s({data:t,defaultValue:e[0],validate:t=>e.includes(t)})},e.stripQuotes=function(t){return t.startsWith("'")||t.startsWith('"')?t.slice(1,-1):t};var i=n(2);const r={pt:t=>t,cm:t=>t/2.54*72,mm:t=>t/25.4*72,in:t=>72*t,px:t=>t},o=/([+-]?\d+\.?\d*)(.*)/;function s({data:t,defaultValue:e,validate:n}){return t&&n(t=t.trim())?t:e}function a(t,e="0"){if(e||="0",!t)return a(e);const n=t.trim().match(o);if(!n)return a(e);const[,i,s]=n,l=parseFloat(i);if(isNaN(l))return a(e);if(0===l)return 0;const c=r[s];return c?c(l):l}class l{static get FAILURE(){return(0,i.shadow)(this,"FAILURE",new l(!1,null,null,null))}static get EMPTY(){return(0,i.shadow)(this,"EMPTY",new l(!0,null,null,null))}constructor(t,e,n,i){this.success=t,this.html=e,this.bbox=n,this.breakNode=i}isBreak(){return!!this.breakNode}static breakNode(t){return new l(!1,null,null,t)}static success(t,e=null){return new l(!0,t,e,null)}}e.HTMLResult=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontFinder=void 0,e.getMetrics=function(t,e=!1){let n=null;if(t){const e=(0,r.stripQuotes)(t.typeface),o=t[i.$globalData].fontFinder.find(e);n=s(t,o)}if(!n)return{lineHeight:12,lineGap:2,lineNoGap:10};const o=t.size||10,a=n.lineHeight?Math.max(e?0:1.2,n.lineHeight):1.2,l=void 0===n.lineGap?.2:n.lineGap;return{lineHeight:a*o,lineGap:l*o,lineNoGap:Math.max(1,a-l)*o}},e.selectFont=s;var i=n(78),r=n(84),o=n(2);function s(t,e){return"italic"===t.posture?"bold"===t.weight?e.bolditalic:e.italic:"bold"===t.weight?e.bold:e.regular}e.FontFinder=class{constructor(t){this.fonts=new Map,this.cache=new Map,this.warned=new Set,this.defaultFont=null,this.add(t)}add(t,e=null){for(const e of t)this.addPdfFont(e);for(const t of this.fonts.values())t.regular||(t.regular=t.italic||t.bold||t.bolditalic);if(!e||0===e.size)return;const n=this.fonts.get("PdfJS-Fallback-PdfJS-XFA");for(const t of e)this.fonts.set(t,n)}addPdfFont(t){const e=t.cssFontInfo,n=e.fontFamily;let i=this.fonts.get(n);i||(i=Object.create(null),this.fonts.set(n,i),this.defaultFont||(this.defaultFont=i));let r="";const o=parseFloat(e.fontWeight);0!==parseFloat(e.italicAngle)?r=o>=700?"bolditalic":"italic":o>=700&&(r="bold"),r||((t.name.includes("Bold")||t.psName?.includes("Bold"))&&(r="bold"),(t.name.includes("Italic")||t.name.endsWith("It")||t.psName?.includes("Italic")||t.psName?.endsWith("It"))&&(r+="italic")),r||(r="regular"),i[r]=t}getDefault(){return this.defaultFont}find(t,e=!0){let n=this.fonts.get(t)||this.cache.get(t);if(n)return n;const i=/,|-|_| |bolditalic|bold|italic|regular|it/gi;let r=t.replaceAll(i,"");if(n=this.fonts.get(r),n)return this.cache.set(t,n),n;r=r.toLowerCase();const s=[];for(const[t,e]of this.fonts.entries())t.replaceAll(i,"").toLowerCase().startsWith(r)&&s.push(e);if(0===s.length)for(const[,t]of this.fonts.entries())t.regular.name?.replaceAll(i,"").toLowerCase().startsWith(r)&&s.push(t);if(0===s.length){r=r.replaceAll(/psmt|mt/gi,"");for(const[t,e]of this.fonts.entries())t.replaceAll(i,"").toLowerCase().startsWith(r)&&s.push(e)}if(0===s.length)for(const t of this.fonts.values())t.regular.name?.replaceAll(i,"").toLowerCase().startsWith(r)&&s.push(t);return s.length>=1?(1!==s.length&&e&&(0,o.warn)(`XFA - Too many choices to guess the correct font: ${t}`),this.cache.set(t,s[0]),s[0]):(e&&!this.warned.has(t)&&(this.warned.add(t),(0,o.warn)(`XFA - Cannot find the font: ${t}`)),null)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextMeasure=void 0;var i=n(85);class r{constructor(t,e,n,r){if(this.lineHeight=n,this.paraMargin=e||{top:0,bottom:0,left:0,right:0},!t)return void([this.pdfFont,this.xfaFont]=this.defaultFont(r));this.xfaFont={typeface:t.typeface,posture:t.posture,weight:t.weight,size:t.size,letterSpacing:t.letterSpacing};const o=r.find(t.typeface);o?(this.pdfFont=(0,i.selectFont)(t,o),this.pdfFont||([this.pdfFont,this.xfaFont]=this.defaultFont(r))):[this.pdfFont,this.xfaFont]=this.defaultFont(r)}defaultFont(t){const e=t.find("Helvetica",!1)||t.find("Myriad Pro",!1)||t.find("Arial",!1)||t.getDefault();if(e?.regular){const t=e.regular;return[t,{typeface:t.cssFontInfo.fontFamily,posture:"normal",weight:"normal",size:10,letterSpacing:0}]}return[null,{typeface:"Courier",posture:"normal",weight:"normal",size:10,letterSpacing:0}]}}class o{constructor(t,e,n,i){this.fontFinder=i,this.stack=[new r(t,e,n,i)]}pushData(t,e,n){const i=this.stack.at(-1);for(const e of["typeface","posture","weight","size","letterSpacing"])t[e]||(t[e]=i.xfaFont[e]);for(const t of["top","bottom","left","right"])isNaN(e[t])&&(e[t]=i.paraMargin[t]);const o=new r(t,e,n||i.lineHeight,this.fontFinder);o.pdfFont||(o.pdfFont=i.pdfFont),this.stack.push(o)}popFont(){this.stack.pop()}topFont(){return this.stack.at(-1)}}e.TextMeasure=class{constructor(t,e,n,i){this.glyphs=[],this.fontSelector=new o(t,e,n,i),this.extraHeight=0}pushData(t,e,n){this.fontSelector.pushData(t,e,n)}popFont(t){return this.fontSelector.popFont()}addPara(){const t=this.fontSelector.topFont();this.extraHeight+=t.paraMargin.top+t.paraMargin.bottom}addString(t){if(!t)return;const e=this.fontSelector.topFont(),n=e.xfaFont.size;if(e.pdfFont){const i=e.xfaFont.letterSpacing,r=e.pdfFont,o=r.lineHeight||1.2,s=e.lineHeight||Math.max(1.2,o)*n,a=o-(void 0===r.lineGap?.2:r.lineGap),l=Math.max(1,a)*n,c=n/1e3,h=r.defaultWidth||r.charsToGlyphs(" ")[0].width;for(const e of t.split(/[\u2029\n]/)){const t=r.encodeString(e).join(""),n=r.charsToGlyphs(t);for(const t of n){const e=t.width||h;this.glyphs.push([e*c+i,s,l,t.unicode,!1])}this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}else{for(const e of t.split(/[\u2029\n]/)){for(const t of e.split(""))this.glyphs.push([n,1.2*n,n,t,!1]);this.glyphs.push([0,0,0,"\n",!0])}this.glyphs.pop()}}compute(t){let e=-1,n=0,i=0,r=0,o=0,s=0,a=!1,l=!0;for(let c=0,h=this.glyphs.length;c<h;c++){const[h,u,d,p,f]=this.glyphs[c],g=" "===p,m=l?d:u;f?(i=Math.max(i,o),o=0,r+=s,s=m,e=-1,n=0,l=!1):g?o+h>t?(i=Math.max(i,o),o=0,r+=s,s=m,e=-1,n=0,a=!0,l=!1):(s=Math.max(m,s),n=o,o+=h,e=c):o+h>t?(r+=s,s=m,-1!==e?(c=e,i=Math.max(i,n),o=0,e=-1,n=0):(i=Math.max(i,o),o=h),a=!0,l=!1):(o+=h,s=Math.max(m,s))}return i=Math.max(i,o),r+=s+this.extraHeight,{width:1.02*i,height:r,isBroken:a}}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XmlObject=e.XFAObjectArray=e.XFAObject=e.XFAAttribute=e.StringObject=e.OptionObject=e.Option10=e.Option01=e.IntegerObject=e.ContentObject=void 0;var i=n(78),r=n(84),o=n(2),s=n(3),a=n(81),l=n(88);const c=Symbol(),h=Symbol(),u=Symbol(),d=Symbol("_children"),p=Symbol(),f=Symbol(),g=Symbol(),m=Symbol(),y=Symbol(),v=Symbol(),b=Symbol(),w=Symbol(),x=Symbol(),_=Symbol("parent"),S=Symbol(),C=Symbol(),k=Symbol();let A=0;const E=a.NamespaceIds.datasets.id;class T{constructor(t,e,n=!1){this[i.$namespaceId]=t,this[i.$nodeName]=e,this[b]=n,this[_]=null,this[d]=[],this[i.$uid]=`${e}${A++}`,this[i.$globalData]=null}get isXFAObject(){return!0}get isXFAObjectArray(){return!1}createNodes(t){let e=this,n=null;for(const{name:r,index:o}of t){for(let t=0,s=isFinite(o)?o:0;t<=s;t++){const t=e[i.$namespaceId]===E?-1:e[i.$namespaceId];n=new I(t,r),e[i.$appendChild](n)}e=n}return n}[i.$onChild](t){if(!this[b]||!this[i.$onChildCheck](t))return!1;const e=t[i.$nodeName],n=this[e];if(!(n instanceof M))return null!==n&&this[i.$removeChild](n),this[e]=t,this[i.$appendChild](t),!0;if(n.push(t))return this[i.$appendChild](t),!0;let r="";return this.id?r=` (id: ${this.id})`:this.name&&(r=` (name: ${this.name} ${this.h.value})`),(0,o.warn)(`XFA - node "${this[i.$nodeName]}"${r} has already enough "${e}"!`),!1}[i.$onChildCheck](t){return this.hasOwnProperty(t[i.$nodeName])&&t[i.$namespaceId]===this[i.$namespaceId]}[i.$isNsAgnostic](){return!1}[i.$acceptWhitespace](){return!1}[i.$isCDATAXml](){return!1}[i.$isBindable](){return!1}[i.$popPara](){this.para&&this[i.$getTemplateRoot]()[i.$extra].paraStack.pop()}[i.$pushPara](){this[i.$getTemplateRoot]()[i.$extra].paraStack.push(this.para)}[i.$setId](t){this.id&&this[i.$namespaceId]===a.NamespaceIds.template.id&&t.set(this.id,this)}[i.$getTemplateRoot](){return this[i.$globalData].template}[i.$isSplittable](){return!1}[i.$isThereMoreWidth](){return!1}[i.$appendChild](t){t[_]=this,this[d].push(t),!t[i.$globalData]&&this[i.$globalData]&&(t[i.$globalData]=this[i.$globalData])}[i.$removeChild](t){const e=this[d].indexOf(t);this[d].splice(e,1)}[i.$hasSettableValue](){return this.hasOwnProperty("value")}[i.$setValue](t){}[i.$onText](t){}[i.$finalize](){}[i.$clean](t){delete this[b],this[i.$cleanup]&&(t.clean(this[i.$cleanup]),delete this[i.$cleanup])}[i.$indexOf](t){return this[d].indexOf(t)}[i.$insertAt](t,e){e[_]=this,this[d].splice(t,0,e),!e[i.$globalData]&&this[i.$globalData]&&(e[i.$globalData]=this[i.$globalData])}[i.$isTransparent](){return!this.name}[i.$lastAttribute](){return""}[i.$text](){return 0===this[d].length?this[i.$content]:this[d].map((t=>t[i.$text]())).join("")}get[u](){const t=Object.getPrototypeOf(this);if(!t._attributes){const e=t._attributes=new Set;for(const t of Object.getOwnPropertyNames(this)){if(null===this[t]||this[t]instanceof T||this[t]instanceof M)break;e.add(t)}}return(0,o.shadow)(this,u,t._attributes)}[i.$isDescendent](t){let e=this;for(;e;){if(e===t)return!0;e=e[i.$getParent]()}return!1}[i.$getParent](){return this[_]}[i.$getSubformParent](){return this[i.$getParent]()}[i.$getChildren](t=null){return t?this[t]:this[d]}[i.$dump](){const t=Object.create(null);this[i.$content]&&(t.$content=this[i.$content]);for(const e of Object.getOwnPropertyNames(this)){const n=this[e];null!==n&&(n instanceof T?t[e]=n[i.$dump]():n instanceof M?n.isEmpty()||(t[e]=n.dump()):t[e]=n)}return t}[i.$toStyle](){return null}[i.$toHTML](){return r.HTMLResult.EMPTY}*[i.$getContainedChildren](){for(const t of this[i.$getChildren]())yield t}*[m](t,e){for(const n of this[i.$getContainedChildren]())if(!t||e===t.has(n[i.$nodeName])){const t=this[i.$getAvailableSpace](),e=n[i.$toHTML](t);e.success||(this[i.$extra].failingNode=n),yield e}}[i.$flushHTML](){return null}[i.$addHTML](t,e){this[i.$extra].children.push(t)}[i.$getAvailableSpace](){}[i.$childrenToHTML]({filter:t=null,include:e=!0}){if(this[i.$extra].generator){const t=this[i.$getAvailableSpace](),e=this[i.$extra].failingNode[i.$toHTML](t);if(!e.success)return e;e.html&&this[i.$addHTML](e.html,e.bbox),delete this[i.$extra].failingNode}else this[i.$extra].generator=this[m](t,e);for(;;){const t=this[i.$extra].generator.next();if(t.done)break;const e=t.value;if(!e.success)return e;e.html&&this[i.$addHTML](e.html,e.bbox)}return this[i.$extra].generator=null,r.HTMLResult.EMPTY}[i.$setSetAttributes](t){this[C]=new Set(Object.keys(t))}[v](t){const e=this[u],n=this[C];return[...t].filter((t=>e.has(t)&&!n.has(t)))}[i.$resolvePrototypes](t,e=new Set){for(const n of this[d])n[S](t,e)}[S](t,e){const n=this[y](t,e);n?this[c](n,t,e):this[i.$resolvePrototypes](t,e)}[y](t,e){const{use:n,usehref:r}=this;if(!n&&!r)return null;let s=null,a=null,h=null,u=n;if(r?(u=r,r.startsWith("#som(")&&r.endsWith(")")?a=r.slice(5,-1):r.startsWith(".#som(")&&r.endsWith(")")?a=r.slice(6,-1):r.startsWith("#")?h=r.slice(1):r.startsWith(".#")&&(h=r.slice(2))):n.startsWith("#")?h=n.slice(1):a=n,this.use=this.usehref="",h?s=t.get(h):(s=(0,l.searchNode)(t.get(i.$root),this,a,!0,!1),s&&(s=s[0])),!s)return(0,o.warn)(`XFA - Invalid prototype reference: ${u}.`),null;if(s[i.$nodeName]!==this[i.$nodeName])return(0,o.warn)(`XFA - Incompatible prototype: ${s[i.$nodeName]} !== ${this[i.$nodeName]}.`),null;if(e.has(s))return(0,o.warn)("XFA - Cycle detected in prototypes use."),null;e.add(s);const d=s[y](t,e);return d&&s[c](d,t,e),s[i.$resolvePrototypes](t,e),e.delete(s),s}[c](t,e,n){if(n.has(t))(0,o.warn)("XFA - Cycle detected in prototypes use.");else{!this[i.$content]&&t[i.$content]&&(this[i.$content]=t[i.$content]),new Set(n).add(t);for(const e of this[v](t[C]))this[e]=t[e],this[C]&&this[C].add(e);for(const r of Object.getOwnPropertyNames(this)){if(this[u].has(r))continue;const o=this[r],s=t[r];if(o instanceof M){for(const t of o[d])t[S](e,n);for(let r=o[d].length,a=s[d].length;r<a;r++){const s=t[d][r][i.$clone]();if(!o.push(s))break;s[_]=this,this[d].push(s),s[S](e,n)}}else if(null===o){if(null!==s){const t=s[i.$clone]();t[_]=this,this[r]=t,this[d].push(t),t[S](e,n)}}else o[i.$resolvePrototypes](e,n),s&&o[c](s,e,n)}}}static[p](t){return Array.isArray(t)?t.map((t=>T[p](t))):"object"==typeof t&&null!==t?Object.assign({},t):t}[i.$clone](){const t=Object.create(Object.getPrototypeOf(this));for(const e of Object.getOwnPropertySymbols(this))try{t[e]=this[e]}catch{(0,o.shadow)(t,e,this[e])}t[i.$uid]=`${t[i.$nodeName]}${A++}`,t[d]=[];for(const e of Object.getOwnPropertyNames(this)){if(this[u].has(e)){t[e]=T[p](this[e]);continue}const n=this[e];t[e]=n instanceof M?new M(n[w]):null}for(const e of this[d]){const n=e[i.$nodeName],r=e[i.$clone]();t[d].push(r),r[_]=t,null===t[n]?t[n]=r:t[n][d].push(r)}return t}[i.$getChildren](t=null){return t?this[d].filter((e=>e[i.$nodeName]===t)):this[d]}[i.$getChildrenByClass](t){return this[t]}[i.$getChildrenByName](t,e,n=!0){return Array.from(this[i.$getChildrenByNameIt](t,e,n))}*[i.$getChildrenByNameIt](t,e,n=!0){if("parent"!==t){for(const n of this[d])n[i.$nodeName]===t&&(yield n),n.name===t&&(yield n),(e||n[i.$isTransparent]())&&(yield*n[i.$getChildrenByNameIt](t,e,!1));n&&this[u].has(t)&&(yield new O(this,t,this[t]))}else yield this[_]}}e.XFAObject=T;class M{constructor(t=1/0){this[w]=t,this[d]=[]}get isXFAObject(){return!1}get isXFAObjectArray(){return!0}push(t){return this[d].length<=this[w]?(this[d].push(t),!0):((0,o.warn)(`XFA - node "${t[i.$nodeName]}" accepts no more than ${this[w]} children`),!1)}isEmpty(){return 0===this[d].length}dump(){return 1===this[d].length?this[d][0][i.$dump]():this[d].map((t=>t[i.$dump]()))}[i.$clone](){const t=new M(this[w]);return t[d]=this[d].map((t=>t[i.$clone]())),t}get children(){return this[d]}clear(){this[d].length=0}}e.XFAObjectArray=M;class O{constructor(t,e,n){this[_]=t,this[i.$nodeName]=e,this[i.$content]=n,this[i.$consumed]=!1,this[i.$uid]="attribute"+A++}[i.$getParent](){return this[_]}[i.$isDataValue](){return!0}[i.$getDataValue](){return this[i.$content].trim()}[i.$setValue](t){t=t.value||"",this[i.$content]=t.toString()}[i.$text](){return this[i.$content]}[i.$isDescendent](t){return this[_]===t||this[_][i.$isDescendent](t)}}e.XFAAttribute=O;class I extends T{constructor(t,e,n={}){if(super(t,e),this[i.$content]="",this[f]=null,"#text"!==e){const t=new Map;this[h]=t;for(const[e,i]of Object.entries(n))t.set(e,new O(this,e,i));if(n.hasOwnProperty(i.$nsAttributes)){const t=n[i.$nsAttributes].xfa.dataNode;void 0!==t&&("dataGroup"===t?this[f]=!1:"dataValue"===t&&(this[f]=!0))}}this[i.$consumed]=!1}[i.$toString](t){const e=this[i.$nodeName];if("#text"===e)return void t.push((0,s.encodeToXmlString)(this[i.$content]));const n=(0,o.utf8StringToString)(e),r=this[i.$namespaceId]===E?"xfa:":"";t.push(`<${r}${n}`);for(const[e,n]of this[h].entries()){const r=(0,o.utf8StringToString)(e);t.push(` ${r}="${(0,s.encodeToXmlString)(n[i.$content])}"`)}if(null!==this[f]&&(this[f]?t.push(' xfa:dataNode="dataValue"'):t.push(' xfa:dataNode="dataGroup"')),this[i.$content]||0!==this[d].length){if(t.push(">"),this[i.$content])"string"==typeof this[i.$content]?t.push((0,s.encodeToXmlString)(this[i.$content])):this[i.$content][i.$toString](t);else for(const e of this[d])e[i.$toString](t);t.push(`</${r}${n}>`)}else t.push("/>")}[i.$onChild](t){if(this[i.$content]){const t=new I(this[i.$namespaceId],"#text");this[i.$appendChild](t),t[i.$content]=this[i.$content],this[i.$content]=""}return this[i.$appendChild](t),!0}[i.$onText](t){this[i.$content]+=t}[i.$finalize](){if(this[i.$content]&&this[d].length>0){const t=new I(this[i.$namespaceId],"#text");this[i.$appendChild](t),t[i.$content]=this[i.$content],delete this[i.$content]}}[i.$toHTML](){return"#text"===this[i.$nodeName]?r.HTMLResult.success({name:"#text",value:this[i.$content]}):r.HTMLResult.EMPTY}[i.$getChildren](t=null){return t?this[d].filter((e=>e[i.$nodeName]===t)):this[d]}[i.$getAttributes](){return this[h]}[i.$getChildrenByClass](t){const e=this[h].get(t);return void 0!==e?e:this[i.$getChildren](t)}*[i.$getChildrenByNameIt](t,e){const n=this[h].get(t);n&&(yield n);for(const n of this[d])n[i.$nodeName]===t&&(yield n),e&&(yield*n[i.$getChildrenByNameIt](t,e))}*[i.$getAttributeIt](t,e){const n=this[h].get(t);!n||e&&n[i.$consumed]||(yield n);for(const n of this[d])yield*n[i.$getAttributeIt](t,e)}*[i.$getRealChildrenByNameIt](t,e,n){for(const r of this[d])r[i.$nodeName]!==t||n&&r[i.$consumed]||(yield r),e&&(yield*r[i.$getRealChildrenByNameIt](t,e,n))}[i.$isDataValue](){return null===this[f]?0===this[d].length||this[d][0][i.$namespaceId]===a.NamespaceIds.xhtml.id:this[f]}[i.$getDataValue](){return null===this[f]?0===this[d].length?this[i.$content].trim():this[d][0][i.$namespaceId]===a.NamespaceIds.xhtml.id?this[d][0][i.$text]().trim():null:this[i.$content].trim()}[i.$setValue](t){t=t.value||"",this[i.$content]=t.toString()}[i.$dump](t=!1){const e=Object.create(null);t&&(e.$ns=this[i.$namespaceId]),this[i.$content]&&(e.$content=this[i.$content]),e.$name=this[i.$nodeName],e.children=[];for(const n of this[d])e.children.push(n[i.$dump](t));e.attributes=Object.create(null);for(const[t,n]of this[h])e.attributes[t]=n[i.$content];return e}}e.XmlObject=I;class D extends T{constructor(t,e){super(t,e),this[i.$content]=""}[i.$onText](t){this[i.$content]+=t}[i.$finalize](){}}e.ContentObject=D;class F extends D{constructor(t,e,n){super(t,e),this[x]=n}[i.$finalize](){this[i.$content]=(0,r.getKeyword)({data:this[i.$content],defaultValue:this[x][0],validate:t=>this[x].includes(t)})}[i.$clean](t){super[i.$clean](t),delete this[x]}}e.OptionObject=F;class P extends D{[i.$finalize](){this[i.$content]=this[i.$content].trim()}}e.StringObject=P;class R extends D{constructor(t,e,n,i){super(t,e),this[g]=n,this[k]=i}[i.$finalize](){this[i.$content]=(0,r.getInteger)({data:this[i.$content],defaultValue:this[g],validate:this[k]})}[i.$clean](t){super[i.$clean](t),delete this[g],delete this[k]}}e.IntegerObject=R,e.Option01=class extends R{constructor(t,e){super(t,e,0,(t=>1===t))}},e.Option10=class extends R{constructor(t,e){super(t,e,1,(t=>0===t))}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createDataNode=function(t,e,n){const o=h(n);if(!o)return null;if(o.some((t=>t.operator===a.dotDot)))return null;const s=l.get(o[0].name);let c=0;s?(t=s(t,e),c=1):t=e||t;for(let e=o.length;c<e;c++){const{name:e,operator:n,index:s}=o[c];if(!isFinite(s))return o[c].index=0,t.createNodes(o.slice(c));let l;switch(n){case a.dot:l=t[i.$getChildrenByName](e,!1);break;case a.dotDot:l=t[i.$getChildrenByName](e,!0);break;case a.dotHash:l=t[i.$getChildrenByClass](e),l=l.isXFAObjectArray?l.children:[l]}if(0===l.length)return t.createNodes(o.slice(c));if(!(s<l.length))return o[c].index=s-l.length,t.createNodes(o.slice(c));{const e=l[s];if(!e.isXFAObject)return(0,r.warn)("XFA - Cannot create a node."),null;t=e}}return null},e.searchNode=function(t,e,n,r=!0,o=!0){const s=h(n,r);if(!s)return null;const u=l.get(s[0].name);let d,p=0;u?(d=!0,t=[u(t,e)],p=1):(d=null===e,t=[e||t]);for(let n=s.length;p<n;p++){const{name:n,cacheName:r,operator:l,index:h}=s[p],u=[];for(const e of t){if(!e.isXFAObject)continue;let t,s;if(o&&(s=c.get(e),s||(s=new Map,c.set(e,s)),t=s.get(r)),!t){switch(l){case a.dot:t=e[i.$getChildrenByName](n,!1);break;case a.dotDot:t=e[i.$getChildrenByName](n,!0);break;case a.dotHash:t=e[i.$getChildrenByClass](n),t=t.isXFAObjectArray?t.children:[t]}o&&s.set(r,t)}t.length>0&&u.push(t)}if(0!==u.length||d||0!==p)t=isFinite(h)?u.filter((t=>h<t.length)).map((t=>t[h])):u.flat();else{const n=e[i.$getParent]();if(!(e=n))return null;p=-1,t=[e]}}return 0===t.length?null:t};var i=n(78),r=n(2);const o=/^[^.[]+/,s=/^[^\]]+/,a={dot:0,dotDot:1,dotHash:2,dotBracket:3,dotParen:4},l=new Map([["$data",(t,e)=>t.datasets?t.datasets.data:t],["$record",(t,e)=>(t.datasets?t.datasets.data:t)[i.$getChildren]()[0]],["$template",(t,e)=>t.template],["$connectionSet",(t,e)=>t.connectionSet],["$form",(t,e)=>t.form],["$layout",(t,e)=>t.layout],["$host",(t,e)=>t.host],["$dataWindow",(t,e)=>t.dataWindow],["$event",(t,e)=>t.event],["!",(t,e)=>t.datasets],["$xfa",(t,e)=>t],["xfa",(t,e)=>t],["$",(t,e)=>e]]),c=new WeakMap;function h(t,e,n=!0){let i=t.match(o);if(!i)return null;let[l]=i;const c=[{name:l,cacheName:"."+l,index:0,js:null,formCalc:null,operator:a.dot}];let h=l.length;for(;h<t.length;){const d=h;if("["===t.charAt(h++)){if(i=t.slice(h).match(s),!i)return(0,r.warn)("XFA - Invalid index in SOM expression"),null;c.at(-1).index="*"===(u=(u=i[0]).trim())?1/0:parseInt(u,10)||0,h+=i[0].length+1;continue}let p;switch(t.charAt(h)){case".":if(!e)return null;h++,p=a.dotDot;break;case"#":h++,p=a.dotHash;break;case"[":if(n)return(0,r.warn)("XFA - SOM expression contains a FormCalc subexpression which is not supported for now."),null;p=a.dotBracket;break;case"(":if(n)return(0,r.warn)("XFA - SOM expression contains a JavaScript subexpression which is not supported for now."),null;p=a.dotParen;break;default:p=a.dot}if(i=t.slice(h).match(o),!i)break;[l]=i,h+=l.length,c.push({name:l,cacheName:t.slice(d,h),operator:p,index:0,js:null,formCalc:null})}var u;return c}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DataHandler=void 0;var i=n(78);e.DataHandler=class{constructor(t,e){this.data=e,this.dataset=t.datasets||null}serialize(t){const e=[[-1,this.data[i.$getChildren]()]];for(;e.length>0;){const n=e.at(-1),[r,o]=n;if(r+1===o.length){e.pop();continue}const s=o[++n[0]],a=t.get(s[i.$uid]);if(a)s[i.$setValue](a);else{const e=s[i.$getAttributes]();for(const n of e.values()){const e=t.get(n[i.$uid]);if(e){n[i.$setValue](e);break}}}const l=s[i.$getChildren]();l.length>0&&e.push([-1,l])}const n=['<xfa:datasets xmlns:xfa="http://www.xfa.org/schema/xfa-data/1.0/">'];if(this.dataset)for(const t of this.dataset[i.$getChildren]())"data"!==t[i.$nodeName]&&t[i.$toString](n);return this.data[i.$toString](n),n.push("</xfa:datasets>"),n.join("")}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XFAParser=void 0;var i=n(78),r=n(71),o=n(91),s=n(2);class a extends r.XMLParserBase{constructor(t=null,e=!1){super(),this._builder=new o.Builder(t),this._stack=[],this._globalData={usedTypefaces:new Set},this._ids=new Map,this._current=this._builder.buildRoot(this._ids),this._errorCode=r.XMLParserErrorCode.NoError,this._whiteRegex=/^\s+$/,this._nbsps=/\xa0+/g,this._richText=e}parse(t){if(this.parseXml(t),this._errorCode===r.XMLParserErrorCode.NoError)return this._current[i.$finalize](),this._current.element}onText(t){t=t.replace(this._nbsps,(t=>t.slice(1)+" ")),this._richText||this._current[i.$acceptWhitespace]()?this._current[i.$onText](t,this._richText):this._whiteRegex.test(t)||this._current[i.$onText](t.trim())}onCdata(t){this._current[i.$onText](t)}_mkAttributes(t,e){let n=null,r=null;const o=Object.create({});for(const{name:a,value:l}of t)if("xmlns"===a)n?(0,s.warn)(`XFA - multiple namespace definition in <${e}>`):n=l;else if(a.startsWith("xmlns:")){const t=a.substring(6);r||(r=[]),r.push({prefix:t,value:l})}else{const t=a.indexOf(":");if(-1===t)o[a]=l;else{let e=o[i.$nsAttributes];e||(e=o[i.$nsAttributes]=Object.create(null));const[n,r]=[a.slice(0,t),a.slice(t+1)];(e[n]||=Object.create(null))[r]=l}}return[n,r,o]}_getNameAndPrefix(t,e){const n=t.indexOf(":");return-1===n?[t,null]:[t.substring(n+1),e?"":t.substring(0,n)]}onBeginElement(t,e,n){const[r,o,s]=this._mkAttributes(e,t),[a,l]=this._getNameAndPrefix(t,this._builder.isNsAgnostic()),c=this._builder.build({nsPrefix:l,name:a,attributes:s,namespace:r,prefixes:o});if(c[i.$globalData]=this._globalData,n)return c[i.$finalize](),this._current[i.$onChild](c)&&c[i.$setId](this._ids),void c[i.$clean](this._builder);this._stack.push(this._current),this._current=c}onEndElement(t){const e=this._current;if(e[i.$isCDATAXml]()&&"string"==typeof e[i.$content]){const t=new a;t._globalData=this._globalData;const n=t.parse(e[i.$content]);e[i.$content]=null,e[i.$onChild](n)}e[i.$finalize](),this._current=this._stack.pop(),this._current[i.$onChild](e)&&e[i.$setId](this._ids),e[i.$clean](this._builder)}onError(t){this._errorCode=t}}e.XFAParser=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Builder=void 0;var i=n(81),r=n(78),o=n(92),s=n(80),a=n(101),l=n(2),c=n(87);class h extends c.XFAObject{constructor(t){super(-1,"root",Object.create(null)),this.element=null,this[r.$ids]=t}[r.$onChild](t){return this.element=t,!0}[r.$finalize](){super[r.$finalize](),this.element.template instanceof s.Template&&(this[r.$ids].set(r.$root,this.element),this.element.template[r.$resolvePrototypes](this[r.$ids]),this.element.template[r.$ids]=this[r.$ids])}}class u extends c.XFAObject{constructor(){super(-1,"",Object.create(null))}[r.$onChild](t){return!1}}e.Builder=class{constructor(t=null){this._namespaceStack=[],this._nsAgnosticLevel=0,this._namespacePrefixes=new Map,this._namespaces=new Map,this._nextNsId=Math.max(...Object.values(i.NamespaceIds).map((({id:t})=>t))),this._currentNamespace=t||new a.UnknownNamespace(++this._nextNsId)}buildRoot(t){return new h(t)}build({nsPrefix:t,name:e,attributes:n,namespace:s,prefixes:a}){const l=null!==s;if(l&&(this._namespaceStack.push(this._currentNamespace),this._currentNamespace=this._searchNamespace(s)),a&&this._addNamespacePrefix(a),n.hasOwnProperty(r.$nsAttributes)){const t=o.NamespaceSetUp.datasets,e=n[r.$nsAttributes];let i=null;for(const[n,r]of Object.entries(e))if(this._getNamespaceToUse(n)===t){i={xfa:r};break}i?n[r.$nsAttributes]=i:delete n[r.$nsAttributes]}const c=this._getNamespaceToUse(t),h=c?.[i.$buildXFAObject](e,n)||new u;return h[r.$isNsAgnostic]()&&this._nsAgnosticLevel++,(l||a||h[r.$isNsAgnostic]())&&(h[r.$cleanup]={hasNamespace:l,prefixes:a,nsAgnostic:h[r.$isNsAgnostic]()}),h}isNsAgnostic(){return this._nsAgnosticLevel>0}_searchNamespace(t){let e=this._namespaces.get(t);if(e)return e;for(const[n,{check:r}]of Object.entries(i.NamespaceIds))if(r(t)){if(e=o.NamespaceSetUp[n],e)return this._namespaces.set(t,e),e;break}return e=new a.UnknownNamespace(++this._nextNsId),this._namespaces.set(t,e),e}_addNamespacePrefix(t){for(const{prefix:e,value:n}of t){const t=this._searchNamespace(n);let i=this._namespacePrefixes.get(e);i||(i=[],this._namespacePrefixes.set(e,i)),i.push(t)}}_getNamespaceToUse(t){if(!t)return this._currentNamespace;const e=this._namespacePrefixes.get(t);return e?.length>0?e.at(-1):((0,l.warn)(`Unknown namespace prefix: ${t}.`),null)}clean(t){const{hasNamespace:e,prefixes:n,nsAgnostic:i}=t;e&&(this._currentNamespace=this._namespaceStack.pop()),n&&n.forEach((({prefix:t})=>{this._namespacePrefixes.get(t).pop()})),i&&this._nsAgnosticLevel--}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NamespaceSetUp=void 0;var i=n(93),r=n(94),o=n(95),s=n(96),a=n(97),l=n(98),c=n(80),h=n(99),u=n(100);const d={config:i.ConfigNamespace,connection:r.ConnectionSetNamespace,datasets:o.DatasetsNamespace,localeSet:s.LocaleSetNamespace,signature:a.SignatureNamespace,stylesheet:l.StylesheetNamespace,template:c.TemplateNamespace,xdp:h.XdpNamespace,xhtml:u.XhtmlNamespace};e.NamespaceSetUp=d},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigNamespace=void 0;var i=n(81),r=n(78),o=n(87),s=n(84),a=n(2);const l=i.NamespaceIds.config.id;class c extends o.XFAObject{constructor(t){super(l,"acrobat",!0),this.acrobat7=null,this.autoSave=null,this.common=null,this.validate=null,this.validateApprovalSignatures=null,this.submitUrl=new o.XFAObjectArray}}class h extends o.XFAObject{constructor(t){super(l,"acrobat7",!0),this.dynamicRender=null}}class u extends o.OptionObject{constructor(t){super(l,"ADBE_JSConsole",["delegate","Enable","Disable"])}}class d extends o.OptionObject{constructor(t){super(l,"ADBE_JSDebugger",["delegate","Enable","Disable"])}}class p extends o.Option01{constructor(t){super(l,"addSilentPrint")}}class f extends o.Option01{constructor(t){super(l,"addViewerPreferences")}}class g extends o.Option10{constructor(t){super(l,"adjustData")}}class m extends o.IntegerObject{constructor(t){super(l,"adobeExtensionLevel",0,(t=>t>=1&&t<=8))}}class y extends o.XFAObject{constructor(t){super(l,"agent",!0),this.name=t.name?t.name.trim():"",this.common=new o.XFAObjectArray}}class v extends o.ContentObject{constructor(t){super(l,"alwaysEmbed")}}class b extends o.StringObject{constructor(t){super(l,"amd")}}class w extends o.XFAObject{constructor(t){super(l,"area"),this.level=(0,s.getInteger)({data:t.level,defaultValue:0,validate:t=>t>=1&&t<=3}),this.name=(0,s.getStringOption)(t.name,["","barcode","coreinit","deviceDriver","font","general","layout","merge","script","signature","sourceSet","templateCache"])}}class x extends o.OptionObject{constructor(t){super(l,"attributes",["preserve","delegate","ignore"])}}class _ extends o.OptionObject{constructor(t){super(l,"autoSave",["disabled","enabled"])}}class S extends o.StringObject{constructor(t){super(l,"base")}}class C extends o.XFAObject{constructor(t){super(l,"batchOutput"),this.format=(0,s.getStringOption)(t.format,["none","concat","zip","zipCompress"])}}class k extends o.ContentObject{constructor(t){super(l,"behaviorOverride")}[r.$finalize](){this[r.$content]=new Map(this[r.$content].trim().split(/\s+/).filter((t=>t.includes(":"))).map((t=>t.split(":",2))))}}class A extends o.XFAObject{constructor(t){super(l,"cache",!0),this.templateCache=null}}class E extends o.Option01{constructor(t){super(l,"change")}}class T extends o.XFAObject{constructor(t){super(l,"common",!0),this.data=null,this.locale=null,this.localeSet=null,this.messaging=null,this.suppressBanner=null,this.template=null,this.validationMessaging=null,this.versionControl=null,this.log=new o.XFAObjectArray}}class M extends o.XFAObject{constructor(t){super(l,"compress"),this.scope=(0,s.getStringOption)(t.scope,["imageOnly","document"])}}class O extends o.Option01{constructor(t){super(l,"compressLogicalStructure")}}class I extends o.Option10{constructor(t){super(l,"compressObjectStream")}}class D extends o.XFAObject{constructor(t){super(l,"compression",!0),this.compressLogicalStructure=null,this.compressObjectStream=null,this.level=null,this.type=null}}class F extends o.XFAObject{constructor(t){super(l,"config",!0),this.acrobat=null,this.present=null,this.trace=null,this.agent=new o.XFAObjectArray}}class P extends o.OptionObject{constructor(t){super(l,"conformance",["A","B"])}}class R extends o.Option01{constructor(t){super(l,"contentCopy")}}class L extends o.IntegerObject{constructor(t){super(l,"copies",1,(t=>t>=1))}}class N extends o.StringObject{constructor(t){super(l,"creator")}}class B extends o.IntegerObject{constructor(t){super(l,"currentPage",0,(t=>t>=0))}}class j extends o.XFAObject{constructor(t){super(l,"data",!0),this.adjustData=null,this.attributes=null,this.incrementalLoad=null,this.outputXSL=null,this.range=null,this.record=null,this.startNode=null,this.uri=null,this.window=null,this.xsl=null,this.excludeNS=new o.XFAObjectArray,this.transform=new o.XFAObjectArray}}class z extends o.XFAObject{constructor(t){super(l,"debug",!0),this.uri=null}}class $ extends o.ContentObject{constructor(t){super(l,"defaultTypeface"),this.writingScript=(0,s.getStringOption)(t.writingScript,["*","Arabic","Cyrillic","EastEuropeanRoman","Greek","Hebrew","Japanese","Korean","Roman","SimplifiedChinese","Thai","TraditionalChinese","Vietnamese"])}}class H extends o.OptionObject{constructor(t){super(l,"destination",["pdf","pcl","ps","webClient","zpl"])}}class U extends o.Option01{constructor(t){super(l,"documentAssembly")}}class V extends o.XFAObject{constructor(t){super(l,"driver",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class W extends o.OptionObject{constructor(t){super(l,"duplexOption",["simplex","duplexFlipLongEdge","duplexFlipShortEdge"])}}class q extends o.OptionObject{constructor(t){super(l,"dynamicRender",["forbidden","required"])}}class K extends o.Option01{constructor(t){super(l,"embed")}}class X extends o.Option01{constructor(t){super(l,"encrypt")}}class G extends o.XFAObject{constructor(t){super(l,"encryption",!0),this.encrypt=null,this.encryptionLevel=null,this.permissions=null}}class Y extends o.OptionObject{constructor(t){super(l,"encryptionLevel",["40bit","128bit"])}}class J extends o.StringObject{constructor(t){super(l,"enforce")}}class Z extends o.XFAObject{constructor(t){super(l,"equate"),this.force=(0,s.getInteger)({data:t.force,defaultValue:1,validate:t=>0===t}),this.from=t.from||"",this.to=t.to||""}}class Q extends o.XFAObject{constructor(t){super(l,"equateRange"),this.from=t.from||"",this.to=t.to||"",this._unicodeRange=t.unicodeRange||""}get unicodeRange(){const t=[],e=/U\+([0-9a-fA-F]+)/,n=this._unicodeRange;for(let i of n.split(",").map((t=>t.trim())).filter((t=>!!t)))i=i.split("-",2).map((t=>{const n=t.match(e);return n?parseInt(n[1],16):0})),1===i.length&&i.push(i[0]),t.push(i);return(0,a.shadow)(this,"unicodeRange",t)}}class tt extends o.ContentObject{constructor(t){super(l,"exclude")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>t&&["calculate","close","enter","exit","initialize","ready","validate"].includes(t)))}}class et extends o.StringObject{constructor(t){super(l,"excludeNS")}}class nt extends o.OptionObject{constructor(t){super(l,"flipLabel",["usePrinterSetting","on","off"])}}class it extends o.XFAObject{constructor(t){super(l,"fontInfo",!0),this.embed=null,this.map=null,this.subsetBelow=null,this.alwaysEmbed=new o.XFAObjectArray,this.defaultTypeface=new o.XFAObjectArray,this.neverEmbed=new o.XFAObjectArray}}class rt extends o.Option01{constructor(t){super(l,"formFieldFilling")}}class ot extends o.StringObject{constructor(t){super(l,"groupParent")}}class st extends o.OptionObject{constructor(t){super(l,"ifEmpty",["dataValue","dataGroup","ignore","remove"])}}class at extends o.StringObject{constructor(t){super(l,"includeXDPContent")}}class lt extends o.OptionObject{constructor(t){super(l,"incrementalLoad",["none","forwardOnly"])}}class ct extends o.Option01{constructor(t){super(l,"incrementalMerge")}}class ht extends o.Option01{constructor(t){super(l,"interactive")}}class ut extends o.OptionObject{constructor(t){super(l,"jog",["usePrinterSetting","none","pageSet"])}}class dt extends o.XFAObject{constructor(t){super(l,"labelPrinter",!0),this.name=(0,s.getStringOption)(t.name,["zpl","dpl","ipl","tcpl"]),this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class pt extends o.OptionObject{constructor(t){super(l,"layout",["paginate","panel"])}}class ft extends o.IntegerObject{constructor(t){super(l,"level",0,(t=>t>0))}}class gt extends o.Option01{constructor(t){super(l,"linearized")}}class mt extends o.StringObject{constructor(t){super(l,"locale")}}class yt extends o.StringObject{constructor(t){super(l,"localeSet")}}class vt extends o.XFAObject{constructor(t){super(l,"log",!0),this.mode=null,this.threshold=null,this.to=null,this.uri=null}}class bt extends o.XFAObject{constructor(t){super(l,"map",!0),this.equate=new o.XFAObjectArray,this.equateRange=new o.XFAObjectArray}}class wt extends o.XFAObject{constructor(t){super(l,"mediumInfo",!0),this.map=null}}class xt extends o.XFAObject{constructor(t){super(l,"message",!0),this.msgId=null,this.severity=null}}class _t extends o.XFAObject{constructor(t){super(l,"messaging",!0),this.message=new o.XFAObjectArray}}class St extends o.OptionObject{constructor(t){super(l,"mode",["append","overwrite"])}}class Ct extends o.Option01{constructor(t){super(l,"modifyAnnots")}}class kt extends o.IntegerObject{constructor(t){super(l,"msgId",1,(t=>t>=1))}}class At extends o.StringObject{constructor(t){super(l,"nameAttr")}}class Et extends o.ContentObject{constructor(t){super(l,"neverEmbed")}}class Tt extends o.IntegerObject{constructor(t){super(l,"numberOfCopies",null,(t=>t>=2&&t<=5))}}class Mt extends o.XFAObject{constructor(t){super(l,"openAction",!0),this.destination=null}}class Ot extends o.XFAObject{constructor(t){super(l,"output",!0),this.to=null,this.type=null,this.uri=null}}class It extends o.StringObject{constructor(t){super(l,"outputBin")}}class Dt extends o.XFAObject{constructor(t){super(l,"outputXSL",!0),this.uri=null}}class Ft extends o.OptionObject{constructor(t){super(l,"overprint",["none","both","draw","field"])}}class Pt extends o.StringObject{constructor(t){super(l,"packets")}[r.$finalize](){"*"!==this[r.$content]&&(this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>["config","datasets","template","xfdf","xslt"].includes(t))))}}class Rt extends o.XFAObject{constructor(t){super(l,"pageOffset"),this.x=(0,s.getInteger)({data:t.x,defaultValue:"useXDCSetting",validate:t=>!0}),this.y=(0,s.getInteger)({data:t.y,defaultValue:"useXDCSetting",validate:t=>!0})}}class Lt extends o.StringObject{constructor(t){super(l,"pageRange")}[r.$finalize](){const t=this[r.$content].trim().split(/\s+/).map((t=>parseInt(t,10))),e=[];for(let n=0,i=t.length;n<i;n+=2)e.push(t.slice(n,n+2));this[r.$content]=e}}class Nt extends o.OptionObject{constructor(t){super(l,"pagination",["simplex","duplexShortEdge","duplexLongEdge"])}}class Bt extends o.OptionObject{constructor(t){super(l,"paginationOverride",["none","forceDuplex","forceDuplexLongEdge","forceDuplexShortEdge","forceSimplex"])}}class jt extends o.IntegerObject{constructor(t){super(l,"part",1,(t=>!1))}}class zt extends o.XFAObject{constructor(t){super(l,"pcl",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.pageOffset=null,this.staple=null,this.xdc=null}}class $t extends o.XFAObject{constructor(t){super(l,"pdf",!0),this.name=t.name||"",this.adobeExtensionLevel=null,this.batchOutput=null,this.compression=null,this.creator=null,this.encryption=null,this.fontInfo=null,this.interactive=null,this.linearized=null,this.openAction=null,this.pdfa=null,this.producer=null,this.renderPolicy=null,this.scriptModel=null,this.silentPrint=null,this.submitFormat=null,this.tagged=null,this.version=null,this.viewerPreferences=null,this.xdc=null}}class Ht extends o.XFAObject{constructor(t){super(l,"pdfa",!0),this.amd=null,this.conformance=null,this.includeXDPContent=null,this.part=null}}class Ut extends o.XFAObject{constructor(t){super(l,"permissions",!0),this.accessibleContent=null,this.change=null,this.contentCopy=null,this.documentAssembly=null,this.formFieldFilling=null,this.modifyAnnots=null,this.plaintextMetadata=null,this.print=null,this.printHighQuality=null}}class Vt extends o.Option01{constructor(t){super(l,"pickTrayByPDFSize")}}class Wt extends o.StringObject{constructor(t){super(l,"picture")}}class qt extends o.Option01{constructor(t){super(l,"plaintextMetadata")}}class Kt extends o.OptionObject{constructor(t){super(l,"presence",["preserve","dissolve","dissolveStructure","ignore","remove"])}}class Xt extends o.XFAObject{constructor(t){super(l,"present",!0),this.behaviorOverride=null,this.cache=null,this.common=null,this.copies=null,this.destination=null,this.incrementalMerge=null,this.layout=null,this.output=null,this.overprint=null,this.pagination=null,this.paginationOverride=null,this.script=null,this.validate=null,this.xdp=null,this.driver=new o.XFAObjectArray,this.labelPrinter=new o.XFAObjectArray,this.pcl=new o.XFAObjectArray,this.pdf=new o.XFAObjectArray,this.ps=new o.XFAObjectArray,this.submitUrl=new o.XFAObjectArray,this.webClient=new o.XFAObjectArray,this.zpl=new o.XFAObjectArray}}class Gt extends o.Option01{constructor(t){super(l,"print")}}class Yt extends o.Option01{constructor(t){super(l,"printHighQuality")}}class Jt extends o.OptionObject{constructor(t){super(l,"printScaling",["appdefault","noScaling"])}}class Zt extends o.StringObject{constructor(t){super(l,"printerName")}}class Qt extends o.StringObject{constructor(t){super(l,"producer")}}class te extends o.XFAObject{constructor(t){super(l,"ps",!0),this.name=t.name||"",this.batchOutput=null,this.fontInfo=null,this.jog=null,this.mediumInfo=null,this.outputBin=null,this.staple=null,this.xdc=null}}class ee extends o.ContentObject{constructor(t){super(l,"range")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s*,\s*/,2).map((t=>t.split("-").map((t=>parseInt(t.trim(),10))))).filter((t=>t.every((t=>!isNaN(t))))).map((t=>(1===t.length&&t.push(t[0]),t)))}}class ne extends o.ContentObject{constructor(t){super(l,"record")}[r.$finalize](){this[r.$content]=this[r.$content].trim();const t=parseInt(this[r.$content],10);!isNaN(t)&&t>=0&&(this[r.$content]=t)}}class ie extends o.ContentObject{constructor(t){super(l,"relevant")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/)}}class re extends o.ContentObject{constructor(t){super(l,"rename")}[r.$finalize](){this[r.$content]=this[r.$content].trim(),(this[r.$content].toLowerCase().startsWith("xml")||new RegExp("[\\p{L}_][\\p{L}\\d._\\p{M}-]*","u").test(this[r.$content]))&&(0,a.warn)("XFA - Rename: invalid XFA name")}}class oe extends o.OptionObject{constructor(t){super(l,"renderPolicy",["server","client"])}}class se extends o.OptionObject{constructor(t){super(l,"runScripts",["both","client","none","server"])}}class ae extends o.XFAObject{constructor(t){super(l,"script",!0),this.currentPage=null,this.exclude=null,this.runScripts=null}}class le extends o.OptionObject{constructor(t){super(l,"scriptModel",["XFA","none"])}}class ce extends o.OptionObject{constructor(t){super(l,"severity",["ignore","error","information","trace","warning"])}}class he extends o.XFAObject{constructor(t){super(l,"silentPrint",!0),this.addSilentPrint=null,this.printerName=null}}class ue extends o.XFAObject{constructor(t){super(l,"staple"),this.mode=(0,s.getStringOption)(t.mode,["usePrinterSetting","on","off"])}}class de extends o.StringObject{constructor(t){super(l,"startNode")}}class pe extends o.IntegerObject{constructor(t){super(l,"startPage",0,(t=>!0))}}class fe extends o.OptionObject{constructor(t){super(l,"submitFormat",["html","delegate","fdf","xml","pdf"])}}class ge extends o.StringObject{constructor(t){super(l,"submitUrl")}}class me extends o.IntegerObject{constructor(t){super(l,"subsetBelow",100,(t=>t>=0&&t<=100))}}class ye extends o.Option01{constructor(t){super(l,"suppressBanner")}}class ve extends o.Option01{constructor(t){super(l,"tagged")}}class be extends o.XFAObject{constructor(t){super(l,"template",!0),this.base=null,this.relevant=null,this.startPage=null,this.uri=null,this.xsl=null}}class we extends o.OptionObject{constructor(t){super(l,"threshold",["trace","error","information","warning"])}}class xe extends o.OptionObject{constructor(t){super(l,"to",["null","memory","stderr","stdout","system","uri"])}}class _e extends o.XFAObject{constructor(t){super(l,"templateCache"),this.maxEntries=(0,s.getInteger)({data:t.maxEntries,defaultValue:5,validate:t=>t>=0})}}class Se extends o.XFAObject{constructor(t){super(l,"trace",!0),this.area=new o.XFAObjectArray}}class Ce extends o.XFAObject{constructor(t){super(l,"transform",!0),this.groupParent=null,this.ifEmpty=null,this.nameAttr=null,this.picture=null,this.presence=null,this.rename=null,this.whitespace=null}}class ke extends o.OptionObject{constructor(t){super(l,"type",["none","ascii85","asciiHex","ccittfax","flate","lzw","runLength","native","xdp","mergedXDP"])}}class Ae extends o.StringObject{constructor(t){super(l,"uri")}}class Ee extends o.OptionObject{constructor(t){super(l,"validate",["preSubmit","prePrint","preExecute","preSave"])}}class Te extends o.ContentObject{constructor(t){super(l,"validateApprovalSignatures")}[r.$finalize](){this[r.$content]=this[r.$content].trim().split(/\s+/).filter((t=>["docReady","postSign"].includes(t)))}}class Me extends o.OptionObject{constructor(t){super(l,"validationMessaging",["allMessagesIndividually","allMessagesTogether","firstMessageOnly","noMessages"])}}class Oe extends o.OptionObject{constructor(t){super(l,"version",["1.7","1.6","1.5","1.4","1.3","1.2"])}}class Ie extends o.XFAObject{constructor(t){super(l,"VersionControl"),this.outputBelow=(0,s.getStringOption)(t.outputBelow,["warn","error","update"]),this.sourceAbove=(0,s.getStringOption)(t.sourceAbove,["warn","error"]),this.sourceBelow=(0,s.getStringOption)(t.sourceBelow,["update","maintain"])}}class De extends o.XFAObject{constructor(t){super(l,"viewerPreferences",!0),this.ADBE_JSConsole=null,this.ADBE_JSDebugger=null,this.addViewerPreferences=null,this.duplexOption=null,this.enforce=null,this.numberOfCopies=null,this.pageRange=null,this.pickTrayByPDFSize=null,this.printScaling=null}}class Fe extends o.XFAObject{constructor(t){super(l,"webClient",!0),this.name=t.name?t.name.trim():"",this.fontInfo=null,this.xdc=null}}class Pe extends o.OptionObject{constructor(t){super(l,"whitespace",["preserve","ltrim","normalize","rtrim","trim"])}}class Re extends o.ContentObject{constructor(t){super(l,"window")}[r.$finalize](){const t=this[r.$content].trim().split(/\s*,\s*/,2).map((t=>parseInt(t,10)));t.some((t=>isNaN(t)))?this[r.$content]=[0,0]:(1===t.length&&t.push(t[0]),this[r.$content]=t)}}class Le extends o.XFAObject{constructor(t){super(l,"xdc",!0),this.uri=new o.XFAObjectArray,this.xsl=new o.XFAObjectArray}}class Ne extends o.XFAObject{constructor(t){super(l,"xdp",!0),this.packets=null}}class Be extends o.XFAObject{constructor(t){super(l,"xsl",!0),this.debug=null,this.uri=null}}class je extends o.XFAObject{constructor(t){super(l,"zpl",!0),this.name=t.name?t.name.trim():"",this.batchOutput=null,this.flipLabel=null,this.fontInfo=null,this.xdc=null}}class ze{static[i.$buildXFAObject](t,e){if(ze.hasOwnProperty(t))return ze[t](e)}static acrobat(t){return new c(t)}static acrobat7(t){return new h(t)}static ADBE_JSConsole(t){return new u(t)}static ADBE_JSDebugger(t){return new d(t)}static addSilentPrint(t){return new p(t)}static addViewerPreferences(t){return new f(t)}static adjustData(t){return new g(t)}static adobeExtensionLevel(t){return new m(t)}static agent(t){return new y(t)}static alwaysEmbed(t){return new v(t)}static amd(t){return new b(t)}static area(t){return new w(t)}static attributes(t){return new x(t)}static autoSave(t){return new _(t)}static base(t){return new S(t)}static batchOutput(t){return new C(t)}static behaviorOverride(t){return new k(t)}static cache(t){return new A(t)}static change(t){return new E(t)}static common(t){return new T(t)}static compress(t){return new M(t)}static compressLogicalStructure(t){return new O(t)}static compressObjectStream(t){return new I(t)}static compression(t){return new D(t)}static config(t){return new F(t)}static conformance(t){return new P(t)}static contentCopy(t){return new R(t)}static copies(t){return new L(t)}static creator(t){return new N(t)}static currentPage(t){return new B(t)}static data(t){return new j(t)}static debug(t){return new z(t)}static defaultTypeface(t){return new $(t)}static destination(t){return new H(t)}static documentAssembly(t){return new U(t)}static driver(t){return new V(t)}static duplexOption(t){return new W(t)}static dynamicRender(t){return new q(t)}static embed(t){return new K(t)}static encrypt(t){return new X(t)}static encryption(t){return new G(t)}static encryptionLevel(t){return new Y(t)}static enforce(t){return new J(t)}static equate(t){return new Z(t)}static equateRange(t){return new Q(t)}static exclude(t){return new tt(t)}static excludeNS(t){return new et(t)}static flipLabel(t){return new nt(t)}static fontInfo(t){return new it(t)}static formFieldFilling(t){return new rt(t)}static groupParent(t){return new ot(t)}static ifEmpty(t){return new st(t)}static includeXDPContent(t){return new at(t)}static incrementalLoad(t){return new lt(t)}static incrementalMerge(t){return new ct(t)}static interactive(t){return new ht(t)}static jog(t){return new ut(t)}static labelPrinter(t){return new dt(t)}static layout(t){return new pt(t)}static level(t){return new ft(t)}static linearized(t){return new gt(t)}static locale(t){return new mt(t)}static localeSet(t){return new yt(t)}static log(t){return new vt(t)}static map(t){return new bt(t)}static mediumInfo(t){return new wt(t)}static message(t){return new xt(t)}static messaging(t){return new _t(t)}static mode(t){return new St(t)}static modifyAnnots(t){return new Ct(t)}static msgId(t){return new kt(t)}static nameAttr(t){return new At(t)}static neverEmbed(t){return new Et(t)}static numberOfCopies(t){return new Tt(t)}static openAction(t){return new Mt(t)}static output(t){return new Ot(t)}static outputBin(t){return new It(t)}static outputXSL(t){return new Dt(t)}static overprint(t){return new Ft(t)}static packets(t){return new Pt(t)}static pageOffset(t){return new Rt(t)}static pageRange(t){return new Lt(t)}static pagination(t){return new Nt(t)}static paginationOverride(t){return new Bt(t)}static part(t){return new jt(t)}static pcl(t){return new zt(t)}static pdf(t){return new $t(t)}static pdfa(t){return new Ht(t)}static permissions(t){return new Ut(t)}static pickTrayByPDFSize(t){return new Vt(t)}static picture(t){return new Wt(t)}static plaintextMetadata(t){return new qt(t)}static presence(t){return new Kt(t)}static present(t){return new Xt(t)}static print(t){return new Gt(t)}static printHighQuality(t){return new Yt(t)}static printScaling(t){return new Jt(t)}static printerName(t){return new Zt(t)}static producer(t){return new Qt(t)}static ps(t){return new te(t)}static range(t){return new ee(t)}static record(t){return new ne(t)}static relevant(t){return new ie(t)}static rename(t){return new re(t)}static renderPolicy(t){return new oe(t)}static runScripts(t){return new se(t)}static script(t){return new ae(t)}static scriptModel(t){return new le(t)}static severity(t){return new ce(t)}static silentPrint(t){return new he(t)}static staple(t){return new ue(t)}static startNode(t){return new de(t)}static startPage(t){return new pe(t)}static submitFormat(t){return new fe(t)}static submitUrl(t){return new ge(t)}static subsetBelow(t){return new me(t)}static suppressBanner(t){return new ye(t)}static tagged(t){return new ve(t)}static template(t){return new be(t)}static templateCache(t){return new _e(t)}static threshold(t){return new we(t)}static to(t){return new xe(t)}static trace(t){return new Se(t)}static transform(t){return new Ce(t)}static type(t){return new ke(t)}static uri(t){return new Ae(t)}static validate(t){return new Ee(t)}static validateApprovalSignatures(t){return new Te(t)}static validationMessaging(t){return new Me(t)}static version(t){return new Oe(t)}static versionControl(t){return new Ie(t)}static viewerPreferences(t){return new De(t)}static webClient(t){return new Fe(t)}static whitespace(t){return new Pe(t)}static window(t){return new Re(t)}static xdc(t){return new Le(t)}static xdp(t){return new Ne(t)}static xsl(t){return new Be(t)}static zpl(t){return new je(t)}}e.ConfigNamespace=ze},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ConnectionSetNamespace=void 0;var i=n(81),r=n(87);const o=i.NamespaceIds.connectionSet.id;class s extends r.XFAObject{constructor(t){super(o,"connectionSet",!0),this.wsdlConnection=new r.XFAObjectArray,this.xmlConnection=new r.XFAObjectArray,this.xsdConnection=new r.XFAObjectArray}}class a extends r.XFAObject{constructor(t){super(o,"effectiveInputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class l extends r.XFAObject{constructor(t){super(o,"effectiveOutputPolicy"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class c extends r.StringObject{constructor(t){super(o,"operation"),this.id=t.id||"",this.input=t.input||"",this.name=t.name||"",this.output=t.output||"",this.use=t.use||"",this.usehref=t.usehref||""}}class h extends r.StringObject{constructor(t){super(o,"rootElement"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class u extends r.StringObject{constructor(t){super(o,"soapAction"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class d extends r.StringObject{constructor(t){super(o,"soapAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class p extends r.StringObject{constructor(t){super(o,"uri"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class f extends r.StringObject{constructor(t){super(o,"wsdlAddress"),this.id=t.id||"",this.name=t.name||"",this.use=t.use||"",this.usehref=t.usehref||""}}class g extends r.XFAObject{constructor(t){super(o,"wsdlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.effectiveInputPolicy=null,this.effectiveOutputPolicy=null,this.operation=null,this.soapAction=null,this.soapAddress=null,this.wsdlAddress=null}}class m extends r.XFAObject{constructor(t){super(o,"xmlConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.uri=null}}class y extends r.XFAObject{constructor(t){super(o,"xsdConnection",!0),this.dataDescription=t.dataDescription||"",this.name=t.name||"",this.rootElement=null,this.uri=null}}class v{static[i.$buildXFAObject](t,e){if(v.hasOwnProperty(t))return v[t](e)}static connectionSet(t){return new s(t)}static effectiveInputPolicy(t){return new a(t)}static effectiveOutputPolicy(t){return new l(t)}static operation(t){return new c(t)}static rootElement(t){return new h(t)}static soapAction(t){return new u(t)}static soapAddress(t){return new d(t)}static uri(t){return new p(t)}static wsdlAddress(t){return new f(t)}static wsdlConnection(t){return new g(t)}static xmlConnection(t){return new m(t)}static xsdConnection(t){return new y(t)}}e.ConnectionSetNamespace=v},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetsNamespace=void 0;var i=n(78),r=n(81),o=n(87);const s=r.NamespaceIds.datasets.id;class a extends o.XmlObject{constructor(t){super(s,"data",t)}[i.$isNsAgnostic](){return!0}}class l extends o.XFAObject{constructor(t){super(s,"datasets",!0),this.data=null,this.Signature=null}[i.$onChild](t){const e=t[i.$nodeName];("data"===e&&t[i.$namespaceId]===s||"Signature"===e&&t[i.$namespaceId]===r.NamespaceIds.signature.id)&&(this[e]=t),this[i.$appendChild](t)}}class c{static[r.$buildXFAObject](t,e){if(c.hasOwnProperty(t))return c[t](e)}static datasets(t){return new l(t)}static data(t){return new a(t)}}e.DatasetsNamespace=c},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LocaleSetNamespace=void 0;var i=n(81),r=n(87),o=n(84);const s=i.NamespaceIds.localeSet.id;class a extends r.XFAObject{constructor(t){super(s,"calendarSymbols",!0),this.name="gregorian",this.dayNames=new r.XFAObjectArray(2),this.eraNames=null,this.meridiemNames=null,this.monthNames=new r.XFAObjectArray(2)}}class l extends r.StringObject{constructor(t){super(s,"currencySymbol"),this.name=(0,o.getStringOption)(t.name,["symbol","isoname","decimal"])}}class c extends r.XFAObject{constructor(t){super(s,"currencySymbols",!0),this.currencySymbol=new r.XFAObjectArray(3)}}class h extends r.StringObject{constructor(t){super(s,"datePattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class u extends r.XFAObject{constructor(t){super(s,"datePatterns",!0),this.datePattern=new r.XFAObjectArray(4)}}class d extends r.ContentObject{constructor(t){super(s,"dateTimeSymbols")}}class p extends r.StringObject{constructor(t){super(s,"day")}}class f extends r.XFAObject{constructor(t){super(s,"dayNames",!0),this.abbr=(0,o.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.day=new r.XFAObjectArray(7)}}class g extends r.StringObject{constructor(t){super(s,"era")}}class m extends r.XFAObject{constructor(t){super(s,"eraNames",!0),this.era=new r.XFAObjectArray(2)}}class y extends r.XFAObject{constructor(t){super(s,"locale",!0),this.desc=t.desc||"",this.name="isoname",this.calendarSymbols=null,this.currencySymbols=null,this.datePatterns=null,this.dateTimeSymbols=null,this.numberPatterns=null,this.numberSymbols=null,this.timePatterns=null,this.typeFaces=null}}class v extends r.XFAObject{constructor(t){super(s,"localeSet",!0),this.locale=new r.XFAObjectArray}}class b extends r.StringObject{constructor(t){super(s,"meridiem")}}class w extends r.XFAObject{constructor(t){super(s,"meridiemNames",!0),this.meridiem=new r.XFAObjectArray(2)}}class x extends r.StringObject{constructor(t){super(s,"month")}}class _ extends r.XFAObject{constructor(t){super(s,"monthNames",!0),this.abbr=(0,o.getInteger)({data:t.abbr,defaultValue:0,validate:t=>1===t}),this.month=new r.XFAObjectArray(12)}}class S extends r.StringObject{constructor(t){super(s,"numberPattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class C extends r.XFAObject{constructor(t){super(s,"numberPatterns",!0),this.numberPattern=new r.XFAObjectArray(4)}}class k extends r.StringObject{constructor(t){super(s,"numberSymbol"),this.name=(0,o.getStringOption)(t.name,["decimal","grouping","percent","minus","zero"])}}class A extends r.XFAObject{constructor(t){super(s,"numberSymbols",!0),this.numberSymbol=new r.XFAObjectArray(5)}}class E extends r.StringObject{constructor(t){super(s,"timePattern"),this.name=(0,o.getStringOption)(t.name,["full","long","med","short"])}}class T extends r.XFAObject{constructor(t){super(s,"timePatterns",!0),this.timePattern=new r.XFAObjectArray(4)}}class M extends r.XFAObject{constructor(t){super(s,"typeFace",!0),this.name=""|t.name}}class O extends r.XFAObject{constructor(t){super(s,"typeFaces",!0),this.typeFace=new r.XFAObjectArray}}class I{static[i.$buildXFAObject](t,e){if(I.hasOwnProperty(t))return I[t](e)}static calendarSymbols(t){return new a(t)}static currencySymbol(t){return new l(t)}static currencySymbols(t){return new c(t)}static datePattern(t){return new h(t)}static datePatterns(t){return new u(t)}static dateTimeSymbols(t){return new d(t)}static day(t){return new p(t)}static dayNames(t){return new f(t)}static era(t){return new g(t)}static eraNames(t){return new m(t)}static locale(t){return new y(t)}static localeSet(t){return new v(t)}static meridiem(t){return new b(t)}static meridiemNames(t){return new w(t)}static month(t){return new x(t)}static monthNames(t){return new _(t)}static numberPattern(t){return new S(t)}static numberPatterns(t){return new C(t)}static numberSymbol(t){return new k(t)}static numberSymbols(t){return new A(t)}static timePattern(t){return new E(t)}static timePatterns(t){return new T(t)}static typeFace(t){return new M(t)}static typeFaces(t){return new O(t)}}e.LocaleSetNamespace=I},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SignatureNamespace=void 0;var i=n(81),r=n(87);const o=i.NamespaceIds.signature.id;class s extends r.XFAObject{constructor(t){super(o,"signature",!0)}}class a{static[i.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static signature(t){return new s(t)}}e.SignatureNamespace=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StylesheetNamespace=void 0;var i=n(81),r=n(87);const o=i.NamespaceIds.stylesheet.id;class s extends r.XFAObject{constructor(t){super(o,"stylesheet",!0)}}class a{static[i.$buildXFAObject](t,e){if(a.hasOwnProperty(t))return a[t](e)}static stylesheet(t){return new s(t)}}e.StylesheetNamespace=a},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XdpNamespace=void 0;var i=n(81),r=n(78),o=n(87);const s=i.NamespaceIds.xdp.id;class a extends o.XFAObject{constructor(t){super(s,"xdp",!0),this.uuid=t.uuid||"",this.timeStamp=t.timeStamp||"",this.config=null,this.connectionSet=null,this.datasets=null,this.localeSet=null,this.stylesheet=new o.XFAObjectArray,this.template=null}[r.$onChildCheck](t){const e=i.NamespaceIds[t[r.$nodeName]];return e&&t[r.$namespaceId]===e.id}}class l{static[i.$buildXFAObject](t,e){if(l.hasOwnProperty(t))return l[t](e)}static xdp(t){return new a(t)}}e.XdpNamespace=l},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XhtmlNamespace=void 0;var i=n(78),r=n(81),o=n(83),s=n(84),a=n(87);const l=r.NamespaceIds.xhtml.id,c=Symbol(),h=new Set(["color","font","font-family","font-size","font-stretch","font-style","font-weight","margin","margin-bottom","margin-left","margin-right","margin-top","letter-spacing","line-height","orphans","page-break-after","page-break-before","page-break-inside","tab-interval","tab-stop","text-align","text-decoration","text-indent","vertical-align","widows","kerning-mode","xfa-font-horizontal-scale","xfa-font-vertical-scale","xfa-spacerun","xfa-tab-stops"]),u=new Map([["page-break-after","breakAfter"],["page-break-before","breakBefore"],["page-break-inside","breakInside"],["kerning-mode",t=>"none"===t?"none":"normal"],["xfa-font-horizontal-scale",t=>`scaleX(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-font-vertical-scale",t=>`scaleY(${Math.max(0,Math.min(parseInt(t)/100)).toFixed(2)})`],["xfa-spacerun",""],["xfa-tab-stops",""],["font-size",(t,e)=>(t=e.fontSize=(0,s.getMeasurement)(t),(0,o.measureToString)(.99*t))],["letter-spacing",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["line-height",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-bottom",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-left",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-right",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["margin-top",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["text-indent",t=>(0,o.measureToString)((0,s.getMeasurement)(t))],["font-family",t=>t],["vertical-align",t=>(0,o.measureToString)((0,s.getMeasurement)(t))]]),d=/\s+/g,p=/[\r\n]+/g,f=/\r\n?/g;function g(t,e,n){const r=Object.create(null);if(!t)return r;const a=Object.create(null);for(const[e,n]of t.split(";").map((t=>t.split(":",2)))){const t=u.get(e);if(""===t)continue;let i=n;t&&(i="string"==typeof t?t:t(n,a)),e.endsWith("scale")?r.transform=r.transform?`${r[e]} ${i}`:i:r[e.replaceAll(/-([a-zA-Z])/g,((t,e)=>e.toUpperCase()))]=i}if(r.fontFamily&&(0,o.setFontFamily)({typeface:r.fontFamily,weight:r.fontWeight||"normal",posture:r.fontStyle||"normal",size:a.fontSize||0},e,e[i.$globalData].fontFinder,r),n&&r.verticalAlign&&"0px"!==r.verticalAlign&&r.fontSize){const t=.583,e=.333,n=(0,s.getMeasurement)(r.fontSize);r.fontSize=(0,o.measureToString)(n*t),r.verticalAlign=(0,o.measureToString)(Math.sign((0,s.getMeasurement)(r.verticalAlign))*n*e)}return n&&r.fontSize&&(r.fontSize=`calc(${r.fontSize} * var(--scale-factor))`),(0,o.fixTextIndent)(r),r}const m=new Set(["body","html"]);class y extends a.XmlObject{constructor(t,e){super(l,e),this[c]=!1,this.style=t.style||""}[i.$clean](t){var e;super[i.$clean](t),this.style=(e=this).style?e.style.trim().split(/\s*;\s*/).filter((t=>!!t)).map((t=>t.split(/\s*:\s*/,2))).filter((([t,n])=>("font-family"===t&&e[i.$globalData].usedTypefaces.add(n),h.has(t)))).map((t=>t.join(":"))).join(";"):""}[i.$acceptWhitespace](){return!m.has(this[i.$nodeName])}[i.$onText](t,e=!1){e?this[c]=!0:(t=t.replaceAll(p,""),this.style.includes("xfa-spacerun:yes")||(t=t.replaceAll(d," "))),t&&(this[i.$content]+=t)}[i.$pushGlyphs](t,e=!0){const n=Object.create(null),r={top:NaN,bottom:NaN,left:NaN,right:NaN};let o=null;for(const[t,e]of this.style.split(";").map((t=>t.split(":",2))))switch(t){case"font-family":n.typeface=(0,s.stripQuotes)(e);break;case"font-size":n.size=(0,s.getMeasurement)(e);break;case"font-weight":n.weight=e;break;case"font-style":n.posture=e;break;case"letter-spacing":n.letterSpacing=(0,s.getMeasurement)(e);break;case"margin":const t=e.split(/ \t/).map((t=>(0,s.getMeasurement)(t)));switch(t.length){case 1:r.top=r.bottom=r.left=r.right=t[0];break;case 2:r.top=r.bottom=t[0],r.left=r.right=t[1];break;case 3:r.top=t[0],r.bottom=t[2],r.left=r.right=t[1];break;case 4:r.top=t[0],r.left=t[1],r.bottom=t[2],r.right=t[3]}break;case"margin-top":r.top=(0,s.getMeasurement)(e);break;case"margin-bottom":r.bottom=(0,s.getMeasurement)(e);break;case"margin-left":r.left=(0,s.getMeasurement)(e);break;case"margin-right":r.right=(0,s.getMeasurement)(e);break;case"line-height":o=(0,s.getMeasurement)(e)}if(t.pushData(n,r,o),this[i.$content])t.addString(this[i.$content]);else for(const e of this[i.$getChildren]())"#text"!==e[i.$nodeName]?e[i.$pushGlyphs](t):t.addString(e[i.$content]);e&&t.popFont()}[i.$toHTML](t){const e=[];if(this[i.$extra]={children:e},this[i.$childrenToHTML]({}),0===e.length&&!this[i.$content])return s.HTMLResult.EMPTY;let n;return n=this[c]?this[i.$content]?this[i.$content].replaceAll(f,"\n"):void 0:this[i.$content]||void 0,s.HTMLResult.success({name:this[i.$nodeName],attributes:{href:this.href,style:g(this.style,this,this[c])},children:e,value:n})}}class v extends y{constructor(t){super(t,"a"),this.href=(0,o.fixURL)(t.href)||""}}class b extends y{constructor(t){super(t,"b")}[i.$pushGlyphs](t){t.pushFont({weight:"bold"}),super[i.$pushGlyphs](t),t.popFont()}}class w extends y{constructor(t){super(t,"body")}[i.$toHTML](t){const e=super[i.$toHTML](t),{html:n}=e;return n?(n.name="div",n.attributes.class=["xfaRich"],e):s.HTMLResult.EMPTY}}class x extends y{constructor(t){super(t,"br")}[i.$text](){return"\n"}[i.$pushGlyphs](t){t.addString("\n")}[i.$toHTML](t){return s.HTMLResult.success({name:"br"})}}class _ extends y{constructor(t){super(t,"html")}[i.$toHTML](t){const e=[];if(this[i.$extra]={children:e},this[i.$childrenToHTML]({}),0===e.length)return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},value:this[i.$content]||""});if(1===e.length){const t=e[0];if(t.attributes?.class.includes("xfaRich"))return s.HTMLResult.success(t)}return s.HTMLResult.success({name:"div",attributes:{class:["xfaRich"],style:{}},children:e})}}class S extends y{constructor(t){super(t,"i")}[i.$pushGlyphs](t){t.pushFont({posture:"italic"}),super[i.$pushGlyphs](t),t.popFont()}}class C extends y{constructor(t){super(t,"li")}}class k extends y{constructor(t){super(t,"ol")}}class A extends y{constructor(t){super(t,"p")}[i.$pushGlyphs](t){super[i.$pushGlyphs](t,!1),t.addString("\n"),t.addPara(),t.popFont()}[i.$text](){return this[i.$getParent]()[i.$getChildren]().at(-1)===this?super[i.$text]():super[i.$text]()+"\n"}}class E extends y{constructor(t){super(t,"span")}}class T extends y{constructor(t){super(t,"sub")}}class M extends y{constructor(t){super(t,"sup")}}class O extends y{constructor(t){super(t,"ul")}}class I{static[r.$buildXFAObject](t,e){if(I.hasOwnProperty(t))return I[t](e)}static a(t){return new v(t)}static b(t){return new b(t)}static body(t){return new w(t)}static br(t){return new x(t)}static html(t){return new _(t)}static i(t){return new S(t)}static li(t){return new C(t)}static ol(t){return new k(t)}static p(t){return new A(t)}static span(t){return new E(t)}static sub(t){return new T(t)}static sup(t){return new M(t)}static ul(t){return new O(t)}}e.XhtmlNamespace=I},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.UnknownNamespace=void 0;var i=n(81),r=n(87);class o{constructor(t){this.namespaceId=t}[i.$buildXFAObject](t,e){return new r.XmlObject(this.namespaceId,t,e)}}e.UnknownNamespace=o},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.DatasetReader=void 0;var i=n(2),r=n(3),o=n(71);function s(t){try{return(0,i.stringToUTF8String)(t)}catch(e){return(0,i.warn)(`UTF-8 decoding failed: "${e}".`),t}}class a extends o.SimpleXMLParser{constructor(t){super(t),this.node=null}onEndElement(t){const e=super.onEndElement(t);if(e&&"xfa:datasets"===t)throw this.node=e,new Error("Aborting DatasetXMLParser.")}}e.DatasetReader=class{constructor(t){if(t.datasets)this.node=new o.SimpleXMLParser({hasAttributes:!0}).parseFromString(t.datasets).documentElement;else{const e=new a({hasAttributes:!0});try{e.parseFromString(t["xdp:xdp"])}catch{}this.node=e.node}}getValue(t){if(!this.node||!t)return"";const e=this.node.searchNode((0,r.parseXFAPath)(t),0);if(!e)return"";const n=e.firstChild;return"value"===n?.nodeName?e.children.map((t=>s(t.textContent))):s(e.textContent)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XRef=void 0;var i=n(2),r=n(4),o=n(16),s=n(3),a=n(5),l=n(74);e.XRef=class{#hr=null;constructor(t,e){this.stream=t,this.pdfManager=e,this.entries=[],this._xrefStms=new Set,this._cacheMap=new Map,this._pendingRefs=new r.RefSet,this._newPersistentRefNum=null,this._newTemporaryRefNum=null}getNewPersistentRef(t){null===this._newPersistentRefNum&&(this._newPersistentRefNum=this.entries.length||1);const e=this._newPersistentRefNum++;return this._cacheMap.set(e,t),r.Ref.get(e,0)}getNewTemporaryRef(){return null===this._newTemporaryRefNum&&(this._newTemporaryRefNum=this.entries.length||1),r.Ref.get(this._newTemporaryRefNum++,0)}resetNewTemporaryRef(){this._newTemporaryRefNum=null}setStartXRef(t){this.startXRefQueue=[t]}parse(t=!1){let e,n,o;t?((0,i.warn)("Indexing all PDF objects"),e=this.indexObjects()):e=this.readXRef(),e.assignXref(this),this.trailer=e;try{n=e.get("Encrypt")}catch(t){if(t instanceof s.MissingDataException)throw t;(0,i.warn)(`XRef.parse - Invalid "Encrypt" reference: "${t}".`)}if(n instanceof r.Dict){const t=e.get("ID"),i=t?.length?t[0]:"";n.suppressEncryption=!0,this.encrypt=new l.CipherTransformFactory(n,i,this.pdfManager.password)}try{o=e.get("Root")}catch(t){if(t instanceof s.MissingDataException)throw t;(0,i.warn)(`XRef.parse - Invalid "Root" reference: "${t}".`)}if(o instanceof r.Dict)try{if(o.get("Pages")instanceof r.Dict)return void(this.root=o)}catch(t){if(t instanceof s.MissingDataException)throw t;(0,i.warn)(`XRef.parse - Invalid "Pages" reference: "${t}".`)}if(!t)throw new s.XRefParseException;throw new i.InvalidPDFException("Invalid Root reference.")}processXRefTable(t){"tableState"in this||(this.tableState={entryNum:0,streamPos:t.lexer.stream.pos,parserBuf1:t.buf1,parserBuf2:t.buf2});const e=this.readXRefTable(t);if(!(0,r.isCmd)(e,"trailer"))throw new i.FormatError("Invalid XRef table: could not find trailer dictionary");let n=t.getObj();if(n instanceof r.Dict||!n.dict||(n=n.dict),!(n instanceof r.Dict))throw new i.FormatError("Invalid XRef table: could not parse trailer dictionary");return delete this.tableState,n}readXRefTable(t){const e=t.lexer.stream,n=this.tableState;let o;for(e.pos=n.streamPos,t.buf1=n.parserBuf1,t.buf2=n.parserBuf2;;){if(!("firstEntryNum"in n)||!("entryCount"in n)){if((0,r.isCmd)(o=t.getObj(),"trailer"))break;n.firstEntryNum=o,n.entryCount=t.getObj()}let s=n.firstEntryNum;const a=n.entryCount;if(!Number.isInteger(s)||!Number.isInteger(a))throw new i.FormatError("Invalid XRef table: wrong types in subsection header");for(let o=n.entryNum;o<a;o++){n.streamPos=e.pos,n.entryNum=o,n.parserBuf1=t.buf1,n.parserBuf2=t.buf2;const l={};l.offset=t.getObj(),l.gen=t.getObj();const c=t.getObj();if(c instanceof r.Cmd)switch(c.cmd){case"f":l.free=!0;break;case"n":l.uncompressed=!0}if(!Number.isInteger(l.offset)||!Number.isInteger(l.gen)||!l.free&&!l.uncompressed)throw new i.FormatError(`Invalid entry in XRef subsection: ${s}, ${a}`);0===o&&l.free&&1===s&&(s=0),this.entries[o+s]||(this.entries[o+s]=l)}n.entryNum=0,n.streamPos=e.pos,n.parserBuf1=t.buf1,n.parserBuf2=t.buf2,delete n.firstEntryNum,delete n.entryCount}if(this.entries[0]&&!this.entries[0].free)throw new i.FormatError("Invalid XRef table: unexpected first object");return o}processXRefStream(t){if(!("streamState"in this)){const e=t.dict,n=e.get("W");let i=e.get("Index");i||(i=[0,e.get("Size")]),this.streamState={entryRanges:i,byteWidths:n,entryNum:0,streamPos:t.pos}}return this.readXRefStream(t),delete this.streamState,t.dict}readXRefStream(t){const e=this.streamState;t.pos=e.streamPos;const[n,r,o]=e.byteWidths,s=e.entryRanges;for(;s.length>0;){const[a,l]=s;if(!Number.isInteger(a)||!Number.isInteger(l))throw new i.FormatError(`Invalid XRef range fields: ${a}, ${l}`);if(!Number.isInteger(n)||!Number.isInteger(r)||!Number.isInteger(o))throw new i.FormatError(`Invalid XRef entry fields length: ${a}, ${l}`);for(let s=e.entryNum;s<l;++s){e.entryNum=s,e.streamPos=t.pos;let l=0,c=0,h=0;for(let e=0;e<n;++e){const e=t.getByte();if(-1===e)throw new i.FormatError("Invalid XRef byteWidths 'type'.");l=l<<8|e}0===n&&(l=1);for(let e=0;e<r;++e){const e=t.getByte();if(-1===e)throw new i.FormatError("Invalid XRef byteWidths 'offset'.");c=c<<8|e}for(let e=0;e<o;++e){const e=t.getByte();if(-1===e)throw new i.FormatError("Invalid XRef byteWidths 'generation'.");h=h<<8|e}const u={};switch(u.offset=c,u.gen=h,l){case 0:u.free=!0;break;case 1:u.uncompressed=!0;break;case 2:break;default:throw new i.FormatError(`Invalid XRef entry type: ${l}`)}this.entries[a+s]||(this.entries[a+s]=u)}e.entryNum=0,e.streamPos=t.pos,s.splice(0,2)}}indexObjects(){function t(t,e){let n="",i=t[e];for(;10!==i&&13!==i&&60!==i&&!(++e>=t.length);)n+=String.fromCharCode(i),i=t[e];return n}function e(t,e,n){const i=n.length,r=t.length;let o=0;for(;e<r;){let r=0;for(;r<i&&t[e+r]===n[r];)++r;if(r>=i)break;e++,o++}return o}const n=/\b(endobj|\d+\s+\d+\s+obj|xref|trailer\s*<<)\b/g,a=/\b(startxref|\d+\s+\d+\s+obj)\b/g,l=/^(\d+)\s+(\d+)\s+obj\b/,c=new Uint8Array([116,114,97,105,108,101,114]),h=new Uint8Array([115,116,97,114,116,120,114,101,102]),u=new Uint8Array([47,88,82,101,102]);this.entries.length=0,this._cacheMap.clear();const d=this.stream;d.pos=0;const p=d.getBytes(),f=(0,i.bytesToString)(p),g=p.length;let m=d.start;const y=[],v=[];for(;m<g;){let r=p[m];if(9===r||10===r||13===r||32===r){++m;continue}if(37===r){do{if(++m,m>=g)break;r=p[m]}while(10!==r&&13!==r);continue}const b=t(p,m);let w;if(b.startsWith("xref")&&(4===b.length||/\s/.test(b[4])))m+=e(p,m,c),y.push(m),m+=e(p,m,h);else if(w=l.exec(b)){const t=0|w[1],r=0|w[2],a=m+b.length;let l,c=!1;if(this.entries[t]){if(this.entries[t].gen===r)try{new o.Parser({lexer:new o.Lexer(d.makeSubStream(a))}).getObj(),c=!0}catch(t){t instanceof s.ParserEOFException?(0,i.warn)(`indexObjects -- checking object (${b}): "${t}".`):c=!0}}else c=!0;c&&(this.entries[t]={offset:m-d.start,gen:r,uncompressed:!0}),n.lastIndex=a;const h=n.exec(f);h?(l=n.lastIndex+1-m,"endobj"!==h[1]&&((0,i.warn)(`indexObjects: Found "${h[1]}" inside of another "obj", caused by missing "endobj" -- trying to recover.`),l-=h[1].length+1)):l=g-m;const y=p.subarray(m,m+l),x=e(y,0,u);x<l&&y[x+5]<64&&(v.push(m-d.start),this._xrefStms.add(m-d.start)),m+=l}else if(b.startsWith("trailer")&&(7===b.length||/\s/.test(b[7]))){y.push(m);const t=m+b.length;let e;a.lastIndex=t;const n=a.exec(f);n?(e=a.lastIndex+1-m,"startxref"!==n[1]&&((0,i.warn)(`indexObjects: Found "${n[1]}" after "trailer", caused by missing "startxref" -- trying to recover.`),e-=n[1].length+1)):e=g-m,m+=e}else m+=b.length+1}for(const t of v)this.startXRefQueue.push(t),this.readXRef(!0);const b=[];let w,x,_=!1;for(const t of y){d.pos=t;const e=new o.Parser({lexer:new o.Lexer(d),xref:this,allowStreams:!0,recoveryMode:!0}),n=e.getObj();if(!(0,r.isCmd)(n,"trailer"))continue;const i=e.getObj();i instanceof r.Dict&&(b.push(i),i.has("Encrypt")&&(_=!0))}for(const t of[...b,"genFallback",...b]){if("genFallback"===t){if(!x)break;this._generationFallback=!0;continue}let e=!1;try{const n=t.get("Root");if(!(n instanceof r.Dict))continue;const i=n.get("Pages");if(!(i instanceof r.Dict))continue;const o=i.get("Count");Number.isInteger(o)&&(e=!0)}catch(t){x=t;continue}if(e&&(!_||t.has("Encrypt"))&&t.has("ID"))return t;w=t}if(w)return w;if(this.topDict)return this.topDict;throw new i.InvalidPDFException("Invalid PDF structure.")}readXRef(t=!1){const e=this.stream,n=new Set;for(;this.startXRefQueue.length;){try{const t=this.startXRefQueue[0];if(n.has(t)){(0,i.warn)("readXRef - skipping XRef table since it was already parsed."),this.startXRefQueue.shift();continue}n.add(t),e.pos=t+e.start;const s=new o.Parser({lexer:new o.Lexer(e),xref:this,allowStreams:!0});let l,c=s.getObj();if((0,r.isCmd)(c,"xref"))l=this.processXRefTable(s),this.topDict||(this.topDict=l),c=l.get("XRefStm"),Number.isInteger(c)&&!this._xrefStms.has(c)&&(this._xrefStms.add(c),this.startXRefQueue.push(c),this.#hr??=c);else{if(!Number.isInteger(c))throw new i.FormatError("Invalid XRef stream header");if(!(Number.isInteger(s.getObj())&&(0,r.isCmd)(s.getObj(),"obj")&&(c=s.getObj())instanceof a.BaseStream))throw new i.FormatError("Invalid XRef stream");if(l=this.processXRefStream(c),this.topDict||(this.topDict=l),!l)throw new i.FormatError("Failed to read XRef stream")}c=l.get("Prev"),Number.isInteger(c)?this.startXRefQueue.push(c):c instanceof r.Ref&&this.startXRefQueue.push(c.num)}catch(t){if(t instanceof s.MissingDataException)throw t;(0,i.info)("(while reading XRef): "+t)}this.startXRefQueue.shift()}if(this.topDict)return this.topDict;if(!t)throw new s.XRefParseException}get lastXRefStreamPos(){return this.#hr??(this._xrefStms.size>0?Math.max(...this._xrefStms):null)}getEntry(t){const e=this.entries[t];return e&&!e.free&&e.offset?e:null}fetchIfRef(t,e=!1){return t instanceof r.Ref?this.fetch(t,e):t}fetch(t,e=!1){if(!(t instanceof r.Ref))throw new Error("ref object is not a reference");const n=t.num,o=this._cacheMap.get(n);if(void 0!==o)return o instanceof r.Dict&&!o.objId&&(o.objId=t.toString()),o;let s=this.getEntry(n);if(null===s)return this._cacheMap.set(n,s),s;if(this._pendingRefs.has(t))return this._pendingRefs.remove(t),(0,i.warn)(`Ignoring circular reference: ${t}.`),r.CIRCULAR_REF;this._pendingRefs.put(t);try{s=s.uncompressed?this.fetchUncompressed(t,s,e):this.fetchCompressed(t,s,e),this._pendingRefs.remove(t)}catch(e){throw this._pendingRefs.remove(t),e}return s instanceof r.Dict?s.objId=t.toString():s instanceof a.BaseStream&&(s.dict.objId=t.toString()),s}fetchUncompressed(t,e,n=!1){const l=t.gen;let c=t.num;if(e.gen!==l){const o=`Inconsistent generation in XRef: ${t}`;if(this._generationFallback&&e.gen<l)return(0,i.warn)(o),this.fetchUncompressed(r.Ref.get(c,e.gen),e,n);throw new s.XRefEntryException(o)}const h=this.stream.makeSubStream(e.offset+this.stream.start),u=new o.Parser({lexer:new o.Lexer(h),xref:this,allowStreams:!0}),d=u.getObj(),p=u.getObj(),f=u.getObj();if(d!==c||p!==l||!(f instanceof r.Cmd))throw new s.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`);if("obj"!==f.cmd){if(f.cmd.startsWith("obj")&&(c=parseInt(f.cmd.substring(3),10),!Number.isNaN(c)))return c;throw new s.XRefEntryException(`Bad (uncompressed) XRef entry: ${t}`)}return(e=this.encrypt&&!n?u.getObj(this.encrypt.createCipherTransform(c,l)):u.getObj())instanceof a.BaseStream||this._cacheMap.set(c,e),e}fetchCompressed(t,e,n=!1){const l=e.offset,c=this.fetch(r.Ref.get(l,0));if(!(c instanceof a.BaseStream))throw new i.FormatError("bad ObjStm stream");const h=c.dict.get("First"),u=c.dict.get("N");if(!Number.isInteger(h)||!Number.isInteger(u))throw new i.FormatError("invalid first and n parameters for ObjStm stream");let d=new o.Parser({lexer:new o.Lexer(c),xref:this,allowStreams:!0});const p=new Array(u),f=new Array(u);for(let t=0;t<u;++t){const e=d.getObj();if(!Number.isInteger(e))throw new i.FormatError(`invalid object number in the ObjStm stream: ${e}`);const n=d.getObj();if(!Number.isInteger(n))throw new i.FormatError(`invalid object offset in the ObjStm stream: ${n}`);p[t]=e,f[t]=n}const g=(c.start||0)+h,m=new Array(u);for(let t=0;t<u;++t){const e=t<u-1?f[t+1]-f[t]:void 0;if(e<0)throw new i.FormatError("Invalid offset in the ObjStm stream.");d=new o.Parser({lexer:new o.Lexer(c.makeSubStream(g+f[t],e,c.dict)),xref:this,allowStreams:!0});const n=d.getObj();if(m[t]=n,n instanceof a.BaseStream)continue;const r=p[t],s=this.entries[r];s&&s.offset===l&&s.gen===t&&this._cacheMap.set(r,n)}if(void 0===(e=m[e.gen]))throw new s.XRefEntryException(`Bad (compressed) XRef entry: ${t}`);return e}async fetchIfRefAsync(t,e){return t instanceof r.Ref?this.fetchAsync(t,e):t}async fetchAsync(t,e){try{return this.fetch(t,e)}catch(n){if(!(n instanceof s.MissingDataException))throw n;return await this.pdfManager.requestRange(n.begin,n.end),this.fetchAsync(t,e)}}getCatalogObj(){return this.root}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=n(2);const r=1,o=2,s=1,a=2,l=3,c=4,h=5,u=6,d=7,p=8;function f(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,i.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new i.AbortException(t.message);case"MissingPDFException":return new i.MissingPDFException(t.message);case"PasswordException":return new i.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new i.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new i.UnknownErrorException(t.message,t.details);default:return new i.UnknownErrorException(t.message,t.toString())}}e.MessageHandler=class{constructor(t,e,n){this.sourceName=t,this.targetName=e,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{const e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void this.#ue(e);if(e.callback){const t=e.callbackId,n=this.callbackCapabilities[t];if(!n)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===r)n.resolve(e.data);else{if(e.callback!==o)throw new Error("Unexpected callback case");n.reject(f(e.reason))}return}const i=this.actionHandler[e.action];if(!i)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const t=this.sourceName,s=e.sourceName;new Promise((function(t){t(i(e.data))})).then((function(i){n.postMessage({sourceName:t,targetName:s,callback:r,callbackId:e.callbackId,data:i})}),(function(i){n.postMessage({sourceName:t,targetName:s,callback:o,callbackId:e.callbackId,reason:f(i)})}))}else e.streamId?this.#de(e):i(e.data)},n.addEventListener("message",this._onComObjOnMessage)}on(t,e){const n=this.actionHandler;if(n[t])throw new Error(`There is already an actionName called "${t}"`);n[t]=e}send(t,e,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},n)}sendWithPromise(t,e,n){const r=this.callbackId++,o=new i.PromiseCapability;this.callbackCapabilities[r]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},n)}catch(t){o.reject(t)}return o.promise}sendWithStream(t,e,n,r){const o=this.streamId++,a=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:n=>{const s=new i.PromiseCapability;return this.streamControllers[o]={controller:n,startCall:s,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:a,targetName:l,action:t,streamId:o,data:e,desiredSize:n.desiredSize},r),s.promise},pull:t=>{const e=new i.PromiseCapability;return this.streamControllers[o].pullCall=e,c.postMessage({sourceName:a,targetName:l,stream:u,streamId:o,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,i.assert)(t instanceof Error,"cancel must have a valid reason");const e=new i.PromiseCapability;return this.streamControllers[o].cancelCall=e,this.streamControllers[o].isClosed=!0,c.postMessage({sourceName:a,targetName:l,stream:s,streamId:o,reason:f(t)}),e.promise}},n)}#de(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,s=this,a=this.actionHandler[t.action],u={enqueue(t,s=1,a){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=new i.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:c,streamId:e,chunk:t},a)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:l,streamId:e}),delete s.streamSinks[e])},error(t){(0,i.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:h,streamId:e,reason:f(t)}))},sinkCapability:new i.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[e]=u,new Promise((function(e){e(a(t.data,u))})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:p,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:p,streamId:e,reason:f(t)})}))}#ue(t){const e=t.streamId,n=this.sourceName,r=t.sourceName,o=this.comObj,g=this.streamControllers[e],m=this.streamSinks[e];switch(t.stream){case p:t.success?g.startCall.resolve():g.startCall.reject(f(t.reason));break;case d:t.success?g.pullCall.resolve():g.pullCall.reject(f(t.reason));break;case u:if(!m){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,success:!0});break}m.desiredSize<=0&&t.desiredSize>0&&m.sinkCapability.resolve(),m.desiredSize=t.desiredSize,new Promise((function(t){t(m.onPull?.())})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:d,streamId:e,reason:f(t)})}));break;case c:if((0,i.assert)(g,"enqueue should have stream controller"),g.isClosed)break;g.controller.enqueue(t.chunk);break;case l:if((0,i.assert)(g,"close should have stream controller"),g.isClosed)break;g.isClosed=!0,g.controller.close(),this.#pe(g,e);break;case h:(0,i.assert)(g,"error should have stream controller"),g.controller.error(f(t.reason)),this.#pe(g,e);break;case a:t.success?g.cancelCall.resolve():g.cancelCall.reject(f(t.reason)),this.#pe(g,e);break;case s:if(!m)break;new Promise((function(e){e(m.onCancel?.(f(t.reason)))})).then((function(){o.postMessage({sourceName:n,targetName:r,stream:a,streamId:e,success:!0})}),(function(t){o.postMessage({sourceName:n,targetName:r,stream:a,streamId:e,reason:f(t)})})),m.sinkCapability.reject(f(t.reason)),m.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}}async#pe(t,e){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[e]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(t,e,n)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFWorkerStream=void 0;var i=n(2);e.PDFWorkerStream=class{constructor(t){this._msgHandler=t,this._contentLength=null,this._fullRequestReader=null,this._rangeRequestReaders=[]}getFullReader(){return(0,i.assert)(!this._fullRequestReader,"PDFWorkerStream.getFullReader can only be called once."),this._fullRequestReader=new r(this._msgHandler),this._fullRequestReader}getRangeReader(t,e){const n=new o(t,e,this._msgHandler);return this._rangeRequestReaders.push(n),n}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const e of this._rangeRequestReaders.slice(0))e.cancel(t)}};class r{constructor(t){this._msgHandler=t,this.onProgress=null,this._contentLength=null,this._isRangeSupported=!1,this._isStreamingSupported=!1;const e=this._msgHandler.sendWithStream("GetReader");this._reader=e.getReader(),this._headersReady=this._msgHandler.sendWithPromise("ReaderHeadersReady").then((t=>{this._isStreamingSupported=t.isStreamingSupported,this._isRangeSupported=t.isRangeSupported,this._contentLength=t.contentLength}))}get headersReady(){return this._headersReady}get contentLength(){return this._contentLength}get isStreamingSupported(){return this._isStreamingSupported}get isRangeSupported(){return this._isRangeSupported}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}class o{constructor(t,e,n){this._msgHandler=n,this.onProgress=null;const i=this._msgHandler.sendWithStream("GetRangeReader",{begin:t,end:e});this._reader=i.getReader()}get isStreamingSupported(){return!1}async read(){const{value:t,done:e}=await this._reader.read();return e?{value:void 0,done:!0}:{value:t.buffer,done:!1}}cancel(t){this._reader.cancel(t)}}}],e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}var i={};return(()=>{var t=i;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"WorkerMessageHandler",{enumerable:!0,get:function(){return e.WorkerMessageHandler}});var e=n(1)})(),i})(),t.exports=e.pdfjsWorker=n()},2285:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initActionSheet=function(t,e){(0,i.initComponent)(r.ActionSheet,t,e)};const i=n(1843),r=n(1179)},1179:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ActionSheet=void 0;const i=n(1843),r=n(4264),o="keydown",s=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN];class a extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,toggleElementSelector:"",toggleOn:"click",jsinterop:{openAsync:null,closeAsync:null,keydown:null}},this.onKeyDown=t=>{"input"!==t.target.tagName.toLowerCase()&&(s.includes(t.keyCode)&&t.preventDefault(),this.invokeKeyDown(t))},this.toggle=t=>{t.target.closest(".k-clear-value")||t.target.closest(".k-chip")||(this.visible?this.closeAsync():this.openAsync())},this.extendOptions(e),this.toggleElement=this.getToggleElement(),this.visible=!1,this.bindEvents(),this.bindToggleElementEvents()}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),this.unbindToggleElementEvents(),super.destroy()}bindEvents(){this.element.addEventListener(o,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(o,this.onKeyDown)}bindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.addEventListener(this.options.toggleOn,this.toggle)}unbindToggleElementEvents(){this.toggleElement&&this.options.toggleOn&&this.toggleElement.removeEventListener(this.options.toggleOn,this.toggle)}enableTabKeyTrap(){this.formKeyTrap=new i.FormKeyTrap(this.element),this.formKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}onOpen(){this.visible=!0}onClose(){this.visible=!1}getToggleElement(){return document.querySelector(this.options.toggleElementSelector)}openAsync(){this.invokeMethodAsync(this.options.jsinterop.openAsync)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}onAfterOpen(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.formKeyTrap&&this.formKeyTrap.destroy(),this.restoreFocus()}focusElement(){const t=this.element.querySelector("input");t&&(0,r.isFocusable)(t)?(0,r.focusInNextFrameAsync)(t):(0,r.focusFirstFocusableChild)(this.element.id)}restoreFocus(){if(this.toggleElement)if((0,r.isFocusable)(this.toggleElement))(0,r.focusInNextFrameAsync)(this.toggleElement);else{const t=(0,r.findFocusable)(this.toggleElement,!0);(0,r.focusInNextFrameAsync)(t)}}}e.ActionSheet=a},5593:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2285),e)},9119:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPromptView=function(t,e){(0,i.initComponent)(r.PromptView,t,e)};const i=n(1843),r=n(9350)},6748:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9119),e)},9350:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PromptView=void 0;const i=n(1843),r=".k-prompt-expander-content .k-prompt-suggestion",o="keydown";class s extends i.Component{constructor(t,e){super(t,e),this.onExpanderKeyDown=t=>{const e=t.target,n=[i.Key.ARROWUP,i.Key.ARROWDOWN].includes(t.key),r=(0,i.hasClass)("k-prompt-suggestion",e);n&&r?(t.preventDefault(),this.focusNextSuggestion(t.key,e)):t.key===i.Key.HOME&&r?this.focusFirstSuggestion():t.key===i.Key.END&&r&&this.focusLastSuggestion()},this.extendOptions(e),this.promptExpanderElement=this.element.querySelector(".k-prompt-expander"),this.promptExpanderElement&&this.bindEvents()}destroy(){this.promptExpanderElement&&this.unbindEvents(),super.destroy()}bindEvents(){this.promptExpanderElement.addEventListener(o,this.onExpanderKeyDown)}unbindEvents(){this.promptExpanderElement.removeEventListener(o,this.onExpanderKeyDown)}focusNextSuggestion(t,e){if(t===i.Key.ARROWUP){const t=e.previousElementSibling;t&&t.focus()}else if(t===i.Key.ARROWDOWN){const t=e.nextElementSibling;t&&t.focus()}}focusFirstSuggestion(){const t=this.element.querySelector(r);t&&t.focus()}focusLastSuggestion(){const t=this.element.querySelector(`${r}:last-child`);t&&t.focus()}}e.PromptView=s},8211:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initAnimationGroup=function(t,e){(0,r.initComponent)(i.AnimationGroup,t,e)},e.showAnimationGroupAsync=function(t,e){const n=(0,r.getComponentInstance)(t);if(n)return n.setOptions(e),n.showAsync().catch(o.noop);return null},e.hideAnimationGroupAsync=function(t,e){const n=(0,r.getComponentInstance)(t);if(n)return n.setOptions(e),n.hideAsync().catch(o.noop);return null},e.hideAnimationGroup=function(t){const e=(0,r.getComponentInstance)(t);e&&e.hide()},e.showAnimationGroup=function(t){const e=(0,r.getComponentInstance)(t);e&&e.show()};const i=n(4329),r=n(1843),o=n(193)},4329:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AnimationGroup=void 0;const i=n(1843),r=n(4264),o="none",s="k-animation-container-shown",a="width",l="height",c="reveal-vertical",h="reveal-horizontal",u={"slide-down":"slide-up","push-down":"push-up"},d={appear:"appear",exit:"exit"},p=()=>(0,i.delay)(20),f=(t,e)=>`k-${t}-${e}`,g=t=>Object.keys(d).reduce(((e,n)=>Object.assign(Object.assign({},e),{[n]:{base:f(t,n),active:f(t,`${n}-active`)}})),{});class m extends i.Component{constructor(t,e){super(t,e),this.state={parentPositionOnShow:{flipped:!1,flipToFitScreen:!1},isHeightFitToScreen:!1,isWidthFitToScreen:!1},this.options={dotNetInstance:null,animationName:"slide-down",duration:300,showDelay:10,hideDelay:10,parentMethodsToInvokeBeforeShow:"",parentMethodsToInvokeDuringShow:"",parentMethodsToInvokeAfterShow:"",parentMethodsToInvokeBeforeHide:"",parentMethodsToInvokeDuringHide:"",parentMethodsToInvokeAfterHide:"",jsinterop:{showStart:null,hideStart:null}},this.extendOptions(e),this.element.parentElement.style.display=o,this.animationClasses=g(this.options.animationName)}setOptions(t){super.setOptions(t),this.animationClasses=g(this.options.animationName)}destroy(){this.cancelCallback(),this.parentComponent=null,super.destroy()}setState(t){this.state=(0,i.extend)(this.state||{},t)}resetState(){this.setState({isHeightFitToScreen:!1,isWidthFitToScreen:!1})}showAsync(){return this.cancelCallback(),this.onAppearStart().then((()=>this.onAppearing())).then((()=>this.onTransitionEnd(this.onAppearEnd.bind(this))))}hideAsync(){return this.cancelCallback(),this.onExitStart().then(this.onExiting()).then((()=>this.onTransitionEnd(this.onExitEnd.bind(this))))}show(){this.cancelCallback(),this.removeClasses(d.exit),this.removeClasses(d.appear),this.element.style.display=null,this.element.parentElement.style.display=null,this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow)}hide(){this.cancelCallback(),this.removeClasses(d.exit),this.removeClasses(d.appear),this.element.style.display=o,this.element.parentElement.style.display=o,this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide)}onAppearStart(){return this.updateAppearStartState().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeShow);const t=this.getParentPosition();this.setState({parentPositionOnShow:t});const e=this.options.animationName;return this.maxDimensions(),t&&(t.flipped||t.flipToFitScreen)&&u[e]?(this.element.style.display=o,this.element.parentElement.style.display=o,p().then((()=>(this.removeClasses(d.appear),this.animationClasses=g(u[e]),this.updateAppearStartState())))):Promise.resolve()}))}updateAppearStartState(){return this.removeClasses(d.exit),this.addClasses(this.animationClasses[d.appear].base),p().then((()=>{this.element&&(this.element.style.display=null,this.element.parentElement.style.display=null)}))}onAppearing(){return this.triggerOpen(),this.callParentMethods(this.options.parentMethodsToInvokeDuringShow),p().then((()=>{this.addClasses(this.animationClasses[d.appear].active)}))}onAppearEnd(){const t=d.appear;this.callParentMethods(this.options.parentMethodsToInvokeAfterShow),p().then((()=>{this.removeClasses(t),this.removeMaxDimensions(),this.isPopup()&&(0,r.addClass)(s,this.element.parentElement)}))}onExitStart(){return p().then((()=>{this.callParentMethods(this.options.parentMethodsToInvokeBeforeHide);const t=this.getParentPosition();this.state.parentPositionOnShow&&this.state.parentPositionOnShow.flipToFitScreen&&(t.flipToFitScreen=this.state.parentPositionOnShow.flipToFitScreen);const e=this.options.animationName;t&&(t.flipped||t.flipToFitScreen)&&u[e]&&(this.animationClasses=g(u[e])),this.removeClasses(d.appear),this.addClasses(this.animationClasses[d.exit].base)}))}onExiting(){return this.triggerClose(),this.callParentMethods(this.options.parentMethodsToInvokeDuringHide),this.maxDimensions(),p().then((()=>{this.addClasses(this.animationClasses[d.exit].active),this.isPopup()&&(0,r.removeClass)(s,this.element.parentElement)}))}onExitEnd(){this.callParentMethods(this.options.parentMethodsToInvokeAfterHide),this.removeClasses(d.exit),this.removeMaxDimensions(),this.element.style.display=o,this.element.parentElement.style.display=o,this.revertFitToScreen()}onTransitionEnd(t){const e=this.options,n=e.duration+e.showDelay;return this.timer=(0,i.createCancellableTimerPromise)(n),this.timer.promise.then(t)}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}getParentComponent(){if(this.parentComponent)return this.parentComponent;if(!this.element)return null;const t=this.element.closest(".k-animation-container");if(!t)return null;const e=t.getAttribute("data-id");return this.parentComponent=(0,i.getComponentInstance)(e),this.parentComponent}callParentMethods(t){t&&t.forEach((t=>{this.callParentMethod(t)}))}callParentMethod(t,e){let n=this.getParentComponent();if(n&&(0,i.isFunction)(n[t]))return n[t](e)}getParentPosition(){return this.callParentMethod("getElementPosition")}triggerOpen(){this.invokeMethodAsync(this.options.jsinterop.showStart)}triggerClose(){this.invokeMethodAsync(this.options.jsinterop.hideStart)}removeClasses(t){const e=this.animationClasses[t];this.element&&(this.element.classList.remove(e.base),this.element.classList.remove(e.active))}addClasses(t){const e=this;t&&t.split(/\s+/).forEach((t=>{e.element&&e.element.classList.add(t)}))}maxDimensions(){const t=this.options,e=this.element,n=`${e.scrollHeight}px`,i=`${e.scrollWidth}px`;return t.animationName.includes(c)?(e.style.maxHeight=n,`max-height: ${n}`):t.animationName.includes(h)?(e.style.maxWidth=i,`max-width: ${i}`):""}removeMaxDimensions(){const t=this.options.animationName.includes(c)||this.options.animationName.includes(h);this.element&&t&&(this.element.style.maxHeight=null,this.element.style.maxWidth=null)}isPopup(){return this.element&&this.element.firstElementChild&&(0,r.hasClass)("k-popup",this.element.firstElementChild)&&this.element.parentElement}isAnimationInProgress(){return this.element&&Array.from(this.element.classList).some((t=>t.endsWith(`-${d.appear}`)))}getContentElement(){return this.element.querySelector(".k-popup")||this.element.firstElementChild}fitDimensionToScreen(t,e){const n="max"+(0,i.capitalizeFirstLetter)(t);this.getContentElement().style[n]=(0,i.toPixel)(e),t===l?this.setState({isHeightFitToScreen:!0}):t===a&&this.setState({isWidthFitToScreen:!0})}revertFitToScreen(){this.revertFitHeightToScreen(),this.revertFitWidthToScreen()}revertFitHeightToScreen(){this.state.isHeightFitToScreen&&this.revertFitDimensionToScreen(l)}revertFitWidthToScreen(){this.state.isWidthFitToScreen&&this.revertFitDimensionToScreen(a)}revertFitDimensionToScreen(t){const e="max"+(0,i.capitalizeFirstLetter)(t);this.getContentElement().style[e]="",t===l?this.setState({isHeightFitToScreen:!1}):t===a&&this.setState({isWidthFitToScreen:!1})}}e.AnimationGroup=m},2668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(8211),e)},1617:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateBarcode=function(t,e,n){(0,o.initOrUpdateDataVizComponent)({id:t,widgetOptions:e,componentOptions:n,services:{themeService:new r.ThemeService,intlService:i.IntlService},componentConstructor:s.Barcode})};const i=n(4004),r=n(4004),o=n(7641),s=n(2263)},2263:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Barcode=void 0;const i=n(7641),r=n(6294);class o extends i.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),this.extendOptions(e),this.initWidget(this.element,this.getWidgetOptions())}getWidgetConstructor(){return r.Barcode}}e.Barcode=o},8406:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(1617),e)},1103:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(8406),e),i.__exportStar(n(9870),e)},9870:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2111),e)},2111:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateQRCode=function(t,e,n){(0,o.initOrUpdateDataVizComponent)({id:t,widgetOptions:e,componentOptions:n,services:{themeService:new r.ThemeService,intlService:i.IntlService},componentConstructor:s.QRCode})};const i=n(4004),r=n(4004),o=n(7641),s=n(3437)},3437:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.QRCode=void 0;const i=n(7641),r=n(6294);class o extends i.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),this.extendOptions(e),this.initWidget(this.element,this.getWidgetOptions())}getWidgetConstructor(){return r.QRCode}}e.QRCode=o},9893:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initBreadcrumb=function(t,e){(0,i.initComponent)(r.Breadcrumb,t,e)};const i=n(1843),r=n(5507)},5507:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Breadcrumb=void 0;const i=n(1843),r=n(4927),o=(0,i.toDataAttr)("index");class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,mode:"",debounceDelay:1},this.extendOptions(e),this.collapsibleItems=[],this.setCollapsibleItems(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedResize=(0,r.debounce)((t=>{this.onResize(t)}),this.options.debounceDelay).bind(this),window.addEventListener("resize",this.debouncedResize)}unbindEvents(){window.removeEventListener("resize",this.debouncedResize),this.debouncedResize=null}getItems(){return Array.from(this.element.querySelector(".k-breadcrumb-container").children)}setCollapsibleItems(){const t=this.getItems(),e=t.slice(1,t.length-1).map((t=>{const e=(0,i.parseAttrToInt)(o,t);return{index:e,offsetWidth:this.getItemWidth(e),expanded:!0}}));this.collapsibleItems=e}setItemDisplay(t,e){const n=this.getItemByIndex(t.index),i="wrap"===this.options.mode?2:1;if(t.index===i){const t=n.children;for(let n=1;n<t.length;n++)t[n].style.display=e}else n.style.display=e}getWidths(){const t=this.getItems().map((t=>t.offsetWidth)).reduce(((t,e)=>t+e),0),e=getComputedStyle(this.element);return{totalItemsWidth:t,elementInternalWidth:this.element.clientWidth-parseInt(e.paddingLeft)-parseInt(e.paddingRight)}}getItemWidth(t){return this.getItemByIndex(t).offsetWidth}getItemByIndex(t){return this.element.querySelector((0,i.toAttrValueQuerySelector)(o,t))}collapseItem(t){this.setItemDisplay(t,"none"),t.expanded=!1}expandItem(t){this.setItemDisplay(t,""),t.expanded=!0}onResize(t){if("auto"===this.options.mode&&this.collapsibleItems.length){const{totalItemsWidth:e,elementInternalWidth:n}=this.getWidths(),i=this.collapsibleItems.find((t=>t.expanded)),r=[...this.collapsibleItems].reverse().find((t=>!t.expanded));i&&e>=n&&!0!==t?(this.collapseItem(i),this.onResize(!1)):r&&e+r.offsetWidth<n&&!1!==t&&(this.expandItem(r),this.onResize(!0))}}handleChange(t){t&&(this.setCollapsibleItems(),this.collapsibleItems.forEach((t=>this.expandItem(t)))),this.onResize()}}e.Breadcrumb=s},1343:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9893),e)},7827:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCard=function(t,e){(0,r.initComponent)(i.Card,t,e)};const i=n(9785),r=n(1843)},9785:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Card=void 0;const i=n(1843),r=n(4264),o="keydown",s="focusin",a="focusout";class l extends i.Component{constructor(t,e){super(t,e),this.options={navigable:!1},this.onFocusIn=t=>{t.target!==this.element&&this.setTabIndex(0)},this.onFocusOut=t=>{t.target!==this.element&&this.setTabIndex(-1)},this.onKeyDown=t=>{if(t.key===i.Key.TAB)this.findEdgeElements(),t.shiftKey?document.activeElement===this.firstElement&&(this.element.focus(),t.preventDefault(),this.setTabIndex(-1)):document.activeElement===this.lastElement&&(this.element.focus(),t.preventDefault(),this.setTabIndex(-1));else if(t.key===i.Key.ESC)this.element.focus(),this.setTabIndex(-1);else if(t.key===i.Key.ENTER&&document.activeElement===this.element){const e=(0,i.findFocusable)(this.element,!1);this.setTabIndex(0),e&&(e.focus(),t.preventDefault())}},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.options.navigable&&(this.element.addEventListener(o,this.onKeyDown),this.element.addEventListener(s,this.onFocusIn),this.element.addEventListener(a,this.onFocusOut))}unbindEvents(){this.options.navigable&&(this.element.removeEventListener(o,this.onKeyDown),this.element.removeEventListener(s,this.onFocusIn),this.element.removeEventListener(a,this.onFocusOut))}findEdgeElements(){let t=this.findAllFocusableElements();this.firstElement=t[0],this.lastElement=t[t.length-1]}findAllFocusableElements(){return this.element.querySelectorAll(r.FOCUSABLE_ELEMENTS_SELECTOR)}setTabIndex(t){this.findAllFocusableElements().forEach((e=>{e.tabIndex=t}))}}e.Card=l},2082:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(7827),e)},9031:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCardList=function(t){(0,r.initComponent)(i.CardList,t)};const i=n(8757),r=n(1843)},8757:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CardList=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.goToFirst=()=>{document.activeElement&&(0,i.hasClass)("k-card",document.activeElement)&&(this.findEdgeElements(),this.setTabIndex(-1),this.firstElement&&(this.firstElement.tabIndex=0,this.firstElement.focus()))},this.goToNext=()=>{if(document.activeElement&&(0,i.hasClass)("k-card",document.activeElement)){const t=document.activeElement.nextElementSibling;t&&(this.setTabIndex(-1),t.tabIndex=0,t.focus())}},this.goToPrevious=()=>{if(document.activeElement&&(0,i.hasClass)("k-card",document.activeElement)){const t=document.activeElement.previousElementSibling;t&&(this.setTabIndex(-1),t.tabIndex=0,t.focus())}},this.goToLast=()=>{document.activeElement&&(0,i.hasClass)("k-card",document.activeElement)&&(this.findEdgeElements(),this.setTabIndex(-1),this.lastElement&&(this.lastElement.tabIndex=0,this.lastElement.focus()))},this.findEdgeElements(),this.setTabIndex(-1),this.firstElement&&(this.firstElement.tabIndex=0),this.initNavigationService()}destroy(){this.navigationService.unbindEvents(),super.destroy()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(`${i.Key.ARROWDOWN}`,this.goToNext),this.navigationService.bind(`${i.Key.ARROWUP}`,this.goToPrevious),this.navigationService.bind(`${i.Key.HOME}`,this.goToFirst),this.navigationService.bind(`${i.Key.END}`,this.goToLast)}findEdgeElements(){let t=this.findAllCards();this.firstElement=t[0],this.lastElement=t[t.length-1]}findAllCards(){return this.element.querySelectorAll(".k-card")}setTabIndex(t){this.findAllCards().forEach((e=>{e.tabIndex=t}))}}e.CardList=r},1598:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9031),e)},3727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initChartBreadcrumb=function(t,e){(0,i.initComponent)(r.ChartBreadcrumb,t,e)},e.destroyChartBreadcrumb=function(t){(0,i.destroyComponent)(t)};const i=n(1843),r=n(9421)},9421:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartBreadcrumb=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,chartId:null,jsinterop:{}},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){}unbindEvents(){}}e.ChartBreadcrumb=r},742:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(3727),e)},6474:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateChart=function(t,e,n){let o=(0,l.getElementByDataId)(t);if(o){let s=JSON.parse(e),c=(0,l.getComponentInstance)(t),h=(0,l.extend)(s,n);if(c)(0,l.setComponentOptions)(c,h);else{h.locale.name=t,a.IntlService.setLocale(h.locale);let e=function(t,e,n,o){const s="stockchart"===e._constructor?r.StockChart:i.Chart,a=new s(t,e,n,o);return a}(o,h,new a.ThemeService,a.IntlService);(0,l.setComponentInstance)(t,e)}}},e.destroyChart=function(t){(0,l.destroyComponent)(t)};const i=n(4804),r=n(8832),o=n(3150),s=n(6294),a=n(4004),l=n(1843);s.TemplateService.register(a.TemplateService),s.DomEventsBuilder.register(o.DomEventsBuilder)},4804:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chart=void 0;const i=n(1843),r=n(6294),o=n(6841),s="mouseleave";class a extends i.Component{constructor(t,e,n,i){super(t,e),this.options={seriesTooltipPopupId:"",crosshairTooltips:{},id:"",jsinterop:{onDrilldown:"",onObserverShowCrosshairTooltip:"",onObserverShowTooltip:"",onObserverSeriesClick:"",onObserverLegendItemClick:"",onObserverAxisLabelClick:""}},this.onMouseLeave=t=>{this.hideElements(t)},this.onObserverShowTooltip=t=>{this.showTooltip(t)},this.onObserverHideTooltip=t=>{this.hideTooltip(t)},this.onObserverSeriesClick=t=>{const e=this.createSeriesClickEventArgs(t);this.invokeSeriesClickAsync(e)},this.onObserverLegendItemClick=t=>{const e=this.createLegendItemClickEventArgs(t);this.invokeLegendItemClickAsync(e)},this.onObserverAxisLabelClick=t=>{const e=this.createAxisLabelClickEventArgs(t);this.invokeAxisLabelClickAsync(e)},this.extendOptions(e),this.themeService=n,this.intlService=i,this.createInstanceObserver(),this.createWidget(),this._drilldownState=[],this.bindEvents()}destroy(){this.unbindEvents(),this.destroyInstanceObserver(),this.destroyWidget()}destroyWidget(){this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}bindEvents(){this.element.addEventListener(s,this.onMouseLeave)}unbindEvents(){this.element.removeEventListener(s,this.onMouseLeave)}getThemeOptions(){return this.themeService.loadTheme(),this.themeService.getThemeOptions()}createChart(t,e,n,i,r){return new(this.getChartConstructor())(t,e,n,{intlService:i,observer:r,rtl:(e||{}).rtl,sender:this})}getChartConstructor(){return r.Chart}createWidget(){const t=this.getWidgetOptions();this.chartInstance=this.createChart(this.element,t,this.getThemeOptions(),this.intlService,this.chartInstanceObserver)}setOptions(t){this.chartInstance&&(this.options=t,this.setWidgetOptions(this.options))}setWidgetOptions(t){if(!this.chartInstance)return;const e=this.getWidgetOptions(t);this.chartInstance.setOptions(e,this.getThemeOptions())}refresh(){this.themeService.reset(),this.setOptions(this.options)}createInstanceObserver(){this.chartInstanceObserver=new o.ChartInstanceObserver(this)}destroyInstanceObserver(){this.chartInstanceObserver=null}trigger(){}requiresHandlers(){return!1}invokeShowCrosshairTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowCrosshairTooltip,t)}invokeShowSeriesTooltipAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShowTooltip,t)}invokeSeriesClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverSeriesClick,t)}invokeLegendItemClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverLegendItemClick,t)}invokeAxisLabelClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverAxisLabelClick,t)}showTooltip(t){t.crosshair?this.showCrosshairTooltip(t):this.showSeriesTooltip(t)}hideTooltip(t){t.crosshair?this.hideCrosshairTooltip(t):this.hideSeriesTooltip(t)}showCrosshairTooltip(t){const e=this.getCrosshairTooltipPopup(t);if(!e)return;e.options.elementAlign={horizontal:"center",vertical:"center"},this.setTooltipPosition(t.anchor,e);const n=this.getCrosshairTooltipTemplateContext(t);this.invokeShowCrosshairTooltipAsync(n)}hideCrosshairTooltip(t){const e=this.getCrosshairTooltipPopup(t);e&&e.close()}showSeriesTooltip(t){const e=this.getSeriesTooltipPopup();this.setTooltipPosition(t.anchor,e);const n=this.getSeriesTooltipTemplateContext(t);this.invokeShowSeriesTooltipAsync(n)}hideSeriesTooltip(){const t=this.getSeriesTooltipPopup();t&&t.close()}getTooltipAnchorRect(t){const e=this.getTooltipAnchorOffset(t);return{x:0,y:0,width:0,height:0,top:e.top,left:e.left,right:e.right,bottom:e.bottom}}getTooltipAnchorOffset(t){return t?t.point:{top:0,left:0}}getCrosshairTooltipPopup(t){const e=this.getCrosshairAxisKey(t),n=this.getCrosshairTooltip(e);if(n)return(0,i.getComponentInstance)(n.popupId)}getSeriesTooltipPopup(){return(0,i.getComponentInstance)(this.options.seriesTooltipPopupId)}setTooltipPosition(t,e){if(!e||!t)return;const n=this.getTooltipAnchorRect(t);e.options.anchorAlign=t.align,e.options.anchorRect=n,e.positionElement()}getCrosshairTooltipTemplateContext(t){const e=((t.options||{}).tooltip||{}).format||t.format,n=t.point,i={formattedValue:e&&n&&n.formatValue?n.formatValue(e):String(t.value),axisKey:this.getCrosshairAxisKey(t)};return this.extendWithTooltipStyling(i,t)}getCrosshairAxisKey({axisName:t,axisIndex:e}){return`${t}${e}`}getCrosshairTooltip(t){const e=this.options.crosshairTooltips;return e?e[t]:{}}getSeriesTooltipTemplateContext(t){if(t.shared)return this.getSeriesTooltipSharedTemplateContext(t);const e=this.createSeriesTooltipTemplatePoint(t.point,t.format),n=Object.assign({},e);return this.extendWithTooltipStyling(n,t)}getSeriesTooltipSharedTemplateContext(t){const e=t.points.filter((t=>(0,i.isDefined)(t.series.name))).length>0,n=t.series.length>1;let r=1;e&&r++,n&&r++;const o=this.createTooltipTemplatePoints(t),s={category:t.category,categoryText:t.categoryText,points:o,showSeriesColorMarker:n,showSeriesName:e,headerColumnColSpan:r};return this.extendWithTooltipStyling(s,t)}createTooltipTemplatePoints(t){return t.points?t.points.map((e=>this.createSeriesTooltipTemplatePoint(e,t.format))):[]}createSeriesTooltipTemplatePoint(t,e){const n=this.convertToSeriesPoint(t),i=((t.options||{}).tooltip||{}).format||e;return Object.assign(Object.assign({},n),{formattedValue:i&&t.formatValue?t.formatValue(i):String(t.value)})}hideElements(t){const e=t.relatedTarget,n=e&&Boolean(e.closest(".k-chart-tooltip")),r=(0,i.ownsElement)(this.element,e);e&&(n||r)||this.chartInstance.hideElements()}createSeriesClickEventArgs(t){return this.convertToSeriesPoint(t.point)}convertToSeriesPoint(t){let e;const n=(0,i.isObject)(t.dataItem)?Object.getPrototypeOf(t.dataItem):null;(0,i.isObject)(t.dataItem)&&n&&n!==Object.prototype&&(e=(0,i.extend)({},n,t.dataItem));return{dataItem:e,category:t.category,categoryIndex:t.categoryIx,seriesIndex:t.series.index,seriesColor:t.series.color,seriesName:t.series.name||"",percentage:t.percentage,pointIndex:t.pointIx||t.index,total:t.total,runningTotal:t.runningTotal}}createLegendItemClickEventArgs(t){return{seriesIndex:t.series.index,pointIndex:t.pointIndex,text:t.text}}createAxisLabelClickEventArgs(t){return{value:t.value,text:t.text,index:t.index,axisName:(t.axis||{}).name}}extendWithTooltipStyling(t,e){return(0,i.extend)(t,{tooltipStyle:(0,i.stringifyToStyle)(e.style),tooltipClass:e.className||""})}onObserverDrilldown(t){const{series:e,value:n}=t;if(e.drilldownSeriesFactory){const i=e.drilldownSeriesFactory(n);if(!i)return;i instanceof Promise?i.then((e=>this._onDrilldownData(t,e))):this._onDrilldownData(t,i)}else"object"==typeof n&&this._onDrilldownData(t,n)}_onDrilldownData(t,e){const n=t.series,r=(0,i.extend)({},n,e);Object.keys(r).forEach((t=>{null===r[t]&&delete r[t]})),this._drilldownState.push(this.options.series),this.setDrilldownSeries([r]),this.invokeDrilldownAsync({seriesName:r.name})}setDrilldownSeries(t){this.options.series=t,this.chartInstance.options.series=t,this.chartInstance.setOptions(this.chartInstance.options,this.getThemeOptions())}invokeDrilldownAsync(t){this.invokeMethodAsync(this.options.jsinterop.onDrilldown,t)}resetDrilldownLevel(t){const e=t||0,n=this._drilldownState;if(!n||e<0||e>n.length-1)return;const r=(0,i.extend)({},n[e]);this._drilldownState=this._drilldownState.slice(0,e),this.setDrilldownSeries(r)}}e.Chart=a},6841:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChartInstanceObserver=void 0;const i=n(6294);class r extends i.InstanceObserver{constructor(t,e){super(t,e),this.handlerMap={showTooltip:"onObserverShowTooltip",hideTooltip:"onObserverHideTooltip",seriesClick:"onObserverSeriesClick",legendItemClick:"onObserverLegendItemClick",axisLabelClick:"onObserverAxisLabelClick",drilldown:"onObserverDrilldown"}}}e.ChartInstanceObserver=r},3150:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomEventsBuilder=void 0,n(7168);const i=n(5076);e.DomEventsBuilder=class{static create(t,e){const n=window.Hammer,r=new n(t,{recognizers:[[n.Tap],[n.Pan],[n.Pinch],[n.Press,{time:0}]]});return new i.DomEvents(r,e)}}},5076:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DomEvents=void 0;const n=t=>({x:{location:t.pageX},y:{location:t.pageY}});function i(t,e){for(let n=0;n<t.length;n++)if(e[t[n]])return!0;return!1}const r=[{end:"panend",move:"panmove",start:"panstart"},{gesturechange:"pinchmove",gestureend:"pinchend",gesturestart:"pinchstart"},{press:"press"},{tap:"tap"}];e.DomEvents=class{constructor(t,e){this.hammerInstance=t,this.eventHandlers={},this.tap=this.tap.bind(this),this.press=this.press.bind(this),this.panstart=this.panstart.bind(this),this.panmove=this.panmove.bind(this),this.panend=this.panend.bind(this),this.pinchstart=this.pinchstart.bind(this),this.pinchmove=this.pinchmove.bind(this),this.pinchend=this.pinchend.bind(this),e&&this.bind(e)}tap(t){this.trigger("tap",t)}press(t){this.trigger("press",t)}panstart(t){delete this.previous,this.previous=this.trigger("start",t)}panmove(t){this.previous=this.trigger("move",t)}panend(t){this.trigger("end",t),delete this.previous}pinchstart(t){this.trigger("gesturestart",t)}pinchmove(t){this.trigger("gesturechange",t)}pinchend(t){this.trigger("gestureend",t)}trigger(t,e){const i=((t,e)=>{const i=t.pointers,r=i[0],o=r.pageX,s=r.pageY;let a=0;if(i.length>1){const t=i[0],e=i[1];a=Math.sqrt(Math.pow(t.pageX-e.pageX,2)+Math.pow(t.pageY-e.pageY,2))}return{distance:a,event:t.srcEvent,preventDefault:function(){t.preventDefault()},target:t.target,touches:i.map(n),type:t.type,x:{delta:e?o-e.x.location:0,initialDelta:t.deltaX,location:o,startLocation:o-t.deltaX},y:{delta:e?s-e.y.location:0,initialDelta:t.deltaY,location:s,startLocation:s-t.deltaY}}})(e,this.previous);return this.eventHandlers[t]&&this.eventHandlers[t](i),i}bind(t={}){this.unbind(),this.eventHandlers=t;for(let e=0;e<r.length;e++){const n=r[e],o=Object.keys(n);if(i(o,t))for(let t=0;t<o.length;t++){const e=n[o[t]];this.hammerInstance.on(e,this[e])}}}unbind(){this.hammerInstance&&this.hammerInstance.off(),this.eventHandlers={}}destroy(){this.hammerInstance&&(this.hammerInstance.destroy(),delete this.hammerInstance),delete this.eventHandlers}toggleDrag(t){this.toggle("pan",t)}toggleZoom(t){this.toggle("pinch",t)}toggle(t,e){if(this.hammerInstance){this.hammerInstance.get(t).set({enable:e})}}}},1323:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6474),e)},2001:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.chartDefaultTheme=void 0;const i=n(6294);e.chartDefaultTheme=()=>Object.assign({},(0,i.chartBaseTheme)(),{axisDefaults:{crosshair:{color:"rgba(0, 0, 0, 0.5)"},labels:{color:"rgb(101, 101, 101)",font:"12px serif"},line:{color:"rgba(0, 0, 0, 0.08)"},majorGridLines:{color:"rgba(0, 0, 0, 0.08)"},minorGridLines:{color:"rgba(0, 0, 0, 0.04)"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},title:{color:"rgb(101, 101, 101)",font:"14px serif"}},chartArea:{background:"rgb(255, 255, 255)"},legend:{inactiveItems:{labels:{color:"rgba(102, 102, 102, 0.5)"},markers:{color:"rgba(102, 102, 102, 0.5)"}},labels:{color:"rgb(101, 101, 101)",font:"14px serif"}},seriesDefaults:{boxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},bullet:{target:{color:"rgb(101, 101, 101)"}},candlestick:{downColor:"rgb(101, 101, 101)",line:{color:"rgb(101, 101, 101)"}},errorBars:{color:"rgba(0, 0, 0, 0.5)"},horizontalWaterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},icon:{border:{color:"rgba(0, 0, 0, 0.08)"}},labels:{background:"rgb(255, 255, 255)",color:"rgb(101, 101, 101)",opacity:.8,font:"12px serif"},notes:{icon:{background:"rgba(0, 0, 0, 0.5)",border:{color:"rgba(0, 0, 0, 0.5)"}},line:{color:"rgba(0, 0, 0, 0.5)"},label:{font:"14px serif"}},verticalBoxPlot:{downColor:"rgba(0, 0, 0, 0.08)",mean:{color:"rgb(246, 246, 246)"},median:{color:"rgb(246, 246, 246)"},whiskers:{color:"rgb(255, 99, 88)"}},verticalBullet:{target:{color:"rgb(101, 101, 101)"}},waterfall:{line:{color:"rgba(0, 0, 0, 0.08)"}},area:{opacity:.8}},title:{color:"rgb(101, 101, 101)",font:"16px serif"},seriesColors:["rgb(255, 99, 88)","rgb(255, 210, 70)","rgb(120, 210, 55)","rgb(40, 180, 200)","rgb(45, 115, 245)","rgb(170, 70, 190)"]})},6765:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationService=void 0;e.ConfigurationService=class{constructor(){this.store={}}push(t){this.store=t}set(t,e){let n=this.store;const i=t.split(".");let r=i.shift();for(;i.length>0;)n=n[r]=n[r]||{},r=i.shift();n[r]=e}}},5756:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.IntlService=void 0;const i=n(8399),r=n(1843);e.IntlService=class{static setLocale(t={}){const e=(0,r.deepExtend)({},i.localeInfo("en"),t);i.setData(e),this.localeId=t.name}static format(t,...e){return i.format(t,e,this.localeId)}static toString(t,e,n){let r=t;return new RegExp("^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[01]|0[1-9]|[12][0-9])T(2[0-3]|[01][0-9]):([0-5][0-9]):([0-5][0-9])(.[0-9]+)?(Z)?$").test(t)&&(r=new Date(t)),i.toString(r,e,this.localeId||n)}static parseDate(t,e,n){return i.parseDate(t,e,this.localeId||n)}}},4004:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.TemplateService=e.IntlService=void 0;var i=n(5756);Object.defineProperty(e,"IntlService",{enumerable:!0,get:function(){return i.IntlService}});var r=n(341);Object.defineProperty(e,"TemplateService",{enumerable:!0,get:function(){return r.TemplateService}});var o=n(114);Object.defineProperty(e,"ThemeService",{enumerable:!0,get:function(){return o.ThemeService}})},341:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TemplateService=void 0;const i=n(9875);e.TemplateService=class{static compile(t){return i.Template.compile(t)}}},9875:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Template=void 0;const i=n(1843),r=/\$\{([^}]*)\}/g,o=/\\\}/g,s=/__CURLY__/g,a=/\\#/g,l=/__SHARP__/g;class c{static htmlEncode(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}static render(t,e){let n,i,r="";for(n=0,i=e.length;n<i;n++)r+=t(e[n]);return r}static compile(t){let e,n,h="var $kendoOutput, $kendoHtmlEncode = htmlEncode;",u=c.options.paramName,d=c.options.useWithBlock;if("function"==typeof t)return t;if(h+=d?"with("+u+"){":"",h+="$kendoOutput=",e=t.replace(o,"__CURLY__").replace(r,"#=$kendoHtmlEncode($1)#").replace(s,"}").replace(a,"__SHARP__").split("#"),1===e.length){return function(t){const n=window[e[0]];return(0,i.isFunction)(n)?n(t):e[0]||""}}for(n=0;n<e.length;n++)h+=c.compilePart(e[n],n%2==0);h+=d?";}":";",h+="return $kendoOutput;",h=h.replace(l,"#");try{let t=new Function(u,"htmlEncode",h);return function(e){return t(e,c.htmlEncode)}}catch(e){throw new Error("Invalid template:'"+t+"' Generated code:'"+h+"'")}}static compilePart(t,e){if(e)return"'"+t.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";let n=t.charAt(0),i=t.substring(1);return"="===n?"+("+i+")+":":"===n?"+$kendoHtmlEncode("+i+")+":";"+t+";$kendoOutput+="}}e.Template=c,c.options={useWithBlock:!0,paramName:"dataItem"}},114:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=void 0;const i=n(6294),r=n(2001),o=n(6765),s=n(1843),a=t=>`${t.fontSize} ${t.fontFamily}`;class l extends o.ConfigurationService{constructor(){super(...arguments),this.loaded=!1,this.element=null}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.readTheme()||this.readDefaultTheme(),this.loaded=!0}readTheme(){this.createElement();const t=this.queryColor("primary"),e=this.queryColor("primary-contrast");if(this.loaded&&this.currentAccentColor&&this.currentAccentColor===t)return this.destroyElement(),!0;const n=t!==e;try{n&&(this.currentAccentColor=t,this.push((0,i.chartBaseTheme)()),this.setColors(),this.setFonts(),this.setSeriesColors())}finally{this.destroyElement()}return n}readDefaultTheme(){this.push((0,r.chartDefaultTheme)())}createElement(){const t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--primary"></div>\n    <div class="k-var--primary-contrast"></div>\n    <div class="k-var--base"></div>\n    <div class="k-var--background"></div>\n\n    <div class="k-var--normal-background"></div>\n    <div class="k-var--normal-text-color"></div>\n    <div class="k-var--hover-background"></div>\n    <div class="k-var--hover-text-color"></div>\n    <div class="k-var--selected-background"></div>\n    <div class="k-var--selected-text-color"></div>\n    <div class="k-var--chart-error-bars-background"></div>\n    <div class="k-var--chart-notes-background"></div>\n    <div class="k-var--chart-notes-border"></div>\n    <div class="k-var--chart-notes-lines"></div>\n    <div class="k-var--chart-crosshair-background"></div>\n\n    <div class="k-var--chart-inactive"></div>\n    <div class="k-var--chart-major-lines"></div>\n    <div class="k-var--chart-minor-lines"></div>\n    <div class="k-var--chart-area-opacity"></div>\n\n    <div>\n        <div class="k-var--chart-font"></div>\n        <div class="k-var--chart-title-font"></div>\n        <div class="k-var--chart-label-font"></div>\n    </div>\n\n    <div class="k-var--series">\n      <div class="k-var--series-a"></div>\n      <div class="k-var--series-b"></div>\n      <div class="k-var--series-c"></div>\n      <div class="k-var--series-d"></div>\n      <div class="k-var--series-e"></div>\n      <div class="k-var--series-f"></div>\n    </div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}setStyle(t,e){this.set(t,e)}setColors(){this.mapColor("axisDefaults.crosshair.color","chart-crosshair-background"),this.mapColor("axisDefaults.labels.color","normal-text-color"),this.mapColor("axisDefaults.line.color","chart-major-lines"),this.mapColor("axisDefaults.majorGridLines.color","chart-major-lines"),this.mapColor("axisDefaults.minorGridLines.color","chart-minor-lines"),this.mapColor("axisDefaults.notes.icon.background","chart-notes-background"),this.mapColor("axisDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("axisDefaults.notes.line.color","chart-notes-lines"),this.mapColor("axisDefaults.title.color","normal-text-color"),this.mapColor("chartArea.background","background"),this.mapColor("legend.inactiveItems.labels.color","chart-inactive"),this.mapColor("legend.inactiveItems.markers.color","chart-inactive"),this.mapColor("legend.labels.color","normal-text-color"),this.mapColor("seriesDefaults.boxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.boxPlot.mean.color","base"),this.mapColor("seriesDefaults.boxPlot.median.color","base"),this.mapColor("seriesDefaults.boxPlot.whiskers.color","primary"),this.mapColor("seriesDefaults.bullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.candlestick.downColor","normal-text-color"),this.mapColor("seriesDefaults.candlestick.line.color","normal-text-color"),this.mapColor("seriesDefaults.errorBars.color","chart-error-bars-background"),this.mapColor("seriesDefaults.horizontalWaterfall.line.color","chart-major-lines"),this.mapColor("seriesDefaults.icon.border.color","chart-major-lines"),this.mapColor("seriesDefaults.labels.background","background"),this.mapColor("seriesDefaults.labels.color","normal-text-color"),this.mapColor("seriesDefaults.notes.icon.background","chart-notes-background"),this.mapColor("seriesDefaults.notes.icon.border.color","chart-notes-border"),this.mapColor("seriesDefaults.notes.line.color","chart-notes-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.downColor","chart-major-lines"),this.mapColor("seriesDefaults.verticalBoxPlot.mean.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.median.color","base"),this.mapColor("seriesDefaults.verticalBoxPlot.whiskers.color","primary"),this.mapColor("seriesDefaults.verticalBullet.target.color","normal-text-color"),this.mapColor("seriesDefaults.waterfall.line.color","chart-major-lines"),this.mapColor("title.color","normal-text-color"),this.mapColor("labels.color","normal-text-color"),this.mapColor("labels.stroke.color","background"),this.setStyle("links.color",(0,s.getCssVariable)("--kendo-color-subtle"));const t=parseFloat(this.queryStyle("chart-area-opacity").opacity);isNaN(t)||(this.setStyle("seriesDefaults.area.opacity",t),this.setStyle("seriesDefaults.labels.opacity",t))}setFonts(){const t=a(this.queryStyle("chart-font")),e=a(this.queryStyle("chart-title-font")),n=a(this.queryStyle("chart-label-font"));this.setStyle("axisDefaults.labels.font",n),this.setStyle("axisDefaults.notes.label.font",t),this.setStyle("axisDefaults.title.font",t),this.setStyle("labels.font",t),this.setStyle("legend.labels.font",t),this.setStyle("seriesDefaults.labels.font",n),this.setStyle("seriesDefaults.notes.label.font",t),this.setStyle("title.font",e),this.setStyle("labels.font",t)}setSeriesColors(){const t=this.element,e=[].slice.call(t.querySelectorAll(".k-var--series div")).reduce(((t,e)=>(t[(t=>t.match(/series-([a-z])$/)[1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0))(e.className)]=window.getComputedStyle(e).backgroundColor,t)),[]);this.setStyle("seriesColors",e)}mapColor(t,e){this.setStyle(t,this.queryColor(e))}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){const e=this.element;return window.getComputedStyle(e.querySelector(`.k-var--${t}`))}}e.ThemeService=l},8832:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StockChart=void 0;const i=n(6294),r=n(4804),o=n(193),s={autoBindElements:!0,liveDrag:!1,partialRedraw:!0,tooltip:{visible:!1},seriesDefaults:{tooltip:{visible:!1}}};class a extends r.Chart{getChartConstructor(){return i.StockChart}extendOptions(t){this.applyNavigatorDefaults(t),super.extendOptions(t)}setOptions(t){const e=this.getWidgetOptions(t);this.applyNavigatorDefaults(e);const n=this.getThemeOptions();this.chartInstance.applyOptions(e,n),super.setOptions(t)}applyNavigatorDefaults(t){(0,o.deepExtend)(t.navigator,s)}}e.StockChart=a},1652:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initChip=function(t,e){(0,i.initComponent)(r.Chip,t,e)};const i=n(1843),r=n(574)},574:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chip=void 0;const i=n(1843),r="keydown",o=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT];class s extends i.Component{constructor(t,e){super(t,e),this.onKeyDown=t=>{this.invokeKeyDown(t)},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(r,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown)}invokeKeyDown(t){t.target===this.element&&(t.keyCode===i.KeyCode.SPACE&&t.preventDefault(),this.element.closest(".k-chip-list")&&o.includes(t.keyCode)&&t.preventDefault(),this.invokeMethodAsync(this.options.jsinterop.keydown,(0,i.converToKeyboardEventArgs)(t)))}}e.Chip=s},5907:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initChipList=function(t){(0,i.initComponent)(r.ChipList,t)};const i=n(1843),r=n(6233)},6233:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChipList=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e)}focusChip(t){const e=this.element.getElementsByClassName("k-chip")[t];e&&e.focus()}}e.ChipList=r},5210:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(1652),e),i.__exportStar(n(5907),e)},9559:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColorGradient=function(t,e){(0,r.initComponent)(i.ColorGradient,t,e)};const i=n(9941),r=n(1843)},9941:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorGradient=void 0;const i=n(1843),r=n(4927),o=n(4771),s="k-colorgradient",a="focusin",l="focusout",c="keydown",h="click",u=[i.Key.ARROWUP,i.Key.ARROWDOWN,i.Key.ARROWLEFT,i.Key.ARROWRIGHT];class d extends i.Component{constructor(t,e){super(t,e),this.onDrag=t=>{this.moveDragHandleFromEvent(t),this.throttleChangeValue()},this.onDragEnd=()=>{this.changeValue(),this.dragHandle.focus()},this.onNavigate=t=>{let e=(0,i.parseStyleAttrToInt)("top",this.dragHandle),n=(0,i.parseStyleAttrToInt)("left",this.dragHandle);switch(t.name){case i.Key.ARROWDOWN:e+=4;break;case i.Key.ARROWUP:e-=4;break;case i.Key.ARROWRIGHT:n+=4;break;case i.Key.ARROWLEFT:n-=4}this.moveDragHandle(e,n),this.changeValue()},this.onKeyDown=t=>{t.target&&(0,i.hasAncestor)(t.target,`.${s}`)&&t.keyCode===i.KeyCode.ESCAPE&&(this.element.focus(),this.tabKeyTrap.disableTabKeyTrap(),this.invokeKeyDown(t)),t.keyCode===i.KeyCode.ENTER&&(0,i.hasClass)(s,t.target)&&(this.dragHandle.focus(),this.tabKeyTrap.enableKeyTrap(),this.invokeKeyDown(t))},this.onClick=t=>{this.moveDragHandleFromEvent(t),this.dragHandle.focus(),this.changeValue()},this.onFocusIn=t=>{t.target&&(0,i.hasAncestor)(t.target,`.${s}`)&&!(0,i.hasClass)(s,t.target)&&(this.tabKeyTrap.enableKeyTrap(),this.invokeFocusIn())},this.onFocusOut=t=>{this.element.contains(t.relatedTarget)&&this.element!==t.relatedTarget||(this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap(),this.invokeFocusOut())},this.gradient=this.element.querySelector(".k-hsv-rectangle"),this.dragHandle=this.element.querySelector(".k-draghandle"),this.setOptions(e),this.initDraggable(),this.bindEvents(),this.throttleChangeValue=(0,r.throttle)(this.changeValue,150).bind(this),this.initTabKeyTrap()}destroy(){this.unbindEvents(),this.destroyTabKeyTrap(),super.destroy()}bindEvents(){this.gradient.addEventListener(h,this.onClick),this.element.addEventListener(c,this.onKeyDown),this.element.addEventListener(a,this.onFocusIn),this.element.addEventListener(l,this.onFocusOut),this.initNavigationService()}unbindEvents(){this.gradient.removeEventListener(h,this.onClick),this.element.removeEventListener(c,this.onKeyDown),this.element.removeEventListener(a,this.onFocusIn),this.element.removeEventListener(l,this.onFocusOut)}setOptions(t){super.setOptions(t),this.hsva=this.options.hsva,this.initDragHandlePosition()}initNavigationService(){this.navigationService=new i.NavigationService(this.dragHandle),this.navigationService.bind(u,this.onNavigate)}initDraggable(){this.draggable=new o.Draggable(this.element,{filter:".k-hsv-gradient",offsetDropClue:!1,events:{drag:this.onDrag,dragEnd:this.onDragEnd}})}initDragHandlePosition(){const t=(1-this.hsva.v)*this.gradient.offsetHeight,e=this.hsva.s*this.gradient.offsetWidth;this.dragHandle.style.display="block",this.setDragHandlePosition(t,e)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.onKeyDown,(0,i.converToKeyboardEventArgs)(t))}invokeFocusIn(){this.invokeMethodAsync(this.options.jsinterop.onFocusIn)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.onFocusOut)}setDragHandlePosition(t,e){this.dragHandle&&(this.dragHandle.style.top=`${t}px`,this.dragHandle.style.left=`${e}px`)}moveDragHandleFromEvent(t){const e=this.gradient.getBoundingClientRect();this.moveDragHandle(t.clientY-e.top,t.clientX-e.left)}moveDragHandle(t,e){let n=(0,i.clamp)(t,0,this.gradient.offsetHeight),r=(0,i.clamp)(e,0,this.gradient.offsetWidth);this.setDragHandlePosition(n,r),this.hsva.s=r/this.gradient.offsetWidth,this.hsva.v=1-n/this.gradient.offsetHeight}changeValue(){this.invokeMethodAsync(this.options.jsinterop.changeValue,this.hsva)}initTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.element)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}}e.ColorGradient=d},8045:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColorPalette=function(t,e){(0,r.initComponent)(i.ColorPalette,t,e)};const i=n(7035),r=n(1843)},7035:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPalette=void 0;const i=n(1843),r=[i.Key.ARROWDOWN,i.Key.ARROWRIGHT,i.Key.ARROWLEFT,i.Key.ARROWUP,i.Key.ENTER];class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{keydown:"",blur:""}},this.onKeyDown=t=>(this.invokeMethodAsync(this.options.jsinterop.keydown,t.name),t.name===i.Key.ENTER),this.invokeBlur=()=>{this.invokeMethodAsync(this.options.jsinterop.blur)},this.extendOptions(e),this.initNavigationService(),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("blur",this.invokeBlur)}unbindEvents(){this.element.removeEventListener("blur",this.invokeBlur)}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(r,this.onKeyDown)}focus(){setTimeout((()=>{this.element.focus()}),100)}}e.ColorPalette=o},635:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColorPicker=function(t,e){(0,r.initComponent)(i.ColorPicker,t,e)};const i=n(4497),r=n(1843)},4497:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPicker=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{keydown:"",blur:""}},this.closePopup=()=>(this.focus(),this.invokeMethodAsync(this.options.jsinterop.close),!1),this.openPopup=()=>(this.invokeMethodAsync(this.options.jsinterop.open),!1),this.focus=()=>{this.element.focus()},this.popupElement=(0,i.getElementByDataId)(e.popupId),this.extendOptions(e),this.initNavigationService(),this.initPopupNavigationService()}destroy(){this.navigationService.destroy(),this.popupNavigationService.destroy(),super.destroy()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.openPopup),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`,this.closePopup)}initPopupNavigationService(){this.popupNavigationService=new i.NavigationService(this.popupElement),this.popupNavigationService.bind([i.Key.ESC,`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`],this.closePopup)}}e.ColorPicker=r},4243:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFlatColorPicker=function(t,e){(0,r.initComponent)(i.FlatColorPicker,t,e)};const i=n(425),r=n(1843)},425:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FlatColorPicker=void 0;const i=n(1843),r="keydown",o="focusout",s="focusin",a="focusout",l="k-colorgradient";class c extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{change:""}},this.onKeyDown=t=>{const e=!(0,i.hasClass)(l,t.target)&&(0,i.hasAncestor)(t.target,`.${l}`);this.isEnterKeyActionable(t.target)?t.keyCode===i.KeyCode.ENTER&&(0,i.hasClass)("k-flatcolorpicker",t.target)?(this.firstFocusableElement.focus(),this.tabKeyTrap.enableKeyTrap(),this.invokeKeyDown(t)):t.keyCode===i.KeyCode.ESCAPE&&(e?t.stopPropagation():(this.element.focus(),this.tabKeyTrap.disableTabKeyTrap(),this.invokeKeyDown(t))):this.invokeMethodAsync(this.options.jsinterop.change)},this.onFocusOut=t=>{(0,i.ownsElement)(this.element,t.relatedTarget)||this.invokeChange(),this.element.contains(t.relatedTarget)&&this.element!==t.relatedTarget||(this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap(),this.invokeFocusOut())},this.invokeChange=()=>{this.invokeMethodAsync(this.options.jsinterop.change)},this.onFocusIn=t=>{t.target&&(0,i.hasAncestor)(t.target,".k-flatcolorpicker")&&(this.tabKeyTrap.enableKeyTrap(),this.invokeFocusIn())},this.extendOptions(e),this.bindEvents(),this.initTabKeyTrap(),this.firstFocusableElement=this.tabKeyTrap.firstElement,this.colorGradientElement=this.element.querySelector(`.${l}`)}bindEvents(){this.element.addEventListener(o,this.onFocusOut),this.element.addEventListener(r,this.onKeyDown),this.element.addEventListener(s,this.onFocusIn),this.element.addEventListener(a,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(o,this.onFocusOut),this.element.removeEventListener(r,this.onKeyDown),this.element.removeEventListener(s,this.onFocusIn),this.element.removeEventListener(a,this.onFocusOut)}destroy(){this.unbindEvents(),this.destroyTabKeyTrap(),super.destroy()}isEnterKeyActionable(t){return!(!t.matches(".k-button")&&t.querySelector(".k-selected.k-focus"))}initTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.element),this.tabKeyTrap.findEdgeElements()}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.onKeyDown,(0,i.converToKeyboardEventArgs)(t))}invokeFocusIn(){this.invokeMethodAsync(this.options.jsinterop.onFocusIn)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.onFocusOut)}focus(){this.firstFocusableElement.focus()}}e.FlatColorPicker=c},9557:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(8045),e),i.__exportStar(n(635),e),i.__exportStar(n(9559),e),i.__exportStar(n(4243),e)},8813:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColumnMenu=function(t,e){(0,r.initComponent)(i.ColumnMenu,t,e)};const i=n(9387),r=n(1843)},9387:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnMenu=void 0;const i=n(1843),r="keydown",o=[i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.SPACE,i.KeyCode.ENTER,i.KeyCode.TAB];class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,itemListDataId:"",jsinterop:{itemListKeyDown:""}},this.onKeyDown=t=>{const e=[i.Key.ARROWRIGHT,i.Key.ARROWLEFT,i.Key.ARROWUP,i.Key.ARROWDOWN].includes(t.key);if(t.key===i.Key.TAB){const e=t.target.closest(".k-columnmenu-item-wrapper"),n=e?e.querySelector(".k-columnmenu-item"):null,i="true"===(n?n.getAttribute("aria-expanded"):"");(!i||i&&t.target===n&&t.shiftKey)&&t.preventDefault()}else e&&(0,i.hasClass)("k-columnmenu-item",t.target)&&t.preventDefault()},this.onItemListKeyDown=t=>{const e=(0,i.isFocusable)(t.target),n=t.target.closest(".k-filter-menu"),r=t.target.closest(".k-treeview"),s=t.target.closest(".k-columnmenu-item-content");if(e&&(n||r||s)&&o.includes(t.keyCode)&&!t.shiftKey)return;const a=(0,i.converToKeyboardEventArgs)(t);this.invokeMethodAsync(this.options.jsinterop.itemListKeyDown,a)},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){const t=this.getItemListElement();t&&t.addEventListener(r,this.onItemListKeyDown),this.element.addEventListener(r,this.onKeyDown)}unbindEvents(){const t=this.getItemListElement();t&&t.removeEventListener(r,this.onItemListKeyDown),this.element.removeEventListener(r,this.onKeyDown)}getItemListElement(){return(0,i.getElementByDataId)(this.options.itemListDataId)}}e.ColumnMenu=s},6668:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(8813),e)},4068:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResizeService=void 0;const i=n(4927);e.ResizeService=class{constructor(t){this.onResize=t=>{t[0].target===this.element&&this.resizeCallback()},this.element=t.element,this.resizeCallback=t.onResize,this.initResizeObserver()}destroy(){this.destroyResizeObserver(),this.element=null}initResizeObserver(){this.debounceResize=(0,i.debounce)(this.onResize,50),this.resizeObserver=new ResizeObserver(this.debounceResize),this.resizeObserver.observe(this.element)}destroyResizeObserver(){this.resizeObserver&&this.resizeObserver.unobserve(this.element),this.resizeObserver=this.debounceResize=this.resizeCallback=null}}},7992:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropDownButtonBase=void 0;const i=n(5027),r=n(5140),o=n(4264),s=n(193),a="blur",l="focus",c="click",h=[i.Key.ARROWDOWN,i.Key.ARROWUP],u="k-button",d="k-split-button-arrow";class p extends r.DropdownBase{constructor(t,e){super(t,e),this.onBlur=t=>{const e=t.relatedTarget,n=e&&(0,o.ownsElement)(this.suggestionListElement,e),i=e&&e.closest((0,s.toClassSelector)(d));n||i||this.invokeBlur()},this.onFocus=()=>{this.invokeFocus()},this.onArrowButtonClick=()=>{(0,o.focusInNextFrameAsync)(this.button,{preventScroll:!1})},this.button=(0,o.hasClass)(u,this.element)?this.element:this.element.querySelector((0,s.toClassSelector)(u)),this.arrowButton=this.element.querySelector((0,s.toClassSelector)(d)),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){var t;this.button.addEventListener(a,this.onBlur),this.button.addEventListener(l,this.onFocus),null===(t=this.arrowButton)||void 0===t||t.addEventListener(c,this.onArrowButtonClick),this.navigationService.bind(h,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){var t;null===(t=this.arrowButton)||void 0===t||t.removeEventListener(c,this.onArrowButtonClick),this.button.removeEventListener(a,this.onBlur),this.button.removeEventListener(l,this.onBlur)}}e.DropDownButtonBase=p},1925:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initComponentLoaderContainer=function(t,e){(0,r.initComponent)(i.ComponentLoaderContainer,t,e)};const i=n(9987),r=n(9196)},9987:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComponentLoaderContainer=void 0;const i=n(8863),r=n(4264);class o extends i.Component{constructor(t,e){super(t,e),this.options={showDelay:600},this._loaderIntervals=[],this.extendOptions(e)}startLoaderShowTimer(){this.addShowTimer()}showLoader(){(0,r.showElement)(this.element)}hideLoader(){this.removeShowTimer(),this._loaderIntervals.length||(0,r.hideElement)(this.element)}addShowTimer(){this._loaderIntervals.push(setTimeout((()=>this.showLoader()),this.options.showDelay))}removeShowTimer(){clearTimeout(this._loaderIntervals.shift())}}e.ComponentLoaderContainer=o},8863:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const i=n(193);e.Component=class{constructor(t,e){this.options={dotNetInstance:null,events:{}},this.element=t,this.dotNetInstance=e.dotNetInstance}destroy(){this.element=null,this.dotNetInstance=null}extendOptions(t){this.options=(0,i.deepExtend)(this.options,t)}setOptions(t){this.options=t}invokeMethodAsync(t,e={}){const n=this.dotNetInstance;if(n&&n.invokeMethodAsync&&t)return n.invokeMethodAsync(t,e)}trigger(t,e={}){let n={defaultPrevented:!1,preventDefault:()=>{n.defaultPrevented=!0}};if((0,i.isFunction)(this.options.events[t]))return this.options.events[t]((0,i.extend)(n,e,{sender:this})),n.defaultPrevented}getWidgetOptions(t=null){const e=(0,i.extend)({},t||this.options||{});return delete e.dotNetInstance,delete e.jsinterop,e}}},9196:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.removeComponentSuffix=e.addComponentSuffix=void 0,e.initComponent=function(t,n,i={}){const o=(0,e.removeComponentSuffix)(n),s=(0,r.getElementByDataId)(o);if(!l(n)){c(n,new t(s,i))}},e.destroyComponent=function(t){let e=l(t);e&&e.destroy&&(e.destroy(),e=null);h(t)},e.setComponentOptions=a,e.setOptions=function(t,e){a(u()[t],e)},e.getComponentInstance=l,e.getComponentInstanceBySelector=function(t,e){const n=t&&t.closest(e);if(n){return l(n.getAttribute("data-id"))}return null},e.setComponentInstance=c,e.removeComponentInstance=h,e.invokeComponentMethod=function(t,e,n){const r=l(e);if(r&&(0,i.isFunction)(r[t]))return r[t](n)};const i=n(193),r=n(4264),o="telerik",s=new RegExp(`-${o}-.*$`,"ig");function a(t,e){t&&t.setOptions&&t.setOptions(e)}function l(t){return u()[t]}function c(t,e){u()[t]=e}function h(t){delete(window.TelerikBlazor._instances||{})[t]}const u=()=>{if(void 0===window.TelerikBlazor)throw new Error("The telerik-blazor.js script is not loaded");return window.TelerikBlazor._instances=window.TelerikBlazor._instances||{},window.TelerikBlazor._instances};e.addComponentSuffix=(t,e)=>`${t}-${o}-${e}`;e.removeComponentSuffix=t=>t.replace(s,"")},193:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDistance=e.createDate=e.mousewheelDelta=e.toPixel=e.groupBy=e.convertToHtml=e.parseStyleAttrToInt=e.parseAttrToInt=e.toClassSelector=e.toAttrValueQuerySelector=e.toAttrQuerySelector=e.toDataAttr=e.convertToMouseEventArgs=e.converToKeyboardEventArgs=e.capitalizeFirstLetter=e.stringifyToStyle=e.saveFile=e.copyToClipboardAsync=e.noop=e.htmlEncode=e.createCancellableTimerPromise=e.delay=e.isValidDate=e.isNumber=e.hasValue=e.isNotNull=e.isDefined=e.toArray=e.isArray=e.isString=e.isFunction=e.guid=e.deepExtend=e.isDotNetObject=e.isDomElement=e.isHtmlElement=e.isObject=e.extend=e.getLocationHost=e.supportsTouchEvents=void 0;const i=n(9478);e.supportsTouchEvents=()=>{const t="ontouchstart"in window;return Boolean(t)};e.getLocationHost=()=>window.location.host;e.extend=(...t)=>Object.assign(...t);e.isObject=t=>t&&"object"==typeof t&&!Array.isArray(t);e.isHtmlElement=t=>t instanceof HTMLElement;e.isDomElement=t=>t instanceof Element;e.isDotNetObject=t=>t&&DotNet&&DotNet.DotNetObject&&t instanceof DotNet.DotNetObject;e.deepExtend=(t,...n)=>{if(!n.length)return t;const i=n.shift();if((0,e.isObject)(t)&&(0,e.isObject)(i))for(const n in i)(0,e.isHtmlElement)(i[n])||"dotNetInstance"===n||(0,e.isDotNetObject)(i[n])||i[n]&&i[n].buffer&&i[n].buffer instanceof ArrayBuffer?t[n]=i[n]:(0,e.isObject)(i[n])?(t[n]&&(0,e.isObject)(t[n])||(0,e.extend)(t,{[n]:{}}),(0,e.deepExtend)(t[n],i[n])):(0,e.extend)(t,{[n]:i[n]});return(0,e.deepExtend)(t,...n)};e.guid=()=>{let t,e,n="";for(t=0;t<32;t++)e=16*Math.random()|0,8!==t&&12!==t&&16!==t&&20!==t||(n+="-"),n+=(12===t?4:16===t?3&e|8:e).toString(16);return n};e.isFunction=t=>"function"==typeof t;e.isString=t=>"string"==typeof t;e.isArray=t=>Array.isArray(t);e.toArray=t=>Array.from(t);e.isDefined=t=>void 0!==t;e.isNotNull=t=>null!==t;e.hasValue=t=>(0,e.isDefined)(t)&&(0,e.isNotNull)(t);e.isNumber=t=>(0,e.hasValue)(t)&&"number"==typeof t&&!Number.isNaN(t);e.isValidDate=t=>(0,e.hasValue)(t)&&t instanceof Date&&t.getTime&&(0,e.isNumber)(t.getTime());e.delay=t=>new Promise((e=>setTimeout(e,t)));e.createCancellableTimerPromise=t=>{let e,n,i;return n=new Promise((function(n,r){i=r,e=setTimeout((function(){n("timer done")}),t)})),{promise:n,cancel:function(){clearTimeout(e),i()}}};e.htmlEncode=t=>String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;");e.noop=function(){};e.copyToClipboardAsync=t=>{try{return navigator.clipboard.writeText(t)}catch(t){return Promise.reject(t)}};e.saveFile=(t,e)=>{(0,i.saveAs)(e,t)};e.stringifyToStyle=t=>{let n=[];const i=Object.entries(t);for(const[t,o]of i)if((0,e.isDefined)(o)){const e=`${r(t)}: ${o}`;n.push(e.toLowerCase())}return n.join("; ")};const r=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2");e.capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1);e.converToKeyboardEventArgs=t=>({type:t.type,key:t.key,code:(t.keyCode||"").toString(),ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey});e.convertToMouseEventArgs=t=>({type:t.type,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,screenX:t.screenX,screenY:t.screenY,button:t.button,buttons:t.buttons,detail:t.detail,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey,metaKey:t.metaKey});e.toDataAttr=t=>`data-${t}`;e.toAttrQuerySelector=t=>`[${t}]`;e.toAttrValueQuerySelector=(t,e)=>`[${t}="${e}"]`;e.toClassSelector=t=>`.${t}`;e.parseAttrToInt=(t,e)=>{if(!e)return-1;const n=e.getAttribute(t),i=parseInt(n,10);return Number.isNaN(i)?-1:i};e.parseStyleAttrToInt=(t,e)=>{if(!e)return 0;const n=e.style[t],i=parseInt(n,10);return Number.isNaN(i)?0:i};e.convertToHtml=(t,e)=>{const n=(e||document).createElement("template");n.innerHTML=t.trim();const i=n.content;return i.childNodes.length>1?i.childNodes:i.firstChild};e.groupBy=(t,e)=>t.reduce((function(t,n){let i=e instanceof Function?e(n):n[e];return(t[i]=t[i]||[]).push(n),t}),{});e.toPixel=t=>parseFloat(t)+"px";e.mousewheelDelta=t=>{let e=0;return t.wheelDelta?e=-t.wheelDelta/120:t.detail&&(e=t.detail/3),e=e>0?Math.ceil(e):Math.floor(e),e};e.createDate=t=>{if(!(0,e.hasValue)(t)||(0,e.isArray)(t))return null;if((0,e.isValidDate)(t))return new Date(t.getTime());const n=new Date(t);return(0,e.isValidDate)(n)?n:null};e.getDistance=(t,e)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},1703:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateDataVizComponent=function({id:t="",widgetOptions:e="",componentOptions:n={},services:r={themeService:{},intlService:{}},componentConstructor:o}){let s=(0,i.getElementByDataId)(t);if(s){let a=JSON.parse(e),l=(0,i.getComponentInstance)(t),c=(0,i.extend)(a,n);if(l)(0,i.setComponentOptions)(l,c);else{r.intlService&&r.intlService.setLocale&&(c.locale=c.locale||{},c.locale.name=t,r.intlService.setLocale(c.locale));let e=new o(s,c,r.themeService,r.intlService);(0,i.setComponentInstance)(t,e)}}};const i=n(1843)},6101:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DataVizComponent=void 0;const i=n(1843);class r extends i.Component{constructor(t,e,n,i){super(t,e),this.extendOptions(e),this.themeService=n,this.intlService=i}destroy(){this.destroyWidget()}getThemeOptions(){return this.themeService?(this.themeService.loadTheme(),this.themeService.getThemeOptions()):{}}initWidget(t,e){this.widget=this.createWidget(t||this.element,e||this.options,this.getThemeOptions(),this.intlService,this.instanceObserver)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t,e={},n={},i={},r={}){return new(this.getWidgetConstructor())(t,e,n,{intlService:i,observer:r,rtl:(e||{}).rtl,sender:this})}getWidgetConstructor(){}setOptions(t){this.widget&&(this.options=t,this.setWidgetOptions(this.options))}setWidgetOptions(t){if(!this.widget)return;const e=this.getWidgetOptions(t);this.widget.setOptions(e,this.getThemeOptions())}refresh(){this.themeService&&this.themeService.reset(),this.setOptions(this.options)}areOptionsChanged(t,e={ignoreOptions:[]}){const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];if(t[r]!==this.options[r]&&!e.ignoreOptions.includes(r))return!0}return!1}}e.DataVizComponent=r},7641:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(6101),e),i.__exportStar(n(1703),e)},4927:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throttle=e.debounce=void 0;e.debounce=(t,e=0)=>{let n;const i=function(...r){const o=this;i.context=this,i.args=r,i.pending=!0,clearTimeout(n),n=setTimeout((()=>{clearTimeout(n),i.pending=!1,t.call(o,...r)}),e)};return i.pending=!1,i.callback=t,i.stop=function(){clearTimeout(n)},i.runCallback=function(){t.call(i.context,i.args)},i};e.throttle=(t,e=0)=>{let n,i=0;return!e||e<=0?t:function(...r){const o=this;let s=0;const a=()=>{t.call(o,...r),i=performance.now()};if(i||(i=performance.now(),n=setTimeout(a,e)),s=performance.now()-i,s>3*e)return clearTimeout(n),void(i=0);clearTimeout(n),s>e?a():n=setTimeout(a,e-s)}}},4264:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unwrapElements=e.unwrapElement=e.wrapInnerElement=e.wrapElements=e.wrapElement=e.removeChildren=e.appendChildren=e.childrenWidth=e.offsetWidth=e.getCssVariable=e.setScrollbarSizeCssVariables=e.getElementIndex=e.haveSameParent=e.isTargetAfterElement=e.getIntersectionOverflowingRect=e.getIntersectionRect=e.areElementsOverlapping=e.firstVisibleItem=e.getMaxScrollLeft=e.isWholeElementInView=e.isVerticallyScrollable=e.isHorizontallyScrollable=e.getScrollBarHeight=e.getScrollBarWidth=e.scrollListToItem=e.setPosition=e.setIndeterminate=e.getSiblings=e.findSiblings=e.findNextSiblings=e.findPreviousSiblings=e.focusFirstFocusableChildInNextFrame=e.focusFirstFocusableChild=e.findEditable=e.findFocusable=e.isFocusable=e.isVisible=e.hasAncestor=e.setElementValue=e.focusElement=e.focusElementInNextFrame=e.focusInNextFrameAsync=e.runInNextFrameAsync=e.isChild=e.hasAnyClass=e.hasClass=e.removeClass=e.addClass=e.hideElement=e.showElement=void 0,e.getAbsoluteElementOffset=e.getDefaultElementRect=e.getViewPortRect=e.FOCUSABLE_ELEMENTS_SELECTOR=e.FOCUSABLE_ELEMENTS=e.getRtlValue=e.isDirectionRtl=e.closestAll=void 0,e.ownsElement=s,e.getNextZIndexFromSiblings=function(t){const n=(0,e.findSiblings)(t,null)||[];let i=Number.MIN_SAFE_INTEGER;n.concat([t]).forEach((t=>{const e=parseInt(window.getComputedStyle(t).zIndex,10)||0;e>i&&(i=e)})),i=Math.max(i,o);return i+1},e.ownsElementOrSelf=function(t,e){return t===e||s(t,e)},e.getOverflowFromContainer=function(t,e,n=!0){const i=t.getBoundingClientRect(),r=e.getBoundingClientRect();let o=i.top-r.top,s=r.bottom-i.bottom,a=i.left-r.left,l=r.right-i.right;if(n){const t=window.getComputedStyle(e);o-=parseFloat(t.borderTopWidth),s-=parseFloat(t.borderBottomWidth),a-=parseFloat(t.borderLeftWidth),l-=parseFloat(t.borderRightWidth)}return{isInside:o>=0&&s>=0&&a>=0&&l>=0,topOverflow:o,bottomOverflow:s,leftOverflow:a,rightOverflow:l}},e.getElementScrollHeight=function(t){return(a(t)||document.getElementById(t)).scrollHeight.toString()},e.getElementById=function(t,e){const n=(0,i.toAttrValueQuerySelector)("id",t);return(e||document).querySelector(n)},e.getElementByDataId=a;const i=n(193),r=n(193),o=10002;function s(t,e){if(!e)return!1;let n=e.parentNode;for(;null!==n;){if(n===t)return!0;n=n.parentNode}return!1}function a(t,e){return(e||document).querySelector(`[data-id="${t}"]`)}e.showElement=(t,e="")=>{t instanceof HTMLElement&&(t.style.display=e)};e.hideElement=t=>{t instanceof HTMLElement&&(t.style.display="none")};e.addClass=(t,e)=>{e.classList.add(t)};e.removeClass=(t,e)=>{e.classList.remove(t)};e.hasClass=(t,e)=>{if(e instanceof HTMLElement)return e.classList.contains(t)};e.hasAnyClass=(t=[],n)=>{for(let i=0;i<t.length;i++)if((0,e.hasClass)(t[i],n))return!0};e.isChild=(t,e)=>{let n=t;for(;n&&n!==document;){if(e.indexOf(n)>=0)return!0;n=n.parentElement}return!1};e.runInNextFrameAsync=t=>(0,i.delay)(33).then((()=>t()));e.focusInNextFrameAsync=(t,n)=>(0,e.runInNextFrameAsync)((()=>{t&&t.focus&&t.focus({preventScroll:n})}));e.focusElementInNextFrame=(t,n)=>{const i=a(t);i&&(0,e.focusInNextFrameAsync)(i,n)};e.focusElement=(t,e=!1)=>{let n=t instanceof HTMLElement?t:a(t);n instanceof HTMLElement&&n!==document.activeElement&&n.focus({preventScroll:e})};e.setElementValue=(t,e)=>{const n=a(t);n instanceof HTMLElement&&(n.value=e)};e.hasAncestor=(t,e,n=!0)=>{const i=t instanceof HTMLElement&&t.closest(e);return n?Boolean(i):i&&!t.matches(e)};e.isVisible=t=>"none"!==window.getComputedStyle(t).display;e.isFocusable=t=>{const n=t.nodeName.toLowerCase(),i=/input|^a$|area|iframe|select|textarea|button|object/.test(n),r=t.tabIndex>-1;return(i||r)&&(0,e.isVisible)(t)&&!t.disabled};e.findFocusable=(t,n=!0)=>c(t,e.isFocusable,n);e.findEditable=(t,e=!0)=>c(t,l,e);e.focusFirstFocusableChild=(t,n)=>{const i=a(t)||document.getElementById(t);if(!i)return;const r=(0,e.findFocusable)(i,!1);r instanceof HTMLElement&&setTimeout((()=>{r.focus({preventScroll:n})}),33)};e.focusFirstFocusableChildInNextFrame=t=>{const n=document.querySelector(t);n&&setTimeout((()=>{const t=(0,e.findFocusable)(n,!1);t instanceof HTMLElement&&t.focus()}),33)};const l=t=>{const n=(0,e.isFocusable)(t),i=(t.tagName||"").toLowerCase(),r="span"===i,o=r&&t.classList.contains("k-switch"),s=r&&t.classList.contains("k-dropdownlist");return n&&i&&(/input|^a$|area|select|textarea|button/.test(i)||o||s)},c=(t,e,n=!0)=>{if(!t)return null;if(n&&e(t))return t;for(t=t.firstElementChild;t;){const n=c(t,e,!0);if(n)return n;t=t.nextElementSibling}};e.findPreviousSiblings=(t,e)=>h(t,e,"previousElementSibling");e.findNextSiblings=(t,e)=>h(t,e,"nextElementSibling");e.findSiblings=(t,n)=>{const i=(0,e.findPreviousSiblings)(t,n),r=(0,e.findNextSiblings)(t,n);return i.concat(r)};const h=(t,e,n)=>{if(!t)return[];const i=[];let o=t[n];for(;o;)(!e||(0,r.isFunction)(e)&&e(o))&&i.push(o),o=o[n];return i};e.getSiblings=t=>t&&t.parentNode?Array.from(t.parentNode.children):[];e.setIndeterminate=(t,e)=>{let n=a(t)||document.getElementById(t);n&&(n.indeterminate=e)};e.setPosition=(t,e,n)=>{const i=a(t)||document.getElementById(t);i&&(i.style.top=e,i.style.left=n)};e.scrollListToItem=(t,e,n)=>{const i=a(t)||document.getElementById(t),r="UL"===i.tagName?i:i.getElementsByTagName("ul")[0],o=r.getElementsByTagName("li")[e],s=n&&p(r.parentElement)?r.parentElement:null,l=s||r.offsetParent;if(!o||!l)return;const c=l.scrollTop,h=c+l.offsetHeight,u=o.offsetTop,d=u+o.offsetHeight;d>h?l.scrollTop+=d-h:u<c&&(l.scrollTop=u)};e.getScrollBarWidth=(t=null)=>!t||t&&p(t)?u().width:0;e.getScrollBarHeight=(t=null)=>!t||t&&d(t)?u().height:0;const u=()=>{const t=document.createElement("div");t.style.visibility="hidden",t.style.overflow="scroll",document.body.appendChild(t);const e=document.createElement("div");t.appendChild(e);const n=t.offsetWidth-e.offsetWidth,i=t.offsetHeight-e.offsetHeight;return t.parentNode.removeChild(t),{width:n,height:i}},d=t=>(0,e.isHorizontallyScrollable)(t)&&t.clientWidth<t.scrollWidth,p=t=>(0,e.isVerticallyScrollable)(t)&&t.clientHeight<t.scrollHeight;e.isHorizontallyScrollable=t=>f(t,"overflow-x");e.isVerticallyScrollable=t=>f(t,"overflow-y");const f=(t,e)=>{const n=window.getComputedStyle(t)[e];return n.indexOf("auto")>-1||n.indexOf("scroll")>-1};e.isWholeElementInView=(t,e)=>{if(!t||!e)return!1;const n=t.getBoundingClientRect(),i=e.getBoundingClientRect();return n.top+n.height>=i.top&&n.bottom<=i.bottom&&n.left+n.width>=i.left&&n.right<=i.right};e.getMaxScrollLeft=t=>(0,i.isHtmlElement)(t)?t.scrollWidth-t.clientWidth:0;e.firstVisibleItem=(t,e)=>{const n=t.scrollTop,i=t.querySelectorAll(e);let r;for(let t=0;t<i.length;t++)if(i[t].offsetTop+i[t].clientHeight>n){r=i[t];break}return r};e.areElementsOverlapping=(t,e,n=1)=>{if(!t||!e||t===e)return!1;const i=t.getBoundingClientRect(),r=e.getBoundingClientRect();return i.top+n<=r.bottom&&i.bottom-n>=r.top&&i.left+n<=r.right&&i.right-n>=r.left};e.getIntersectionRect=(t,n)=>{const i={width:0,height:0},r=(0,e.areElementsOverlapping)(t,n);if(!t||!n||t===n||!r)return i;const o=t.getBoundingClientRect(),s=n.getBoundingClientRect(),a=Math.max(o.left,s.left),l=Math.max(o.top,s.top),c=Math.min(o.right,s.right),h=Math.min(o.bottom,s.bottom);return{x:a,y:l,top:l,left:a,right:c,bottom:h,width:c-a,height:h-l}};e.getIntersectionOverflowingRect=(t,e)=>{if(!t||!e||t===e)return{x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0};const n=t.getBoundinClientRect?t.getBoundingClientRect():t,i=e.getBoundinClientRect?e.getBoundingClientRect():e,r=parseFloat(n.left)-parseFloat(i.left),o=parseFloat(n.top)-parseFloat(i.top);return{x:r,y:o,top:o,left:r,right:parseFloat(i.right)-parseFloat(n.right),bottom:parseFloat(i.bottom)-parseFloat(n.bottom),width:parseFloat(i.width)-parseFloat(n.width),height:parseFloat(i.height)-parseFloat(n.height)}};e.isTargetAfterElement=(t,n)=>{if(!t||!n)return!1;return(0,e.haveSameParent)(t,n)&&(0,e.getElementIndex)(t)>(0,e.getElementIndex)(n)};e.haveSameParent=(t,e)=>!(!(0,i.isHtmlElement)(t)||!(0,i.isHtmlElement)(e))&&t.parentNode===e.parentNode;e.getElementIndex=(t,e)=>{if(!t)return[].indexOf(t);let n=Array.from(t.parentElement.children);return e&&(n=n.filter((t=>t.matches(e)))),Array.from(n).indexOf(t)};e.setScrollbarSizeCssVariables=()=>{const t=u();g("--kendo-scrollbar-width",`${t.width}px`),g("--kendo-scrollbar-height",`${t.height}px`)};const g=(t,e)=>{const n=document.documentElement;n&&n.style.setProperty(t,e)};e.getCssVariable=t=>{var e;if(document&&(null===document||void 0===document?void 0:document.documentElement))return null===(e=window.getComputedStyle(document.documentElement))||void 0===e?void 0:e.getPropertyValue(t)};e.offsetWidth=t=>{const e=window.getComputedStyle(t),n=parseFloat(e.marginLeft)+parseFloat(e.marginRight);return t.offsetWidth+n};e.childrenWidth=t=>{if(t)return[...t.children].reduce(((t,n)=>t+(0,e.offsetWidth)(n)),0)};e.appendChildren=(t,e)=>{if(e)for(let n=0;n<t.length;n++)e.appendChild(t[n])};e.removeChildren=t=>{if(t)for(;t.firstChild;)t.removeChild(t.firstChild)};e.wrapElement=(t,e)=>{if(!t||!t.parentNode||!e)return;let n;(0,r.isString)(e)?n=(0,i.convertToHtml)(e):(0,i.isDomElement)(e)&&(n=e),t.parentNode.insertBefore(n,t),n.appendChild(t)};e.wrapElements=(t,n)=>{if(t&&t.length&&!(t.length<=0)&&n)for(let i=0;i<t.length;i++)(0,e.wrapElement)(t[i],n)};e.wrapInnerElement=(t,e)=>{if(!t||!t.parentNode||!e)return;let n;for((0,r.isString)(e)?n=(0,i.convertToHtml)(e):(0,i.isDomElement)(e)&&(n=e),t.appendChild(n);t.firstChild!==n;)n.appendChild(t.firstChild)};e.unwrapElement=t=>{const e=t.parentElement;t&&e.replaceWith(...e.childNodes)};e.unwrapElements=t=>{if(t&&t.length&&!(t.length<=0))for(let n=0;n<t.length;n++)(0,e.unwrapElement)(t[n])};e.closestAll=(t,e)=>{const n=[];let i=t.parentNode;for(;i&&i!==document;)e?(i.matches(e)&&n.push(i),i=i.parentNode):(n.push(i),i=i.parentNode);return n};e.isDirectionRtl=t=>"rtl"===getComputedStyle(t).direction;e.getRtlValue=(t,e,n)=>n?e:t,e.FOCUSABLE_ELEMENTS=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","*[contenteditable]"],e.FOCUSABLE_ELEMENTS_SELECTOR=e.FOCUSABLE_ELEMENTS.join(", ");e.getViewPortRect=()=>{const t=document?document.documentElement:null;if(!t)return(0,e.getDefaultElementRect)();return{x:t.scrollTop,y:t.scrollLeft,top:t.scrollTop,left:t.scrollLeft,bottom:t.scrollTop+window.innerHeight,right:t.scrollLeft+window.innerWidth,height:window.innerHeight,width:window.innerWidth}};e.getDefaultElementRect=()=>({x:0,y:0,width:0,height:0,top:0,right:0,bottom:0,left:0});e.getAbsoluteElementOffset=t=>{var e,n;let i=null!==(e=null==t?void 0:t.offsetLeft)&&void 0!==e?e:0,r=null!==(n=null==t?void 0:t.offsetTop)&&void 0!==n?n:0,o=null==t?void 0:t.offsetParent;for(;o;)r+=o.offsetTop||0,i+=o.offsetLeft||0,o=o.offsetParent;return{top:r,left:i}}},4396:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GridBase=void 0;const i=n(8863),r=n(869),o=n(9196),s=n(4264),a=n(193),l=n(2667),c=n(8173),h=n(1066),u=n(1089),d=n(4264),p=n(8398),f="k-grid-header-wrap",g="k-grid-footer-wrap",m="k-grid-content",y="mousedown";class v extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,rowDraggable:!1,draggedItemsHint:"",componentSelector:"",draggableIcons:{cancelIconMarkup:"",insertMiddleIconMarkup:"",plusIconMarkup:""},jsinterop:{removeFocus:"",blur:"",incellEditBlur:"",rowDragStart:"",rowDrop:"",rangeSelectEnd:""}},this.onRangeSelectEnd=t=>{this.invokeMethodAsync(this.options.jsinterop.rangeSelectEnd,t)},this.onMouseDown=t=>{t.shiftKey&&t.preventDefault()},this.onNavigationRemoveFocus=()=>{this.removeFocus()},this.onNavigationBlur=t=>{this.blur(t)},this.onIncellEditBlur=t=>{this.incellEditBlur(t)},this.createHint=t=>{const e=this.getDragHintText(t);return(0,a.convertToHtml)(`<div class="k-header k-drag-clue">\n                <span class="k-icon k-font-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-font-icon k-icon-modifier"></span>\n                </span>\n                ${e}\n            </div>`)},this.getDragHintText=t=>{if((0,s.hasClass)("k-selected",t.closest("tr"))){const t=this.element.querySelectorAll("tr.k-table-row.k-selected").length;if(t>1)return t+" "+this.options.draggedItemsHint}return t.closest("td").getAttribute("data-drag-clue-text")},this.onItemDragStart=t=>{this.invokeMethodAsync(this.options.jsinterop.rowDragStart,{sourceIndex:this.getDropItemIndex(t.sourceItem)})},this.onItemDrop=t=>{this.invokeMethodAsync(this.options.jsinterop.rowDrop,{destinationIndex:t.destinationIndex,destinationComponentId:t.destinationComponentId,dotNetInstance:this.getDestinationComponent(t.destinationElement),dropPosition:t.dropPosition})},this.setSearchBoxValue=t=>{let e=this.element.querySelector(".k-grid-search input");e&&(e.value=t)},this.extendOptions(e),this.content=this.getChildElement(m),this.header=this.getChildElement(f),this.adjustScrollbarPadding(),this.bindEvents(),this.createNavigationService(),this.setSearchBoxValue(e.searchString),this.setRowDraggable(e.rowDraggable)}setRowDraggable(t){t?this.createRowDraggable():this.destroyRowDraggable()}setDragCellSelection(t){t?this.initMarquee():this.destroyMarquee()}setOptions(t){this.options.rowDraggable!==t.rowDraggable&&this.setRowDraggable(t.rowDraggable),this.options.dragToSelect!==t.dragToSelect&&this.setDragCellSelection(t.dragToSelect),this.extendOptions(t)}getChildElement(t){return this.element.getElementsByClassName(t)[0]}destroy(){this.destroyRowDraggable(),this.unbindEvents(),this.destroyNavigationService(),this.content=null,this.header=null,super.destroy()}adjustScrollbarPadding(){(0,d.setScrollbarSizeCssVariables)()}bindEvents(){this.createContentScrollSync(),this.options.dragToSelect&&this.initMarquee(),this.content.addEventListener(y,this.onMouseDown)}unbindEvents(){this.destroyContentScrollSync(),this.content.removeEventListener(y,this.onMouseDown)}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync();const t=this.element.querySelector((0,u.toClassSelector)(g));this.contentScrollSync=new l.ScrollSync(this.content,{horizontal:!0,vertical:!1,syncFromConnections:this.options.navigable,connections:[this.header,t]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null)}createNavigationService(){this.navigationService=new c.NavigationService(this.element,{navigable:this.options.navigable,incellEdit:this.options.incellEdit,columnVirtualization:this.options.columnVirtualization,virtualScrollDelay:this.options.virtualScrollDelay,events:{removeFocus:this.onNavigationRemoveFocus,blur:this.onNavigationBlur,incellEditBlur:this.onIncellEditBlur}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}focusCell(t){this.navigationService.focusCell(t)}focusEditable(t){this.navigationService.focusEditable(t)}focusFirstFocusable(t){this.navigationService.focusFirstFocusable(t)}scrollAndFocusFirstCell(t){this.navigationService.scrollAndFocusFirstCell(t)}scrollAndFocusLastCell(t){this.navigationService.scrollAndFocusLastCell(t)}scrollContent(t){(0,a.hasValue)(t.scrollLeft)&&(this.content.scrollLeft=t.scrollLeft),(0,a.hasValue)(t.scrollTop)&&(this.content.scrollTop=t.scrollTop)}removeFocus(){this.invokeMethodAsync(this.options.jsinterop.removeFocus)}blur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.blur,t)}incellEditBlur(t){this.invokeDefferedMethodAsync(this.options.jsinterop.incellEditBlur,t)}invokeDefferedMethodAsync(t,e){r.Platform.webAssembly?setTimeout((()=>{e.deferred=!0,document.body.contains(e.originalEvent.target)&&this.invokeMethodAsync(t,e)}),1):this.invokeMethodAsync(t,e)}createRowDraggable(){this.element&&(this.rowDraggable=new h.RowDraggable(this.element,{group:".k-grid-table",filter:"[data-row-drag-handle=true]",itemSelector:"tr.k-table-row",draggableIcons:this.options.draggableIcons,hint:this.createHint,events:{itemDragStart:this.onItemDragStart,itemDrop:this.onItemDrop}}))}destroyRowDraggable(){this.rowDraggable&&this.rowDraggable.destroy()}initMarquee(){this.marquee=new p.SelectionMarquee(this.content,{events:{rangeSelectEnd:this.onRangeSelectEnd}})}destroyMarquee(){this.marquee&&this.marquee.destroy()}getDestinationComponent(t){const e=(0,o.getComponentInstanceBySelector)(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropItemIndex(t){const e=t.closest("tr.k-table-row");return t&&e?t.closest(this.options.dropOptions.dropClueEmptySelector)?"-1":e.getAttribute("data-render-row-index"):""}getId(){return this.element.id}getDropSettings(){return this.options.dropOptions}}e.GridBase=v},8173:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationService=void 0;const i=n(8863),r=n(6724),o=n(4264),s=n(5027),a=n(193),l="data-col-index",c="data-render-row-index",h="nearest",u=Array.from,d="right",p="left";class f extends i.Component{constructor(t,e){super(t,e),this.isContentClicked=!1,this.options={navigable:!1,incellEdit:!1,columnVirtualization:!1,virtualScrollDelay:66.66666666666667,events:{removeFocus:null,blur:null,incellEditBlur:null},rowSelector:t=>`tr[data-render-row-index='${t}']`,columnSelector:t=>`[${l}='${t}']`,cellNavigationSelector:t=>`[data-cell-navigation-id='${t}']`,groupRowClass:"k-grouping-row",headerClass:"k-grid-header",contentClass:"k-grid-content",editRowClass:"k-grid-edit-row",filterRowClass:"k-filter-row",lockedHeaderClass:"k-grid-header-sticky"},this.onClick=t=>{"input"===t.target.tagName.toLowerCase()&&t.stopPropagation()},this.onKeyDown=t=>{const e=this.options.navigable&&[s.KeyCode.ARROWRIGHT,s.KeyCode.ARROWLEFT,s.KeyCode.ARROWUP,s.KeyCode.ARROWDOWN,s.KeyCode.PAGE_DOWN,s.KeyCode.PAGE_UP,s.KeyCode.HOME,s.KeyCode.END,s.KeyCode.SPACE].includes(t.keyCode),n=t.keyCode===s.KeyCode.SPACE&&(0,o.hasClass)("k-checkbox",t.target),i=e&&!n&&(t.target.matches("td")||t.target.matches("th")),r=t.keyCode===s.KeyCode.TAB&&this.options.incellEdit&&t.target.closest(".k-grid-edit-row");(i||r)&&t.preventDefault()},this.onPointerUp=()=>{this.isContentClicked=!1},this.onPointerDown=t=>{(0,o.hasClass)("k-table-td",t.target)&&this.element.contains(t.target)&&(this.isContentClicked=!0)},this.onFocusOut=t=>{var e,n,i,r;const o=t.target.closest(`[${l}]`),s=o?o.closest("tr"):null,a=s&&s.hasAttribute(c)?parseInt(s.getAttribute(c)):null,h=o&&o.hasAttribute(l)?parseInt(o.getAttribute(l)):null;let u={originalEvent:t};if(null!==a&&null!==h&&(u.rowIndex=a,u.columnIndex=h,u.isChildFocused=o&&!t.target.hasAttribute(l)),this.options.incellEdit&&t.target&&t.target.closest(".k-grid-edit-cell")){const o=document.activeElement===document.body,s=t.relatedTarget&&!(null===(e=this.element)||void 0===e?void 0:e.contains(t.relatedTarget))&&!(null===(n=t.relatedTarget)||void 0===n?void 0:n.closest(".k-popup")),a=t.relatedTarget&&t.relatedTarget.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")&&(null===(i=this.element)||void 0===i?void 0:i.contains(null===(r=t.relatedTarget)||void 0===r?void 0:r.closest(".k-detail-row,.k-grid-search,.k-filter-row,.k-pager")));(!t.relatedTarget&&o||s||a)&&!this.isContentClicked&&this.triggerIncellEditBlur(u)}this.options.navigable&&(!t.relatedTarget||this.element.contains(t.relatedTarget)&&!t.relatedTarget.closest(".k-detail-row,.k-grid-toolbar,.k-pager")||t.relatedTarget.closest(".k-window")||t.relatedTarget.closest(".k-grid-filter-popup")?this.triggerBlur(u):this.triggerRemoveFocus())},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("pointerdown",this.onPointerDown),document.addEventListener("pointerup",this.onPointerUp),this.options.navigable&&this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("pointerdown",this.onPointerDown),document.removeEventListener("pointerup",this.onPointerUp),this.options.navigable&&this.element.removeEventListener("click",this.onClick)}focusCell({rowIndex:t,columnIndex:e,isChildFocused:n,cellNavigationId:i,keyboardEventArgs:r,scrollOffsetBeforeFocus:c,scrollIntoView:h}){const u=this.getRow(t);let d=i>=0?this.element.querySelector(this.options.cellNavigationSelector(i)):null;if(d)(0,o.focusElement)(d);else if(u){if((0,o.hasClass)("k-grouping-row",u))d=u.querySelector("td[role='gridcell']:not(.k-group-cell)");else if(d=u.querySelector(this.options.columnSelector(e)),!d){if(this.hasNavigableVirtualColumns())return;let t=u.querySelector(`[${l}]`);parseInt(t.attributes[`${l}`].value)>e&&(d=t)}if(d)if(this.hasNavigableVirtualColumns()){const i=this.hasEditRow(),s=this.isCellInFilterRow(t,e);if(n&&(i||s))this.focusEditable({rowIndex:t,columnIndex:e});else{const t=this.getKeyboardDirection(r);this.scrollIntoView(d,t),(0,o.focusElement)(d)}}else(0,o.focusElement)(d,!h)}else{if(!(0,a.hasValue)(r))return;let n=r.key===s.Key.ARROWUP?-1*c:c;const i=this.getContentElement();if(!(0,a.hasValue)(i))return;let o=i.scrollTop+n;this.scrollAndFocusCell({scrollLeft:null,scrollTop:o,rowIndex:t,columnIndex:e})}}selectElement(t){t instanceof HTMLElement&&(0,a.isFunction)(t.select)&&t.select()}selectAndFocusElement(t){t!==document.activeElement&&(this.selectElement(t),(0,o.focusElement)(t))}focusEditable({rowIndex:t,columnIndex:e}){clearTimeout(this.selectAndFocusTimeout),setTimeout((()=>{const n=this.getCell(t,e);let i=(0,o.findEditable)(n,!1);if((0,a.isHtmlElement)(i)&&i.tabIndex<0){const t=(0,o.findFocusable)(n,!1);i=t||n}const r=(0,o.isWholeElementInView)(n,this.getContentElement());this.scrollIntoView(n),this.options.columnVirtualization&&!r?this.selectAndFocusTimeout=setTimeout((()=>{this.selectAndFocusElement(i)}),2*this.options.virtualScrollDelay):this.selectAndFocusElement(i)}),1)}focusFirstFocusable({rowIndex:t,columnIndex:e}){setTimeout((()=>{this.focusCellChild(t,e,o.findFocusable)}),1)}focusCellChild(t,e,n=o.findFocusable){const i=this.getCell(t,e),r=i?n(i,!1):null;(0,o.focusElement)(r)}getRow(t){const e=this.element.parentElement.closest(".k-grid");if(e&&e!==this.element){return this.element.querySelector(this.options.rowSelector(t))}return Array.from(this.element.querySelectorAll(this.options.rowSelector(t))).filter((t=>null===t.closest(".k-detail-row")))[0]}getCell(t,e){const n=this.getRow(t);if(n){return n.querySelector(this.options.columnSelector(e))}}triggerRemoveFocus(){this.trigger("removeFocus")}triggerBlur(t){this.trigger("blur",t)}triggerIncellEditBlur(t){this.trigger("incellEditBlur",t)}scrollIntoView(t,e){if(this.preventScrollIntoView)return void(this.preventScrollIntoView=!1);const n=t.closest((0,a.toAttrQuerySelector)(l)),i=n?n.closest("tr"):null;if(!t||!n||(0,r.isLockedElement)(n)||!i)return;const s=this.getClosestOverlappingLockedCell(n),c=this.hasSpaceToScrollIntoView(n),h=(0,o.isWholeElementInView)(n,this.getContentElement());s&&c?(h||this.scrollElementIntoView(n),this.scrollToLockedCell(s,n,e)):!this.hasLockedColumns()||h||c?s||!c?this.scrollToCell(n):this.scrollElementIntoView(t):this.scrollToCell(n)}scrollToCell(t){const e=this.getContentElement(),n=(0,o.findPreviousSiblings)(t,(t=>!(0,r.isLockedElement)(t))),i=this.getTotalCellsWidth(n);i!==e.scrollLeft&&(this.preventScrollIntoView=!0,e.scrollLeft=i)}scrollToLockedCell(t,e,n){const i=this.getContentElement(),r=this.getIntersectionOffset(e,t,n);0!==r&&(this.preventScrollIntoView=!0,i.scrollLeft+=r)}scrollElementIntoView(t,e={horizontalAlign:h,verticalAlign:h}){t&&t.scrollIntoView&&t.scrollIntoView({inline:e.horizontalAlign||h,block:e.verticalAlign||h})}scrollAndFocusFirstCell(t){this.scrollAndFocusCell({scrollLeft:0,scrollTop:null,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusLastCell(t){const e=this.getContentElement(),n=(0,o.getMaxScrollLeft)(e);this.scrollAndFocusCell({scrollLeft:n,scrollTop:null,rowIndex:t.rowIndex,columnIndex:t.columnIndex})}scrollAndFocusCell({scrollLeft:t,scrollTop:e,rowIndex:n,columnIndex:i}){const r=this.getContentElement();(0,a.hasValue)(r)&&((0,a.hasValue)(t)&&(r.scrollLeft=t),(0,a.hasValue)(e)&&(r.scrollTop=e),setTimeout((()=>{this.focusCell({rowIndex:n,columnIndex:i})}),2*this.options.virtualScrollDelay))}getHeaderElement(){return this.element.querySelector((0,a.toClassSelector)(this.options.headerClass))}getContentElement(){return this.element.querySelector((0,a.toClassSelector)(this.options.contentClass))}hasEditRow(){const t=this.getContentElement();return t&&t.querySelector((0,a.toClassSelector)(this.options.editRowClass))}isCellInFilterRow(t,e){const n=this.getHeaderElement(),i=n?n.querySelector((0,a.toClassSelector)(this.options.filterRowClass)):null;if(!(0,a.hasValue)(i))return!1;if((0,a.parseAttrToInt)(c,i)===t){const t=u(i.querySelectorAll(`th[${l}]`));return(0,a.hasValue)(t[e])}return!1}hasLockedColumns(){const t=this.getHeaderElement();return t&&t.querySelector((0,a.toClassSelector)(this.options.lockedHeaderClass))}hasNavigableVirtualColumns(){return this.options.navigable&&this.options.columnVirtualization}hasSpaceToScrollIntoView(t){const e=(0,o.getSiblings)(t).filter(r.isLockedElement),n=this.getContentElement();return this.getTotalCellsWidth(e)+t.getBoundingClientRect().width<n.clientWidth}getTotalCellsWidth(t){return t.reduce(((t,e)=>t+e.getBoundingClientRect().width),0)}getClosestOverlappingLockedCell(t){if(!this.hasLockedColumns())return null;const e=(0,o.findPreviousSiblings)(t),n=(0,o.findNextSiblings)(t),i=e.concat(n).filter(r.isLockedElement);let s=null;for(const e of i)if((0,o.areElementsOverlapping)(t,e)){s=e;break}return s}getKeyboardDirection(t){if(!t)return null;const e=t.key;return e===s.Key.ARROWRIGHT||e===s.Key.END?d:e===s.Key.ARROWLEFT||e===s.Key.HOME?p:null}getIntersectionOffset(t,e,n){if(!(0,o.haveSameParent)(t,e))return 0;const i=t.getBoundingClientRect(),r=e.getBoundingClientRect(),s=r.left<=i.left&&r.right<=i.right,a=i.left<=r.left&&i.right<=r.right,l=r.left<i.left&&r.right>i.right,c=i.left<r.left&&i.right>r.right,h=i.left===r.left&&i.right===r.right,u=(0,o.getIntersectionRect)(t,e).width,f=i.width,g=r.width;let m=0;return h?n===p?m=-1*u:n===d&&(m=u):s?m=-1*u:a?m=-1*(f-u+g):l?m=r.right-i.right+f:c&&(m=-1*(r.right-i.left)),m}}e.NavigationService=f},8398:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionMarquee=void 0;const i=n(8863),r=n(193),o=n(4264),s="pointerdown",a="pointermove",l="pointerup",c="pointercancel",h=(0,r.toDataAttr)("cell-selection-index"),u=(0,r.toDataAttr)("index"),d="k-user-select-none",p={topLeft:{x:4,y:4},topRight:{x:-4,y:4},bottomLeft:{x:4,y:-4},bottomRight:{x:-4,y:-4}};class f extends i.Component{constructor(t,e){super(t,e),this.onPointerDown=t=>{const e=t.target.closest(".k-table-td");e&&(!e.hasAttribute(h)||(0,o.hasAnyClass)(["k-hierarchy-cell","k-group-cell","k-drag-cell"],e)||(0,o.hasClass)("k-grouping-row",e.closest("tr")))||(t.stopPropagation(),document.removeEventListener(a,this.onPointerMove),document.removeEventListener(l,this.onPointerUp),document.removeEventListener(c,this.onPointerCancel),document.addEventListener(a,this.onPointerMove),document.addEventListener(l,this.onPointerUp),document.addEventListener(c,this.onPointerCancel),this.setState({pointerDownEvent:t,selectionStarted:!1,absoluteElementOffset:(0,o.getAbsoluteElementOffset)(this.element)}))},this.onPointerMove=t=>{const e=this.state.pointerDownEvent;if(!e)return document.removeEventListener(a,this.onPointerMove),document.removeEventListener(l,this.onPointerUp),void document.removeEventListener(c,this.onPointerCancel);if(this.state.selectionStarted){this.initMarqueeElement();const n=this.getMarqueeQuadrant(t.pageX,t.pageY,e.pageX,e.pageY),i=this.state.absoluteElementOffset;let s=Math.min(t.pageX,e.pageX),a=Math.min(t.pageY,e.pageY),l=i.left,c=i.top;const h=this.element.getBoundingClientRect(),u=Math.abs(t.pageX-e.pageX),d=Math.abs(t.pageY-e.pageY),f={width:(0,o.getScrollBarHeight)(this.element),height:(0,o.getScrollBarWidth)(this.element)},g=t.pageY<c,m=t.pageY>c+h.height-f.height,y=t.pageX<l,v=t.pageX>l+h.width-f.width,b=m||g||y||v;if(this.state.isMarqueeOutsideContainer=b,b)return;n&&(s+=p[n].x,a+=p[n].y),this.marqueeElement.style.left=(0,r.toPixel)(s),this.marqueeElement.style.top=(0,r.toPixel)(a),this.marqueeElement.style.width=(0,r.toPixel)(u),this.marqueeElement.style.height=(0,r.toPixel)(d)}else{if(!((0,r.getDistance)({x:t.pageX,y:t.pageY},{x:e.pageX,y:e.pageY})>4))return;this.state.selectionStarted=!0}},this.onPointerUp=t=>{var e;if(document.removeEventListener(a,this.onPointerMove),document.removeEventListener(l,this.onPointerUp),document.removeEventListener(c,this.onPointerCancel),!this.state.selectionStarted||this.state.isMarqueeOutsideContainer)return this.destroyMarqueeElement(),void(this.state.pointerDownEvent=null);const n=null===(e=this.state.pointerDownEvent)||void 0===e?void 0:e.target;if(!n)return;const i=(0,r.parseAttrToInt)(h,n),o=(0,r.parseAttrToInt)(u,n.closest("tr")),s=(0,r.parseAttrToInt)(h,t.target),d=(0,r.parseAttrToInt)(u,t.target.closest("tr")),p={startColumnIndex:i,startRowIndex:o,endColumnIndex:s,endRowIndex:d};this.resetState(),this.destroyMarqueeElement(),i>=0&&s>=0&&o>=0&&d>=0&&this.triggerRangeSelectEnd(p)},this.onPointerCancel=t=>{document.removeEventListener(a,this.onPointerMove),document.removeEventListener(l,this.onPointerUp),document.removeEventListener(c,this.onPointerCancel),this.state.pointerDownEvent&&this.state.selectionStarted&&this.onPointerUp(t)},this.extendOptions(e),this.resetState(),this.bindEvents(),(0,o.addClass)(d,this.element)}setState(t){this.state=(0,r.extend)(this.state||{},t)}resetState(){this.setState({selectionStarted:!1,pointerDownEvent:null})}triggerRangeSelectEnd(t){this.trigger("rangeSelectEnd",t)}initMarqueeElement(){this.marqueeElement||(this.marqueeElement=(0,r.convertToHtml)('\n            <div class="k-marquee">\n                <div class="k-marquee-color"></div>\n            </div>\n        '),(this.element.ownerDocument||document).body.appendChild(this.marqueeElement))}destroyMarqueeElement(){this.marqueeElement&&((this.element.ownerDocument||document).body.removeChild(this.marqueeElement),this.marqueeElement=null)}bindEvents(){this.element.addEventListener(s,this.onPointerDown)}unbindEvents(){this.element.removeEventListener(s,this.onPointerDown),document.removeEventListener(a,this.onPointerMove),document.removeEventListener(l,this.onPointerUp),document.removeEventListener(c,this.onPointerCancel)}destroy(){(0,o.removeClass)(d,this.element),this.unbindEvents(),this.destroyMarqueeElement()}getMarqueeQuadrant(t,e,n,i){const r=t<n,o=t>n,s=e<i,a=e>i;return r&&s?"topLeft":r&&a?"bottomLeft":o&&s?"topRight":"bottomRight"}}e.SelectionMarquee=f},6724:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isLockedElement=void 0;const i=n(4264);e.isLockedElement=t=>(0,i.hasAnyClass)(["k-grid-content-sticky","k-grid-header-sticky","k-grid-footer-sticky"],t)},1843:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(8863),e),i.__exportStar(n(9196),e),i.__exportStar(n(4264),e),i.__exportStar(n(193),e),i.__exportStar(n(8980),e),i.__exportStar(n(5574),e),i.__exportStar(n(869),e),i.__exportStar(n(4396),e),i.__exportStar(n(1925),e),i.__exportStar(n(2667),e),i.__exportStar(n(4068),e)},8980:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=void 0,e.closestDivisibleTo=function(t,e){const i=t%e,r=t-i,o=t+e-i,s=function(t){let e=0;const n=t.toString().split(".")[1];n&&(e=n.length);return e}(e);if(r+o<2*t)return n(o,s);return n(r,s)},e.roughlyEqual=function(t,e,{decimals:n=0}){if(!t||!e)return;return t.toFixed(n)===e.toFixed(n)};e.clamp=(t,e,n)=>Math.min(n,Math.max(e,t));const n=(t,e)=>parseFloat(t.toFixed(e))},7591:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormKeyTrap=e.disableFormTabKeyTrap=e.enableFormTabKeyTrap=void 0;const i=n(5027),r=n(4264);e.enableFormTabKeyTrap=t=>{o&&o.instanceMap&&(0,r.runInNextFrameAsync)((()=>{const e=(0,r.getElementByDataId)(t);if(e&&!o.instanceMap[t]){const n=new o(e);o.instanceMap[t]=n,n.enableKeyTrap()}}))};e.disableFormTabKeyTrap=t=>{if(!o||!o.instanceMap)return;const e=o.instanceMap[t];e&&e.disableTabKeyTrap()};class o{constructor(t){this.disableTabKeyTrap=()=>{this.firstElement&&this.firstElement.removeEventListener("keydown",this.onFirstElementKeyDown),this.lastElement&&this.lastElement.removeEventListener("keydown",this.onLastElementKeyDown)},this.onFirstElementKeyDown=t=>{t.keyCode===i.KeyCode.TAB&&t.shiftKey&&(t.preventDefault(),this.lastElement&&this.lastElement.focus())},this.onLastElementKeyDown=t=>{t.keyCode!==i.KeyCode.TAB||t.shiftKey||(t.preventDefault(),this.firstElement&&this.firstElement.focus())},t&&(this.element=t,this.firstElement=(0,r.findFocusable)(t,!1),this.lastElement=(t=>{if(t.length)return t[t.length-1]})(t.querySelectorAll("button, .k-button")))}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.firstElement&&this.lastElement&&(this.firstElement.addEventListener("keydown",this.onFirstElementKeyDown),this.lastElement.addEventListener("keydown",this.onLastElementKeyDown))}}e.FormKeyTrap=o,o.instanceMap={}},5027:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlphanumericKeyCodes=e.CharactersKeyCodes=e.NumbersKeyCodes=e.KeyModifiers=e.Key=e.KeyCode=void 0,e.KeyCode={DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,ARROWLEFT:37,ARROWUP:38,ARROWRIGHT:39,ARROWDOWN:40,SPACE:32,END:35,HOME:36,PAGE_UP:33,PAGE_DOWN:34,PAGEUP:33,PAGEDOWN:34,F10:121,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,Number0:48,Number1:49,Number2:50,Number3:51,Number4:52,Number5:53,Number6:54,Number7:55,Number8:56,Number9:57,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105},e.Key={DELETE:"Delete",BACKSPACE:"Backspace",TAB:"Tab",ENTER:"Enter",ESC:"Escape",ARROWLEFT:"ArrowLeft",ARROWUP:"ArrowUp",ARROWRIGHT:"ArrowRight",ARROWDOWN:"ArrowDown",SPACE:"Space",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown",F10:"F10"},e.KeyModifiers={CTRL:"CTRL",ALT:"ALT",SHIFT:"SHIFT",META:"META"},e.NumbersKeyCodes=[e.KeyCode.Number0,e.KeyCode.Number1,e.KeyCode.Number2,e.KeyCode.Number3,e.KeyCode.Number4,e.KeyCode.Number5,e.KeyCode.Number6,e.KeyCode.Number7,e.KeyCode.Number8,e.KeyCode.Number9,e.KeyCode.NumPad0,e.KeyCode.NumPad1,e.KeyCode.NumPad2,e.KeyCode.NumPad3,e.KeyCode.NumPad4,e.KeyCode.NumPad5,e.KeyCode.NumPad6,e.KeyCode.NumPad7,e.KeyCode.NumPad8,e.KeyCode.NumPad9],e.CharactersKeyCodes=[e.KeyCode.A,e.KeyCode.B,e.KeyCode.C,e.KeyCode.D,e.KeyCode.E,e.KeyCode.F,e.KeyCode.G,e.KeyCode.H,e.KeyCode.I,e.KeyCode.J,e.KeyCode.K,e.KeyCode.L,e.KeyCode.M,e.KeyCode.N,e.KeyCode.O,e.KeyCode.P,e.KeyCode.Q,e.KeyCode.R,e.KeyCode.S,e.KeyCode.T,e.KeyCode.U,e.KeyCode.V,e.KeyCode.W,e.KeyCode.X,e.KeyCode.Y,e.KeyCode.Z],e.AlphanumericKeyCodes=e.NumbersKeyCodes.concat(e.CharactersKeyCodes)},5574:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(4767),e),i.__exportStar(n(4433),e),i.__exportStar(n(5027),e),i.__exportStar(n(2596),e),i.__exportStar(n(7591),e)},4767:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationService=void 0;const i=n(4433),r="keydown";e.NavigationService=class{constructor(t){this.onNavigate=t=>{var e;const n=new i.Shortcut(t),r=1===(null===(e=n.name)||void 0===e?void 0:e.length),o=this.shortcuts.find((t=>i.Shortcut.equals(t,n)))||r&&this.shortcuts.find((t=>"printableKey"===t.name));o&&this.callbacks[o.name].forEach((e=>{e(n,t)||(t.preventDefault(),t.stopPropagation())}))},this.element=t,this.callbacks={},this.shortcuts=[],this.bindEvents()}destroy(){this.unbindEvents(),this.element=this.callbacks=this.shortcuts=null}bindEvents(){this.element.addEventListener(r,this.onNavigate)}unbindEvents(){this.element.removeEventListener(r,this.onNavigate)}bind(t,e){const n=Array.isArray(t)?t:[t];for(const t of n){const n=new i.Shortcut(t);this.callbacks[n.name]=this.callbacks[n.name]||[],this.shortcuts.push(n),this.callbacks[n.name].push(e)}}}},4433:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Shortcut=void 0;const i=n(5027);e.Shortcut=class{static equals(t,e){return t.ctrl===e.ctrl&&t.alt===e.alt&&t.shift===e.shift&&t.code===e.code}constructor(t){"string"==typeof t?this._initFromString(t):t instanceof KeyboardEvent&&this._initFromEvent(t)}_initFromString(t){const e=t.toUpperCase().split(/[\s+]/u);for(const t of e)switch(t){case i.KeyModifiers.CTRL:this.ctrl=!0;break;case i.KeyModifiers.ALT:this.alt=!0;break;case i.KeyModifiers.SHIFT:this.shift=!0;break;default:this.code=this._toNormalizedKeyCode(t)}this.name=t}_initFromEvent(t){this.name="",t.ctrlKey&&(this.ctrl=t.ctrlKey,this.name+=`${i.KeyModifiers.CTRL} `),t.shiftKey&&(this.shift=t.shiftKey,this.name+=`${i.KeyModifiers.SHIFT} `),t.altKey&&(this.alt=t.altKey,this.name+=`${i.KeyModifiers.ALT} `),this.code=t.keyCode,this.name+=t.key||""}_toNormalizedKeyCode(t){let e=i.KeyCode[t.toUpperCase()];if(!e){const n=parseInt(t);e=i.AlphanumericKeyCodes.includes(n)?n:null}return e}}},2596:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabKeyTrap=void 0;const i=n(4264),r=n(5027);e.TabKeyTrap=class{constructor(t,e=i.FOCUSABLE_ELEMENTS_SELECTOR){this.disableTabKeyTrap=()=>{this.element&&this.element.removeEventListener("keydown",this.onKeyDown)},this.onKeyDown=t=>{this.tryFindEdgeElements()?t.keyCode===r.KeyCode.TAB&&(t.shiftKey?document.activeElement===this.firstElement&&(this.lastElement.focus(),t.preventDefault()):document.activeElement===this.lastElement&&(this.firstElement.focus(),t.preventDefault())):this.element.removeEventListener("keydown",this.onKeyDown)},this.element=t,this.focusableElementsSelector=e}destroy(){this.disableTabKeyTrap(),this.element=null,this.firstElement=null,this.lastElement=null}enableKeyTrap(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}tryFindEdgeElements(){return this.findEdgeElements(),this.firstElement&&this.lastElement}findEdgeElements(){let t=this.element.querySelectorAll(this.focusableElementsSelector);this.firstElement=t[0],this.lastElement=t[t.length-1]}}},869:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Platform=void 0;e.Platform=class{static get webAssembly(){return Boolean(window.Blazor&&window.Blazor.platform)}static get serverSideBlazor(){return Boolean(window.Blazor&&window.Blazor.reconnect)}static get firefox(){return Boolean(/Firefox/i.test(navigator.userAgent))}}},2667:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ScrollSync=void 0;const i=n(8863),r=n(193),o=n(193),s=n(4264),a="scroll",l="scrollLeft",c="horizontal",h="vertical",u="wheel";class d extends i.Component{constructor(t,e){super(t,e),this.options={horizontal:!0,vertical:!0,minScrollDelta:1,syncFromConnections:!1,connections:[],allowScrollWithoutScrollbar:!1},this.onWheel=t=>{if(!this.options.allowScrollWithoutScrollbar||!this.options.vertical||0===t.wheelDeltaY)return;const e=-1*t.wheelDeltaY,n=t.currentTarget,i=this.options.syncFromConnections?this.scrollableElements:this.connections;n.scrollTop+=e,i.filter((t=>t!==n)).forEach((t=>{this.syncScroll(n,t,{orientation:h})}))},this.onScroll=t=>{const e=t.currentTarget;(this.options.syncFromConnections?this.scrollableElements:this.connections).filter((t=>t!==e)).forEach((t=>{this.syncScroll(e,t,{orientation:c}),this.syncScroll(e,t,{orientation:h})}))},this.extendOptions(e),this.connections=this.options.connections.filter(r.isHtmlElement),this.scrollableElements=this.getScrollableElements(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.forEachScrollableElement((t=>{t.addEventListener(a,this.onScroll),this.options.allowScrollWithoutScrollbar&&this.options.vertical&&!(0,s.isVerticallyScrollable)(t)&&t.addEventListener(u,this.onWheel)}))}unbindEvents(){this.forEachScrollableElement((t=>{t.removeEventListener(a,this.onScroll),t.removeEventListener(u,this.onWheel)}))}syncScroll(t,e,{orientation:n=c}){const i=n===c?l:"scrollTop",r=i===l?"dataScrollLeft":"dataScrollTop",o=t[i],a=t[r]||0,h=e[i],u=e[r],d=a!==o||u!==o,p=n===c?(0,s.isHorizontallyScrollable)(this.element):(0,s.isVerticallyScrollable)(this.element);if(this.options[n]&&d&&p){const t=Math.abs(a-o),n=Math.abs(h-o),s=this.options.minScrollDelta;(t>=s||n>=s)&&(e[r]=o,e[i]=o)}}getScrollableElements(){let t=[];return this.options.syncFromConnections&&(t=this.connections),[this.element,...t]}forEachScrollableElement(t){this.forEachElement(this.scrollableElements,t)}forEachConnection(t){this.forEachElement(this.connections,t)}forEachElement(t=[],e){t.forEach((t=>{(0,r.isHtmlElement)(t)&&(0,o.isFunction)(e)&&e(t)}))}}e.ScrollSync=d},6317:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initContextMenu=function(t,e){if(!(0,r.getComponentInstance)(t)){const n=new i.ContextMenu(null,e);(0,r.setComponentInstance)(t,n)}};const i=n(6219),r=n(1843)},6219:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContextMenu=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={selector:"",popupId:""},this.onContextMenu=t=>{t.preventDefault(),this.activeElement=t.target,this.openPopup(t.pageX,t.pageY)},this.onPopupKeyDown=t=>{t.key===i.Key.ESC&&(this.closePopup(),this.activeElement&&this.activeElement.focus())},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.anchors=null}bindEvents(){this.anchors=document.querySelectorAll(this.options.selector),this.anchors.forEach((t=>{t.addEventListener("contextmenu",this.onContextMenu)}));(0,i.getElementByDataId)(this.options.popupId).addEventListener("keydown",this.onPopupKeyDown)}unbindEvents(){this.anchors.forEach((t=>{t.removeEventListener("contextmenu",this.onContextMenu)}))}openContextMenu(t){const e=t.clientX+window.scrollX,n=t.clientY+window.scrollY;this.openPopup(e,n)}focusFirstMenuItem(){const t=this.getPopup();if(!t)return;const e=t.element.querySelector(".k-context-menu .k-item");e&&e.focus()}openPopup(t,e){const n=this.getPopup();n.openAsync(null,t,e),this.activeElement?n.setZIndex(this.activeElement):n.openAboveSiblings()}closePopup(){this.getPopup().closeAsync()}getPopup(){return(0,i.getComponentInstance)(this.options.popupId)}}e.ContextMenu=r},3059:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6317),e)},3167:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCalendar=function(t,e){(0,r.initComponent)(i.Calendar,t,e)};const i=n(7469),r=n(1843)},7469:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Calendar=void 0;const i=n(1843),r=n(4264),o=n(9196),s="keydown",a="mousedown",l="click",c="focus",h="focusout",u=[i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.SPACE],d=[i.KeyCode.PAGE_UP,i.KeyCode.PAGE_DOWN];class p extends i.Component{constructor(t,e){super(t,e),this.onKeyDown=t=>{const e=u.concat(i.KeyCode.ENTER);d.includes(t.keyCode)||e.includes(t.keyCode)?t.preventDefault():(t.shiftKey||t.ctrlKey)&&t.stopPropagation()},this.onMouseDown=t=>{t.preventDefault()},this.onClick=t=>{const e=t.currentTarget;e&&e.focus()},this.onFocus=()=>{this.invokeMethodAsync(this.options.jsinterop.focus)},this.onFocusout=t=>{t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)},this.extendOptions(e),this.tables=this.element.querySelectorAll("table"),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.tables=this.navigationService=null}bindEvents(){[...this.tables].forEach((t=>{t.addEventListener(a,this.onMouseDown),t.addEventListener(l,this.onClick),t.addEventListener(s,this.onKeyDown,!0),t.addEventListener(c,this.onFocus),t.addEventListener(h,this.onFocusout)}))}unbindEvents(){[...this.tables].forEach((t=>{t.removeEventListener(a,this.onMouseDown),t.removeEventListener(l,this.onClick),t.removeEventListener(s,this.onKeyDown,!0),t.removeEventListener(c,this.onFocus),t.removeEventListener(h,this.onFocusout)}))}focusTable(){const t=this.tables[0],e=this.isPickerAnimationInProgress();t&&(e?setTimeout((()=>{(0,r.focusInNextFrameAsync)(t)}),300):(0,r.focusInNextFrameAsync)(t))}isPickerAnimationInProgress(){const t=(0,o.getComponentInstanceBySelector)(this.element,".k-child-animation-container");return!(!t||!t.isAnimationInProgress)&&t.isAnimationInProgress()}}e.Calendar=p},6945:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDateInput=function(t,e){(0,r.initComponent)(i.DateInput,t,e)},e.updateDateInputValue=function(t,e,n){let i=(0,r.getComponentInstance)(t);i&&i.updateValue(e,n)};const i=n(1319),r=n(1843)},1319:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateInput=void 0;const i=n(4984),r=n(8399),o=n(4927),s=n(1843);class a extends s.Component{constructor(t,e){var n,i,o;super(t,e),this.clearButton=null,this.options={value:null,showClearButton:!1,dotNetInstance:null,format:"yyyy-MM-dd",formattedValue:null,allowNulls:!1,readonly:!1,cycleTime:!0,locale:null,localeId:null,steps:{second:"",minute:"",hour:"",day:"",month:"",year:""},formatPlaceholder:null,hasPlaceholder:!1,placeholder:null,debounceDelay:null,autoCorrectParts:!0,autoSwitchParts:!0,autoSwitchKeys:[],twoDigitYearMax:null,allowCaretMode:!1,intlService:null,jsinterop:{focus:null,blur:null,updateDate:null,enter:null}},this.onClearButtonClick=()=>{this.updateValue(null,null),this.updateComponentValue()},this.onWidgetValueChange=()=>{this.dateObject=this.widget.dateObject,this.debounceUpdateValue()},this.onWidgetInputEnd=()=>{this.debounceUpdateValue()},this.onWidgetFocusEnd=()=>{this.invokeMethodAsync(this.options.jsinterop.focus,{inputElementValue:this.element.value})},this.onWidgetBlurEnd=()=>{this.stopDebounceUpdateValue(),this.invokeMethodAsync(this.options.jsinterop.blur,{inputElementValue:this.element.value})},this.onWidgetKeyDown=t=>{t.event.key===s.Key.ENTER&&this.invokeMethodAsync(this.options.jsinterop.enter)};let a=this.options.formatPlaceholder?this.options.formatPlaceholder:"formatPattern";this.options.formatPlaceholder=a,this.setOptions(e),this.intlService=this.options.intlService||r,this.options.intlService=this.intlService;const l=this.element.getAttribute("data-id");this.extendCulture(l),this.options.showClearButton&&(this.clearButton=null===(i=null===(n=this.element)||void 0===n?void 0:n.parentNode)||void 0===i?void 0:i.querySelector(".k-clear-value"),null===(o=this.clearButton)||void 0===o||o.addEventListener("click",this.onClearButtonClick)),this.initWidget(this.element,this.getWidgetOptions()),this.dateObject=this.widget.dateObject}destroy(){this.unbindEvents(),super.destroy(),this.destroyWidget(),this.dateObject=null}initWidget(t,e){let n=e.value;if(!(0,s.isValidDate)(n)){const t=new Date(this.options.formattedValue);(0,s.isValidDate)(t)&&(n=t)}this.widget=this.createWidget(t,(0,s.extend)({},e,{value:n,events:{valueChange:this.onWidgetValueChange,inputEnd:this.onWidgetInputEnd,focusEnd:this.onWidgetFocusEnd,blurEnd:this.onWidgetBlurEnd,keydown:this.onWidgetKeyDown}}),this.intlService)}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t,e,n={}){const i=this.getWidgetConstructor();e.intlService=n;return new i(t,(0,s.extend)({},e))}getWidgetConstructor(){return i.DateInput}refresh(){this.setOptions(this.options)}bindEvents(){}unbindEvents(){}setOptions(t){const e=this.options.debounceDelay!==t.debounceDelay;this.extendOptions(t),this.setWidgetOptions(t),e&&(this.stopDebounceUpdateValue(),this.debounceUpdateValue=(0,o.debounce)(this.updateComponentValue,this.options.debounceDelay))}setWidgetOptions(t,e=!1){if(!this.widget)return;const n=this.getWidgetOptions(t);this.widget.setOptions(n,e)}extendCulture(t){const e=this.options;if(e.locale){e.locale.name=t;let n=(0,s.deepExtend)({},this.intlService.localeInfo("en"),e.locale);this.intlService.setData(n)}}focus(){this.element.focus()}stopDebounceUpdateValue(){this.debounceUpdateValue&&this.debounceUpdateValue.pending&&(this.debounceUpdateValue.stop(),this.debounceUpdateValue.runCallback())}updateComponentValue(){this.invokeMethodAsync(this.options.jsinterop.updateDate,{dateValue:this.dateObject.getFormattedDate("yyyy-MM-dd HH:mm:ss"),inputElementValue:this.element.value,isInCaretMode:this.widget.isInCaretMode()})}updateValue(t,e){let n=(0,s.createDate)(t),i=(0,s.createDate)(e);(0,s.isValidDate)(n)||(n=(0,s.isValidDate)(i)?i:null),this.widget.dateObject.setValue(n),this.widget.refreshElementValue()}}e.DateInput=a},5739:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDatePicker=function(t,e){(0,r.initComponent)(i.DatePicker,t,e)};const i=n(8753),r=n(1843)},8753:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DatePicker=void 0;const i=n(2271);class r extends i.PickerBase{constructor(t,e){super(t,e),this.extendOptions(e),this.bindEvents(),this.bindPickerEvents()}destroy(){this.unbindEvents(),super.destroy()}}e.DatePicker=r},257:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDateRangePicker=function(t,e){(0,r.initComponent)(i.DateRangePicker,t,e)};const i=n(807),r=n(1843)},807:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateRangePicker=void 0;const i=n(1843),r="blur",o="click",s="focus";class a extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,startTarget:null,endTarget:null,pickerAnimationContainerId:"",jsinterop:{change:"",close:"",open:"",focus:""}},this.onStartEnterKeyDown=()=>{this.triggerStartChanged(),this.focusEndInput()},this.onEndEnterKeyDown=()=>{this.triggerEndChanged(),this.invokeClose()},this.onPickerShiftTab=(t,e)=>{const n=(0,i.findFocusable)(this.pickerElement,!1);return e.target!==n||(this.focusEndInput(),!1)},this.onPickerTab=(t,e)=>{const n=this.pickerElement.querySelector("table:last-child");return e.target===n&&this.triggerClose(),!0},this.triggerStartOpen=()=>(this.isClosed()&&this.invokeOpen(this.options.startTarget),!0),this.triggerEndOpen=()=>(this.isClosed()&&this.invokeOpen(this.options.endTarget),!0),this.triggerStartChanged=()=>{this.invokeChange(this.options.startTarget)},this.triggerEndChanged=()=>{this.invokeChange(this.options.endTarget)},this.invokeStartInputFocus=()=>{this.invokeFocus(this.options.startTarget)},this.invokeEndInputFocus=()=>{this.invokeFocus(this.options.endTarget)},this.triggerClose=()=>(this.invokeClose(),!0),this.focusPickerCalendar=()=>!!this.isClosed()||(this.pickerElement.querySelector("table").focus(),!1),this.closePicker=()=>!!this.isClosed()||(this.triggerClose(),this.focusStartInput(),!1);const n=this.element.querySelectorAll(".k-input-inner");this.startInput=n[0],this.endInput=n[1],this.setOptions(e),this.bindEvents()}setOptions(t){super.setOptions(t),this.pickerElement=(0,i.getElementByDataId)(t.pickerAnimationContainerId),this.destroyNavigationServices(),this.initNavigationServices()}bindEvents(){this.startInput.addEventListener(r,this.triggerStartChanged),this.endInput.addEventListener(r,this.triggerEndChanged),this.startInput.addEventListener(s,this.invokeStartInputFocus),this.endInput.addEventListener(s,this.invokeEndInputFocus),this.startInput.addEventListener(o,this.triggerStartOpen,!0),this.endInput.addEventListener(o,this.triggerEndOpen,!0)}unbindEvents(){this.startInput.removeEventListener(r,this.triggerStartChanged),this.endInput.removeEventListener(r,this.triggerEndChanged),this.startInput.removeEventListener(s,this.invokeStartInputFocus),this.endInput.removeEventListener(s,this.invokeEndInputFocus),this.startInput.removeEventListener(o,this.triggerStartOpen,!0),this.endInput.removeEventListener(o,this.triggerEndOpen,!0)}destroy(){this.unbindEvents(),this.destroyNavigationServices(),super.destroy()}initNavigationServices(){this.navigationServices=[this.initStartInputNavigationService(),this.initEndInputNavigationService(),this.initPickerNavigationService()]}destroyNavigationServices(){this.navigationServices&&this.navigationServices.forEach((t=>t.destroy()))}initStartInputNavigationService(){let t=new i.NavigationService(this.startInput);return t.bind([i.Key.ESC,`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`],this.closePicker),t.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.triggerStartOpen),t.bind(i.Key.ENTER,this.onStartEnterKeyDown),t.bind(`${i.KeyModifiers.SHIFT} ${i.Key.TAB}`,this.triggerClose),t}initEndInputNavigationService(){let t=new i.NavigationService(this.endInput);return t.bind([i.Key.ESC,`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`],this.closePicker),t.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.triggerEndOpen),t.bind(i.Key.TAB,this.focusPickerCalendar),t.bind(i.Key.ENTER,this.onEndEnterKeyDown),t}initPickerNavigationService(){let t=new i.NavigationService(this.pickerElement);return t.bind(`${i.KeyModifiers.SHIFT} ${i.Key.TAB}`,this.onPickerShiftTab),t.bind(`${i.Key.TAB}`,this.onPickerTab),t.bind([i.Key.ESC,`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`],this.closePicker),t}focusStartInput(){this.startInput.focus()}focusEndInput(){this.endInput.focus()}invokeChange(t){this.invokeMethodAsync(this.options.jsinterop.change,t)}invokeFocus(t){this.invokeMethodAsync(this.options.jsinterop.focus,t)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t)}isClosed(){return!this.pickerElement||!this.pickerElement.children[0].children.length}}e.DateRangePicker=a},7713:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDateTimePicker=function(t,e){(0,r.initComponent)(i.DateTimePicker,t,e)};const i=n(9127),r=n(1843)},9127:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DateTimePicker=void 0;const i=n(1843),r=n(2271);class o extends r.PickerBase{constructor(t,e){super(t,e),this.onNavigate=t=>{const e=document.activeElement;if(!e.classList.contains("k-time-list"))return;const n=e.getAttribute("data-index"),r=(0,i.isDirectionRtl)(this.element);t.keyCode===(0,i.getRtlValue)(i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,r)?(this.focusTimeList(parseInt(n)-1),t.preventDefault()):t.keyCode===(0,i.getRtlValue)(i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWLEFT,r)&&(this.focusTimeList(parseInt(n)+1),t.preventDefault())},this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.removeEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){const e=`.k-time-list[data-index="${t}"]`,n=this.pickerElement.querySelector(e);n&&n.focus()}focusTable(){const t=this;setTimeout((()=>{let e=t.pickerElement&&t.pickerElement.querySelector("table");e instanceof HTMLElement&&e.focus()}),100)}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{let t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}e.DateTimePicker=o},8683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(6945),e),i.__exportStar(n(5739),e),i.__exportStar(n(8193),e),i.__exportStar(n(3167),e),i.__exportStar(n(7713),e),i.__exportStar(n(257),e)},2271:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PickerBase=void 0;const i=n(1843),r=n(1843);class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,toggleElementSelector:"",pickerAnimationContainerId:"",jsinterop:{close:"",open:"",mousedown:"",blur:""}},this.onToggleElementClick=t=>{t.preventDefault()},this.onToggleElementMouseDown=()=>{this.inputComponent=(0,i.getComponentInstance)(this.input.getAttribute("data-id")),this.inputComponent&&this.inputComponent.stopDebounceUpdateValue();const t=this.options.jsinterop.mousedown;this.invokeMethodAsync(t)},this.onPopupKeyDown=t=>{(t.keyCode===i.KeyCode.ESCAPE||t.keyCode===i.KeyCode.ARROWUP&&t.altKey)&&(this.invokeClose(),this.focus(),t.stopPropagation())},this.closePopup=()=>(this.invokeClose(),!1),this.openPopup=()=>(this.invokeOpen(),!1),this.onInputFocus=()=>{this.invokeClose()},this.onInputFocusOut=t=>{(0,r.ownsElement)(this.pickerElement,t.relatedTarget)||(0,r.ownsElement)(this.element,t.relatedTarget)||this.invokeMethodAsync(this.options.jsinterop.blur)},this.setOptions(e),this.input=this.element.getElementsByClassName("k-input-inner")[0],this.toggleElement=this.element.querySelector(e.toggleElementSelector),this.bindEvents()}destroy(){this.destroyTabKeyTrap(),this.destroyNavigationService(),this.unbindEvents(),this.unbindPickerEvents(),super.destroy(),this.input=this.toggleElement=this.pickerElement=null}setOptions(t){super.setOptions(t),this.unbindPickerEvents(),this.pickerElement=(0,i.getElementByDataId)(t.pickerAnimationContainerId),this.bindPickerEvents(),this.destroyTabKeyTrap(),this.destroyNavigationService(),this.initTabKeyTrap(),this.initNavigationService()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.openPopup),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`,this.closePopup)}destroyNavigationService(){this.navigationService&&this.navigationService.destroy()}initTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.pickerElement)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}bindEvents(){this.input.addEventListener("focus",this.onInputFocus),this.input.addEventListener("focusout",this.onInputFocusOut),this.toggleElement.addEventListener("click",this.onToggleElementClick),this.toggleElement.addEventListener("mousedown",this.onToggleElementMouseDown),this.tabKeyTrap.enableKeyTrap()}unbindEvents(){this.input.removeEventListener("focus",this.onInputFocus),this.input.removeEventListener("focusout",this.onInputFocusOut),this.toggleElement.removeEventListener("click",this.onToggleElementClick),this.toggleElement.removeEventListener("mousedown",this.onToggleElementMouseDown)}bindPickerEvents(){this.pickerElement.addEventListener("keydown",this.onPopupKeyDown,!0)}unbindPickerEvents(){this.pickerElement&&this.pickerElement.removeEventListener("keydown",this.onPopupKeyDown,!0)}focus(){const t=this;setTimeout((()=>{t.input.focus()}),100)}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}invokeOpen(){this.invokeMethodAsync(this.options.jsinterop.open)}}e.PickerBase=o},282:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimePickerCarousel=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,focusOnInit:!1,jsinterop:{click:""}},this.onKeyDown=t=>{t.keyCode===i.KeyCode.ARROWUP?(this.onKeyArrowUp(),t.preventDefault()):t.keyCode===i.KeyCode.ARROWDOWN?(this.onKeyArrowDown(),t.preventDefault()):t.keyCode===i.KeyCode.ENTER&&this.invokeEnter()},this.onScroll=()=>{const t=this;t.element.scrollTop!==t.scrollTop&&(clearTimeout(this.timeout),this.timeout=setTimeout((()=>{t.snapToItem(!0)}),33))},this.onMouseDown=t=>{t.preventDefault()},this.onClick=t=>{const e=t.target.closest("li"),n=this.listElement.querySelectorAll(".k-item"),i=Array.from(n).indexOf(e);e&&(this.scrollTo(e.offsetTop),this.invokeSelect(i))},this.onMouseEnter=()=>{this.timeList.focus()},this.onFocusOut=t=>{this.invokeFocusOut(t)},this.extendOptions(e),this.timeList=this.element.parentElement,this.listElement=this.element.querySelector("ul.k-reset"),this.timeout,this.setDimensions(),this.bindEvents(),this.options.focusOnInit&&this.focusTimeList()}setDimensions(){this.itemHeight=this.listElement.querySelector("li.k-item").offsetHeight,this.elementHeight=this.element.offsetHeight,this.scrollTop=this.element.scrollTop;let t=this.listElement.offsetHeight+(this.elementHeight-this.itemHeight);this.element.querySelector(".k-scrollable-placeholder").setAttribute("style","height: "+(0,i.toPixel)(t));let e=Math.floor((this.elementHeight-this.itemHeight)/2);this.listElement.setAttribute("style","transform: translateY("+e+"px);")}bindEvents(){this.element.addEventListener("scroll",this.onScroll),this.element.addEventListener("mousedown",this.onMouseDown),this.listElement.addEventListener("click",this.onClick),this.timeList.addEventListener("keydown",this.onKeyDown),this.timeList.addEventListener("mouseenter",this.onMouseEnter),this.timeList.addEventListener("focusout",this.onFocusOut)}destroy(){clearTimeout(this.timeout),this.unbindEvents(),super.destroy(),this.selectedIndex=this.listElement=null}unbindEvents(){this.element.addEventListener("mousedown",this.onMouseDown),this.element.removeEventListener("scroll",this.onScroll),this.listElement.removeEventListener("click",this.onClick),this.timeList.removeEventListener("keydown",this.onKeyDown),this.timeList.removeEventListener("mouseenter",this.onMouseEnter),this.timeList.removeEventListener("focusout",this.onFocusOut)}onKeyArrowUp(){const t=this.selectedIndex;this.setSelectedIndex(t-1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}onKeyArrowDown(){const t=this.selectedIndex;this.setSelectedIndex(t+1),this.selectedIndex!==t&&this.invokeSelect(this.selectedIndex)}focusTimeList(){const t=this;setTimeout((()=>{t.timeList.focus({preventScroll:!0})}),100)}snapToItem(t){let e=this.element.scrollTop,n=e%this.itemHeight;this.scrollTop>e?e-=n:e+=this.itemHeight-n,this.selectItem(e,t)}selectItem(t,e){if(!Number.isNaN(t)&&(this.scrollTo(t),e)){let e=Math.floor(t/this.itemHeight);this.invokeSelect(e)}}invokeSelect(t){const e=this.options.jsinterop.click;let n=Math.min(t,this.listElement.querySelectorAll(".k-item").length-1);this.invokeMethodAsync(e,n)}invokeEnter(){const t=this.options.jsinterop.enter;this.invokeMethodAsync(t)}invokeFocusOut(t){t.relatedTarget&&this.invokeMethodAsync(this.options.jsinterop.focusout)}scrollTo(t){this.element.scrollTop=t,this.scrollTop=this.element.scrollTop}setSelectedIndex(t){this.setDimensions();let e=this.listElement.querySelectorAll(".k-item")[t];e&&(this.selectedIndex=t,this.scrollTo(e.offsetTop))}}e.TimePickerCarousel=r},8193:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTimePicker=function(t,e){(0,o.initComponent)(r.TimePicker,t,e)},e.focusTimePickerInput=function(t){let e=(0,o.getComponentInstance)(t);e&&e.focus()},e.initTimeCarousel=function(t,e){(0,o.initComponent)(i.TimePickerCarousel,t,e)},e.setCarouselSelectedIndex=function(t,e){let n=(0,o.getComponentInstance)(t);n&&n.setSelectedIndex(e)};const i=n(282),r=n(647),o=n(1843)},647:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimePicker=void 0;const i=n(1843),r=n(2271);class o extends r.PickerBase{constructor(t,e){super(t,e),this.onNavigate=t=>{const e=document.activeElement;if(!e.classList.contains("k-time-list"))return;const n=e.getAttribute("data-index"),r=(0,i.isDirectionRtl)(this.element);t.keyCode===(0,i.getRtlValue)(i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,r)?(this.focusTimeList(parseInt(n)-1),t.preventDefault()):t.keyCode===(0,i.getRtlValue)(i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWLEFT,r)&&(this.focusTimeList(parseInt(n)+1),t.preventDefault())},this.extendOptions(e),this.bindEvents()}bindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.bindEvents()}unbindEvents(){this.pickerElement.addEventListener("keydown",this.onNavigate),super.unbindEvents()}destroy(){this.unbindEvents(),super.destroy()}focusTimeList(t){const e=`.k-time-list[data-index="${t}"]`,n=this.pickerElement.querySelector(e);n&&n.focus()}focusFirstCarousel(){this.pickerElement&&setTimeout((()=>{let t=this.pickerElement.querySelector(".k-time-list");t instanceof HTMLElement&&t.focus()}),100)}}e.TimePicker=o},6767:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDialog=function(t,e){(0,r.initComponent)(i.Dialog,t,e)};const i=n(4221),r=n(1843)},4221:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Dialog=void 0;const i=n(1843),r=[".k-grid",".k-gantt",".k-treelist",".k-scheduler"].join(",");class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{keydown:""}},this.onKeyDown=t=>{t.keyCode===i.KeyCode.ESCAPE&&t.target.closest(r)||this.element!==t.target&&t.keyCode!==i.KeyCode.ESCAPE||this.invokeKeyDown(t)},this.extendOptions(e),this.bindEvents(),this.elementDataId=this.element.dataset.id,this.enableTabKeyTrap(),this.focusElement()}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),super.destroy()}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onKeyDown)}onAfterShow(t){this.unbindEvents(),this.options=t[0],this.element=(0,i.getElementByDataId)(this.elementDataId),this.bindEvents(),this.keyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement()}onAfterClose(){this.restoreFocus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}enableTabKeyTrap(){this.keyTrap=new i.FormKeyTrap(this.element),this.keyTrap.enableKeyTrap()}disableTabKeyTrap(){this.keyTrap&&this.keyTrap.disableTabKeyTrap()}focusElement(){if(this.elementToFocusOnClose=document.activeElement,this.options.focusedElementSelector){const t=this.element.querySelector(this.options.focusedElementSelector);t instanceof HTMLElement&&(0,i.focusInNextFrameAsync)(t)}else(0,i.focusFirstFocusableChild)(this.elementDataId)}restoreFocus(){this.elementToFocusOnClose&&(this.elementToFocusOnClose.focus(),this.elementToFocusOnClose=null)}}e.Dialog=o},7568:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6767),e)},5032:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColumnDraggable=function(t,e={}){(0,r.initComponent)(i.ColumnDraggable,(0,r.addComponentSuffix)(t,"ColumnDraggable"),e)},e.destroyColumnDraggable=function(t){(0,r.destroyComponent)((0,r.addComponentSuffix)(t,"ColumnDraggable"))};const i=n(6858),r=n(1843)},6858:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnDraggable=void 0;const i=n(4771),r=n(1089),o=n(1843),s=n(6533),a=(0,o.toDataAttr)("field"),l=(0,o.toDataAttr)("text"),c=".k-drag-status",h=t=>t&&t.hasAttribute("data-field");class u extends o.Component{constructor(t,e={}){super(t,e),this.options={parentSelector:".k-grid",draggableSourceSelector:".k-grid-header",draggable:{group:null,filter:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",ignore:".k-grid-header-menu, .k-checkbox, .k-column-resizer",cancelIconMarkup:"",plusIconMarkup:""}},this.onDraggableDrag=t=>{this.canDragToAnyDropTarget(t)||t.preventDefault()},this.onDraggableDrop=()=>{this.destroyDropClue()},this.onDropTargetLeave=()=>{this.showDisabledHint(),this.destroyDropClue()},this.onDropTargetOver=t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()},this.createHint=t=>{const e=(0,o.stringifyToStyle)({position:"absolute","z-index":2e4}),n=(t=>t instanceof HTMLElement&&(t.getAttribute(l)||t.getAttribute(a))||"")(t),i=t.getAttribute(a)||"",r=t.getAttribute(l)||"";return(0,o.convertToHtml)(`<div class="k-header k-drag-clue" style="${e}" data-field="${(0,o.htmlEncode)(i)}" data-text="${(0,o.htmlEncode)(r)}">\n                ${this.options.draggable.cancelIconMarkup}\n                ${(0,o.htmlEncode)(n)}\n            </div>`)},this.ignoreElementUnderCursor=t=>{const e=t&&t.closest(".k-grouping-dropclue");return Boolean(e)},this.extendOptions(e),this.createDraggable()}destroy(){this.destroyDropClue(),this.destroyDraggable(),super.destroy()}extendOptions(t){this.options=(0,o.deepExtend)(this.options,t)}createDraggable(){const t=this.element.closest(this.options.parentSelector).querySelector(this.options.draggableSourceSelector);t&&(this.draggable=new i.Draggable(t,(0,o.deepExtend)(this.options.draggable,{hint:this.createHint,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{drag:this.onDraggableDrag,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}destroyDraggable(){this.draggable&&this.draggable.destroy()}canDragToAnyDropTarget(t){let e=!1;return this.draggable.forEachDropTarget((n=>{e=e||n.allowsDragFrom(this.draggable,t)})),e}canDrop(t){return t.dropTarget&&t.dropTarget.allowsDropFrom(this.draggable,t)}showEnabledHint(){const t=this.draggable.hint;if(t){const e=t.querySelector(c),n=(0,o.convertToHtml)(this.options.draggable.plusIconMarkup);e.parentElement.replaceChild(n,e)}}showDisabledHint(){const t=this.draggable.hint;if(t){const e=t.querySelector(c),n=(0,o.convertToHtml)(this.options.draggable.cancelIconMarkup);e.parentElement.replaceChild(n,e)}}createDropClue(){this.dropClue||(this.dropClue=new s.DropClue,this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(!t.dropTarget||!t.elementUnderCursor)return;const e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,n=t.draggable.originalCurrentTarget,i=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,r=(0,o.haveSameParent)(e,n);let s=r?(0,o.isTargetAfterElement)(e,n):i&&!h(e);(0,o.isDirectionRtl)(this.element)&&(s=!s);let a=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:r});if(a){this.createDropClue();const t=this.dropClue.getOffsetState(a,s);if(!s){const{width:e}=this.dropClueSize;t.left-=e/2}this.showDropClue(t)}}getDropClueOffsetElement({elementUnderCursor:t,dropTargeElement:e,dropTargetItemSelector:n,isDragInSiblings:i}){const o=t.closest(n),s=this.getDropTargetIndicators(e,n),a=s.filter(h),l=(0,r.last)(s);let c=(0,r.last)(a)||l;return o&&(i||h(o))&&(c=o),c}showDropClue({top:t,left:e,height:n}){this.dropClue||this.createDropClue(),this.dropClue.setState({top:t,left:e,height:n}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}}e.ColumnDraggable=u},3692:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColumnReorderable=function(t,e){(0,r.initComponent)(i.ColumnReorderable,(0,r.addComponentSuffix)(t,"ColumnReorderable"),e)},e.destroyColumnReorderable=function(t){(0,r.destroyComponent)((0,r.addComponentSuffix)(t,"ColumnReorderable"))};const i=n(614),r=n(1843)},614:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnReorderable=void 0;const i=n(6589),r=n(1089),o=n(1843),s=(0,o.toDataAttr)("reorderable"),a=(0,o.toDataAttr)("parent-col-initialization-index");class l extends o.Component{constructor(t,e={}){super(t,e),this.options={parentSelector:".k-grid",reorderableSourceSelector:".k-grid-header",dropTarget:{itemSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)"}},this.allowsDragFrom=t=>{const e=Boolean(t.originalCurrentTarget.getAttribute(s)),n=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&n},this.allowsDropFrom=(t,e)=>{const n=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),i=t.originalCurrentTarget;if(!n||!i)return!1;const r=Boolean(i.getAttribute(s)),l=(0,o.parseAttrToInt)(a,n),c=(0,o.parseAttrToInt)(a,i);return r&&n!==i&&l===c},this.onDropTargetDrop=t=>{const e=t.draggable.originalCurrentTarget,n=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector),i=(0,r.getColumnInitializationIndex)(e),s=(0,r.getColumnInitializationIndex)(n),a=i>=0?i:(0,o.getElementIndex)(e,this.options.dropTarget.itemSelector),l=s>=0?s:(0,o.getElementIndex)(n,this.options.dropTarget.itemSelector);document.activeElement&&document.activeElement.blur(),this.reorderColumn(a,l)},this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){const t=this.element.closest(this.options.parentSelector).querySelector(this.options.reorderableSourceSelector);this.dropTarget=new i.DropTarget(t,(0,o.deepExtend)(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderColumn(t,e){t>=0&&e>=0&&t!==e&&this.invokeMethodAsync(this.options.jsinterop.reorderColumn,{fromIndex:t,toIndex:e})}}e.ColumnReorderable=l},5474:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initColumnResizable=function(t,e){(0,r.initComponent)(i.ColumnResizable,(0,r.addComponentSuffix)(t,"ColumnResizable"),e)},e.destroyColumnResizable=function(t){(0,r.destroyComponent)((0,r.addComponentSuffix)(t,"ColumnResizable"))},e.columnResizableAutoFitColumns=function(t,e){const n=(0,r.getComponentInstance)((0,r.addComponentSuffix)(t,"ColumnResizable"));n&&n.autoFitColumns(e)},e.columnResizableAutoFitAllColumns=function(t){const e=(0,r.getComponentInstance)((0,r.addComponentSuffix)(t,"ColumnResizable"));e&&e.autoFitAllColumns()},e.columnResizableSetColumns=function(t,e){const n=(0,r.getComponentInstance)((0,r.addComponentSuffix)(t,"ColumnResizable"));n&&n.setColumns(e)};const i=n(3084),r=n(1843)},3084:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ColumnResizable=void 0;const i=n(7561),r=n(1089),o=n(1843),s=n(6724),a="dblclick",l=Array.from,c=(t,e)=>{t.style.width=(0,o.toPixel)(e)},h=t=>t.getBoundingClientRect().width,u=t=>Boolean(t.style.width),d=(t,e,n)=>n?(0,o.clamp)(t,e,n):Math.max(t,e),p="k-column-resizer";class f extends o.Component{constructor(t,e={}){super(t,e),this.options={parentSelector:".k-grid",resizableSourceSelector:".k-grid-header",dataRowSelector:"tr:not(.k-grouping-row)",columnSelector:"th.k-header:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",contentTableSelector:".k-grid-table",contentRowSelector:"tr.k-table-row",contentCellSelector:"td:not(.k-group-cell):not(.k-hierarchy-cell):not(.k-drag-cell)",footerTableSelector:".k-grid-footer table",footerRowSelector:"tr.k-group-footer",columns:[],defaultMinResizableWidth:30,dragResizing:!0,resizable:{draggable:{filter:".k-column-resizer"}},jsinterop:{resizeColumns:""}},this.onResizableResizeStart=t=>{this.resetState(),this.setFixedWidths();const e=t.originalCurrentTarget.closest(this.options.columnSelector);this.setState({originColumn:{element:e,initialWidth:h(e)}}),this.rescaleColumns()},this.onResizableResize=t=>{const e=this.state.originColumn.element,n=h(e),i=this.getColumnIndex(e),r=(0,o.isDirectionRtl)(this.element)?-1:1,{minWidth:s,maxWidth:a}=this.getResizingConstraints(i),l=this.state.originColumn.initialWidth+t.initialDelta.x*r,c=t.delta.x*r;(a&&a<n||s>n||!(c>0&&l<=s)&&!(a&&c<0&&l>=a))&&this.applyResizeDelta(e,c)},this.onResizableResizeEnd=()=>{this.state.columns.length>0&&this.invokeResizeColumns({columns:this.state.columns,tableWidth:this.state.tableWidth})},this.onDoubleClick=t=>{if(!(0,o.hasClass)(p,t.target))return;const e=t.target.closest(this.options.columnSelector);this.autoFitColumnElements([e])},this.extendOptions(e),this.bindEvents(),this.options.dragResizing&&this.createResizable(),this.resetState()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}createResizable(){const t=this.element.closest(this.options.parentSelector).querySelector(this.options.resizableSourceSelector);this.resizable=new i.Resizable(t,(0,o.deepExtend)(this.options.resizable,{events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&this.resizable.destroy()}bindEvents(){this.element.addEventListener(a,this.onDoubleClick)}unbindEvents(){this.element.removeEventListener(a,this.onDoubleClick)}setState(t){this.state=(0,o.extend)(this.state||{},t)}resetState(){this.setState({columns:[],tableWidth:null,originColumn:{element:{},initialWidth:null}})}setColumns(t){this.options.columns=t}autoFitAllColumns(){let t=this.getLeafHeaderCells();this.autoFitColumnElements(t)}autoFitColumns(t){let e=t.map((t=>this.element.querySelector((0,r.byColumnInitializationIndex)(t))));this.autoFitColumnElements(e)}autoFitColumnElements(t){let e=[];this.setFixedWidths(),this.rescaleColumns(),t.forEach((t=>{if(t&&!(0,r.getColumnHasChildren)(t)){const n=this.getHeaderCellLeafIndex(t),i=this.getColumnIndex(t);if(this.isContentCellVisible(n)){const r=this.getColumnWidth(n,i);this.resizeColumn(t,r);const s=h(t);e.push({index:i,width:(0,o.toPixel)(s)})}}})),e.length>0&&this.invokeResizeColumns({columns:e,tableWidth:(0,o.toPixel)(h(this.getHeaderTable()))})}getColumnWidth(t,e){const n=this.getContentColumnWidth(t,e),i=this.getHeaderColumnWidth(t,e),r=this.getFooterColumnWidth(t,e);return Math.max(n,i,r)}getContentColumnWidth(t,e){let n=this.getContentCellVirtualIndex(t);return n<0?0:this.calculateColumnWidth({columnIndex:n,columnInitializationIndex:e,tableElement:this.getContentTable(),cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-content"})}getHeaderColumnWidth(t,e){return this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:this.getHeaderTable(),cellSelector:this.options.columnSelector,scrollContainerSelector:".k-grid-header-wrap"})}getFooterColumnWidth(t,e){const n=this.getFooterTable();return n?this.calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:n,cellSelector:this.options.contentCellSelector,scrollContainerSelector:".k-grid-footer-wrap"}):0}calculateColumnWidth({columnIndex:t,columnInitializationIndex:e,tableElement:n,cellSelector:i,scrollContainerSelector:s}){const a=this.getTableColumns(n)[t],l=s?n.closest(s):null,c=a.style.width,u=null!==l?l.scrollLeft:0;a.style.width="",(0,o.addClass)("k-autofitting",n);const d=n.querySelector((0,r.byColumnInitializationIndex)(e))||n.querySelector(this.options.dataRowSelector).querySelectorAll(i)[t],p=h(d);return(0,o.removeClass)("k-autofitting",n),a.style.width=c,l&&(l.scrollLeft=u),p}setFixedWidths(){const t=this.getHeaderColumns(),e=this.getHeaderTable(),n=this.getContentTable(),i=this.getFooterTable();if(t.every(u)&&u(e)&&u(n))return;c(e,h(e)),c(n,h(n)),i&&c(i,h(i));const o=this.hasMultiColumnHeaders()?this.getLeafHeaderCells():this.getHeaderCells(),s=this.getHeaderCells().sort(r.sortByInitializationIndex);this.leafHeaderCellsFixedWidths=[],this.headerCellsFixedWidths=[];for(let t=0;t<o.length;t++){const e=h(o[t]);this.leafHeaderCellsFixedWidths.push(e)}for(let t=0;t<s.length;t++){const e=h(s[t]);this.headerCellsFixedWidths.push(e)}for(let t=0;t<o.length;t++)this.resizeHeaderColumn(t,this.leafHeaderCellsFixedWidths[t]),this.resizeContentColumn(t,this.leafHeaderCellsFixedWidths[t]),i&&this.resizeFooterColumn(t,this.leafHeaderCellsFixedWidths[t])}applyResizeDelta(t,e){t&&this.resizeColumn(t,h(t)+e,e)}resizeColumn(t,e){const n=this.getFooterTable();let i=[];if(!t)return;const s=this.getColumnIndex(t),a=this.hasMultiColumnHeaders(),l=this.getHeaderCellLeafIndex(t);let c,u=[];if(a){const e=this.getHeaderCells().sort(r.sortByNavigationId);u=(0,r.getLeafChildColumns)(t,e)}c=u.length>0?{minWidth:this.options.defaultMinResizableWidth,maxWidth:null}:this.getResizingConstraints(s);const p=d(e,c.minWidth,c.maxWidth),f=p-h(t);if(!(-.05<=f&&f<=.05)){if(i.push({index:s,width:(0,o.toPixel)(p)}),u.length){let e=[],r=0;const s=f/u.length;u.forEach((t=>{const n=t.index,i=t.leafIndex,r=this.getHeaderColWidth(t.leafIndex),{minWidth:o,maxWidth:a}=this.getResizingConstraints(t.index),l=d(r+s,o,a);e.push({index:n,leafIndex:i,newWidth:l})})),e.forEach((t=>{this.resizeHeaderColumn(t.leafIndex,t.newWidth),this.resizeContentColumn(t.leafIndex,t.newWidth),r+=t.newWidth,i.push({index:t.index,width:(0,o.toPixel)(t.newWidth)})})),i[0].width=(0,o.toPixel)(r);const a=r-h(t);this.resizeHeaderTable(a),this.resizeContentTable(a),this.resizeLockedColumns(),n&&(this.resizeFooterTable(a),e.forEach((t=>{this.resizeFooterColumn(t.leafIndex,t.newWidth)})))}else this.resizeHeaderTable(f),this.resizeContentTable(f),this.resizeHeaderColumn(l,p),this.resizeContentColumn(l,p),this.resizeLockedColumns(),n&&(this.resizeFooterTable(f),this.resizeFooterColumn(l,p));this.setState({columns:i,tableWidth:(0,o.toPixel)(h(this.getHeaderTable()))})}}resizeHeaderColumn(t,e){const n=this.getHeaderColumnByIndex(t);c(n,e)}resizeContentColumn(t,e){const n=this.getContentColumnByIndex(t);c(n,e)}resizeFooterColumn(t,e){const n=this.getFooterColumnByIndex(t);c(n,e)}resizeHeaderTable(t){this.resizeTable(this.getHeaderTable(),t)}resizeContentTable(t){this.resizeTable(this.getContentTable(),t)}resizeFooterTable(t){this.resizeTable(this.getFooterTable(),t)}resizeTable(t,e=0){t&&c(t,h(t)+e)}resizeLockedColumns(){this.resizeLockedHeaderCells(),this.resizeLockedContentCells(),this.resizeLockedFooterCells()}resizeLockedHeaderCells(){const t=this.getHeaderCells().sort(r.sortByNavigationId);this.setLockedCellsOffsets(t)}resizeLockedContentCells(){const t=this.getContentRows();this.resizeLockedCellsForRows(t)}resizeLockedFooterCells(){const t=this.getFooterRows();this.resizeLockedCellsForRows(t)}resizeLockedCellsForRows(t){for(let e=0;e<t.length;e++){const n=t[e].querySelectorAll(this.options.contentCellSelector);this.setLockedCellsOffsets(n)}}setLockedCellsOffsets(t){this.setLockedCellsOffsetLeft(t),this.setLockedCellsOffsetRight(t)}setLockedCellsOffsetLeft(t){this.setLockedCellOffset(t,((t,e)=>{var n;n=e,t.style.left=(0,o.toPixel)(n)}))}setLockedCellsOffsetRight(t){this.setLockedCellOffset(t,((t,e)=>{var n;n=e,t.style.right=(0,o.toPixel)(n)}),{iterateBackwards:!0})}setLockedCellOffset(t,e,{iterateBackwards:n=!1}={}){const i=this.getMaxLevel(t);let o=new Array(i).fill(0);for(let i=0;i<t.length;i++){const a=t[n?t.length-1-i:i];if((0,s.isLockedElement)(a)){const t=h(a),n=(0,r.getColumnLevel)(a),i=Math.max(0,n-1);e(a,o[i]);if((0,r.getColumnHasChildren)(a))o[i]+=t;else for(let e=i;e<o.length;e++)o[e]+=t}}}getMaxLevel(t){let e=1;for(let n=0;n<t.length;n++){const i=(0,r.getColumnLevel)(t[n]);e=Math.max(e,i)}return e}invokeResizeColumns(t){if((0,o.isDefined)(t.columns)&&(0,o.isDefined)(t.tableWidth))return this.invokeMethodAsync(this.options.jsinterop.resizeColumns,{columns:t.columns,tableWidth:t.tableWidth})}rescaleColumns(){this.headerCellsFixedWidths&&(this.invokeRescaleColumns(this.headerCellsFixedWidths.map((t=>`${t}px`))),this.headerCellsFixedWidths=null)}invokeRescaleColumns(t){return this.invokeMethodAsync(this.options.jsinterop.rescaleColumns,t)}getHeaderTable(){return this.element.closest("table")}getContentTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.contentTableSelector)}getFooterTable(){return this.element.closest(this.options.parentSelector).querySelector(this.options.footerTableSelector)}getHeaderColumnByIndex(t){return this.getHeaderColumns()[t]}getHeaderColumns(){return this.getTableColumns(this.getHeaderTable())}getHeaderColWidth(t){return(t=>{const e=parseFloat(t.style.width);if(Number.isNaN(e))return h(t);return e})(this.getHeaderColumnByIndex(t))}getHeaderCellByIndex(t){return this.getHeaderCells()[t]}getHeaderCells(){return l(this.element.querySelectorAll(this.options.columnSelector))}getLeafHeaderCells(){const t=this.getHeaderCells();return(0,r.getLeafElements)(t).sort(r.sortByNavigationId)}getHeaderCellLeafIndex(t){return this.getLeafHeaderCells().indexOf(t)}getContentColumnByIndex(t){return this.getContentColumns()[t]}getContentColumns(){return this.getTableColumns(this.getContentTable())}getTableColumns(t){const e=t.querySelector("colgroup").querySelectorAll("col:not(.k-group-col):not(.k-hierarchy-col):not(.k-drag-col)");return l(e)}getContentRows(){return this.queryContentTable(this.options.contentRowSelector)}getFooterColumnByIndex(t){return this.getFooterColumns()[t]}getFooterColumns(){return this.getTableColumns(this.getFooterTable())}getFooterRows(){return this.queryContentTable(this.options.footerRowSelector)}getColumnIndex(t){const e=(0,r.getColumnInitializationIndex)(t);if(e>=0)return e;return(0,o.getElementIndex)(t,this.options.columnSelector)}queryContentTable(t){const e=this.getContentTable().querySelectorAll(t);return l(e)}hasMultiColumnHeaders(){return this.element.querySelectorAll("tr").length>1}getFirstContentRow(){return this.getContentTable().querySelector(this.options.dataRowSelector)}getContentCellVirtualIndex(t){const e=this.getFirstContentRow();if(!e)return-1;const n=e.querySelector(this.options.contentCellSelector);let i=t;return n&&n.colSpan>1&&(i-=n.colSpan-1),i}isContentCellVisible(t){const e=this.getContentCellVirtualIndex(t),n=this.getFirstContentRow();if(!n)return!1;const i=n.querySelectorAll(this.options.contentCellSelector);return!!i&&(e>=0&&e<i.length)}getResizingConstraints(t){const e=this.options.columns[t]||{};return{minWidth:Math.max(e.minResizableWidth,this.options.defaultMinResizableWidth),maxWidth:e.maxResizableWidth}}}e.ColumnResizable=f},4771:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Draggable=void 0;const i=n(4419),r=n(6589),o=n(1089),s=n(8863),a=n(9196),l=n(4264),c=n(193),h=(t,e)=>!(!e||!t||!t.closest(e)&&!t.matches(e));class u extends s.Component{constructor(t,e={}){super(t,e),this.options={events:{dragStart:null,drag:null,dragEnd:null,dropTargetEnter:null},offset:{x:0,y:0},filter:null,ignore:"",hint:null,group:null,ignoreElementUnderCursor:()=>!1,touchAction:"none"},this.onPress=t=>{this.dragStarted=!1,h(t.originalEvent.target,this.options.ignore)?this.originalCurrentTarget=null:h(t.originalEvent.target,this.options.filter)?((0,o.preventDefault)(t),this.originalCurrentTarget=t.originalEvent.target.closest(this.options.filter),this.dragStarted=!0,this.triggerDragStart(t)):this.originalCurrentTarget=null},this.onDrag=t=>{const e=(0,c.extend)(t,{originalCurrentTarget:this.originalCurrentTarget});if(!this.originalCurrentTarget)return;if((0,o.preventDefault)(e),!this.dragStarted)return;this.processDropTargetIntersection(e);if(this.triggerDrag((0,c.extend)(e,{dropTarget:this.getLastDropTarget()})))return;!this.hint&&this.options.hint&&(this.createHint(this.originalCurrentTarget),this.appendHint());const n=this.getOffset();this.dragHint({top:e.pageY+n.y,left:e.pageX+n.x}),this.triggerDropTargetDragOver(e)},this.onRelease=t=>{this.originalCurrentTarget&&((0,o.preventDefault)(t),this.processDropTargetDrop(t),this.destroyHint(),this.triggerDragEnd(t))},this.extendOptions(e),this.initDraggableEvents(t)}destroy(){this.destroyDraggableEvents(),this.destroyHint(),this.lastDropTargetId=null,this.originalCurrentTarget=null,super.destroy()}initDraggableEvents(){this.destroyDraggableEvents(),this.draggableEvents=new i.Draggable({press:this.onPress,drag:this.onDrag,release:this.onRelease}),this.draggableEvents.bindTo(this.element),this.element.style.touchAction=this.options.touchAction}destroyDraggableEvents(){this.draggableEvents&&this.draggableEvents.destroy&&this.draggableEvents.destroy()}triggerDragStart(t){this.trigger("dragStart",t)}triggerDrag(t){return this.trigger("drag",t)}triggerDragEnd(t){this.trigger("dragEnd",t)}trigger(t,e={}){return super.trigger(t,(0,c.extend)(e,{originalCurrentTarget:this.originalCurrentTarget,elementUnderCursor:this.getElementUnderCursor(e)}))}triggerDropTargetDragEnter(t,e){t&&(t.triggerDragEnter((0,c.extend)(e,{draggable:this})),this.triggerDropTargetEnter((0,c.extend)(e,{dropTarget:t})))}triggerDropTargetEnter(t){this.trigger("dropTargetEnter",t)}triggerDropTargetDragLeave(t,e){t&&(t.triggerDragLeave((0,c.extend)(e,{draggable:this})),this.triggerDropTargetLeave((0,c.extend)(e,{dropTarget:t})))}triggerDropTargetLeave(t){this.trigger("dropTargetLeave",(0,c.extend)(t,{dropTarget:this.dropTarget}))}triggerDropTargetDragOver(t){if(this.lastDropTargetId){const e=this.getLastDropTarget();if(!e)return;e.triggerDragOver((0,c.extend)(t,{draggable:this})),this.triggerDropTargetOver((0,c.extend)(t,{dropTarget:e}))}}triggerDropTargetOver(t){this.trigger("dropTargetOver",t)}triggerDropTargetDrop(t,e){const n=(0,c.extend)(e,{elementUnderCursor:this.getElementUnderCursor(e)});t&&(t.allowsDropFrom(this,n)&&t.triggerDrop((0,c.extend)(n,{draggable:this})),this.triggerDrop((0,c.extend)(n,{dropTarget:t})))}triggerDrop(t){this.trigger("drop",t)}processDropTargetIntersection(t){const e=this.getElementUnderCursor(t);let n=!1;this.forEachDropTarget((i=>{const r=i.element.contains(e);n=n||r,r&&this.lastDropTargetId!==i.options.id&&(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=i.options.id,this.triggerDropTargetDragEnter(i,t))})),n||(this.triggerDropTargetDragLeave(this.getLastDropTarget(),t),this.lastDropTargetId=null)}processDropTargetDrop(t){this.forEachDropTarget((e=>{const n=this.getElementUnderCursor(t);e.element.contains(n)&&(this.lastDropTargetId=null,this.triggerDropTargetDrop(e,t))}))}getOffset(){return(0,c.isFunction)(this.options.offset)?this.options.offset(this.hint):this.options.offset}createHint(t){this.hint=(0,c.isFunction)(this.options.hint)?this.options.hint(t):this.options.hint}destroyHint(){this.hint&&(this.removeHint(),this.hint=null)}showHint(){(0,l.showElement)(this.hint)}hideHint(){(0,l.hideElement)(this.hint)}appendHint(){document.body.appendChild(this.hint)}removeHint(){document.body.removeChild(this.hint)}dragHint({top:t,left:e}){this.setHintState({top:t,left:e})}setHintState({top:t,left:e}){this.hint&&this.setHintPosition({top:t,left:e})}setHintPosition({top:t=0,left:e=0}){const{width:n,height:i}=this.hint.getBoundingClientRect(),r=t-i/2,o=e-n/2;this.hint.style.top=`${r}px`,this.hint.style.left=`${o}px`}cancelDrag(){this.draggableEvents&&(this.draggableEvents.cancelDrag(),this.destroyHint())}getElementUnderCursor(t){let e=(0,o.getElementFromPoint)(t);if(this.hint&&this.hint.contains(e)){if(this.hideHint(),e=(0,o.getElementFromPoint)(t),this.options.ignoreElementUnderCursor(e)){const n=e;(0,l.hideElement)(n);const i=(0,o.getElementFromPoint)(t);i&&(e=i),(0,l.showElement)(n)}this.showHint()}return e}forEachDropTarget(t){r.DropTarget.forEachInstanceInGroup(this.options.group,t)}getLastDropTarget(){return(0,a.getComponentInstance)(this.lastDropTargetId)}}e.Draggable=u},6533:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropClue=void 0;const i=n(1089),r=n(193),o=n(4264);e.DropClue=class{constructor(t){this.options={appendTo:document.body,template:(()=>{const t=document.body.firstElementChild,e=(0,o.getNextZIndexFromSiblings)(t);return`<div class="k-grouping-dropclue" style="${(0,r.stringifyToStyle)({position:"absolute","z-index":e})}" />`})()},this.extendOptions(t),this.initElement(),this.append()}destroy(){this.remove()}extendOptions(t){this.options=(0,r.extend)(this.options,t)}initElement(){this.element=(0,r.convertToHtml)(this.options.template)}append(){this.hide(),this.options.appendTo.appendChild(this.element)}remove(){this.options.appendTo.removeChild(this.element),this.element=null}show(){(0,o.showElement)(this.element)}hide(){(0,o.hideElement)(this.element)}setState({top:t,left:e,height:n,visible:i}){this.setPosition({top:t,left:e}),this.setVisibility(i),this.setSize({height:n})}setSize({height:t}){this.element.style.height=`${t}px`}getIsVisible(){return(0,o.isVisible)(this.element)}getSize(){const t=this.element.style.display,e=this.element.style.visibility;this.element.style.visibility="hidden",this.element.style.display="block";const n=this.element.offsetWidth,i=this.element.offsetHeight;return this.element.style.display=t,this.element.style.visibility=e,{width:n,height:i}}setVisibility(t){t?this.show():this.hide()}setPosition({top:t=0,left:e=0}){this.element.style.top=`${t}px`,this.element.style.left=`${e}px`}getOffsetState(t,e){const n=(0,i.getOffset)(t),{offsetWidth:r,offsetHeight:o}=t;return{top:n.top,left:n.left+(e?r:0),height:o}}}},6589:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropTarget=void 0;const i=n(8863),r=n(193),o=n(9196);class s extends i.Component{constructor(t,e){super(t,e),this.options={id:(0,r.guid)(),group:null,itemSelector:"",allowsDragFrom:()=>!0,allowsDropFrom:()=>!0,events:{dragEnter:null,dragLeave:null,dragOver:null,drop:null}},this.extendOptions(e),(0,o.setComponentInstance)(this.options.id,this),s.InstancesByGroup[this.options.group]||(s.InstancesByGroup[this.options.group]=new Set),s.InstancesByGroup[this.options.group].add(this)}destroy(){s.InstancesByGroup[this.options.group]&&s.InstancesByGroup[this.options.group].delete(this),(0,o.removeComponentInstance)(this.options.id),super.destroy()}triggerDragEnter(t){this.trigger("dragEnter",t)}triggerDragLeave(t){this.trigger("dragLeave",t)}triggerDragOver(t){this.trigger("dragOver",t)}triggerDrop(t){this.trigger("drop",t)}allowsDragFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDragFrom(t,e)}allowsDropFrom(t,e){return t&&t.options.group===this.options.group&&this.options.allowsDropFrom(t,e)}}e.DropTarget=s,s.InstancesByGroup={},s.forEachInstanceInGroup=(t,e)=>{const n=s.InstancesByGroup[t]||new Set;for(let t of n)t&&t instanceof s&&e(t)}},4781:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initGroupable=function(t,e){(0,r.initComponent)(i.Groupable,(0,r.addComponentSuffix)(t,"Groupable"),e)},e.destroyGroupable=function(t){(0,r.destroyComponent)((0,r.addComponentSuffix)(t,"Groupable"))};const i=n(9115),r=n(1843)},9115:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Groupable=void 0;const i=n(6589),r=n(1843),o=n(1089),s=(0,r.toDataAttr)("field"),a=(0,r.toDataAttr)("text"),l=".k-grouping-drop-container",c=".k-chip",h=[l,c].join(",");class u extends r.Component{constructor(t,e={}){super(t,e),this.options={dotNetInstance:null,parentSelector:".k-grid",dropTargetSelector:".k-grouping-header",dropTarget:{group:null,itemSelector:h},jsinterop:{addGroup:""}},this.onDropTargetDrop=t=>{const e=t.draggable.originalCurrentTarget,n=t.draggable.getElementUnderCursor(t);let i,h=n.closest(this.dropTarget.options.itemSelector)||n.querySelector(l);if(!h)return;if(h.matches(l)?(h=(0,o.last)(this.dropTarget.element.querySelectorAll(c)),i=h?1+(0,r.getElementIndex)(h,null):0):h.matches(c)&&(i=(0,r.getElementIndex)(h,null)),!(0,r.isNumber)(i)||i<0)return;const u=e.getAttribute(s),d=e.getAttribute(a);u&&i>=0&&this.invokeAddGroup({field:u,title:d,index:i})},this.allowsDragFrom=t=>!this.containsGroup(t.originalCurrentTarget)&&t.originalCurrentTarget.hasAttribute(s),this.allowsDropFrom=t=>!this.containsGroup(t.originalCurrentTarget),this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){const t=this.element.closest(this.options.parentSelector).querySelector(this.options.dropTargetSelector);t&&(this.dropTarget=new i.DropTarget(t,(0,r.deepExtend)(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}})))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}containsGroup(t){const e=t.getAttribute(s),n=Array.from(this.element.querySelectorAll(h)).map((t=>t.getAttribute(s))).includes(e);return n}invokeAddGroup(t){this.invokeMethodAsync(this.options.jsinterop.addGroup,t)}}e.Groupable=u},3183:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(4781),e),i.__exportStar(n(5032),e),i.__exportStar(n(3692),e),i.__exportStar(n(5474),e)},7561:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Resizable=void 0;const i=n(4771),r=n(1843);class o extends r.Component{constructor(t,e={}){super(t,e),this.options={events:{resizeStart:null,resize:null,resizeEnd:null},draggable:{filter:""}},this.onDraggableDragStart=t=>{this.initialLocation={pageX:t.pageX,pageY:t.pageY},this.location={pageX:t.pageX,pageY:t.pageY},this.delta={x:0,y:0},this.initialDelta={x:0,y:0},this.trigger("resizeStart",t)},this.onDraggableDrag=t=>{this.setCursorStyle(t.sender.originalCurrentTarget.style.cursor),this.calculateInitialDelta(t),this.calculateDelta(t),this.setLocation(t),this.trigger("resize",t)},this.onDraggableDragEnd=t=>{this.resetCursorStyle(),this.trigger("resizeEnd",t)},this.extendOptions(e),this.createDraggable(t)}destroy(){this.destroyDraggable(),super.destroy()}createDraggable(){this.draggable=new i.Draggable(this.element,(0,r.deepExtend)(this.options.draggable,{events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd}}))}destroyDraggable(){this.draggable&&this.draggable.destroy()}trigger(t,e={}){return super.trigger(t,(0,r.extend)(e,{initialLocation:this.initialLocation,location:this.location,delta:this.delta,initialDelta:this.initialDelta}))}calculateDelta(t){this.delta={x:t.pageX-this.location.pageX,y:t.pageY-this.location.pageY}}calculateInitialDelta(t){this.initialDelta={x:t.pageX-this.initialLocation.pageX,y:t.pageY-this.initialLocation.pageY}}setLocation({pageX:t,pageY:e}){this.location={pageX:t,pageY:e}}setCursorStyle(t){t&&(document.body.style.cursor=t)}resetCursorStyle(){document.body.style.cursor=""}}e.Resizable=o},1066:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RowDraggable=void 0;const i=n(8863),r=n(9196),o=n(4264),s=n(193),a=n(1089),l=n(4771),c=n(6533),h="forbidden",u="before",d="after",p="over",f="[data-draggable]";class g extends i.Component{constructor(t,e={}){super(t,e),this.options={group:"",filter:"",itemSelector:"",draggableIcons:{cancelIconMarkup:"",insertMiddleIconMarkup:"",plusIconMarkup:""},dropClueTemplate:'<div class="k-drop-hint k-drop-hint-h" style="position: absolute; z-index: 10000;">\n                               <div class="k-drop-hint-start"></div>\n                               <div class="k-drop-hint-line"></div>\n                           </div>',hint:null,allowDropOver:!0,events:{itemDrag:null,itemDragStart:null,itemDrop:null}},this.onDragStart=t=>{const e=this.getItem(t.originalCurrentTarget);e.closest(f)===this.element?(this.dragging=!0,this.trigger("itemDragStart",(0,s.extend)(t,{sourceItem:e})),this.createDropClue()):this.dragging=!1},this.onDrag=t=>{if(!this.dragging)return;const e=this.getElementUnderCursor(t),n=(0,r.getComponentInstanceBySelector)(e,f);let i,o;n&&n.getDropSettings?(i=n.getDropSettings(),n.getDropPosition?this.lastDropPosition=n.getDropPosition(t):this.lastDropPosition=this.getDropPosition(t,i)):this.lastDropPosition=h,this.updateDragClueState(this.draggable.hint);let a=i&&i.offsetDropClue;i&&i.dropClueTargetSelector&&(o=e&&e.closest(i.dropClueTargetSelector)),this.updateDropClueState(o,a);const[l,c]=this.getDestinationParts(n,e,t),u={sourceItem:this.getItem(t.originalCurrentTarget),destinationIndex:c,destinationElement:e,destinationComponentId:l,dropPosition:this.lastDropPosition===h?null:this.lastDropPosition};this.trigger("itemDrag",(0,s.extend)(t,u))},this.onDragEnd=t=>{if(!this.dragging)return;this.destroyDropClue();const e=this.getItem(t.originalCurrentTarget),n=this.getElementUnderCursor(t),i=this.getItem(n),o=(0,r.getComponentInstanceBySelector)(n,f),[a,l]=this.getDestinationParts(o,n,t),c=(0,s.extend)(t,{destinationIndex:l,destinationElement:n,destinationComponentId:a,dropPosition:this.lastDropPosition===h?null:this.lastDropPosition});this.lastDropPosition!==h?e&&e!==i&&(this.trigger("itemDrop",(0,s.extend)(c,{sourceItem:e})),this.trigger("itemDragEnd",c)):this.trigger("itemDragEnd",c)},this.getIconForDropPosition=()=>{switch(this.lastDropPosition){case"forbidden":return(0,s.convertToHtml)(this.options.draggableIcons.cancelIconMarkup);case"before":case"after":return(0,s.convertToHtml)(this.options.draggableIcons.insertMiddleIconMarkup);case"over":return(0,s.convertToHtml)(this.options.draggableIcons.plusIconMarkup)}},this.extendOptions(e),this.createDraggable()}destroy(){this.draggable&&this.draggable.destroy(),super.destroy()}createDraggable(){if(this.element){const t=this.options.hint;this.draggable=new l.Draggable(this.element,(0,s.deepExtend)(this.options,{offset:t=>{const e=t.getBoundingClientRect();return{x:e.width/2+10,y:e.height/2+10}},hint:e=>{let n=t(e);return this.updateDragClueState(n),n},events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}}getItem(t){return t.closest(this.options.itemSelector)}createDropClue(){this.dropClue||(this.dropClue=new c.DropClue({template:this.options.dropClueTemplate}))}getDestinationParts(t,e,n){let i="",r="";return t&&(i=t.getId(),r=t.getDropItemIndex(e,n)),[i,r]}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}getDropPosition(t,e){const n=this.getElementUnderCursor(t),i=n&&n.closest(e.dropClueTargetSelector);if(e.dropClueEmptySelector&&n&&n.closest(e.dropClueEmptySelector))return p;if(!e.dropClueTargetSelector||!i||i===t.originalCurrentTarget.closest(e.dropClueTargetSelector))return h;const r=i.getBoundingClientRect(),o=e.allowDropOver?4:2,s=r.height/o,a=t.clientY,l=r.top;return a<l+s?u:a>=l+r.height-s?d:p}updateDragClueState(t){if(t){const e=t.querySelector(".k-drag-status"),n=this.getIconForDropPosition();t.replaceChild(n,e)}}updateDropClueState(t,e){if(this.shouldHideDropClue()||!t)return void this.dropClue.hide();this.dropClue.show();const n=(0,a.getOffset)(t);let i=n.top,r=n.left;const s=(0,o.isDirectionRtl)(this.element);if(s&&(r=n.right),this.lastDropPosition===d&&(i+=t.offsetHeight),!e){const t=s?-1:1;r+=this.dropClue.element.offsetWidth/2*t}this.dropClue.setPosition({top:i,left:r})}cancelDrag(){this.draggable.cancelDrag()}shouldHideDropClue(){return this.lastDropPosition===p||this.lastDropPosition===h}getElementUnderCursor(t){let e,n=this.dropClue&&this.dropClue.getIsVisible();return n&&this.dropClue.hide(),e=document.elementFromPoint(t.clientX,t.clientY),n&&this.dropClue.show(),e}}e.RowDraggable=g},1089:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toClassSelector=e.getOffset=e.preventDefault=e.sortByInitializationIndex=e.sortByNavigationId=e.getLeafElements=e.getLeafChildColumns=e.getChildColumns=e.getParentColumnInitializationIndex=e.getColumnInitializationIndex=e.getColumnHasChildren=e.getColumnLevel=e.getElementFromPoint=e.last=e.byColumnInitializationIndex=void 0;const i=n(193),r="col-initialization-index",o="cell-navigation-id";e.byColumnInitializationIndex=t=>(0,i.toAttrValueQuerySelector)((0,i.toDataAttr)(r),t);e.last=t=>{if(t.length)return t[t.length-1]};e.getElementFromPoint=({clientX:t,clientY:e})=>{if((0,i.isDefined)(t)&&(0,i.isDefined)(e))return document.elementFromPoint(t,e)};e.getColumnLevel=t=>{const e=(0,i.parseAttrToInt)((0,i.toDataAttr)("level"),t);return e>=0?e:1};e.getColumnHasChildren=t=>(t.getAttribute((0,i.toDataAttr)("has-children"))||"").toLowerCase()===(!0).toString();e.getColumnInitializationIndex=t=>s(t,(0,i.toDataAttr)(r));e.getParentColumnInitializationIndex=t=>s(t,(0,i.toDataAttr)("parent-col-initialization-index"));const s=(t,e)=>{if(!t)return[].indexOf(t);return(0,i.parseAttrToInt)(e,t)};e.getChildColumns=(t,n)=>{const i=(0,e.getColumnInitializationIndex)(t),r=(0,e.getLeafElements)(n);let o=[];for(let t=0;t<n.length;t++){const s=n[t],a=(0,e.getParentColumnInitializationIndex)(s),l=(0,e.getColumnInitializationIndex)(s),c=r.indexOf(s);if(a===i){o.push({parentIndex:a,index:l,leafIndex:c,element:s});const t=(0,e.getChildColumns)(s,n);o=o.concat(t)}}return o};e.getLeafChildColumns=(t,n)=>{const i=(0,e.getChildColumns)(t,n);return i.filter((t=>i.every((e=>!a(t.element,e.element)))))};e.getLeafElements=t=>t.filter((e=>t.every((t=>!a(e,t)))));e.sortByNavigationId=(t,e)=>{const n=(0,i.parseAttrToInt)((0,i.toDataAttr)(o),t),r=(0,i.parseAttrToInt)((0,i.toDataAttr)(o),e);return n>r?1:n<r?-1:0};e.sortByInitializationIndex=(t,n)=>{const i=(0,e.getColumnInitializationIndex)(t),r=(0,e.getColumnInitializationIndex)(n);return i>r?1:i<r?-1:0};const a=(t,n)=>(0,e.getColumnInitializationIndex)(t)===(0,e.getParentColumnInitializationIndex)(n);e.preventDefault=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()};e.getOffset=t=>{const{clientTop:e,clientLeft:n}=(t=>t.ownerDocument.documentElement)(t),{pageYOffset:i,pageXOffset:r}=(t=>t.ownerDocument.defaultView)(t),{top:o,left:s,right:a}=t.getBoundingClientRect();return{top:o+i-e,left:s+r-n,right:a+r-n}};e.toClassSelector=t=>`.${t}`},3301:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDrawer=function(t,e){(0,r.initComponent)(i.Drawer,t,e)};const i=n(4019),r=n(1843)},4019:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Drawer=void 0;const i=n(1843),r=[i.Key.ENTER,i.Key.ARROWDOWN,i.Key.ARROWUP],o=()=>(0,i.delay)(20);class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{keydown:"",focusout:"",collapse:""},mode:"",duration:0},this.onMouseDown=t=>{const e=t.target;"overlay"!==this.options.mode||(0,i.isChild)(e,[this.element])||this.invokeCollapse()},this.onKeyDown=t=>{this.invokeKeyDown(t)},this.onFocusOut=t=>{this.invokeFocusOut(t)},this.extendOptions(e),this.bindEvents(),this.createNavigationService()}expandAsync(){return o().then((()=>this.onTransitionEnd()))}collapseAsync(){return o().then((()=>this.onTransitionEnd()))}destroy(){this.unbindEvents(),this.destroyNavigationService(),super.destroy()}bindEvents(){this.element.addEventListener("focusout",this.onFocusOut),document.addEventListener("mousedown",this.onMouseDown,!0)}unbindEvents(){this.element.removeEventListener("focusout",this.onFocusOut),document.removeEventListener("mousedown",this.onMouseDown,!0)}focusItem(t){const e=this.element.querySelector(`[data-index="${t}"]`);e instanceof HTMLElement&&e.focus()}cancelCallback(){this.timer&&this.timer.cancel(),this.timer=null}onTransitionEnd(){const t=this.options.duration;return this.timer=(0,i.createCancellableTimerPromise)(t),this.timer.promise}createNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(r,this.onKeyDown)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocusOut(t){const e=t.target.closest(".k-drawer-item[role='menuitem'"),n=e?parseInt(e.getAttribute("data-index")):null;setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,n)}),1)}invokeCollapse(){this.invokeMethodAsync(this.options.jsinterop.collapse)}}e.Drawer=s},7147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(3301),e)},5749:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDropDownButton=function(t,e){(0,r.initComponent)(i.DropDownButton,t,e)};const i=n(5539),r=n(1843)},5539:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropDownButton=void 0;const i=n(7992);class r extends i.DropDownButtonBase{constructor(t,e){super(t,e),this.extendOptions(e)}}e.DropDownButton=r},2251:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(5749),e)},270:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initAutoComplete=function(t,e){(0,r.initComponent)(i.AutoComplete,t,e)};const i=n(9872),r=n(1843)},9872:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoComplete=void 0;const i=n(1843),r=n(9073),o=[i.Key.ARROWDOWN,i.Key.ARROWUP];class s extends r.AutoCompleteBase{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(o,this.onSuggestionListKeys)}}e.AutoComplete=s},9073:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AutoCompleteBase=void 0;const i=n(1843),r=n(5140),o="blur",s="focus";class a extends r.DropdownBase{constructor(t,e){super(t,e),this.options={value:null,suggestionListId:null,jsinterop:{}},this.onBlur=t=>{const e=t.relatedTarget,n=e&&e.closest(".k-input-prefix"),r=e&&e.closest(".k-input-suffix");n||r?this.invokeBlur():(0,i.ownsElement)(this.suggestionListElement,e)||(0,i.ownsElement)(this.element,e)?e.closest(".k-actionsheet")||this.focus():this.invokeBlur()},this.onFocus=()=>{this.invokeFocus()},this.extendOptions(e),this.input=this.element.querySelector("input"),this.setValue(e.value),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.input=null}bindEvents(){this.input.addEventListener(o,this.onBlur),this.input.addEventListener(s,this.onFocus)}unbindEvents(){this.input.removeEventListener(o,this.onBlur),this.input.removeEventListener(s,this.onFocus)}setValue(t){this.input&&(this.input.value=t)}focus(){this.input&&this.input.focus()}}e.AutoCompleteBase=a},8092:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initComboBox=function(t,e){(0,r.initComponent)(i.ComboBox,t,e)};const i=n(1478),r=n(1843)},1478:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ComboBox=void 0;const i=n(1843),r=n(9073),o=[i.Key.ARROWDOWN,i.Key.ARROWUP];class s extends r.AutoCompleteBase{constructor(t,e){super(t,e)}bindEvents(){super.bindEvents(),this.navigationService.bind(o,this.invokeKeyDown)}}e.ComboBox=s},1979:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDropDownGroupHeader=function(t,e){(0,r.initComponent)(i.DropdownGroupHeader,t,e)};const i=n(3489),r=n(1843)},3489:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownGroupHeader=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,parentSelector:null,containerSelector:null,jsinterop:{focus:null,blur:null,keydown:null}},this.onScroll=()=>{const t=(0,i.firstVisibleItem)(this.scrollableContainer,"li");if(!t)return;const e=(0,i.parseAttrToInt)("data-group-index",t);this.currentGroupIndex!==e&&(this.currentGroupIndex=e,this.invokeMethodAsync(this.options.jsinterop.groupChanged,e))},this.extendOptions(e),this.scrollableContainer=t.closest(this.options.containerSelector).querySelector(this.options.parentSelector),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.scrollableContainer.addEventListener("scroll",this.onScroll)}unbindEvents(){this.scrollableContainer.removeEventListener("scroll",this.onScroll)}}e.DropdownGroupHeader=r},5140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropdownBase=void 0;const i=n(1843),r=[i.Key.ENTER,i.Key.ESC],o=[i.Key.HOME,i.Key.END];class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,suggestionListId:null,jsinterop:{focus:null,blur:null,keydown:null}},this.onKeyDown=t=>(this.invokeKeyDown(t),this.isClosed()),this.onSuggestionListKeys=t=>!!this.isClosed()||(this.invokeKeyDown(t),!1),this.invokeKeyDown=t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)},this.invokeBlur=()=>{this.invokeMethodAsync(this.options.jsinterop.blur)},this.invokeFocus=()=>{this.invokeMethodAsync(this.options.jsinterop.focus)},this.setOptions(e),this.initNavigationService()}setOptions(t){super.setOptions(t),this.suggestionListElement=(0,i.getElementByDataId)(t.suggestionListId)}destroy(){this.destroyNavigationService(),this.suggestionListElement=null,super.destroy()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(r,this.onKeyDown),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.onKeyDown),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`,this.onKeyDown),this.navigationService.bind(o,this.onSuggestionListKeys)}destroyNavigationService(){this.navigationService.destroy()}isClosed(){return!this.suggestionListElement||!this.suggestionListElement.children[0].children.length}}e.DropdownBase=s},5368:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initDropDownList=function(t,e){(0,r.initComponent)(i.DropDownList,t,e)};const i=n(4602),r=n(1843)},4602:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropDownList=void 0;const i=n(1843),r=n(5140),o="blur",s="click",a=[i.Key.ARROWDOWN,i.Key.ARROWUP];class l extends r.DropdownBase{constructor(t,e){super(t,e),this.focus=()=>{(0,i.hasClass)("k-disabled",this.element)||this.element.focus()},this.onBlur=t=>{const e=t.relatedTarget;(0,i.ownsElement)(this.suggestionListElement,e)?e.closest(".k-list-filter,.k-actionsheet")||this.element.focus():this.invokeBlur()},this.onFocus=()=>{this.invokeFocus()},this.initLabel(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(o,this.onBlur),this.element.addEventListener("focus",this.onFocus),this.bindLabelEvent(),this.navigationService.bind(a,this.invokeKeyDown),this.navigationService.bind("printableKey",this.invokeKeyDown)}unbindEvents(){this.element.removeEventListener(o,this.onBlur),this.unbindLabelEvent()}initLabel(){const t=this.element.getAttribute("id"),e=document.querySelector("[for='"+t+"']");if(e&&!this.element.getAttribute("aria-labelledby")){let t=e.getAttribute("id");t||(t=(0,i.guid)(),e.setAttribute("id",t)),this.element.setAttribute("aria-labelledby",t)}this.label=e}bindLabelEvent(){this.label&&this.label.addEventListener(s,this.focus)}unbindLabelEvent(){this.label&&this.label.removeEventListener(s,this.focus)}}e.DropDownList=l},3006:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initListFilter=function(t,e){(0,r.initComponent)(i.ListFilter,t,e)};const i=n(8608),r=n(1843)},8608:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListFilter=void 0;const i=n(1843),r=n(1843),o="blur",s="keydown",a=[i.Key.ARROWDOWN,i.Key.ARROWUP,i.Key.ENTER,i.Key.ESC,`${i.KeyModifiers.ALT} ${i.Key.ARROWUP}`];class l extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,anchorDataId:"",jsinterop:{blur:null,keydown:null}},this.onBlur=t=>{const e=t.relatedTarget;e&&e.closest(`[data-id="${this.options.anchorDataId}"]`)||((0,i.ownsElement)(this.element.closest(".k-popup"),e)?this.element.focus():this.invokeBlur())},this.onTabKeyDown=t=>{t.code===i.Key.TAB&&this.focusAnchor()},this.focusAnchor=()=>{const t=(0,r.getElementByDataId)(`${this.options.anchorDataId}`,null);t&&t.focus()},this.onKeyDown=t=>{this.invokeKeyDown(t)},this.invokeBlur=()=>{this.invokeMethodAsync(this.options.jsinterop.blur)},this.invokeKeyDown=t=>{this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)},this.extendOptions(e),this.bindEvents(),this.initNavigationService()}destroy(){this.destroyNavigationService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(o,this.onBlur),this.element.addEventListener(s,this.onTabKeyDown)}unbindEvents(){this.element.removeEventListener(o,this.onBlur),this.element.removeEventListener(s,this.onTabKeyDown)}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(a,this.onKeyDown)}destroyNavigationService(){this.navigationService.destroy()}}e.ListFilter=l},4348:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(270),e),i.__exportStar(n(8092),e),i.__exportStar(n(5368),e),i.__exportStar(n(7220),e),i.__exportStar(n(232),e),i.__exportStar(n(3006),e),i.__exportStar(n(1979),e)},232:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMultiColumnComboBox=function(t,e){(0,r.initComponent)(i.MultiColumnComboBox,t,e)};const i=n(4026),r=n(1843)},4026:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiColumnComboBox=void 0;const i=n(1843),r=n(9073),o=n(4264),s=n(2667),a=[i.Key.ARROWDOWN,i.Key.ARROWUP];class l extends r.AutoCompleteBase{constructor(t,e){super(t,e),this.options={dotNetInstance:null,columnsTotalWidth:null},this.extendOptions(e),this.adjustScrollbarPadding()}destroy(){this.destroyContentScrollSync(),super.destroy()}bindEvents(){super.bindEvents(),this.navigationService.bind(a,this.invokeKeyDown)}adjustScrollbarPadding(){(0,o.setScrollbarSizeCssVariables)()}createContentScrollSync(){this.contentScrollSync&&this.destroyContentScrollSync(),this.tableScroller=this.suggestionListElement.querySelector(".k-table-scroller"),this.tableHeaderWrap=this.suggestionListElement.querySelector(".k-table-header-wrap"),this.contentScrollSync=new s.ScrollSync(this.tableScroller,{horizontal:!0,vertical:!1,syncFromConnections:!0,connections:[this.tableHeaderWrap]})}destroyContentScrollSync(){this.contentScrollSync&&(this.contentScrollSync.destroy(),this.contentScrollSync=null,this.tableScroller=null,this.tableHeaderWrap=null)}onOpen(){this.suggestionListElement&&this.createContentScrollSync()}onClose(){this.suggestionListElement&&this.destroyContentScrollSync()}}e.MultiColumnComboBox=l},7220:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMultiSelect=function(t,e){(0,r.initComponent)(i.MultiSelect,t,e)};const i=n(1982),r=n(1843)},1982:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MultiSelect=void 0;const i=n(9073),r=n(1843),o="click";class s extends i.AutoCompleteBase{constructor(t,e){super(t,e),this.onClick=t=>{t.target instanceof HTMLElement&&!t.target.closest(".k-chip")&&!t.target.closest(".k-clear-value")&&(this.focus(),this.invokeClick())},this.bindMultiSelectEvents()}destroy(){this.unbindMultiSelectEvents(),super.destroy()}bindMultiSelectEvents(){this.element.addEventListener(o,this.onClick,!0),this.navigationService.bind([r.Key.ARROWDOWN,r.Key.ARROWUP],this.onSuggestionListKeys),this.navigationService.bind([r.Key.ARROWLEFT,r.Key.ARROWRIGHT],this.onTagFocus.bind(this)),this.navigationService.bind([r.Key.BACKSPACE,r.Key.DELETE],this.onTagDelete.bind(this))}unbindMultiSelectEvents(){this.element.removeEventListener(o,this.onClick,!0)}onTagDelete(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}onTagFocus(t){return!!this.input.value||(this.invokeKeyDown(t),!1)}invokeClick(){const t=this.options.jsinterop.click;this.invokeMethodAsync(t)}}e.MultiSelect=s},6848:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.schema=void 0;const i=n(7085),r=n(5906);i.nodes.table.attrs.class={default:"k-table"};const o=Object.assign(Object.assign({},i.nodes),{video:{attrs:Object.assign({src:{default:null},controls:{},poster:{default:null},width:{default:null},height:{default:null}},(0,r.commonAttributes)()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"video",getAttrs:r.getAttributes}],toDOM:t=>["video",(0,r.setAttributes)(t.attrs),0]},audio:{attrs:Object.assign({controls:{},src:{default:null},width:{default:null},height:{default:null}},(0,r.commonAttributes)()),group:"block",content:"source*",draggable:!0,parseDOM:[{tag:"audio",getAttrs:r.getAttributes}],toDOM:t=>["audio",(0,r.setAttributes)(t.attrs),0]},iframe:{attrs:Object.assign({src:{},width:{default:null},height:{default:null}},(0,r.commonAttributes)()),group:"block",draggable:!0,parseDOM:[{tag:"iframe",getAttrs:r.getAttributes}],toDOM:t=>["iframe",(0,r.setAttributes)(t.attrs)]},source:{attrs:{src:{default:null},type:{default:null}},inline:!0,group:"inline",parseDOM:[{tag:"source",getAttrs:r.getAttributes}],toDOM:t=>["source",t.attrs]}});e.schema=new i.Schema({nodes:o,marks:i.marks})},9569:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rtlStyle=e.defaultStyle=void 0,e.defaultStyle='\nhtml, body {\n    margin: 0;\n    height: 100%;\n    padding: 0;\n}\n\nhtml {\n  min-height: 100%;\n}\n\nbody {\n  box-sizing: border-box;\n  position: relative;\n  padding: 8px;\n}\n\n.ProseMirror-selectednode {\n  outline: 2px solid #8cf;\n}\n\ndiv.ProseMirror {\n  position: relative;\n  min-height: 100%;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  white-space: break-spaces;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n  font-feature-settings: "liga" 0; /* the above doesn\'t seem to work in Edge */\n}\n\ndiv.ProseMirror:focus {\n  outline: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-hideselection *::selection { background: transparent; }\n.ProseMirror-hideselection *::-moz-selection { background: transparent; }\n.ProseMirror-hideselection { caret-color: transparent; }\n\n.ProseMirror li {\n  position: relative;\n}\n\nli.ProseMirror-selectednode {\n  outline: none;\n}\n\nli.ProseMirror-selectednode:after {\n  content: "";\n  position: absolute;\n  left: -32px;\n  right: -2px;\n  top: -2px;\n  bottom: -2px;\n  border: 2px solid #8cf;\n  pointer-events: none;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n\n.k-editor-resize-handles-wrapper {\n  position: absolute;\n  visibility: hidden;\n}\n\n.k-editor-resize-handle {\n  position: absolute;\n  visibility: visible;\n  background-color: #fff;\n  border: 1px solid #000;\n  z-index: 100;\n  width: 5px;\n  height: 5px;\n}\n\n.k-editor-resize-handle.northwest {\n  top: 0;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: nw-resize;\n}\n\n.k-editor-resize-handle.north {\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  cursor: n-resize;\n}\n\n.k-editor-resize-handle.northeast {\n  top: 0;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: ne-resize;\n}\n\n.k-editor-resize-handle.southwest {\n  left: 0;\n  bottom: 0;\n  transform: translate(-50%, 50%);\n  cursor: sw-resize;\n}\n\n.k-editor-resize-handle.south {\n  bottom: 0;\n  left: 50%;\n  transform: translate(-50%, 50%);\n  cursor: s-resize;\n}\n\n.k-editor-resize-handle.southeast {\n  right: 0;\n  bottom: 0;\n  transform: translate(50%, 50%);\n  cursor: se-resize;\n}\n\n.k-editor-resize-handle.west {\n  top: 50%;\n  left: 0;\n  transform: translate(-50%, -50%);\n  cursor: w-resize;\n}\n\n.k-editor-resize-handle.east {\n  top: 50%;\n  right: 0;\n  transform: translate(50%, -50%);\n  cursor: e-resize;\n}\n\n.ProseMirror .tableWrapper {\n  overflow-x: auto;\n  margin: 1em 0;\n}\n\n.k-editor-resize-wrap-element {\n  display: inline-block;\n  position: relative;\n}\n\n.ProseMirror .row-resize-handle {\n  position: absolute;\n  right: 0; left: 0; bottom: 0;\n  transform: translate(0, 50%);\n  height: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor-vertical {\n  cursor: sn-resize;\n  cursor: row-resize;\n}\n\n.k-editor-resize-wrap-element table td p,\n.k-editor-resize-wrap-element table th p {\n  margin: 0 auto;\n}\n\n.ProseMirror table {\n  margin: 0;\n  border-collapse: collapse;\n  table-layout: fixed;\n  width: 100%;\n  overflow: hidden;\n}\n\n.ProseMirror td, .ProseMirror th {\n  min-width: 1em;\n  border: 1px solid #ddd;\n  padding: 3px 5px;\n  vertical-align: top;\n  box-sizing: border-box;\n  position: relative;\n}\n\n.ProseMirror th {\n  font-weight: bold;\n  text-align: left;\n}\n\n.ProseMirror .column-resize-handle {\n  position: absolute;\n  right: -2px; top: 0; bottom: 0;\n  width: 4px;\n  z-index: 20;\n  background-color: #adf;\n  pointer-events: none;\n}\n\n.ProseMirror.resize-cursor {\n  cursor: ew-resize;\n  cursor: col-resize;\n}\n\n/* Give selected cells a blue overlay */\n.ProseMirror .selectedCell:after {\n  z-index: 2;\n  position: absolute;\n  content: "";\n  left: 0; right: 0; top: 0; bottom: 0;\n  background: rgba(200, 200, 255, 0.4);\n  pointer-events: none;\n}\n',e.rtlStyle="\nbody {\n    direction: rtl;\n}\n"},5906:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDefaultAttributes=e.commonAttributes=e.setCellAttrs=e.setAttributes=e.getAttributes=void 0;e.getAttributes=t=>{const e={};let n,i=t.attributes;for(let t=0;t<i.length;t++)n=i[t],e[n.name]=n.value;return e};e.setAttributes=(t,e)=>{const n={};for(let i in t)i&&null!==t[i]&&i!==e&&(n[i]=t[i]);return n};e.setCellAttrs=t=>{let e=Object.assign({},t);return 1!==t.colspan?e.colspan=t.colspan:e.colspan=null,1!==t.rowspan?e.rowspan=t.rowspan:e.rowspan=null,e};e.commonAttributes=()=>(0,e.createDefaultAttributes)(["class","id","style"]);e.createDefaultAttributes=t=>t.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:{default:null}})),{})},5174:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.editorCommands=void 0;const i=n(7085),r=n(6848),o=t=>(e,n)=>{(0,i.isAligned)(e,t)?(0,i.alignBlocks)(i.alignRemoveRules)(e,n):(0,i.alignBlocks)(t)(e,n)},s={bold:()=>(0,i.toggleInlineFormat)(i.bold),cleanFormatting:()=>(0,i.removeAllMarks)({except:r.schema.marks.link}),createLink:t=>(0,i.applyLink)({mark:"link",attrs:t}),fontFamily:t=>(0,i.applyInlineStyle)({style:"font-family",value:t.value}),fontSize:t=>(0,i.applyInlineStyle)({style:"font-size",value:t.value}),insertFile:t=>(0,i.applyLink)({mark:"link",attrs:t}),insertText:t=>(0,i.insertText)(t),italic:()=>(0,i.toggleInlineFormat)(i.italic),strikethrough:()=>(0,i.toggleInlineFormat)(i.strikethrough),subscript:()=>(0,i.toggleInlineFormat)(i.subscript),superscript:()=>(0,i.toggleInlineFormat)(i.superscript),underline:()=>(0,i.toggleInlineFormat)(i.underline),unlink:()=>(0,i.removeLink)(i.link),foreColor:t=>(0,i.applyInlineStyle)({style:"color",value:t.value}),backColor:t=>(0,i.applyInlineStyle)({style:"background-color",value:t.value})},a={alignCenter:()=>o(i.alignCenterRules),alignJustify:()=>o(i.alignJustifyRules),alignLeft:()=>o(i.alignLeftRules),alignRight:()=>o(i.alignRightRules),format:t=>(0,i.formatBlockElements)(t.value),insertOrderedList:()=>i.toggleOrderedList,insertUnorderedList:()=>i.toggleUnorderedList,outdent:()=>i.outdent,indent:()=>i.indent,insertImage:t=>(0,i.insertImage)(t),redo:()=>i.redo,undo:()=>i.undo,setHtml:t=>(0,i.setHtml)(t.value,"setHTML",{preserveWhitespace:!1}),insertHtml:t=>(t=>(e,n)=>{const o=document.createElement("div");o.innerHTML=t.value;const s=i.DOMParser.fromSchema(r.schema).parse(o,{topNode:t.inline?r.schema.nodes.paragraph.create():null});s&&s.firstChild&&n(e.tr.replaceSelectionWith(s.firstChild,!1))})(t)},l={insertTable:t=>(t=>(e,n)=>{const r=(0,i.createTable)(e.schema.nodes,t.rows,t.cols);r&&(0,i.insertNode)(r,!0)(e,n)})(t),addColumnBefore:()=>i.addColumnBefore,addColumnAfter:()=>i.addColumnAfter,addRowBefore:()=>i.addRowBefore,addRowAfter:()=>i.addRowAfter,deleteRow:()=>i.deleteRow,deleteColumn:()=>i.deleteColumn,mergeCells:()=>i.mergeCells,splitCell:()=>i.splitCell,deleteTable:()=>i.deleteTable};e.editorCommands=Object.assign(Object.assign(Object.assign({},s),a),l)},9505:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDialogContexts=void 0;const i=n(7085),r=n(6848);e.getDialogContexts=t=>({createLink:()=>{const e=(0,i.getMark)(t.state,r.schema.marks.link);return{href:e?e.attrs.href:null,title:e?e.attrs.title:null,target:e?e.attrs.target:null}},insertImage:()=>{const e=(0,i.getNodeFromSelection)(t.state);return{src:e?e.attrs.src:null,alt:e?e.attrs.alt:null,width:e?e.attrs.width:null,height:e?e.attrs.height:null}},setHtml:()=>({value:(0,i.getHtml)(t.state)})})},5325:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBuiltInToolState=e.getToolsState=void 0;const i=n(7085),r=n(6848);e.getToolsState=(t,n)=>{const i=(0,e.getBuiltInToolState)(t),r=Object.keys(n);let s=!1;for(const t of r){const e=i[t];let r=n[t];e&&r&&!o(e,r)&&(s=!0,n[t]=e)}return{stateChanged:s,state:n}};const o=(t,e)=>{const n=t.enabled===e.enabled;let i=!0;return i=t.hasOwnProperty("selectedValue")?t.selectedValue===e.selectedValue:t.selected===e.selected,n&&i},s=(t,e)=>{const n=[...(0,i.getInlineStyles)(t,{name:e,value:/^.+$/})];return 1===n.length?n[0]:null},a=t=>t.selection instanceof i.CellSelection?null:(0,i.activeNode)(t).tag;e.getBuiltInToolState=t=>({alignCenter:{selected:(0,i.isAligned)(t,i.alignCenterRules),enabled:!0},alignJustify:{selected:(0,i.isAligned)(t,i.alignJustifyRules),enabled:!0},alignLeft:{selected:(0,i.isAligned)(t,i.alignLeftRules),enabled:!0},alignRight:{selected:(0,i.isAligned)(t,i.alignRightRules),enabled:!0},bold:{selected:(0,i.hasMark)(t,i.bold),enabled:!0},cleanFormatting:{selected:!1,enabled:!t.selection.empty},format:{selectedValue:a(t),enabled:!0},indent:{enabled:(0,i.canIndentAsListItem)(t,r.schema.nodes.list_item)||(0,i.canBeIndented)(t,i.indentRules)},insertOrderedList:{selected:(0,i.hasNode)(t,r.schema.nodes.ordered_list),enabled:!0},insertUnorderedList:{selected:(0,i.hasNode)(t,r.schema.nodes.bullet_list),enabled:!0},italic:{selected:(0,i.hasMark)(t,i.italic),enabled:!0},unlink:{enabled:(0,i.hasMark)(t,i.link)},outdent:{enabled:(0,i.canOutdentAsListItem)(t,i.outdentRules)||(0,i.isIndented)(t,i.outdentRules.nodes)},redo:{enabled:(0,i.redo)(t)},strikethrough:{selected:(0,i.hasMark)(t,i.strikethrough),enabled:!0},style:{selected:(0,i.getActiveMarks)(t,r.schema.marks.style),enabled:!0},fontFamily:{selectedValue:s(t,"font-family"),enabled:!0},fontSize:{selectedValue:s(t,"font-size"),enabled:!0},foreColor:{selectedValue:s(t,"color"),enabled:!0},backColor:{selectedValue:s(t,"background-color"),enabled:!0},subscript:{selected:(0,i.hasMark)(t,i.subscript),enabled:!0},superscript:{selected:(0,i.hasMark)(t,i.superscript),enabled:!0},underline:{selected:(0,i.hasMark)(t,i.underline),enabled:!0},undo:{enabled:(0,i.undo)(t)},createLink:{enabled:!t.selection.empty||(0,i.hasMark)(t,i.link)},insertFile:{enabled:!t.selection.empty},insertImage:{enabled:!0},viewSource:{enabled:!0},insertTable:{enabled:!0},addColumnBefore:{enabled:(0,i.addColumnBefore)(t)},addColumnAfter:{enabled:(0,i.addColumnAfter)(t)},addRowBefore:{enabled:(0,i.addRowBefore)(t)},addRowAfter:{enabled:(0,i.addRowAfter)(t)},deleteRow:{enabled:(0,i.deleteRow)(t)},deleteColumn:{enabled:(0,i.deleteColumn)(t)},mergeCells:{enabled:(0,i.mergeCells)(t)},splitCell:{enabled:(0,i.splitCell)(t)},deleteTable:{enabled:(0,i.deleteTable)(t)}})},8181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initEditor=function(t,e){(0,i.initComponent)(r.Editor,t,e)};const i=n(1843),r=n(8291)},8291:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Editor=void 0;const i=n(7085),r=n(6848),o=n(9569),s=n(5174),a=n(5325),l=n(9505),c=n(4927),h=n(1843),u="iframe",d="undefined"!=typeof window&&/Firefox/.test(window.navigator.userAgent);class p extends h.Component{constructor(t,e){super(t,e),this.schemaToUse=r.schema,this.options={editMode:u,schema:"",plugins:"",debounceDelay:100},this.initialize=()=>{this.initContent(),this.initEditor()},this.extendOptions(e),this.iframeEditMode=this.options.editMode===u,this.iframe=this.element.querySelector(".k-iframe"),this.div=this.element.querySelector(".k-content"),this.toolbar=this.element.querySelector(".k-toolbar"),this.schemaProvider=window[this.options.schema],this.pluginsProvider=window[this.options.plugins],this.bindEvents(),d&&!this.shouldInitialize()||this.initialize()}bindEvents(){d&&this.iframeEditMode&&this.iframe.addEventListener("load",this.initialize,!0),this.toolbar.addEventListener("mousedown",this.onToolBarMouseDown)}unbindEvents(){d&&this.iframeEditMode&&this.iframe.removeEventListener("load",this.initialize,!0),this.toolbar.removeEventListener("mousedown",this.onToolBarMouseDown)}shouldInitialize(){if(this.iframeEditMode){return"complete"===(this.iframe.contentDocument||this.iframe.contentWindow.document).readyState}return!0}initEditor(){var t;const e=this.options.debounceDelay;let n=(0,c.debounce)(this.valueChanged,e).bind(this),o=this.updateToolBarState.bind(this),s=i.baseKeymap;const a=t=>[new i.Plugin({view:()=>({update:()=>{o()}}),key:new i.PluginKey("toolbar-tools-update-plugin")}),new i.Plugin({view:()=>({update:n}),key:new i.PluginKey("value-changed-plugin")}),(0,i.history)(),(0,i.keymap)((0,i.buildListKeymap)(t)),(0,i.keymap)((0,i.buildKeymap)(t)),(0,i.keymap)(s),...(0,i.tableResizing)(),(0,i.tableEditing)(),(0,i.imageResizing)()],l={getPlugins:a,getView:()=>this.view,getSchema:()=>this.schemaToUse,ProseMirror:{EditorState:i.EditorState,Plugin:i.Plugin,PluginKey:i.PluginKey,Transaction:i.Transaction,EditorView:i.EditorView,Decoration:i.Decoration,Schema:i.Schema,DecorationSet:i.DecorationSet,NodeType:i.NodeType,Node,MarkType:i.MarkType,Mark:i.Mark,InputRule:i.InputRule,inputRules:i.inputRules,wrappingInputRule:i.wrappingInputRule,textblockTypeInputRule:i.textblockTypeInputRule,keymap:i.keymap,history:i.history,dropCursor:i.dropCursor,gapCursor:i.gapCursor,tableNodes:i.tableNodes}};if(this.schemaToUse=r.schema,this.schemaProvider instanceof Function&&(this.schemaToUse=this.schemaProvider(l)),this.pluginsProvider instanceof Function){const t=Object.assign({},l,{getPlugins:a});this.pluginsToUse=this.pluginsProvider(t)}this.valueContainer=this.element.querySelector("textarea");const h=i.EditorState.create({schema:this.schemaToUse,plugins:null!==(t=this.pluginsToUse)&&void 0!==t?t:a(this.schemaToUse),doc:i.DOMParser.fromSchema(this.schemaToUse).parse(this.valueContainer)});this.view=new i.EditorView({mount:this.content},{state:h,editable:()=>!this.options.readOnly,transformPastedHTML:t=>this.options.pasteSettings?this.executePasteCleanup(t):t}),this.value=this.view.dom.innerHTML}initContent(){this.content=this.iframeEditMode?this.setupIframe():this.setupDiv()}setupIframe(){const t=this.iframe.contentWindow.document,e=t.createElement("meta");e.setAttribute("charset","utf-8"),t.head.appendChild(e);const n=t.createElement("style");(0,h.isDirectionRtl)(this.element)&&n.appendChild(t.createTextNode(o.rtlStyle)),n.appendChild(t.createTextNode(o.defaultStyle)),t.head.appendChild(n);const i=t.createElement("div");return null!==this.options.spellCheck&&this.options.spellCheck.length>0&&i.setAttribute("spellcheck",this.options.spellCheck),t.body.appendChild(i),t.body.querySelector("div")}setupDiv(){return this.div}getDialogArgs(t){return(0,l.getDialogContexts)(this.view)[t]()}exec(t){const e=t.commandName;s.editorCommands[e](t)(this.view.state,this.view.dispatch,this.view),t.shouldFocusView&&this.view.focus()}focus(){this.view.focus()}setOptions(t){super.setOptions(t)}setValue(){(0,i.setHtml)(this.valueContainer.innerHTML)(this.view.state,this.view.dispatch),this.value=this.view.dom.innerHTML}updateToolBarState(){const{stateChanged:t,state:e}=(0,a.getToolsState)(this.view.state,this.options.toolStates);t&&(this.options.toolStates=e,this.invokeToolBarUpdate(e))}onToolBarMouseDown(t){(0,h.hasAncestor)(t.target,".k-button",!0)&&t.preventDefault()}executePasteCleanup(t){const e=this.options.pasteSettings,n=this.getPasteCleanupAttributes();let r=(0,i.sanitize)(t);return e.removeComments&&(r=(0,i.removeComments)(r)),(0,i.pasteCleanup)(r,{convertMsLists:e.convertMsLists,stripTags:e.stripTags?e.stripTags.join("|"):[],attributes:n})}getPasteCleanupAttributes(){const t=this.options.pasteSettings,e={};return t.removeAllAttributes?{"*":i.removeAttribute}:(t.removeMsStyles&&(e.style=i.sanitizeStyleAttr),t.removeMsClasses&&(e.class=i.sanitizeClassAttr),t.removeAttributes.reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:i.removeAttribute})),e))}valueChanged(){const t=(0,i.getHtml)(this.view.state);(0,i.hasSameMarkup)(t,this.value,this.schemaToUse)||(this.value=t,this.invokeValueChanged())}invokeToolBarUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateToolBarState,t)}invokeValueChanged(){this.invokeMethodAsync(this.options.jsinterop.valueChanged,this.value)}destroy(){super.destroy(),this.unbindEvents(),this.view.destroy(),this.content=this.view=this.iframe=this.div=null}}e.Editor=p},1055:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(8181),e)},4837:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFileManager=function(t,e){(0,r.initComponent)(i.FileManager,t,e)};const i=n(3651),r=n(1843)},3651:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileManager=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{}},this.extendOptions(e)}focusEntryNameEditor(){(0,i.runInNextFrameAsync)((()=>{const t=this.element.querySelector(".k-listview-item.k-edit-item"),e=this.element.querySelector(".k-grid-edit-row"),n=t||e;if((0,i.isHtmlElement)(n)){const t=(0,i.findEditable)(n);if(!(0,i.isHtmlElement)(t))return;t instanceof HTMLInputElement&&(t.select(),t.focus())}}))}saveFile({fileName:t,dataUrl:e}){t&&e&&(0,i.saveFile)(t,e)}}e.FileManager=r},7041:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4837),e)},2175:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFilter=function(t,e){(0,i.initComponent)(r.Filter,t,e)};const i=n(1843),r=n(1261)},1261:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Filter=void 0;const i=n(1843),r=(0,i.toDataAttr)("filter-id"),o="keydown",s=".k-toolbar",a="\n    .k-filter-field,\n    .k-filter-operator,\n    .k-filter-value,\n    .k-button,\n    .k-button-group > .k-button",l=[i.Key.ARROWUP,i.Key.ARROWDOWN];class c extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null},this.onKeyDown=t=>{var e;const n=Array.from(this.element.querySelectorAll(s)),r=t.target&&(0,i.hasAncestor)(t.target,".k-toolbar-item",!1),o=this.element.querySelector(":focus").closest(s),c=[...n].indexOf(o);let h=-1;if(r)return;t.key===i.Key.ARROWDOWN?h=c+1:t.key===i.Key.ARROWUP&&(h=c-1);if(l.includes(t.key)&&(t.preventDefault(),t.stopPropagation()),-1!==h){this.setTabIndices(n,h);const t=null===(e=n[h])||void 0===e?void 0:e.querySelector(a);t&&t.focus&&t.focus()}},this.setOptions(e)}setOptions(t){this.extendOptions(t),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(o,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(o,this.onKeyDown)}setTabIndices(t,e){t.forEach(((t,n)=>{let i=e===n?0:-1;t.querySelector(a).setAttribute("tabindex",i)}))}restoreFocus(t){let e;const n=this.element.querySelector((0,i.toAttrValueQuerySelector)(r,t[0])).parentElement,o=(0,i.findNextSiblings)(n)[0],l=(0,i.findPreviousSiblings)(n)[0];if(o)e=o.querySelector(`${s} ${a}`);else if(l)e=l.querySelector(`${s} ${a}`);else{let t=n.parentElement.closest(".k-filter-item");t||(t=this.element),e=t.querySelector(`${s} ${a}`)}e&&e.focus&&(0,i.focusInNextFrameAsync)(e)}}e.Filter=c},7762:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2175),e)},365:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFilterMenu=function(t,e){(0,r.initComponent)(i.FilterMenu,t,e)};const i=n(5227),r=n(1843)},5227:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FilterMenu=void 0;const i=n(1843),r="focus",o="focusout";class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null},this.onKeyDown=t=>{this.invokeKeyDown(t)},this.onFocus=()=>{this.invokeFocus()},this.onFocusOut=()=>{this.invokeFocusOut()},this.extendOptions(e),this.bindEvents(),this.initNavigationService()}bindEvents(){this.element.addEventListener(r,this.onFocus),this.element.addEventListener(o,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(r,this.onFocus),this.element.removeEventListener(o,this.onFocusOut)}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,this.onKeyDown)}destroy(){this.disableTabKeyTrap(),this.navigationService.destroy(),super.destroy()}enableTabKeyTrap(t){if(this.options.navigable){const e=(0,i.getElementByDataId)(t);this.formKeyTrap=new i.FormKeyTrap(e),this.formKeyTrap.enableKeyTrap()}}disableTabKeyTrap(){this.formKeyTrap&&this.formKeyTrap.disableTabKeyTrap()}focusParentHeader(){const t=this.element.closest("th.k-header");t&&t.focus()}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}}e.FilterMenu=s},4043:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(365),e)},6121:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFilterRow=function(t,e){(0,r.initComponent)(i.FilterRow,t,e)};const i=n(6895),r=n(1843)},6895:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FilterRow=void 0;const i=n(1843),r="focusin",o="focusout",s=":not(th):not(td):not([disabled]):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button)",a=`input${s}, button${s}, [tabindex]${s}`,l=".k-filtercell";class c extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,navigable:null},this.onFocusIn=t=>{t.target&&t.target.closest(l)&&this.enableTabKeyTrap()},this.onFocusOut=t=>{t.target&&t.relatedTarget&&!t.relatedTarget.closest(l)&&this.disableTabKeyTrap()},this.extendOptions(e),this.options.navigable&&this.bindEvents()}setOptions(t){this.options.navigable!==t.navigable&&(t.navigable?this.bindEvents():this.unbindEvents()),this.extendOptions(t)}bindEvents(){this.element.addEventListener(r,this.onFocusIn),this.element.addEventListener(o,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(r,this.onFocusIn),this.element.removeEventListener(o,this.onFocusOut)}destroy(){this.disableTabKeyTrap(),this.unbindEvents(),super.destroy()}setTabIndices(t){Array.from(this.element.querySelectorAll(a)).forEach((e=>{e.setAttribute("tabindex",t)}))}enableTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.element,a),this.tabKeyTrap.enableKeyTrap(),this.setTabIndices(0)}disableTabKeyTrap(){this.tabKeyTrap&&(this.tabKeyTrap.disableTabKeyTrap(),this.setTabIndices(-1))}}e.FilterRow=c},5324:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6121),e)},2806:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initGantt=function(t,e){(0,r.initComponent)(i.Gantt,t,e)},e.initGanttTimeline=function(t,e){(0,r.initComponent)(o.GanttTimeline,t,e)};const i=n(3279),r=n(1843),o=n(7780)},3279:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Gantt=void 0;const i=n(1843),r="keydown",o=(0,i.toDataAttr)("index"),s=(0,i.toDataAttr)("render-row-index"),a=".k-gantt-timeline-pane .k-grid-content",l=".k-gantt-timeline-pane .k-grid-header-wrap",c=".k-gantt-treelist .k-grid-content",h=".k-gantt-timeline-pane .k-filter-row",u=".k-gantt-treelist .k-filter-row",d=".k-gantt-treelist",p=".k-grid-edit-cell",f=".k-grid-header",g=".k-table-row",m=".k-task";class y extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{refresh:null}},this.onKeyDown=t=>{if(t.key===i.Key.TAB&&!t.shiftKey&&t.target instanceof HTMLElement&&!t.target.closest(p)){this.focusCorrespondingTask(t.target)&&(t.preventDefault(),t.stopPropagation())}},this.extendOptions(e),this.timelineContent=this.element.querySelector(a),this.timelineHeader=this.element.querySelector(l),this.treeListContent=this.element.querySelector(c),this.unifyFilterRowHeight(),this.setTreeListHeight(),this.createVerticalContentScrollSync(),this.createHorizontalContentScrollSync(),this.bindEvents()}destroy(){this.destroyVerticalContentScrollSync(),this.destroyHorizontalContentScrollSync(),this.unbindEvents(),super.destroy()}bindEvents(){this.treeListContent.addEventListener(r,this.onKeyDown)}unbindEvents(){this.treeListContent.removeEventListener(r,this.onKeyDown)}focusCorrespondingTask(t){let e=!1;const n=null==t?void 0:t.closest(g),r=(0,i.parseAttrToInt)(s,n),a=this.element.querySelector(h)?2:1,l=this.timelineContent.querySelector((0,i.toAttrValueQuerySelector)(o,r-a)),c=null==l?void 0:l.querySelector(m);return c&&(c.focus(),e=!0),e}createHorizontalContentScrollSync(){this.contentHorizontalScrollSync&&this.destroyHorizontalContentScrollSync(),this.contentHorizontalScrollSync=new i.ScrollSync(this.timelineContent,{allowScrollWithoutScrollbar:!0,vertical:!1,horizontal:!0,connections:[this.timelineHeader]})}createVerticalContentScrollSync(){this.contentVerticalScrollSync&&this.destroyVerticalContentScrollSync(),this.contentVerticalScrollSync=new i.ScrollSync(this.timelineContent,{allowScrollWithoutScrollbar:!0,vertical:!0,horizontal:!1,syncFromConnections:!0,connections:[this.treeListContent]})}destroyVerticalContentScrollSync(){this.contentVerticalScrollSync&&(this.contentVerticalScrollSync.destroy(),this.contentVerticalScrollSync=null)}destroyHorizontalContentScrollSync(){this.contentHorizontalScrollSync&&(this.contentHorizontalScrollSync.destroy(),this.contentHorizontalScrollSync=null)}unifyFilterRowHeight(){const t=this.element.querySelector(h),e=this.element.querySelector(u);e&&t&&(t.style.height=(0,i.toPixel)(e.offsetHeight))}setTreeListHeight(){let t=this.element.querySelector(d),e=t.querySelector(f);this.treeListContent.style.height=(0,i.toPixel)(t.offsetHeight-e.offsetHeight)}refresh(){this.invokeMethodAsync(this.options.jsinterop.refresh)}}e.Gantt=y},7780:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GanttTimeline=void 0;const i=n(1843),r=n(193),o=n(4419),s="keydown",a=[i.Key.HOME,i.Key.END,i.Key.ARROWUP,i.Key.ARROWDOWN],l=[i.Key.ARROWLEFT,i.Key.ARROWRIGHT],c=(0,r.toDataAttr)("index"),h=".k-grid-content",u=".k-gantt-tables",d=".k-gantt-dependencies-svg",p=".k-tooltip-content",f=".k-task-dot",g=".k-gantt-tables tr",m=".k-task",y=".k-task-wrap",v=".k-task-complete",b=".k-task-draghandle",w=".k-resize-w",x=".k-resize-e";class _ extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,messages:{start:"Start",end:"End"},jsinterop:{moveTask:null,updatePercentComplete:null,getDragTaskTooltipDates:null,createDependency:null}},this.onKeyDown=t=>{const e=a.includes(t.key),n=l.includes(t.key)&&t.altKey,r=t.key===i.Key.TAB&&t.shiftKey;(e||n||r)&&t.preventDefault()},this.renderMoveHints=()=>{this.moveTarget&&(this.destroyHint(),this.destroyTooltip(),this.hint=this.createHint(),this.tooltip=this.createTooltip(),this.tooltipContent=this.tooltip.querySelector(p),this.getContentElement().appendChild(this.hint),this.getContentElement().appendChild(this.tooltip))},this.createHint=()=>{let t=document.createElement("div");t.className="k-marquee k-gantt-marquee",t.style.top="0px",t.style.height=(0,i.toPixel)(this.getTablesWrapperElement().getBoundingClientRect().height),t.style.left=(0,i.toPixel)(this.originalLeft),t.style.width=(0,i.toPixel)(this.originalWidth);let e=document.createElement("div");return e.className="k-marquee-color",t.appendChild(e),t},this.destroyHint=()=>{this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)},this.createTooltip=()=>{let t=document.createElement("div");t.className="k-tooltip k-gantt-resize-hint",t.style.zIndex="100002",t.style.minWidth="160px";let e=document.createElement("div");return e.className="k-tooltip-content",t.appendChild(e),t},this.destroyTooltip=()=>{this.tooltip&&(this.tooltip.parentNode.removeChild(this.tooltip),this.tooltip=null,this.tooltipContent=null)},this.renderPercentDragTooltip=()=>{this.destroyPercentDragTooltip(),this.percentDragTooltip=this.createPercentDragTooltip(),this.element.appendChild(this.percentDragTooltip)},this.createPercentDragTooltip=()=>{let t=document.createElement("div");t.className="k-tooltip",t.style.zIndex="100002";let e=document.createElement("div");e.className="k-tooltip-content",t.appendChild(e);let n=document.createElement("div");return n.className="k-callout k-callout-s",t.appendChild(n),t},this.destroyPercentDragTooltip=()=>{this.percentDragTooltip&&(this.percentDragTooltip.parentNode.removeChild(this.percentDragTooltip),this.percentDragTooltip=null)},this.renderDependencyDragHint=()=>{this.destroyDependencyDragHint(),this.dependencyDragHint=this.createDependencyDragHint(),this.element.querySelector(d).appendChild(this.dependencyDragHint)},this.createDependencyDragHint=()=>{let t=document.createElementNS("http://www.w3.org/2000/svg","polyline");return t.style.fill="none",t.style.stroke="black",t.style.strokeWidth="2",t},this.destroyDependencyDragHint=()=>{this.dependencyDragHint&&(this.dependencyDragHint.parentNode.removeChild(this.dependencyDragHint),this.dependencyDragHint=null)},this.getContentElement=()=>this.element.querySelector(h),this.getTablesWrapperElement=()=>this.getContentElement().querySelector(u),this.getRowHeight=()=>this.element.querySelector(g).getBoundingClientRect().height,this.getMilestoneWidth=()=>{const t=(0,r.convertToHtml)('<div class="k-task-wrap k-milestone-wrap">\n                <div class="k-task k-task-milestone" >\n                </div>\n            </div>');this.getTablesWrapperElement().appendChild(t);let e=t.querySelector(m).getBoundingClientRect().width;return t.parentNode.removeChild(t),e},this.extendOptions(e),this.bindEvents(),this.createMovable()}destroy(){this.unbindEvents(),this.destroyMovable(),super.destroy()}bindEvents(){this.element.addEventListener(s,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(s,this.onKeyDown)}createMovable(){this.destroyMovable(),this.movable=new o.Draggable({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;let e=t.originalEvent.target;e&&(e.closest(m)?this.onTaskDragStart(t):e.closest(f)?this.onDependencyDragStart(t):e.closest(b)&&this.onPercentDragStart(t))}onTaskDragStart(t){let e=t.originalEvent.target;this.moveTarget=e.closest(m),this.resizeTask=!0,this.resizeStart=Boolean(e.closest(w)),this.resizeEnd=Boolean(e.closest(x));let n=this.moveTarget.getBoundingClientRect();this.originalLeft=this.currentLeft=n.left-this.getTablesWrapperElement().getBoundingClientRect().left,this.originalWidth=this.currentWidth=n.width,this.originalTaskMouseOffset=t.clientX-n.left}onDependencyDragStart(t){let e=t.originalEvent.target;this.moveTarget=e.closest(f);let n=this.moveTarget.getBoundingClientRect(),r=this.getTablesWrapperElement().getBoundingClientRect(),o=r.x,s=r.y;this.dependencyDragOptions={predecessorIndex:this.getTaskIndex(e),fromStart:(0,i.hasClass)("k-task-start",this.moveTarget),startX:n.x+n.width/2-o,startY:n.y+n.height/2-s}}onPercentDragStart(t){let e=t.originalEvent.target;this.moveTarget=e.closest(b);let n=this.moveTarget.parentElement.querySelector(m);this.percentCompleteBarElement=n.querySelector(v);let i=n.getBoundingClientRect();this.maxPercentWidth=i.width,this.originalWidth=this.currentWidth=t.clientX-i.left,this.originalLeft=t.clientX}onMovableDrag(t){if(this.moveTarget)return this.dragStarted?void(this.resizeTask?this.onTaskDrag(t):this.dependencyDragOptions?this.onDependencyDrag(t):this.onPercentDrag(t)):(this.dragStarted=!0,void(this.resizeTask?this.renderMoveHints():this.dependencyDragOptions?this.renderDependencyDragHint():this.renderPercentDragTooltip()))}onTaskDrag(t){let e=t.clientX-this.getTablesWrapperElement().getBoundingClientRect().left;e<0&&(e=0),this.resizeStart?(this.currentLeft=e,this.currentLeft>this.originalLeft+this.originalWidth&&(this.currentLeft=this.originalLeft+this.originalWidth)):this.resizeEnd||(this.currentLeft=e-this.originalTaskMouseOffset),this.resizeStart?this.currentWidth=this.originalWidth+this.originalLeft-e:this.resizeEnd&&(this.currentWidth=e-this.originalLeft),this.currentWidth<0&&(this.currentWidth=0),this.invokeMethodAsync(this.options.jsinterop.getDragTaskTooltipDates,{start:this.currentLeft,end:this.currentLeft+this.currentWidth}).then((t=>{if(this.dragStarted){this.tooltipContent.innerHTML="<div>"+this.options.messages.start+": "+t.start+"</div><div>"+this.options.messages.end+": "+t.end+"</div>";let e=this.currentLeft-this.tooltip.getBoundingClientRect().width/2;this.resizeEnd&&(e+=this.currentWidth),e<0&&(e=0),this.tooltip.style.left=(0,i.toPixel)(e);let n=this.moveTarget.getBoundingClientRect().top-this.getTablesWrapperElement().getBoundingClientRect().top,r=this.tooltip.getBoundingClientRect().height;n-r<0?n+=this.moveTarget.getBoundingClientRect().height:n-=r,this.tooltip.style.top=(0,i.toPixel)(n),this.hint.style.left=(0,i.toPixel)(this.currentLeft),this.hint.style.width=(0,i.toPixel)(this.currentWidth)}}))}onDependencyDrag(t){let e=this.getTablesWrapperElement().getBoundingClientRect(),n=e.x,i=e.y;if(!this.dependencyDragOptions.startX){let t=this.moveTarget.getBoundingClientRect();this.dependencyDragOptions.startX=t.x+t.width/2-n,this.dependencyDragOptions.startY=t.y+t.height/2-i}let r=t.clientX-n,o=t.clientY-i;this.dependencyDragHint.setAttribute("points",`${this.dependencyDragOptions.startX},${this.dependencyDragOptions.startY} ${r},${o}`)}onPercentDrag(t){let e=this.element.getBoundingClientRect(),n=this.moveTarget.parentElement.querySelector(m).getBoundingClientRect(),r=this.percentDragTooltip.getBoundingClientRect(),o=this.originalWidth+(t.clientX-this.originalLeft);if(o<0||o>this.maxPercentWidth)return;this.currentWidth=o;let s=Math.round(this.currentWidth/this.maxPercentWidth*100);this.moveTarget.style.left=(0,i.toPixel)(this.currentWidth),this.percentCompleteBarElement.style.width=(0,i.toPixel)(this.currentWidth),this.percentDragTooltip.querySelector(p).textContent=s+"%",this.percentDragTooltip.style.left=(0,i.toPixel)(t.clientX-e.left-r.width/2),this.percentDragTooltip.style.top=(0,i.toPixel)(n.top-e.top-r.height-6)}onMovableDrop(t){if(this.destroyHint(),this.destroyTooltip(),this.destroyPercentDragTooltip(),this.destroyDependencyDragHint(),this.dragStarted)if(this.resizeTask)this.invokeMethodAsync(this.options.jsinterop.moveTask,{resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,left:this.currentLeft,right:this.currentLeft+this.currentWidth});else if(this.dependencyDragOptions){let e=this.getElementUnderCursor(t);e.closest(f)&&this.invokeMethodAsync(this.options.jsinterop.createDependency,{predecessorIndex:this.dependencyDragOptions.predecessorIndex,fromStart:this.dependencyDragOptions.fromStart,successorIndex:this.getTaskIndex(e),toStart:(0,i.hasClass)("k-task-start",e.closest(f))})}else{let t=Math.round(this.currentWidth/this.maxPercentWidth*100)/100;this.invokeMethodAsync(this.options.jsinterop.updatePercentComplete,t)}this.dragStarted=!1,this.moveTarget=null,this.resizeTask=this.resizeStart=this.resizeEnd=!1,this.dependencyDragOptions=null}getTaskIndex(t){return parseInt(t.closest(y).getAttribute(c))}getElementUnderCursor(t){return document.elementFromPoint(t.clientX,t.clientY)}getTaskByDataIndex(t){const e=this.element.querySelector(`${y}${(0,r.toAttrValueQuerySelector)(c,t)}`);return null==e?void 0:e.querySelector(m)}focusTask(t){const e=this.getTaskByDataIndex(t);e&&e.focus({preventScroll:!1})}}e.GanttTimeline=_},1492:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2806),e)},7304:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateArcGauge=function(t,e,n){(0,r.initOrUpdateGauge)({id:t,widgetOptions:e,componentOptions:n,componentConstructor:i.ArcGauge})};const i=n(5594),r=n(518)},5594:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGauge=void 0;const i=n(6294),r=n(7112),o=n(1843);class s extends r.GaugeBase{getWidgetConstructor(){return i.ArcGauge}setOptions(t){super.setOptions(t),this.showCenterLabel()}getCenterLabel(){return this.element.querySelector(".k-arcgauge-label")}showCenterLabel(){const t=this.getCenterLabel();if(t){const e=this.getCenterLabelPosition();t.style.top=(0,o.toPixel)(e.top),t.style.left=(0,o.toPixel)(e.left),t.style.display=""}}getCenterLabelPosition(){const t=this.getCenterLabel();let e={top:0,left:0};if(t){const n=t.style.display;t.style.visibility="hidden",t.style.display="block",e=this.getLabelPositionFromGauge(),t.style.display=n,t.style.visibility=""}return e}getLabelPositionFromGauge(){const t=this.getCenterLabel(),e=t?t.offsetWidth:0,n=t?t.offsetHeight:0,i=this.widget.centerLabelPosition(e,n);return{top:i.top,left:i.left}}}e.ArcGauge=s},1772:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateCircularGauge=function(t,e,n){(0,r.initOrUpdateGauge)({id:t,widgetOptions:e,componentOptions:n,componentConstructor:i.CircularGauge})};const i=n(2038),r=n(518)},2038:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CircularGauge=void 0;const i=n(5594),r=n(6294);class o extends i.ArcGauge{getWidgetConstructor(){return r.CircularGauge}getCenterLabel(){return this.element.querySelector(".k-circulargauge-label")}}e.CircularGauge=o},518:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateGauge=function({id:t="",widgetOptions:e={},componentOptions:n={},componentConstructor:s}){(0,o.initOrUpdateDataVizComponent)({id:t,widgetOptions:e,componentOptions:n,services:{themeService:new r.ThemeService,intlService:i.IntlService},componentConstructor:s})};const i=n(4004),r=n(4257),o=n(7641)},7112:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GaugeBase=void 0;const i=n(193),r=n(7641);class o extends r.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),e.rtl&&this.reverseScale(e),this.extendOptions(e),this.initWidget(this.element,this.getWidgetOptions())}reverseScale(t){let e=t.scale||{};!(0,i.isDefined)(e.reverse)&&t.rtl&&(e=Object.assign({},e,{reverse:!0}),t.scale=e)}}e.GaugeBase=o},3228:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateLinearGauge=function(t,e,n){(0,r.initOrUpdateGauge)({id:t,widgetOptions:e,componentOptions:n,componentConstructor:i.LinearGauge})};const i=n(3046),r=n(518)},3046:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LinearGauge=void 0;const i=n(7641),r=n(6294);class o extends i.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),this.extendOptions(e),this.initWidget(this.element,this.getWidgetOptions())}getWidgetConstructor(){return r.LinearGauge}}e.LinearGauge=o},5732:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(7304),e),i.__exportStar(n(1772),e),i.__exportStar(n(3228),e),i.__exportStar(n(756),e)},756:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateRadialGauge=function(t,e,n){(0,r.initOrUpdateGauge)({id:t,widgetOptions:e,componentOptions:n,componentConstructor:i.RadialGauge})};const i=n(7982),r=n(518)},7982:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RadialGauge=void 0;const i=n(7112),r=n(6294);class o extends i.GaugeBase{getWidgetConstructor(){return r.RadialGauge}}e.RadialGauge=o},4257:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=e.IntlService=void 0;var i=n(5756);Object.defineProperty(e,"IntlService",{enumerable:!0,get:function(){return i.IntlService}});var r=n(8373);Object.defineProperty(e,"ThemeService",{enumerable:!0,get:function(){return r.ThemeService}})},8373:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ThemeService=void 0;const i=n(6765);class r extends i.ConfigurationService{constructor(){super(...arguments),this.store={},this.loaded=!1,this.element=null}reset(){this.loaded=!1}getThemeOptions(){return this.store}loadTheme(){this.loaded||(this.readTheme(),this.loaded=!0)}createElement(){const t=this.element=document.createElement("div");t.style.display="none",t.innerHTML='\n    <div class="k-var--gauge-pointer"></div>\n    <div class="k-var--gauge-track"></div>\n    <div class="k-var--normal-text-color"></div>\n',document.body.appendChild(t)}destroyElement(){this.element&&(document.body.removeChild(this.element),this.element=void 0)}readTheme(){this.createElement();try{const t=this.queryColor("gauge-pointer"),e=this.queryColor("gauge-track"),n=this.queryColor("normal-text-color");this.store={pointer:{color:t},scale:{labels:{color:n},rangePlaceholderColor:e,minorTicks:{color:n},majorTicks:{color:n},line:{color:n}}}}finally{this.destroyElement()}}setStyle(t,e){this.set(t,e)}queryColor(t){return this.queryStyle(t).backgroundColor}queryStyle(t){const e=this.element.querySelector(`.k-var--${t}`);return window.getComputedStyle(e)}}e.ThemeService=r},9591:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initGrid=function(t,e){(0,r.initComponent)(i.Grid,t,e)},e.destroyGrid=function(t){(0,r.destroyComponent)(t)};const i=n(3909),r=n(1843)},3909:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Grid=void 0;const i=n(1843);class r extends i.GridBase{constructor(t,e){super(t,e),this.options={dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!1},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-table-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!1,offsetDropClue:!1},componentSelector:".k-grid:not(.k-treelist)",jsinterop:{removeFocus:"",blur:"",rowDrop:""}},this.extendOptions(e)}destroy(){super.destroy()}}e.Grid=r},9704:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9591),e)},9997:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initCheckBox=function(t,e){(0,r.initComponent)(i.CheckBox,t,e)};const i=n(9019),r=n(1843)},9019:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CheckBox=void 0;const i=n(1843),r="focusout";class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{focusout:""}},this.onFocusOut=()=>{setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout)}),1)},this.extendOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(r,this.onFocusOut)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener(r,this.onFocusOut)}focus(){this.element.focus()}}e.CheckBox=o},1559:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(9997),e),i.__exportStar(n(4749),e),i.__exportStar(n(9229),e),i.__exportStar(n(6147),e),i.__exportStar(n(9585),e),i.__exportStar(n(543),e),i.__exportStar(n(2229),e),i.__exportStar(n(2822),e),i.__exportStar(n(1349),e)},4749:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMaskedTextBox=function(t,e){(0,r.initComponent)(i.MaskedTextBox,t,e)};const i=n(7083),r=n(1843)},7083:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MaskedTextBox=void 0;const i=n(1843),r=n(4927),o=n(1243);class s extends i.Component{constructor(t,e){super(t,e),this.defaultRules={"#":/[\d\s\+\-]/,"&":/[\S]/,0:/[\d]/,9:/[\d\s]/,"?":/[a-zA-Z\s]/,A:/[a-zA-Z0-9]/,C:/./,L:/[a-zA-Z]/,a:/[a-zA-Z0-9\s]/},this.options={dotNetInstance:null,includeLiterals:!1,mask:"",prompt:"",promptPlaceholder:"",maskOnFocus:!1,rules:this.defaultRules,value:"",debounceDelay:150,jsinterop:{blur:"",updateValue:"",change:""}},this.state={selection:[0,0],isPasted:!1,shouldFocusOnClick:!1,service:null,isFocused:!1,maskedValue:"",value:""},this.onFocus=()=>{this.state.isFocused=!0,this.options.maskOnFocus&&this.isMaskEmpty()&&(this.updateInput(this.state.service.maskRaw(this.state.value)),this.setSelection(0,0)),this.invokeFocus()},this.onPaste=t=>{const{selectionStart:e,selectionEnd:n}=t.target;n!==e&&(this.state.isPasted=!0,this.state.selection=[e,n])},this.onBlur=()=>{this.state.isFocused=!1,this.state.shouldFocusOnClick=!1,this.options.maskOnFocus&&this.isMaskEmpty()&&this.updateInput(this.state.maskedValue),this.invokeBlur()},this.onClick=()=>{if(this.state.isFocused&&!this.state.shouldFocusOnClick){this.state.shouldFocusOnClick=!0;const{selectionStart:t,selectionEnd:e}=this.element;t===e&&this.setFocusSelection()}},this.onInput=t=>{const e=t.target.value,[n,i]=this.state.selection;if(!this.options.mask)return this.updateComponentValue(e),void(this.state.isPasted=!1);let r;if(this.state.isPasted){this.state.isPasted=!1;const t=this.state.maskedValue.length-i,o=e.length-t;r=this.state.service.maskInRange(e.slice(n,o),this.state.maskedValue,n,i)}else r=this.state.service.maskInput(e,this.state.maskedValue,t.target.selectionStart);this.updateInput(r.value,r.selection),this.debounceUpdateComponentValue(r.value)},this.extendOptions(e),this.bindEvents(),this.state.service=new o.MaskingService,this.updateService(),this.setValue(this.options.value),this.setInputDebounceCallback()}bindEvents(){this.element.addEventListener("blur",this.onBlur),this.element.addEventListener("input",this.onInput),this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("click",this.onClick),this.element.addEventListener("paste",this.onPaste)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur),this.element.removeEventListener("input",this.onInput),this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("click",this.onClick),this.element.removeEventListener("paste",this.onPaste)}focus(){this.element.focus()}updateService(){this.state.service.update({includeLiterals:this.options.includeLiterals,mask:this.options.mask,prompt:this.options.prompt,promptPlaceholder:this.options.promptPlaceholder,rules:this.options.rules})}setOptions(t){const e=this.options.promptPlaceholder,n=this.options.includeLiterals;this.extendOptions(t),this.setInputDebounceCallback(),this.updateService(),this.setValue(this.options.value),e===this.options.promptPlaceholder&&n===this.options.includeLiterals||this.updateComponentValue(this.state.maskedValue)}updateComponentValue(t){this.options.mask&&!this.state.service.validationValue(t)?this.state.value="":this.state.value=this.state.service.rawValue(t),this.invokeUpdate(this.state.value)}setValue(t){if(this.state.value=t,!this.options.mask)return void this.updateInput(this.state.value);const e=this.state.service.maskRaw(this.state.value);this.updateInput(e)}setFocusSelection(){const t=this.element.selectionStart,e=this.state.maskedValue?this.state.maskedValue.indexOf(this.options.prompt):0;e>=0&&e<t&&(this.state.selection=[e,e],this.setSelection())}updateInput(t="",e){this.state.maskedValue=t;const n=this.shouldResetValue()?"":t;this.element.value=n,void 0!==e&&this.setSelection(e,e)}setSelection(t=this.state.selection[0],e=this.state.selection[1]){this.state.isFocused&&this.element.setSelectionRange(t,e)}isMaskEmpty(){return this.state.service.maskRaw()===this.state.maskedValue}shouldResetValue(){return this.options.maskOnFocus&&!this.state.isFocused&&this.isMaskEmpty()}invokeBlur(){this.invokeMethodAsync(this.options.jsinterop.blur)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeUpdate(t){this.invokeMethodAsync(this.options.jsinterop.updateValue,t)}setInputDebounceCallback(){this.debounceUpdateComponentValue=(0,r.debounce)(this.updateComponentValue,this.options.debounceDelay).bind(this)}}e.MaskedTextBox=s},9229:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initNumericTextBox=function(t,e){(0,r.initComponent)(i.NumericTextBox,t,e)};const i=n(9179),r=n(1843)},9179:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NumericTextBox=void 0;const i=n(1843),r="k-spinner-increase",o="k-spinner-decrease",s=[i.KeyCode.ARROWDOWN,i.KeyCode.ARROWUP],a="keydown",l="paste",c="blur",h="focus",u="mousedown";class d extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,decimals:0,separator:"\\.",min:null,max:null,value:"",selectOnFocus:!1,jsinterop:{blur:""}},this.onKeyDown=t=>{const e=t.key,n=t.key.toUpperCase(),r=!this.isValid(e)&&e!==i.Key.ENTER,o=t.ctrlKey||t.metaKey,a=s.includes(e);!a&&(Boolean(i.Key[n])||o)||!r&&!a||t.preventDefault()},this.onFocus=t=>{this.options.selectOnFocus&&t.target&&t.target instanceof HTMLInputElement&&t.target.select()},this.setOptions(e),this.upArrowElement=t.parentElement.getElementsByClassName(r)[0],this.downArrowElement=t.parentElement.getElementsByClassName(o)[0],this.bindEvents()}setOptions(t){this.extendOptions(t),this.element.value=this.options.value}destroy(){this.unbindEvents(),super.destroy(),this.upArrowElement=null,this.downArrowElement=null}bindEvents(){this.onPaste=this.onPaste.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onBlur=this.onBlur.bind(this),this.element.addEventListener(a,this.onKeyDown),this.element.addEventListener(l,this.onPaste),this.element.addEventListener(c,this.onBlur),this.element.addEventListener(h,this.onFocus),this.upArrowElement&&this.upArrowElement.addEventListener(u,this.onMouseDown),this.downArrowElement&&this.downArrowElement.addEventListener(u,this.onMouseDown)}unbindEvents(){this.element.removeEventListener(a,this.onKeyDown),this.element.removeEventListener(l,this.onPaste),this.element.removeEventListener(c,this.onBlur),this.element.removeEventListener(h,this.onFocus),this.upArrowElement&&this.upArrowElement.removeEventListener(u,this.onMouseDown),this.downArrowElement&&this.downArrowElement.removeEventListener(u,this.onMouseDown)}focus(){this.element.focus()}onPaste(t){this.isValid(t.clipboardData.getData("text/plain").trim())||t.preventDefault()}onMouseDown(t){t.preventDefault(),document.activeElement!==this.element&&this.element.focus()}onBlur(){const t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}numericRegex(){let t=this.options.separator,e=this.options.decimals,n="{0,"+e+"}";return e?new RegExp("^(-)?(((\\d+(["+t+"]\\d"+n+")?)|(["+t+"]\\d"+n+")))?$"):/^(-)?(\d*)$/}caret(){return[this.element.selectionStart,this.element.selectionEnd]}isValid(t){let e=this.element.value,n=this.caret();return e=e.substring(0,n[0])+t+e.substring(n[1]),!!this.numericRegex().test(e)}}e.NumericTextBox=d},2822:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initRangeSlider=function(t,e){(0,r.initComponent)(i.RangeSlider,t,e)};const i=n(8248),r=n(1843)},8248:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RangeSlider=void 0;const i=n(1843),r=n(7637),o=n(4771),s=[i.Key.ARROWUP,i.Key.ARROWDOWN,i.Key.ARROWLEFT,i.Key.ARROWRIGHT,i.Key.PAGE_UP,i.Key.PAGE_DOWN,i.Key.HOME,i.Key.END];class a extends r.SliderBase{constructor(t,e){super(t,e),this.onStartHandleDrag=t=>{const e=this.eventValue(t);e>this.endValue&&this.setSliderEnd(e),this.setSliderStart(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)},this.onEndHandleDrag=t=>{const e=this.eventValue(t);e<this.startValue&&this.setSliderStart(e),this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.startValue,this.endValue)},this.onDragEnd=()=>{this.changeValue(this.startValue,this.endValue)},this.onClick=t=>{const e=this.eventValue(t);e<=this.startValue||e<(this.startValue+this.endValue)/2?(e!==this.startValue&&this.changeValue(e,this.endValue),this.startHandle.focus()):(e>=this.endValue||e>=(this.startValue+this.endValue)/2)&&(e!==this.endValue&&this.changeValue(this.startValue,e),this.endHandle.focus())},this.onStartHandleNavigate=t=>{this.invokeMethodAsync(this.options.jsinterop.startNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))},this.onEndHandleNavigate=t=>{this.invokeMethodAsync(this.options.jsinterop.endNavigate,t.name).then((t=>{this.setSliderStart(t.startValue),this.setSliderEnd(t.endValue)}))},this.startHandle=this.element.querySelector(".k-draghandle-start"),this.endHandle=this.element.querySelector(".k-draghandle-end"),this.startValue=this.options.startValue,this.endValue=this.options.endValue,this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.startHandle=this.endHandle=null}setOptions(t){super.setOptions(t),this.startValue=this.options.startValue,this.endValue=this.options.endValue}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.destroyDraggable(),this.destroyNavigationService(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.startDraggable=new o.Draggable(this.element,{filter:".k-draghandle-start",events:{drag:this.onStartHandleDrag,dragEnd:this.onDragEnd}}),this.endDraggable=new o.Draggable(this.element,{filter:".k-draghandle-end",events:{drag:this.onEndHandleDrag,dragEnd:this.onDragEnd}})}destroyDraggable(){this.startDraggable.destroy(),this.endDraggable.destroy()}initNavigationService(){this.startNavigationService=new i.NavigationService(this.startHandle),this.endNavigationService=new i.NavigationService(this.endHandle),this.startNavigationService.bind(s,this.onStartHandleNavigate),this.endNavigationService.bind(s,this.onEndHandleNavigate)}destroyNavigationService(){this.startNavigationService.destroy(),this.endNavigationService.destroy()}changeValue(t,e){const n=null===t?this.options.min:t,i=null===e?this.options.min:e;this.setSliderStart(Math.max(n,this.options.min)),this.setSliderEnd(Math.max(i,this.options.min,n)),this.invokeChangeValue({isChangeCommitted:!0},this.startValue,this.endValue)}}e.RangeSlider=a},1349:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initRating=function(t,e){(0,r.initComponent)(i.Rating,t,e)};const i=n(1619),r=n(1843)},1619:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Rating=void 0;const i=n(1843),r=n(4927),o=n(8262),s="click",a="mouseout",l="mousemove",c="keydown",h=[i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.HOME,i.KeyCode.END];class u extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{changeValue:Function},value:null,hoveredValue:null,hoverThrottleInterval:150,step:.5,precision:o.RatingPrecisionMode.Full,dir:""},this.onKeyDown=t=>{h.includes(t.keyCode)&&t.preventDefault()},this.onMouseMove=t=>{if(!t.target)return;const e=this.getValueUnderCursor(t.target,t.clientX);this.throttleChangeValue({isChangeCommitted:!1},e)},this.onMouseOut=()=>{this.throttleChangeValue({isChangeCommitted:!1},null)},this.onClick=t=>{const e=this.getValueUnderCursor(t.target,t.clientX);this.options.value=e,this.invokeChangeValue({isChangeCommitted:!0},e)},this.extendOptions(e),this.throttleChangeValue=(0,r.throttle)(this.invokeChangeValue,this.options.hoverThrottleInterval).bind(this),this.bindEvents()}destroy(){this.unbindEvents(),this.throttleChangeValue=null,super.destroy()}bindEvents(){this.element.addEventListener(l,this.onMouseMove),this.element.addEventListener(a,this.onMouseOut),this.element.addEventListener(c,this.onKeyDown),this.element.addEventListener(s,this.onClick)}unbindEvents(){this.element.removeEventListener(l,this.onMouseMove),this.element.removeEventListener(a,this.onMouseOut),this.element.removeEventListener(c,this.onKeyDown),this.element.removeEventListener(s,this.onClick)}getValueUnderCursor(t,e){const n=t.getBoundingClientRect(),i=this.calcIsFirstHalf(this.options.dir?this.options.dir:"ltr",n,e),r=Array.from(this.element.querySelectorAll(".k-rating-item")).indexOf(t);if(-1!==r){const t=this.options.precision===o.RatingPrecisionMode.Half;return i&&t?r+1-this.options.step:r+1}return this.options.value}invokeChangeValue({isChangeCommitted:t},e){const n=this.options.jsinterop.changeValue;this.invokeMethodAsync(n,{value:e,isChangeCommitted:t})}calcIsFirstHalf(t,e,n){return"ltr"===t?n<e.x+e.width/2:n>e.x+e.width/2}}e.Rating=u},8262:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.RatingPrecisionMode=void 0,function(t){t.Half="half",t.Full="full"}(n||(e.RatingPrecisionMode=n={}))},2229:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSlider=function(t,e){(0,r.initComponent)(i.Slider,t,e)};const i=n(7187),r=n(1843)},7187:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Slider=void 0;const i=n(1843),r=n(4771),o=n(7637),s=[i.Key.ARROWUP,i.Key.ARROWDOWN,i.Key.ARROWLEFT,i.Key.ARROWRIGHT,i.Key.PAGE_UP,i.Key.PAGE_DOWN,i.Key.HOME,i.Key.END];class a extends o.SliderBase{constructor(t,e){super(t,e),this.onDragStart=()=>{(0,i.removeClass)("k-slider-transitions",this.element)},this.onDrag=t=>{const e=this.eventValue(t);this.setSliderEnd(e),this.throttleChangeValue({isChangeCommitted:!1},this.endValue)},this.onDragEnd=()=>{this.changeValue(this.endValue),(0,i.addClass)("k-slider-transitions",this.element)},this.onClick=t=>{const e=this.eventValue(t);e!==this.endValue&&this.changeValue(e),this.dragHandle.focus()},this.onNavigate=t=>{this.invokeNavigate(t.name)},this.extendOptions(e),this.dragHandle=this.element.querySelector(".k-draghandle"),this.endValue=this.options.value,this.bindEvents(),(0,i.addClass)("k-slider-transitions",this.element)}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){super.setOptions(t),(0,i.hasClass)("k-slider-transitions")||(0,i.addClass)("k-slider-transitions",this.element)}bindEvents(){this.initDraggable(),this.initNavigationService(),this.sliderTrack.addEventListener("click",this.onClick)}unbindEvents(){this.draggable.destroy(),this.navigationService.destroy(),this.sliderTrack.removeEventListener("click",this.onClick)}initDraggable(){this.draggable=new r.Draggable(this.element,{filter:".k-draghandle",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}})}initNavigationService(){this.navigationService=new i.NavigationService(this.dragHandle),this.navigationService.bind(s,this.onNavigate)}changeValue(t){const e=null===t?this.options.min:t;this.setSliderEnd(Math.max(e,this.options.min)),this.invokeChangeValue({isChangeCommitted:!0},this.endValue)}invokeNavigate(t){this.invokeMethodAsync(this.options.jsinterop.navigate,t).then((t=>this.setSliderEnd(t)))}}e.Slider=a},7637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderBase=void 0;const i=n(1843),r=n(4927);class o extends i.Component{constructor(t,e){super(t,e),this.snapValue=t=>{const e=(0,i.closestDivisibleTo)(t-this.options.min,this.options.smallStep)+this.options.min;return(0,i.clamp)(e,this.options.min,this.options.max)},this.extendOptions(e),this.sliderTrack=this.element.querySelector(".k-slider-track-wrap"),this.throttleChangeValue=(0,r.throttle)(this.invokeChangeValue,150).bind(this)}eventValue(t){const e=this.calculatePercentageValue(t),n=this.convertToValue(e);return this.snapValue(n)}calculatePercentageValue(t){const e=this.sliderTrack.getBoundingClientRect(),n=(0,i.isDirectionRtl)(this.element);if("vertical"===this.options.orientation)return 100-(t.clientY-e.top)/e.height*100;return(n?e.right-t.clientX:t.clientX-e.left)/e.width*100}convertToValue(t){return this.options.min+t*(this.options.max-this.options.min)/100}convertToPercentage(t){return(t-this.options.min)/(this.options.max-this.options.min)*100}setSliderEnd(t){this.endValue=t,this.element&&this.element.style.setProperty("--kendo-slider-end",this.convertToPercentage(t))}setSliderStart(t){this.startValue=t,this.element&&this.element.style.setProperty("--kendo-slider-start",this.convertToPercentage(t))}invokeChangeValue({isChangeCommitted:t},...e){const n=this.options.jsinterop.changeValue;if(this.dotNetInstance&&this.dotNetInstance.invokeMethodAsync&&n)return this.dotNetInstance.invokeMethodAsync(n,...e,t)}}e.SliderBase=o},543:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSwitch=function(t,e){(0,r.initComponent)(i.Switch,t,e)};const i=n(6602),r=n(1843)},6602:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Switch=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{onSpaceKeyDown:""}},this.onSpaceKeyDown=()=>(this.invokeMethodAsync(this.options.jsinterop.onSpaceKeyDown),!1),this.extendOptions(e),this.initNavigationService()}destroy(){this.navigationService.destroy(),super.destroy()}focus(){this.element.focus()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(i.Key.SPACE,this.onSpaceKeyDown)}}e.Switch=r},6147:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTextArea=function(t,e){(0,r.initComponent)(i.TextArea,t,e)};const i=n(6617),r=n(1843)},6617:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextArea=void 0;const i=n(4927),r=n(2615),o=n(1843),s="input",a="keydown";class l extends r.TextBox{constructor(t,e){super(t,e),this.options={autoSize:!1,debounceDelay:150,jsinterop:{updateValue:""}},this.setOptions(e),this.resize()}destroy(){super.destroy()}bindEvents(){super.bindEvents(),this.onInput=this.onInput.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.element.addEventListener(s,this.onInput),this.element.addEventListener(a,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(s,this.onInput),this.element.removeEventListener(a,this.onKeyDown),super.unbindEvents()}setOptions(t){this.extendOptions(t),this.debounceChangeValue=(0,i.debounce)(this.changeValue,this.options.debounceDelay).bind(this)}onInput(){this.resize(),this.debounceChangeValue()}onKeyDown(t){t.keyCode===o.KeyCode.ENTER&&t.stopPropagation()}setValue(t){this.element.value=t,this.resize()}resize(){const t=this.element;this.options.autoSize&&null!=t.offsetParent&&(t.style.height="",t.style.height=(0,o.toPixel)(t.scrollHeight))}changeValue(){this.element&&this.invokeMethodAsync(this.options.jsinterop.updateValue,this.element.value)}}e.TextArea=l},9585:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTextBox=function(t,e){(0,r.initComponent)(i.TextBox,t,e)};const i=n(2615),r=n(1843)},2615:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextBox=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{blur:""}},this.extendOptions(e),this.bindEvents()}bindEvents(){this.onBlur=this.onBlur.bind(this),this.element.addEventListener("blur",this.onBlur)}destroy(){this.unbindEvents(),super.destroy()}unbindEvents(){this.element.removeEventListener("blur",this.onBlur)}focus(){this.element.focus()}onBlur(){const t=this.options.jsinterop.blur;this.invokeMethodAsync(t)}}e.TextBox=r},6222:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(5226),e),i.__exportStar(n(8274),e),i.__exportStar(n(1194),e),i.__exportStar(n(1122),e),i.__exportStar(n(2978),e)},5226:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMenuItem=function(t,e){(0,i.initComponent)(r.MenuItem,t,e)};const i=n(1843),r=n(9524)},9524:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MenuItem=void 0;const i=n(1843),r=[i.Key.ENTER,i.Key.SPACE,i.Key.HOME,i.Key.END,i.Key.ARROWDOWN,i.Key.ARROWUP,i.Key.ARROWLEFT,i.Key.ARROWRIGHT],o=".k-child-animation-container";class s extends i.Component{constructor(t,e){super(t,e),this.onEscapeKey=t=>{const e=document.activeElement;return!e||!e.closest(".k-menu-popup")||(this.invokeKeyDown(t),!1)},this.onKeyDown=t=>{this.invokeKeyDown(t)},this.onFocus=()=>{this.invokeFocus()},this.onFocusOut=()=>{this.invokeFocusOut()},this.onClick=()=>{this.invokeClick()},this.popup=(0,i.getElementByDataId)(e.popupId),this.options=e,this.bindEvents(),this.initNavigationService()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(r.concat(i.AlphanumericKeyCodes.map((t=>t.toString()))),this.onKeyDown),this.navigationService.bind(i.Key.ESC,this.onEscapeKey)}bindEvents(){this.element.addEventListener("focus",this.onFocus),this.element.addEventListener("focusout",this.onFocusOut),this.element.addEventListener("click",this.onClick)}unbindEvents(){this.element.removeEventListener("focus",this.onFocus),this.element.removeEventListener("focusout",this.onFocusOut),this.element.removeEventListener("click",this.onClick)}destroy(){this.unbindEvents(),super.destroy(),this.popup=null}hasParentPopupWithDisplayNone(t){if("none"===t.style.display)return!0;const e=t.closest(o)!==t?t.closest(o):null,n=e!==t?e:null;return n&&this.hasParentPopupWithDisplayNone(n)}focusNode(){this.element&&(this.hasParentPopupWithDisplayNone(this.element)?(0,i.focusInNextFrameAsync)(this.element):document.activeElement!==this.element&&this.element.focus())}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.name)}invokeFocus(){this.invokeMethodAsync(this.options.jsinterop.focus)}invokeFocusOut(){this.invokeMethodAsync(this.options.jsinterop.focusout)}invokeClick(){this.invokeMethodAsync(this.options.jsinterop.click)}}e.MenuItem=s},8274:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initStepper=function(t,e){(0,i.initComponent)(r.Stepper,t,e)};const i=n(1843),r=n(2588)},2588:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stepper=void 0;const i=n(1843),r="keydown",o=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.ENTER,i.KeyCode.SPACE];class s extends i.Component{constructor(t,e){super(t,e),this.options={isPartOfWizard:!1},this.onKeyDown=t=>{const e=o.includes(t.keyCode),n=t.shiftKey?this.isFirstStepFocused():this.isLastStepFocused(),r=t.keyCode===i.KeyCode.TAB&&!this.options.isPartOfWizard&&!n;(e||r)&&t.preventDefault()},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(r,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown)}focusStep(t){const e=this.element.querySelector(`[data-index="${t}"]`);e&&e.focus()}getFocusedStep(){const t=this.element.querySelector("a[tabindex='0']");if(t&&t.parentElement)return t.parentElement}isFirstStepFocused(){const t=this.getFocusedStep();return(0,i.hasClass)("k-step-first",t)}isLastStepFocused(){const t=this.getFocusedStep();return(0,i.hasClass)("k-step-last",t)}}e.Stepper=s},1194:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTabStrip=function(t,e){(0,i.initComponent)(r.TabStrip,t,e)};const i=n(1843),r=n(4372)},4372:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TabStrip=void 0;const i=n(1843),r=n(4068),o=n(4070),s="keydown",a="wheel",l="nearest",c=[i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN],h=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT],u=[i.KeyCode.HOME,i.KeyCode.END];class d extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,orientation:o.TabStripOrientation.Horizontal,scrollable:!1,jsinterop:{updateScrollButtons:null}},this.onKeyDown=t=>{(this.isVertical()?c:h).concat(u).includes(t.keyCode)&&t.preventDefault()},this.onMouseWheel=t=>{let e=t.deltaY;if(!this.isVertical()&&(0,i.isDirectionRtl)(this.element)){e*=-1}let n=e>0?10:-10;t.preventDefault(),this.scrollTabs(n)},this.onResize=()=>{this.updateScrollButtons()},this.extendOptions(e),this.tabList=this.element.querySelector(".k-tabstrip-items"),this.bindEvents(),this.options.scrollable&&this.initResizeService()}destroy(){this.unbindEvents(),this.destroyResizeService(),super.destroy()}setOptions(t){super.setOptions(t),this.tabList.removeEventListener(a,this.onMouseWheel),t.scrollable?(this.initResizeService(),this.tabList.addEventListener(a,this.onMouseWheel)):this.destroyResizeService()}bindEvents(){this.tabList.addEventListener(s,this.onKeyDown),this.options.scrollable&&this.tabList.addEventListener(a,this.onMouseWheel)}unbindEvents(){this.tabList.removeEventListener(s,this.onKeyDown),this.options.scrollable&&this.tabList.removeEventListener(a,this.onMouseWheel)}initResizeService(){this.resizeService||(this.resizeService=new r.ResizeService({element:this.tabList,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}getTabElementByIndex(t){return this.tabList.querySelectorAll(".k-item")[t]}focusTab(t){const e=this.getTabElementByIndex(t);e&&(this.scrollElementIntoView(e),e.focus(),this.updateScrollButtons())}isVertical(){return this.options.orientation===o.TabStripOrientation.Vertical}scrollTabs(t){this.isVertical()?this.tabList.scrollTop+=t:this.tabList.scrollLeft+=t,this.updateScrollButtons()}scrollElementIntoView(t){t.scrollIntoView&&t.scrollIntoView({inline:l,block:l})}updateScrollButtons(){let t,e,n,i=this.tabList;this.isVertical()?(t=i.scrollTop,e=i.scrollHeight,n=i.offsetHeight):(t=Math.trunc(i.scrollLeft),e=Math.trunc(i.scrollWidth),n=Math.trunc(i.offsetWidth));const r=Math.abs(t)>0,o=Math.abs(e-n-Math.abs(t))>1;this.invokeMethodAsync(this.options.jsinterop.updateScrollButtons,{prevButtonEnabled:r,nextButtonEnabled:o,showButtons:e>n})}handleVisibleTabsChange(){this.updateScrollButtons()}handleActiveTabChange(t){const e=this.getTabElementByIndex(t);e&&(this.scrollElementIntoView(e),this.updateScrollButtons())}}e.TabStrip=d},4070:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.TabStripOrientation=void 0,function(t){t.Horizontal="horizontal",t.Vertical="vertical"}(n||(e.TabStripOrientation=n={}))},2978:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initToolBar=function(t,e){(0,i.initComponent)(r.ToolBar,t,e)};const i=n(1843),r=n(8316)},8316:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToolBar=void 0;const i=n(1843),r=n(4068),o=n(4264),s="keydown",a=[i.Key.ARROWLEFT,i.Key.ARROWRIGHT,i.Key.HOME,i.Key.END],l=[i.Key.ARROWDOWN,i.Key.ARROWUP,i.Key.ENTER,i.Key.ESC,i.Key.HOME,i.Key.END],c=`${i.KeyModifiers.ALT} ${i.Key.ARROWDOWN}`,h="k-toolbar-item",u=":not([disabled])",d=`\n    .k-toolbar-button${u},\n    .k-toolbar-toggle-button${u},\n    .k-toolbar-button-group > .k-button${u},\n    .k-toolbar-overflow-button${u},\n    .${h}`,p=":not([disabled]):not([data-focusable='false']):not(.k-picker > .k-button):not(.k-spin-button > .k-button):not(.k-input-button):not(.k-searchbox > .k-input-inner)",f=`\n    a[href], \n    area[href], \n    input${p},\n    select${p},\n    textarea${p},\n    button${p},\n    [tabindex]${p},\n    .${h}`;class g extends i.Component{constructor(t,e){super(t,e),this.options={adaptive:!1,popupId:null,skipedOverflowItemIndexes:[],navigable:!0,overflowAnchorSelector:null,jsinterop:{populateCollapsedItems:""}},this.onOverflowAnchorKeyDown=()=>{(0,i.getComponentInstance)(this.options.popupId).openAsync()},this.onOverflowPopupKeyDown=t=>{const e=document.activeElement;if(e&&t.name===i.Key.ENTER)return e.click(),void this.focusPopupAnchor();if(t.name===i.Key.ESC){(0,i.getComponentInstance)(this.options.popupId).close(),this.focusPopupAnchor()}const n=(0,i.getElementByDataId)(this.options.popupId).querySelectorAll(".k-item:not(.k-separator):not(.k-disabled)"),r=n.length-1,o=[...n].indexOf(e);let s=-1;t.name===i.Key.ARROWDOWN&&o===r||t.name===i.Key.HOME?s=0:t.name===i.Key.ARROWUP&&0===o||t.name===i.Key.END?s=r:t.name===i.Key.ARROWDOWN?s=o+1:t.name===i.Key.ARROWUP&&(s=o-1),this.focusElement(n,s)},this.onKeyDown=t=>{if(t.target===this.element)return;const e=(0,o.isDirectionRtl)(this.element),n=a.includes(t.key),r=this.getVisibleFocusableElements(),s=this.element.querySelector(":focus"),l=r.length-1,c=(0,o.hasAncestor)(s,`.${h}`,!1),u=c&&s?s.closest(`.${h}`):null,d=u?[...r].indexOf(u):[...r].indexOf(s);let p=-1,f=!1;if(!c&&n&&(f=!0),c){if(t.key===i.Key.ESC){if(t.target.closest(".k-searchbox")&&0!==t.target.value.length)return;p=[...r].indexOf(u),f=!0}}else if(t.key===(0,o.getRtlValue)(i.Key.ARROWRIGHT,i.Key.ARROWLEFT,e)&&d===l||t.key===i.Key.HOME)p=0;else if(t.key===(0,o.getRtlValue)(i.Key.ARROWLEFT,i.Key.ARROWRIGHT,e)&&0===d||t.key===i.Key.END)p=l;else if(t.key===(0,o.getRtlValue)(i.Key.ARROWRIGHT,i.Key.ARROWLEFT,e))p=d+1;else if(t.key===(0,o.getRtlValue)(i.Key.ARROWLEFT,i.Key.ARROWRIGHT,e))p=d-1;else if(t.key===i.Key.ENTER){const t=this.getInnerFocusableItem(s);t&&t.focus&&t.focus()}f&&(t.preventDefault(),t.stopPropagation()),this.focusElement(r,p)},this.onResize=()=>{this.handleOverflowingItems()},this.setOptions(e)}setOptions(t){this.extendOptions(t),this.options.adaptive?(this.setCollapsibleItems(),this.initResizeService(),this.handleOverflowingItems(),this.initOverflowNavigationServices()):(this.collapsibleItems&&this.collapsibleItems.forEach((t=>(0,o.showElement)(t.item))),this.destroyOverflowNavigationServices(),this.destroyResizeService()),this.options.navigable?(this.initTabIndices(),this.bindEvents()):this.unbindEvents()}destroy(){this.destroyOverflowNavigationServices(),this.destroyResizeService(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(s,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(s,this.onKeyDown)}initResizeService(){this.resizeService=new r.ResizeService({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}destroyOverflowNavigationServices(){this.overflowAnchorNavigationService&&this.overflowAnchorNavigationService.destroy(),this.popupNavigationService&&this.popupNavigationService.destroy()}getItems(){return Array.from(this.element.children)}initTabIndices(){const t=this.element.querySelectorAll(this.getFocusableSelector()),e=this.getVisibleFocusableElements(),n=Array.from(t).indexOf(e[0])||0;this.setTabIndices(t,n)}initOverflowNavigationServices(){const t=this.element.querySelector(this.options.overflowAnchorSelector);this.overflowAnchorNavigationService=new i.NavigationService(t),this.overflowAnchorNavigationService.bind(c,this.onOverflowAnchorKeyDown);const e=(0,i.getElementByDataId)(this.options.popupId);this.popupNavigationService=new i.NavigationService(e),this.popupNavigationService.bind(l,this.onOverflowPopupKeyDown)}setTabIndices(t,e){const n=this.options.tabindex;t.forEach(((t,i)=>{let r=e===i?n:-1;t.setAttribute("tabindex",r)}))}getWidths(){const t=this.getItems(),e=getComputedStyle(this.element),n=parseInt(e.gap);let i=t.filter((t=>!Array.from(t.classList).includes("k-spacer"))).map((t=>t.offsetWidth)).filter((t=>t)).reduce(((t,e)=>t+e+n),0);const r=getComputedStyle(this.element);return{totalItemsWidth:i,elementInternalWidth:this.element.clientWidth-parseInt(r.paddingLeft)-parseInt(r.paddingRight)}}setCollapsibleItems(){const t=this.getItems(),e=getComputedStyle(this.element),n=parseInt(e.gap),i=t.slice(0,t.length-1).map(((t,e)=>{const i=t.offsetWidth+n,r=this.options.skipedOverflowItemIndexes.includes(e),s=Array.from(t.classList).includes("k-spacer"),a=!r&&!s;return{item:t,offsetWidth:i,expanded:(0,o.isVisible)(t),collapsible:a,index:e}}));this.collapsibleItems=i}collapseItem(t){(0,o.hideElement)(t.item),t.expanded=!1}expandItem(t){(0,o.showElement)(t.item),t.expanded=!0}focusFirstOverflowItem(){const t=(0,i.getElementByDataId)(this.options.popupId).querySelector(".k-item:not(.k-separator):not(.k-disabled)");t.setAttribute("tabindex",0),t.focus()}focusPopupAnchor(){const t=this.element.querySelector(this.options.overflowAnchorSelector);t&&t.focus()}getVisibleFocusableElements(){return Array.from(this.element.querySelectorAll(this.getFocusableSelector())).filter((t=>(0,o.isVisible)(t)&&(0,o.isVisible)(t.parentElement)))}getFocusableSelector(){return this.element.closest(".k-grid")?f:d}getInnerFocusableItem(t){if(!(0,o.hasClass)(h,t))return;let e=t.querySelector(".k-dropdownlist,.k-switch");return e||(e=(0,o.findFocusable)(t,!1)),e}focusElement(t,e){if(-1!==e){this.setTabIndices(t,e);const n=t[e];n&&n.focus()}}handleOverflowingItems(){this.collapsedItemsIndexes=null,this.positionOverflowingItems(),this.collapsedItemsIndexes=this.collapsibleItems.filter((t=>!t.expanded)).map((t=>t.index)),this.invokeMethodAsync(this.options.jsinterop.populateCollapsedItems,this.collapsedItemsIndexes||[])}positionOverflowingItems(t){if(this.collapsibleItems&&this.collapsibleItems.length){const{totalItemsWidth:e,elementInternalWidth:n}=this.getWidths(),i=[...this.collapsibleItems].reverse().find((t=>t.expanded&&t.collapsible)),r=this.collapsibleItems.find((t=>!t.expanded));i&&e>n&&!0!==t?(this.collapseItem(i),this.positionOverflowingItems(!1)):r&&e+r.offsetWidth<n&&!1!==t&&(this.expandItem(r),this.positionOverflowingItems(!0))}}handleItemsChange(){this.setCollapsibleItems(),this.handleOverflowingItems()}}e.ToolBar=g},1122:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTreeView=function(t,e){(0,i.initComponent)(r.TreeView,t,e)};const i=n(1843),r=n(3436)},3436:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreeView=void 0;const i=n(1843),r=n(4927),o=n(1066),s="keydown",a="mousedown",l=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.ENTER,i.KeyCode.SPACE];class c extends i.Component{constructor(t,e){super(t,e),this.options={componentSelector:".k-treeview",dragThrottleInterval:0,dropOptions:{dropClueTargetSelector:".k-treeview-mid,.k-treeview-top,.k-treeview-bot",dropClueEmptySelector:"",allowDropOver:!0,offsetDropClue:!0},draggableIcons:{cancelIconMarkup:"",insertMiddleIconMarkup:"",plusIconMarkup:""}},this.onKeyDown=t=>{l.includes(t.keyCode)&&t.preventDefault()},this.onMouseDown=t=>{t.shiftKey&&t.preventDefault()},this.createHint=t=>{const e=t.textContent;return(0,i.convertToHtml)(`<div class="k-header k-drag-clue">\n                <span class="k-icon k-font-icon k-drag-status k-icon-with-modifier">\n                    <span class="k-icon k-font-icon k-icon-modifier"></span>\n                </span>\n                ${e}\n            </div>`)},this.onItemDrop=t=>{this.invokeMethodAsync(this.options.jsinterop.drop,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),treeviewDotNetInstance:this.getDestinationTree(t.destinationElement),destinationComponentId:t.destinationComponentId,destinationIndex:t.destinationIndex,dropPosition:t.dropPosition})},this.onDragStart=t=>{this.invokeMethodAsync(this.options.jsinterop.dragStart,{sourceIndex:t.sourceItem.getAttribute("data-treeindex")})},this.onDrag=t=>{this.invokeMethodAsync(this.options.jsinterop.drag,{sourceIndex:t.sourceItem.getAttribute("data-treeindex"),treeviewDotNetInstance:this.getDestinationTree(t.destinationElement),destinationComponentId:t.destinationComponentId,destinationIndex:t.destinationIndex,dropPosition:t.dropPosition,pageX:t.pageX,pageY:t.pageY})},this.onDragEnd=t=>{this.invokeMethodAsync(this.options.jsinterop.dragEnd,{treeviewDotNetInstance:this.getDestinationTree(t.destinationElement),destinationComponentId:t.destinationComponentId,destinationIndex:t.destinationIndex,dropPosition:t.dropPosition})},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),this.draggable&&this.draggable.destroy(),super.destroy()}bindEvents(){this.element.addEventListener(s,this.onKeyDown),this.element.addEventListener(a,this.onMouseDown),this.options.draggable&&this.createDraggable()}unbindEvents(){this.element.removeEventListener(s,this.onKeyDown),this.element.removeEventListener(a,this.onMouseDown)}setOptions(t){this.options.draggable!==t.draggable&&(t.draggable?this.createDraggable():this.draggable.destroy()),this.extendOptions(t)}focusNode(t){const e=this.element.querySelector(`[data-treeindex="${t}"]`);e&&e.focus()}createDraggable(){this.options.dragThrottleInterval>0&&(this.onDrag=(0,r.throttle)(this.onDrag,this.options.dragThrottleInterval).bind(this)),this.element&&(this.draggable=new o.RowDraggable(this.element,{group:".k-treeview",filter:".k-treeview-leaf",itemSelector:".k-treeview-item",draggableIcons:this.options.draggableIcons,hint:this.createHint,events:{itemDrop:this.onItemDrop,itemDragStart:this.onDragStart,itemDrag:this.onDrag,itemDragEnd:this.onDragEnd}}))}cancelDrag(){this.draggable.cancelDrag()}getDestinationTree(t){const e=(0,i.getComponentInstanceBySelector)(t,this.options.componentSelector);return e&&e.dotNetInstance}getDropSettings(){return this.options.dropOptions}getDropItemIndex(t){const e=t.closest(".k-treeview-item");return t&&e?e.getAttribute("data-treeindex"):""}getId(){return this.element.id}}e.TreeView=c},6129:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initListBox=function(t,e){(0,i.initComponent)(r.ListBox,t,e)};const i=n(1843),r=n(8455)},8455:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListBox=void 0;const i=n(1843),r=n(4264),o=n(4771),s=n(6589),a="keydown",l="focusout",c="telerik-blazor-listbox",h=[i.Key.ARROWUP,i.Key.ARROWDOWN,i.Key.ARROWLEFT,i.Key.ARROWRIGHT,i.Key.SPACE,i.Key.HOME,i.Key.END,i.Key.F10],u=".k-listbox",d=".k-list",p=".k-list-item",f=".k-listbox-actions",g=".k-listbox-actions button",m=p;class y extends i.Component{constructor(t,e){super(t,e),this.options={draggable:!1,dropSources:[],jsinterop:{drop:null,focusOut:null}},this.onDropTargetAllowsDropFrom=(t,e)=>{if(this.element===t.element)return!0;const n=t.element.getAttribute("data-id"),r=(0,i.getComponentInstance)(n);return r?!!(this.options.dropSources||[]).includes(r.options.id):void 0},this.onDrop=t=>{const e=t.originalCurrentTarget,n=t.elementUnderCursor;if(e&&e===n)return;if(!n)return;const i=n.closest(m),r=this.getDataItemIndexAttribute(i),o=n.closest(u).getAttribute("id"),s=this.getDataItemIndexAttribute(e);if(this.isDropAllowed(n)&&s>=0){const t={sourceIndex:s,destinationIndex:r,destinationListBoxId:o};this.invokeMethodAsync(this.options.jsinterop.drop,t)}},this.onFocusOut=t=>{var e;const n=null===(e=t.target)||void 0===e?void 0:e.closest(p),i=!this.element.querySelector(d).contains(t.relatedTarget);n&&i&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusOut)}),0)},this.createHint=t=>{const e=(0,i.stringifyToStyle)({position:"absolute","z-index":2e4}),n=(0,i.convertToHtml)(`<div class="k-drag-clue"\n                  style="${e}">\n            </div>`),r=t.cloneNode(!0);return n.appendChild(r),n},this.onKeyDown=t=>{h.includes(t.code)&&t.preventDefault()},this.onToolBarKeyDown=t=>{const e=(0,r.isDirectionRtl)(this.toolBarElement),n=this.getTools(),o=this.toolBarElement.querySelector(":focus"),s=n.length-1,a=[...n].indexOf(o);let l=-1;t.key===(0,r.getRtlValue)(i.Key.ARROWRIGHT,i.Key.ARROWLEFT,e)&&a===s||t.key===i.Key.HOME?l=0:t.key===(0,r.getRtlValue)(i.Key.ARROWLEFT,i.Key.ARROWRIGHT,e)&&0===a||t.key===i.Key.END?l=s:t.key===(0,r.getRtlValue)(i.Key.ARROWRIGHT,i.Key.ARROWLEFT,e)||t.key===i.Key.ARROWDOWN?l=a+1:t.key!==(0,r.getRtlValue)(i.Key.ARROWLEFT,i.Key.ARROWRIGHT,e)&&t.key!==i.Key.ARROWUP||(l=a-1),this.focusTool(n,l)},this.extendOptions(e),this.initToolBar(),this.bindEvents(),this.createDraggable(),this.createDropTarget()}destroy(){this.unbindEvents(),this.destroyToolBar(),this.destroyDraggable(),this.destroyDropTarget(),super.destroy()}setOptions(t){this.extendOptions(t),this.options.draggable?this.draggable||this.createDraggable():this.destroyDraggable()}bindEvents(){this.toolBarElement&&this.toolBarElement.addEventListener(a,this.onToolBarKeyDown),this.element.addEventListener(a,this.onKeyDown),this.element.addEventListener(l,this.onFocusOut)}unbindEvents(){this.toolBarElement&&this.toolBarElement.removeEventListener(a,this.onToolBarKeyDown),this.element.removeEventListener(a,this.onKeyDown),this.element.removeEventListener(l,this.onFocusOut)}initToolBar(){this.toolBarElement=this.getToolBar(),this.initToolBarTabIndices()}destroyToolBar(){this.toolBarElement=null}createDraggable(){this.options.draggable&&(this.draggable=new o.Draggable(this.element,{hint:this.createHint,group:c,filter:m,events:{drop:this.onDrop}}))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}createDropTarget(){this.dropTarget=new s.DropTarget(this.element,{group:c,itemSelector:m,allowsDropFrom:this.onDropTargetAllowsDropFrom})}destroyDropTarget(){this.dropTarget&&(this.dropTarget.destroy(),this.dropTarget=null)}isDropAllowed(t){const e=this.getDestinationListBox(t),n=-1!==(e.options.dropSources||[]).indexOf(this.element.id),i=e.element.id===this.element.id;return n||i}getDestinationListBox(t){return(0,i.getComponentInstanceBySelector)(t,u)}getDataItemIndexAttribute(t){return(0,i.parseAttrToInt)("data-item-index",t)}getToolBar(){return this.element.querySelector(f)}initToolBarTabIndices(){const t=this.getTools();this.setTabIndices(t,0)}getTools(){return Array.from(this.element.querySelectorAll(g)).filter((t=>(0,r.isVisible)(t)&&(0,r.isFocusable)(t)))}setTabIndices(t,e){Array.from(t).forEach(((t,n)=>{let i=e===n?0:-1;t.setAttribute("tabindex",i.toString())}))}focusTool(t,e){if(-1!==e){this.setTabIndices(t,e);const n=t[e];null==n||n.focus({preventScroll:!0})}}focusListItem(t){const e=this.element.querySelectorAll(p)[t];null==e||e.focus({preventScroll:!0})}focusToolBar(){this.toolBarElement&&this.toolBarElement.id&&(0,r.focusFirstFocusableChild)(this.toolBarElement.id,!0)}}e.ListBox=y},8985:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6129),e)},8453:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initListView=function(t,e){(0,i.initComponent)(r.ListView,t,e)};const i=n(1843),r=n(3315)},3315:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListView=void 0;const i=n(1843),r="keydown",o="focusin",s="k-listview-item",a=[i.Key.HOME,i.Key.END,i.Key.ARROWUP,i.Key.ARROWDOWN,i.Key.ARROWLEFT,i.Key.ARROWRIGHT];class l extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{updateFocusedIndex:""}},this.onKeyDown=t=>{const e=t.key;a.includes(e)&&t.preventDefault();const n=Array.from(this.element.getElementsByClassName(s)),r=n.filter((t=>t===document.activeElement))[0];if(!r)return;const o=n.length,l=Array.from(n).indexOf(r);let c=l;switch(e){case i.Key.HOME:c=0;break;case i.Key.END:c=o-1;break;case i.Key.ARROWUP:case i.Key.ARROWLEFT:c=l-1<0?0:l-1;break;case i.Key.ARROWDOWN:case i.Key.ARROWRIGHT:c=l+1>=o?o-1:l+1;break;default:return}this.focusItem(n[c],c)},this.onFocusIn=t=>{const e=t.target.closest(`.${s}`);if(e){const t=Array.from(this.element.getElementsByClassName(s)).indexOf(e);this.invokeMethodAsync(this.options.jsinterop.updateFocusedIndex,t)}},this.setOptions(e),this.bindEvents()}bindEvents(){this.element.addEventListener(r,this.onKeyDown),this.element.addEventListener(o,this.onFocusIn)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown),this.element.removeEventListener(o,this.onFocusIn)}focusItem(t,e){t&&(this.invokeMethodAsync(this.options.jsinterop.updateFocusedIndex,e),t.focus())}destroy(){this.unbindEvents(),super.destroy()}}e.ListView=l},9359:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(8453),e)},7927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(5593),e),i.__exportStar(n(6748),e),i.__exportStar(n(2668),e),i.__exportStar(n(1103),e),i.__exportStar(n(1343),e),i.__exportStar(n(2082),e),i.__exportStar(n(1598),e),i.__exportStar(n(1323),e),i.__exportStar(n(742),e),i.__exportStar(n(5210),e),i.__exportStar(n(9557),e),i.__exportStar(n(6668),e),i.__exportStar(n(1843),e),i.__exportStar(n(3059),e),i.__exportStar(n(8683),e),i.__exportStar(n(7568),e),i.__exportStar(n(3183),e),i.__exportStar(n(7147),e),i.__exportStar(n(2251),e),i.__exportStar(n(4348),e),i.__exportStar(n(1055),e),i.__exportStar(n(7041),e),i.__exportStar(n(7762),e),i.__exportStar(n(4043),e),i.__exportStar(n(5324),e),i.__exportStar(n(1492),e),i.__exportStar(n(5732),e),i.__exportStar(n(9704),e),i.__exportStar(n(1559),e),i.__exportStar(n(6222),e),i.__exportStar(n(8985),e),i.__exportStar(n(9359),e),i.__exportStar(n(5300),e),i.__exportStar(n(2033),e),i.__exportStar(n(1039),e),i.__exportStar(n(7481),e),i.__exportStar(n(2021),e),i.__exportStar(n(6522),e),i.__exportStar(n(9998),e),i.__exportStar(n(9364),e),i.__exportStar(n(7345),e),i.__exportStar(n(3717),e),i.__exportStar(n(3496),e),i.__exportStar(n(8050),e),i.__exportStar(n(57),e),i.__exportStar(n(2603),e),i.__exportStar(n(1898),e),i.__exportStar(n(7952),e),i.__exportStar(n(9547),e),i.__exportStar(n(7776),e),i.__exportStar(n(3407),e),i.__exportStar(n(9877),e),i.__exportStar(n(432),e),i.__exportStar(n(8708),e),i.__exportStar(n(743),e)},96:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MapInstanceObserver=void 0;const i=n(6294);class r extends i.InstanceObserver{constructor(t,e){super(t,e),this.handlerMap={click:"onObserverMapClick",pan:"onObserverMapPan",panEnd:"onObserverMapPanEnd",markerMouseEnter:"onObserverMarkerMouseEnter",markerMouseLeave:"onObserverMarkerMouseLeave",markerClick:"onObserverMarkerClick",markerActivate:"onObserverMarkerActivate",shapeClick:"onObserverShapeClick",zoomEnd:"onObserverZoomEnd"}}}e.MapInstanceObserver=r},5300:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4153),e)},4153:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateMap=function(t,e,n){let i=(0,s.getElementByDataId)(t);if(i){let r=a(e),l=(0,s.getComponentInstance)(t),c=(0,s.extend)(r,n);if(l)(0,s.setComponentOptions)(l,c);else{let e=new o.Map(i,c);(0,s.setComponentInstance)(t,e)}}};const i=n(6294),r=n(4004),o=n(2399),s=n(1843);i.TemplateService.register(r.TemplateService);const a=t=>{let e=l(t);const n=c(e);return e.layers=n||[],e.layers.forEach((t=>{"shape"===t.type&&t.shapeSettings.style?t.style=t.shapeSettings.style:"bubble"===t.type&&t.bubbleSettings.style&&(t.style=t.bubbleSettings.style)})),e},l=t=>{let e=JSON.parse(t);const n=c(e);return e.layers=n,e},c=t=>{let e=t.layers||[];return e.forEach((t=>{"string"==typeof t.data&&(t.data=JSON.parse(t.data))})),e}},2399:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const i=n(1843),r=n(7641),o=n(6294),s=n(96);class a extends r.DataVizComponent{constructor(t,e){super(t,e),this.options={markerTooltipId:"",jsinterop:{onObserverMapClick:"",onObserverMapPan:"",onObserverMapPanEnd:"",onObserverMarkerClick:"",onObserverMarkerMouseEnter:"",onObserverMarkerMouseLeave:"",onObserverMarkerActivate:"",onObserverShapeClick:"",onObserverZoomEnd:""}},this.onObserverMapClick=t=>{const e=this.createMapClickEventArgs(t);this.invokeMapClickAsync(e)},this.onObserverMapPan=t=>{this.hideMarkerTooltip(t)},this.onObserverMapPanEnd=t=>{this.showMarkerTooltip(this._hoveredMarker);const e=t.sender.extent(),n=this.getExtentCoordinates(e),i={center:[t.center.lat,t.center.lng],extent:n};this.invokeMapPanEndAsync(i)},this.onObserverMarkerActivate=t=>{this.repositionMarkerTooltip(t.marker)},this.onObserverMarkerClick=t=>{const e=this.createMarkerClickEventArgs(t);this.invokeMarkerClickAsync(e)},this.onObserverMarkerMouseEnter=t=>{this._hoveredMarker=t.marker;const e=this.createMarkerEventArgs(t);this.invokeMarkerMouseEnterAsync(e)},this.onObserverMarkerMouseLeave=()=>{this._hoveredMarker=null},this.onObserverShapeClick=t=>{const e=this.createShapeClickEventArgs(t);this.invokeShapeClickAsync(e)},this.onObserverZoomEnd=t=>{const e=t.sender.extent(),n=t.sender.center(),i=this.getExtentCoordinates(e),r={zoom:t.sender.zoom(),center:[n.lat,n.lng],extent:i};this.invokeMapZoomEndAsync(r)},this.extendOptions(e),this.createInstanceObserver(),this.initWidget(this.element,this.getWidgetOptions())}destroy(){this.destroyInstanceObserver(),this._hoveredMarker=null,this.widget&&(this.widget.destroy(),this.widget=null)}getThemeOptions(){return{}}getWidgetConstructor(){return o.Map}createInstanceObserver(){this.instanceObserver=new s.MapInstanceObserver(this)}destroyInstanceObserver(){this.instanceObserver=null}trigger(){}requiresHandlers(){return!1}getExtentCoordinates(t){return[t.nw.lat,t.nw.lng,t.se.lat,t.se.lng]}invokeMapZoomEndAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverZoomEnd,t)}invokeMapPanEndAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverPanEnd,t)}invokeMapClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMapClick,t)}invokeMarkerClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerClick,t)}invokeMarkerMouseEnterAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverMarkerMouseEnter,t)}invokeShapeClickAsync(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverShapeClick,t)}createMapClickEventArgs(t){const e=t.location||{lat:null,lng:null},n={location:{latitude:e.lat,longitude:e.lng}};return this.extendWithOriginalMouseEvent(n,t)}createMarkerClickEventArgs(t){const e=this.createMarkerEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createShapeClickEventArgs(t){const e=this.createShapeEventArgs(t);return this.extendWithOriginalMouseEvent(e,t)}createMarkerEventArgs(t){return{layerIndex:t.layerIndex,markerIndex:t.markerIndex}}createShapeEventArgs(t){const e=t.shape.dataItem,n=t.shape.location&&t.shape.value;return{layerIndex:t.layerIndex,shapeIndex:t.shapeIndex,geoJsonDataItem:n?null:e}}getOriginalEvent(t){const e=t.originalEvent;return(e||{}).event||e}extendWithOriginalMouseEvent(t,e){const n=this.getOriginalEvent(e);return(0,i.extend)(t,{eventArgs:(0,i.convertToMouseEventArgs)(n)})}repositionMarkerTooltip(t){const e=this.getMarkerTooltip();if(e&&t){const n=e.getPopupComponent();n&&n.anchor===t.element&&e.repositionPopup()}}showMarkerTooltip(t){const e=this.getMarkerTooltip();if(e&&t){const n=e.getPopupComponent();n&&n.anchor&&n.anchor===t.element&&e.open(n.anchor)}}hideMarkerTooltip(){const t=this.getMarkerTooltip();if(t){const e=t.getPopupComponent();e&&e.anchor&&t.close(e.anchor)}}getMarkerTooltip(){return(0,i.getComponentInstance)(this.options.markerTooltipId)}}e.Map=a},2033:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6257),e)},6257:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initMediaQuery=function(t,e){(0,r.initComponent)(i.MediaQuery,t,e);return(0,r.getComponentInstance)(t).getMatches()};const i=n(8823),r=n(1843)},8823:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MediaQuery=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={media:"",jsinterop:{change:""}},this.onMediaChange=t=>{this.invokeMethodAsync(this.options.jsinterop.change,t.matches)},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.mediaQueryList=window.matchMedia(this.options.media),this.mediaQueryList.addEventListener("change",this.onMediaChange)}unbindEvents(){this.mediaQueryList&&this.mediaQueryList.removeEventListener("change",this.onMediaChange)}getMatches(){return this.mediaQueryList.matches}}e.MediaQuery=r},1039:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(3221),e)},3221:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPager=function(t,e){(0,r.initComponent)(i.Pager,t,e)};const i=n(8547),r=n(1843)},8547:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Pager=void 0;const i=n(1843),r=n(4068),o="keydown",s="focusin",a="focusout",l=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.PAGE_UP,i.KeyCode.PAGE_DOWN,i.KeyCode.ENTER];class c extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,adaptive:!0,navigable:!0,jsinterop:{disableInnerNavigation:"",enableInnerNavigation:""}},this.onResize=()=>{if(!this.element)return;const{gap:t}=this.getSizings(),e=(0,i.childrenWidth)(this.element),n=this.getAvailableContainerWidth();this.shrink(n,e),this.stretch(n,e,t)},this.onKeyDown=t=>{l.includes(t.keyCode)&&t.preventDefault()},this.onFocusIn=t=>{!this.innerNavigationEnabled&&t.target&&t.target!==this.element&&(this.enableTabKeyTrap(),this.enableInnerNavigation())},this.onFocusOut=t=>{(this.innerNavigationEnabled&&!t.relatedTarget||this.innerNavigationEnabled&&t.target&&t.relatedTarget&&(!this.element.contains(t.relatedTarget)||this.element===t.relatedTarget))&&(this.disableTabKeyTrap(),this.disableInnerNavigation())},this.extendOptions(e),e.navigable&&(this.bindEvents(),this.innerNavigationEnabled=!1),e.adaptive&&(this.setAdaptiveItems(),this.initResizeService())}destroy(){this.unbindEvents(),this.disableTabKeyTrap(),this.destroyResizeService(),super.destroy()}bindEvents(){this.element.addEventListener(o,this.onKeyDown),this.element.addEventListener(s,this.onFocusIn),this.element.addEventListener(a,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(o,this.onKeyDown),this.element.removeEventListener(s,this.onFocusIn),this.element.removeEventListener(a,this.onFocusOut)}setOptions(t){super.setOptions(t),t.adaptive?(this.setAdaptiveItems(),this.initResizeService()):this.destroyResizeService()}initResizeService(){this.resizeService=new r.ResizeService({element:this.element,onResize:this.onResize})}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=this.collapsibleItems=null)}focusElement(t){if(t){this.adaptiveSelectItem&&this.adaptiveSelectItem.visible&&this.adaptiveSelectItem.element.focus();const{index:e}=t,n=this.element.querySelector((t=>`[data-index='${t}']`)(e));n&&n.focus()}else this.element.focus()}disableInnerNavigation(){this.innerNavigationEnabled=!1,setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.disableInnerNavigation)}),1)}enableInnerNavigation(){this.innerNavigationEnabled=!0,this.invokeMethodAsync(this.options.jsinterop.enableInnerNavigation)}setAdaptiveItems(){const t=this.element.querySelectorAll("[data-adaptive=true]");this.adaptiveItems=[...t].map((t=>({element:t,width:t.offsetWidth,visible:!0}))),this.setAdaptiveSelect()}setAdaptiveSelect(){const t=this.element.querySelector(".k-pager-numbers-wrap .k-dropdown-list");t&&((0,i.showElement)(t,"inline-flex"),this.adaptiveSelectItem={element:t,width:(0,i.offsetWidth)(t),visible:!1},(0,i.hideElement)(t))}getSizings(){const t=getComputedStyle(this.element);return{paddingInline:parseInt(t.paddingInlineStart),gap:parseInt(t.gap)}}getAvailableContainerWidth(){const{paddingInline:t,gap:e}=this.getSizings(),n=this.element.offsetWidth,i=this.adaptiveItems.filter((t=>t.visible)).length;return n-2*t-(i<2?0:i-1)*e}shrink(t,e){let n=t,r=e;const o=this.adaptiveItems.filter((t=>t.visible));if(n<r)for(let t=o.length-1;t>=0;t--){const e=o[t];if(n>r)break;if(r-n>1){if(e.width=e.element.offsetWidth,(0,i.hasClass)("k-pager-numbers",e.element)){if(e.width<=this.adaptiveSelectItem.width)continue;this.adaptiveSelectItem.visible=!0,(0,i.showElement)(this.adaptiveSelectItem.element,"inline-flex")}this.hideItem(e),r-=e.width}n=this.getAvailableContainerWidth()}}stretch(t,e,n){let r=t,o=e;const s=this.adaptiveItems.filter((t=>!t.visible));if(r>o){for(let t=0;t<s.length;t++){const e=s[t];if((0,i.hasClass)("k-pager-numbers",e.element)){r>o-this.adaptiveSelectItem.width+e.width+n&&(this.showItem(e),o+=e.width,this.adaptiveSelectItem.visible=!1,(0,i.hideElement)(this.adaptiveSelectItem.element));break}if(r<o+e.width+n)break;this.showItem(e),o+=e.width}r=this.getAvailableContainerWidth()}}showItem(t){(0,i.showElement)(t.element),t.visible=!0}hideItem(t){(0,i.hideElement)(t.element),t.visible=!1}enableTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.element,'\n    [tabindex]:not([style*="display: none;"], \n    .k-input-button, \n    .k-pager-numbers[style*="display: none;"] .k-button, \n    .k-pager-sizes[style*="display: none;"] .k-dropdownlist)'),this.tabKeyTrap.enableKeyTrap()}disableTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap()}}e.Pager=c},7481:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(5077),e)},5077:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPanelBar=function(t,e){(0,i.initComponent)(r.PanelBar,t,e)};const i=n(1843),r=n(8563)},8563:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PanelBar=void 0;const i=n(1843),r="keydown",o=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.ENTER,i.KeyCode.SPACE];class s extends i.Component{constructor(t,e){super(t,e),this.onKeyDown=t=>{o.includes(t.keyCode)&&t.target.matches("li.k-panelbar-item")&&t.preventDefault()},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(r,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown)}focusNode(t){const e=this.element.querySelector(`[data-treeindex="${t}"]`);e&&e.focus()}}e.PanelBar=s},7796:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PdfViewerWidget=void 0;const i=n(1843),r=n(773),o=n(3463),s=n(9478),a="error",l="pagesLoad",c="pagesWheel",h="printEnd",u="scroll";class d extends i.Component{constructor(t,e){super(t,e),this.options={pdfServiceType:"pdfjs",fileData:[],page:1,fileDescriptor:null,downloadFileName:"Document",minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,zoomBeforePrint:!1,zoomLevelForPrint:3,searchMatchScrollLeftOffset:0,searchMatchScrollTopOffset:-64,pageChangeScrollThreshold:.85,pageWheelThrottleDelay:200,messages:{errorMessages:{parseError:"PDF file fails to process.",notFound:"File is not found.",popupBlocked:"Popup is blocked."}},elementSelectors:{pageSelector:"k-page:not(.k-blank-page)",pagesContainerClass:"k-pdf-viewer-pages",documentContainerClass:"k-pdf-viewer-canvas",searchHighlightClass:"k-search-highlight",searchHighlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char",textElementSelector:"span[role='presentation']",renderedPageSelector:"k-page[data-page-number]",enabledTextSelectionClass:"k-enable-text-select",enabledPanningClass:"k-enable-panning"},events:{pagesRead:i.noop,[l]:i.noop,[c]:i.noop,[h]:i.noop,[a]:i.noop,[u]:i.noop}},this.pagesLoad=t=>{this.state.pdfDocument=t.pdfDoc,this.state.pdfPages=t.pdfPages,this.state.pdfPagesCount=t.pdfPages.length,this.triggerPagesLoad(t)},this.onPageScrollerScroll=t=>{let e=!1;const n=(0,r.currentPage)(this.element)+1;n!==this.state.activePageNumber&&n>=1&&n<=this.state.pdfPagesCount&&(e=!0,this.state.activePageNumber=n),this.shouldPreventScroll?this.shouldPreventScroll=!1:this.trigger(u,{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop,pageNumber:this.state.activePageNumber,isPageChanged:e})},this.onPagesWheel=t=>{if(!t.ctrlKey&&!t.metaKey)return;t.preventDefault();const e=(0,i.mousewheelDelta)(t),n=e<0?1:-1,r=this.state.zoomLevel+n*this.options.zoomRate;this.zoom({zoomLevel:r}),this.trigger(c,{zoomLevel:r,mousewheelDelta:e})},this.extendOptions(e),this.wrapper=this.element,this.resetState(),this.bindEvents(),this.initDocumentContainer(),this.loadFile(this.options.fileDescriptor||{data:this.options.fileData,page:this.options.page})}destroy(){this.unbindEvents(),this.destroySearchService()}extendOptions(t){this.options=(0,i.deepExtend)(this.options,t)}setOptions(t){this.options=t}bindEvents(){this.bindPagesWheel(),this.attachOnScrollEvent()}bindPagesWheel(){const t=this.getDocumentContainer();t&&(this.options.pageWheelThrottleDelay>0?this.throttledPagesWheel=(0,o.throttle)(this.onPagesWheel,this.options.pageWheelThrottleDelay):this.throttledPagesWheel=this.onPagesWheel,t.addEventListener("wheel",this.throttledPagesWheel))}unbindEvents(){this.unbindPagesWheel(),this.detachOnScrollEvent()}unbindPagesWheel(){const t=this.getDocumentContainer();t&&(this.throttledPagesWheel&&this.throttledPagesWheel.cancel&&this.throttledPagesWheel.cancel(),t.removeEventListener("wheel",this.throttledPagesWheel))}setState(t){this.state=(0,i.deepExtend)(this.state||{},t)}resetState(){this.setState({activePageNumber:1,visiblePagesCount:1,pagePromises:[],downloadFilePromise:null,pdfDocument:null,zoomLevel:this.options.zoomLevel,zoomLevelType:this.options.zoomLevelType,zoomLevelBeforePrint:null})}loadFile(t){const e=t.data;let n;if(e&&e.buffer instanceof ArrayBuffer?n=e.buffer:(0,i.isString)(e)&&(n=e),n||e){const t={dom:this.getPagesContainer(),zoom:this.options.zoomLevel,typedArray:n||e,done:this.pagesLoad,error:this.options.events[a]};(0,r.loadPDF)(t),this.setScaleFactor(this.options.zoomLevel)}}triggerError(t){this.trigger(a,t)}triggerPagesLoad(t){this.trigger(l,t)}triggerZoomStart(t){this.trigger("zoomStart",t)}triggerZoomEnd(t){this.trigger("zoomEnd",t)}clearDocument(){this.clearPages(),this.state.pdfDocument=null}clearPages(){const t=this.getDocumentContainer(),e=this.getPagesContainer();if(!t||!e||!this.hasDocument())return;this.getPagesElements().forEach((t=>{e.removeChild(t)}))}initDocumentContainer(){this.documentContainer||(this.documentContainer=this.getDocumentContainer(),this.initPageScroller(this.documentContainer))}attachOnScrollEvent(){this.getDocumentContainer().addEventListener(u,this.onPageScrollerScroll)}detachOnScrollEvent(){this.getDocumentContainer().removeEventListener(u,this.onPageScrollerScroll)}initPageScroller(t){!this.scroller&&t&&(this.scroller=this.createPageScroller(t,{filter:(0,i.toClassSelector)(this.options.elementSelectors.pageSelector)}))}createPageScroller(t,e){return new r.Scroller(t,e)}destroyPageScroller(){this.scroller&&(this.scroller.destroy(),this.scroller=null)}renderNoDataIndicator(){}activatePage(t){this.state.activePageNumber!==t&&(this.state.activePageNumber=t,this.shouldPreventScroll=!0,(0,r.scrollToPage)(this.element,t-1))}downloadFile({fileName:t}){(0,r.download)({pdf:this.state.pdfDocument,error:this.triggerError},t,{},this.onDownloadEnd)}onDownloadEnd(t,e,n){try{(0,s.saveAs)(t,e,n)}catch(t){return!1}return!0}hasDocument(){return(0,i.hasValue)(this.state.pdfDocument)}zoom(t){t.zoomLevel=(0,r.calculateZoomLevel)(t.zoomLevel,t.zoomLevelType,this.options.zoomLevel,this.getDocumentContainer()),this.reloadFile(this.state.pdfDocument,t.zoomLevel)}reloadFile(t,e){(0,r.reloadDocument)({pdfDoc:t,zoom:e,dom:this.getPagesContainer(),done:t=>{this.state.pdfPagesCount=t.length,this.options.zoomLevel=e},error:this.triggerError}),this.setScaleFactor(e)}printDocument(){(0,r.print)(this.state.pdfPages,this.trigger(h),this.triggerError)}cacheZoomLevelBeforePrint(){this.setState({zoomLevelBeforePrint:this.state.zoomLevel})}restoreZoomLevelBeforePrint(){this.zoom(this.state.zoomLevelBeforePrint)}searchText(t={text:"",matchCase:!1}){return this.initSearchService(),this.search.search(t)}clearSearch(){this.destroySearchService()}initSearchService(){if(this.search)return;const t=this.wrapper.querySelectorAll(".k-text-layer");this.search=new r.SearchService({textContainers:t||[],highlightClass:"k-search-highlight",highlightMarkClass:"k-search-highlight-mark",charClass:"k-text-char"})}destroySearchService(){this.search&&(this.search.destroy(),this.search=null)}getPagesTextLayers(){return(this.pages||[]).map(this.getPageTextLayer)}getPageTextLayer(t){return t.getTextLayer()}getPagesContainer(){return this.element.querySelector((0,i.toClassSelector)(this.options.elementSelectors.pagesContainerClass))}getDocumentContainer(){return this.wrapper.querySelector((0,i.toClassSelector)(this.options.elementSelectors.documentContainerClass))}getPagesElements(){const t=this.getDocumentContainer();return t?(0,i.toArray)(t.querySelectorAll((0,i.toClassSelector)(this.options.elementSelectors.pageSelector))):[]}goToNextSearchMatch(){(0,r.goToNextSearchMatch)(this)}goToPreviousSearchMatch(){(0,r.goToPreviousSearchMatch)(this)}enableTextSelection(){this.disableScrollerEventsTracking(),(0,i.addClass)(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),(0,i.removeClass)(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}disableTextSelection(){this.enableScrollerEventsTracking(),(0,i.removeClass)(this.options.elementSelectors.enabledTextSelectionClass,this.scroller.element),(0,i.addClass)(this.options.elementSelectors.enabledPanningClass,this.scroller.element)}enableScrollerEventsTracking(){this.scroller&&this.scroller.enablePanEventsTracking()}disableScrollerEventsTracking(){this.scroller&&this.scroller.disablePanEventsTracking()}setScaleFactor(t){this.element.style.setProperty("--scale-factor",String(t))}}e.PdfViewerWidget=d},3463:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.matchesElementSelector=e.preventDefault=e.throttle=e.awaitAll=e.saveFile=e.parsePdfFromBase64String=e.createPromise=void 0;const i=n(9478);e.createPromise=()=>{let t,e,n=new Promise((function(n,i){t=n,e=i}));return n.resolve=t,n.reject=e,n};e.parsePdfFromBase64String=t=>{const e=t.replace(/^(data:application\/pdf;base64,)/gi,"");try{return window.atob(e)}catch(t){return null}};e.saveFile=t=>{(0,i.saveAs)(t.dataURI,t.fileName,t)};e.awaitAll=t=>Promise.all(t);e.throttle=(t,e)=>{let n,i=0;if(!e||e<=0)return t;let r=function(){let r=this,o=Number(new Date)-i,s=arguments;function a(){t.apply(r,s),i=Number(new Date)}if(!i)return a();n&&clearTimeout(n),o>e?a():n=setTimeout(a,e-o)};return r.cancel=()=>{clearTimeout(n)},r};e.preventDefault=t=>{t.preventDefault&&t.preventDefault(),t.originalEvent&&t.originalEvent.preventDefault()};e.matchesElementSelector=(t,e)=>!(!t||!e)&&t.closest(e)},2021:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(3097),e)},3097:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPdfViewer=function(t,e){(0,r.initComponent)(i.PdfViewer,t,e)};const i=n(3695),r=n(1843)},3695:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PdfViewer=void 0;const i=n(1843);n(5920);const r=n(7796),o="click";class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,pdfServiceType:"pdfjs",fileData:[],minZoom:.5,maxZoom:4,zoomRate:.25,zoomLevel:1.25,fileSelect:{dataId:""},jsinterop:{onPagesRead:"",onPagesLoad:"",onPrintEnd:"",onZoomStart:"",onZoomEnd:"",onError:"",onScroll:""}},this.onFileSelectAdd=t=>{const e=this.getFileSelect(t);if(!e)return;const n=(e.state.files||[])[0];n&&e.readBlob(n).then((t=>{this.loadFile(t)}))},this.onOpenFileClick=t=>{const e=t.currentTarget.querySelector(".k-upload[data-id]"),n=e?e.getAttribute("data-id"):null;this.openSelectFilesDialog(n)},this.onPagesLoad=t=>{this.invokePagesLoad(t)},this.onPrintEnd=()=>{this.invokePrintEnd()},this.onZoomStart=t=>{this.invokeZoomStart(t)},this.onZoomEnd=t=>{this.invokeZoomEnd(t)},this.onError=t=>{this.invokeError(t)},this.onScroll=t=>{this.invokeScroll(t)},this.invokePagesLoad=t=>{this.invokeMethodAsync(this.options.jsinterop.onPagesLoad,{pagesCount:t.pdfPages.length})},this.invokePrintEnd=()=>{this.invokeMethodAsync(this.options.jsinterop.onPrintEnd)},this.invokeZoomStart=t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomStart,{zoomLevel:t.zoomLevel})},this.invokeZoomEnd=t=>{this.invokeMethodAsync(this.options.jsinterop.onZoomEnd,{zoomLevel:t.zoomLevel})},this.invokeError=t=>{this.invokeMethodAsync(this.options.jsinterop.onError,{message:t.message})},this.invokeScroll=t=>{t.isPageChanged&&this.invokeMethodAsync(this.options.jsinterop.onScroll,{page:t.pageNumber})},this.extendOptions(e),this.wrapper=this.element,this.bindEvents(),this.initWidget(this.element,this.getWidgetOptions())}destroy(){this.unbindEvents(),this.destroyWidget()}initWidget(t,e){"pdfjs"===this.options.pdfServiceType&&(this.widget=this.createWidget(t,(0,i.extend)(e,{zoomBeforePrint:!1,events:{pagesLoad:this.onPagesLoad,printEnd:this.onPrintEnd,zoomStart:this.onZoomStart,zoomEnd:this.onZoomEnd,error:this.onError,scroll:this.onScroll}})))}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}createWidget(t,e={}){return new r.PdfViewerWidget(t,e)}setOptions(t){this.widget&&(this.options=t,this.setWidgetOptions(this.options))}setWidgetOptions(t){if(!this.widget)return;const e=this.getWidgetOptions(t);this.widget.setOptions(e)}bindEvents(){const t=this.wrapper.querySelector("\n    .k-i-folder-open,\n    .k-svg-i-folder-open\n");this.openFileButton=t?t.closest(".k-button"):null,this.openFileButton&&this.openFileButton.addEventListener(o,this.onOpenFileClick)}unbindEvents(){this.openFileButton&&this.openFileButton.removeEventListener(o,this.onOpenFileClick)}loadFile(t){this.widget.loadFile({data:t})}setScaleFactor(t){this.element.style.setProperty("--scale-factor",String(t))}getFileSelect(t){return(0,i.getComponentInstance)(t||this.options.fileSelect.dataId)}openSelectFilesDialog(t){const e=this.getFileSelect(t);e&&e.openSelectFilesDialog()}downloadFile(t){this.widget.downloadFile(t)}activatePage(t){this.widget.activatePage(t)}zoom(t){this.widget.zoom(t)}printDocument(){this.widget.printDocument()}searchText(t){return this.widget.searchText(t).length}clearSearch(){this.widget.destroySearchService()}goToNextSearchMatch(){this.widget.goToNextSearchMatch()}goToPreviousSearchMatch(){this.widget.goToPreviousSearchMatch()}enableTextSelection(){this.widget.enableTextSelection()}disableTextSelection(){this.widget.disableTextSelection()}}e.PdfViewer=s},5686:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFieldsDraggable=function(t,e){(0,i.initComponent)(r.FieldsDraggable,(0,i.addComponentSuffix)(t,"FieldsDraggable"),e)},e.destroyFieldsDraggable=function(t){(0,i.destroyComponent)((0,i.addComponentSuffix)(t,"FieldsDraggable"))};const i=n(1843),r=n(376)},376:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldsDraggable=void 0;const i=n(4771),r=n(6589),o=n(1089),s=n(1843),a=n(6533),l=(0,s.toDataAttr)("field"),c=(0,s.toDataAttr)("field-type"),h=(0,s.toDataAttr)("text"),u=".k-drag-status",d=t=>t&&t.hasAttribute("data-field");class p extends s.Component{constructor(t,e={}){super(t,e),this.options={dotNetInstance:null,jsinterop:{addField:null},draggableElementSelector:".k-pivotgrid-configurator-content",dropTarget:{itemSelector:".k-settings-description",events:{drop:null}},draggable:{group:null,filter:".k-chip[data-field-reorderable],.k-settings-description",ignore:".k-chip-action",cancelIconMarkup:"",plusIconMarkup:"",dropClueSelector:".k-grouping-dropclue"}},this.onDraggableDragStart=()=>{},this.onDraggableDrag=t=>{const e=t.sender;e.dragStarted&&(e.dragStarted&&this.canDragToAnyDropTarget(t)&&this.addDragClue(t),this.canDragToAnyDropTarget(t)||t.preventDefault())},this.onDraggableDragEnd=()=>{this.removeDragClue()},this.onDraggableDrop=()=>{this.removeDragClue(),this.destroyDropClue()},this.onDropTargetLeave=()=>{this.showDisabledHint(),this.destroyDropClue()},this.onDropTargetOver=t=>{this.canDrop(t)?this.showDropAllowedIndicators(t):this.showDropForbiddenIndicators()},this.allowsDropFrom=(t,e)=>{const n=e.elementUnderCursor.closest(".k-settings-description");return Boolean(n)},this.createHint=t=>{const e=(0,s.stringifyToStyle)({position:"absolute","z-index":2e4}),n=t.getAttribute(l)||"",i=t.getAttribute(h)||"",r=(0,s.convertToHtml)(`<div class="k-header k-drag-clue"\n                  style="${e}"\n                  data-field="${(0,s.htmlEncode)(n)}"\n                  data-text="${(0,s.htmlEncode)(i)}">\n                ${this.options.draggable.cancelIconMarkup}\n            </div>`),o=t.cloneNode(!0);return o.style.visibility="visible",r.appendChild(o),r},this.ignoreElementUnderCursor=t=>{const e=t&&t.closest(".k-grouping-dropclue");return Boolean(e)},this.onDropTargetDrop=t=>{const e=t.draggable.originalCurrentTarget;if(!t.elementUnderCursor.closest(".k-settings-description"))return;document.activeElement&&document.activeElement.blur();const n=e.getAttribute(l),i=t.elementUnderCursor.getAttribute(c);this.addField({fromField:n,toFieldType:i})},this.extendOptions(e),this.createDraggable(),this.createDropTarget()}destroy(){this.destroyDropClue(),this.destroyDraggable(),this.destroyDropTarget(),super.destroy()}extendOptions(t){this.options=(0,s.deepExtend)(this.options,t)}createDraggable(){const t=this.element;t&&(this.draggable=new i.Draggable(t,(0,s.deepExtend)(this.options.draggable,{hint:this.createHint,ignoreElementUnderCursor:this.ignoreElementUnderCursor,events:{dragStart:this.onDraggableDragStart,drag:this.onDraggableDrag,dragEnd:this.onDraggableDragEnd,drop:this.onDraggableDrop,dropTargetLeave:this.onDropTargetLeave,dropTargetOver:this.onDropTargetOver}})))}createDropTarget(){const t=document.querySelector(this.options.draggableElementSelector)||this.element;this.dropTarget=new r.DropTarget(t,(0,s.deepExtend)(this.options.dropTarget,{group:this.options.draggable.group,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}destroyDraggable(){this.draggable&&this.draggable.destroy()}addDragClue(t){const e=t.sender.originalCurrentTarget;e.style.visibility="hidden",this.dragClue=e}removeDragClue(){this.dragClue&&(this.dragClue.style.visibility="",this.dragClue=null)}canDragToAnyDropTarget(t){let e=!1;return this.draggable.forEachDropTarget((n=>{e=e||n.allowsDragFrom(this.draggable,t)})),e}canDrop(t){let e=!1;return t.draggable&&t.draggable.forEachDropTarget((n=>{n.allowsDropFrom(t.draggable,t)&&(e=!0)})),e}showEnabledHint(){const t=this.draggable.hint;if(t){const e=t.querySelector(u),n=(0,s.convertToHtml)(this.options.draggable.plusIconMarkup);e.parentElement.replaceChild(n,e)}}showDisabledHint(){const t=this.draggable.hint;if(t){const e=t.querySelector(u),n=(0,s.convertToHtml)(this.options.draggable.cancelIconMarkup);e.parentElement.replaceChild(n,e)}}createDropClue(){this.dropClue||(this.dropClue=new a.DropClue({template:`<div class="k-grouping-dropclue" style="${(0,s.stringifyToStyle)({position:"absolute","z-index":1e4})}" />`}),this.dropClueSize=this.dropClue.getSize())}destroyDropClue(){this.dropClue&&(this.dropClue.destroy(),this.dropClue=null)}addDropClue(t){if(!t.dropTarget||!t.elementUnderCursor)return;const e=t.elementUnderCursor.closest(t.dropTarget.options.itemSelector)||t.elementUnderCursor,n=t.draggable.originalCurrentTarget,i=this.getDropTargetIndicators(t.dropTarget.element,t.dropTarget.options.itemSelector).length>1,r=(0,s.haveSameParent)(e,n);let o=r?(0,s.isTargetAfterElement)(e,n):i&&!d(e);(0,s.isDirectionRtl)(this.element)&&(o=!o);let a=this.getDropClueOffsetElement({elementUnderCursor:e,dropTargetItemSelector:t.dropTarget.options.itemSelector,dropTargeElement:t.dropTarget.element,isDragInSiblings:r});if(a){this.createDropClue();const t=this.dropClue.getOffsetState(a,o);if(!o){const{width:e}=this.dropClueSize;t.left-=e/2}this.showDropClue(t)}}getDropClueOffsetElement({elementUnderCursor:t,dropTargeElement:e,dropTargetItemSelector:n,isDragInSiblings:i}){const r=t.closest(n),s=this.getDropTargetIndicators(e,n),a=s.filter(d),l=(0,o.last)(s),c=(0,o.last)(a),h=t.classList.contains("k-settings-description");let u=c||l;return r&&(i||d(r)||h)&&(u=r),u}showDropClue({top:t,left:e,height:n}){this.dropClue||this.createDropClue(),this.dropClue.setState({top:t,left:e,height:n}),this.dropClue.show()}hideDropClue(){this.dropClue&&this.dropClue.hide()}showDropAllowedIndicators(t){this.showEnabledHint(),this.addDropClue(t)}showDropForbiddenIndicators(){this.showDisabledHint(),this.destroyDropClue()}getDropTargetIndicators(t,e){return Array.from(t.querySelectorAll(e))}addField({fromField:t,toFieldType:e}){this.invokeMethodAsync(this.options.jsinterop.addField,{fromField:t,toFieldType:e})}}e.FieldsDraggable=p},7142:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initFieldsReorderable=function(t,e){(0,i.initComponent)(r.FieldsReorderable,(0,i.addComponentSuffix)(t,"FieldsReorderable"),e)},e.destroyFieldsReorderable=function(t){(0,i.destroyComponent)((0,i.addComponentSuffix)(t,"FieldsReorderable"))};const i=n(1843),r=n(3448)},3448:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FieldsReorderable=void 0;const i=n(6589),r=n(1843),o=(0,r.toDataAttr)("field"),s=(0,r.toDataAttr)("field-total-index"),a=(0,r.toDataAttr)("field-zone-index"),l=(0,r.toDataAttr)("field-reorderable"),c=(0,r.toDataAttr)("parent-col-initialization-index");class h extends r.Component{constructor(t,e={}){super(t,e),this.options={jsinterop:{reorderField:""},childSelector:".k-pivotgrid-configurator-content",dropTarget:{group:"",itemSelector:".k-chip[data-field-reorderable]"},allowsDragFromSelector:l},this.allowsDragFrom=t=>{const e=Boolean(t.originalCurrentTarget.getAttribute(this.options.allowsDragFromSelector)),n=this.dropTarget.element.querySelectorAll(this.options.dropTarget.itemSelector).length>1;return e&&n},this.allowsDropFrom=(t,e)=>{const n=e.elementUnderCursor.closest(this.options.dropTarget.itemSelector),i=t.originalCurrentTarget;if(!n||!i)return!1;const o=Boolean(i.getAttribute(this.options.allowsDragFromSelector)),s=(0,r.parseAttrToInt)(c,n),a=(0,r.parseAttrToInt)(c,i);return o&&n!==i&&s===a},this.onDropTargetDrop=t=>{const e=t.draggable.originalCurrentTarget,n=t.elementUnderCursor.closest(this.options.dropTarget.itemSelector);if(!n)return;document.activeElement&&document.activeElement.blur();const i=(0,r.parseAttrToInt)(s,e),l=(0,r.parseAttrToInt)(s,n),c=(0,r.parseAttrToInt)(a,e),h=(0,r.parseAttrToInt)(a,n),u=e.getAttribute(o),d=n.getAttribute(o);this.reorderField({fromField:u,toField:d,fromFieldIndex:i,toFieldIndex:l,fromZoneIndex:c,toZoneIndex:h})},this.extendOptions(e),this.createDropTarget()}destroy(){this.destroyDropTarget(),super.destroy()}createDropTarget(){const t=this.element.querySelector(this.options.childSelector)||this.element;this.dropTarget=new i.DropTarget(t,(0,r.deepExtend)(this.options.dropTarget,{allowsDragFrom:this.allowsDragFrom,allowsDropFrom:this.allowsDropFrom,events:{drop:this.onDropTargetDrop}}))}destroyDropTarget(){this.dropTarget&&this.dropTarget.destroy()}reorderField({fromField:t,toField:e,fromFieldIndex:n,toFieldIndex:i,fromZoneIndex:r,toZoneIndex:o}){this.invokeMethodAsync(this.options.jsinterop.reorderField,{fromField:t,toField:e,fromFieldIndex:n,toFieldIndex:i,fromZoneIndex:r,toZoneIndex:o})}}e.FieldsReorderable=h},9998:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const i=n(1635);i.__exportStar(n(783),e),i.__exportStar(n(5686),e),i.__exportStar(n(7142),e)},783:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPivotGridConfigurator=function(t,e){(0,r.initComponent)(i.PivotGridConfigurator,t,e)},e.destroyPivotGridConfigurator=function(t){(0,r.destroyComponent)(t)};const i=n(2429),r=n(1843)},2429:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PivotGridConfigurator=void 0;const i=n(1843),r="keydown",o="focusin",s="focusout",a="k-pivotgrid-configurator",l="k-chip",c="data-field-type";class h extends i.Component{constructor(t,e={}){super(t,e),this.options={dotNetInstance:null,jsinterop:{}},this.onKeyDown=t=>{var e,n;const r=t.target.closest(`.${l}`),o=null==r?void 0:r.querySelector(".k-chip-more-action"),s=null==r?void 0:r.getAttribute("data-field"),a=null==o?void 0:o.getAttribute("data-id"),h=(t.keyCode===i.KeyCode.ARROWDOWN||t.keyCode===i.KeyCode.ARROWUP)&&t.shiftKey&&t.ctrlKey,u=t.keyCode===i.KeyCode.BACKSPACE||t.keyCode===i.KeyCode.DELETE;if(t.altKey&&t.keyCode===i.KeyCode.ARROWDOWN&&a&&(this.lastFocusedChipElement=r),(0,i.hasClass)(l,t.target)&&(u||h)){const r=Array.from(this.element.querySelectorAll(`.${l}`)),o=1===t.target.closest(".k-chip-list").querySelectorAll(`.${l}`).length,s=r.indexOf(t.target);if(o&&h)this.lastFocusedChipZone="rows"===(null===(e=t.target)||void 0===e?void 0:e.getAttribute(c))?"columns":"rows";else{const t=null!==(n=r[s-1])&&void 0!==n?n:r[s];if(t)(0,i.focusInNextFrameAsync)(t,!0);else{const t=this.element.querySelector(".k-treeview").getAttribute("data-id");(0,i.focusFirstFocusableChild)(t,!0)}}}this.invokeKeyDown(t,s,a)},this.onFocusIn=t=>{t.target&&(0,i.hasAncestor)(t.target,`.${a}`)&&!(0,i.hasClass)(a,t.target)&&this.tabKeyTrap.enableKeyTrap()},this.onFocusOut=t=>{this.element.contains(t.relatedTarget)&&this.element!==t.relatedTarget||this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap()},this.extendOptions(e),this.bindEvents(),this.initTabKeyTrap()}destroy(){this.destroyTabKeyTrap(),this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener(r,this.onKeyDown,!0),this.element.addEventListener(o,this.onFocusIn),this.element.addEventListener(s,this.onFocusOut)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown),this.element.removeEventListener(o,this.onFocusIn),this.element.addEventListener(s,this.onFocusOut)}extendOptions(t){this.options=(0,i.deepExtend)(this.options,t)}focusElement(){this.tabKeyTrap.findEdgeElements(),this.tabKeyTrap.firstElement.focus(),this.tabKeyTrap.enableKeyTrap()}restoreFocus(){if(this.lastFocusedChipElement)this.lastFocusedChipElement.focus(),this.lastFocusedChipElement=null;else{const t=this.element.querySelectorAll(`div[${c}='${this.lastFocusedChipZone}']`);if(t){const e=t[t.length-1];null==e||e.focus()}}}initTabKeyTrap(){this.tabKeyTrap=new i.TabKeyTrap(this.element)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}invokeKeyDown(t,e,n){let r={field:e,fieldMenuDataId:n,keyboardEventArgs:(0,i.converToKeyboardEventArgs)(t)};this.invokeMethodAsync(this.options.jsinterop.keydown,r)}}e.PivotGridConfigurator=h},6522:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(1797),e)},1797:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPivotGrid=function(t,e){(0,r.initComponent)(i.PivotGrid,t,e)},e.destroyPivotGrid=function(t){(0,r.destroyComponent)(t)};const i=n(5107),r=n(1843)},5107:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PivotGrid=void 0;const i=n(1843),r="keydown",o=[i.KeyCode.ARROWLEFT,i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN];class s extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{},classNames:{columnHeadersElement:"k-pivotgrid-column-headers",rowHeadersElement:"k-pivotgrid-row-headers",dataTableElement:"k-pivotgrid-values"}},this.onKeyDown=t=>{o.includes(t.keyCode)&&t.preventDefault(),this.invokeKeyDown(t)},this.extendOptions(e),this.initElements(),this.refreshElements(),this.createContentScrollSync(),this.bindEvents()}destroy(){this.destroyContentScrollSync(),this.unbindEvents()}initElements(){this.columnHeadersElement=this.element.querySelector((0,i.toClassSelector)(this.options.classNames.columnHeadersElement)),this.rowHeadersElement=this.element.querySelector((0,i.toClassSelector)(this.options.classNames.rowHeadersElement)),this.dataTableElement=this.element.querySelector((0,i.toClassSelector)(this.options.classNames.dataTableElement))}bindEvents(){this.element.addEventListener(r,this.onKeyDown)}unbindEvents(){this.element.removeEventListener(r,this.onKeyDown)}refresh(){this.refreshElements()}refreshElements(){this.element&&(this.refreshHeaders(),this.refreshScrollbarSize())}refreshHeaders(){if(!this.element||!this.columnHeadersElement||!this.rowHeadersElement)return;const t=this.columnHeadersElement.querySelector(".k-pivotgrid-table");(0,i.hasValue)(t)&&(this.element.style["grid-template-rows"]=`${t.offsetHeight}px 1fr`);const e=this.rowHeadersElement.querySelector(".k-pivotgrid-table");if((0,i.hasValue)(e)){const t=e.querySelectorAll("col")||[];let n=0;for(let e=0;e<t.length;e++){const r=t[e];n+=(0,i.parseStyleAttrToInt)("width",r)}const r=n||e.offsetWidth;this.element.style["grid-template-columns"]=`${r}px 1fr`}}refreshScrollbarSize(){(0,i.setScrollbarSizeCssVariables)()}createContentScrollSync(){this.scrollSync&&this.destroyContentScrollSync(),(0,i.hasValue)(this.rowHeadersElement)&&(0,i.hasValue)(this.columnHeadersElement)&&(0,i.hasValue)(this.dataTableElement)||this.initElements(),this.scrollSync=new i.ScrollSync(this.dataTableElement,{vertical:!0,horizontal:!0,syncFromConnections:!0,connections:[this.rowHeadersElement,this.columnHeadersElement],allowScrollWithoutScrollbar:!0})}destroyContentScrollSync(){this.scrollSync&&(this.scrollSync.destroy(),this.scrollSync=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,t.key)}}e.PivotGrid=s},7345:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(1949),e)},1949:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPopover=function(t,e){if(!(0,i.getComponentInstance)(t)){const n=new r.Popover(null,e);(0,i.setComponentInstance)(t,n)}};const i=n(1843),r=n(2091)},2091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Popover=void 0;const i=n(8863),r=n(1843),o=n(4264),s="k-callout-n",a="k-callout-s",l="k-callout-w",c="k-callout-e",h=[a,s,c,l],u="bottom",d="left",p="right",f="keydown",g="click",m="mouseenter",y="mouseleave";class v extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,anchorSelector:"",showOn:"",popupDataId:"",jsinterop:{hide:"",show:""}},this.onMouseEnter=t=>{const e=t.target;this.isAnchor(e)&&this.show(e)},this.onMouseLeave=t=>{var e;const n=this.getPopupComponent(),i=n.visible,r=t.relatedTarget,o=r&&this.isAnchor(r),s=(null===(e=n.element)||void 0===e?void 0:e.contains(r))||o;i&&!s&&this.hide()},this.onClick=t=>{const e=t.target;this.isAnchor(e)&&this.toggle(e)},this.onKeyDown=t=>{const e=this.getPopupComponent().visible;t.key===r.Key.ESC&&e&&this.hide()},this.hide=()=>{this.invokeMethodAsync(this.options.jsinterop.hide)},this.show=t=>{let e=t;const n=this.getPopupComponent();e||(e=document.documentElement.contains(n.anchor)?n.anchor:document.querySelector(this.options.anchorSelector)),(0,r.isDomElement)(e)&&e&&(n.anchors.forEach((t=>{(0,o.ownsElementOrSelf)(t,e)&&(n.anchor=t)})),this.invokeMethodAsync(this.options.jsinterop.show))},this.toggle=t=>{this.getPopupComponent().visible?this.hide():this.show(t)},this.extendOptions(e),this.popupElement=(0,o.getElementByDataId)(this.options.popupDataId,null),this.initTabKeyTrap(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyTabKeyTrap(),super.destroy()}bindEvents(){const t=window.document.documentElement;t.addEventListener(f,this.onKeyDown,!0),this.options.showOn===m?(t.addEventListener(m,this.onMouseEnter,!0),t.addEventListener(y,this.onMouseLeave,!0)):this.options.showOn===g&&t.addEventListener(g,this.onClick,!0)}unbindEvents(){const t=window.document.documentElement;t.removeEventListener(f,this.onKeyDown,!0),this.options.showOn===m?(t.removeEventListener(m,this.onMouseEnter,!0),t.removeEventListener(y,this.onMouseLeave,!0)):t.removeEventListener(g,this.onClick,!0)}initTabKeyTrap(){!this.tabKeyTrap&&this.popupElement&&(this.tabKeyTrap=new r.TabKeyTrap(this.popupElement),this.tabKeyTrap.enableKeyTrap())}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}focusAnchor(){const t=this.getPopupComponent().anchor;t&&t.focus()}focusFirstChildElement(){const t=this.getPopupComponent(),e=(0,o.findFocusable)(t.element);e&&e.focus()}adjustCalloutPosition(t){var e;const n=this.getPopupComponent(),i=null===(e=n.element)||void 0===e?void 0:e.querySelector(".k-popover-callout");n.flipped?this.flipCallout(i,t):this.resetCallout(i,t)}resetCallout(t,e){const n={top:a,[u]:s,[d]:c,[p]:l};for(const e of h)(0,r.hasClass)(e,t)&&(0,r.removeClass)(e,t);const i=n[e];i&&(0,r.addClass)(i,t)}flipCallout(t,e){switch(e){case"top":(0,r.removeClass)(a,t),(0,r.addClass)(s,t);break;case u:(0,r.removeClass)(s,t),(0,r.addClass)(a,t);break;case d:(0,r.removeClass)(c,t),(0,r.addClass)(l,t);break;case p:(0,r.removeClass)(l,t),(0,r.addClass)(c,t)}}getPopupComponent(){return(0,r.getComponentInstance)(this.options.popupDataId)}isAnchor(t){return t.matches(this.options.anchorSelector)||null!==t.closest(this.options.anchorSelector)}}e.Popover=v},9364:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(3581),e)},3581:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initPopup=function(t,e){(0,i.initComponent)(r.Popup,t,e)};const i=n(1843),r=n(2683)},2683:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Popup=void 0;const i=n(1843),r=n(9794),o=n(4264),s=(0,o.getDefaultElementRect)(),a=Array.from,l="mouseleave",c="mouseover",h="mousedown",u="pointerdown",d="scroll",p="resize",f="width",g="height",m="auto",y="data-id";class v extends i.Component{constructor(t,e){if(super(t,e),this._anchors=[],this.toggleElements=[],this.mouseHoverTimeout=null,this.state={},this.options={dotNetInstance:null,anchorSelector:"",autoSize:!1,closeOnOutsideClick:!0,closeOnResize:!0,closeOnAnchorHide:!0,dynamicAnchors:!1,anchorRect:s,toggleElementSelector:"",width:"",height:"",fitToScreen:!1,margin:{horizontal:0,vertical:0},inheritAnchorWidth:!0,collision:{horizontal:"fit",vertical:"flip"},anchorAlign:{horizontal:"left",vertical:"bottom"},elementAlign:{horizontal:"left",vertical:"top"},openOn:"click",closeOn:"click",closeParentPopupsUntilSelector:"",jsinterop:{close:"",closeAsync:"",openAsync:"",positionSet:""}},this.toggle=t=>{t.preventDefault(),this._visible?this.closeAsync():this.openAsync(t)},this.onCloseEvent=t=>{!(this.toggleElements&&[...this.toggleElements].includes(t.target))&&t.target!==this.anchor||this.isChild(t.relatedTarget)||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync()}),30))},this.onElementMouseOver=()=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout)},this.onMouseDown=t=>{!this.isChild(t.target)&&this.options.closeOnOutsideClick&&this.closeAsync()},this.onElementMouseLeave=t=>{let e=t.relatedTarget;if((0,i.ownsElementOrSelf)(this.element,e)||(0,i.ownsElementOrSelf)(this.anchor,e))return;let n=e&&e.closest(".k-animation-container");const r=n&&(n.dataset.id===this.element.dataset.id||this.isChild(e));n&&r||t.target!==this.element||(this.mouseHoverTimeout=setTimeout((()=>{this.closeAsync(),this.options.closeParentPopupsUntilSelector&&this.closeParentPopups()}),30))},this.onScroll=t=>{this.isChild(t.target)||this.positionElement()},this.onResize=()=>{this.options.closeOnResize&&this.close()},this.openAsync=(t,e=0,n=0)=>{this.mouseHoverTimeout&&clearTimeout(this.mouseHoverTimeout);const r=this.anchor;this.anchors.length>1&&this.anchors.forEach((e=>{(0,i.ownsElementOrSelf)(e,t.target)&&(this.anchor=e)})),r!==this.anchor&&this.closeAsync(),this.options.anchorRect={top:n,left:e,width:0,height:0},this.invokeMethodAsync(this.options.jsinterop.openAsync)},this.extendOptions(e),this.resetState(),this.anchors=this.getAnchorsFromDocument(),this.anchor=this.anchors[0],this.anchors.length>1&&e.toggleElementSelector)throw new Error("Toggle element is not supported when you have more than one anchor");e.toggleElementSelector&&(this.toggleElements=a(document.querySelectorAll(e.toggleElementSelector))),(0,i.supportsTouchEvents)()||this.createIntersectionObserver(),this.bindAnchorsEvents(),this.bindElementEvents(),this.initPosition()}setState(t){this.state=(0,i.extend)(this.state||{},t)}resetState(){this.setState({isHeightFitToScreen:!1,isWidthFitToScreen:!1})}destroy(){this.unbindElementEvents(),this.unbindEvents(),this.unbindAnchorsEvents(),this.destroyIntersectionObserver(),super.destroy(),this.toggleElements=null,this.anchor=null}getAbsoluteElementRect(t){const e=t?t.getBoundingClientRect():s,n=document.body.getBoundingClientRect();return{x:e.top-n.top,y:e.left-n.left,top:e.top-n.top,left:e.left-n.left,bottom:e.top-n.top+e.height,right:e.left-n.left+e.width,width:e.width,height:e.height}}bindElementEvents(){this.element&&this.options.closeOn===l&&(this.element.addEventListener(l,this.onElementMouseLeave),this.element.addEventListener(c,this.onElementMouseOver))}unbindElementEvents(){this.element&&(this.element.removeEventListener(l,this.onElementMouseLeave),this.element.removeEventListener(c,this.onElementMouseOver))}bindAnchorsEvents(){this.toggleElements&&this.toggleElements.length?this.toggleElements.forEach((t=>{this.bindAnchorEvents(t)})):this.anchors.forEach((t=>{this.bindAnchorEvents(t)}))}unbindAnchorsEvents(){this.toggleElements&&this.toggleElements.forEach((t=>{this.unbindAnchorEvents(t)})),this.anchors.forEach((t=>{this.unbindAnchorEvents(t)}))}bindAnchorEvents(t){if(!(0,i.isDomElement)(t))return;const{openOn:e,closeOn:n}=this.options;e===n?t.addEventListener(e,this.toggle,!0):(t.addEventListener(e,this.openAsync,!0),t.addEventListener(n,this.onCloseEvent,!0))}unbindAnchorEvents(t){if(!(0,i.isDomElement)(t))return;const{openOn:e,closeOn:n}=this.options;t.removeEventListener(e,this.toggle,!0),t.removeEventListener(e,this.openAsync,!0),t.removeEventListener(n,this.onCloseEvent,!0)}bindEvents(){this.bound||(this.bound=!0,document.addEventListener(d,this.onScroll,!0),(0,i.supportsTouchEvents)()||window.addEventListener(p,this.onResize),window&&window.PointerEvent?document.addEventListener(u,this.onMouseDown,!0):document.addEventListener(h,this.onMouseDown,!0))}unbindEvents(){document.removeEventListener(d,this.onScroll,!0),document.removeEventListener(h,this.onMouseDown,!0),document.removeEventListener(u,this.onMouseDown,!0),window.removeEventListener(p,this.onResize,!0),this.bound=!1}closeParentPopups(){let t=this.element;for(;t&&!t.querySelector(this.options.closeParentPopupsUntilSelector);){const e=t.getAttribute(y);let n=(0,i.getComponentInstance)(e),r=n.anchor;n.close(),t=r&&r.closest(".k-animation-container")}}onOpen(){this._visible=!0,this.bindEvents(),this.element&&!this.options.width&&this.options.inheritAnchorWidth&&(this.element.style.width=this.getAnchorWidth()),this.anchor&&this.setZIndex(this.anchor),this.positionElement()}openAboveSiblings(){this.element.style["z-index"]=(0,o.getNextZIndexFromSiblings)(this.element)}getAutoSizePosition(){var t;const e=null===(t=this.element)||void 0===t?void 0:t.children[0];if(e){let t=e.style.display;e.style.visibility="hidden",e.style.display="block";let n=this.getPosition();return e.style.display=t,e.style.visibility="",n}return this.getPosition()}onClose(){this._visible=!1,this.revertFitToScreen(),this.unbindEvents()}initPosition(){this.element&&(this.element.style.left="-10000px",this.element.style.top="0px")}getClonedElementRect(t,e={useAbsoluteRect:!0}){const n=this.getClonedElement(t);this.element.parentNode.appendChild(n);const i=e.useAbsoluteRect?this.getAbsoluteElementRect(n):n.getBoundingClientRect();return this.element.parentNode.removeChild(n),i}getClonedElement(t){const e=t.cloneNode(!0);return e.style.left="",e.style.top="",e.style.position="fixed",e.style.visibility="hidden",e.removeAttribute("data-id"),e.removeAttribute("id"),e.removeAttribute("name"),e}getPosition(){const t=this.getAnchorRect();let e=this.getClonedElementRect(this.element),n=(0,r.align)({anchorRect:t,elementRect:e,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,margin:this.options.margin});e.top=n.top,e.left=n.left,e=(0,r.removeScroll)(e,(0,r.scrollPosition)(this.element));let i=(0,r.restrictToView)({anchorRect:t,elementRect:e,anchorAlign:this.options.anchorAlign,elementAlign:this.options.elementAlign,collisions:this.options.collision,viewPort:(0,r.getWindowViewPort)(this.element),margin:this.options.margin});this.flipped=i.flipped;const o=window.innerHeight-t.top,s={top:`${n.top+i.offset.top}px`,left:`${n.left+i.offset.left}px`,bottom:this.anchor?`${o}px`:null,flipToFitScreen:i.flipped,flipped:i.flipped,flip:i.flip};if(this.canOverflowScreen()&&!i.flipped){const t=this.shouldFlipToFitScreen(s);s.flipToFitScreen=t}return s}positionElement(){const t=this.getElementPosition();return this.element.style.top=t.top,this.element.style.left=t.left,this.fitToScreen(t),this.invokePositionSet(),t}fitToScreen(t){this.options.fitToScreen&&this.fitHeightToScreen(t)}fitHeightToScreen(t){var e;if(!this.anchor)return;const n=(0,o.getViewPortRect)(),r=this.element.getBoundingClientRect(),s={top:parseFloat(this.element.style.top),left:parseFloat(this.element.style.left),right:parseFloat(this.element.style.left)+r.width,bottom:parseFloat(this.element.style.top)+r.height,height:r.height,width:r.width},a=(0,o.getIntersectionOverflowingRect)(s,n);t.overflowingRect=a;const l=this.anchor.getBoundingClientRect();if(!0===t.flipped&&null!==t.bottom&&this.hasAutoHeight());else if(!t.flipped&&a.bottom<0&&this.hasAutoHeight()){const t=this.getAnchorRect().top,r=(0,o.getScrollBarHeight)();let s,a;l.top>=n.height/2?(s=l.top-.050000000000000044*window.innerHeight-r,a=t-s):(s=.95*window.innerHeight-l.top-l.height-r,a=t+l.height),this.element.style.top=(0,i.toPixel)(a),this.element.style.maxHeight=(0,i.toPixel)(s),null===(e=this.getAnimationGroup())||void 0===e||e.fitDimensionToScreen(g,s),this.setState({isHeightFitToScreen:!0})}}shouldFlipToFitScreen(t){if(!this.anchor)return;const e=(0,o.getViewPortRect)(),n=this.getClonedElement(this.element);this.element.parentNode.appendChild(n),n.style.top=t.top,n.style.left=t.left;const i=n.getBoundingClientRect(),r={top:parseFloat(n.style.top),left:parseFloat(n.style.left),right:parseFloat(n.style.left)+i.width,bottom:parseFloat(n.style.top)+i.height,height:i.height,width:i.width},s=(0,o.getIntersectionOverflowingRect)(r,e);t.overflowingRect=s;const a=this.anchor.getBoundingClientRect();let l=!1;return!0===t.flipped&&null!==t.bottom&&this.hasAutoHeight()||!t.flipped&&s.bottom<0&&this.hasAutoHeight()&&a.top>=e.height/2&&(l=!0),this.element.parentNode.removeChild(n),l}getElementPosition(){let t;return t=!0===this.options.autoSize?this.getAutoSizePosition():this.getPosition(),t}getAnchorWidth(){if(!this.anchor)return"";return`${this.getAbsoluteElementRect(this.anchor).width}px`}getAnchorRect(){return this.anchor?this.getAbsoluteElementRect(this.anchor):this.options.anchorRect}setZIndex(t){if(!this.element)return;let e;t&&(e=(0,r.zIndex)(t,this.element)),this.element.style.zIndex=e||10002}createIntersectionObserver(){this.destroyIntersectionObserver(),this.intersectionObserver=this.initIntersectionObserver(),this.anchors.forEach((t=>{this.observeIntersection(t)}))}initIntersectionObserver(){const t={threshold:this.getIntersectionThreshold()};return new window.IntersectionObserver((t=>{t.forEach((t=>{t.intersectionRatio>=0&&t.intersectionRatio<1&&this.onAnchorHide(t.target)}))}),t)}observeIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver&&this.intersectionObserver.observe(t)}unobserveIntersection(t){this.canObserveIntersection(t)&&this.intersectionObserver&&this.intersectionObserver.unobserve(t)}canObserveIntersection(t){return this.intersectionObserver&&(0,i.isDomElement)(t)}destroyIntersectionObserver(){this.intersectionObserver&&(this.anchors.forEach((t=>{this.unobserveIntersection(t)})),this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect()),this.intersectionObserver=null}onAnchorHide(t){if(this.hasDynamicAnchors()&&this._ignoreFirstIntersectionCheck){if((0,i.ownsElementOrSelf)(this.anchor,t))return void(this._ignoreFirstIntersectionCheck=!1)}else this.options.closeOnAnchorHide&&this.close()}getIntersectionThreshold(){let t=[];for(let e=0;e<=1;e+=.1)t.push(e);return t}isElementVisible(){return this.element&&this.element.getElementsByClassName("k-popup")[0]}isChild(t){const e=t;if((0,i.isChild)(e,[this.element,this.anchor]))return!0;const n=(0,i.isDomElement)(e)&&e.closest(".k-animation-container");if(n&&n!==this.element){const t=n.getAttribute("data-id");let r=(0,i.getComponentInstance)(t||n.id);return!!(r&&r.isParent(this.element))||this.isChildOfPopup(e,this.element)}return!1}isChildOfPopup(t,e){const n=t&&t.closest(".k-animation-container");if(n&&n===e)return!0;if(n&&n!==e){const t=n.getAttribute("data-id"),r=(0,i.getComponentInstance)(t||n.id);if(r)return this.isChildOfPopup(r.anchor,e)}return!1}isParent(t){return t&&(0,i.ownsElement)(t,this.anchor)}close(){this.invokeMethodAsync(this.options.jsinterop.close)}closeAsync(){this.invokeMethodAsync(this.options.jsinterop.closeAsync)}invokePositionSet(){this.options.jsinterop.positionSet&&this.invokeMethodAsync(this.options.jsinterop.positionSet)}get anchors(){return this.hasDynamicAnchors()&&(this.anchors=this.getAnchorsFromDocument()),this._anchors}get visible(){return this._visible}set anchors(t){const e=this.hasAnyAnchorChanged(t);this.hasDynamicAnchors()&&e&&((this._anchors||[]).forEach((t=>{this.unobserveIntersection(t),this.unbindAnchorEvents(t)})),t.forEach((t=>{this.bindAnchorEvents(t)}))),this._anchors=t}get anchor(){return this._anchor||(this._anchor=this._anchors[0]),this._anchor}set anchor(t){this.unobserveIntersection(this._anchor),this._anchor=t,this.hasDynamicAnchors()&&(this._ignoreFirstIntersectionCheck=!0,this.observeIntersection(this._anchor),this.bindAnchorEvents(this._anchor))}getAnchorsFromDocument(){return a(document.querySelectorAll(this.options.anchorSelector))}hasAnyAnchorChanged(t){if(!this.hasDynamicAnchors())return!1;const e=a(this._anchors||[]);if(!e||e.length!==t.length)return!0;for(let n=0;n<t.length;n++)if(!e.includes(t[n]))return!0;return!1}hasDynamicAnchors(){return this.options.dynamicAnchors}getAnimationGroup(){if(!(0,i.hasValue)(this.element))return;const t=this.element.querySelector(".k-child-animation-container");if(!(0,i.hasValue)(t))return;const e=t.getAttribute(y);return(0,i.getComponentInstance)(e||t.id)}hasAutoHeight(){return this.hasAutoDimension(g)}hasAutoWidth(){return this.hasAutoDimension(f)}hasAutoDimension(t){return this.element.style[t]===m||this.options[t]===m}canOverflowScreen(){return this.canHeightOverflowScreen()||this.canWidthOverflowScreen()}canHeightOverflowScreen(){return this.canDimensionOverflowScreen(g)}canWidthOverflowScreen(){return this.canDimensionOverflowScreen(f)}canDimensionOverflowScreen(t){const e=(0,i.capitalizeFirstLetter)(t),n=window.getComputedStyle(this.element)["max"+e],r="none"===n||""===n;return this.hasAutoDimension(t)&&r}revertFitToScreen(){this.revertFitHeightToScreen(),this.revertFitWidthToScreen()}revertFitHeightToScreen(){this.state.isHeightFitToScreen&&(this.revertFitDimensionToScreen(g),this.setState({isHeightFitToScreen:!1}))}revertFitWidthToScreen(){this.state.isWidthFitToScreen&&(this.revertFitDimensionToScreen(f),this.setState({isWidthFitToScreen:!1}))}revertFitDimensionToScreen(t){const e="max"+(0,i.capitalizeFirstLetter)(t);this.element.style[e]=""}}e.Popup=v},1394:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SankeyInstanceObserver=void 0;const i=n(6294);class r extends i.InstanceObserver{constructor(t,e){super(t,e),this.handlerMap={nodeClick:"onObserverNodeClick",linkClick:"onObserverLinkClick",nodeEnter:"onObserverNodeEnter",linkEnter:"onObserverLinkEnter",nodeLeave:"onObserverNodeLeave",linkLeave:"onObserverLinkLeave"}}}e.SankeyInstanceObserver=r},6123:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SankeyNodesAlign=void 0,e.SankeyNodesAlign={Stretch:0,Left:1,Right:2}},6248:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SankeyNodesLabelAlign=void 0,e.SankeyNodesLabelAlign={Left:0,Center:1,Right:2}},6254:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SankeyNodesLabelPosition=void 0,e.SankeyNodesLabelPosition={Inside:0,Before:1,After:2}},743:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4757),e)},4757:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateSankey=function(t,e,n){(0,o.initOrUpdateDataVizComponent)({id:t,widgetOptions:e,componentOptions:n,services:{themeService:new r.ThemeService,intlService:i.IntlService},componentConstructor:s.Sankey})};const i=n(4004),r=n(4004),o=n(7641),s=n(3507)},3507:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Sankey=void 0;const i=n(7641),r=n(6294),o=n(1394),s=n(1843),a=n(6123),l=n(6248),c=n(6254),h="align",u="label.align",d="label.position";class p extends i.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),this.options={tooltipPopupId:"",tooltipOffset:12,jsinterop:{}},this.onShowTooltip=t=>{const e=t.tooltipData,n=t.tooltipData.popupOffset,i=this.getPopupComponent(),r=this.getTooltipAnchorPosition(t);if(i&&(i.options.anchorAlign=e.popupAlign,i.options.anchorRect={x:0,y:0,width:0,height:0,top:r.top,left:r.left,right:n.right||0,bottom:n.bottom||0}),t.nodeValue){const e={dataItem:t.dataItem,value:t.nodeValue};this.invokeNodeTooltipShow(e)}else this.invokeLinkTooltipShow(t.dataItem)},this.onHideTooltip=()=>{this.isTooltipShowInProgress=!1,this.invokeTooltipHide()},this.onObserverNodeClick=t=>{const e=this.transformEventArgs(t);this.invokeNodeClick(e)},this.onObserverLinkClick=t=>{const e=this.transformEventArgs(t);this.invokeLinkClick(e)},this.onObserverNodeEnter=t=>{const e=this.transformEventArgs(t);this.invokeNodeEnter(e)},this.onObserverLinkEnter=t=>{if(this.isTooltipShowInProgress)return;this.isTooltipShowInProgress=!0;const e=this.transformEventArgs(t);this.invokeLinkEnter(e)},this.onObserverNodeLeave=t=>{const e=this.transformEventArgs(t);this.invokeNodeLeave(e)},this.onObserverLinkLeave=t=>{this.isTooltipShowInProgress=!1;const e=this.transformEventArgs(t);this.invokeLinkLeave(e)};const r=this.getThemeOptions(),{seriesColors:o}=r;e.nodeColors=e.nodeColors||o||[],this.extendOptions(e),this.createInstanceObserver(),this.initWidget(this.element,this.getWidgetOptions()),this.attachEvents()}getWidgetConstructor(){return r.Sankey}attachEvents(){Object.entries(this.instanceObserver.handlerMap).forEach((t=>{const e=t[0],n=t[1];this.widget.bind(e,this[n])})),this.widget.bind("tooltipShow",(t=>this.onShowTooltip(t))),this.widget.bind("tooltipHide",(()=>this.onHideTooltip()))}createInstanceObserver(){this.instanceObserver=new o.SankeyInstanceObserver(this)}destroyInstanceObserver(){this.instanceObserver=null}getTooltipAnchorPosition(t){const e=this.getPopupComponent().element,n=e.offsetWidth,i=e.offsetHeight,r=Object.assign({},t.tooltipData.popupOffset),o=t.tooltipData.popupAlign,s=this.options.tooltipOffset;return r.left+="left"===o.horizontal?s:-1*s,"right"===o.horizontal&&(r.left-=n),"bottom"===o.vertical?r.top-=i-s:r.top+=s,r}getPopupComponent(){return(0,s.getComponentInstance)(this.options.tooltipPopupId)}invokeNodeClick(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverNodeClick,{dataItem:t})}invokeLinkClick(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverLinkClick,t)}invokeNodeEnter(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverNodeEnter,{dataItem:t})}invokeLinkEnter(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverLinkEnter,t)}invokeNodeLeave(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverNodeLeave,{dataItem:t})}invokeLinkLeave(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverLinkLeave,t)}invokeLinkTooltipShow(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverLinkTooltipShow,t)}invokeNodeTooltipShow(t){return this.invokeMethodAsync(this.options.jsinterop.onObserverNodeTooltipShow,t)}invokeTooltipHide(){return this.invokeMethodAsync(this.options.jsinterop.onObserverTooltipHide)}transformEventArgs(t){var e,n;return this.convertNodePropertiesToEnums(t.dataItem),this.convertNodePropertiesToEnums(null===(e=t.dataItem)||void 0===e?void 0:e.source),this.convertNodePropertiesToEnums(null===(n=t.dataItem)||void 0===n?void 0:n.target),t.dataItem}convertNodePropertiesToEnums(t){var e,n;if(!(0,s.hasValue)(t)||!(0,s.isObject)(t))return{};(0,s.isString)(t.align)&&(t.align=this.convertNodePropertyToEnum(h,t.align)),(0,s.isString)(null===(e=t.label)||void 0===e?void 0:e.align)&&(t.label.align=this.convertNodePropertyToEnum(u,t.label.align)),(0,s.isString)(null===(n=t.label)||void 0===n?void 0:n.position)&&(t.label.position=this.convertNodePropertyToEnum(d,t.label.position))}convertNodePropertyToEnum(t,e){const n=this.mapKeyToNodePropertyEnum(t);if(n){const t=n[(0,s.capitalizeFirstLetter)(e)];if((0,s.hasValue)(t))return t}return 0}mapKeyToNodePropertyEnum(t){switch(t){case u:return l.SankeyNodesLabelAlign;case d:return c.SankeyNodesLabelPosition;case h:return a.SankeyNodesAlign}}}e.Sankey=p},6126:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContentTableBase=void 0;const i=n(1843),r=n(4419),o=n(193),s=n(1089),a=n(1843);class l extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,allowUpdate:!1,jsinterop:{resizeAppointments:""}},this.onResize=()=>{this.invokeResizeAppointments()},this.renderMoveHints=t=>{t&&t.length&&this.moveTarget&&(this.destroyHints(),t.forEach((t=>{let e=this.createHint(this.moveTarget);this.renderHintElement(e,t)})))},this.renderHintElement=()=>{throw new Error("You have to implement the method renderHintElement!")},this.getSlotUnderCursor=t=>{let e=(0,s.getElementFromPoint)(t);if(!e)return null;let n=e.closest(".k-event");return n&&((0,i.hideElement)(n),e=this.getSlotUnderCursor(t),(0,i.showElement)(n)),e.closest(".k-scheduler-cell.k-slot-cell")},this.createHint=t=>{let e=t.cloneNode();return e.className+=" k-event-drag-hint",e.style.zIndex="2",this.hints[this.hints.length]=e,e},this.destroyHints=()=>{this.hints.forEach((t=>{t.parentNode.removeChild(t)})),this.hints=[]},this.extendOptions(e),this.initResizeService(),this.options.allowUpdate&&this.createMovable(),this.hints=[],this.width=0}destroy(){this.bodyElement=null,this.destroyResizeService(),this.destroyMovable(),super.destroy()}setOptions(t){this.options.allowUpdate!==t.allowUpdate&&(t.allowUpdate?this.createMovable():this.destroyMovable()),this.extendOptions(t)}initResizeService(){this.resizeService||(this.resizeService=new a.ResizeService({element:this.element,onResize:this.onResize}))}destroyResizeService(){this.resizeService&&(this.resizeService.destroy(),this.resizeService=null)}invokeResizeAppointments(){this.invokeMethodAsync(this.options.jsinterop.resizeAppointments,this.getSlotMetrics())}refresh(){this.invokeResizeAppointments()}getSlotMetrics(){let t=this.getFirstCell(),e=this.getContentWidth();return this.setHeadersWidths(),this.slotMetrics={width:e-t.offsetLeft,height:t.offsetHeight,left:t.offsetLeft},this.slotMetrics}createMovable(){this.destroyMovable(),this.movable=new r.Draggable({press:this.onMovableDragStart.bind(this),drag:this.onMovableDrag.bind(this),release:this.onMovableDrop.bind(this),mouseOnly:!0}),this.movable.bindTo(this.element)}destroyMovable(){this.movable&&this.movable.destroy&&this.movable.destroy(),this.moveTarget=null}onMovableDragStart(t){this.moveTarget=null,this.dragStarted=!1;let e=t.originalEvent.target;if(e&&e.closest(".k-event")){let n=this.getSlotUnderCursor(t);this.moveTarget=e.closest(".k-event"),this.resizeStart=Boolean(e.closest(".k-resize-n, .k-resize-w")),this.resizeEnd=Boolean(e.closest(".k-resize-s, .k-resize-e")),this.lastCellIndex=this.originalCellIndex=this.getCellIndex(n),this.lastRowIndex=this.originalRowIndex=this.getRowIndex(n),this.lastResourceIndex=this.originalResourceIndex=this.getResourceIndex(n)}}onMovableDrag(t){if(!this.moveTarget)return;if(!this.dragStarted)return void(this.dragStarted=!0);let e=this.getSlotUnderCursor(t);if(e){let t=(0,i.hasClass)("k-scheduler-alldays-slot",e),n=this.getCellIndex(e),r=this.getRowIndex(e),o=this.getResourceIndex(e),s=!1;n!==this.lastCellIndex&&(this.lastCellIndex=n,s=!0),r!==this.lastRowIndex&&(this.lastRowIndex=r,s=!0),o!==this.lastResourceIndex&&(this.resourceRowIndex=o,s=!0),s&&this.invokeMethodAsync(this.options.jsinterop.getMoveHint,{rowIndex:r,cellIndex:n,resourceIndex:o,originalCellIndex:this.originalCellIndex,originalRowIndex:this.originalRowIndex,originalResourceIndex:this.originalResourceIndex,resizeStart:this.resizeStart,resizeEnd:this.resizeEnd,isAllDay:t}).then(this.renderMoveHints)}}onMovableDrop(){this.destroyHints(),this.dragStarted&&this.invokeMethodAsync(this.options.jsinterop.moveAppointment),this.moveTarget=null,this.lastCellIndex=this.lastRowIndex=this.lastResourceIndex=0,this.originalCellIndex=this.originalRowIndex=this.originalResourceIndex=0}getFirstCell(){return this.element.querySelector(".k-first-cell")}getContentWidth(){return this.getBodyElement().offsetWidth}setHeadersWidths(){let t=Array.from(this.element.querySelectorAll(".k-heading-cell.k-group-cell,.k-heading-cell.k-resource-cell")),e=(0,o.groupBy)(t,(t=>t.getAttribute("data-depth-index")));for(const t in e){let n=0;e[t].forEach((t=>{t.style.minWidth="",n=Math.max(t.offsetWidth,n)})),e[t].forEach((t=>{t.style.minWidth=(0,i.toPixel)(n)}))}}getBodyElement(){return this.bodyElement||(this.bodyElement=this.element.querySelector(".k-scheduler-body")),this.bodyElement}getCellIndex(t){return this.getCellDataIndex(t,"data-cell-index")}getRowIndex(t){return this.getCellDataIndex(t,"data-row-index")}getResourceIndex(t){return this.getCellDataIndex(t,"data-resource-index")}getCellDataIndex(t,e){return t?parseInt(t.getAttribute(e),10):-1}getDropSettings(){return this.options.dropOptions}getDropPosition(t){return this.getSlotUnderCursor(t)?"over":"forbidden"}getDropItemIndex(t,e){let n=this.getSlotUnderCursor(e);if(!n)return"";let i=this.getCellIndex(n);return`${this.getRowIndex(n)}:${i}:${this.getResourceIndex(n)}`}getId(){return this.element.closest(".k-scheduler").id}}e.ContentTableBase=l},7626:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DayTable=void 0;const i=n(6126),r=n(1843);class o extends i.ContentTableBase{constructor(t,e){super(t,e),this.options={dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}},this.renderHintElement=(t,e)=>{let n=this.getAllDayRowElement();t.style.left=(0,r.toPixel)(e.left),t.style.width=(0,r.toPixel)(e.width),e.isAllDay&&n?(t.style.top="0px",t.style.height="100%",n.appendChild(t)):(t.style.top=(0,r.toPixel)(e.top),t.style.height=(0,r.toPixel)(e.height),this.getBodyElement().appendChild(t))},this.extendOptions(e)}destroy(){this.allDayRowElement=null,super.destroy()}getAllDayRowElement(){return this.allDayRowElement||(this.allDayRowElement=this.element.querySelector(".k-scheduler-all-day-row")),this.allDayRowElement}}e.DayTable=o},3717:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9385),e)},3818:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MonthTable=void 0;const i=n(6126),r=n(1843);class o extends i.ContentTableBase{constructor(t,e){super(t,e),this.options={dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}},this.renderHintElement=(t,e)=>{t.style.left=(0,r.toPixel)(e.left),t.style.width=(0,r.toPixel)(e.width),t.style.top=(0,r.toPixel)(e.top),t.style.height=(0,r.toPixel)(e.height),this.getBodyElement().appendChild(t)},this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}e.MonthTable=o},5460:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NavigationService=void 0;const i=n(1843);class r extends i.Component{constructor(t,e){super(t,e),this.options={events:{removeFocus:null,keyDown:null},appointmentElementSelector:t=>`.k-event[data-render-index='${t}']`},this.onKeyDown=t=>{const e=[i.KeyCode.ARROWRIGHT,i.KeyCode.ARROWLEFT,i.KeyCode.ARROWUP,i.KeyCode.ARROWDOWN,i.KeyCode.PAGE_DOWN,i.KeyCode.PAGE_UP,i.KeyCode.HOME,i.KeyCode.END,i.KeyCode.SPACE,i.KeyCode.F10].includes(t.keyCode);if((0,i.hasAncestor)(t.target,".k-scheduler-toolbar")&&t.keyCode===i.KeyCode.ARROWDOWN)return t.preventDefault(),void this.focusAppointmentElement(0);e&&(0,i.hasClass)("k-selected",t.target)&&t.target.matches("div.k-event")&&t.preventDefault(),this.trigger("keyDown",{key:t.key,shiftKey:t.shiftKey,altKey:t.altKey,ctrlKey:t.ctrlKey})},this.onFocusOut=t=>{!t.relatedTarget||this.element.querySelector(".k-scheduler-layout").contains(t.relatedTarget)||t.relatedTarget.closest(".k-window")||this.trigger("removeFocus")},this.extendOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.element.addEventListener("keydown",this.onKeyDown),this.element.addEventListener("focusout",this.onFocusOut)}unbindEvents(){this.element.removeEventListener("keydown",this.onKeyDown),this.element.removeEventListener("focusout",this.onFocusOut)}focusAppointmentElement(t){let e=this.element.querySelector(this.options.appointmentElementSelector(t));e&&this.focusElement(e)}focusElement(t){t instanceof HTMLElement&&t!==document.activeElement&&t.focus()}}e.NavigationService=r},9385:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initScheduler=function(t,e){(0,a.initComponent)(i.Scheduler,t,e)},e.initDayTable=function(t,e){(0,a.initComponent)(r.DayTable,t,e)},e.initMonthTable=function(t,e){(0,a.initComponent)(o.MonthTable,t,e)},e.initTimelineTable=function(t,e){(0,a.initComponent)(s.TimelineTable,t,e)},e.getSlotMetrics=function(t){const e=(0,a.getComponentInstance)(t);if(e)return e.getSlotMetrics();return{width:0,height:0,left:0}};const i=n(2927),r=n(7626),o=n(3818),s=n(6591),a=n(1843)},2927:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Scheduler=void 0;const i=n(1843),r=n(5460);class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,jsinterop:{removeFocus:"",keyDown:""}},this.onKeyDown=t=>{this.invokeMethodAsync(this.options.jsinterop.keyDown,t)},this.onRemoveFocus=()=>{this.invokeMethodAsync(this.options.jsinterop.removeFocus)},this.extendOptions(e),this.createNavigationService(),this.toolBarElement=this.getToolBarElement()}destroy(){this.destroyNavigationService(),super.destroy()}createNavigationService(){this.navigationService=new r.NavigationService(this.element,{events:{keyDown:this.onKeyDown,removeFocus:this.onRemoveFocus}})}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}focusAppointmentElement(t){this.navigationService.focusAppointmentElement(t)}focusElement(){this.navigationService.focusElement(this.element)}focusToolbar(){(0,i.focusFirstFocusableChild)(this.toolBarElement.dataset.id,!1)}getToolBarElement(){return this.element.querySelector(".k-scheduler-toolbar")}}e.Scheduler=o},6591:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TimelineTable=void 0;const i=n(6126),r=n(1843);class o extends i.ContentTableBase{constructor(t,e){super(t,e),this.options={dropOptions:{dropClueTargetSelector:"",dropClueEmptySelector:"",allowDropOver:!1,offsetDropClue:!1},jsinterop:{getMoveHint:"",moveAppointment:""}},this.renderHintElement=(t,e)=>{t.style.left=(0,r.toPixel)(e.left),t.style.width=(0,r.toPixel)(e.width),t.style.top=(0,r.toPixel)(e.top),t.style.height=(0,r.toPixel)(e.height),this.getBodyElement().appendChild(t)},this.extendOptions(e)}destroy(){super.destroy()}getFirstCell(){return this.element.querySelector(".k-slot-cell")}}e.TimelineTable=o},3496:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(97),e)},97:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initOrUpdateSignature=function(t,e,n){(0,o.initOrUpdateDataVizComponent)({id:t,widgetOptions:e,componentOptions:n,services:{themeService:new r.ThemeService,intlService:i.IntlService},componentConstructor:s.Signature})};const i=n(4004),r=n(4004),o=n(7641),s=n(4839)},4839:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Signature=void 0;const i=n(7641),r=n(1243),o=n(1843),s=n(4927),a="focus",l="blur";class c extends i.DataVizComponent{constructor(t,e,n,i){super(t,e,n,i),this.options={dotNetInstance:null,hasParent:!1,parentDataId:"",value:"",exportScale:2,popupScale:3,scale:1,debounceDelay:150,jsinterop:{onValueChanged:"",onFocus:"",onBlur:""}},this.onFocus=()=>{this.invokeMethodAsync(this.options.jsinterop.onFocus)},this.onBlur=()=>{this.invokeMethodAsync(this.options.jsinterop.onBlur)},this.onWidgetChange=()=>{this.debouncedWidgetChange()},this.onWidgetDrawStart=()=>{},this.onWidgetDrawEnd=()=>{},this.changeValue=()=>{this.widget&&this.exportImageAsync().then((t=>{this.setValue(t),this.invokeValueChanged(t)}))},this.invokeValueChanged=t=>{this.invokeMethodAsync(this.options.jsinterop.onValueChanged,t)},this.initDebouncedWidgetChange(),this.extendOptions((0,o.extend)(e,{onChange:this.onWidgetChange,onDraw:this.onWidgetDrawStart,onDrawEnd:this.onWidgetDrawEnd})),this.widgetElement=this.element.querySelector(".k-signature-canvas"),this.bindEvents(),this.resetState(),this.initWidget(this.widgetElement,this.getWidgetOptions()),this.reloadImage()}destroy(){this.unbindEvents(),super.destroy()}getWidgetConstructor(){return r.SignaturePad}initWidget(t,e){let n=(0,o.extend)({},e);if(this.options.hasParent&&(!this.options.color||!this.options.backgroundColor)){const t=this.getParentSignature();t&&(n.color=this.options.color||t.widget.options.color,n.backgroundColor=this.options.backgroundColor||t.widget.options.backgroundColor)}n=this.getWidgetOptions(n),super.initWidget(t,n)}refresh(){this.setWidgetOptions(this.options),this.reloadImage()}readThemeColors(){let t,e;if("undefined"!=typeof document){const n=this.element.ownerDocument.defaultView.getComputedStyle(this.element);t=n.color,e=n.backgroundColor}return{themeColor:t,themeBackgroundColor:e}}areThemeColorsChanged(t){return this.state.themeColor!==t.themeColor||this.state.themeBackgroundColor!==t.themeBackgroundColor}setOptions(t){const e=this.state.value!==t.value,n=this.areOptionsChanged(t,{ignoreOptions:["dotNetInstance","jsinterop","onChange","onDraw","onDrawEnd","value"]});if(!n&&!e){const{themeColor:t,themeBackgroundColor:e}=this.readThemeColors();if(!this.areThemeColorsChanged({themeColor:t,themeBackgroundColor:e}))return;this.state.themeColor=t,this.state.themeBackgroundColor=e}this.extendOptions(t),this.setWidgetOptions(this.options),this.initDebouncedWidgetChange(),(n||e)&&this.reloadImage()}setWidgetOptions(t){if(!this.widget)return;const e=(0,o.extend)({},t);if(!(this.options.hasParent||this.options.value||t.color&&t.backgroundColor)){const{themeColor:n,themeBackgroundColor:i}=this.readThemeColors();t.color||(e.color=n),t.backgroundColor||(e.backgroundColor=i)}const n=this.getWidgetOptions(e);this.widget.setOptions(n)}extendOptions(t){super.extendOptions(t),this.options.hasParent&&(this.options.scale=this.options.popupScale)}bindEvents(){this.widgetElement&&(this.widgetElement.addEventListener(a,this.onFocus),this.widgetElement.addEventListener(l,this.onBlur))}unbindEvents(){this.widgetElement&&(this.widgetElement.removeEventListener(a,this.onFocus),this.widgetElement.removeEventListener(l,this.onBlur))}setState(t){this.state=(0,o.deepExtend)(this.state||{},t)}resetState(){this.setState({value:""})}initDebouncedWidgetChange(){this.debouncedWidgetChange&&this.debouncedWidgetChange.stop&&this.debouncedWidgetChange.stop(),this.debouncedWidgetChange=(0,s.debounce)(this.changeValue,this.options.debounceDelay)}exportImageAsync(){const t=this.widgetElement.getBoundingClientRect(),e=this.options.hasParent?this.options.popupScale:1;return this.widget.exportImage({width:t.width*this.options.exportScale*e,height:t.height*this.options.exportScale*e})}reloadImage(){this.widget&&this.loadImage(this.options.value)}loadImage(t){this.widget&&(0,o.isDefined)(t)&&(this.setValue(t),this.widget.loadImage(this.options.value))}setValue(t){this.state.value=t,this.options.value=t}getParentSignature(){return(0,o.getComponentInstance)(this.options.parentDataId)}}e.Signature=c},8050:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(9637),e)},9637:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSplitButton=function(t,e){(0,r.initComponent)(i.SplitButton,t,e)};const i=n(355),r=n(1843)},355:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SplitButton=void 0;const i=n(7992);class r extends i.DropDownButtonBase{constructor(t,e){super(t,e),this.extendOptions(e)}}e.SplitButton=r},57:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(1721),e)},1721:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSplitter=function(t,e){(0,r.initComponent)(i.Splitter,t,e)};const i=n(3247),r=n(1843)},3247:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Splitter=void 0;const i=n(7561),r=n(1843),o=".k-splitbar",s=".k-splitbar-draggable-horizontal",a=".k-splitbar-draggable-vertical",l="horizontal",c=Number.MAX_SAFE_INTEGER,h="flex-basis",u="k-pane-static",d=".k-collapse-next",p=".k-collapse-prev",f=t=>/%$/.test(t),g=(t,e)=>{let n=parseFloat(t);return f(t)&&(n=e*n/100),n},m=(t,e,n)=>t?e===l?t[`${n}Width`]:t[`${n}Height`]:0;class y extends r.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,orientation:l,resizable:!0,keyboardResizeDelta:10,panes:[],jsinterop:{resizePane:""}},this.onResizableResizeStart=t=>{t.originalEvent.stopPropagation();const e=(0,r.getElementIndex)(t.originalCurrentTarget,o);this.resetPaneState(),this.addResizeOverlays(e)},this.onResizableResize=t=>{let e;const n=(0,r.getElementIndex)(t.originalCurrentTarget,o);if(this.isHorizontal()){const n=(0,r.isDirectionRtl)(this.element)?-1:1;e=t.delta.x*n}else e=t.delta.y;this.dragSplitterBar(n,e)},this.onResizableResizeEnd=()=>{this.removeResizeOverlays(),this.invokeResizePane()},this.onElementKeyDown=t=>{t.target.closest(o)&&this.onSplitterBarKeyDown(t)},this.extendOptions(e),this.resetPaneState(),this.createResizable(),this.bindEvents()}destroy(){this.unbindEvents(),this.destroyResizable(),super.destroy()}setOptions(t){this.extendOptions(t);for(let t=0;t<this.options.panes.length;t++){if(this.options.panes[t].forceExpanded){const e=this.getPaneElement(t);(0,r.removeClass)(u,e)}}}bindEvents(){this.element&&this.element.addEventListener("keydown",this.onElementKeyDown)}unbindEvents(){this.element&&this.element.removeEventListener("keydown",this.onElementKeyDown)}setState(t){this.state=(0,r.extend)(this.state||{},t)}resetPaneState(){this.setState({resizedPanes:{}})}createResizable(){this.options.resizable&&(this.resizable=new i.Resizable(this.element,{draggable:{filter:[s,a].join(","),ignore:[p,d].join(",")},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}}))}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}dragSplitterBar(t,e){const{leftPane:n,rightPane:i}=this.getAdjacentPanes(t),r=n.computedSize+e,o=r>n.min&&r<n.max,s=this.getPaneElements().filter((t=>!t.style[h])),a=(n.size||i.size)&&s.length>1;n.size&&i.size||a?o&&(this.resizePane(n,e),this.resizePane(i,-e)):i.size?this.resizePane(i,-e):this.resizePane(n,e)}resizePane(t,e){const n=(0,r.clamp)(t.computedSize+e,t.min,t.max);let i="";if(f(t.size)){const t=this.getElementClientSize();i=`${100*n/t}%`}else i=(0,r.toPixel)(n);this.setPaneSize(t.index,i)}isHorizontal(){return this.options.orientation===l}getPane(t){return(this.options.panes||[])[t]}getPaneElements(){return Array.from(this.element.children||[]).filter((t=>(0,r.hasClass)("k-pane",t)))}getPaneElement(t){return this.getPaneElements()[t]}getAdjacentPanes(t){const e=t,n=t+1,i=this.getPaneElement(e),r=this.getPaneElement(n),o=this.getPane(e),s=this.getPane(n),a=this.getPaneOffsetSize(e),l=this.getPaneOffsetSize(n),c=a+l,u=this.getElementClientSize(),d=t=>g(t,u),{leftPaneMaxSize:p,rightPaneMaxSize:f}=this.getAdjacentPanesMaxSize(t);return{leftPane:{index:e,computedSize:a,min:d(o.min)||c-d(s.max)||0,max:p,size:i.style[h],collapsible:o.collapsible},rightPane:{index:n,computedSize:l,min:d(s.min)||c-d(o.max)||0,max:f,size:r.style[h],collapsible:s.collapsible}}}getAdjacentPanesMaxSize(t){const{size:e,min:n,max:i}=this.getPaneSizes(t),{size:r,min:o,max:s}=this.getPaneSizes(t+1),a=e+r;return{leftPaneMaxSize:Math.min(i,a-o),rightPaneMaxSize:Math.min(s,a-n)}}getPaneSizes(t){const e=this.getElementClientSize(),n=this.getPane(t);return{size:this.getPaneOffsetSize(t),min:n.min?g(n.min,e):0,max:n.max?g(n.max,e):c}}getPaneOffsetSize(t){return((t,e)=>{if(!t)return 0;const n=t.getBoundingClientRect();return e===l?n.width:n.height})(this.getPaneElement(t),this.options.orientation)}getElementClientSize(){var t,e;return t=this.element,e=this.options.orientation,m(t,e,"client")}setPaneSize(t,e){const n=this.getPaneElement(t);if(!n)return;this.state.resizedPanes[t]={index:t,size:e};(this.options.panes[t]||{}).forceExpanded||(0,r.addClass)(u,n),n.style[h]=e}addResizeOverlays(t){this.addResizeOverlay(t),this.addResizeOverlay(t+1)}addResizeOverlay(t){const e=this.getPaneElement(t);if(!e)return;const n=(0,r.convertToHtml)('<div class="k-splitter-overlay k-overlay"></div>');e.appendChild(n)}removeResizeOverlays(){Array.from(this.element.querySelectorAll(".k-splitter-overlay")).forEach((t=>{t.remove()}))}invokeResizePane(){Object.values(this.state.resizedPanes).forEach((t=>{this.invokeMethodAsync(this.options.jsinterop.resizePane,{index:t.index,size:t.size})}))}isSplitterBarDraggable(t){return(0,r.hasClass)(s.replace(".",""),t)||(0,r.hasClass)(a.replace(".",""),t)}getSplitterBarIndex(t){return(0,r.getElementIndex)(t,o)}onSplitterBarKeyDown(t){const e=t.target.closest(o),n=t.key;if(!this.isSplitterBarDraggable(e)||t.ctrlKey||n===r.KeyCode.ENTER)return;const i=(0,r.getElementIndex)(e,o),s=this.options.keyboardResizeDelta,a=this.isHorizontal(),l=(0,r.isDirectionRtl)(this.element),c=n===(0,r.getRtlValue)(r.Key.ARROWRIGHT,r.Key.ARROWLEFT,l)&&a||n===r.Key.ARROWDOWN&&!a,h=n===(0,r.getRtlValue)(r.Key.ARROWLEFT,r.Key.ARROWRIGHT,l)&&a||n===r.Key.ARROWUP&&!a,u=c?1:-1;(c||h)&&(t.preventDefault(),this.dragSplitterBar(i,u*s),this.invokeResizePane())}}e.Splitter=y},3276:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FormulaInputBase=void 0,e.FormulaInputBase={current:{element:null,popup:{open:()=>{},close:()=>{},position:()=>{},visible:()=>{}},list:{element:null,data:()=>[],value:function(){return{}},focus:()=>{},select:()=>{},focusNext:()=>{},focusPrev:()=>{},focusFirst:()=>{},focusLast:()=>{},itemClick:()=>{}}}}},3584:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NameBoxBase=void 0,e.NameBoxBase={current:{element:null,popup:{open:()=>{},close:()=>{},position:()=>{},visible:()=>{}},list:{element:null,data:()=>[],value:function(){return{}},focus:()=>{},select:()=>{},focusNext:()=>{},focusPrev:()=>{},focusFirst:()=>{},focusLast:()=>{},itemClick:()=>{}}}}},2603:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6009),e)},6009:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initSpreadsheet=function(t,e){(0,r.initComponent)(i.Spreadsheet,t,e)};const i=n(2767),r=n(1843)},2767:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Spreadsheet=void 0;const i=n(1843),r=n(8399),o=n(1743),s=n(6994),a=n(9478),l=n(3100),c=n(6181),h=n(3276),u=n(3584),d="gridLines",p="click",f=".k-toolbar-button";class g extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,nameBoxDataId:"",formulaBarInputDataId:"",cellEditorDataId:"",localeId:"en",locale:null,intlService:null,columns:50,columnWidth:64,headerWidth:32,rows:200,rowHeight:20,headerHeight:20,messages:{workbook:{defaultSheetName:"Sheet1"}},jsinterop:{syncTools:"",onFileLoaded:"",syncState:"",showSheetViewContextMenu:"",showErrorDialog:""}},this.onFileSelectAdd=t=>{const e=this.getFileSelect(t);if(!e)return;const n=(e.state.files||[])[0];n&&null!==n.name.match(/.xlsx$/i)?this.readFile(n.rawFile):this.showErrorDialog({title:"Invalid file extension",name:"invalidFileExtension"})},this.onInsertImageFileSelectAdd=t=>{const e=this.getFileSelect(t);if(!e)return;const n=(e.state.files||[])[0];n&&this.readImage(n.rawFile)},this.onToolBarElementClick=t=>{var e,n;const i=null===(e=t.target.closest(f))||void 0===e?void 0:e.querySelector("\n    .k-i-folder-open,\n    .k-svg-i-folder-open\n"),r=null===(n=t.target.closest(f))||void 0===n?void 0:n.querySelector("\n    .k-i-image,\n    .k-svg-i-image\n"),o=i?i.closest(".k-button"):null,s=r?r.closest(".k-button"):null;(o||s)&&this.onOpenFileClick(t)},this.onOpenFileClick=t=>{const e=t.currentTarget.querySelector(".k-upload[data-id]"),n=e?e.getAttribute("data-id"):null;this.openSelectFilesDialog(n)},this.onWidgetViewUpdate=t=>{const e=t.reason||{},n=e.recalc&&e.selection&&e.activeCell&&e.layout&&e.sheetSelection&&e.resize&&!e.editorChange&&!e.editorClose;if(e&&e.recalc&&this.state.isFileLoadInProgress){const e=((t.reason.sender||{})._sheets||[]).length;this.setState({sheetsCount:this.state.sheetsCount+1}),e===this.state.sheetsCount&&this.onFileLoaded()}else(e&&!e.resize||n)&&(this.syncToolsStateFromRange(t.range),this.syncState())},this.onWidgetViewMessage=t=>{"error"===(t.title||"").toLowerCase()&&this.showErrorDialog(t),t.close&&t.close()},this.onWidgetContextMenu=t=>{this.invokeMethodAsync(this.options.jsinterop.showSheetViewContextMenu,{targetType:t.targetType,clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY})},this.invokeSyncTools=()=>{this.invokeMethodAsync(this.options.jsinterop.syncTools,{tools:this.state.tools})},this.invokeOnFileLoaded=()=>{const t=this.getStateForSyncing();this.invokeMethodAsync(this.options.jsinterop.onFileLoaded,t)},this.invokeSyncState=()=>{const t=this.getStateForSyncing();this.invokeMethodAsync(this.options.jsinterop.syncState,t)},this.extendOptions(e),this.initIntlService(),this.bindEvents(),this.resetState(),this.tools=["bold","italic","underline","fontFamily","fontSize","color","background","textAlign","verticalAlign","wrap",d],this.initWidget()}destroy(){this.unbindEvents(),this.destroyWidget(),super.destroy()}setOptions(t){this.extendOptions(t)}bindEvents(){const t=this.toolBarElement;t&&t.addEventListener(p,this.onToolBarElementClick)}unbindEvents(){this.toolBarElement&&this.toolBarElement.removeEventListener(p,this.onToolBarElementClick)}setState(t){this.state.setState(t||{})}resetState(){this.state=new l.SpreadsheetState}initIntlService(){this.intlService=this.options.intlService||r,this.options.intlService=this.intlService,this.extendCulture(this.options.localeId)}extendCulture(t){const e=this.options;if(e.locale){e.locale.name=t;let n=(0,i.deepExtend)({},this.intlService.localeInfo("en"),e.locale);this.intlService.setData(n)}}initWidget(){const t=this.element,e=(0,i.getElementByDataId)(this.options.nameBoxDataId,t),n=(0,i.getElementByDataId)(this.options.formulaBarInputDataId,t),r=(0,i.getElementByDataId)(this.options.cellEditorDataId,t),s=this.options.localeId,a=this.intlService.localeInfo(this.options.localeId),l=(0,i.extend)({},h.FormulaInputBase);l.element=n;const c=(0,i.extend)({},h.FormulaInputBase);c.element=r;const d=(0,i.extend)({},u.NameBoxBase);d.element=e,d.current.value=t=>{if(void 0===t)return this.state.nameBoxSelectedValue;this.state.nameBoxSelectedValue=t};const p=this.getWidgetOptions(this.options),f=this.widget=new o.SpreadsheetWidget(t,(0,i.extend)({},p,{sheetsbar:!0,formulaBarInputRef:l,formulaCellInputRef:c,nameBoxRef:d,locale:s,intl:{localeInfo:()=>a,parseDate:(t,e)=>this.intlService.parseDate(t,e,s),toString:(t,e)=>this.intlService.toString(t,e,s),format:(t,...e)=>this.intlService.format(t,e,s)}}));f.view.bind("update",this.onWidgetViewUpdate),f.view.bind("message",this.onWidgetViewMessage),f.bind("contextmenu",this.onWidgetContextMenu);const g=this.options.fileData;g&&g.length&&this.loadFile({fileData:g}),this.syncStateFromWidget()}destroyWidget(){this.widget&&(this.widget.destroy(),this.widget=null)}get toolBarElement(){return this.element.querySelector((0,i.toClassSelector)("k-spreadsheet-toolbar"))}get sheetsBar(){return((this.widget||{}).view||{}).sheetsbar||{}}get nameBoxEditor(){return((this.widget||{}).view||{}).nameEditor}loadFile(t={fileData:[]}){const e=t.fileData||{};if(e&&e.buffer instanceof ArrayBuffer){const t=new Blob([e.buffer],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});this.readFile(t)}else this.loadEmptyFile()}loadEmptyFile(){this.widget.workbook.fromJSON({sheets:[{name:this.options.messages.workbook.defaultSheetName}]})}readFile(t){this.widget&&!this.state.isFileLoadInProgress&&(this.resetState(),this.setState({isFileLoadInProgress:!0}),this.widget.fromFile(t))}getFileSelect(t){return(0,i.getComponentInstance)(t||this.options.fileSelect.dataId)}readImage(t){let e;if(/^image\//i.test(t.type)&&(e=t),!(0,i.hasValue)(e))return;const n=window.URL.createObjectURL(e),r=new Image;r.src=n,r.onload=()=>{this.executeCommand({commandName:"insertImage",options:{blob:e,width:r.width,height:r.height}}),window.URL.revokeObjectURL(n)}}openSelectFilesDialog(t){const e=this.getFileSelect(t);e&&e.openSelectFilesDialog()}downloadFile({fileName:t}){this.widget.saveAsExcel({fileName:t+".xlsx",saveAs:a.saveAs,Workbook:s.Workbook})}executeCommand({commandName:t,value:e=null,options:n={}}){let i;if("undo"!==t&&"redo"!==t){switch(t){case"wrap":i={command:"TextWrapCommand",options:{workbook:this.widget.workbook,property:t,value:e||null}};break;case"cut":i={command:"ToolbarCutCommand",options:{workbook:this.widget.workbook}};break;case"copy":i={command:"ToolbarCopyCommand",options:{workbook:this.widget.workbook}};break;case"paste":i={command:"ToolbarPasteCommand",options:{workbook:this.widget.workbook}};break;case"unmerge":i={command:"MergeCellCommand",options:{value:"unmerge"}};break;case"mergeAll":i={command:"MergeCellCommand",options:{value:"cells"}};break;case"mergeHorizontally":i={command:"MergeCellCommand",options:{value:"horizontally"}};break;case"mergeVertically":i={command:"MergeCellCommand",options:{value:"vertically"}};break;case"hideRow":i={command:"HideLineCommand",options:{axis:"row"}};break;case"hideColumn":i={command:"HideLineCommand",options:{axis:"column"}};break;case"unhideRow":i={command:"UnHideLineCommand",options:{axis:"row"}};break;case"unhideColumn":i={command:"UnHideLineCommand",options:{axis:"column"}};break;case"deleteRow":i={command:"DeleteRowCommand"};break;case"deleteColumn":i={command:"DeleteColumnCommand"};break;case"addRowAbove":i={command:"AddRowCommand",options:{value:"above"}};break;case"addRowBelow":i={command:"AddRowCommand",options:{value:"below"}};break;case"addColumnLeft":i={command:"AddColumnCommand",options:{value:"left"}};break;case"addColumnRight":i={command:"AddColumnCommand",options:{value:"right"}};break;case"insertLink":i={command:"HyperlinkCommand",options:{link:e}};break;case"insertImage":i={command:"InsertImageCommand",options:n};break;case"bringImageToFront":i={command:"BringToFrontCommand",options:{drawing:this.widget._controller.navigator._sheet._activeDrawing}};break;case"sendImageToBack":i={command:"SendToBackCommand",options:{drawing:this.widget._controller.navigator._sheet._activeDrawing}};break;case"deleteImage":i={command:"DeleteDrawingCommand",options:{drawing:this.widget._controller.navigator._sheet._activeDrawing}};break;case"increaseDecimal":i={command:"AdjustDecimalsCommand",options:{value:1}};break;case"decreaseDecimal":i={command:"AdjustDecimalsCommand",options:{value:-1}};break;case"gridLines":i={command:"GridLinesChangeCommand",options:{property:"gridLines",value:e}};break;default:i={command:"PropertyChangeCommand",options:{workbook:this.widget.workbook,property:t,value:e||null}}}i&&this.widget.executeCommand(i)}else this.widget.workbook.undoRedoStack[t]()}getMergedCellsState(){const t=this.widget.activeSheet(),e=this.getRangeFromActiveSheet(),n=t._ref(e);return(t._getMergedCells(n)||{}).hasMerged}showErrorDialog(t){this.invokeMethodAsync(this.options.jsinterop.showErrorDialog,{title:t.title||"",action:t.name||""})}getInsertLinkData(){const t=this.getRangeFromActiveSheet(),e=t?t.link():null;return{link:e,hasExistingLink:(0,i.hasValue)(e)&&""!==e}}setNameBoxValue({value:t}){this.state.nameBoxSelectedValue=t;const e=this.nameBoxEditor;e&&e.trigger&&e.trigger("enter",{name:t})}selectNameBoxValue({value:t}){this.state.nameBoxSelectedValue=t;const e=this.nameBoxEditor;e&&e.trigger&&e.trigger("select",{name:t})}syncTools(){this.invokeSyncTools()}syncToolsStateFromRange(t){const e={};this.tools.forEach((n=>{(0,i.isFunction)(t[n])?e[n]=t[n]():n===d&&(e[n]=t.sheet().showGridLines())})),this.setState({tools:e})}syncToolsStateFromActiveSheet(){const t=this.getRangeFromActiveSheet();this.syncToolsStateFromRange(t)}syncStateFromWidget(){this.syncToolsStateFromActiveSheet();const t=this.getStateForSyncing();this.setState(t)}getRangeFromActiveSheet(){const t=this.widget.activeSheet();return t?t.range(t.activeCell()):{}}onFileLoaded(){this.syncStateFromWidget(),this.setState({isFileLoadInProgress:!1}),this.invokeOnFileLoaded()}setSheetState(t,e){this.state.setSheetState(t,e)}setActiveSheetByName({sheetName:t}){const e=this.getSheetByName(t);(0,i.hasValue)(e)&&(this.setSheetState(t,{visible:!0}),this.widget.activeSheet(e))}getSheetByName(t){return this.widget.sheetByName(t)}getSheetStateByName(t){return this.state.getSheetStateByName(t)}addNewSheet(){const t=this.createNewSheet();if(!t)return;const e=t.name();this.state.insertSheetState(this.widget.sheets().length-1,{name:e}),this.selectActiveSheet(e),this.syncState()}createNewSheet(){this.sheetsBar.onAddSelect();const t=this.widget.sheets();return t[t.length-1]}removeSheet({sheetName:t}){if(!(0,i.hasValue)(t))return;const e=this.widget.sheetByName(t);this.widget.removeSheet(e),this.state.removeSheetState(t),this.syncState()}selectActiveSheet(t){(0,i.hasValue)(t)&&(this.setSheetState(t,{visible:!0}),this.sheetsBar.onSheetSelect(t))}showSheet({sheetName:t}){this.setActiveSheetByName({sheetName:t}),this.syncState()}hideSheet({sheetName:t}){if(!(0,i.hasValue)(t))return;const e=this.getSheetByName(t),n=this.state.getVisibleSheetsState();if(!(0,i.hasValue)(e)||1===n.length)return;this.setSheetState(t,{visible:!1});const r=this.getNextVisibleSheet(t);r&&(this.setActiveSheetByName({sheetName:r.name()}),this.syncState())}getNextVisibleSheet(t){const e=this.widget.sheets(),n=this.widget.sheets().findIndex((e=>e.name()===t));let r;for(let t=(0,i.clamp)(n+1,0,e.length-1);t<e.length;t++){const n=e[t];if(n&&this.isSheetVisible(n.name())){r=t;break}}return e[r]}isSheetVisible(t){return this.state.isSheetVisible(t)}moveSheet({sheetName:t,sheetIndexDelta:e}){const n=e>0;let i=-1,r=-1;const o=this.widget.sheets();if(n){for(let e=0;e<o.length;e++)if(o[e].name()===t&&(i=e),i>-1&&e>i&&this.isSheetVisible(o[e].name())){r=e;break}}else for(let e=o.length-1;e>=0;e--)if(o[e].name()===t&&(i=e),i>-1&&e<i&&this.isSheetVisible(o[e].name())){r=e;break}this.reorderSheet(i,r),this.selectActiveSheet(t),this.syncState()}reorderSheet(t,e){this.sheetsBar.onSheetReorderEnd({oldIndex:t,newIndex:e}),this.state.reorderSheetState(t,e)}renameSheet({initialSheetName:t,newSheetName:e,sheetIndex:n}){this.sheetsBar.onSheetRename(e,n),this.setSheetState(t,{name:e}),this.syncState()}duplicateSheet({sheetName:t}){const e=this.widget.sheets(),n=this.getUniqueDuplicateSheetName(t),i=e.find((e=>e.name()===t)),r=e.findIndex((e=>e.name()===t)),o=Object.assign(Object.assign({},i.toJSON()),{name:n});this.state.insertSheetState(r,{name:n}),this.widget.insertSheet({index:r,name:n,data:o}),this.selectActiveSheet(n),this.syncState()}getUniqueDuplicateSheetName(t,e=1){const n=`${t} (${e})`;return this.widget.sheetByName(n)?this.getUniqueDuplicateSheetName(t,e+1):n}exportToExcelAsync(){const t=this.widget.saveAsExcel({Workbook:s.Workbook,saveAs:null,forceProxy:!1});return!t||t&&!t.then?{dataUrl:"",bytes:null}:t.then((t=>{if(t instanceof Blob){return new Promise((e=>{t.arrayBuffer().then((t=>{e(new Uint8Array(t))}))})).then((t=>({bytes:t})))}return(0,i.isString)(t)?{dataUrl:t}:{dataUrl:"",bytes:null}}))}getStateForSyncing(){let t=[];this.nameBoxEditor&&(t=this.nameBoxEditor.readData());return{tools:this.state.tools,sheets:this.widget.sheets().map((t=>{var e;const n=t.name(),i=this.getSheetStateByName(n);return new c.SpreadsheetSheetState({name:n,visible:null===(e=null==i?void 0:i.visible)||void 0===e||e})})),nameBoxData:t.map((t=>({text:t.name,value:t.name}))),nameBoxSelectedValue:this.state.nameBoxSelectedValue,activeSheetName:this.widget.activeSheet().name(),selectionContainsMergedCells:this.getMergedCellsState()}}syncState(){this.invokeSyncState()}}e.Spreadsheet=g},6181:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpreadsheetSheetState=void 0;const i=n(1843);e.SpreadsheetSheetState=class{constructor(t){this.name="",this.visible=!0,this.setState(t)}setState(t){(0,i.extend)(this,t)}}},3100:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SpreadsheetState=void 0;const i=n(1843),r=n(6181);e.SpreadsheetState=class{constructor(t={}){this.tools={},this.isFileLoadInProgress=!1,this.sheetsCount=0,this.sheets=[],this.nameBoxData=[],this.nameBoxSelectedValue="",this.setState(t)}setState(t){(0,i.extend)(this,t)}setSheetState(t,e){const n=this.getSheetStateByName(t);(0,i.hasValue)(n)&&n.setState(e)}insertSheetState(t,e){this.sheets.splice(t,0,new r.SpreadsheetSheetState(e))}removeSheetState(t){const e=this.sheets.findIndex((e=>e.name===t));this.sheets.splice(e,1)}getSheetStateByName(t){return this.sheets.find((e=>e.name===t))}getVisibleSheetsState(){return this.filterSheets((t=>t.visible))}isSheetVisible(t){return this.filterSheets((e=>e.visible&&e.name===t)).length>0}filterSheets(t){return this.sheets.filter(t)}reorderSheetState(t,e){if(t>=0&&t<this.sheets.length&&e>=0&&e<this.sheets.length){const n=this.sheets[t];this.sheets[t]=this.sheets[e],this.sheets[e]=n}}}},1898:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2819),e)},2819:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTileLayout=function(t,e){(0,r.initComponent)(i.TileLayout,t,e)},e.destroyTileLayout=function(t){(0,r.destroyComponent)(t)};const i=n(7257),r=n(1843)},7257:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TileLayout=void 0;const i=n(1843),r=n(1089),o=n(7561),s=".k-tilelayout-item",a=[i.Key.ENTER,i.Key.ESC,`${i.KeyModifiers.CTRL} ${i.Key.ARROWUP}`,`${i.KeyModifiers.CTRL} ${i.Key.ARROWDOWN}`,`${i.KeyModifiers.CTRL} ${i.Key.ARROWLEFT}`,`${i.KeyModifiers.CTRL} ${i.Key.ARROWRIGHT}`,`${i.KeyModifiers.SHIFT} ${i.Key.ARROWLEFT}`,`${i.KeyModifiers.SHIFT} ${i.Key.ARROWRIGHT}`];class l extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,resizable:!1,reorderable:!1,navigable:!1,jsinterop:{resizeItem:"",reorderItem:"",onKeyDown:null}},this.onNavigate=(t,e)=>{let n=e.target.closest(s);t.code===i.KeyCode.ENTER?(this.initTabKeyTrap(n),this.tabKeyTrap.enableKeyTrap(),this.tabKeyTrap.findEdgeElements(),this.setTabIndices(0,n),this.tabKeyTrap.firstElement.focus()):e.keyCode===i.KeyCode.ESCAPE?(this.destroyTabKeyTrap(),this.setTabIndices(-1,n),n.focus()):this.invokeKeyDown(e)},this.onResizableResizeStart=t=>{const e=t.originalCurrentTarget.closest(s),n=parseInt(e.style.gridColumnEnd.substring(5)),i=parseInt(e.style.gridRowEnd.substring(5)),r=getComputedStyle(this.element),o=parseInt(r.rowGap),a=parseInt(r.columnGap),l=(e.offsetWidth-(n-1)*a)/n,c=(e.offsetHeight-(i-1)*o)/i,h=this.getMaxItemWidth(e,a),u=t.originalCurrentTarget.className;this.resizeState={item:e,columnWidth:l,columnHeight:c,segmentWidth:l+a,segmentHeight:c+o,totalWidth:this.element.offsetWidth,originalWidth:e.offsetWidth,originalHeight:e.offsetHeight,originalLeft:e.offsetLeft,originalColSpan:n,originalRowSpan:i,maxWidth:h,colSpanDelta:0,rowSpanDelta:0,resizeSide:u.indexOf("ew")>-1||u.indexOf("nwse")>-1||u.indexOf("nesw")>-1,resizeDown:u.indexOf("ns")>-1||u.indexOf("nwse")>-1||u.indexOf("nesw")>-1}},this.onResizableResize=t=>{const e=(0,i.isDirectionRtl)(this.element),n=e?-1:1,r=t.initialDelta.x*n,o=t.initialDelta.y;this.createResizeHintAndPinContainer(this.resizeState.item);let s=()=>{this.resizeState.item.style.left=e?(0,i.toPixel)(this.resizeState.originalLeft+(this.resizeState.originalWidth-this.resizeState.item.offsetWidth)):(0,i.toPixel)(this.hint.offsetLeft),this.resizeState.item.style.top=(0,i.toPixel)(this.hint.offsetTop)};if(this.resizeState.resizeSide){let t=this.resizeState.originalWidth+r;t<=this.resizeState.maxWidth&&t>=this.resizeState.columnWidth&&(this.resizeState.item.style.width=(0,i.toPixel)(t),this.resizeState.colSpanDelta=Math.floor((r+this.resizeState.segmentWidth/2)/this.resizeState.segmentWidth),this.hint.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),this.resizeState.item.style.gridColumnEnd="span "+(this.resizeState.originalColSpan+this.resizeState.colSpanDelta),s(),this.resizeState.resizeDown||(this.resizeState.item.style.height=(0,i.toPixel)(this.hint.offsetHeight)))}if(this.resizeState.resizeDown){let t=this.resizeState.originalHeight+o;t>=this.resizeState.columnHeight&&(this.resizeState.item.style.height=(0,i.toPixel)(t),this.resizeState.rowSpanDelta=Math.floor((o+this.resizeState.segmentHeight/2)/this.resizeState.segmentHeight),this.hint.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),this.resizeState.item.style.gridRowEnd="span "+(this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta),s())}},this.onResizableResizeEnd=()=>{(this.resizeState.colSpanDelta||this.resizeState.rowSpanDelta)&&this.invokeMethodAsync(this.options.jsinterop.resizeItem,{order:parseInt(this.resizeState.item.style.order),colSpan:this.resizeState.originalColSpan+this.resizeState.colSpanDelta,rowSpan:this.resizeState.originalRowSpan+this.resizeState.rowSpanDelta}),this.unpinContainer(this.resizeState.item),this.destroyResizeHint(),this.resizeState=null},this.onReorderableDragStart=t=>{let e=t.originalCurrentTarget.closest(s),n=parseInt(e.style.order);this.reorderState={item:e,left:e.offsetLeft,top:e.offsetTop,order:n,originalOrder:n}},this.onReorderableDrag=t=>{this.createResizeHintAndPinContainer(this.reorderState.item),this.reorderState.item.style.left=(0,i.toPixel)(this.reorderState.left+t.initialDelta.x),this.reorderState.item.style.top=(0,i.toPixel)(this.reorderState.top+t.initialDelta.y);let e=this.getItemUnderCursor(t,this.reorderState.item);if(e){let n,i,r,o=e.getBoundingClientRect(),s=t.clientX<o.left+o.width/2,a=parseInt(e.style.order),l=a+(s?0:1);if(e===this.reorderState.lastItemUnderCursor&&s===this.reorderState.lastIsLeftOfMiddle)return;if(a>this.reorderState.order?(n=this.reorderState.order+1,i=l,r=-1,this.reorderState.order=l-1):a<this.reorderState.order&&(n=l,i=this.reorderState.order,r=1,this.reorderState.order=l),i>n){this.shiftItemsOrder(n,i,r),this.hint.style.order=this.reorderState.order,this.reorderState.item.style.order=this.reorderState.order;let e=this.getItemUnderCursor(t,this.reorderState.item);if(this.reorderState.lastItemUnderCursor=e,e){let n=e.getBoundingClientRect(),i=t.clientX<n.left+n.width/2;this.reorderState.lastIsLeftOfMiddle=i}}}},this.onReorderableDragEnd=()=>{this.reorderState.order!==this.reorderState.originalOrder&&this.invokeMethodAsync(this.options.jsinterop.reorderItem,{fromOrder:this.reorderState.originalOrder,toOrder:this.reorderState.order}),this.destroyResizeHint(),this.unpinContainer(this.reorderState.item),this.reorderState=null},this.pinContainer=t=>{if("absolute"===t.style.position)return;let e=t.offsetLeft,n=t.offsetTop,r=t.offsetWidth,o=t.offsetHeight;t.style.position="absolute",t.style.left=(0,i.toPixel)(e),t.style.top=(0,i.toPixel)(n),t.style.width=(0,i.toPixel)(r),t.style.height=(0,i.toPixel)(o),t.style.zIndex=parseInt(window.getComputedStyle(this.hint).zIndex,10)+1},this.unpinContainer=t=>{t.style.position="",t.style.left="",t.style.top="",t.style.width="",t.style.height="",t.style.zIndex=""},this.createResizeHint=t=>{this.hint||(this.hint=document.createElement("div"),this.hint.className="k-layout-item-hint k-layout-item-hint-resize",this.hint.style.order=t.style.order,this.hint.style.gridColumnEnd=t.style.gridColumnEnd,this.hint.style.gridRowEnd=t.style.gridRowEnd,this.element.appendChild(this.hint))},this.destroyResizeHint=()=>{this.hint&&(this.element.removeChild(this.hint),this.hint=null)},this.getElementUnderCursor=(t,e)=>{let n=(0,r.getElementFromPoint)(t);return e&&e.contains(n)&&((0,i.hideElement)(e),n=(0,r.getElementFromPoint)(t),(0,i.showElement)(e)),n},this.getItemUnderCursor=(t,e)=>{let n=this.getElementUnderCursor(t,e);return n?n.closest(s):null},this.shiftItemsOrder=(t,e,n)=>{let i=this.element.querySelectorAll(s);for(let r=0;r<i.length;r++){const o=i[r];let s=parseInt(o.style.order);s>=t&&s<e&&(o.style.order=s+n)}},this.extendOptions(e),this.options.resizable&&this.createResizable(),this.options.reorderable&&this.createReorderable(),this.options.navigable&&this.element.querySelectorAll(s).forEach((t=>this.setTabIndices(-1,t))),this.bindEvents()}destroy(){this.destroyResizable(),this.destroyReorderable(),this.destroyTabKeyTrap(),this.unbindEvents(),super.destroy()}bindEvents(){this.options.navigable&&this.initNavigationService()}unbindEvents(){this.options.navigable&&this.destroyNavigationService()}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(a,this.onNavigate)}destroyNavigationService(){this.navigationService&&(this.navigationService.destroy(),this.navigationService=null)}setOptions(t){this.options.resizable!==t.resizable&&(t.resizable?this.createResizable():this.destroyResizable()),this.options.reorderable!==t.reorderable&&(t.reorderable?this.createReorderable():this.destroyReorderable()),this.extendOptions(t)}initTabKeyTrap(t=this.element){this.tabKeyTrap=new i.TabKeyTrap(t)}destroyTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.destroy()}invokeKeyDown(t){let e=t.target.closest(s),n=parseInt(e.style.order),r={keyboardEventArgs:(0,i.converToKeyboardEventArgs)(t),orderIndex:n};this.invokeMethodAsync(this.options.jsinterop.onKeyDown,r)}createResizable(){this.resizable=new o.Resizable(this.element,{draggable:{filter:".k-resize-handle"},events:{resizeStart:this.onResizableResizeStart,resize:this.onResizableResize,resizeEnd:this.onResizableResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null,this.destroyResizeHint())}createReorderable(){this.reorderable=new o.Resizable(this.element,{draggable:{filter:".k-tilelayout-item-header"},events:{resizeStart:this.onReorderableDragStart,resize:this.onReorderableDrag,resizeEnd:this.onReorderableDragEnd}})}destroyReorderable(){this.reorderable&&(this.reorderable.destroy(),this.reorderable=null)}getMaxItemWidth(t,e){return(0,i.isDirectionRtl)(this.element)?this.element.offsetWidth-(this.element.offsetWidth-(t.offsetWidth+t.offsetLeft)+e):this.element.offsetWidth-(t.offsetLeft+e)}setTabIndices(t,e=this.element){Array.from(e.querySelectorAll(`${i.FOCUSABLE_ELEMENTS_SELECTOR}`)).forEach((e=>{e.setAttribute("tabindex",t)}))}createResizeHintAndPinContainer(t){this.createResizeHint(t),this.pinContainer(t)}}e.TileLayout=l},7952:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4591),e)},4591:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initToggleButton=function(t,e){(0,r.initComponent)(i.ToggleButton,t,e)};const i=n(493),r=n(1843)},493:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToggleButton=void 0;const i=n(1843),r="k-active";class o extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null},this.setActive=()=>(this.element&&!this.element.classList.contains(r)&&this.element.classList.add(r),!0),this.removeActive=()=>(this.element&&this.element.classList.contains(r)&&this.element.classList.remove(r),!0),this.extendOptions(e),this.bindEvents()}destroy(){this.navigationService.destroy(),this.unbindEvents(),super.destroy()}bindEvents(){this.initNavigationService(),this.element.addEventListener("mousedown",this.setActive),this.element.addEventListener("mouseleave",this.removeActive)}unbindEvents(){this.element.removeEventListener("mousedown",this.setActive),this.element.removeEventListener("mouseleave",this.removeActive)}initNavigationService(){this.navigationService=new i.NavigationService(this.element),this.navigationService.bind(i.Key.SPACE,this.setActive)}}e.ToggleButton=o},9547:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4941),e)},4941:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTooltip=function(t,e){if(!(0,i.getComponentInstance)(t)){const n=new r.Tooltip(null,e);(0,i.setComponentInstance)(t,n)}};const i=n(1843),r=n(8219)},8219:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tooltip=void 0;const i=n(4927),r=n(1843),o="k-callout-n",s="k-callout-s",a="hover",l="bottom",c="keydown",h="mouseenter",u="mouseleave",d="mousedown",p="click",f="data-telerik-tooltip-id";class g extends r.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,showDelay:0,hideDelay:0,showOn:"",targetSelector:"",popupId:"",jsinterop:{open:"",close:""}},this.onMouseDown=t=>{this.closePopup(t)},this.onKeyDown=t=>{this.closePopup(t)},this.onClick=t=>{let e=t.target;if(this.shouldSkipAnchor(e))return;const n=this.getClosestMatchingAnchor(e);this.open(n)},this.onAnyTargetMouseEnter=t=>{const e=t.target;if(this.shouldSkipAnchor(e))return;const n=this.getClosestMatchingAnchor(e);this.removeTitle(n)},this.onMouseEnter=t=>{this.onAnyTargetMouseEnter(t);const e=this.getClosestMatchingAnchor(t.target);this.open(e);const n=this.getPopupComponent();!e&&n.visible&&this.close()},this.onMouseLeave=t=>{const e=t.target;if(this.shouldSkipAnchor(e))return;const n=this.getPopupComponent(),i=t.relatedTarget;if((0,r.ownsElementOrSelf)(n.anchor,i))return;const o=this.getClosestMatchingAnchor(e);this.close(o)},this.open=t=>{const e=this.getPopupComponent();if(this.debounceInvokeClose.pending&&this.stopDebounceInvokeClose(),!(0,r.isDomElement)(t))return;if(this.shouldSkipAnchor(t))return;const n=this.getDataAttributes(t);e.anchors.forEach((n=>{(0,r.ownsElementOrSelf)(n,t)&&(e.anchor=n)})),this.debounceInvokeOpen(n)},this.close=(t=void 0)=>{this.debounceInvokeOpen.pending&&this.stopDebounceInvokeOpen(),t&&(0,r.isDomElement)(t)&&this.restoreTitle(t),this.debounceInvokeClose()},this.closePopup=t=>{const e=this.getPopupComponent();e.anchor&&!e.isChild(t.target)&&this.close(e.anchor)},this.id=(0,r.guid)(),this.options=e,this.debounceOpenClose(),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy(),this.destroyDebounceFunctions()}destroyDebounceFunctions(){this.debounceInvokeOpen&&this.debounceInvokeOpen.stop(),this.debounceInvokeClose&&this.debounceInvokeClose.stop(),this.debounceInvokeOpen=null,this.debounceInvokeClose=null}bindEvents(){const t=window.document.documentElement;t&&(this.options.showOn===a?(t.addEventListener(h,this.onMouseEnter,!0),t.addEventListener(u,this.onMouseLeave,!0)):(t.addEventListener(h,this.onAnyTargetMouseEnter,!0),t.addEventListener(p,this.onClick,!0)),t.addEventListener(c,this.onKeyDown,!0),t.addEventListener(d,this.onMouseDown,!0))}unbindEvents(){const t=window.document.documentElement;t&&(this.options.showOn===a?(t.removeEventListener(h,this.onMouseEnter,!0),t.removeEventListener(u,this.onMouseLeave,!0)):(t.removeEventListener(h,this.onAnyTargetMouseEnter,!0),t.removeEventListener(p,this.onClick,!0)),t.removeEventListener(c,this.onKeyDown,!0),t.removeEventListener(d,this.onMouseDown,!0))}stopDebounceInvokeOpen(){this.debounceInvokeOpen&&this.debounceInvokeOpen.pending&&this.debounceInvokeOpen.stop()}stopDebounceInvokeClose(){this.debounceInvokeClose&&this.debounceInvokeClose.pending&&this.debounceInvokeClose.stop()}getDataAttributes(t){const e=t.getAttribute("title")||t.getAttribute("data-title"),n=t.getAttribute("alt")||e;n&&t.setAttribute("data-title",n),t.removeAttribute("title");return t.dataset}restoreTitle(t){if(!(0,r.isDomElement)(t))return;const e=t.getAttribute("data-title")||t.getAttribute("title");e&&t.setAttribute("title",e),t.removeAttribute("data-title"),this.untrackAnchor(t)}removeTitle(t){if(!(0,r.isDomElement)(t))return;this.trackAnchor(t);const e=t.getAttribute("title")||t.getAttribute("data-title");e&&t.setAttribute("data-title",e),t.removeAttribute("title")}flipCallout(t){var e;const n=this.getPopupComponent();if(n.flipped){const i=null===(e=n.element)||void 0===e?void 0:e.querySelector(".k-callout");"top"===t?((0,r.removeClass)(s,i),(0,r.addClass)(o,i)):t===l&&((0,r.removeClass)(o,i),(0,r.addClass)(s,i))}}correctCalloutPosition(){var t;const e=this.getPopupComponent(),n=e.getAbsoluteElementRect(e.anchor);let i=e.getAbsoluteElementRect(e.element);const o=n.left-i.left+.5*n.width,s=null===(t=e.element)||void 0===t?void 0:t.querySelector(".k-callout");s&&(s.style.left=(0,r.toPixel)(o))}positionCallout(t){this.flipCallout(t),"top"!==t&&t!==l||this.correctCalloutPosition()}getCalloutSize(){const t=document.createElement("div");t.className=`k-callout ${o}`,t.style.visibility="hidden",document.body.appendChild(t);const e=window.getComputedStyle(t),n=e.borderWidth||e.borderTopWidth,i=parseFloat(n);return document.body.removeChild(t),i}invokeOpen(t){this.invokeMethodAsync(this.options.jsinterop.open,t).then((()=>this.repositionPopup()))}invokeClose(){this.invokeMethodAsync(this.options.jsinterop.close)}getPopupComponent(){return(0,r.getComponentInstance)(this.options.popupId)}shouldSkipAnchor(t){const e=this.isAnchorTracked(t),n=this.ownsAnchorBySelector(t);return!e&&!n}setOptions(t){super.setOptions(t),this.debounceOpenClose()}debounceOpenClose(){this.debounceInvokeOpen=(0,i.debounce)(this.invokeOpen,this.options.showDelay),this.debounceInvokeClose=(0,i.debounce)(this.invokeClose,this.options.hideDelay)}trackAnchor(t){(0,r.isDomElement)(t)&&t.setAttribute(f,this.id)}untrackAnchor(t){(0,r.isDomElement)(t)&&t.removeAttribute(f)}isAnchorTracked(t){return(0,r.isDomElement)(t)&&t.getAttribute(f)===this.id}ownsAnchorBySelector(t){return(0,r.isDomElement)(t)&&Boolean(t.closest(this.options.targetSelector))}getClosestMatchingAnchor(t){const e=this.getClosestTrackedAnchor(t);if(e)return e;return this.getClosestAnchorBySelector(t)}getClosestTrackedAnchor(t){if(!(0,r.isDomElement)(t))return null;return t.closest((0,r.toAttrValueQuerySelector)(f,this.id))}getClosestAnchorBySelector(t){return(0,r.isDomElement)(t)?t.closest(this.options.targetSelector):null}repositionPopup(){const t=this.getPopupComponent();t&&t.positionElement()}}e.Tooltip=g},7776:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(4567),e)},4567:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initTreeList=function(t,e){(0,r.initComponent)(i.TreeList,t,e)},e.destroyTreeList=function(t){(0,r.destroyComponent)(t)};const i=n(6437),r=n(1843)},6437:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TreeList=void 0;const i=n(1843);class r extends i.GridBase{constructor(t,e){super(t,e),this.options={dotNetInstance:null,rowDraggable:!1,draggedItemsHint:"",rowDraggableOptions:{allowDropOver:!0},dropOptions:{dropClueTargetSelector:".k-grid-content tr.k-table-row",dropClueEmptySelector:".k-grid-norecords",allowDropOver:!0,offsetDropClue:!1},componentSelector:".k-treelist",jsinterop:{removeFocus:"",blur:"",rowDrop:""}},this.extendOptions(e)}destroy(){super.destroy()}}e.TreeList=r},3985:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DropZone=void 0;const i=n(1843),r=n(1089),o="dragover",s="dragenter",a="dragleave",l="drop",c=(0,i.toDataAttr)("external-dropzone-id"),h=(0,i.toDataAttr)("dropzone-id");class u extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,id:"",dragOverClasses:[],multiple:!0},this.onDragEnter=t=>{t.preventDefault(),this.addDragOverClasses()},this.onDragOver=t=>{t.preventDefault()},this.onDragLeave=t=>{const e=t.relatedTarget||(0,r.getElementFromPoint)(t);(0,i.ownsElement)(this.element,e)||this.removeDragOverClasses()},this.onDrop=t=>{t.preventDefault(),this.removeDragOverClasses();this.getConnectedComponents().forEach((e=>{e&&e.onFilesDrop&&(this.options.multiple?e.onFilesDrop(t.dataTransfer.files):e.onFilesDrop([t.dataTransfer.files[0]]))}))},this.setOptions(e),this.bindEvents()}destroy(){this.unbindEvents(),super.destroy()}setOptions(t){this.extendOptions(t)}bindEvents(){this.element.addEventListener(s,this.onDragEnter),this.element.addEventListener(o,this.onDragOver),this.element.addEventListener(a,this.onDragLeave),this.element.addEventListener(l,this.onDrop)}unbindEvents(){this.element.removeEventListener(s,this.onDragEnter),this.element.removeEventListener(o,this.onDragOver),this.element.removeEventListener(a,this.onDragLeave),this.element.removeEventListener(l,this.onDrop)}addDragOverClasses(){this.element&&this.element.classList.add(...this.options.dragOverClasses)}removeDragOverClasses(){this.element&&this.element.classList.remove(...this.options.dragOverClasses)}getConnectedComponents(){const t=[];return[...document.querySelectorAll(`\n            ${(0,i.toAttrValueQuerySelector)(h,this.options.id)},\n            ${(0,i.toAttrValueQuerySelector)(c,this.options.id)}`)].map((e=>{const n=(0,i.getComponentInstance)(e.getAttribute("data-id"));t.push(n)})),t}}e.DropZone=u},9570:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadFileStatus=void 0,e.UploadFileStatus={Selected:0,Uploaded:1,Uploading:2,Failed:3}},861:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadOperationType=void 0,e.UploadOperationType={Upload:0,Remove:1}},1281:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileInfo=void 0;const i=n(193),r=n(9570);e.FileInfo=class{constructor(t){this.id=(0,i.guid)(),this.name=(0,i.htmlEncode)(t.name),this.size=t.size,this.extension=t.extension,this.progress=t.progress||0,this.rawFile=t.rawFile,this.status=t.status||r.UploadFileStatus.Selected,this.invalidExtension=t.invalidExtension||!1,this.invalidMinFileSize=t.invalidMinSize||!1,this.invalidMaxFileSize=t.invalidMaxFileSize||!1}isValid(){return!this.invalidExtension&&!this.invalidMinFileSize&&!this.invalidMaxFileSize}}},4963:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileValidator=void 0;const i=n(4081);e.FileValidator=class{validateFile(t,{allowedExtensions:e,minFileSize:n,maxFileSize:i}){return{validExtension:this.isValidFileExtension(t.extension,e),validMinFileSize:this.isValidMinFileSize(t.size,n),validMaxFileSize:this.isValidMaxFileSize(t.size,i)}}isValidFileExtension(t="",e=[]){if((0,i.hasValue)(e)){return e.map((t=>t.toLowerCase())).includes(t.toLowerCase())}return!0}isValidMinFileSize(t,e){return!(0,i.hasValue)(e)||t>e}isValidMaxFileSize(t,e){return!(0,i.hasValue)(e)||t<e}}},8648:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FileSelect=void 0;const i=n(4670);class r extends i.UploadBase{constructor(t,e){super(t,e),this.extendOptions(e)}destroy(){super.destroy()}setOptions(t){this.extendOptions(t)}deleteFile(t){this.removeFileFromState(t)}readBlob(t){return function(t){return new Promise((function(e,n){let i=new FileReader;i.onerror=function(){i.abort(),n("Error reading file.")},i.onload=function(){e(i.result)},t&&i.readAsArrayBuffer(t.rawFile)}))}(t)}readBytes(t){let e=this.getFile(t[0].fileId);return this.readBlob(e).then((function(e){return new Uint8Array(e,t[0].start,Math.min(e.byteLength,t[0].count))}))}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}}e.FileSelect=r},5514:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HttpRequest=void 0;const i=n(193),r="error",o=()=>({}),s=function(t){return(0,i.isFunction)(t)?t:o},a=(t,e)=>Object.assign({request:l(t)},e),l=t=>({status:t.status,statusText:t.statusText,responseText:t.responseText,responseType:t.responseType});e.HttpRequest=class{static send({url:t,method:e,data:n,withCredentials:i=!1,headers:o={},success:l,error:c,progress:h}){const u=new XMLHttpRequest,d=s(l),p=s(c),f=s(h);return u.withCredentials=i,u.addEventListener("load",(()=>{u.status>=200&&u.status<300?d(a(u)):p(a(u))})),u.addEventListener(r,(()=>{p(a(u))})),u.upload.addEventListener(r,(()=>{p(a(u))})),u.upload.addEventListener("progress",(t=>{f(a(u,{progress:Math.round(100*t.loaded/t.total)}))})),u.open(e,t,!0),Object.entries(o).forEach((([t,e])=>{u.setRequestHeader(t,e)})),u.send(n),u}}},3407:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(1397),e)},7237:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadService=void 0;const i=n(1843),r=n(4081),o=n(5514),s=n(861);class a extends i.Component{constructor(t){super(null,t),this.options={saveUrl:"",saveMethod:"POST",saveField:"files",removeUrl:null,removeMethod:"POST",removeField:"files",withCredentials:!1,events:{uploadProgress:null,uploadSuccess:null,uploadError:null}},this.onUploadProgress=t=>{this.trigger("uploadProgress",t)},this.onUploadSuccess=t=>{this.trigger("uploadSuccess",t)},this.onUploadError=t=>{this.trigger("uploadError",t)},this.onRemoveSuccess=t=>{this.trigger("removeSuccess",t)},this.onRemoveError=t=>{this.trigger("removeError",t)},this.extendOptions(t),this.resetState()}setOptions(t){this.extendOptions(t)}resetState(){this.setState({fileRequests:{}})}setState(t){this.state=(0,i.extend)(this.state||{},t)}uploadFiles(t,e){(0,r.toArray)(t).forEach((t=>{this.uploadFile(t,e)}))}uploadFile(t,e){this.sendUploadRequest(t,e)}cancelFile(t){const e=this.state.fileRequests[t];e&&(this.untrackUploadRequest(t),e.abort())}removeFile(t,e){this.sendRemoveRequest(t,e)}sendUploadRequest(t,e={}){if(!this.options.saveUrl)return;const n=t.id,i=this.getFileUploadFormData(t.rawFile,e.data),r=o.HttpRequest.send({url:this.options.saveUrl,method:this.options.saveMethod,withCredentials:this.options.withCredentials,data:i,headers:e.headers,success:t=>{this.onUploadSuccess({operation:s.UploadOperationType.Upload,request:t.request,file:{id:n}})},error:t=>{this.onUploadError({operation:s.UploadOperationType.Upload,request:t.request,file:{id:n}})},progress:t=>{this.onUploadProgress({file:{id:n,progress:t.progress}})}});this.trackUploadRequest(n,r)}sendRemoveRequest(t,e={}){if(!this.options.removeUrl)return;const n=t.id,i=this.getFileRemoveFormData(t,e.data);o.HttpRequest.send({url:this.options.removeUrl,method:this.options.removeMethod,withCredentials:this.options.withCredentials,data:i,headers:e.headers,success:t=>{this.onRemoveSuccess({operation:s.UploadOperationType.Remove,request:t.request,file:{id:n}})},error:t=>{this.onRemoveError({operation:s.UploadOperationType.Remove,request:t.request,file:{id:n}})}})}trackUploadRequest(t,e){this.state.fileRequests[t]=e}untrackUploadRequest(t){this.state.fileRequests[t]=null}getFileUploadFormData(t,e){return this.getFormData({field:this.options.saveField,data:t,additionalData:e})}getFileRemoveFormData(t,e){return this.getFormData({field:this.options.removeField,data:t.name,additionalData:e})}getFormData({data:t,field:e,additionalData:n={}}){let i=new FormData;return Object.keys(n).forEach((t=>{i.append(t,n[t])})),i.append(e,t),i}}e.UploadService=a},1397:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initUpload=function(t,e){(0,s.initComponent)(i.Upload,t,e)},e.initFileSelect=function(t,e){(0,s.initComponent)(r.FileSelect,t,e)},e.initDropZone=function(t,e){(0,s.initComponent)(o.DropZone,t,e)};const i=n(1651),r=n(8648),o=n(3985),s=n(1843)},1651:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Upload=void 0;const i=n(4081),r=n(7237),o=n(9570),s=n(861),a=n(4670);class l extends a.UploadBase{constructor(t,e){super(t,e),this.options={saveUrl:null,saveField:"files",removeUrl:null,removeField:"files",withCredentials:!1,autoUpload:!1,jsinterop:{onProgress:null,onSuccess:null,onError:null}},this.onProgress=t=>{let e=this.getFile(t.file.id);(0,i.hasValue)(e)&&(e.progress=t.file.progress,this.invokeMethodAsync(this.options.jsinterop.onProgress,{files:[e],progress:t.file.progress}))},this.onSuccess=t=>{const e=[this.getFile(t.file.id)];t.operation===s.UploadOperationType.Remove?this.removeFileFromState(t.file.id):this.setFileStatus(e,o.UploadFileStatus.Uploaded),this.invokeMethodAsync(this.options.jsinterop.onSuccess,{operation:t.operation,files:e,request:t.request})},this.onError=t=>{const e=[this.getFile(t.file.id)];t.operation===s.UploadOperationType.Upload&&this.setFileStatus(e,o.UploadFileStatus.Failed),this.invokeMethodAsync(this.options.jsinterop.onError,{operation:t.operation,files:e,request:t.request})},this.extendOptions(e),this.initOrUpdateUploadService(this.options)}destroy(){this.destroyUploadService(),super.destroy()}setOptions(t){this.extendOptions(t),this.initOrUpdateUploadService(this.options)}initOrUpdateUploadService(t){this.uploadService?this.uploadService.setOptions(t):this.uploadService=this.initUploadService(t)}initUploadService(t){return new r.UploadService({saveUrl:t.saveUrl,saveField:t.saveField,removeUrl:t.removeUrl,removeField:t.removeField,withCredentials:t.withCredentials,events:{uploadProgress:this.onProgress,uploadSuccess:this.onSuccess,uploadError:this.onError,removeSuccess:this.onSuccess,removeError:this.onError}})}destroyUploadService(){this.uploadService&&this.uploadService.destroy()}deleteFile({fileId:t,options:e}){this.removeFile(t,e)}removeFile(t,e={}){const n=this.getFile(t);n&&(n.status===o.UploadFileStatus.Uploaded?this.uploadService.removeFile(n,{headers:e.requestHeaders,data:e.requestData}):this.removeFileFromState(t))}uploadFiles(t={}){const e=(t.files||[]).length>0?t.files:this.getFiles(),n=this.getFilesForUpload(e);this.setFileStatus(n,o.UploadFileStatus.Uploading),this.uploadService.uploadFiles(n,{headers:t.requestHeaders,data:t.requestData})}retryFile({fileId:t,options:e={}}){const n=this.getFile(t);n&&n.status===o.UploadFileStatus.Failed&&this.uploadService.uploadFile(n,{headers:e.requestHeaders,data:e.requestData})}cancelFile(t){this.getFile(t)&&(this.uploadService.cancelFile(t),this.removeFile(t))}focusClearButton(){const t=this.element.querySelector(".k-clear-selected");this.focusElement(t)}focusUploadButton(){const t=this.element.querySelector(".k-upload-selected");this.focusElement(t)}getFilesForUpload(t=[]){let e=[];return t.forEach((t=>{const n=this.getFile(t.id);this.isFileForUpload(n)&&e.push(n)})),e}isFileForUpload(t){return t.isValid()&&t.status===o.UploadFileStatus.Selected}setFileStatus(t,e){(Array.isArray(t)?t:[t]).forEach((t=>{(0,i.hasValue)(t)&&(t.status=e)}))}}e.Upload=l},4670:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UploadBase=void 0;const i=n(1843),r=n(4081),o=n(4963),s=n(1281),a="change",l="keydown",c="focusout",h="click",u=[i.Key.ARROWLEFT,i.Key.ARROWRIGHT,i.Key.ARROWUP,i.Key.ARROWDOWN],d=t=>t?parseInt(t.getAttribute("data-index"),10):null;class p extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,allowedExtensions:[],minFileSize:null,maxFileSize:null,multiple:!1,jsinterop:{onSelect:null,focusout:null}},this.onInputChange=t=>{const e=this.getFilesInfo(t.target.files);(0,r.isWebkit)()&&(t.target.type="",t.target.type="file"),this.handleFilesChange(e)},this.onInputButtonClick=()=>{this.openSelectFilesDialog()},this.onKeyDown=t=>{u.includes(t.key)&&t.preventDefault()},this.onFocusOut=t=>{const e=t.target.closest(".k-file"),n=d(e),i=t.relatedTarget?t.relatedTarget.closest(".k-file"):null,r=d(i);this.invokeFocusOut(n,r)},this.extendOptions(e),this.inputElement=this.element.querySelector("input[type='file']"),this.inputButtonElement=this.element.querySelector(".k-upload-button"),this.initValidator(),this.resetState(),this.bindEvents()}destroy(){this.unbindEvents(),this.inputElement=null,this.destroyValidator(),super.destroy()}bindEvents(){this.inputElement&&this.inputElement.addEventListener(a,this.onInputChange),this.inputButtonElement&&this.inputButtonElement.addEventListener(h,this.onInputButtonClick),this.element.addEventListener(l,this.onKeyDown),this.element.addEventListener(c,this.onFocusOut)}unbindEvents(){this.inputElement&&this.inputElement.removeEventListener(a,this.onInputChange),this.inputButtonElement&&this.inputButtonElement.removeEventListener(h,this.onInputButtonClick),this.element.removeEventListener(l,this.onKeyDown),this.element.removeEventListener(c,this.onFocusOut)}resetState(){this.setState({files:[]})}setState(t){this.state=(0,i.extend)(this.state||{},t)}initValidator(){this.validator=new o.FileValidator}destroyValidator(){this.validator=null}onFilesDrop(t){const e=this.getFilesInfo(t);this.handleFilesChange(e)}handleFilesChange(t){this.options.multiple||this.clearFiles(),this.addFiles(t),this.triggerFileSelect(t)}triggerFileSelect(t){return this.invokeMethodAsync(this.options.jsinterop.onSelect,t)}addFiles(t){(0,r.toArray)(t).forEach((t=>{this.addFile(t)}))}addFile(t){this.getFile(t.id)||(this.validateFile(t),this.state.files.push(t))}removeFileFromState(t){const e=this.state.files.filter((e=>e.id!==t));this.setState({files:e})}getFiles(){return this.state.files}getFile(t){return this.state.files.find((e=>e.id===t))}getFileInfo(t){const e=(0,r.getFileInfo)(t);return new s.FileInfo(e)}getFilesInfo(t){return(0,r.toArray)(t).map(this.getFileInfo)}clearFiles(){this.setState({files:[]})}validateFile(t){if(this.validator){const e=this.validator.validateFile(t,{allowedExtensions:this.options.allowedExtensions,minFileSize:this.options.minFileSize,maxFileSize:this.options.maxFileSize});t.invalidExtension=!e.validExtension,t.invalidMinFileSize=!e.validMinFileSize,t.invalidMaxFileSize=!e.validMaxFileSize}}invokeFocusOut(t,e){var n;null!==(n=t)&&n>=0&&setTimeout((()=>{this.invokeMethodAsync(this.options.jsinterop.focusout,{relatedTargetFileIndex:e})}),1)}focusFile(t){const e=Array.from(this.element.querySelectorAll(".k-file")||[])[t];this.focusElement(e)}focusInputButton(){this.focusElement(this.inputButtonElement)}focusElement(t){t instanceof HTMLElement&&(0,i.focusInNextFrameAsync)(t)}openSelectFilesDialog(){this.inputElement&&this.inputElement.click&&this.inputElement.click()}}e.UploadBase=p},4081:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getFileInfo=e.getFileExtension=e.isWebkit=e.hasValue=e.toArray=void 0,e.toArray=Array.from;e.hasValue=t=>null!=t;e.isWebkit=()=>navigator.userAgent.match(/webkit/i);e.getFileExtension=t=>{const e=t.match(/\.([^\.]+)$/);return e?e[0]:""};e.getFileInfo=t=>({name:t.name,size:t.size,extension:(0,e.getFileExtension)(t.name),rawFile:t})},9877:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(2205),e)},2205:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initVirtualColumnScroller=function(t,e){(0,r.initComponent)(i.VirtualColumnScroller,(0,r.addComponentSuffix)(t,"VirtualColumnScroller"),e)},e.destroyVirtualColumnScroller=function(t){(0,r.destroyComponent)((0,r.addComponentSuffix)(t,"VirtualColumnScroller"))};const i=n(4091),r=n(1843)},4091:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualColumnScroller=void 0;const i=n(1843),r=n(4264),o=n(4927),s=n(6724),a=(0,i.toAttrQuerySelector)("data-col-index"),l=Array.from;class c extends i.Component{constructor(t,e){super(t,e),this.options={dotNetInstance:null,tableSelector:".k-grid-table",debounceDelay:180,headerSelector:"k-grid-header",contentSelector:"k-grid-content",footerSelector:"k-grid-footer",jsinterop:{onScroll:""}},this.detectScrollTopChanged=t=>{this.state.scrollTopChanged=this.state.scrollTop!==t.target.scrollTop,this.state.scrollTop=t.target.scrollTop},this.onScroll=t=>{if(!this.state.scrollTopChanged){const e=(0,r.isDirectionRtl)(this.element)?-1:1,n=t.target.scrollLeft*e,o=document.activeElement?document.activeElement.closest(a):null,c=o?o.closest((0,i.toClassSelector)("k-focused"))||o:null,h=c?c.closest([(0,i.toClassSelector)(this.options.headerSelector),(0,i.toClassSelector)(this.options.contentSelector),(0,i.toClassSelector)(this.options.footerSelector)].join(",")):null,u=(0,i.hasValue)(c);let d=(0,i.isWholeElementInView)(c,h),p=0;const f=(0,r.hasClass)("k-grid-content-sticky",c);if(c){const t=c.getBoundingClientRect().width,e=c.closest("tr"),n=(e?l(e.querySelectorAll(a)):[]).filter(s.isLockedElement);p=n.reduce(((t,e)=>t+e.getBoundingClientRect().width),0),n.length&&p+t>this.element.clientWidth&&(d=!0)}this.invokeScroll({scrollLeft:n,containsActiveElement:u,isActiveCellInView:d,isLockedCell:f})}},this.extendOptions(e),this.bindEvents(),this.setState({scrollTop:0,scrollTopChanged:!1,scrollLeft:0})}destroy(){this.unbindEvents(),super.destroy()}bindEvents(){this.debouncedScroll=(0,o.debounce)((t=>{this.onScroll(t)}),this.options.debounceDelay).bind(this),this.element.addEventListener("scroll",this.detectScrollTopChanged),this.element.addEventListener("scroll",this.debouncedScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.detectScrollTopChanged),this.element.removeEventListener("scroll",this.debouncedScroll),this.debouncedScroll=null}setState(t={}){this.state=(0,i.extend)(this.state||{},t)}invokeScroll({scrollLeft:t,containsActiveElement:e,isActiveCellInView:n,isLockedCell:i}){this.invokeMethodAsync(this.options.jsinterop.onScroll,{scrollLeft:t,containsActiveElement:e,isActiveCellInView:n,isLockedCell:i})}}e.VirtualColumnScroller=c},432:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(6590),e)},6590:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initVirtualScroller=function(t,e){(0,r.initComponent)(i.VirtualScroller,t,e)};const i=n(832),r=n(1843)},832:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VirtualScroller=void 0;const i=n(1843),r=n(4264);class o extends i.Component{constructor(t,e){super(t,e),this.options={skip:0,itemHeight:0,loadingItems:!1,jsinterop:{scroll:""}},this.onElementScroll=()=>{const t=this.options,e=Math.floor(this.element.scrollTop);if(this.scrollTop===e||this.manualSet)return void(this.manualSet=!1);clearTimeout(this.timeout),t.loadingItems&&this.scrollLoadingItems(),this.scrollTop=e;let n=Math.floor(e/t.itemHeight);this.timeout=setTimeout((()=>{this.invokeMethodAsync(t.jsinterop.scroll,n)}),66)},this.extendOptions(e),this.timeout,this.contentElement=this.element.querySelector(".k-virtual-scroller-content"),this.total=parseInt(this.contentElement.getAttribute("data-total")),this.setScrollbarSize(),this.setPosition(e.skip),this.bindEvents()}destroy(){clearTimeout(this.timeout),this.unbindEvents(),this.contentElement=null,super.destroy()}bindEvents(){this.element.addEventListener("scroll",this.onElementScroll)}unbindEvents(){this.element.removeEventListener("scroll",this.onElementScroll)}setScrollbarSize(){(0,i.setScrollbarSizeCssVariables)()}setPosition(t){this.manualSet=!0,this.scrollTop=Math.floor(this.options.itemHeight*t);const e=this.getDisplayNoneSelectors();let n=(0,r.closestAll)(this.element,e);this.setDisplayStyle(n,""),this.element.scrollTop=this.scrollTop,this.setDisplayStyle(n,"none")}setPositionToIndex(t){this.manualSet=!0;let e=t*this.options.itemHeight,n=e+this.options.itemHeight,r=Math.floor(this.element.scrollTop);const o=(0,i.getScrollBarHeight)(this.element);let s=r+(this.element.offsetHeight-o);n>s?(this.scrollTop+=n-s,this.element.scrollTop=this.scrollTop):n<r&&(this.scrollTop=e,this.element.scrollTop=this.scrollTop)}scrollLoadingItems(){const t=this.options,e=Math.floor(this.element.scrollTop),n=(0,i.getScrollBarHeight)(this.element),r=this.element.offsetHeight-n,o=this.contentElement.children[0].offsetHeight,s=2*t.itemHeight,a=parseFloat(this.contentElement.getAttribute("data-translate"));let l=a;e<a?l=e-e%s:o+a<r+e&&(l=Math.ceil((r+e-o)/s)*s),this.contentElement.style.setProperty("transform","translateY("+l+"px)")}setDisplayStyle(t,e){t.map((t=>{t.style.display=e}))}getDisplayNoneSelectors(){return['[style*="display: none;"]','[style*="display: none"]','[style*="display:none;"]','[style*="display:none"]']}}e.VirtualScroller=o},8708:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(1635).__exportStar(n(8047),e)},8047:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.initWindow=function(t,e){(0,r.initComponent)(i.Window,t,e)};const i=n(7789),r=n(1843)},7789:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Window=void 0;const i=n(1843),r=n(9794),o=n(4264),s=n(4771),a=n(1089),l=n(7561),c=n(8980),h="width",u="height",d="k-resize-",p="n",f="e",g="s",m="w",y=[p,f,g,m,"ne","nw","se","sw"].map((t=>`${d}${t}`)),v=[".k-grid",".k-gantt",".k-treelist",".k-scheduler"].join(","),b=".k-window-titlebar",w="keydown",x="focusin",_="change";class S extends i.Component{constructor(t,e){if(super(t,e),this.state={top:0,left:0,dragging:{dragStarted:!1,initialTop:0,initialLeft:0,cursorOffset:{top:0,left:0}},resizing:{initialWidth:0,initialHeight:0,targetedWidth:0,targetedHeight:0,direction:""},elementToFocusOnClose:null},this.options={dotNetInstance:null,jsinterop:{keydown:"",dragEnd:"",resizeEnd:"",focusin:"",setPosition:"",setSize:""},containmentSelector:"",navigable:!1,draggable:!0,resizable:!0,modal:!1},this.onScreenOrientationChange=()=>{this.ensureInsideContainment()},this.onFocusIn=()=>{this.invokeMethodAsync(this.options.jsinterop.focusin)},this.onKeyDown=t=>{t.keyCode===i.KeyCode.ESCAPE&&t.target.closest(v)||this.element!==t.target&&t.keyCode!==i.KeyCode.ESCAPE||this.invokeKeyDown(t)},this.onDragStart=t=>{var e;this.resetDragState();const n=this.allowedDrag(t);n&&(this.setFixedPosition(),this.initWidth(),(0,a.preventDefault)(t),this.setState({dragging:{dragStarted:n,initialTop:this.state.top,initialLeft:this.state.left,cursorOffset:{top:t.pageY-this.state.top,left:t.pageX-this.state.left}}}),null===(e=this.element)||void 0===e||e.focus())},this.onDrag=t=>{if(!this.state.dragging.dragStarted)return!0;let e=Math.max(0,t.pageY-this.state.dragging.cursorOffset.top),n=Math.max(0,t.pageX-this.state.dragging.cursorOffset.left);if(this.containmentElement&&this.element){const t=this.containmentElement.clientHeight-this.element.offsetHeight,i=Math.min(Math.max(e,0),t),r=this.containmentElement.clientWidth-this.element.offsetWidth,o=Math.min(Math.max(n,0),r);this.setPosition(i,o)}else this.setPosition(e,n)},this.onDragEnd=()=>{this.state.dragging.dragStarted&&(this.state.dragging.initialTop===this.state.top&&this.state.dragging.initialLeft===this.state.left||this.invokeMethodAsync(this.options.jsinterop.dragEnd,{position:{top:(0,i.toPixel)(this.state.top),left:(0,i.toPixel)(this.state.left)}}))},this.onResizeStart=t=>{this.resetResizeState(),this.setFixedPosition();const e=Array.from(t.originalCurrentTarget.classList).find((t=>y.includes(t))),n=null==e?void 0:e.replace(d,""),{currentWidth:i,currentHeight:r}=this.getDimensions()||{};i&&r&&this.setState({resizing:{initialWidth:i,initialHeight:r,targetedWidth:i,targetedHeight:r,direction:n}})},this.onResize=t=>{let e=this.state.resizing.targetedWidth,n=this.state.resizing.targetedHeight,i=t.delta.y,r=t.delta.x;if(this.state.resizing.direction.includes(p)&&(i=this.constrainDelta(p,i),this.state.top>=0||i>0)){n-=i;this.tryApplyNewDimension(u,n)&&this.setPosition(Number(this.state.top)+i,this.state.left)}if(this.state.resizing.direction.includes(f)&&(r=this.constrainDelta(f,r),this.containmentElement&&this.element&&this.containmentElement.clientWidth<this.element.offsetLeft+e&&(e=this.containmentElement.clientWidth-this.element.offsetLeft),e+=r,this.tryApplyNewDimension(h,e)),this.state.resizing.direction.includes(g)&&(i=this.constrainDelta(g,i),this.containmentElement&&this.containmentElement.clientHeight<this.element.offsetTop+n&&(n=this.containmentElement.clientHeight-this.element.offsetTop),n+=i,this.tryApplyNewDimension(u,n)),this.state.resizing.direction.includes(m)&&(r=this.constrainDelta(m,r),this.state.left>=0||r>0)){e-=r;this.tryApplyNewDimension(h,e)&&this.setPosition(this.state.top,Number(this.state.left)+r)}},this.onResizeEnd=()=>{(0,c.roughlyEqual)(this.state.resizing.initialWidth,this.state.resizing.targetedWidth,{decimals:2})&&(0,c.roughlyEqual)(this.state.resizing.initialHeight,this.state.resizing.targetedHeight,{decimals:2})||this.invokeMethodAsync(this.options.jsinterop.resizeEnd,{size:{width:(0,i.toPixel)(this.state.resizing.targetedWidth),height:(0,i.toPixel)(this.state.resizing.targetedHeight)},position:{top:(0,i.toPixel)(this.state.top),left:(0,i.toPixel)(this.state.left)}})},this.extendOptions(e),this.element&&(this.titleBar=this.element.querySelector(b)),this.options.containmentSelector&&this.element&&(this.containmentElement=this.element.closest(this.options.containmentSelector),!this.containmentElement))throw new Error("The containment element was not found. Please make sure the ContainmentSelector value is correct.");if(this.bindEvents(),this.options.navigable&&this.enableTabKeyTrap(),this.resetState(),this.containmentElement){if("static"===window.getComputedStyle(this.containmentElement).position)throw new Error("The containment element should have a position style other than static. Please use relative, absolute, fixed, or sticky.");this.ensureInsideContainment()}}destroy(){this.unbindEvents(),this.options.navigable&&this.disableTabKeyTrap(),this.destroyDraggable(),this.destroyResizable(),super.destroy(),this.content=this.titleBar=null}bindEvents(){this.element&&(this.element.addEventListener(w,this.onKeyDown),this.element.addEventListener(x,this.onFocusIn)),this.containmentElement&&screen.orientation.addEventListener(_,this.onScreenOrientationChange)}unbindEvents(){this.element&&(this.element.removeEventListener(w,this.onKeyDown),this.element.removeEventListener(x,this.onFocusIn)),this.containmentElement&&screen.orientation.removeEventListener(_,this.onScreenOrientationChange)}onAfterShow(t){var e;t.length&&this.setOptions(t[0]),this.unbindEvents(),this.destroyDraggable(),this.destroyResizable();const n=null===(e=this.element)||void 0===e?void 0:e.getAttribute("data-id");this.element=(0,i.getElementByDataId)(n,null),this.element&&(this.titleBar=this.element.querySelector(b),this.content=this.element.querySelector(".k-window-content"),this.bindEvents(),this.initDraggable(),this.initResizable(),this.tabKeyTrap&&this.tabKeyTrap.destroy(),this.enableTabKeyTrap(),this.focusElement())}ensureInsideContainment(){this.adjustToContainmentSize(),this.adjustToContainmentPosition()}adjustToContainmentSize(){if(this.element&&this.containmentElement){const t=this.element.offsetWidth,e=this.containmentElement.clientWidth;t>e&&this.setDimension(h,e);const n=this.element.offsetHeight,i=this.containmentElement.clientHeight;n>i&&this.setDimension(u,i);(t>e||n>i)&&this.invokeMethodAsync(this.options.jsinterop.setSize,{width:this.element.style.width,height:this.element.style.height})}}adjustToContainmentPosition(){if(this.element&&this.containmentElement){const{isInside:t,topOverflow:e,bottomOverflow:n,leftOverflow:r,rightOverflow:s}=(0,o.getOverflowFromContainer)(this.element,this.containmentElement,!0);if(e<0){const t=this.element.offsetTop-e;this.setPosition(t,this.element.offsetLeft)}if(n<0){const t=this.element.offsetTop+n;this.setPosition(t,this.element.offsetLeft)}if(r<0){const t=this.element.offsetLeft-r;this.setPosition(this.element.offsetTop,t)}if(s<0){const t=this.element.offsetLeft+s;this.setPosition(this.element.offsetTop,t)}t||this.invokeMethodAsync(this.options.jsinterop.setPosition,{top:(0,i.toPixel)(this.state.top),left:(0,i.toPixel)(this.state.left)})}}onAfterClose(){this.restoreFocus()}focusElement(){var t;this.options.modal&&(this.state.elementToFocusOnClose=document.activeElement),this.options.navigable&&this.content?(0,i.focusFirstFocusableChild)(this.content.id,!1):null===(t=this.element)||void 0===t||t.focus()}restoreFocus(){this.state.elementToFocusOnClose&&(this.state.elementToFocusOnClose.focus(),this.state.elementToFocusOnClose=null)}invokeKeyDown(t){this.invokeMethodAsync(this.options.jsinterop.keydown,{type:t.type,key:t.key,code:t.keyCode,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,altKey:t.altKey})}enableTabKeyTrap(){this.options.modal&&(this.tabKeyTrap=new i.TabKeyTrap(this.element),this.tabKeyTrap.enableKeyTrap())}disableTabKeyTrap(){this.tabKeyTrap&&this.tabKeyTrap.disableTabKeyTrap()}initDraggable(){this.options.draggable&&this.createDraggable()}createDraggable(){this.titleBar&&(this.draggable=new s.Draggable(this.titleBar,{filter:".k-window-titlebar",ignore:".k-window-titlebar-actions",events:{dragStart:this.onDragStart,drag:this.onDrag,dragEnd:this.onDragEnd}}))}destroyDraggable(){this.draggable&&(this.draggable.destroy(),this.draggable=null)}allowedDrag(){return!this.isMaximized()}initResizable(){this.options.resizable&&this.createResizable()}createResizable(){this.resizable=new l.Resizable(this.element,{draggable:{filter:".k-window > .k-resize-handle"},events:{resizeStart:this.onResizeStart,resize:this.onResize,resizeEnd:this.onResizeEnd}})}destroyResizable(){this.resizable&&(this.resizable.destroy(),this.resizable=null)}tryApplyNewDimension(t,e){this.setDimension(t,e);const{currentWidth:n,currentHeight:i}=this.getDimensions()||{};return t===h&&n?(0,c.roughlyEqual)(e,n,{decimals:2})?(this.state.resizing.targetedWidth=e,!0):(this.setDimension(t,this.state.resizing.targetedWidth),!1):t===u&&i?(0,c.roughlyEqual)(e,i,{decimals:2})?(this.state.resizing.targetedHeight=e,!0):(this.setDimension(t,this.state.resizing.targetedHeight),!1):void 0}constrainDelta(t,e){let n=e;if(t===p){const t=Number(this.state.top)+e;t<0&&(n-=t)}else if(t===m){const t=Number(this.state.left)+e;t<0&&(n-=t)}else if(t===g&&this.containmentElement&&this.element){const t=Number(this.state.top)+e;t>this.containmentElement.clientHeight-this.element.offsetHeight&&(n-=t-(this.containmentElement.clientHeight-this.element.offsetHeight))}else if(t===f&&this.containmentElement&&this.element){const t=Number(this.state.left)+e;t>this.containmentElement.clientWidth-this.element.offsetWidth&&(n-=t-(this.containmentElement.clientWidth-this.element.offsetWidth))}return n}setFixedPosition(){let t={top:0,left:0};if(this.element){if(this.options.modal){const e=this.element.getBoundingClientRect();t={top:e.top,left:e.left}}else t=(0,r.positionWithScroll)(this.element,this.element.parentElement);(0,i.removeClass)("k-centered",this.element),this.setPosition(t.top,t.left)}}setPosition(t,e){this.setState({top:(Math.round(10*t)/10).toFixed(1),left:(Math.round(10*e)/10).toFixed(1)}),this.element&&(this.element.style.top=(0,i.toPixel)(t),this.element.style.left=(0,i.toPixel)(e))}isMaximized(){if(this.element)return"100%"===this.element.style.width&&"100%"===this.element.style.height}getDimensions(){if(this.element){const{width:t,height:e}=this.element.getBoundingClientRect();return{currentWidth:t,currentHeight:e}}}setDimension(t,e){this.element&&(t===h?this.element.style.width=(0,i.toPixel)(e):t===u&&(this.element.style.height=(0,i.toPixel)(e)))}setState(t){this.state=(0,i.extend)(this.state||{},t)}resetState(){this.setState({elementToFocusOnClose:null,top:0,left:0,resizing:{initialWidth:0,initialHeight:0,targetedWidth:0,targetedHeight:0,direction:""},dragging:{dragStarted:!1,initialTop:0,initialLeft:0,cursorOffset:{top:0,left:0}}})}resetDragState(){this.setState({dragging:{}})}resetResizeState(){this.setState({resizing:{}})}initWidth(){if(this.element){if(!Boolean(this.element.style.width)){const t=this.element.offsetWidth;this.setDimension(h,t)}}}}e.Window=S},7640:()=>{},3237:()=>{},7492:()=>{},1815:()=>{},6671:()=>{},2787:()=>{},1635:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__addDisposableResource:()=>P,__assign:()=>o,__asyncDelegator:()=>k,__asyncGenerator:()=>C,__asyncValues:()=>A,__await:()=>S,__awaiter:()=>f,__classPrivateFieldGet:()=>I,__classPrivateFieldIn:()=>F,__classPrivateFieldSet:()=>D,__createBinding:()=>m,__decorate:()=>a,__disposeResources:()=>L,__esDecorate:()=>c,__exportStar:()=>y,__extends:()=>r,__generator:()=>g,__importDefault:()=>O,__importStar:()=>M,__makeTemplateObject:()=>E,__metadata:()=>p,__param:()=>l,__propKey:()=>u,__read:()=>b,__rest:()=>s,__runInitializers:()=>h,__setFunctionName:()=>d,__spread:()=>w,__spreadArray:()=>_,__spreadArrays:()=>x,__values:()=>v,default:()=>N});var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function s(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function a(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);return o>3&&s&&Object.defineProperty(e,n,s),s}function l(t,e){return function(n,i){e(n,i,t)}}function c(t,e,n,i,r,o){function s(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",h=!e&&t?i.static?t:t.prototype:null,u=e||(h?Object.getOwnPropertyDescriptor(h,i.name):{}),d=!1,p=n.length-1;p>=0;p--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(t){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(t||null))};var m=(0,n[p])("accessor"===l?{get:u.get,set:u.set}:u[c],f);if("accessor"===l){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(u.get=a),(a=s(m.set))&&(u.set=a),(a=s(m.init))&&r.unshift(a)}else(a=s(m))&&("field"===l?r.unshift(a):u[c]=a)}h&&Object.defineProperty(h,i.name,u),d=!0}function h(t,e,n){for(var i=arguments.length>2,r=0;r<e.length;r++)n=i?e[r].call(t,n):e[r].call(t);return i?n:void 0}function u(t){return"symbol"==typeof t?t:"".concat(t)}function d(t,e,n){return"symbol"==typeof e&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function p(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))}function g(t,e){var n,i,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(r=s.trys,(r=r.length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){s.label=a[1];break}if(6===a[0]&&s.label<r[1]){s.label=r[1],r=a;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(a);break}r[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var m=Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]};function y(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||m(e,t,n)}function v(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function w(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(b(arguments[e]));return t}function x(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var i=Array(t),r=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}function _(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}function S(t){return this instanceof S?(this.v=t,this):new S(t)}function C(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),o=[];return i={},s("next"),s("throw"),s("return",(function(t){return function(e){return Promise.resolve(e).then(t,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function s(t,e){r[t]&&(i[t]=function(e){return new Promise((function(n,i){o.push([t,e,n,i])>1||a(t,e)}))},e&&(i[t]=e(i[t])))}function a(t,e){try{(n=r[t](e)).value instanceof S?Promise.resolve(n.value.v).then(l,c):h(o[0][2],n)}catch(t){h(o[0][3],t)}var n}function l(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),o.shift(),o.length&&a(o[0][0],o[0][1])}}function k(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:S(t[i](e)),done:!1}:r?r(e):e}:r}}function A(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=v(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){(function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)})(i,r,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var T=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function M(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&m(e,t,n);return T(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function I(t,e,n,i){if("a"===n&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?i:"a"===n?i.call(t):i?i.value:e.get(t)}function D(t,e,n,i,r){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!r)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?r.call(t,n):r?r.value=n:e.set(t,n),n}function F(t,e){if(null===e||"object"!=typeof e&&"function"!=typeof e)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof t?e===t:t.has(e)}function P(t,e,n){if(null!=e){if("object"!=typeof e&&"function"!=typeof e)throw new TypeError("Object expected.");var i,r;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=e[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=e[Symbol.dispose],n&&(r=i)}if("function"!=typeof i)throw new TypeError("Object not disposable.");r&&(i=function(){try{r.call(this)}catch(t){return Promise.reject(t)}}),t.stack.push({value:e,dispose:i,async:n})}else n&&t.stack.push({async:!0});return e}var R="function"==typeof SuppressedError?SuppressedError:function(t,e,n){var i=new Error(n);return i.name="SuppressedError",i.error=t,i.suppressed=e,i};function L(t){function e(e){t.error=t.hasError?new R(e,t.error,"An error was suppressed during disposal."):e,t.hasError=!0}return function n(){for(;t.stack.length;){var i=t.stack.pop();try{var r=i.dispose&&i.dispose.call(i.value);if(i.async)return Promise.resolve(r).then(n,(function(t){return e(t),n()}))}catch(t){e(t)}}if(t.hasError)throw t.error}()}const N={__extends:r,__assign:o,__rest:s,__decorate:a,__param:l,__metadata:p,__awaiter:f,__generator:g,__createBinding:m,__exportStar:y,__values:v,__read:b,__spread:w,__spreadArrays:x,__spreadArray:_,__await:S,__asyncGenerator:C,__asyncDelegator:k,__asyncValues:A,__makeTemplateObject:E,__importStar:M,__importDefault:O,__classPrivateFieldGet:I,__classPrivateFieldSet:D,__classPrivateFieldIn:F,__addDisposableResource:P,__disposeResources:L}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var n=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](n,n.exports,__webpack_require__),n.exports}__webpack_require__.d=(t,e)=>{for(var n in e)__webpack_require__.o(e,n)&&!__webpack_require__.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__(7927);return __webpack_exports__})()));